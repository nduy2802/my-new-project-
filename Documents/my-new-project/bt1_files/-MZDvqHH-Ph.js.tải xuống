;/*FB_PKG_DELIM*/

__d("Mp4TrackFragmentBaseMediaDecodeTimeBox",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=b,b.getVersion()===1?this.$2=a.readUint64():this.$2=a.readUint32()}var b=a.prototype;b.getBaseDecodeTime=function(){return this.$2};b.getFullBox=function(){return this.$1};return a}();a.canonicalType="tfdt";f["default"]=a}),66);
__d("Mp4TrackFragmentHeaderBox",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=b;this.$2=a.readUint32();b=b.getFlags();this.$3=null;this.$4=null;this.$5=null;this.$6=null;this.$7=null;b&1&&(this.$3=a.readUint64());b&2&&(this.$4=a.readUint32());b&8&&(this.$5=a.readUint32());b&16&&(this.$6=a.readUint32());b&32&&(this.$7=a.readUint32())}var b=a.prototype;b.getTrackID=function(){return this.$2};b.getDefaultSampleSize=function(){return this.$6};b.getDefaultSampleDuration=function(){return this.$5};b.getSampleDescriptionIndex=function(){return this.$4};b.isDurationEmpty=function(){return!!(this.$1.getFlags()&65536)};b.getFullBox=function(){return this.$1};b.getBaseDataOffset=function(){return this.$3};return a}();a.canonicalType="tfhd";f["default"]=a}),66);
__d("Mp4TrackRunBox",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=b;this.$2=a.readUint32();b=b.getFlags();b&1&&(this.$3=a.readInt32());b&4&&(this.$4=a.readUint32());var c=0;this.$5=new Array(this.$2);while(c<this.$2){var d={sampleDuration:null,sampleSize:null,sampleFlags:null,sampleCompositionTimeOffset:null};b&256&&(d.sampleDuration=a.readUint32());b&512&&(d.sampleSize=a.readUint32());b&1024&&!(b&4)&&(d.sampleFlags=a.readUint32());b&2048&&(d.sampleCompositionTimeOffset=a.readUint32());this.$5[c++]=d}}var b=a.prototype;b.getSamples=function(){return this.$5};b.getSampleCount=function(){return this.$2};b.getDataOffset=function(){return this.$3};b.getFirstSampleFlags=function(){return this.$4};b.getFullBox=function(){return this.$1};return a}();a.canonicalType="trun";f["default"]=a}),66);
__d("VideoPlayerCea608Command",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({TEXT:"text",PAC:"pac",MIDROW:"midrow",CARRIAGE_RETURN:"carriage_return",START_ROLL_UP_2:"start_roll_up_2",START_ROLL_UP_3:"start_roll_up_3",START_ROLL_UP_4:"start_roll_up_4",END_OF_CAPTION:"end_of_caption",ERASE_DISPLAY_MEMORY:"erase_display_memory",ERASE_NON_DISPLAY_MEMORY:"erase_non_display_memory",BACKSPACE:"backspace",DELETE_TIL_END_OF_ROW:"delete_til_end_of_row",RESUME_DIRECT_CAPTIONING:"resume_direct_captioning",RESUME_CAPTION_LOADING:"resume_caption_loading",TAB_OFFSET:"tab_offset",FLASH_ON:"flash_on",__DEPRECATED__ALARM_OFF:"alarm_off",__DEPRECATED__ALARM_ON:"alarm_on",__DEPRECATED__TEXT_RESTART:"text_restart",__DEPRECATED__RESUME_TEXT_DISPLAY:"resume_text_display"});b=a;f["default"]=b}),66);
__d("extractCEA608",["JSResource"],(function(a,b,c,d,e,f,g){var h=null;function a(a){h||(h=c("JSResource")("CEA608Extractor").__setRef("extractCEA608").load());return h.then(function(b){return b.extract(a)})}a.prepare=function(){return};g["default"]=a}),98);
__d("VideoPlayerCea608CaptionsSourceImplFacebook",["VideoPlayerCea608Command","extractCEA608"],(function(a,b,c,d,e,f,g){"use strict";var h=15,i=32,j=function(){function a(){this.$2=0;this.$1=new Array(i);for(var a=0;a<i;++a)this.$1[a]=" "}var b=a.prototype;b.setPos=function(a){this.$2=Math.max(0,Math.min(i-1,a))};b.movePos=function(a){a=this.$2+a;this.setPos(a)};b.backspace=function(){this.movePos(-1),this.$1[this.$2]=" "};b.putCharacter=function(a){var b=this.$2;b<i&&(this.$1[b]=a,this.movePos(1))};b.clearFromPos=function(a){for(a=a;a<i;a++)this.$1[a]=" "};b.clear=function(){this.clearFromPos(0),this.$2=0};b.clearToEndOfRow=function(){this.clearFromPos(this.$2)};b.getCharacters=function(){return this.$1};b.getPos=function(){return this.$2};return a}(),k=function(){function a(){this.$2=h-1;this.$3=null;this.$1=new Array(h);for(var a=0;a<h;++a)this.$1[a]=new j()}var b=a.prototype;b.clear=function(){this.$1.forEach(function(a,b){a.clear()})};b.setPAC=function(a){var b=a.row-1;this.$3!=null&&b<this.$3-1&&(b=this.$3-1);this.$2=b;b=this.$1[this.$2];a.indent!==null&&b.setPos(a.indent)};b.putCharacter=function(a){var b=this.$1[this.$2];b.putCharacter(a)};b.movePos=function(a){var b=this.$1[this.$2];b.movePos(a)};b.setRollupSize=function(a){this.$3=a};b.rollup=function(){if(this.$3==null)return;var a=this.$2+1-this.$3;a=this.$1.splice(a,1)[0];a.clear();this.$1.splice(this.$2,0,a)};b.backspace=function(){this.$1[this.$2].backspace()};b.clearToEndOfRow=function(){this.$1[this.$2].clearToEndOfRow()};b.getRows=function(){return this.$1.slice()};b.getCurrentRowIndex=function(){return this.$2};return a}();function l(a){return a.getRows().map(function(a){return a.getCharacters().join("")})}function m(a){var b=a.getCurrentRowIndex();return"\n"+a.getRows().map(function(a,c){var d=a.getPos();return String(c+1).padStart(3," ")+" ["+a.getCharacters().join("")+"]"+(c===b?"< ":"  ")+String(d).padStart(2," ")}).join("\n")+"\n"}var n=function(){function a(){}var b=a.prototype;b.handleCommand=function(a,b,d){switch(a.type){case c("VideoPlayerCea608Command").TEXT:d.putCharacter(a.data.character);return!1;case c("VideoPlayerCea608Command").TAB_OFFSET:d.movePos(a.data.tabOffset);return!1;case c("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case c("VideoPlayerCea608Command").BACKSPACE:d.backspace();return!1;case c("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:d.clearToEndOfRow();return!1;case c("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:b.clear();return!0;case c("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case c("VideoPlayerCea608Command").PAC:d.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),o=function(){function a(){}var b=a.prototype;b.handleCommand=function(a,b,d){switch(a.type){case c("VideoPlayerCea608Command").TEXT:b.putCharacter(a.data.character);return!0;case c("VideoPlayerCea608Command").TAB_OFFSET:b.movePos(a.data.tabOffset);return!1;case c("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case c("VideoPlayerCea608Command").BACKSPACE:b.backspace();return!0;case c("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:b.clearToEndOfRow();return!0;case c("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:b.clear();return!0;case c("VideoPlayerCea608Command").PAC:b.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),p=function(){function a(){}var b=a.prototype;b.handleCommand=function(a,b,c){return this.$1(a,b,c)};b.$1=function(a,b,d){switch(a.type){case c("VideoPlayerCea608Command").TEXT:b.putCharacter(a.data.character);return!0;case c("VideoPlayerCea608Command").TAB_OFFSET:b.movePos(a.data.tabOffset);return!1;case c("VideoPlayerCea608Command").CARRIAGE_RETURN:b.rollup();return!0;case c("VideoPlayerCea608Command").BACKSPACE:b.backspace();return!0;case c("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:b.clearToEndOfRow();return!0;case c("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:b.clear();return!0;case c("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case c("VideoPlayerCea608Command").PAC:b.setPAC(a.data.pacData);return!1;default:return!1}};return a}();a=function(){function a(a){var b=a.onCaptionsLoaded;a=a.onCaptionsChanged;this.$1=null;this.$2=null;this.$3=[];this.$4=null;this.$5=new k();this.$6=new k();this.$7=new n();this.$8=null;this.$9=null;this.$10={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0};this.$1=b;this.$2=a}var b=a.prototype;b.appendFragments_DEPRECATED=function(a){this.$11(a)};b.processBytes=function(a){var b=this;this.$10.processStartedCount++;return c("extractCEA608")({debugLogEnabled:!1,timescale:a.timescale,videoBytes:a.videoBytes}).then(function(a){b.$10.processedCount++,b.$11(a)})};b.handleTimeUpdate=function(a){this.$12(a)};b.getStagingScreenForTestSnapshot=function(){return m(this.$6)};b.getDisplayScreenForTestSnapshot=function(){return m(this.$5)};b.getCurrentScreenRepresentation=function(){return{rows:this.$8,styles:this.$9}};b.destroy=function(){this.$1=null,this.$2=null,this.$3.length=0,this.$4=null,this.$5.clear(),this.$6.clear(),this.$8=null,this.$9=null,this.$10={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0}};b.$11=function(a){var b=this,c=this.$1;c&&(c(),this.$1=null);a.forEach(function(a){var c=a.presentationTime,d;for(d=b.$3.length;d>0;d--){var e=d===b.$3.length?Number.MAX_VALUE:b.$3[d].presentationTime,f=b.$3[d-1].presentationTime;if(c<e&&c>=f)break}b.$10.fragmentsInsertedCount++;b.$3.splice(d,0,a)})};b.$12=function(a){this.$10.timeUpdateHandledCount++;if(!this.$3.length||this.$3[0].presentationTime>a)return;var b=0;for(;b<this.$3.length;++b){var d=this.$3[b];if(d.presentationTime>a)break;this.$10.fragmentsProcessedCount++;if(this.$4!=null&&(d.type!==c("VideoPlayerCea608Command").TEXT||d.data.isSpecial===!0)&&JSON.stringify(d)===JSON.stringify(this.$4))continue;this.$4=d;d=this.$13(d);d;this.$10.commandsHandledCount++}this.$3.splice(0,b);this.$14(l(this.$5),{textAlignment:this.$15(this.$7)})};b.$13=function(a){switch(a.type){case c("VideoPlayerCea608Command").RESUME_CAPTION_LOADING:this.$7=new n();return!1;case c("VideoPlayerCea608Command").RESUME_DIRECT_CAPTIONING:this.$7=new o();this.$5=this.$6;this.$6=new k();return!0;case c("VideoPlayerCea608Command").END_OF_CAPTION:if(this.$7 instanceof n){var b=this.$6;this.$6=this.$5;this.$5=b;return!0}return!1;case c("VideoPlayerCea608Command").START_ROLL_UP_2:this.$5.setRollupSize(2);this.$7=new p();return!1;case c("VideoPlayerCea608Command").START_ROLL_UP_3:this.$5.setRollupSize(3);this.$7=new p();return!1;case c("VideoPlayerCea608Command").START_ROLL_UP_4:this.$5.setRollupSize(4);this.$7=new p();return!1}return this.$7.handleCommand(a,this.$5,this.$6)};b.$15=function(a){if(a instanceof n)return"center";else if(a instanceof o)return"center";else if(a instanceof p)return"left";else return"center"};b.$14=function(a,b){if(this.$8==null||this.$8.length!==a.length||this.$8.some(function(b,c){return b!==a[c]})){this.$10.changedCount++;var c=this.$2;c&&c(a,b)}this.$8=a;this.$9=b};return a}();g["default"]=a}),98);
__d("VideoPlayerCea608CaptionsSource",["VideoPlayerCea608CaptionsSourceImplFacebook"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("VideoPlayerCea608CaptionsSourceImplFacebook")}),98);