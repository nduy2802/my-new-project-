;/*FB_PKG_DELIM*/

__d("MaybeNativePromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;c=a.Promise||g||(g=b("Promise"));(g||b("Promise")).resolve();d=c;f["default"]=d}),66);
__d("VideoPlayerNextgendashEngineData",["VideoPlayerOzImplementationData","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.nextgendashAvailability;a=babelHelpers.objectWithoutPropertiesLoose(a,["nextgendashAvailability"]);if(b!=="AVAILABLE"){var e=c("err")("nextgendashAvailability="+b);e.name="GotNextgendashAvailability/"+b;return e}b=d("VideoPlayerOzImplementationData").makeOzImplementationData(a);return b}g.makeNextgendashEngineData=a}),98);
__d("VideoPlayerNextgendashImplementation.react",["VideoPlayerImplementationEngineAPI","VideoPlayerNextgendashEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerNextgendashEngine").createVideoPlayerNextgendashEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("VideoPlayerSphericalMediaGyroOverlay.react",["fbt","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isActive;var c;b[0]!==a?(c={0:{className:"xal61yo x5yr21d xtzzx4i xg01cxk x10l6tqk xwa60dl x11lhmoz x1oyok0e xippbsu x19991ni xl405pv xh8yej3 x1vjfegm"},1:{className:"xal61yo x5yr21d xtzzx4i x10l6tqk xwa60dl x11lhmoz x1oyok0e xippbsu x19991ni xl405pv xh8yej3 x1vjfegm x1hc1fzr"}}[!!a<<0],b[0]=a,b[1]=c):c=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsxs("div",babelHelpers["extends"]({className:"xatbrnm x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf x10w94by x1qhh985 x14e42zd xy75621 xtzzx4i x1hc1fzr x10l6tqk xwa60dl xnrv1ok xni59qk"},{children:[j.jsxs("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk xgjxtca x8tsxso x1lqxvo2 x158ip91 x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf xng8ra xit27t2 x10l6tqk xndqk7f x7p49u4 x1oyok0e x1247r65 x1xwhoib"},{children:[j.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk x15r1fc x1ngqhlp x16vvtso xniwfb6 x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xwa7hi xtzzx4i x10l6tqk xuuh30 xnhpnai x13w7htt x3zwtg x1esw782"}),j.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk x1ahlmzr x15r1fc x1ngqhlp x16vvtso xniwfb6 x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x10c73hc x10l6tqk xwa60dl x1cb1t30 x1u78mur x5uqrmk xxoll9x"})]})),j.jsx("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf x10w94by x1qhh985 x14e42zd xng8ra xtzzx4i x6ikm8r x10wlt62 x10l6tqk x1atx4j1 xuuh30 xuxw1ft xnhpnai x5uqrmk xi294cv"},{children:h._(/*BTDS*/"{=m0}",[h._implicitParam("=m0",j.jsx("span",babelHelpers["extends"]({className:"x972fbf x10w94by x1qhh985 x14e42zd x14ctfv xjb2p0i x1f6kntn xng8ra xtzzx4i x1wus3qs x10l6tqk x2b8uid xuuh30 xnhpnai"},{children:h._(/*BTDS*/"360")})))])}))]})),b[2]=a):a=b[2];b[3]!==c?(a=j.jsx("div",babelHelpers["extends"]({},c,{children:a})),b[3]=c,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("VideoPlayerSphericalFallbackCover.react",["fbt","FDSText.react","VideoPlayerSphericalMediaGyroOverlay.react","react","react-compiler-runtime","unrecoverableViolation","useCometRouterDispatcher","useFeedClickEventHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState;function a(a){var b=d("react-compiler-runtime").c(15),e=a.videoTahoeUrl,f=c("useCometRouterDispatcher")();a=k(!1);var g=a[0],i=a[1];if(f==null)throw c("unrecoverableViolation")("Missing CometRouterDispatcher","comet_video_player");b[0]!==f||b[1]!==e?(a=function(){f.go(e,{})},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=c("useFeedClickEventHandler")(a);var l;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"x6s0dn4 x1ey2m1c x9f619 x1ypdohk x78zum5 xdt5ytf xds687c x17qophe x13a6bvl x10l6tqk x13vifvy"},b[3]=l):l=b[3];var m,n;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(){return i(!0)},n=function(){return i(!1)},b[4]=m,b[5]=n):(m=b[4],n=b[5]);var o,p;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("VideoPlayerSphericalMediaGyroOverlay.react"),{isActive:!0}),p={className:"xwajptj x1n2onr6"},b[6]=o,b[7]=p):(o=b[6],p=b[7]);var q;b[8]!==g?(q=g?j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"bodyLink3",children:h._(/*BTDS*/"Nh\u1ea5p \u0111\u1ec3 m\u1edf r\u1ed9ng")}):null,b[8]=g,b[9]=q):q=b[9];b[10]!==q?(g=j.jsx("div",babelHelpers["extends"]({},p,{children:q})),b[10]=q,b[11]=g):g=b[11];b[12]!==a||b[13]!==g?(p=j.jsxs("div",babelHelpers["extends"]({},l,{onClick:a,onMouseEnter:m,onMouseLeave:n,role:"link",tabIndex:0,children:[o,g]})),b[12]=a,b[13]=g,b[14]=p):p=b[14];return p}g["default"]=a}),226);
__d("handleCometRelayExpiredVideoUrlRefresh",["ErrorMetadata","ErrorSerializer","FBLogger","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b==null?void 0:b.video,e=d==null?void 0:d.rmd_refreshed_url,f=e==null?void 0:e.new_url,g=e==null?void 0:e.reason,h=null;b==null?h=c("err")("Video URL refresh GraphQL response data is "+(b===null?"null":"undefined")):d==null?h=c("err")("Video URL refresh GraphQL response video is "+(d===null?"null":"undefined")):e==null?h=c("err")("Video URL refresh GraphQL response video.rmd_refreshed_url is "+(e===null?"null":"undefined")):(f==null||f==="")&&(g==null||g==="")&&(h=c("err")("Video URL refresh GraphQL response video.rmd_refreshed_url.new_url is "+(f===""?"an empty string":f===null?"null":"undefined")+" and video.rmd_refreshed_url.reason is "+(g===""?"an empty string":g===null?"null":"undefined")));if(h!=null){b=new(c("ErrorMetadata"))();b.addEntry("COMET_VIDEO","VIDEO_ID",String(a));h.metadata=b;throw c("FBLogger")("comet_video_player").catching(h).mustfixThrow("Video URL refresh failed for ID: %s - %s",String(a),c("ErrorSerializer").toReadableMessage(h))}return{reason:(d=g)!=null?d:null,refreshedUrl:(e=f)!=null?e:null}}g["default"]=a}),98);
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{return c(a)}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,d,e,f){e===void 0&&(e=function(){});f===void 0&&(f=function(){});var g=b.getOperationLogger(d).start();e(g);a.then(function(a){f(g),g.log()},function(a){f(g),g.setError(a),g.log()})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,d+" logger")})}g.executeOperationAndLog=a;g.monitorPromiseAndLogOperation=b}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$52=new Map(),this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setPerSessionSampleRate=function(a){this.$3=a;return this};b.setAppendTarget=function(a){this.$47=a;return this};b.setOneObserved=function(a){this.$44=a;return this};b.setOneReqWave=function(a){this.$45=a;return this};b.setOneResWave=function(a){this.$46=a;return this};b.setIsP2pPlayback=function(a){this.$43=a;return this};b.setResult=function(a){this.$4=a;return this};b.setType=function(a){this.$5=a;return this};b.setClientTimeBegin=function(a){this.$6=a;return this};b.setClientTimeDuration=function(a){this.$7=a;return this};b.setClientTimeEnd=function(a){this.$8=a;return this};b.setSegmentCount=function(a){this.$15=a;return this};b.setTimeToFirstByte=function(a){this.$9=a;return this};b.setTimeToLastByte=function(a){this.$10=a;return this};b.setTimeToRequestStart=function(a){this.$11=a;return this};b.setTimeToRequestSent=function(a){this.$12=a;return this};b.setReason=function(a){this.$13=a;return this};b.setResource=function(a){this.$14=a;return this};b.setSegmentStartTime=function(a){this.$16=a;return this};b.setSegmentEndTime=function(a){this.$17=a;return this};b.setLength=function(a){this.$18=a;return this};b.setLiveheadPosition=function(a){this.$19=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$20=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$21=a;return this};b.setManifestType=function(a){this.$22=a;return this};b.setMediaSourceNewDuration=function(a){this.$23=a;return this};b.setMediaSourcePreviousDuration=function(a){this.$24=a;return this};b.setPriorityFloat=function(a){this.$25=a;return this};b.setAppendedBufferMs=function(a){this.$26=a;return this};b.setInitiator=function(a){this.$27=a;return this};b.setPreloadTime=function(a){this.$28=a;return this};b.setConcluder=function(a){this.$29=a;return this};b.setPreviousRepresentationID=function(a){this.$30=a;return this};b.setRepresentationID=function(a){this.$31=a;return this};b.setStreamSwitchReason=function(a){this.$32=a;return this};b.setState=function(a){this.$33=a;return this};b.setContentLengthHeader=function(a){this.$34=a;return this};b.setOriginHitHeader=function(a){this.$36=a;return this};b.setEdgeHitHeader=function(a){this.$37=a;return this};b.setFNAHitHeader=function(a){this.$38=a;return this};b.setCode=function(a){this.$35=a;return this};b.setResponseTimeMsHeader=function(a){this.$39=a;return this};b.setIsTemplatedManifest=function(a){this.$40=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$41=a;return this};b.setPlayerFormat=function(a){this.$42=a;return this};b.setIsRingBufferSample=function(a){this.$48=a;return this};b.setIsOnline=function(a){this.$49=a;return this};b.setProxyStatusHeader=function(a){this.$50=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setPreferredEdgeLatency=function(a){this.$51=a;return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.setIsMixedCodecManifest=function(a){this.$53=a;return this};b.getPerSessionSampleRate=function(){return this.$3};b.setMediaSourceSourceBuffer=function(a,b){this.$52.set(a,b);return this};b.unsetMediaSourceSourceBuffers=function(){this.$52.clear();return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$4};b.getType=function(){return this.$5};b.getClientTimeBegin=function(){return this.$6};b.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8};b.getTimeToRequestStart=function(){return this.$11};b.getTimeToRequestSent=function(){return this.$12};b.getReason=function(){return this.$13};b.getResource=function(){return this.$14};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$16};b.getSegmentEndTime=function(){return this.$17};b.getLength=function(){return this.$18};b.getLiveheadPosition=function(){return this.$19};b.getManifestType=function(){return this.$22};b.getIsMixedCodecManifest=function(){return this.$53};b.getPriorityFloat=function(){return this.$25};b.getAppendedBufferMs=function(){return this.$26};b.getInitiator=function(){return this.$27};b.getPreloadTime=function(){return this.$28};b.getConcluder=function(){return this.$29};b.getContentLengthHeader=function(){return this.$34};b.getOriginHitHeader=function(){return this.$36};b.getEdgeHitHeader=function(){return this.$37};b.getFNAHitHeader=function(){return this.$38};b.getCode=function(){return this.$35};b.getResponseTimeMsHeader=function(){return this.$39};b.getIsTemplatedManifest=function(){return this.$40};b.getOneObserved=function(){return this.$44};b.getOneReqWave=function(){return this.$45};b.getOneResWave=function(){return this.$46};b.getAppendTarget=function(){return this.$47};b.getIsRingBufferSample=function(){return this.$48};b.getIsOnline=function(){return this.$49};b.getProxyStatusHeader=function(){return this.$50};b.getMediaSourceSourceBuffers=function(){return this.$52};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter$p_1=!1;d.$OzErrorEmitter$p_2=!1;d.$OzErrorEmitter$p_3=[];d.emitError=function(a){!d.$OzErrorEmitter$p_1?d.$OzErrorEmitter$p_2?d.$OzErrorEmitter$p_3.push(a):d.$OzErrorEmitter$p_1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter$p_2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter$p_1=!0;a=this.addListener("error",a);this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=[];this.$12=[];this.$22=function(a,b){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed"),b!=null&&a.setReason(b)};this.$19=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();b=b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,f.$3,"drm_create_media_keys",function(){},f.$22);return b};this.$20=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var g=a.getServerCertificate();return g?e.setServerCertificate(g).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$22);return a};this.$21=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$23(b,e,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$23(b,e,{initData:a.data,initDataType:a.type})});a=c("oz-player/shims/OzMaybeNativePromise").all(a);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_request_license",function(){},f.$22);return a};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$13=function(a){this.$7.emitError(a)};b.$14=function(a){var b;b=(b=(b=this.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;this.$10<b?this.$15():this.$13(a)};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$16=function(a){if(!a)return null;var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(b){var a=b;this.$13(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b){var c=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;var e=new Map();this.$17(b,e,"audio");this.$17(a,e,"video");var f;e.forEach(function(a,b){!f?f=c.$18(b,a):f=f["catch"](function(){return c.$18(b,a)})});if(!f){this.$9=!1;return}this.$9=!0;var g=this.$3.getOperationLogger("drm_setup").start();f.then(this.$19).then(this.$20).then(this.$21).then(function(){return g.log()},function(a){a=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keyPromiseChain rejection"});c.$13(a);g.setResult("failed").setError(a).log()})};b.$17=function(a,b,c){var d=this;a.forEach(function(a){var e=d.$16(a.getContentProtectionXml()),f=a.getMimeCodecs();e!=null&&e.forEach(function(a){a=a.provider;var d=a.getKeySystem(),e=b.get(d);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},b.set(d,e));c==="audio"&&!e.audioCapabilities.has(f)&&e.audioCapabilities.set(f,{contentType:f,robustness:a.getAudioRobustness()});c==="video"&&!e.videoCapabilities.has(f)&&e.videoCapabilities.set(f,{contentType:f,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$18=function(a,b){var e=this,f={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};b=window.navigator.requestMediaKeySystemAccess(a,[f]);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$3,"drm_request_media_key_system_access",function(){},function(b){var d=null;b instanceof c("oz-player/loggings/OzOperationLoggerBase")&&b.getError()&&(d="keySystem: "+a+";domConfig: "+JSON.stringify(f));return e.$22(b,d)});return b};b.$23=function(a,b,e){var f=this,g=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"message",function(a){f.$24(g,b,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"keystatuseschange",function(a){f.$25(g)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})}));return g.generateRequest(e.initDataType,e.initData)};b.$24=function(a,b,c){var e=this;c=b.getLicenseRequestInfo(c.message.slice(0));var f=this.$3.getOperationLogger("drm_fetch_license").setResource(c.url).start();return window.fetch(c.url,c).then(function(c){c.ok?f.setResult("success").setCode(c.status).log():f.setResult("failed").setCode(c.status).setError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+c.status+")",extra:{code:c.status.toString()}})).log();return c.arrayBuffer().then(function(f){var g=new Uint8Array(f);g=b.parseLicenseResponse(g);if(g==null||g.byteLength===0){var h=g==null?"License is null or undefined.":"License is 0 bytes.";!c.ok?h+=" HTTP status not OK ("+c.status+")":f.byteLength===0&&(h+=" HTTP status OK ("+c.status+"), but response body is 0 bytes");f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem()+" - "+h,extra:{code:c.status.toString(),headers:c.headers,url:c.url}});h=(h=(h=e.$1)==null?void 0:h.throwNoLicenseError)!=null?h:!1;if(h)throw f;else e.$13(f)}else a.update(g)})})};b.$25=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b.getTime()-a.getTime():0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider$p_1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){return new h(a,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(b){return b.getOperationLogger(a)}))};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider$p_1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger$p_1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.start()});return this};c.setPerSessionSampleRate=function(a){b.prototype.setPerSessionSampleRate.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPerSessionSampleRate(a)});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setType(a)});return this};c.setMediaSourcePreviousDuration=function(a){b.prototype.setMediaSourcePreviousDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourcePreviousDuration(a)});return this};c.setMediaSourceNewDuration=function(a){b.prototype.setMediaSourceNewDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceNewDuration(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setFNAHitHeader=function(a){b.prototype.setFNAHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setFNAHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.setIsTemplatedManifest=function(a){b.prototype.setIsTemplatedManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsTemplatedManifest(a)});return this};c.setIsLatencyCachupEnabled=function(a){b.prototype.setIsLatencyCachupEnabled.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsLatencyCachupEnabled(a)});return this};c.setPlayerFormat=function(a){b.prototype.setPlayerFormat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlayerFormat(a)});return this};c.setIsP2pPlayback=function(a){b.prototype.setIsP2pPlayback.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsP2pPlayback(a)});return this};c.setOneObserved=function(a){b.prototype.setOneObserved.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneObserved(a)});return this};c.setOneReqWave=function(a){b.prototype.setOneReqWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneReqWave(a)});return this};c.setOneResWave=function(a){b.prototype.setOneResWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneResWave(a)});return this};c.setAppendTarget=function(a){b.prototype.setAppendTarget.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendTarget(a)});return this};c.setIsRingBufferSample=function(a){b.prototype.setIsRingBufferSample.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsRingBufferSample(a)});return this};c.setIsOnline=function(a){b.prototype.setIsOnline.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsOnline(a)});return this};c.setIsMixedCodecManifest=function(a){b.prototype.setIsMixedCodecManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsMixedCodecManifest(a)});return this};c.setProxyStatusHeader=function(a){b.prototype.setProxyStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setProxyStatusHeader(a)});return this};c.setPlaybackFbmsParam=function(a){b.prototype.setPlaybackFbmsParam.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlaybackFbmsParam(a)});return this};c.setPreferredEdgeLatency=function(a){b.prototype.setPreferredEdgeLatency.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreferredEdgeLatency(a)});return this};c.setUserInfo=function(a){b.prototype.setUserInfo.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setUserInfo(a)});return this};c.setDynamicStatusHeader=function(a){b.prototype.setDynamicStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setDynamicStatusHeader(a)});return this};c.setMediaSourceSourceBuffer=function(a,c){b.prototype.setMediaSourceSourceBuffer.call(this,a,c);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceSourceBuffer(a,c)});return this};c.unsetMediaSourceSourceBuffers=function(){b.prototype.unsetMediaSourceSourceBuffers.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.unsetMediaSourceSourceBuffers()});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.log()})};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}function i(a,b,c){if(!a||b===""||c==="")return null;b=(a=a.get(b))!=null?a:"";a=b.split(";");for(b=0;b<a.length;b++){var d=a[b].split(":");if(d.length===2&&d[0]===c){d=parseInt(d[1],10);return isFinite(d)?d:null}}return null}a={getNextValidSegmentId:function(a){return h(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return h(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return h(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return h(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){var b=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),d=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return i(a,b,d)},getBandwidthStandardDeviationEstimate:function(a){return h(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return h(a,"x-mrtt-ms")}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5=null;this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/);this.$7={m4a:{time:0},m4v:{time:0}};this.$8={audio:"m4a",video:"m4v"};this.$9={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.getLast200RequestedTime=function(){return this.$5};b.getLast200RequestedUrlDecisionMinTime=function(){var a=[];for(var b in this.$7)a.push(this.$7[b].time);return Math.min.apply(Math,a)};b.getLast200RequestedUrlDecisionTimeByMimeType=function(a){return(a=this.$7[this.$8[a]])==null?void 0:a.time};b.updateWithResponse=function(a,b,d,e){var f;if(!e.headers||e.status!=200)return;this.$5=b;this.$1=(f=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(e.headers))!=null?f:this.$1;this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(e.headers);this.$10(a,d);(this.$2!=null||this.$2==="200")&&(this.$4=b)};b.$10=function(a,b){a=this.$6.exec(a);if(a!=null){a=a[2];b!=null&&(this.$7[a]={time:b})}};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$11(a);a=this.$12(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$11=function(a){this.$9[a]==null&&(this.$9[a]={segmentCount:0});return this.$9[a].segmentCount=this.$9[a].segmentCount!=null?this.$9[a].segmentCount+1:0};b.$12=function(a){return this.$9[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$1=a,this.$2=b,this.$11=c,this.$6=g,this.$3=d,this.$4=e,this.$5=f,this.$7=h,this.$8=i,this.$9=j,this.$10=k,this.$12=l,this.$13=m}var b=a.prototype;b.getContentProtectionXml=function(){return this.$2};b.getID=function(){return this.$11};b.getBandwidth=function(){return this.$10};b.getMimeCodecs=function(){return c("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)};b.getMimeType=function(){return this.$3};b.getCodecs=function(){return this.$4};b.getVariantKey=function(){return this.$5};b.getLang=function(){return this.$6};b.getRole=function(){return this.$7};b.getDisplayLabel=function(){return this.$11};b.getInitSegment=function(){return this.$8};b.getCustomFieldFirstSegment=function(){return this.$12};b.getCustomField=function(a){if(this.$13==null||!this.$13[a])throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$13[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$9.updateWith(b.$9)};b.getSegmentByTime=function(a){return this.$9.getSegmentByTime(a)};b.getSegment=function(a){return this.$9.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$9.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$9.canPredict()};b.canApproximateId=function(){return this.$9.canApproximateId()};b.getSegmentAfter=function(a){return this.$9.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$9.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$9.addUpdateListener(a)};b.getTimeRanges=function(){return this.$9.getTimeRanges()};b.blockTimeRange=function(a){this.$9.blockTimeRange(a)};b.getEndingSegment=function(){return this.$9.getEndingSegment()};b.getMaxGopSec=function(){return this.$9.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;c.$OzVideoRepresentation$p_5=null;c.$OzVideoRepresentation$p_6=null;c.$OzVideoRepresentation$p_7=null;c.$OzVideoRepresentation$p_1=o;c.$OzVideoRepresentation$p_2=p;c.$OzVideoRepresentation$p_4=n;c.$OzVideoRepresentation$p_3=b;if(n!=null){if(n.playbackResolutionMos!=null){d=c.getCustomField("playbackResolutionMos");c.$OzVideoRepresentation$p_7=d!=null?String(d):null}if(n.playbackResolutionCsvqm!=null){e=c.getCustomField("playbackResolutionCsvqm");c.$OzVideoRepresentation$p_6=e!=null?String(e):null}}return c}var c=b.prototype;c.getQualityScoreCurveString=function(a){if(a==="csvqm")return this.$OzVideoRepresentation$p_6;else return this.$OzVideoRepresentation$p_7};c.getWidth=function(){return this.$OzVideoRepresentation$p_1};c.getHeight=function(){return this.$OzVideoRepresentation$p_2};c.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var a=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;a&&(this.$OzVideoRepresentation$p_5=a(this.$OzVideoRepresentation$p_3));(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation$p_5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}function b(a){a=(a.split(";")[0]||"").trim();a=(a.split("/")[1]||"").trim();return a}function c(a){a=a.split('codecs="').pop();return a.split(".")[0].trim()}f.getMimeType=a;f.getContainerType=b;f.getParsedCodecFamily=c}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.$2=c,this.$3=b,this.$4=d}var b=a.prototype;b.registerOnUpdateStartListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",a)};b.registerOnUpdateEndListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",a)};b.registerOnUpdateListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",a)};b.registerOnErrorListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",a)};b.getIsUpdating=function(){return this.$1.updating};b.getBuffered=function(){return this.$1.buffered};b.setAppendWindowEnd=function(a){this.$1.appendWindowEnd=a};b.appendBuffer=function(a,b){var c,e=(c=d("oz-player/utils/OzMimeUtil")).getMimeType(b)!==c.getMimeType(this.$3),f=c.getContainerType(b)!==c.getContainerType(this.$3);c=c.getParsedCodecFamily(b)!==c.getParsedCodecFamily(this.$3);if(e||f||c)if(this.$4){try{this.$1.changeType(b)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+b+'"): '+String(a)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}this.$3=b}else throw d("oz-player/utils/OzErrorUtils").createOzError({description:"SourceBufferChangeTypeError: attempted to call changeType() on a SourceBuffer that does not support it.",type:"OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE"});this.$1.appendBuffer(a)};b.abort=function(){this.$1.abort()};b.remove=function(a,b){this.$1.remove(a,b)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.getBuffered().length;c++)b+=a.getBuffered().end(c)-a.getBuffered().start(c);return b}function b(a){return a.reduce(function(a,b){return a+(b.endTime-b.startTime)},0)}function c(a){return a.getBuffered().length==0?0:a.getBuffered().start(0)}function e(a){var b=null;try{b=a.getBuffered()}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function f(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function h(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function i(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e==null?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getTotalInBufferedRanges=b;g.getStartBufferedTime=c;g.getEndBufferedTime=e;g.convertToBufferedTimeRangeArray=f;g.getBufferAheadInBufferedRanges=h;g.getTotalBufferAheadOfPosition=i}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:e,endTime:a}}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.dispatchEvent=function(a){if(this.$1[a]==null)return;this.$1[a].forEach(function(a){return a()})};b.addEventListener=function(a,b){var c=this;this.$1[a]===void 0&&(this.$1[a]=new Set());this.$1[a].add(b);return{remove:function(){c.removeEventListener(a,b)}}};b.removeEventListener=function(a,b){if(!this.$1[a])return;this.$1[a]["delete"](b)};b.destroy=function(){this.$1={}};return a}();f["default"]=a}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzObservedSourceBufferState$p_3=[];e.$OzObservedSourceBufferState$p_6=function(){var a;try{a=e.$OzObservedSourceBufferState$p_1.getBuffered()}catch(a){if(a.name==="InvalidStateError"){e.$OzObservedSourceBufferState$p_3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});e.$OzObservedSourceBufferState$p_3=b};e.$OzObservedSourceBufferState$p_1=b;e.$OzObservedSourceBufferState$p_4=d;e.$OzObservedSourceBufferState$p_5();return e}var d=b.prototype;d.$OzObservedSourceBufferState$p_5=function(){var a=this;this.$OzObservedSourceBufferState$p_2.release();this.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){a.$OzObservedSourceBufferState$p_6(),a.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))};d.setSourceBuffer=function(a){this.$OzObservedSourceBufferState$p_1=a,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()};d.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3};d.destroy=function(){a.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()};return b}(c("oz-player/utils/OzFakeEventTarget"));g["default"]=a}),98);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,e,f,g,h){var i=this;h===void 0&&(h=null);this.$4=null;this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$14=0;this.$26=function(){if(i.$10.hasError()){i.$13=!1;i.$12=!1;var a=i.$10.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=i.$10.getErrorCode();b=b!=null?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});i.$4&&i.$4.reject(a);i.$4=null;i.cancelOperationAndCleanQueue()}else if(!i.$13){i.$13=!0;b=i.$10.getVideoNode();a=i.$26;b=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b,"error",a);i.$5.addSubscriptions(b)}};this.$17=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult(i.$12?"failed":"success").log()}a=i.$4;a&&(i.$12?i.$26():(a.resolve(),i.$4&&(i.$4=null)))};this.$18=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult("failed").log()}i.$12=!0};this.$1=a;this.$2=h;this.$3=b;this.$11=e;this.$16();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11);this.$10=f;this.$15=g}var e=a.prototype;e.$16=function(){this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))};e.setSourceBuffer=function(a){if(a==null)return;this.cancelOperationAndCleanQueue();this.$3=a;this.$16();this.$9.setSourceBuffer(a)};e.queueData=function(a,b,d,e,f){e===void 0&&(e=null);f===void 0&&(f=0);var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:g,loggerProvider:e,appendTarget:f,mimeCodecs:b,clearSourceBufferRange:d});a=g.getPromise();this.$7||this.$19()["catch"](function(a){});return a};e.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&!0&&(this.$10.hasError()||this.$3.abort())}catch(b){var c=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(c).setReason(this.$15?this.$15():null).log()}a=this.$4;a&&a.reject(b);this.$6&&(this.$6.reject(b),this.$6=null)};e.getSourceBufferState=function(){return this.$9};e.$20=function(a,b){a=Math.max(a,0);b>0&&b>a&&this.$3.remove(a,b)};e.$21=function(a,b){a=Math.max(a,0);if(b>0&&b>a){var d=this.$22();this.$20(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};e.clearRangeWithWait=function(a){var c=this;this.cancelOperationAndCleanQueue();return a.reduce(function(a,b){var d=b.fromTime,e=b.toTime;return a.then(function(){return c.$21(d,e)})},(h||(h=b("Promise"))).resolve())};e.$22=function(a){var b=this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};e.$23=function(a,b,e,f){var g=this,h=function(){var h=g.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),i=!1,j=!0;try{j=!!g.$3.getBuffered()}catch(a){j=!1}try{i=g.$3.getIsUpdating();if(j)g.$3.appendBuffer(a,b);else{h.resolve();return h.getPromise()}}catch(a){j=a;var k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,l=j.name,m=j.message;l==="QuotaExceededError"?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:i?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:l==="InvalidStateError"&&typeof m==="string"&&/SourceBuffer has been removed/.test(m)?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:l==="InvalidStateError"&&(k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);i=d("oz-player/utils/OzErrorUtils").createOzError({type:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getType():l==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":l==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+g.$1+" appendBuffer("+b+") failed: "+String(m),extra:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getExtra():{originalError:j,code:k}});g.$4=null;h.reject(i)}l=h.getPromise();e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(l,e,"append",function(b){var c;b.setLength(a.byteLength);c=(c=f==null?void 0:f.appendTarget)!=null?c:null;b.setAppendTarget(c)});return l};if(this.$3.getIsUpdating())return this.$22(e).then(h)["catch"](function(a){throw a});this.$14+=a.byteLength;return h()};e.$19=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.mimeCodecs,g=b.deferred,h=b.loggerProvider,i=b.appendTarget,j=b.clearSourceBufferRange;this.$7=!0;var k;b=function(){return e instanceof d("oz-player/shims/OzStreams").OzReadableStream?a.$25(e,f,h,i):a.$23(e,f,h,{appendTarget:i})};j?(k=this.$3.getIsUpdating()?this.$22(h):c("oz-player/shims/OzMaybeNativePromise").resolve(),k=k.then(function(){return a.clearRangeWithWait([{fromTime:j[0],toTime:j[1]}])}).then(b)):k=b();var l=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return k["catch"](function(a){g.reject(a)}).then(function(){var b=l(),c=b.startTime;b=b.endTime;g.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$19()["catch"](function(a){})})};e.$25=function(a,b,e,f){var g=this,h=[],i=0,j=a.getReader();a=function a(){var k=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));g.$6=k;j.read().then(function(a){k.resolve(a),g.$6=null})["catch"](function(a){k.reject(a),g.$6=null});return k.getPromise().then(function(d){if(d.done){var j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;return j.byteLength>0?g.$23(j,b,e,{appendTarget:f}):c("oz-player/shims/OzMaybeNativePromise").resolve()}j=d.value;d=j;if(f>0){j=j instanceof Uint8Array?j:new Uint8Array(j);h.push(j);i+=j.byteLength;if(i>=f){j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;d=j}}return d&&d.byteLength>=f?g.$23(d,b,e,{appendTarget:f}).then(function(){return a()}):a()},function(a){if(g.$11.getBool("enable_alternative_audio_tracks"))try{g.$15()==="open"&&(g.$10.hasError()||g.$3.abort())}catch(a){a}else try{g.$3.abort()}catch(a){a}if(typeof a==="object"&&d("oz-player/utils/OzErrorUtils").isOzError(a))return c("oz-player/shims/OzMaybeNativePromise").reject(a);if(typeof a==="object"&&a!=null&&typeof a.name==="string"&&a.name==="TypeError"&&typeof a.message==="string"&&a.message.includes("network error")){var e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Stream read is interrupted (previously TypeError network error)}",extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)}e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Unexpected error while reading from stream: "+String(a),extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)})};return a()};e.$24=function(a){var b=this.$2;b!=null&&b.getOperationLogger("source_buffer_invariant").setError(a).setResult("failed").log();return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+a})};e.destroy=function(){var a=this,b=this.$2;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();b=this.$4;b&&(!this.$13?(b.reject(d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$4=null,a.$5.release(),a.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()}));this.$9.destroy()};e.getDebug=function(){return{SourceBuffer:this.$3}};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function a(){return h.load()}g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,e=a.videoNode,f=a.config,g=a.perfLoggerProvider;g=g===void 0?new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):g;var h=a.isChangeTypeSupported,i=a.useManagedMediaSource,j=a.handleVttCaptionsUpdated,k=a.onClearVideoNodeError;a=a.onRetryVideoElementError;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$18=null;this.$19=null;this.$20=new(c("oz-player/utils/OzErrorEmitter"))();this.$22="undetected";this.$23=!1;this.$24=!1;this.$31=function(){b.$34()||(b.$10=!1);if(!b.$35())return;var a=b.$8.shift();a&&(a(b.$2),b.$10=!0)};this.$5=g;this.$11=f;this.$1=e;this.$21=j;this.$16=k;this.$17=a;this.$23=h;this.$24=i;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;b.$5.getOperationLogger("media_element_error").setError((a=b.$9.getMediaErrorName())!=null?a:void 0).setCode(b.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$8=[];b.$6=[];b.$4.release();b.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();b.$15=b.$15||b.$14||b.$13;a=b.$1.error;var e=(a==null?void 0:a.code)||0,f=!a&&b.$1.poster!=null&&b.$1.poster!=="",g=d("oz-player/utils/OzErrorUtils").createOzError({type:f?"OZ_POSSIBLE_POSTER_LOAD_FAILURE":c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(e),description:(a==null?void 0:a.message)!=null?a.message:"",extra:{originalError:a,code:String(e)}});if(b.$19!=null){b.$5.getOperationLogger("media_element_error").setError(a).setCode(e).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$20.emitError(g);return}b.$19=b.$1.currentTime;b.$18==null&&(b.$18=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$18=null,b.$11.getBool("retry_video_element_error")&&(b.$17!=null&&b.$17(g),b.$25())},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){b.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){b.$14=!1,b.$15=!1,b.$19=null,b.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){b.$14=!1,b.$13=!1,b.$15=!!b.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){b.$14=!1,b.$13=!1}));this.$2=this.$26();this.$5.getOperationLogger("media_source_new").log();this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.$5.getOperationLogger("media_source_open").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.$5.getOperationLogger("media_source_ended").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){b.$5.getOperationLogger("media_source_close").log()}));this.$27(this.$2)}var b=a.prototype;b.$26=function(){return this.$24?new ManagedMediaSource():new MediaSource()};b.$27=function(a){var b=this.$1,c=b.src;c!==""&&URL.revokeObjectURL(c);a?(this.$24&&(b.disableRemotePlayback=!0),b.src=URL.createObjectURL(a)):(b.removeAttribute("src"),b.removeAttribute("srcObject"))};b.$25=function(){var a=this;this.$7.forEach(function(a){a.cancelOperationAndCleanQueue()});this.$2=this.$26();this.$27(this.$2);this.$7.forEach(function(a,b){a.setSourceBuffer(null)});var b=this.$28().then(function(){var b=[];a.$7.forEach(function(c,d){var e=a.$29(d).then(function(b){c.setSourceBuffer(b),a.$30(b,d)});b.push(e)});return c("oz-player/shims/OzMaybeNativePromise").all(b)});b.then(function(){a.$16&&a.$16();a.$19!=null&&(a.$1.currentTime=a.$19);if(a.$15){var b=a.$1.play();return b==null?void 0:b["catch"](function(){})}})["catch"](function(b){a.$20.emitError(b)})};b.$28=function(){var a=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){d.remove(),b.resolve(),a.$31()});this.$3.addSubscriptions(d);return b.getPromise()}else{if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){e.resolve(),a.$31()}));return e.getPromise()}};b.$29=function(a){var b=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return c("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return b.$32(a)})["catch"](function(b){b=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+String(b),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw b});else try{return this.$32(a)}catch(b){var e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw e}};b.$32=function(a){var b=this,e;a.includes("vtt")?e=this.$33(a):e=this.$28().then(function(){return new(c("oz-player/media_source/OzMSESourceBufferImpl"))(b.$2.addSourceBuffer(a),a,b.$11,b.$23)});return e.then(function(c){b.$6.push(c);c.registerOnUpdateListener(function(){b.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).log()});b.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).log();return c})};b.$30=function(a,b){var c=this;this.$4.addSubscriptions(a.registerOnUpdateEndListener(function(){c.$31()}))};b.$33=function(a){var b=this;return c("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(e){if(b.$21!=null){var f=new e({onCaptionsChanged:b.$21,config:b.$11}),g=c("oz-player/shims/ozThrottle")(function(){f.setCurrentVideoTime(b.$1.currentTime)},200);b.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b.$1,"timeupdate",function(){g()}),{remove:function(){g=function(){}}});return f}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): No handleVttCaptionsUpdated callback provided',extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})};b.createSourceBufferManager=function(a,b,e,f){var g=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$29(b).then(function(a){return[void 0,a]}):c("oz-player/shims/OzMaybeNativePromise").all([this.$28(),this.$29(b)])).then(function(e){e[0];e=e[1];var f=new(c("oz-player/media_source/SourceBufferManager"))(a,e,g.$11,g.$9,function(){return g.$2.readyState},g.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(b)));g.$30(e,b);g.$7.set(b,f);return f})["catch"](function(b){var e=d("oz-player/utils/OzErrorUtils").isOzError(b)?b.getExtra():void 0,f=e==null?void 0:e.code;f=d("oz-player/utils/OzErrorUtils").isOzError(b)?""+b.getType()+(f!=null?"#"+f:"")+": "+b.getDescription():String(b);f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+a+": "+f+", support AAC-LC="+(g.$2.constructor.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+g.$2.readyState,extra:babelHelpers["extends"]({},e,{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw f})};b.getReadyState=function(){return this.$2.readyState};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){e.resolve()}));this.$8.push(function(c){if(c.readyState==="open"){var e=d.$5.getOperationLogger("end_of_stream");e.setInitiator(a).setReason(b);e.log();c.endOfStream()}});this.$31();return e.getPromise()};b.updateDuration=function(a,b){var e=this,f=this.$2.duration;if(Number.isFinite(f)&&(!b||f>=a))return;this.$8.push(function(b){b.duration!==f&&!(isNaN(b.duration)&&isNaN(f))&&c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+b.duration+" != "+f}),"MediaSourceManager updateDuration","warn");var g=e.$11.getBool("msm_refactor_wait_for_sourceopen")?b.duration!==Infinity&&a<b.duration:a<b.duration;if(g){e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).setResult("failed").log();return}e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).log();b.duration=a});this.$31();return};b.detach=function(){this.$18&&(c("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null);this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers();this.$27(null);for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$35=function(){return!this.$34()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$34=function(){return this.$6.some(function(a){return a.getIsUpdating()})};b.onError=function(a){return this.$20.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(a){a===void 0&&(a=!0);var b=d.$2;if(!b)return;b=b.getTimeRanges();if(!b.length)return;b=b[b.length-1];d.$1.updateDuration(b.endTime,a)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){b.$5(!1)})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";b=function(b,c){return a.fetch(b,c)};c=function(b,c){return new a.Response(b,c)};f.fetch=b;f.Response=c}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,e,f,g){if(!d("oz-player/shims/OzFetchAPI").fetch)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"fetch api is missing"});var h=null;if("AbortController"in a&&f!=null&&f!=0){var i=new AbortController();h=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return i.abort()},f);f=babelHelpers["extends"]({},e,{signal:i.signal})}else f=babelHelpers["extends"]({},e);g!=null&&(f=babelHelpers["extends"]({},f,{referrer:g}));return d("oz-player/shims/OzFetchAPI").fetch(b,f).then(function(a){c("oz-player/shims/ozClearTimeout")(h);return a})}g["default"]=b}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return(a=a)!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var b=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:async function(a){while(!0){var c=await b.read();if(c.done)break;a.enqueue(c.value)}a.close()}})}g.default=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?c("oz-player/shims/OzMaybeNativePromise").resolve({ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}):a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){f=d?d.networkTimeoutMs:null;g=c("oz-player/networks/FetchWithTimeout")(a,b,f);return g.then(function(a){var b=a.ok,d=a.status,f=a.headers;return e!=null&&!b&&typeof a.text==="function"?a.text().then(function(c){return{ok:b,status:d,headers:f,body:c,arrayBuffer:function(){return a.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a)})}b=a;d=b;g["default"]=d}),98);
__d("oz-player/networks/withRetries",["oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){return new Promise(function(e,f){async function g(h){try{e(await a())}catch(a){if(h>0){var i=typeof d==="function"?d(b-h):d;c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){g(h-1)},i)}else f(a)}}g(b)})}g.default=a}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.config,e=a.url,f=a.http,g=a.overrideOzRequestImplementation,h=a.options,i=a.prefetchCache,j=a.mediaStreamType,k=a.onPerfEntryAvailable,l=a.dataAppendedCallback,m=a.dataAppendedErrorCallback,n=g!=null?function(){return g.apply(void 0,arguments)}:c("oz-player/networks/OzFetchRequestImplementation");a=i?i.getCacheValue(e):null;i=a;a=!1;if(i)a=!0,i=i.then(function(a){if(a.initiator==="FETCH"){var b=a.response,e=b.ok,f=b.status,g=b.headers;return!e&&typeof a.response.text==="function"?a.response.text().then(function(b){return{ok:!1,status:f,headers:g,body:b,arrayBuffer:function(){return a.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a.response)}else if(a.initiator==="XHR_REQUEST"){b=c("oz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a.response)}}}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(a){return n(e,f,null,null,j,k,l,m)});else{var o;o=(o=h==null?void 0:h.retryAttempts_SIDX_USE_ONLY)!=null?o:0;if(o>0){var p;p=(p=h==null?void 0:h.retryTimeoutMs_SIDX_USE_ONLY)!=null?p:100;i=c("oz-player/networks/withRetries")(function(){return n(e,f,h,b,j,k,l,m)},o,p)}else i=n(e,f,h,b,j,k,l,m)}return{promise:i,retrievedFromCache:a}}g["default"]=a}),98);
__d("oz-player/utils/OzVideoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";c=1<<31;var g=~c,h=c+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe",OE2:"oe2",ODM:"odm",USS:"uss"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;return a.get(l.OE2)!==null||a.get(l.ODM)!==null||a.get(l.USS)!==null}function b(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=c;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isShortenedExpiryTimestampCdnUrl=a;f.isCdnUrlExpired=b}),66);
__d("oz-player/networks/OzNetworkRequestStream",["Promise","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils","oz-player/utils/OzVideoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$8=!1;this.$10="auto";var b=a.debugName,c=a.config,d=a.baseUri,e=a.baseUriDecisionTime,f=a.options,g=a.requestParamCreator,h=a.networkRequestStreamHandlers,i=a.overrideOzRequestImplementation,j=a.prefetchCache,k=a.networkRequestFetchPriority,l=a.networkRequestStreamRetryHandler,m=a.networkRequestUrlRefreshHandler,n=a.dynamicVideoLibrary,o=a.mediaStreamType,p=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;this.$1=b;this.$2=d;this.$3=f;this.$4=g;this.$11=(b=h)!=null?b:[];this.$10=k;this.$12=l;this.$13=m;this.$9=i;this.$14=j;this.$15=c;this.$16=n;this.$17=e;this.$18=o;this.$19=p;this.$20=a}var e=a.prototype;e.$21=function(a){var b=this;a=this.$4.createRequestParam(this.$2,a,this.$10);var d=a.uri;a=a.http;d=d.toString();this.$5=d;a=c("oz-player/networks/OzFetchWithCache")({config:this.$15,url:d,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$14,mediaStreamType:this.$18,onPerfEntryAvailable:function(a){b.$22(a)},dataAppendedCallback:this.$19,dataAppendedErrorCallback:this.$20});var e=a.promise;a=a.retrievedFromCache;this.$8=a;return{requestPromise:e,requestUrl:d}};e.startStream=function(a){var b=this;return this.$23().then(function(){if(b.$15.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(b.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(b.$2.toString()))return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") CDN URL expired.",responseStatus:0,responseHeaders:null,requestUrl:b.$2.toString()}));var e=b.$21(a),f=e.requestPromise,g=e.requestUrl,h=g,i=Date.now();return f.then(function(e){var f;(f=b.$16)==null?void 0:f.updateWithResponse(g,i,b.$17,e);b.$7=e;if(b.$12!=null&&e.ok===!1)return b.$12(e,function(){var d=b.$21(a),c=d.requestPromise;d=d.requestUrl;h=d;return c},h)["catch"](function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:h}})});else return e}).then(function(a){var e=[];for(var f=0;f<b.$11.length;f++)try{var g=b.$11[f].onResponse(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}g=a.body;f=a.headers;var i=a.ok;a=a.status;if(!i)return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") HTTP status not OK",responseStatus:a,responseHeaders:f,requestUrl:h,responseBody:typeof g==="string"?g:void 0}));typeof g!=="string"&&typeof g.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);i=g;for(a=0;a<e.length;a++)i=i.pipeThrough(e[a]);return i},function(a){var e=[];for(var f=0;f<b.$11.length;f++)try{var g=b.$11[f].onError(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}if(a instanceof TypeError){g=c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") TypeError: "+a.message,responseStatus:0,responseHeaders:null,requestUrl:h}));for(f=0;f<e.length;f++)g=g.pipeThrough(e[f]);return g}throw a})["catch"](function(a){if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;if(a.name==="AbortError"){var b=a.message;return c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:h,message:b})}return c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:h,message:"Stream processing error. "+a})})})};e.$22=function(a){this.$6=a};e.getLastPerformanceEntry=function(){if(this.$6!=null)return this.$6;return this.$5==null?null:d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)};e.getLastRequestUrl=function(){return this.$5};e.getLastResponse=function(){return this.$7};e.retrievedFromCache=function(){return this.$8};e.$23=function(){var a=this;if(this.$15.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(this.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(this.$2.toString())&&this.$13)return this.$13(this.$2.toString()).then(function(b){b.refreshedUrl!=null&&b.reason==="OK"&&(a.$2=new(c("oz-player/shims/OzURI"))(b.refreshedUrl));return});else return(h||(h=b("Promise"))).resolve()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var e=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=this.$4.getPromise());return e.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+b.$5})}else if(b.$2.length===0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a==null?void 0:a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=new i();this.$15=!1;this.$16=!1;this.$17=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$15?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$16?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$16&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$18=b;this.$19=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$15=!!f;this.$16=!!g;this.$17=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$18({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$20())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=j.$14.hasMoreBytesToSkip()?j.$14.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$14.hasMoreBytesToSkip()){j.$14.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$20();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$14.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$21()}var b=a.prototype;b.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$21=function(){var a=this;return new this.$19({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$17?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b,e){var f=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var g=b.endByte;a===0&&g==null||(f.addQueryData({bytestart:b.startByte}),g!=null&&f.addQueryData({byteend:g}))}if(d.$2){var h=d.$2(f);h&&Object.keys(h).forEach(function(a){var b=h[a];f.addQueryData(a,b)})}a=d.$1&&d.$1(f)?"include":"same-origin";return{uri:f,http:{credentials:a,priority:e}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-fna-hit"):null},j=function(a){return a?a.get("x-fb-edge-hit"):null},k=function(a){return a?a.get("x-fb-origin-hit"):null},l=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g){d.length&&a.setSegmentCount(d.length),b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(e))).setLiveheadSeqNumHeader(l(g==null?void 0:g.headers)).setContentLengthHeader(h(g==null?void 0:g.headers)).setEdgeHitHeader(j(g==null?void 0:g.headers)).setOriginHitHeader(k(g==null?void 0:g.headers)).setFNAHitHeader(i(g==null?void 0:g.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(g==null?void 0:g.headers)).setUserInfo({segmentPTSHeader:String(c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(g==null?void 0:g.headers))}).setCode(g==null?void 0:g.status).setLength(f)};b=function(a,b,d,e,f,g,i){b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(l(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(j(e==null?void 0:e.headers)).setOriginHitHeader(k(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(i!=null&&i>0?{chunkSize:String(i)}:null)};g.setPerformanceLoggingAttributes=m;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$10=null;this.$15="auto";var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestFetchPriority;i=i===void 0?"auto":i;var j=a.networkRequestStreamRetryHandler,k=a.networkRequestUrlRefreshHandler,l=a.setCustomFetchStreamLoggingAttributes,m=a.dynamicVideoLibrary,n=a.configureCustomRequestParametersForSegment,o=a.onResourceTimingBufferFull;a=a.bandwidthEstimator;this.$2=b;this.$8=g;this.$9=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$8,this.$9);this.$3=d;this.$4=e;this.$5=j;this.$6=k;this.$7=f;this.$10=l;this.$11=m;this.$12=n;this.$13=o;this.$14=a;this.$15=i}var b=a.prototype;b.destroy=function(){};b.request=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.requestOptions,h=a.mediaStreamType,i=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var j=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},k=this.$7?this.$7():null,l=this.$16(d[0]);b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:l,baseUriDecisionTime:null,options:g,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:h,dataAppendedCallback:i,dataAppendedErrorCallback:a});return this.$17(j,b,e,f,d)};b.createPausableStream=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.mediaStreamType,h=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var i=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},j=null,k=this.$2.getNumber("network_seg_timeout_ms");k>0&&(j={networkTimeoutMs:k});k=this.$7?this.$7():null;var l=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:this.$16(d[0]),baseUriDecisionTime:d[0].getOptions().getSegmentNumDecisionTime(),options:j,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:g,dataAppendedCallback:h,dataAppendedErrorCallback:a});return{pausableStream:this.$18(i,l,e||null,f),loggingPayloads:{getRequestUrl:function(){return l.getLastRequestUrl()||null},segments:d,getResponse:function(){return l.getLastResponse()}}}};b.requestRawUrl=function(a){var b=a.debugName,d=a.url,e=a.options;a=a.loggerProvider;var f=this.$7?this.$7():null;b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:new(c("oz-player/shims/OzURI"))(d),baseUriDecisionTime:null,options:e,networkRequestFetchPriority:this.$15,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:f,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null});d={startByte:0,endByte:null};return this.$17(d,b,[],a)};b.$18=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f,this.$13)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})};b.$17=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$18(a,b,c,e);a=h.startStream();var i=this.$19(a);if(e){c=function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$10;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",c,c)}return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$19=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return"done"})})};b.$16=function(a){var b=this.$12,d=new(c("oz-player/shims/OzURI"))(a.getURI().toString());if(b){var e=b(a);e&&Object.keys(e).forEach(function(a){var b=e[a];d.addQueryData(a,b)})}return d};b.getBandwidthEstimator=function(){return this.$14};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$Mpd$p_9=!1;j.$Mpd$p_1=b;j.$Mpd$p_5=g;j.$Mpd$p_2=c;j.$Mpd$p_3=d;j.$Mpd$p_4=e;j.$Mpd$p_6=f;j.$Mpd$p_7=h;j.$Mpd$p_8=i;return j}var c=b.prototype;c.markRefreshed=function(){this.$Mpd$p_10=Date.now()};c.getRefreshDate=function(){return this.$Mpd$p_10};c.updateLocation=function(a){this.$Mpd$p_6=a,this.$Mpd$p_9=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd$p_6};c.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5};c.getVideoRepresentations=function(){return this.$Mpd$p_2};c.getVideoRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentations=function(){return this.$Mpd$p_3};c.getApplicationRepresentations=function(){return this.$Mpd$p_4};c.getCustomField=function(a){var b=this.$Mpd$p_7.get(a);if(!b)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+a});try{return b(this.$Mpd$p_1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd$p_8};c.updateWith=function(a){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=a.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,a.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,a.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,a.getApplicationRepresentations()),this.$Mpd$p_8=a.isStaticMpd(),this.$Mpd$p_5=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd$p_2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_3.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_4.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd$p_11=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$3=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$3};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$4=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$4};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(b){var d=this;this.$8=Date.now();this.$9=Date.now();this.$10=0;this.$11=0;this.$12=function(){};this.$13=function(){};this.$14=function(){};this.$16=new(c("oz-player/networks/OzTransformStream"))();this.$19=!1;this.$20=!1;this.$21=null;this.$22=function(a){d.$25();a.length!=null&&(d.$11+=a.length);d.$26();if(d.$18)return;d.$27()};this.$23=function(){if(d.$21!=null&&d.$21>0)return;var b=Date.now()-d.$8,c=d.$1.getLastPerformanceEntry();c&&d.$13(c.responseStart-c.requestStart,c.responseEnd-c.requestStart,d.$11);!c&&a.__isresourcetimingbufferfull&&d.$15&&d.$15();d.$3>0&&b>0&&d.$10===0&&d.$11>=d.$3&&d.$28(d.$11,b)};var e=b.stream,f=b.loggerProvider,g=b.byteCountPerSample,h=b.minimumBytesToSampleOnClose,i=b.minimumSampleDuration,j=b.maximumSampleBandwidth,k=b.useResponseTimeMs,l=b.responseTimeHandicapMs,m=b.ignoreOnStreamWriteSamples;b=b.onResourceTimingBufferFull;this.$1=e;this.$17=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$18=m;this.$16.addListener("writableWrite",this.$22);this.$16.addListener("writableClose",this.$23);this.$15=b}var e=b.prototype;e.getTransformStream=function(){return this.$16};e.onBandwidthSample=function(a){this.$12=a};e.onNavigationTimingSample=function(a){this.$13=a};e.onEstimateFromHeaders=function(a){this.$14=a};e.$24=function(a,b,c){b=b-c;c=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$21);c.log()}this.$12(a,b)};e.$29=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};e.$28=function(a,b){var d=this.$1.getLastResponse();d=this.$6?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$29(a,b,d)||this.$24(a,b,Math.max(d-this.$7,0))};e.$25=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$20||a==null)return;this.$20=!0;a=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a);a!=null&&this.$14(a)};e.$26=function(){if(this.$19)return;if(this.$21==null){var a=this.$1.getLastResponse();this.$21=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))};e.$27=function(){var a=Date.now(),b=a-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,b,0)&&(this.$24(this.$11-this.$10,b,0),this.$8=a,this.$10=this.$11)};return b}();g["default"]=b}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g){"use strict";var h=2e5;function a(a,b,d,e,f){return{startStream:function(g){var i=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",h),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:f});i.onBandwidthSample(function(a,b){e.addBandwidthSample(a,b)});i.onNavigationTimingSample(function(b,c,d){var f=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(f===0||b<=f)&&e.addNavigationTimingSample(b,c,d)});i.onEstimateFromHeaders(function(a){e.setBandwidthEstimateFromHeaders({meanEstimate:a})});return b.startStream(g).then(function(a){return b.retrievedFromCache()?a:a.pipeThrough(i.getTransformStream())})}}}g.pipeStreamThroughBandwidthEstimator=a}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return function(e,f,g,h){var i=a==="video";return f instanceof c("oz-player/networks/OzNetworkRequestStream")&&i?d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(e.getLegacyConfig(),f,g,b,h):f}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){this.$6=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,e,f){var g=new(c("oz-player/shims/OzDataViewReader"))(new DataView(f.buffer));f=g.readUint32();var i=g.readUint32();if(i!==h)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});f==1&&(f=g.readUint64());i=g.readUint8();g.skip(3);g.skip(4);var j=g.readUint32();if(!j)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var k;i==0?(i=g.readUint32(),k=g.readUint32()):(i=g.readUint64(),k=g.readUint64());g.skip(2);var l=g.readUint16(),m=i,n=e+f+k,o=0,p=a.getBool("sidx_parser_memory_optimization"),q=[];i=function(a){var e=g.readUint32(),f=(e&2147483648)>>>31;e=e&2147483647;var h=g.readUint32();g.readUint32();if(f==1)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var i=m/j,k=(m+h)/j;a===0&&(o=i);var l=n,r=l+e-1,s=new(c("oz-player/manifests/OzSegmentOptions"))();q.push(p?new(c("oz-player/manifests/OzDataSegment"))(b,i-o,k-o,l,r):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:i-o,endTime:k-o}},getByteRange:function(){return{startByte:l,endByte:r}},getSequenceNumber:function(){return null},getOptions:function(){return s}});m+=h;n+=e};for(e=0;e<l;e++)i(e);return q}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();return a.length>0?a[a.length-1]:null};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f,g){a=[];b=b.createParser();var h=-1,i=-1;while(b.hasMoreData()){var j=b.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=e*j.unscaledTime;j=d+j.relativeOffset;h>=0&&(i>=0||c("oz-player/shims/ozvariant")(0,4010),a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,j-1)));h=k;i=j}if(h>=0){i>=0||c("oz-player/shims/ozvariant")(0,4010);k=f;a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,null))}return a}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=z(d);if(!d)return[];c=new u(c);c=c.parseElement();return c.id!=m?[]:w(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType(f==="video"||f==="audio"?f+";sidx":"sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b),e=new(c("oz-player/manifests/OzSegmentOptions"))();return this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},getOptions:function(){return e}}};b.parseSegmentsContainer=function(){var a=this,b=this.$11();d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$8,"process_sidx");b["catch"](function(b){a.$6.emitError(b)});return new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9)};b.$12=function(a,b,e){a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[a],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b,this.$4.getBandwidthEstimator())],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:e});b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e,null)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,null));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$9=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$2=d;this.$10=f;this.$11=g;this.$13=e;this.$14=a;this.$15=h;this.$3=i;this.$4=j;this.$5=k;this.$6=(b=l)!=null?b:null;this.$7=(d=m)!=null?d:null;this.$8=(f=n)!=null?f:null;this.$16=o;this.$17=p;try{this.$11=this.$11.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$18=function(){var a=this,b=this.$12;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;if(typeof f!=="string")throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$14,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$10,this.$11);b.onError(function(b){var c;if((c=a.$17)==null?void 0:c.handleError(a.parseID(),b))return;return a.$9.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$19(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)b=this.$19(this.$3[0],{isShared:!0});else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});this.$12=b;return b};b.$19=function(a,b){var e;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$13.mpdUrl;var f=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;f=f!=null?f:b;if(f==null)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var g=this.$13.customSegmentTimelineParser;e=(e=this.$13.customRepresentationParsers)==null?void 0:e.initializationBinary;e=e?e(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$14,a,{baseUrl:f,mpdUrl:b,isStaticMpd:this.$15.manifestType==="static",isTemplatedMpd:this.$15.manifestIsTemplated},g,e)};b.onError=function(a){return this.$9.onError(a)};b.parseInitSegment=function(){return this.$18().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeType=function(){var a;return(a=(a=this.$1.$.mimeType)!=null?a:this.$4)!=null?a:""};b.parseCodecs=function(){var a;return(a=(a=this.$1.$.codecs)!=null?a:this.$5)!=null?a:""};b.parseVariantKey=function(){return this.$6};b.parseLang=function(){return this.$7};b.parseRole=function(){return this.$8};b.parseSegmentsContainer=function(){return this.$18().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$13.customRepresentationParsers?this.$13.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$13.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzApplicationRepresentationParser$p_1=c;b.$OzApplicationRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzAudioRepresentation$p_1=d;b.$OzAudioRepresentation$p_2=l;b.$OzAudioRepresentation$p_3={id:d,displayLabel:b.getDisplayLabel(),mimeCodecs:b.getMimeCodecs(),variantKey:g,lang:h,role:i};return b}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation$p_2/a).toFixed(1)+"Kbps"};c.getDisplayLabel=function(){var b=a.prototype.getLang.call(this),c=a.prototype.getRole.call(this);b=b==null?"Default":b;return c==null?b:b+" - "+c};c.getAudioTrack=function(){return this.$OzAudioRepresentation$p_3};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzAudioRepresentationParser$p_1=c;b.$OzAudioRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)||this;b.$OzVideoRepresentationParser$p_1=c;b.$OzVideoRepresentationParser$p_2=d;b.$OzVideoRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),d=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});b=b.getNumber("live_audio_ibr_bandwidth_percentage");b=e*b;for(var f=a.length-1;f>=0;f--)if(a[f].getBandwidth()<=b){d.getOperationLogger("audio_ibr_success").setRepresentationID(a[f].getID()).setReason(e.toString()).log();return a[f]}d.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log();return null};g.getInitialAudioRepresentation=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.blockedRepresentationsManager,d=a.config,e=a.drmManager,f=a.enableAlternativeAudioTracks,g=a.initialRepresentationIDs,h=a.networkManager,i=a.ozParserContext,j=a.perfLoggerProvider;a=a.useManagedMediaSource;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=d;this.$1=h;this.$3=j;this.$4=i;this.$6=e;this.$7=(d=g)!=null?d:[];this.$8=(h=b)!=null?h:null;this.$9=f;this.$10=(j=a)!=null?j:!1;this.$11=!0}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=this,e=[];a=a;var f=this.$4.createXmlParser().parse(a);f=f.MPD&&f.MPD.length>0?f.MPD[0]:null;if(!f){var g=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(g,a.length)+"/"+a.length+"): "+a.substring(0,g)})}g=f.Period&&f.Period.length>0?f.Period[0]:null;if(!g){var h=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(h,a.length)+"/"+a.length+"): "+a.substring(0,h)})}a=g.AdaptationSet||[];h=this.$12(f);this.$11=h==="static";g=this.$13(f);var i=this.$14(this.$15(a,"video"),{manifestType:h,manifestIsTemplated:g},e),j;this.$9?j=this.$16(this.$15(a,"audio"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}):j=this.$17(this.$18(a,"audio"),c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var k=[];if(this.$5.getBool("vtt_caption_representation")){a=this.$15(a,"application");k=this.$17(a[0],c("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e)}a=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(f,i,j,k,a,this.$19(f),this.$4.customParsers||new Map(),this.$11);if(this.$6){g=this.$6;g.startEME(i,j)}e.forEach(function(a){a.onError(b.$2.emitError)});return h};b.$19=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$12=function(a){return a.$.type||"static"};b.$13=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$18=function(a,b){return a.find(this.$20(b))};b.$15=function(a,b){return a.filter(this.$20(b))};b.$20=function(a){return function(b){if(b.$.mimeType!=null)return b.$.mimeType.indexOf(a)!==-1;b=b.Representation;return b&&b.length>0&&b[0].$.mimeType.indexOf(a)!==-1}};b.$17=function(a,b,c,d){var e=this;if(!a)return[];var f=a.Role;f=(f=f)!=null?f:[];f=f[0];var g=f?f.$.value:null;f=a.$.lang;var h=f==="und"?null:f;f=a.$.FBVariantKey;var i=f==="und"?null:(f=f)!=null?f:null;return a.Representation.map(function(f){f=new b(e.$5,f,(f=f.ContentProtection)!=null?f:a.ContentProtection,e.$4,e.$1,e.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,h,g,e.$7,e.$8);var j=f.parse();d.push(f);return j})};b.$21=function(a){return this.$10?ManagedMediaSource.isTypeSupported(a):MediaSource.isTypeSupported(a)};b.$14=function(a,b,d){var e=this,f=[],g=new Set();a.filter(Boolean).forEach(function(a,h,i){h=h===i.length-1;for(i of a.Representation){var j,k;if(((j=i.$.FBAbrPolicyTags)==null?void 0:j.includes("avoid_on_abr"))&&!h)continue;j=a.Role;j=(j=j)!=null?j:[];j=j[0];j=j?j.$.value:null;var l=a.$.lang;l=l==="und"?null:l;var m=a.$.FBVariantKey;m=m==="und"?null:(m=m)!=null?m:null;k=new(c("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,i,(k=i.ContentProtection)!=null?k:a.ContentProtection,e.$4,e.$1,e.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,m,l,j,e.$7,e.$8);m=k.parse();d.push(k);if(!e.$21(m.getMimeCodecs())){g.add(m.getMimeCodecs());continue}f.push(m)}});return f.filter(Boolean)};b.$16=function(a,b,e){var f=this,g=[],h=new Set();a=a.filter(Boolean).map(function(a){var d=a.Role;d=(d=d)!=null?d:[];d=d[0];d=d?d.$.value:null;var g=a.$.lang;g=g==="und"?null:g;var i=a.$.FBVariantKey;i=i==="und"?null:(i=i)!=null?i:null;var j=[];for(var k of a.Representation){var l;l=new(c("oz-player/parsers/OzAudioRepresentationParser"))(f.$5,k,(l=k.ContentProtection)!=null?l:a.ContentProtection,f.$4,f.$1,f.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,g,d,f.$7);var m=l.parse();e.push(l);if(!f.$21(m.getMimeCodecs())){h.add(m.getMimeCodecs());continue}j.push(m)}return j});a.forEach(function(a){if(a.length>1){var b=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,f.$5,f.$3);g.push((b=b)!=null?b:a[0])}else g.push.apply(g,a)});return g.filter(Boolean)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker$p_4=0;d.$OzStreamInterruptChecker$p_5=null;d.$OzStreamInterruptChecker$p_6=!1;d.$OzStreamInterruptChecker$p_2=b;d.$OzStreamInterruptChecker$p_3=c;d.$OzStreamInterruptChecker$p_1=d.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon");return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),b=a?a.endTime:null,c=!1;b!==null&&(c=b===this.$OzStreamInterruptChecker$p_5);c?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker$p_6=!1);c=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&c>0&&this.$OzStreamInterruptChecker$p_4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker$p_6=!0);this.$OzStreamInterruptChecker$p_5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j,k,l){var m;m=a.call(this)||this;m.$OzMpdUpdater$p_8=new(c("oz-player/utils/OzErrorEmitter"))();m.$OzMpdUpdater$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();m.$OzMpdUpdater$p_11=!1;m.$OzMpdUpdater$p_16=0;m.$OzMpdUpdater$p_18=0;m.$OzMpdUpdater$p_19=null;m.$OzMpdUpdater$p_21=!0;m.$OzMpdUpdater$p_22=0;m.$OzMpdUpdater$p_26=function(){var a,b=m.$OzMpdUpdater$p_2.getLocation();m.$OzMpdUpdater$p_21=!1;if(b==null||b==="")return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=(a=e.getQueryData().ms)!=null?a:e.getQueryData().msdev)!=null?a:e.getQueryData().mstest);if(!m.$OzMpdUpdater$p_12.isPlaying()){m.setupUpdateLoop();return}var g=m.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();m.$OzMpdUpdater$p_28(b).then(function(a){var e,h;m.$OzMpdUpdater$p_18=0;m.$OzMpdUpdater$p_29();m.$OzMpdUpdater$p_7=0;if(m.$OzMpdUpdater$p_21)return;var i=babelHelpers["extends"]({},m.$OzMpdUpdater$p_13,{mpdUrl:b});i=new(c("oz-player/parsers/OzMpdParser"))({config:m.$OzMpdUpdater$p_6,ozParserContext:i,networkManager:m.$OzMpdUpdater$p_1,perfLoggerProvider:m.$OzMpdUpdater$p_5,drmManager:m.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1,useManagedMediaSource:m.$OzMpdUpdater$p_23});i.onError(function(a){m.$OzMpdUpdater$p_8.emitError(a),g.setError(a).log()});i=i.parse(a);a=m.$OzMpdUpdater$p_2.isStaticMpd();m.$OzMpdUpdater$p_2.updateWith(i);m.$OzMpdUpdater$p_2.markRefreshed();i.isStaticMpd()&&!a&&m.emit("streamTransitionToStatic");i=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6);a=i&&i.endTime!=0?i.endTime:null;i=String((i=(i=m.$OzMpdUpdater$p_2)==null?void 0:i.getCustomField("currentServerTimeMs"))!=null?i:"");e=String((e=(e=m.$OzMpdUpdater$p_2)==null?void 0:e.getCustomField("lastVideoFrameTs"))!=null?e:"");i={currentServerTimeMs:i,ingestLastVideoFrameTs:e,nowMs:String(Date.now())};e=new Set(((e=(e=m.$OzMpdUpdater$p_2)==null?void 0:e.getVideoRepresentations())!=null?e:[]).map(function(a){return a.getCodecs()})).size>1;h=new Set(((h=(h=m.$OzMpdUpdater$p_2)==null?void 0:h.getAudioRepresentations())!=null?h:[]).map(function(a){return a.getCodecs()})).size>1;g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(m.$OzMpdUpdater$p_2)).setManifestType(m.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(e||h).setIsTemplatedManifest(Boolean(m.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).setUserInfo(i).log();m.$OzMpdUpdater$p_9.notifyMpdUpdated();m.setupUpdateLoop()})["catch"](function(a){m.$OzMpdUpdater$p_29();g.setError(a).log();var c=null;if(d("oz-player/utils/OzErrorUtils").isOzError(a))c=a;else{var e,f=null,h="Caught an unknown error when fetching the manifest.";if(a!=null)if(m.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var i=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),j=i[0];i[1];c=j}else e=a,f=e.code!=null?String(e.code):null,h=e.name+"; "+e.message+"; "+e.description+";";if(c==null){i={originalError:e,url:b};f!==null&&(i.code=f);c=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:h,extra:i})}}m.$OzMpdUpdater$p_27(c,b)})};var n=e.getMinimumUpdatePeriod();m.$OzMpdUpdater$p_7=0;m.$OzMpdUpdater$p_1=f;m.$OzMpdUpdater$p_2=e;m.$OzMpdUpdater$p_12=g;m.$OzMpdUpdater$p_3=n;m.$OzMpdUpdater$p_5=h.cloneContext().setType("manifest");m.$OzMpdUpdater$p_6=b;m.$OzMpdUpdater$p_13=i;m.$OzMpdUpdater$p_14=j;m.$OzMpdUpdater$p_15=k;m.$OzMpdUpdater$p_23=l;m.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){m.$OzMpdUpdater$p_24(),m.setupUpdateLoop()});m.$OzMpdUpdater$p_9=new(c("oz-player/utils/OzStreamInterruptChecker"))(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6);m.$OzMpdUpdater$p_10.addSubscriptions(m.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(a){m.emit("streamResumedAt",a)}),m.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(a){m.emit("streamInterruptAt",a)}));return m}var e=b.prototype;e.$OzMpdUpdater$p_24=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_25(),this.$OzMpdUpdater$p_21=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater$p_11;b&&(b=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());a=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((a=this.$OzMpdUpdater$p_3)!=null?a:0)*1e3;b&&a&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_26,a))};e.onError=function(a){return this.$OzMpdUpdater$p_8.onError(a)};e.$OzMpdUpdater$p_27=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater$p_18-1,e=a.getExtra().code;this.$OzMpdUpdater$p_19!==e?(this.$OzMpdUpdater$p_19=e,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater$p_11=!0,c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:a,isInitialRequest:!1,retry:function(b){c.emit("manifestFetchErrorRetry",a),f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater$p_8.emitError(a)};e.$OzMpdUpdater$p_30=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater$p_31=function(a){if(!this.$OzMpdUpdater$p_15)return a;a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++);return a.toString()};e.$OzMpdUpdater$p_28=function(a){this.$OzMpdUpdater$p_25();this.$OzMpdUpdater$p_18++;var b=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater$p_30(a,b);a=this.$OzMpdUpdater$p_31(a);b=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:a,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now();this.$OzMpdUpdater$p_20=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater$p_25=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_29()};e.$OzMpdUpdater$p_29=function(){this.$OzMpdUpdater$p_20=null};e.destroy=function(){this.$OzMpdUpdater$p_4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(a,b,c,d,e,f,g){"use strict";g.createTrustedHTMLForDOMParser=d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),c=d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(a);c=this.$1.parseFromString(c,"application/xml");var e=c.querySelector("parsererror");if(e){var f=e.querySelector("h3");f=f?f.nextElementSibling:null;f=f?f.innerHTML:e.innerHTML;e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(f).trim()+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{}})}f=c.documentElement;f!=null&&(b[f.nodeName]=[i(f)]);return b}catch(b){if(d("oz-player/utils/OzErrorUtils").isOzError(b))throw b;else{e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(b)+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return(b=this.$8)!=null?b:a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)};b.$15=function(a){this.$7=!0;return this.$8!=null?!0:a.call(this.$1)};b.$16=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);e.push(d)});var f=c("oz-player/shims/OzMaybeNativePromise").all(e);f.then(function(){d.resolve()})["catch"](function(a){d.reject(a)});return d.getPromise()};b.$14=function(a){var b=this,e=this.$9.length>0?this.$9[0]:null,f=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(e){var g=e.t;e=this.$1.buffered;var h=e.length,i=e.length<=0,j=-1,k=!1;for(var l=0;j<0&&l<h;++l)j=g-f>=e.start(l)&&g+f<e.end(l)?l:j,k=g<e.start(l)-f;l=j>-1;var m=this.$2.getNumber("clear_buffer_on_seek_nudge_s");l&&j>=0&&j<h&&m>0&&(g=Math.min(g,e.end(j)-m),g=Math.max(g,e.start(j)+m));if(i||l||!k)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("no_clear").log(),a.call(this.$1,g),this.$9.shift(),this.$14(a);else{var n=null;this.$11&&(n=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(g*1e3)).setUserInfo({bufferRangesLength:String(h),nudgeSec:String(m)}).start());j=this.$16(Math.max(g-f,0),e.end(h-1)+f);j.then(function(){n&&n.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("after_clear").log(),a.call(b.$1,g),b.$9.shift(),b.$14(a)})["catch"](function(a){n&&n.setError(a).log(),b.$3.emitError(d("oz-player/utils/OzErrorUtils").isOzError(a)?a:d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a,b,c=this,d=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");d=(a=d)!=null?a:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");a=(b=a)!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var e=d&&typeof d.get==="function"?d.get:null,f=d&&typeof d.set==="function"?d.set:null,g=a&&typeof a.get==="function"?a.get:null;if(e&&f&&g&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return c.$12(e)},set:function(a){c.$13(f,a)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return c.$15(g)},configurable:!0,enumerable:!0});b=this.$1.currentTime;this.$1.currentTime=b;this.$1.seeking}catch(a){}this.$17(function(){c.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"currentTime",{get:e,set:f,configurable:!0,enumerable:!0}),c.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"seeking",{get:g,configurable:!0,enumerable:!0})})}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=[],this.$2=a,this.$3=b}var b=a.prototype;b.addSample=function(a){var b,c=Math.floor(Date.now()/(1e3*this.$3)),d=c%this.$2;((b=this.$1[d])==null?void 0:b.bucketNumber)!=c&&(this.$1[d]={bucketNumber:0,val:null});this.$1[d]={bucketNumber:c,val:Math.min(a,(b=this.$1[d].val)!=null?b:a)}};b.min=function(){var a=this,b=Date.now(),d=this.$1.filter(function(c){return c!=null&&c.val!=null&&b-a.$2*1e3*a.$3<c.bucketNumber*1e3*a.$3});if(d.length<this.$2)return null;d=d.reduce(function(a,b){if(a==null)return b;var d=b.val;d!=null||c("oz-player/shims/ozvariant")(0,56011);var e=a.val;e!=null||c("oz-player/shims/ozvariant")(0,56011);return d<e?b:a},null);return d==null?void 0:d.val};b.reset=function(){this.$1=[]};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$8=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$9=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video,i=a.loggerProvider;a=a.getUserSelectedPlaybackRate;this.$1=d;this.$2=e;this.$3=f;this.$15=a;d.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(c("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec")));g!=null&&(this.$8.addSubscriptions(g.addListener("enterBuffering",function(a){if(a==="in_play"){b.$9=0;(a=b.$7)==null?void 0:a.reset()}b.$10=!1;(a=b.$6)==null?void 0:a.log();b.$6=null})),this.$8.addSubscriptions(g.addListener("leaveBuffering",function(){b.$9===0&&(b.$9=Date.now()),b.$10=!1})));this.$4=h;this.$5=i;if(this.$16()){this.$8.addSubscriptions((e=c("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$17(),b.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),e.listenDOMEvent(this.$4,"waiting",function(){b.$17()}),e.listenDOMEvent(this.$4,"durationchange",function(){b.$17()}),e.listenDOMEvent(this.$4,"seeking",function(){var a;b.$13=Date.now();b.$11=null;(a=b.$7)==null?void 0:a.reset()}),e.listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}),e.listenDOMEvent(h,"pause",function(){var a;return(a=b.$7)==null?void 0:a.reset()}))}}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a===0||this.$9==null||this.$9!==0&&this.$9+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$20=function(){var a;a=(a=this.$7)==null?void 0:a.min();return!this.$21()&&a!=null&&a>this.$1.getNumber("steadystate_minbuffer_sec")};b.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a=this.$22();return(a==null?void 0:(a=a.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");a=this.$23(a);this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(a*1e3);return a};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnableCatchup=function(a){var b=this.$14;!this.$14&&a===!0&&(this.$9=null);this.$14=a;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&a!==b&&this.$18()};b.$24=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)};b.$17=function(){var a,b=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(a=this.$7)==null?void 0:a.addSample(b)};b.$18=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;this.$25(b,a)};b.$25=function(a,b){var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),d=this.$1.getNumber("playback_speed_min_buffer_sec");a>d&&(this.$10=!0);var e=this.$1.getNumber("playback_speed_min_duration_sec"),f=this.$1.getNumber("playback_speed_restore_min_duration_sec"),g=this.$1.getNumber("playback_speed_latency_adjustment_rate"),h=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var j;(j=this.$6)==null?void 0:j.log();this.$6=null}else if(this.$14&&this.$10&&a<d&&(g>0||h>0)&&b===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){j=h>0?1-h:this.$24(g,d,a);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(j),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(j)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&i>0&&b===0&&(this.$12==null||this.$12+f*1e3<Date.now())&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){h=1+i;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(h),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(h)}else if(this.$14===!1||this.$11==null||this.$11+e*1e3<Date.now()){g=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1;(d=this.$6)==null?void 0:d.log();this.$6=null;g!==this.$4.playbackRate&&(this.$12=Date.now())}};b.$26=function(a){try{this.$4.playbackRate=a,this.$11=Date.now()}catch(b){(a=this.$6)==null?void 0:a.setError(b).setResult("failed").log();this.$6=null}};b.$22=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$23=function(a){var b;if(a<=0)return a;var c=this.$22();b=c==null?void 0:(b=c.getEndingSegment())==null?void 0:b.getTimeRange();if(!b)return a;c=c==null?void 0:(c=c.getSegmentByTime((b==null?void 0:b.endTime)-a))==null?void 0:c.getTimeRange();return!c?a:(b==null?void 0:b.endTime)-(c==null?void 0:c.startTime)};b.destroy=function(){this.$8.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_4=new Set();e.$OzPlayheadManager$p_10=new Set();e.$OzPlayheadManager$p_12=function(a){e.$OzPlayheadManager$p_1.currentTime=a};e.$OzPlayheadManager$p_14=!1;e.$OzPlayheadManager$p_15=!1;e.$OzPlayheadManager$p_16=!0;e.$OzPlayheadManager$p_17=!1;e.$OzPlayheadManager$p_23=function(a,b){b===void 0&&(b=null);if(e.$OzPlayheadManager$p_20!=null?!e.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup():!1)return;var c=e.$OzPlayheadManager$p_9;if(c&&c.isEnabled(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8)){c=c.computeNewPlayheadPosition(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8);if(typeof c==="number"){e.$OzPlayheadManager$p_27(c,"live_catch_up_strategy",a,b);return}}c=e.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(c===0)return;var f=e.$OzPlayheadManager$p_5;if(!f)return;var g=e.$OzPlayheadManager$p_7.getCurrentTime(),h=f.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),i=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,h);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6))&&i!==-1){g=h[i];e.$OzPlayheadManager$p_27(g.rangeStart+c,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,j=b.playheadCatchup,k=b.playbackState,l=b.config,m=b.perfLoggerProvider,n=b.seekHandler,o=b.initialPlaybackPosition,p=b.canSupportSkipVideobufferGaps,q=b.liveLatencyManager;b=b.dynamicVideoLibrary;e.$OzPlayheadManager$p_1=f;e.$OzPlayheadManager$p_6=l;e.$OzPlayheadManager$p_7=k;e.$OzPlayheadManager$p_8=g;e.$OzPlayheadManager$p_9=j;e.$OzPlayheadManager$p_11=m;n&&(e.$OzPlayheadManager$p_12=n);e.$OzPlayheadManager$p_17=p;e.$OzPlayheadManager$p_20=q;e.$OzPlayheadManager$p_13=o;e.$OzPlayheadManager$p_21=b;e.$OzPlayheadManager$p_18=new i({video:f,perfLoggerProvider:m});e.$OzPlayheadManager$p_19=new h({video:f,perfLoggerProvider:m,config:l});e.$OzPlayheadManager$p_2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"durationchange",function(){e.setPlaybackPositionOnFirstDurationChange("durationchange",e.$OzPlayheadManager$p_1.duration),e.$OzPlayheadManager$p_23("durationchange"),e.$OzPlayheadManager$p_24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"pause",function(){e.$OzPlayheadManager$p_23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"play",function(){e.$OzPlayheadManager$p_23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"playing",function(){e.$OzPlayheadManager$p_23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"waiting",function(){e.$OzPlayheadManager$p_23.bind(babelHelpers.assertThisInitialized(e),"waiting"),e.$OzPlayheadManager$p_24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager$p_23("timeupdate"),e.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&e.$OzPlayheadManager$p_24("timeupdate")},e.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"seeking",function(){e.$OzPlayheadManager$p_22=Date.now()}));return e}var e=b.prototype;e.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0};e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager$p_4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager$p_4.add(a);this.$OzPlayheadManager$p_2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager$p_26(a,b),d.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager$p_17&&d.$OzPlayheadManager$p_24("buffer_updated")}))};e.$OzPlayheadManager$p_26=function(a,b){var c=[];this.$OzPlayheadManager$p_4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager$p_10.add(a);a=this.$OzPlayheadManager$p_1.currentTime;a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager$p_3.release();this.$OzPlayheadManager$p_3.engage();this.$OzPlayheadManager$p_3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager$p_23("time_range_updated")}));this.$OzPlayheadManager$p_5=a;this.$OzPlayheadManager$p_23("time_range_set")};e.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)};e.setPlaybackPositionOnFirstDurationChange=function(a,b){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:b+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var c;b=(c=this.$OzPlayheadManager$p_20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager$p_15=!0;if(this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager$p_5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager$p_27(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager$p_24=function(a){var b,c,e=this;if(!this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps"))return;if(!this.$OzPlayheadManager$p_17)return;var f=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(f===0)return;var g=this.$OzPlayheadManager$p_7.getCurrentTime(),h=[];for(var i=0;i<this.$OzPlayheadManager$p_1.buffered.length;i++)h.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(i),endTime:this.$OzPlayheadManager$p_1.buffered.end(i)});i=h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(a,this.$OzPlayheadManager$p_7);var j=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,i),k=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,i),l=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),m=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),n=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager$p_21)==null?void 0:b.getLastSegmentStartPTS();var o=b!=null?b/1e3:null,p=(c=this.$OzPlayheadManager$p_21)==null?void 0:c.getLast200RequestedUrlDecisionMinTime();c=o!=null?d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,o,i):-1;var q=c>=0?i[c]:null,r=function(b){var c=e.$OzPlayheadManager$p_22==null||p==null||e.$OzPlayheadManager$p_22<p;!c&&b!=null&&e.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+b).setResult("failed").setInitiator(a).setUserInfo({last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(e.$OzPlayheadManager$p_22)}).log();return c};if(o!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&r("buf")){if(o<g&&q!=null&&q.rangeStart<=o&&q.rangeEnd!=null&&q.rangeEnd>o){this.$OzPlayheadManager$p_27(o,"reverse_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(q!=null&&c!=k){this.$OzPlayheadManager$p_27(q.rangeStart,"jump_over_buffer_gap_last_dl_range",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,h,this.$OzPlayheadManager$p_6,n,m)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,h,this.$OzPlayheadManager$p_6,n))&&j!==-1&&(l===0||i[j].rangeStart-g<l)&&(this.$OzPlayheadManager$p_16==!0||r("main"))){o=i[j];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&o.rangeStart!==0&&o.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(o.rangeStart+f,"jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(a,{nextBufferedRangeIndex:String(j),limitMaxGapSize:String(l),rangeStart:j!==-1?String(i[j].rangeStart):null,isNearGapThreshold:String(m),numericalError:String(n)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager$p_16=a};e.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()};e.$OzPlayheadManager$p_27=function(a,b,c,d,e){var f=a-this.$OzPlayheadManager$p_1.currentTime,g=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");if(g>0&&Math.abs(f)<=g)return;this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(a*1e3)).setReason(b).setInitiator(c).setType(d).setUserInfo(babelHelpers["extends"]({},e,{seekAdjustment:String(Math.round(f*1e3))})).log();this.$OzPlayheadManager$p_12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=function(){f.$3.getOperationLogger("pause").setState("paused").log()};this.$5=function(){f.$3.getOperationLogger("playing").setState("playing").log()};this.$1=b;this.$3=e;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$1.currentTime};b.getCurrentTimeUpdateTime=function(){return Date.now()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}function b(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}f.determinePositionIndexOfVideoFromViewportVertically=a;f.intersectionObserverEntryIsIntersecting=b}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker$p_1=[];c.$OzPositionToViewportTracker$p_5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker$p_1.find(function(b){return a.target===b.video});b!=null&&(d("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(a)?b.position=c.$OzPositionToViewportTracker$p_7(a):c.$OzPositionToViewportTracker$p_1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker$p_1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker$p_6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker$p_2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker$p_4=function(){if(this.$OzPositionToViewportTracker$p_3!=null)return;this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker$p_1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker$p_1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker$p_6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker$p_1,i)};c.$OzPositionToViewportTracker$p_7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker$p_1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker$p_3!=null?b.$OzPositionToViewportTracker$p_3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker$p_1=c;this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport$p_3=b;e.$OzPositionToViewport$p_2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport$p_2.registerVideo(b);e.$OzPositionToViewport$p_1.addSubscriptions(e.$OzPositionToViewport$p_2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1};d.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f){f=Math.min(1,c/d);c=1+(1-f)*e;d=a.getBandwidth()*c;return d>b?g*(b/d):1-(1-g)*d/b}f.getPlaybackConfidence=a}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$15(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h,this.$14=i,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:c.map(function(a){return a.getID()}).join(","),newCodecs:c.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:c.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzAbrManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$16=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(a,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){var b;a=(a=a==null?void 0:a.length)!=null?a:null;b=(b=(b=this.$9)==null?void 0:b.getSourceBufferState().getBufferedRanges())!=null?b:null;var e=this.$8.getCurrentTime();e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,b);b=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!=null){this.$10=b;this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}b=Date.now();this.$2=b;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$16(this.$6);f=this.$17(g,f,e,a);a=g[0];f=f||a;if(this.$18(e,f)){this.$10="high_buffer";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}a=this.$5;a!==f&&(this.$4=!0,this.$3=b,this.$5=f);this.$10="bandwidth";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setRepresentationID(f.getID()).setPreviousRepresentationID(a==null?void 0:a.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return f};b.$17=function(a,b,c,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],b,c,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),e);h>this.$1.getNumber("abr_confidence_threshold")&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this,c=this.$6;this.$6=a;var d=this.$6.find(function(a){return a.getDisplayLabel()===b.$5.getDisplayLabel()}),e=this.$5;this.$5=(d=d)!=null?d:this.$6[0];this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:c.map(function(a){return a.getID()}).join(","),newRepresentationIds:a.map(function(a){return a.getID()}).join(","),newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(e==null?void 0:e.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$2=new Map(),this.$3=new Set(),this.$4=new Set(),this.$5=new(c("oz-player/shims/OzEventEmitter"))(),this.$6=b===!0,this.$7(a),this.$8(a)}var b=a.prototype;b.isBlocked=function(a){return this.$3.has(a)};b.handleError=function(a,b){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(d("oz-player/utils/OzErrorUtils").isOzError(b)&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$2.has(b)){this.$3.has(a)||this.$9(a,b);return!0}}return!1};b.$9=function(a,b){var d,e=this;this.$3.add(a);(d=this.$5)==null?void 0:d.emit("representation_blocked",a);d=this.$2.get(b)||0;if(d>0){var f=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$3["delete"](a),e.$4["delete"](f)},d);this.$4.add(f)}};b.applyRestriction=function(a){var b=this;return a.filter(function(a){return!b.$3.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$5?this.$5.addListener("representation_blocked",a):{remove:function(){}}};b.setAvailableRepresentationsCount=function(a){this.$1=a};b.destroy=function(){var a;(a=this.$5)==null?void 0:a.removeAllListeners();this.$5=null;for(a of this.$4)c("oz-player/shims/ozClearTimeout")(a);this.$4.clear()};b.$7=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_json"));if(Array.isArray(a)){a.forEach(function(a){a=parseInt(a,10);isNaN(a)||b.$2.set(a,-1)});if(this.$6)for(a=500;a<=599;a++)this.$2.set(a,-1)}}catch(a){}};b.$8=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_temporarily_json"));Object.entries(a).forEach(function(a){var c=a[0];a=a[1];c=parseInt(c,10);a=parseInt(a,10);!isNaN(c)&&!isNaN(a)&&b.$2.set(c,a)})}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy$p_5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy$p_4=b;e.$OzBufferAheadPriorityStrategy$p_1=d;e.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)),e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy$p_2)return;this.$OzBufferAheadPriorityStrategy$p_2=a;this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy$p_2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b of this.$2)if(b.isActive()){a=b.getBufferTarget();break}for(b of this.$3)a=b.adjustBufferTargetInSeconds(a);this.$1=a;return a};b.handleEvent=function(a){for(var b of this.$3)b.handleEvent(a)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.config;a=a.minimumBufferTargetSec;this.$2=1;this.$1=b;this.$3=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){var b;return Math.max((b=this.$3)!=null?b:this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2)};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector$p_2=null;e.$OzPlayheadAtInterruptionDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector$p_4=null;e.$OzPlayheadAtInterruptionDetector$p_1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector$p_5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector$p_5()});e.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector$p_4=d;return e}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector$p_2=a,this.$OzPlayheadAtInterruptionDetector$p_5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null};d.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var a=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy$p_3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy$p_2=b;d.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy$p_3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy$p_4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy$p_2=b;e.$OzPositionToViewportPriorityStrategy$p_1=d;e.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy$p_4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator$p_1=b;(b=d.$OzPriorityCalculator$p_2).addSubscriptions.apply(b,d.$OzPriorityCalculator$p_1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator$p_1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator$p_1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator$p_2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Set(a.map(function(a){return g(a)})),c="av01",d=b.has(c)?c:b.values().next().value;return d==null?a.slice():a.filter(function(a){return g(a)===d})};return a}();function g(a){return a.getMimeCodecs().replace(/\..*$/,"")}f["default"]=a}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e of this.$1)e.isActive(a)&&(d=Math.min(d,e.getSegmentsCount(a,b,c)));return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a){var b=this;return a.filter(function(a){a=b.$1?ManagedMediaSource.isTypeSupported(a.getMimeCodecs()):MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher$p_1=new Map();d.$OzEndOfStreamWatcher$p_4=!1;d.$OzEndOfStreamWatcher$p_2=b;d.$OzEndOfStreamWatcher$p_3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.get(a)===!0&&this.$OzEndOfStreamWatcher$p_1.set(a,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")};d.notifyMediaStreamEnded=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(a,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+b)};d.$OzEndOfStreamWatcher$p_5=function(a,b){var c=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var d=this.$OzEndOfStreamWatcher$p_2.getReadyState();d==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(a,b).then(function(){c.emit("streamEnd")})["catch"](function(){c.emit("streamEnd")})};d.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var a of this.$OzEndOfStreamWatcher$p_1.values())if(!a)return!1;return!0};d.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;this.$8=g;f.then(function(a){h.$5=a},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch SBM promise then - create")});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){h.$9(a,b)}))}var b=a.prototype;b.destroy=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$9=function(a,b){if(a!=="user")return;a=this.$5;if(a==null)return;var d=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),e;for(var f=0;f<this.$4.length;f++)this.$4[f].getID()===d&&(e=this.$4[f]);if(e&&b&&(this.$8||e.getBandwidth()<b.getBandwidth())){d=e.getSegmentByTime(this.$3.getCurrentTime());d&&a.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}};return a}();g["default"]=a}),98);
__d("oz-player/manifests/IOzSegment",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return((a==null?void 0:a.getSequenceNumber())||0)===((b==null?void 0:b.getSequenceNumber())||0)}function b(a,b){return((a==null?void 0:a.getSequenceNumber())||0)>=((b==null?void 0:b.getSequenceNumber())||0)}f.isSequenceNumberEqual=a;f.isSequenceNumberGreaterOrEqual=b}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;c===void 0&&(c=null);d=a.call(this)||this;d.$OzReadableStreamDataReader$p_1=[];d.$OzReadableStreamDataReader$p_3=Infinity;d.$OzReadableStreamDataReader$p_4=0;d.$OzReadableStreamDataReader$p_2=b;if(c!=null){b=c.getNumber("stream_reader_max_buffer_len");d.$OzReadableStreamDataReader$p_3=b>0?b:Infinity}return d}var d=b.prototype;d.onDataWritten=function(a){if(this.$OzReadableStreamDataReader$p_4+a.byteLength>=this.$OzReadableStreamDataReader$p_3){var b=c("oz-player/utils/ozConcatUint8Arrays")(this.$OzReadableStreamDataReader$p_1);b=b.buffer;this.$OzReadableStreamDataReader$p_2(b);this.$OzReadableStreamDataReader$p_1.length=0;this.$OzReadableStreamDataReader$p_4=0}this.$OzReadableStreamDataReader$p_1.push(a);this.$OzReadableStreamDataReader$p_4+=a.byteLength};d.onClose=function(){var a=this.$OzReadableStreamDataReader$p_1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader$p_4=0;this.$OzReadableStreamDataReader$p_2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var b=a.prototype;b.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})}this.$2.resolve();return a};b.getPromise=function(){return this.$3.getPromise()};b.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};b.finish=function(){this.$3.resolve()};b.isCancelled=function(){return this.$5};b.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){if(a){var b=a.pausableStream;return b.pauseStream()}},getStatusChangePromise:function(){return d.getPromise()}}};b.$10=function(a){var b=this,e=a.createStreamResult,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));k.getPromise()["catch"](function(){});a.then(function(){if(e){var a=e.pausableStream;e.loggingPayloads&&(i=e.loggingPayloads);g.resolve(a.getStream());b.$4=a;var f=c("oz-player/shims/OzPerformance").now(),k=b.$11(a.startStream());if(h){var l=function(c){var e=i;if(e){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(c,e.getRequestUrl(),e.segments,f-j,a.getBytesStreamed(),e.getResponse());var g=b.$9;g&&g(c,e.getRequestUrl(),e.getResponse())}};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(k,h,"fetch_stream",l,l)}return k}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),k.reject(a),f.reject(a)})};b.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){var d=this;b=b;b=this.$6(b);var e=this.$5.get(a);if(e===b)return;this.$5.has(a)&&this.remove(a);e=this.$7(b);var f=this.$4[e];f&&f.priority===b||(f={priority:b,queue:[]},this.$4.splice(e,0,f));this.$5.set(a,b);f.queue.push(a);a.getPromise().then(function(){d.remove(a)},function(){d.remove(a)})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzRoundRobinPriorityTaskQueue remove after task run")});this.$3(a,b>=this.$1?"immediate":"normal")};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};b.remove=function(a){var b=this.$5.get(a);if(b!==void 0){b=this.$7(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$7=function(a){a=a;a=this.$6(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$6=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});b["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzSequentialTaskScheduler task complete")});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes,i=a.config;a=a.bandwidthEstimator;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=i;this.$11=(e=a)!=null?e:null;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$12(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.$13=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5,this.$11));return a};e.startStreamDeferred=function(a){var b=a.debugName,c=a.segments,d=a.networkManager,e=a.segmentsLoggerProvider,f=a.mediaStreamType,g=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;var h=this.$14(e),i=this.$13();c.length>0?d=d.createPausableStream({debugName:b,segments:c,pipeThroughRangeStreamProviders:i,loggerProvider:e,mediaStreamType:f,dataAppendedCallback:g,dataAppendedErrorCallback:a}):d=null;this.$9=!0;b=h.addStreamDeferred(d,e);return{genStream:b.genStream,cancel:b.cancel,getStatusChangePromise:this.$15(b.getStatusChangePromise)}};e.$14=function(a){var b=this.$2;this.$12(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)):this.$6.updatePriority(b,this.$4);return b};e.$15=function(a){var c=this;return function(){return a().then(function(a){c.$16();return a})["catch"](function(a){c.$16();return(h||(h=b("Promise"))).reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$17()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$16=function(){this.$9=!1,this.$12(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$17()};e.$17=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$12=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null?void 0:a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null?void 0:a.setError(b);(a=d.$5)==null?void 0:a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null?void 0:a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();return b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,h,j){h=a.getPredictedSegmentAfter(g);if(h&&b.isPlaying())return h;j=i(b,e,g);h=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),j,h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);g&&g.getTimeRange().startTime>j&&(j=g.getTimeRange().startTime);return a.getSegmentByTime(j)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function b(a,b){var d=new(c("oz-player/manifests/OzSegmentOptions"))();return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},getOptions:function(){return d}})}function d(a){a.getOptions().setSegmentNumDecisionTime(Date.now());return a}g.getMaxSegment=a;g.getSegmentForSequenceNumber=b;g.markSegmentCreateTime=d}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2,j={AUDIO:1,CAPTION:3,VIDEO:0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzMediaStream$p_2=0;e.$OzMediaStream$p_3=0;e.$OzMediaStream$p_4=null;e.$OzMediaStream$p_13=null;e.$OzMediaStream$p_15=!1;e.$OzMediaStream$p_16=null;e.$OzMediaStream$p_17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream$p_19=[];e.$OzMediaStream$p_22=0;e.$OzMediaStream$p_29=!0;e.$OzMediaStream$p_31=!1;e.$OzMediaStream$p_32=null;e.$OzMediaStream$p_33=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream$p_35=!0;e.$OzMediaStream$p_38=0;e.$OzMediaStream$p_39=null;e.$OzMediaStream$p_40=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.networkManager,i=b.playbackState,j=b.endOfStreamWatcher,k=b.bufferTargetCalculator,l=b.priorityCalculator,m=b.streamSegmentsCountCalculator,n=b.abrManager,o=b.representation,p=b.loggerProvider,q=b.segmentLocator,r=b.setCustomFetchStreamLoggingAttributes,s=b.blockedRepresentationsManager,t=b.dynamicVideoLibrary,u=b.shouldAppendOncePerStream,v=b.mediaStreamType,w=b.warningEmitter;b=b.mpd;e.$OzMediaStream$p_1=f;e.$OzMediaStream$p_5=g;e.$OzMediaStream$p_5.then(function(a){e.$OzMediaStream$p_6=a,e.$OzMediaStream$p_16&&e.$OzMediaStream$p_16.setSourceBuffer(a),e.$OzMediaStream$p_27.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream$p_47()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - create")});e.$OzMediaStream$p_12=h;e.$OzMediaStream$p_7=i;e.$OzMediaStream$p_14=j;(f=e.$OzMediaStream$p_14)==null?void 0:f.registerMediaStream(babelHelpers.assertThisInitialized(e));e.$OzMediaStream$p_26=k;e.$OzMediaStream$p_27=l;e.$OzMediaStream$p_28=m;e.$OzMediaStream$p_16=n;e.$OzMediaStream$p_18=p.cloneContext();e.$OzMediaStream$p_36=q;e.$OzMediaStream$p_25=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream$p_39=r;e.$OzMediaStream$p_40=s;e.$OzMediaStream$p_42=t;e.$OzMediaStream$p_43=u;e.$OzMediaStream$p_44=v;e.$OzMediaStream$p_45=w;e.$OzMediaStream$p_46=b;e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_7.addEventListener("seeking",function(){var a=i.getCurrentTime(),b=null;e.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream$p_8.canPredict()&&(e.$OzMediaStream$p_6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0:!1)?b="no_reset_anchor":(b="reset_anchor",e.$OzMediaStream$p_41=Date.now(),e.$OzMediaStream$p_9!=null&&(e.$OzMediaStream$p_48(),e.$OzMediaStream$p_31=!1,e.$OzMediaStream$p_24&&e.$OzMediaStream$p_24.resolve()));e.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(a*1e3).setReason(b).setUserInfo({streamAnchorSegmentNumber:String((a=e.$OzMediaStream$p_9)==null?void 0:a.getSequenceNumber())}).log()}));e.$OzMediaStream$p_40!=null&&e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_40.onRepresentationBlocked(function(a){return e.$OzMediaStream$p_49(a)}));e.$OzMediaStream$p_21=d("oz-player/utils/OzMimeUtil").getMimeType(o.getMimeCodecs());e.$OzMediaStream$p_30=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream$p_21,priorityCalculator:e.$OzMediaStream$p_27,loggerProvider:e.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream$p_39,config:e.$OzMediaStream$p_1,bandwidthEstimator:e.$OzMediaStream$p_12.getBandwidthEstimator()});e.$OzMediaStream$p_23=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(e),e.$OzMediaStream$p_18);e.$OzMediaStream$p_50(o);return e}var e=b.prototype;e.start=function(){this.$OzMediaStream$p_23.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8};e.switchRepresentation=function(a,b){b===void 0&&(b=null),this.$OzMediaStream$p_50(a,"user",b)};e.onError=function(a){return this.$OzMediaStream$p_33.onError(a)};e.updateRunTimeConfigs=function(a){var b=a.streamDataHandler;a=a.resetStreamAnchor;b!==void 0&&(this.$OzMediaStream$p_34=b);a===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)};e.$OzMediaStream$p_50=function(a,b,e){var f=this;b===void 0&&(b="internal");e===void 0&&(e=null);if(a==null){if(this.$OzMediaStream$p_1.getBool("no_rep_to_switch_fallback_progressive")){var g=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NO_AVAILABLE_REP_TO_SWITCH",description:"No available representation to switch to because all are blocked"});this.$OzMediaStream$p_33.emitError(g)}return}b==="user"&&this.$OzMediaStream$p_48();(g=this.$OzMediaStream$p_20)==null?void 0:g.remove();this.$OzMediaStream$p_20=null;g=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init");var h=g.cloneContext().setRepresentationID(a.getID()),i=a.getInitSegment(),j=i.getData(),k=g.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():b).start();this.$OzMediaStream$p_8=a;g=function(){var a;k.log();f.$OzMediaStream$p_26.handleEvent("append_succeeded");f.emit("initAppended");(a=f.$OzMediaStream$p_14)==null?void 0:a.notifyRepresentationSwitched(f)};var l=function(b){var c;k.setError(b).log();f.$OzMediaStream$p_51(b);(c=f.$OzMediaStream$p_40)==null?void 0:c.handleError(a.getID(),b);if(a.getID()!==f.$OzMediaStream$p_8.getID()){(c=f.$OzMediaStream$p_24)==null?void 0:c.resolve()}};if(j==null){i=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[i],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:h,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:g,dataAppendedErrorCallback:l});j=i.getStream()}this.emit("switchRepresentation",b,a);this.$OzMediaStream$p_52({data:j,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:e,dataAppendedCallback:g,dataAppendedErrorCallback:l,loggerProvider:h.cloneContext(),appendTarget:0});if(e){i=a.getSegmentByTime(e[0]);if(i){b=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[i],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:h,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:g,dataAppendedErrorCallback:l});j=b.getStream();this.$OzMediaStream$p_52({data:j,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:g,dataAppendedErrorCallback:l,loggerProvider:h.cloneContext(),appendTarget:1})}}};e.getLoopInterval=function(){return this.$OzMediaStream$p_22};e.execute=function(){var a=this.$OzMediaStream$p_53();if(a){var b=this.$OzMediaStream$p_24=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream$p_54=function(a){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){a=this.$OzMediaStream$p_16.getBestRepresentation(a);if(this.$OzMediaStream$p_8!==a)return a}return null};e.$OzMediaStream$p_55=function(a){var b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,c=this.$OzMediaStream$p_26.computeBufferTarget();if(c<=0)return null;var e=null;a&&(e=this.$OzMediaStream$p_8.getCustomFieldFirstSegment());if(!e&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else{e||(e=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32));if(this.$OzMediaStream$p_8.canPredict()){a=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0;c=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream$p_10&&a>=c){c=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(c||0)>=a?this.$OzMediaStream$p_10:null}}}if(!e&&!this.$OzMediaStream$p_56()){c=this.$OzMediaStream$p_8.getEndingSegment();if(c&&this.$OzMediaStream$p_8.isEndingSegment(c)){a=c.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,b,this.$OzMediaStream$p_9);b>=a&&!this.$OzMediaStream$p_56()&&(e=c)}}return e};e.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15};e.$OzMediaStream$p_58=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,a,this.$OzMediaStream$p_8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream$p_54(f);if(e){this.$OzMediaStream$p_50(e);a=this.$OzMediaStream$p_55(!1);if(!a)return[];else return this.$OzMediaStream$p_58(a,{fetchSingleSegment:!1,preventRepresentationSwitch:!0})}}}return f};e.$OzMediaStream$p_59=function(){var a=this,b=function(b){b==null?void 0:b.remove(),a.$OzMediaStream$p_20===b&&(a.$OzMediaStream$p_20=null)};b(this.$OzMediaStream$p_20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream$p_20=d})["catch"](function(a){b(d);throw a})};e.$OzMediaStream$p_53=function(){var a=this,b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var e=this.$OzMediaStream$p_57(),f=this.$OzMediaStream$p_55(e);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&d("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(f,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}d("oz-player/manifests/IOzSegment").isSequenceNumberEqual(f,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0;this.$OzMediaStream$p_37=f;this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream$p_31){var g;this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return null}if(!f||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var i=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),b()},i?i:(a.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var j=this.$OzMediaStream$p_58(f,{fetchSingleSegment:e});if(j.length===0){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((f=this.$OzMediaStream$p_9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var k=j[j.length-1]||null,l=this.$OzMediaStream$p_8,m=function(){return l.isEndingSegment(k)};j.length!==0||c("oz-player/shims/ozvariant")(0,23148);g=j[0];f=g.getTimeRange().startTime;var n=k.getTimeRange().endTime,o={startTime:f,endTime:n,tag:{id:this.$OzMediaStream$p_8.getID()}},p=function(b){v.setAppendedBufferMs(Math.round(b.appendedSec*1e3)),v.log(),a.$OzMediaStream$p_26.handleEvent("append_succeeded"),j.forEach(function(b){a.emit("SegmentAppended",a.$OzMediaStream$p_60(b,o))}),m()&&a.endStream("appended_ending_segment"),a.$OzMediaStream$p_61(o,b)},q=function(b){v.setError(b).log();var c=t||s;c&&c.cancel();a.$OzMediaStream$p_51(b)},r=this.$OzMediaStream$p_18.cloneContext();r.setRepresentationID(this.$OzMediaStream$p_8.getID());r.setSegmentStartTime(f).setSegmentEndTime(n);var s,t;!e?(t=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:j,networkManager:this.$OzMediaStream$p_12,sourceBufferState:b,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:r.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s):(s=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:j,pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:r.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s);this.$OzMediaStream$p_31=!0;var u=this.$OzMediaStream$p_62(g,k,j.length),v=r.getOperationLogger("queued_append");v.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var w=function(c,b){a.$OzMediaStream$p_52({data:c,mimeCodecs:b,clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:q,loggerProvider:r.cloneContext(),appendTarget:u})},x;!!t||!!s||c("oz-player/shims/ozvariant")(0,23147);var y=this.$OzMediaStream$p_8.getMimeCodecs();t?(t.genStream().then(function(a){return w(a,y)})["catch"](function(b){return a.$OzMediaStream$p_33.emitError(b)}),x=t.getStatusChangePromise()):s&&(w(s.getStream(),y),x=s.getStatusChangePromise());!x&&c("oz-player/shims/ozvariant")(0,51928);f=x.then(function(b){a.$OzMediaStream$p_63(b,k);return a.$OzMediaStream$p_64()}).then(function(){a.$OzMediaStream$p_2=0});return f["catch"](function(b){var c,d=a.$OzMediaStream$p_9;a.$OzMediaStream$p_65(k);(c=a.$OzMediaStream$p_40)==null?void 0:c.handleError(l.getID(),b);return a.$OzMediaStream$p_66(b,k,d)})};e.handleError=function(a){var b=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");b.setError(a).setResult("failed").log();return this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream$p_66=function(a,b,e){var f=this;this.$OzMediaStream$p_31=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),i=h[0],j=h[1],k=d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(i,this.$OzMediaStream$p_21),l=function(b){f.$OzMediaStream$p_2++;f.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+k.getDescription()).setError(k).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream$p_21).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream$p_9=e;else if(b.behavior==="recover_failed_request"&&d("oz-player/utils/OzErrorUtils").isOzError(a)){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream$p_9=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(f.$OzMediaStream$p_8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.emit("streamErrorRetry",k);return g.resolve()},b.timeoutMs)};this.$OzMediaStream$p_4!==j?(this.$OzMediaStream$p_4=j,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;h=!0;var m=function(){h=!1};i={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){m(),f.$OzMediaStream$p_10=b,f.$OzMediaStream$p_11=b,f.endStream("streamError_event_object"),g.resolve()},error:k,isInitialRequest:!1,retry:function(a){var b;m();l({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};this.emit("streamError",i);h&&(this.$OzMediaStream$p_33.emitError(k),this.$OzMediaStream$p_2=0,g.resolve());return g.getPromise()};e.$OzMediaStream$p_65=function(a){this.$OzMediaStream$p_48();this.$OzMediaStream$p_10=a;this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();a=this.$OzMediaStream$p_6;a&&a.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)};e.$OzMediaStream$p_63=function(a,b){a==="done"&&(this.$OzMediaStream$p_9=b)};e.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1};e.$OzMediaStream$p_52=function(a){this.$OzMediaStream$p_19.push(a),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()};e.$OzMediaStream$p_61=function(a,b){if(a==null)return;this.$OzMediaStream$p_8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?this.$OzMediaStream$p_25.add(b.startTime_UNSAFE,b.endTime_UNSAFE,a.tag):this.$OzMediaStream$p_25.add(a.startTime,a.endTime,a.tag)};e.$OzMediaStream$p_47=function(){var a=this;this.$OzMediaStream$p_19.forEach(function(b){var d=b.data,e=b.mimeCodecs,f=b.clearSourceBufferRange,g=b.dataAppendedCallback,h=b.dataAppendedErrorCallback,i=b.loggerProvider;b=b.appendTarget;d=d instanceof Uint8Array||a.$OzMediaStream$p_34==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream$p_34.bind(a,a.$OzMediaStream$p_8),a.$OzMediaStream$p_1));a.$OzMediaStream$p_6&&a.$OzMediaStream$p_6.queueData(d,e,f,i,b).then(function(a){if(!a)return;g(a)})["catch"](function(a){h(a)})});this.$OzMediaStream$p_19=[]};e.$OzMediaStream$p_67=function(){var a=this.$OzMediaStream$p_6;if(!a)return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=this.$OzMediaStream$p_7.getCurrentTime(),d=[{fromTime:0,toTime:b}],e=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(e>0){e=e/1e3;var f=a.getSourceBufferState();f=f.getBufferedRanges();f=f.length>=1?f[f.length-1].endTime:b;d=[{fromTime:0,toTime:Math.max(0,b-e)}];b+e<f&&d.push({fromTime:b+e,toTime:f})}return a.clearRangeWithWait(d)};e.$OzMediaStream$p_68=function(a){return!1};e.$OzMediaStream$p_51=function(a){var b=this;if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(a,this.$OzMediaStream$p_21));this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var e=this.$OzMediaStream$p_67();e.then(function(){b.restartLoopBody()})["catch"](function(a){a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream$p_33.emitError(a)})}else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_CANCELLED")return;else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn");(e=this.$OzMediaStream$p_45)==null?void 0:e.emitError(a)}else c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(a)&&this.$OzMediaStream$p_33.emitError(a)};e.$OzMediaStream$p_62=function(a,b,c){var d=0;if(this.$OzMediaStream$p_43)return Infinity;var e=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29};e.enableAdaptation=function(){this.$OzMediaStream$p_29=!0};e.disableAdaptation=function(){this.$OzMediaStream$p_29=!1};e.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(a){a.destroy()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream$p_25.get(a);if(!b){var c=this.$OzMediaStream$p_8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream$p_7.getDuration()+d&&(b=this.$OzMediaStream$p_25.get(c.endTime-d))}return b?b.id:null};e.endStream=function(a){var b;(b=this.$OzMediaStream$p_14)==null?void 0:b.notifyMediaStreamEnded(this,a);this.$OzMediaStream$p_69()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream$p_8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream$p_6){var b=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream("buffered_to_end_time"))}}};e.$OzMediaStream$p_60=function(a,b){return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?j.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?j.VIDEO:j.CAPTION,segment:a,sourceBuffer:(a=(a=this.$OzMediaStream$p_6)==null?void 0:(a=a.getDebug())==null?void 0:a.SourceBuffer)!=null?a:null,timeRange:b}};e.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null};e.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()};e.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var a=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream$p_32=a[a.length-1].endTime)}};e.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null};e.$OzMediaStream$p_49=function(a){this.$OzMediaStream$p_8.getID()===a&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream$p_35=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream$p_6;return d?d.clearRangeWithWait([{fromTime:a,toTime:b}]):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a,b){var c=null;for(var d in a){if(d===b)continue;a[d].inBufferAheadTimeSince!=null&&(c=c!=null?Math.min(c,a[d].inBufferAheadTimeSince):a[d].inBufferAheadTimeSince)}return c}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null});(j=this.$2)==null?void 0:j.setEnableCatchup(h);j=this.$6(a,b,c,d,e,f,g,h,i);(a=j.segment)==null?void 0:a.getOptions().setSegmentNumDecisionTime(Date.now());j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();b=this.$4;if(j.segment&&b!=null){c=j.segment.getOptions();c.setIsDVLEnabled(b.shouldRequestDynamicInfo(i))}return j.segment};b.$6=function(a,b,c,e,f,g,j,k,l){var m,n=b.getCurrentTime(),o=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),p=e!=null?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j):{bufferAheadSec:0,bufferedOffset:0},q=p.bufferAheadSec;p=p.bufferedOffset;var r=null,s=null,t=this.$2?this.$2.enabled():!0,u=a.getPredictedSegmentAfter(f),v=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a,j.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,l)),w=!0,x=null;if(o&&k&&((m=u)==null?void 0:m.getSequenceNumber())!=null&&((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)<=((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)){u=v;r="paired_catchup";this.$3.getOperationLogger("segment_locator").setInitiator(r).setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)-((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)).setType(l).log();w=!1;x=r}else if(o&&k&&t&&u!=null&&((m=this.$2)==null?void 0:m.isBehindPreferredLiveHeadLatencyWithTolerance())){if(this.$2&&q>this.$2.getPreferredLiveHeadLatencySec()&&p==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p)}};o=a.getEndingSegment();k=d("oz-player/streams/OzSegmentUtils").getMaxSegment([o,u]);m=j.getNumber("pdash_download_cursor_between_catchups_seg")===0||((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)+j.getNumber("pdash_download_cursor_between_catchups_seg")<((v=o==null?void 0:o.getSequenceNumber())!=null?v:0);if(m){if(((o=k==null?void 0:k.getSequenceNumber())!=null?o:0)>((m=(v=u)==null?void 0:v.getSequenceNumber())!=null?m:0)){this.$5[l].lastSkippedToSegmentNumber=(o=k==null?void 0:k.getSequenceNumber())!=null?o:0;this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((v=k==null?void 0:k.getSequenceNumber())!=null?v:0)-((o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0)).setType(l).log()}u=k;r="catchup";w=!1;x=r}}else if(f==null){u=a.getSegmentByTime(n);r="1st_run";v=a.getTimeRanges();s={approx:String(a.canApproximateId()),ranges:String(v.length),mpdStartTime:v.length>0?String(v[v.length-1].startTime):null,mpdEndTime:v.length>0?String(v[v.length-1].endTime):null};this.$5[l].lastSkippedToSegmentNumber=(o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0}w&&(w=t,x="stream_state");if(w&&q>c){this.$5[l].inBufferAheadTimeSince==null&&(this.$5[l].inBufferAheadTimeSince=Date.now());return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p),lastMaxSegNum:String(h(this.$5,l)),segment:u?String(u.getSequenceNumber()):null,computedBufferAheadTarget:String(c)}}}else!w&&q>c&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),computedBufferAheadTarget:String(c)}).setReason("disabled_buffer_ahead_rule:"+(x||"")).setType(l).log();k=g&&g.getSequenceNumber()||0;f=u&&u.getSequenceNumber()||0;if(u&&g&&k>=f){n=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(n||0)>=k?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(k)}}}v=e?d("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(e.getBufferedRanges()):0;m=e?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j).bufferAheadSec:0;o=i(this.$5,l);t=Date.now();if(j.getNumber("download_cursor_total_buffer_max_sec")!=0&&j.getNumber("download_cursor_total_buffer_max_sec")<m||j.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&o!=null&&j.getNumber("download_cursor_buffer_ahead_time_max_sec")<(t-o)/1e3){this.$5[l].lastSkippedToSegmentNumber=(x=(w=u)==null?void 0:w.getSequenceNumber())!=null?x:0;this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),totalBufferedSec:String(v),computedBufferAheadTarget:String(c),inBufferAheadElapsedTime:String((t-((f=o)!=null?f:0))/1e3)}).setReason("force_paired_catchup").setType(l).log()}this.$5[l].inBufferAheadTimeSince=null;return{segment:u,initiator:r?r:void 0,userInfo:s?s:void 0}};return a}();g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c,"auto").uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}var j="av01",k="vp09",l="avc1";a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player$p_5=new Map();e.$Player$p_6=new Map();e.$Player$p_9=void 0;e.$Player$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player$p_11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_12=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_19=void 0;e.$Player$p_25=[];e.$Player$p_26=void 0;e.$Player$p_27=void 0;e.$Player$p_32=null;e.$Player$p_33=null;e.$Player$p_43=null;e.$Player$p_51=!1;e.$Player$p_54=0;e.$Player$p_55=null;e.$Player$p_56=null;e.$Player$p_57=0;e.$Player$p_58=null;e.$Player$p_59=null;e.$Player$p_60=!1;e.$Player$p_63=null;e.$Player$p_64=null;e.$Player$p_70=!1;e.$Player$p_71=!1;e.$Player$p_76=!1;e.$Player$p_77=null;e.$Player$p_78=!1;e.$Player$p_89=function(){var a=new(c("oz-player/parsers/OzXmlParserImplDOMParser"))();return a};e.$Player$p_91=function(){e.$Player$p_5.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player$p_92=function(){e.$Player$p_5.forEach(function(a){return a.endStream("streamGone")})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNode,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.bandwidthEstimatorOverride;n=n===void 0?null:n;var o=b.customVTTBufferTargetStrategies;o=o===void 0?null:o;var p=b.shouldBlockStatusCode5xx;p=p===void 0?!1:p;var q=b.prefetchCache;q=q===void 0?null:q;var r=b.getOverrideOzRequestImplementation;r=r===void 0?null:r;var s=b.getUserSelectedPlaybackRate,t=b.networkRequestStreamHandlers,u=b.networkRequestStreamRetryHandler,v=b.networkRequestUrlRefreshHandler,w=b.getShouldIncludeCredentials;w=w===void 0?null:w;var x=b.getCustomRequestParametersForURI;x=x===void 0?null:x;var y=b.initialRepresentationIDs;y=y===void 0?[]:y;var z=b.debugCreateInitiator;z=z===void 0?null:z;var A=b.customParsers;A=A===void 0?new Map():A;var B=b.videoPlaybackRestrictions;B=B===void 0?[]:B;var C=b.customSegmentTimelineParser;C=C===void 0?null:C;var D=b.customRepresentationParsers;D=D===void 0?{}:D;var E=b.networkRequestFetchPriority;E=E===void 0?"auto":E;var F=b.videoAbrManagerFactory;F=F===void 0?null:F;var G=b.seekHandler;G=G===void 0?null:G;var H=b.initialPlaybackPositionForDynamicMpd;H=H===void 0?-20:H;var I=b.liveheadFallBehindBlockThreshold;I=I===void 0?30:I;var J=b.liveheadFallBehindBlockMargin;J=J===void 0?5.9:J;var K=b.startTimeStamp;K=K===void 0?0:K;var L=b.drmProviders;L=L===void 0?[]:L;var M=b.getVideoDimensions;M=M===void 0?null:M;var N=b.setCustomFetchStreamLoggingAttributes;N=N===void 0?null:N;var O=b.bufferEndLimit;O=O===void 0?null:O;var P=b.configureCustomRequestParametersForSegment;P=P===void 0?null:P;var Q=b.isClientTriggeredTraceEnabled;Q=Q===void 0?!1:Q;var R=b.enableImmediateQualityDownSwitch;R=R===void 0?!1:R;b=b.userPreferenceLang;b=b===void 0?null:b;e.$Player$p_1=o;e.$Player$p_49=z;o=m.perfLoggerProviders;z=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player$p_17=m||!1;e.$Player$p_16=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player$p_79().concat(o));e.$Player$p_2=f;e.$Player$p_4=(m=i)!=null?m:new(c("oz-player/configs/OzPlayerConfig"))((o=j)!=null?o:{});e.$Player$p_78=e.$Player$p_4.getBool("enable_managed_media_source")&&!!window.ManagedMediaSource;e.$Player$p_75=e.$Player$p_78?"changeType"in window.ManagedSourceBuffer.prototype:"changeType"in window.SourceBuffer.prototype;e.$Player$p_12.onError(function(){});e.$Player$p_22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player$p_22.observe(z,e.$Player$p_16);e.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+c("oz-player/shims/OzUuid")()).log();e.$Player$p_53=r;e.$Player$p_28=A;e.$Player$p_67=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player$p_4,p);e.$Player$p_10.addSubscriptions(e.$Player$p_67.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player$p_31=[e.$Player$p_67,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))(e.$Player$p_78)].concat(B);e.$Player$p_75||e.$Player$p_31.push(new(c("oz-player/strategies/OzSingleCodecRestriction"))());e.$Player$p_29=D;e.$Player$p_30=C;e.$Player$p_35=F;e.$Player$p_36=G;e.$Player$p_37=K;e.$Player$p_38=H;e.$Player$p_41=(f=s)!=null?f:function(){return 1};e.$Player$p_39=I;e.$Player$p_42=J;e.$Player$p_66=O;e.$Player$p_69=Q;e.$Player$p_71=R;e.$Player$p_47=L;e.$Player$p_63=N;e.$Player$p_3=h;e.$Player$p_7=new(c("oz-player/media_source/MediaSourceManager"))({videoNode:e.$Player$p_3,config:e.$Player$p_4,perfLoggerProvider:e.$Player$p_16,isChangeTypeSupported:e.$Player$p_75,useManagedMediaSource:e.$Player$p_78,handleVttCaptionsUpdated:function(a){var b;b=(b=e.$Player$p_5.get("caption"))==null?void 0:(b=b.getCurrentRepresentation())==null?void 0:b.getLang();e.emit("vttCaptionsUpdated",a,b)},onClearVideoNodeError:function(){e.$Player$p_80()},onRetryVideoElementError:function(a){e.emit("videoNodeErrorRetry",a)}});e.$Player$p_7.onError(function(a){e.$Player$p_11.emitError(a)});if(e.$Player$p_4.getBool("clear_on_seek")){i=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player$p_3,e.$Player$p_4,e.$Player$p_5,e.$Player$p_16);i.maybeOverwriteVideoCurrentTimeProperty();e.$Player$p_10.addSubscriptions(i.onError(e.$Player$p_11.emitError));e.$Player$p_64=i}e.$Player$p_24=q;m=e.$Player$p_24&&e.$Player$p_24.getCachedRepresentations();e.$Player$p_25=m||y;e.$Player$p_65=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player$p_4});e.$Player$p_44=t;e.$Player$p_45=w;e.$Player$p_46=x;e.$Player$p_68=P;e.$Player$p_77=(j=n)!=null?j:c("oz-player/networks/OzBandwidthEstimator");e.$Player$p_13=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player$p_4,prefetchCache:e.$Player$p_24,networkRequestStreamHandlers:e.$Player$p_44,getOverrideOzRequestImplementation:e.$Player$p_53,getShouldIncludeCredentials:e.$Player$p_45,getCustomRequestParametersForURI:e.$Player$p_46,networkRequestFetchPriority:E,networkRequestStreamRetryHandler:u,networkRequestUrlRefreshHandler:v,setCustomFetchStreamLoggingAttributes:e.$Player$p_63,dynamicVideoLibrary:e.$Player$p_65,configureCustomRequestParametersForSegment:e.$Player$p_68,onResourceTimingBufferFull:function(){e.$Player$p_81()},bandwidthEstimator:e.$Player$p_77});e.$Player$p_18=l;e.$Player$p_8=k;e.$Player$p_14=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player$p_4,e.$Player$p_3,e.$Player$p_16);e.$Player$p_52=M;e.$Player$p_15=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player$p_7,e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_15.addListener("streamEnd",function(){e.$Player$p_51=!0,e.emit("streamEnd")}));e.$Player$p_50=(o=g)!=null?o:e.$Player$p_82();e.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player$p_61=new(c("oz-player/states/OzPositionToViewport"))(e.$Player$p_3,e.$Player$p_4));e.$Player$p_72=b;e.$Player$p_73=null;e.$Player$p_74={lang:null,role:null};return e}var f=e.prototype;f.$Player$p_81=function(){if(this.$Player$p_70)return;c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn");this.$Player$p_70=!0};f.$Player$p_83=function(a){var b=this;this.$Player$p_84();var c=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(e){var f,g,c=b.$Player$p_85(a);f=String((f=c.getCustomField("currentServerTimeMs"))!=null?f:"");g=String((g=c.getCustomField("lastVideoFrameTs"))!=null?g:"");f={currentServerTimeMs:f,ingestLastVideoFrameTs:g,nowMs:String(Date.now())};g=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player$p_4);g=g&&g.endTime!=0?g.endTime:null;e.setLiveheadPosition(g).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(b.$Player$p_76).setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated"))).setUserInfo(f);return c});this.$Player$p_86(c)};f.$Player$p_86=function(a){var b=this;this.$Player$p_9=i(a);this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player$p_26=this.$Player$p_87();this.$Player$p_27=this.$Player$p_88();this.$Player$p_67.setAvailableRepresentationsCount(a.getVideoRepresentations().length);if(this.$Player$p_18!=null){var e=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,a,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69,this.$Player$p_78);this.$Player$p_90(e);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError),e.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),e.addListener("manifestFetchErrorRetry",function(a){return b.emit("manifestFetchErrorRetry",a)}),e.addListener("streamTransitionToStatic",this.$Player$p_91),e.addListener("streamGone",this.$Player$p_92));e.setupUpdateLoop();this.$Player$p_21=e}this.$Player$p_4.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player$p_40=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:a,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=this.$Player$p_37:this.$Player$p_37=a.isStaticMpd()?this.$Player$p_37:this.$Player$p_93(a);this.$Player$p_19=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:a,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(e=(e=this.$Player$p_64)==null?void 0:e.getCurrentTimePropertyOverwriteSuccess())!=null?e:!1,liveLatencyManager:this.$Player$p_40});this.$Player$p_20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:a,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16});this.$Player$p_94()["catch"](function(a){var e=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;b.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(a),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player$p_18=a;try{var c=this.$Player$p_8;c!=null?this.$Player$p_83(c):a!=null?this.$Player$p_95(a).then(function(a){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}b.$Player$p_8=a;b.$Player$p_54=0;b.$Player$p_83(a)})["catch"](function(c){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}var e=d("oz-player/utils/OzErrorUtils").isOzError(c)?c:null;e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(c),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:c,url:a})});b.$Player$p_96(e,a)}):this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){c=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(a),extra:babelHelpers["extends"]({},c==null?void 0:c.getExtra(),{originalError:a})}))}};f.$Player$p_93=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a);return Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player$p_95=function(a){this.$Player$p_54++;a=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:a,options:null,loggerProvider:this.$Player$p_16});a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player$p_97=function(){this.$Player$p_55!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)};f.$Player$p_96=function(a,b){var d=this,e=!0,f=this.$Player$p_54-1,g=a.getExtra().code;this.$Player$p_56!==g?(this.$Player$p_56=g,this.$Player$p_57=1):this.$Player$p_57++;var h=function(){e=!1};g={endStream:function(){h(),d.$Player$p_51=!0,d.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player$p_97(),d.$Player$p_55=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player$p_97(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player$p_11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler,d=a.videoStreamDataHandler,e=a.applicationStreamDataHandler;a=a.resetStreamAnchor;if(d!==void 0){var f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({streamDataHandler:d})}if(a!==void 0){f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({resetStreamAnchor:a});d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({resetStreamAnchor:a});(f=this.$Player$p_19)==null?void 0:f.resetCurrentTime()}if(c!==void 0){d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}if(e!==void 0){f=this.$Player$p_5.get("caption");f&&f.updateRunTimeConfigs({streamDataHandler:e,resetStreamAnchor:a})}b!=null&&b!==""&&this.$Player$p_98(b)};f.$Player$p_99=function(a,b){var c=this,e=a.getMimeCodecs();e=this.$Player$p_7.createSourceBufferManager(b+"/"+a.getMimeType()+"/"+a.getCodecs(),e,b,a.getInitSegment().getData());this.$Player$p_100(e,b,a);a=e.then(function(a){c.$Player$p_50&&b!=="caption"&&c.$Player$p_50.setSourceBufferState(b,a.getSourceBufferState());return a});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,this.$Player$p_16,"source_attach",function(a){a.setType(b)});return a.then(function(a){if(b!=="caption"){var d;(d=c.$Player$p_19)==null?void 0:d.observeSourceBufferState(a.getSourceBufferState(),b)}})};f.isDrm=function(){var a=this.$Player$p_48;if(a!=null){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player$p_84=function(){var a=this.$Player$p_47;if(a.length>0){var b=this.$Player$p_48=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});a.forEach(function(a){b.addProvider(a)});this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError))}};f.$Player$p_101=function(a){var b=this,d=i(this.$Player$p_9);a=[this.$Player$p_4,a,this.$Player$p_102(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return b.$Player$p_103()},d.isStaticMpd()?"static":"dynamic",this.$Player$p_16];d=this.$Player$p_35&&this.$Player$p_35.apply(this,a);return(d=d)!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player$p_104=function(a){return a==="caption"?!0:!1};f.$Player$p_100=function(a,b,e){var f=this,g=i(this.$Player$p_9),h=this.$Player$p_6.get(b),j=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:a,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:b!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_105(b),priorityCalculator:this.$Player$p_106(),streamSegmentsCountCalculator:this.$Player$p_107(b),abrManager:h,representation:e,loggerProvider:this.$Player$p_16.cloneContext().setType(b),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_104(b),mediaStreamType:b,warningEmitter:this.$Player$p_12,mpd:g});this.$Player$p_37===0?j.start():(i(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){j.start()})));this.$Player$p_10.addSubscriptions(j.onError(this.$Player$p_11.emitError));this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(j));b==="video"&&(this.$Player$p_33=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),this.$Player$p_102()),j,a,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError)));this.$Player$p_5.set(b,j);this.$Player$p_10.addSubscriptions(j.addListener("switchRepresentation",function(){var c,a=j.getCurrentRepresentation();(c=f.$Player$p_23)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_19)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_20)==null?void 0:c.setTimeRangeProvider(a);b==="video"&&f.emit("switchVideoRepresentation")}),j.addListener("SegmentAppended",function(a){f.$Player$p_108("SegmentAppended",a)}),j.addListener("streamError",function(a){f.emit("streamError",a)}),j.addListener("streamErrorRetry",function(a){f.emit("streamErrorRetry",a)}))};f.$Player$p_109=function(){if(this.$Player$p_66!=null)return[new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)];else return[new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(i(this.$Player$p_9),this.$Player$p_4),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]};f.$Player$p_110=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]};f.$Player$p_111=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]};f.$Player$p_87=function(){return new(c("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_109(),this.$Player$p_110())};f.$Player$p_88=function(){return this.$Player$p_1!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_109()),this.$Player$p_111()):this.$Player$p_87()};f.$Player$p_105=function(a){var b=a==="caption"?this.$Player$p_27:this.$Player$p_26;b||c("oz-player/shims/ozvariant")(0,76764,a);return b};f.$Player$p_90=function(a){var b=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player$p_50,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,d);this.$Player$p_10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player$p_16.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player$p_50)==null?void 0:c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player$p_16.getOperationLogger("stream_resumed").log();(c=b.$Player$p_50)==null?void 0:c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player$p_32=e}};f.$Player$p_106=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player$p_107=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_105(a),this.$Player$p_4)];this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4));a==="video"&&b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_102()));return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player$p_11.onError(a)};f.onWarning=function(a){return this.$Player$p_12.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player$p_9;if(!a||this.$Player$p_2)return null;a=this.$Player$p_5.get("video");a=a&&a.getCurrentRepresentation();if(a instanceof c("oz-player/manifests/OzVideoRepresentation"))return a.getDisplayLabel();a=this.$Player$p_102();a=a[0];return a?a.getDisplayLabel():null};f.getTargetAudioTrack=function(){var a=this.$Player$p_9;if(!a)return null;a=this.$Player$p_5.get("audio");a=a&&a.getCurrentRepresentation();if(a){var b;return{id:a.getID(),displayLabel:a.getDisplayLabel(),lang:(b=a.getLang())!=null?b:null,role:a.getRole(),mimeCodecs:a.getMimeCodecs(),variantKey:a.getVariantKey()}}b=this.$Player$p_112();a=b[0];return a?a.getAudioTrack():null};f.getCurrentPlayingVideoVariant=function(){return this.$Player$p_73};f.getTargetVideoVariant=function(){return this.$Player$p_74};f.switchToVideoQuality=function(a){var b=this.$Player$p_102().find(function(b){return b.getDisplayLabel()===a});if(b){var c=this.$Player$p_5.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.switchToVideoVariant=function(a){this.$Player$p_74=a===null?{lang:null,role:null}:a;if(this.$Player$p_74.lang===((a=(a=this.$Player$p_73)==null?void 0:a.lang)!=null?a:null)&&this.$Player$p_74.role===((a=(a=this.$Player$p_73)==null?void 0:a.role)!=null?a:null)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}else if(!this.$Player$p_9){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant mpd is void"}),"switchToVideoVariant mpd is void","warn");return}else if(!this.$Player$p_113(this.$Player$p_74.lang)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}this.$Player$p_114();this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75&&this.$Player$p_115();this.$Player$p_73=this.$Player$p_74};f.$Player$p_114=function(){var a=this.$Player$p_112()[0];if(a){var b=this.$Player$p_5.get("audio");b&&(b.switchRepresentation(a,[0,this.$Player$p_14.getDuration()]),b.disableAdaptation())}};f.$Player$p_115=function(){var a=this.$Player$p_5.get("video");if(!a)return;var b=a.getCurrentRepresentation();if(b.getLang()===this.$Player$p_74.lang&&b.getRole()===this.$Player$p_74.role)return;b=this.$Player$p_102();if(b.length===0){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74),"warn");return}var e=this.$Player$p_6.get("video");e?(e.updateRepresentations(b),e=e.getBestRepresentation()):e=b[0];if(!e){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74));return}a.switchRepresentation(e,[0,this.$Player$p_14.getDuration()]);return};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player$p_5.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player$p_5.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player$p_9;if(!b)return[];b=this.$Player$p_102().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))});var c=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}),e=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k});c=c?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}):e?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k}):b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===l});return c.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}).map(function(a){return a.getDisplayLabel()})};f.getVideoTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_102().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return{mimeCodecs:a.getMimeCodecs(),codec:a.getCodecs(),codecFamily:d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getMimeCodecs()),displayLabel:a.getDisplayLabel(),qualityLabel:a.getDisplayLabel(),height:a.getHeight(),id:a.getID(),qualityScoreCurveString:a.getQualityScoreCurveString("csvqm"),width:a.getWidth(),lang:a.getLang(),role:a.getRole(),variantKey:a.getVariantKey()}})};f.getAudioTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:b.getAudioRepresentations().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return a.getAudioTrack()})};f.setEnableLiveheadCatchup=function(a){if(this.$Player$p_20){var b;a?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log();(b=this.$Player$p_20)==null?void 0:b.setTimelineBlockingEnabled(a)}this.$Player$p_5.forEach(function(b){b.setEnableLiveheadCatchup(a)});(b=this.$Player$p_19)==null?void 0:b.setEnableLiveheadCatchup(a)};f.$Player$p_94=function(){var a=this;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_113(this.$Player$p_72)){var c;this.$Player$p_74=babelHelpers["extends"]({},this.$Player$p_74,{lang:(c=this.$Player$p_72)!=null?c:null,role:this.$Player$p_72!=null?"dub":null})}c=this.$Player$p_102()[0];this.$Player$p_62=c&&c.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;c=this.$Player$p_2?[this.$Player$p_116({liveConfigsFromAudioStream:!0}),this.$Player$p_117()]:[this.$Player$p_118(),this.$Player$p_116({liveConfigsFromAudioStream:!1}),this.$Player$p_117()];var e=[];return(h||(h=b("Promise"))).all(c).then(function(){var b=a.$Player$p_5.get("video"),c=a.$Player$p_5.get("audio"),d=a.$Player$p_5.get("caption");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());d&&e.push(d.getCurrentRepresentation());e.forEach(function(b){a.$Player$p_10.addSubscriptions(b.addUpdateListener(function(){a.$Player$p_108("SegmentIndexesUpdated",e)}))});a.$Player$p_108("InitialSegmentIndexes",e);a.$Player$p_3&&a.$Player$p_3.style&&(a.$Player$p_3.style.display=a.$Player$p_2?"none":"block");a.$Player$p_73=a.$Player$p_74;a.emit("initialized")})};f.$Player$p_119=function(a){if(!a.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(a,!0)};f.$Player$p_120=function(a){var b;this.$Player$p_23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4);this.$Player$p_119(a);(b=this.$Player$p_23)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_19)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_20)==null?void 0:b.setTimeRangeProvider(a)};f.$Player$p_118=function(){var a=this.$Player$p_102();if(!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),a);if(!b.length){a=a.map(function(a){return a.getDisplayLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+a.join(", "),extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_120(b[0]);a=this.$Player$p_121(b);a&&this.$Player$p_4.getBool("enable_abr_logging")&&this.$Player$p_16.getOperationLogger("video_stream_setup_initial_representation_from_prefetch").setResult("success").setReason("player_initialized").setRepresentationID(a.getID()).setPreviousRepresentationID(null).setUserInfo({initialRepresentationIDs:JSON.stringify(this.$Player$p_25)}).setType("video").setInitiator("Player").log();var e=this.$Player$p_101(a||b[0]);this.$Player$p_6.set("video",e);a||(a=e.getBestRepresentation());return this.$Player$p_99(a||b[0],"video")};f.$Player$p_102=function(){var a=this.$Player$p_9;if(!a)return[];var b=a.getVideoRepresentations();if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75){var c=a.getVideoRepresentationsByVariant(this.$Player$p_74);b=c.length>0?c:a.getVideoRepresentationsByVariant({lang:null,role:null})}var e=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),b);return b.filter(function(a){return e.includes(a)})};f.$Player$p_112=function(){var a=this.$Player$p_9;if(!a)return[];return this.$Player$p_4.getBool("enable_alternative_audio_tracks")?a.getAudioRepresentationsByVariant(this.$Player$p_74):a.getAudioRepresentations()};f.$Player$p_113=function(a){var b=this.$Player$p_9;if(!b)return!1;var c=b.getAudioRepresentations();if(a==null)return!0;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&b.isStaticMpd()){b=c.findIndex(function(b){return b.getLang()===a});return b>-1}return!1};f.$Player$p_116=function(a){var b=this;a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var d=i(this.$Player$p_9),e=d.getAudioRepresentations();a&&this.$Player$p_120(e[0]);a=-1;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.length>1&&d.isStaticMpd()&&(this.$Player$p_72!=null&&(a=e.findIndex(function(a){return a.getLang()===b.$Player$p_72})));if(e.length){d=a>-1?a:e.findIndex(function(a){return a.getLang()==null&&a.getRole()==null});d=d>-1?d:0;return this.$Player$p_99(a>=0&&a<e.length?e[a]:this.$Player$p_122(e)||e[d],"audio")}return c("oz-player/shims/OzMaybeNativePromise").resolve()};f.$Player$p_117=function(){var a=i(this.$Player$p_9);a=a.getApplicationRepresentations();return a.length?this.$Player$p_99(this.$Player$p_123(a)||a[0],"caption"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player$p_9};f.destroy=function(a){var d,e,f=this;a=this.$Player$p_16.getOperationLogger("unload").setInitiator(a).start();(d=this.$Player$p_64)==null?void 0:d.destroy();this.$Player$p_97();this.$Player$p_5.forEach(function(a){a.destroy()});this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null);this.$Player$p_5=new Map();this.$Player$p_10.release();this.$Player$p_10.engage();this.$Player$p_14.destroy();this.$Player$p_19&&this.$Player$p_19.destroy();this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null);this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null);this.$Player$p_48&&this.$Player$p_48.destroy();this.$Player$p_61&&this.$Player$p_61.destroy();this.$Player$p_13&&this.$Player$p_13.destroy();this.$Player$p_52&&(this.$Player$p_52=null);this.$Player$p_7&&this.$Player$p_7.detach();this.$Player$p_3.pause();this.$Player$p_4.getBool("enable_revoke_object_url_on_destroy")&&URL.revokeObjectURL(this.$Player$p_3.src);this.$Player$p_3.setAttribute("src","");this.$Player$p_3.removeAttribute("src");this.$Player$p_3.removeAttribute("srcObject");d=(h||(h=b("Promise"))).resolve();"function"===typeof this.$Player$p_3.setMediaKeys&&(d=this.$Player$p_3.setMediaKeys(null));this.$Player$p_21&&this.$Player$p_21.destroy();this.$Player$p_32&&this.$Player$p_32.destroy();this.$Player$p_22.destroy();(e=this.$Player$p_23)==null?void 0:e.destroy();this.$Player$p_50&&this.$Player$p_50.destroy();this.$Player$p_67&&this.$Player$p_67.destroy();a.log();this.emit("destroyed");return d["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"Player.destroy","warn")}).then(function(){f.$Player$p_3.load()})};f.$Player$p_121=function(a){var b=this,d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_122=function(a){var b=this,e,f=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});f||(f=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));!f&&!((e=this.$Player$p_9)==null?void 0:e.isStaticMpd())&&a.length>1&&(f=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,this.$Player$p_4,this.$Player$p_16));return f||null};f.$Player$p_123=function(a){return null};f.$Player$p_85=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks"),useManagedMediaSource:this.$Player$p_78});a=b.parse(a);this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError));b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),a.getVideoRepresentations());if(b.length>1){var e=d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b[0].getMimeCodecs());this.$Player$p_76=!b.reduce(function(a,b){return a&&d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b.getMimeCodecs())===e},!0)}return a};f.$Player$p_79=function(){var a=[];this.$Player$p_17&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player$p_124=function(a,b){b=this.$Player$p_5.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player$p_124(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player$p_124(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player$p_125("video")};f.getCurrentAudioRepresentation=function(){return this.$Player$p_125("audio")};f.getCurrentPlayingAudioTrackID=function(){var a=this.getCurrentAudioRepresentation();return a==null?void 0:a.getID()};f.$Player$p_125=function(a){var b=this.$Player$p_124(this.$Player$p_14.getCurrentTime(),a),c=this.$Player$p_9;if(!c)return null;c=[];a==="audio"?c=this.$Player$p_112():a==="video"&&(c=this.$Player$p_102());return(a=c.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player$p_5.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player$p_5.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player$p_5.get("video"),c=this.$Player$p_5.get("audio"),d=this.$Player$p_5.get("caption"),e,f,g,h,j,k,l;if(b){var m;e=(m=b.getDebug())==null?void 0:m.MediaStreamAbrManager;f=(m=b.getDebug())==null?void 0:m.SourceBufferManager;if(f){g=(m=f.getDebug())==null?void 0:m.SourceBuffer}}if(c){h=(m=c.getDebug())==null?void 0:m.SourceBufferManager;if(h){j=(m=h.getDebug())==null?void 0:m.SourceBuffer}}if(d){k=(m=d.getDebug())==null?void 0:m.SourceBufferManager;if(k){l=(m=k.getDebug())==null?void 0:m.SourceBuffer}}return{getManifest:function(){return i(a.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:b,VideoAbrManager:e,VideoBufferManager:f,VideoSourceBuffer:g,AudioSourceStream:c,AudioBufferManager:h,AudioSourceBuffer:j,CaptionSourceStream:d,CaptionBufferManager:k,CaptionSourceBuffer:l}};f.injectExternalDebugEvent=function(a,b){this.$Player$p_108(a,b)};f.$Player$p_108=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player$p_82=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return a.$Player$p_51?a.$Player$p_3.duration:Infinity});b.attachPerfLoggerProvider(this.$Player$p_16);this.$Player$p_10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(b){a.emit("leaveBuffering",b)}));return b};f.$Player$p_103=function(){var a=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player$p_18};f.$Player$p_98=function(a){var b=this;this.$Player$p_18=a;var c=this.$Player$p_9;if(!c){this.$Player$p_60=!0;return}else{c.updateLocation(a);this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);a=function(){b.$Player$p_43&&(b.$Player$p_10.releaseOne(b.$Player$p_43),b.$Player$p_43=null),b.$Player$p_5.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getDisplayLabel();e=(d==="video"?b.$Player$p_102():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player$p_6.get(d);d&&d.updateRepresentations(b.$Player$p_102())}d=e[0];e.forEach(function(a){var b=a.getDisplayLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player$p_43=c.addListener("updated",a);this.$Player$p_10.addSubscriptions(this.$Player$p_43)}};f.getPerfLoggerProvider=function(){return this.$Player$p_16};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player$p_9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player$p_9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player$p_126(a,b);a=this.$Player$p_127(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player$p_126=function(a,b){if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player$p_58===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=c("oz-player/shims/OzPerformance").now(),this.$Player$p_58=a);a=a/1e3+b-this.$Player$p_14.getCurrentTime();return a};f.$Player$p_127=function(a,b){var d;if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player$p_14.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player$p_14.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player$p_80=function(){this.$Player$p_5.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);
__d("useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29657303523885443"}),null);
__d("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql",["useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"expiredURL"},c={defaultValue:null,kind:"LocalArgument",name:"videoID"},d=[{kind:"Variable",name:"id",variableName:"videoID"}],e={alias:null,args:[{kind:"Variable",name:"expired_url",variableName:"expiredURL"}],concreteType:"RMDRefreshedUrl",kind:"LinkedField",name:"rmd_refreshed_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"new_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:d,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:d,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation"),metadata:{},name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometRelayExpiredVideoUrlRefreshHandler",["CometRelay","handleCometRelayExpiredVideoUrlRefresh","react","react-compiler-runtime","useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a){var e=d("react-compiler-runtime").c(3),f=d("CometRelay").useRelayEnvironment(),g;e[0]!==f||e[1]!==a?(g=function(e){var g=h!==void 0?h:h=b("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql");return d("CometRelay").fetchQuery(f,g,{expiredURL:btoa(e),videoID:a}).toPromise().then(function(b){var d;if(c("handleCometRelayExpiredVideoUrlRefresh"))return c("handleCometRelayExpiredVideoUrlRefresh")(a,b);d=(d=b==null?void 0:(d=b.video)==null?void 0:(d=d.rmd_refreshed_url)==null?void 0:d.new_url)!=null?d:null;b=(b=b==null?void 0:(b=b.video)==null?void 0:(b=b.rmd_refreshed_url)==null?void 0:b.reason)!=null?b:null;return{reason:b,refreshedUrl:d}})},e[0]=f,e[1]=a,e[2]=g):g=e[2];return g}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSDecryptAndValidateMinosMessageProtobuf",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return c[0]=b.i64.random(),c[1]=a[0].get("otid"),b.resolve(d)}a.__sproc_name__="LSEncryptedBackupsDecryptAndValidateMinosMessageProtobufStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptProtobuf",["LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptProtobuf] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[1]==null?c.i64.cast([0,0]):a[1],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(e){return c.blobs.neq(d[26],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[22],c.blobs.of_string(["message_thread","_",a[2]].join("")),d[26]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[27]=d[29]}]):c.resolve(d[27]=void 0)},function(a){return c.blobs.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[29]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] ","",d[29]].join("")),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure",[d[29]].join(""),d[30],c.i64.cast([0,3]))},function(a){return d[28]=void 0}])},function(a){return d[23]=d[28]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] Decryption message key is null"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return c.blobs.neq(d[23],void 0)?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1],a),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1],a}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1],e))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptProtobuf] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptProtobuf",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptProtobufStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptSupplementalKey",["LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptSupplementalKey] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(a){return c.blobs.neq(d[2],void 0)?c.sequence([function(a){return d[13]=d[3].get("epoch_root_key"),d[14]=c.createArray(),d[21]=(d[14].push(c.i64.cast([0,32])),d[14]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[13],d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]!==void 0?c.sequence([function(a){return d[21]=c.i64.of_int32(d[15].length),c.i64.ge(d[21],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[24]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[24]].join("")),d[23]=c.createArray(),void 0!==void 0?d[25]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[24],d[23],c.i64.cast([0,3]))},function(a){return d[22]=void 0}])},function(a){return d[16]=d[22]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[22]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[22]].join("")),d[21]=c.createArray(),void 0!==void 0?d[23]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[22],d[21],c.i64.cast([0,3]))},function(a){return d[16]=void 0}])},function(a){return c.blobs.neq(d[16],void 0)?d[17]=!0:d[17]=!1,d[17]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[16],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[2]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.blobs.neq(d[18],void 0)?(a=[c.blobs.to_string(d[18]),void 0],d[19]=a[0],d[20]=a[1],a):(d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,109])),d[21].set("stored_procedure","LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure"),d[21].set("error_message",""),a=[void 0,d[21]],d[19]=a[0],d[20]=a[1],a),a=[d[19],d[20]],d[5]=a[0],d[6]=a[1],a}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,109])),d[13].set("stored_procedure","LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure"),d[13].set("error_message",""),a=[void 0,d[13]],d[5]=a[0],d[6]=a[1],a))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptSupplementalKey] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptSupplementalKey",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptMessageProtobufs",["LSArrayGetObjectAt","LSDecryptAndValidateMinosMessageProtobuf","LSDecryptProtobuf","LSDecryptSupplementalKey","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessageProtobufs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1],e)})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[47]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[48]?d[57]=(d[47].push(c.i64.cast([0,0])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]?d[57]=(d[47].push(c.i64.cast([0,2])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]?d[57]=(d[47].push(c.i64.cast([0,3])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]?d[57]=(d[47].push(c.i64.cast([0,4])),d[47]):0,d[52]=c.createArray(),d[53]=c.i64.of_int32(d[47].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[57]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[47],d[57]).then(function(a){return a=a,d[58]=a[0],d[59]=a[1],a})},function(a){return d[60]=(d[52].push(d[58]),d[52])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[57]=c.createArray(),d[58]=c.i64.of_int32(d[52].length),c.i64.gt(d[58],c.i64.cast([0,0]))?c.loopAsync(d[58],function(a){return d[60]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],d[60]).then(function(a){return a=a,d[61]=a[0],d[62]=a[1],a})},function(a){return d[63]=(d[57].push(c.i64.to_string(d[61])),d[57])}])}):c.resolve()},function(a){return d[59]=d[57].join(","),d[54]=d[59]}])},function(a){return d[52].some(function(a){return c.i64.eq(d[29],a)})?d[55]=d[29]:d[55]=void 0,c.i64.neq(d[55],void 0)?d[56]=d[55]:d[56]=void 0,d[37]=d[56]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.createArray(),d[41]=c.createArray(),d[42]=new c.Map(),d[43]=c.i64.of_int32(a[0].length),c.i64.gt(d[43],c.i64.cast([0,0]))?c.loopAsync(d[43],function(e){return d[47]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=d[48].get("encrypted_protobufs"),d[51]=d[50].get("toplevel_protobuf"),d[52]=d[51].get("epoch_id"),d[53]=d[51].get("epoch_anon_id"),d[54]=d[42].get(c.blobs.to_string(d[53])),d[54]!==void 0?c.resolve(d[55]=d[54]):c.sequence([function(a){return c.i64.neq(d[52],void 0)?c.sequence([function(a){return d[62]=c.createArray(),c.count(c.db.table(169).fetch([[[d[52]]]])).then(function(a){return d[63]=a})},function(a){return c.i64.le(d[63],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[52]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[73]=new c.Map(),d[73].set("error_msg","Expected a nonempty query result"),d[73].set("code",c.i64.cast([0,3])),d[73].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[74]=c.createArray(),d[75]=(d[74].push(d[73]),d[74]),e=[void 0,d[74]],d[69]=e[0],d[70]=e[1],e):(b=a.item,d[73]=new c.Map(),d[73].set("epoch_id",b.epochId),d[73].set("backup_id",b.backupId),d[73].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[73].set("epoch_root_key_blob",b.epochRootKeyBlob),d[73].set("epoch_status",b.epochStatus),d[73].set("epoch_head",b.epochHead),d[73].set("authority_level",b.authorityLevel),e=[d[73],void 0],d[69]=e[0],d[70]=e[1],e)})},function(a){return d[72]=new c.Map(),d[72].set("value",d[69]),d[72].set("errors",d[70]),d[64]=d[72]}]):c.resolve((d[69]=new c.Map(),d[69].set("error_msg","Expected at most one result"),d[69].set("code",c.i64.cast([0,4])),d[69].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),d[71]=new c.Map(),d[71].set("value",void 0),d[71].set("errors",d[70]),d[64]=d[71]))},function(a){return d[65]=d[64].get("value"),d[65]!==void 0?(d[69]=d[65].get("epoch_id"),d[70]=d[65].get("backup_id"),d[71]=d[65].get("epoch_anon_id_blob"),d[72]=d[65].get("epoch_root_key_blob"),d[73]=d[65].get("epoch_status"),d[74]=d[65].get("epoch_head"),d[75]=d[65].get("authority_level"),c.i64.eq(d[75],c.i64.cast([0,80]))?d[76]=d[64]:(d[77]=new c.Map(),d[77].set("error_msg","NONE"),d[77].set("code",c.i64.cast([0,0])),d[77].set("src_line","MEBEpochClientUtils.php:315 Closure$MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly#2()"),d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),d[79]=new c.Map(),d[79].set("value",void 0),d[79].set("errors",d[78]),d[76]=d[79]),d[66]=d[76]):(d[69]=d[64].get("errors"),d[70]=d[64].get("errors"),d[71]=new c.Map(),d[71].set("value",void 0),d[71].set("errors",d[69]),d[66]=d[71]),d[67]=d[66].get("value"),d[67]!==void 0?(d[69]=d[67].get("epoch_id"),d[70]=d[67].get("backup_id"),d[71]=d[67].get("epoch_anon_id_blob"),d[72]=d[67].get("epoch_root_key_blob"),d[73]=d[67].get("epoch_status"),d[74]=d[67].get("epoch_head"),d[75]=d[67].get("authority_level"),c.i64.eq(d[70],d[15])&&c.i64.eq(d[75],c.i64.cast([0,80]))?(d[76]=new c.Map(),d[76].set("epoch_root_key",d[72]),d[76].set("epoch_anon_id",d[71]),d[77]=(d[62].push(d[76]),d[62])):0,d[68]=!0):(d[69]=d[66].get("errors"),d[70]=d[66].get("errors"),d[68]=!1),d[61]=d[62]}]):c.sequence([function(a){return d[62]=c.createArray(),c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[53])}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[69]=new c.Map(),d[69].set("error_msg","Expected a nonempty query result"),d[69].set("code",c.i64.cast([0,3])),d[69].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),d[70]=c.createArray(),d[71]=(d[70].push(d[69]),d[70]),e=[void 0,d[70]],d[63]=e[0],d[64]=e[1],e):(b=a.item,d[69]=new c.Map(),d[69].set("epoch_id",b.epochId),d[69].set("backup_id",b.backupId),d[69].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[69].set("epoch_root_key_blob",b.epochRootKeyBlob),d[69].set("epoch_status",b.epochStatus),d[69].set("epoch_head",b.epochHead),d[69].set("authority_level",b.authorityLevel),e=[d[69],void 0],d[63]=e[0],d[64]=e[1],e)})},function(a){return d[66]=new c.Map(),d[66].set("value",d[63]),d[66].set("errors",d[64]),d[67]=d[66].get("value"),d[67]!==void 0?(d[69]=d[67].get("epoch_id"),d[70]=d[67].get("backup_id"),d[71]=d[67].get("epoch_anon_id_blob"),d[72]=d[67].get("epoch_root_key_blob"),d[73]=d[67].get("epoch_status"),d[74]=d[67].get("epoch_head"),d[75]=d[67].get("authority_level"),c.i64.eq(d[70],d[15])&&c.i64.eq(d[75],c.i64.cast([0,80]))?(d[76]=new c.Map(),d[76].set("epoch_root_key",d[72]),d[76].set("epoch_anon_id",d[71]),d[77]=(d[62].push(d[76]),d[62])):0,d[68]=!0):(d[69]=d[66].get("errors"),d[70]=d[66].get("errors"),d[68]=!1),d[61]=d[62]}])},function(a){return d[55]=d[61]}])},function(e){return d[56]=d[51].get("epoch_anon_id"),d[42].set(c.blobs.to_string(d[56]),d[55]),d[57]=d[51].get("encrypted_protobuf"),d[58]=d[51].get("encryption_version"),c.storedProcedure(b("LSDecryptProtobuf"),d[57],d[58],a[1],d[55]).then(function(a){return a=a,d[59]=a[0],d[60]=a[1],a})},function(e){return c.blobs.neq(d[59],void 0)?c.sequence([function(e){return d[61]=d[48].get("encrypted_protobufs"),d[62]=d[61].get("supplemental_protobufs"),d[63]=new c.Map(),d[64]=d[62].keys(),d[65]=c.i64.of_int32(d[64].length),c.i64.gt(d[65],c.i64.cast([0,0]))?c.loopAsync(d[65],function(e){return d[71]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[64],d[71]).then(function(a){return a=a,d[72]=a[0],d[73]=a[1],a})},function(e){return d[74]=d[62].get(d[72]),d[74]!==void 0?c.sequence([function(a){return d[75]=d[74].get("epoch_id"),d[76]=d[74].get("epoch_anon_id"),d[77]=d[42].get(c.blobs.to_string(d[76])),d[77]!==void 0?c.resolve(d[78]=d[77]):c.sequence([function(a){return c.i64.neq(d[75],void 0)?c.sequence([function(a){return d[84]=c.createArray(),c.count(c.db.table(169).fetch([[[d[75]]]])).then(function(a){return d[85]=a})},function(a){return c.i64.le(d[85],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[75]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[95]=new c.Map(),d[95].set("error_msg","Expected a nonempty query result"),d[95].set("code",c.i64.cast([0,3])),d[95].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[96]=c.createArray(),d[97]=(d[96].push(d[95]),d[96]),e=[void 0,d[96]],d[91]=e[0],d[92]=e[1],e):(b=a.item,d[95]=new c.Map(),d[95].set("epoch_id",b.epochId),d[95].set("backup_id",b.backupId),d[95].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[95].set("epoch_root_key_blob",b.epochRootKeyBlob),d[95].set("epoch_status",b.epochStatus),d[95].set("epoch_head",b.epochHead),d[95].set("authority_level",b.authorityLevel),e=[d[95],void 0],d[91]=e[0],d[92]=e[1],e)})},function(a){return d[94]=new c.Map(),d[94].set("value",d[91]),d[94].set("errors",d[92]),d[86]=d[94]}]):c.resolve((d[91]=new c.Map(),d[91].set("error_msg","Expected at most one result"),d[91].set("code",c.i64.cast([0,4])),d[91].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),d[93]=new c.Map(),d[93].set("value",void 0),d[93].set("errors",d[92]),d[86]=d[93]))},function(a){return d[87]=d[86].get("value"),d[87]!==void 0?(d[91]=d[87].get("epoch_id"),d[92]=d[87].get("backup_id"),d[93]=d[87].get("epoch_anon_id_blob"),d[94]=d[87].get("epoch_root_key_blob"),d[95]=d[87].get("epoch_status"),d[96]=d[87].get("epoch_head"),d[97]=d[87].get("authority_level"),c.i64.eq(d[97],c.i64.cast([0,80]))?d[98]=d[86]:(d[99]=new c.Map(),d[99].set("error_msg","NONE"),d[99].set("code",c.i64.cast([0,0])),d[99].set("src_line","MEBEpochClientUtils.php:315 Closure$MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly#2()"),d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[100]),d[98]=d[101]),d[88]=d[98]):(d[91]=d[86].get("errors"),d[92]=d[86].get("errors"),d[93]=new c.Map(),d[93].set("value",void 0),d[93].set("errors",d[91]),d[88]=d[93]),d[89]=d[88].get("value"),d[89]!==void 0?(d[91]=d[89].get("epoch_id"),d[92]=d[89].get("backup_id"),d[93]=d[89].get("epoch_anon_id_blob"),d[94]=d[89].get("epoch_root_key_blob"),d[95]=d[89].get("epoch_status"),d[96]=d[89].get("epoch_head"),d[97]=d[89].get("authority_level"),c.i64.eq(d[92],d[15])&&c.i64.eq(d[97],c.i64.cast([0,80]))?(d[98]=new c.Map(),d[98].set("epoch_root_key",d[94]),d[98].set("epoch_anon_id",d[93]),d[99]=(d[84].push(d[98]),d[84])):0,d[90]=!0):(d[91]=d[88].get("errors"),d[92]=d[88].get("errors"),d[90]=!1),d[83]=d[84]}]):c.sequence([function(a){return d[84]=c.createArray(),c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[76])}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[91]=new c.Map(),d[91].set("error_msg","Expected a nonempty query result"),d[91].set("code",c.i64.cast([0,3])),d[91].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),d[92]=c.createArray(),d[93]=(d[92].push(d[91]),d[92]),e=[void 0,d[92]],d[85]=e[0],d[86]=e[1],e):(b=a.item,d[91]=new c.Map(),d[91].set("epoch_id",b.epochId),d[91].set("backup_id",b.backupId),d[91].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[91].set("epoch_root_key_blob",b.epochRootKeyBlob),d[91].set("epoch_status",b.epochStatus),d[91].set("epoch_head",b.epochHead),d[91].set("authority_level",b.authorityLevel),e=[d[91],void 0],d[85]=e[0],d[86]=e[1],e)})},function(a){return d[88]=new c.Map(),d[88].set("value",d[85]),d[88].set("errors",d[86]),d[89]=d[88].get("value"),d[89]!==void 0?(d[91]=d[89].get("epoch_id"),d[92]=d[89].get("backup_id"),d[93]=d[89].get("epoch_anon_id_blob"),d[94]=d[89].get("epoch_root_key_blob"),d[95]=d[89].get("epoch_status"),d[96]=d[89].get("epoch_head"),d[97]=d[89].get("authority_level"),c.i64.eq(d[92],d[15])&&c.i64.eq(d[97],c.i64.cast([0,80]))?(d[98]=new c.Map(),d[98].set("epoch_root_key",d[94]),d[98].set("epoch_anon_id",d[93]),d[99]=(d[84].push(d[98]),d[84])):0,d[90]=!0):(d[91]=d[88].get("errors"),d[92]=d[88].get("errors"),d[90]=!1),d[83]=d[84]}])},function(a){return d[78]=d[83]}])},function(a){return d[79]=d[74].get("epoch_anon_id"),d[42].set(c.blobs.to_string(d[79]),d[78]),d[80]=d[74].get("sk_ciphertext"),c.storedProcedure(b("LSDecryptSupplementalKey"),d[80]==null?"":d[80],d[78]).then(function(a){return a=a,d[81]=a[0],d[82]=a[1],a})},function(e){return d[81]!==void 0?c.sequence([function(e){return d[83]=d[74].get("encrypted_protobuf"),d[84]=d[74].get("encryption_version"),c.storedProcedure(b("LSDecryptProtobuf"),d[83],d[84],a[1],d[78]).then(function(a){return a=a,d[85]=a[0],d[86]=a[1],a})},function(a){return c.blobs.neq(d[85],void 0)?(d[87]=d[74].get("protobuf_timestamp_ms"),d[88]=new c.Map(),d[88].set("decrypted_protobuf",d[85]),d[88].set("protobuf_timestamp_ms",d[87]),d[63].set(d[81],d[88])):d[87]=(d[41].push(d[86]),d[41])}]):c.resolve((d[83]=new c.Map(),d[83].set("error_code",c.i64.cast([0,109])),d[83].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[83].set("error_message",""),d[84]=(d[41].push(d[83]),d[41])))}]):(d[75]=d[48].get("otid"),d[76]=["Supplemental key is null for supplemental protobuf with otid: ",d[75]," act_thread_id: ",a[1]].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][decryptMessageProtobufs] ","",d[76]].join("")),d[77]=c.createArray(),void 0!==void 0?d[78]=(d[77].push(void 0),d[77]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageProtobufs",[d[76]].join(""),d[77],c.i64.cast([0,3])))}])}):c.resolve()},function(a){return d[66]=d[48].get("otid"),d[67]=d[51].get("protobuf_timestamp_ms"),d[68]=new c.Map(),d[68].set("decrypted_protobuf",d[59]),d[68].set("protobuf_timestamp_ms",d[67]),d[69]=d[48].get("message_tags"),d[70]=new c.Map(),d[70].set("otid",d[66]),d[70].set("toplevel_protobuf",d[68]),d[70].set("supplemental_protobufs",d[63]),d[70].set("message_tags",d[69]),d[71]=(d[40].push(d[70]),d[40]),c.resolve()}]):c.resolve(d[61]=(d[41].push(d[60]),d[41]))}])}):c.resolve()},function(a){return d[44]=c.i64.of_int32(d[41].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],c.i64.cast([0,0])).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return a=[void 0,d[47]],d[45]=a[0],d[46]=a[1],a}]):c.resolve((a=[d[40],void 0],d[45]=a[0],d[46]=a[1],a))},function(a){return a=[d[45],d[46]],d[34]=a[0],d[35]=a[1],a}]):c.resolve((d[36]=new c.Map(),d[36].set("error_code",c.i64.cast([0,24])),d[36].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[36].set("error_message",""),e=[void 0,d[36]],d[34]=e[0],d[35]=e[1],e))},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.resolve((d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,1])),d[17].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[17].set("error_message",""),e=[void 0,d[17]],d[7]=e[0],d[8]=e[1],e))},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessageProtobufs] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageProtobufs",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDecryptMessageV2",["LSArrayGetObjectAt","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessageV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[2]==null?c.i64.cast([0,0]):a[2],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[1]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),d[22],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]!==void 0?c.resolve(d[27]=d[26]):c.sequence([function(a){return d[28]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] ","",d[28]].join("")),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure",[d[28]].join(""),d[29],c.i64.cast([0,3]))},function(a){return d[27]=void 0}])},function(a){return d[23]=d[27]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] Decryption message key is null"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return d[23]!==void 0?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1],a),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1],a}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1],e))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessageV2] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageV2",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessageV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptMessages",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDecryptMessageV2","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessages] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1],e)})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[47]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[48]?d[57]=(d[47].push(c.i64.cast([0,0])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]?d[57]=(d[47].push(c.i64.cast([0,2])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]?d[57]=(d[47].push(c.i64.cast([0,3])),d[47]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]?d[57]=(d[47].push(c.i64.cast([0,4])),d[47]):0,d[52]=c.createArray(),d[53]=c.i64.of_int32(d[47].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[57]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[47],d[57]).then(function(a){return a=a,d[58]=a[0],d[59]=a[1],a})},function(a){return d[60]=(d[52].push(d[58]),d[52])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[57]=c.createArray(),d[58]=c.i64.of_int32(d[52].length),c.i64.gt(d[58],c.i64.cast([0,0]))?c.loopAsync(d[58],function(a){return d[60]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],d[60]).then(function(a){return a=a,d[61]=a[0],d[62]=a[1],a})},function(a){return d[63]=(d[57].push(c.i64.to_string(d[61])),d[57])}])}):c.resolve()},function(a){return d[59]=d[57].join(","),d[54]=d[59]}])},function(a){return d[52].some(function(a){return c.i64.eq(d[29],a)})?d[55]=d[29]:d[55]=void 0,c.i64.neq(d[55],void 0)?d[56]=d[55]:d[56]=void 0,d[37]=d[56]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.createArray(),d[41]=c.createArray(),d[42]=new c.Map(),d[43]=c.i64.of_int32(a[0].length),c.i64.gt(d[43],c.i64.cast([0,0]))?c.loopAsync(d[43],function(e){return d[47]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=d[48].get("epoch_anon_id"),d[51]=d[42].get(c.blobs.to_string(d[50])),d[51]!==void 0?c.resolve(d[52]=d[51]):c.sequence([function(a){return d[57]=d[48].get("epoch_anon_id"),d[58]=d[48].get("epoch_id"),c.i64.neq(d[58],void 0)?c.sequence([function(a){return d[61]=c.createArray(),c.count(c.db.table(169).fetch([[[d[58]]]])).then(function(a){return d[62]=a})},function(a){return c.i64.le(d[62],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[58]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[72]=new c.Map(),d[72].set("error_msg","Expected a nonempty query result"),d[72].set("code",c.i64.cast([0,3])),d[72].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[73]=c.createArray(),d[74]=(d[73].push(d[72]),d[73]),e=[void 0,d[73]],d[68]=e[0],d[69]=e[1],e):(b=a.item,d[72]=new c.Map(),d[72].set("epoch_id",b.epochId),d[72].set("backup_id",b.backupId),d[72].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[72].set("epoch_root_key_blob",b.epochRootKeyBlob),d[72].set("epoch_status",b.epochStatus),d[72].set("epoch_head",b.epochHead),d[72].set("authority_level",b.authorityLevel),e=[d[72],void 0],d[68]=e[0],d[69]=e[1],e)})},function(a){return d[71]=new c.Map(),d[71].set("value",d[68]),d[71].set("errors",d[69]),d[63]=d[71]}]):c.resolve((d[68]=new c.Map(),d[68].set("error_msg","Expected at most one result"),d[68].set("code",c.i64.cast([0,4])),d[68].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),d[70]=new c.Map(),d[70].set("value",void 0),d[70].set("errors",d[69]),d[63]=d[70]))},function(a){return d[64]=d[63].get("value"),d[64]!==void 0?(d[68]=d[64].get("epoch_id"),d[69]=d[64].get("backup_id"),d[70]=d[64].get("epoch_anon_id_blob"),d[71]=d[64].get("epoch_root_key_blob"),d[72]=d[64].get("epoch_status"),d[73]=d[64].get("epoch_head"),d[74]=d[64].get("authority_level"),c.i64.eq(d[74],c.i64.cast([0,80]))?d[75]=d[63]:(d[76]=new c.Map(),d[76].set("error_msg","NONE"),d[76].set("code",c.i64.cast([0,0])),d[76].set("src_line","MEBEpochClientUtils.php:315 Closure$MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly#2()"),d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),d[78]=new c.Map(),d[78].set("value",void 0),d[78].set("errors",d[77]),d[75]=d[78]),d[65]=d[75]):(d[68]=d[63].get("errors"),d[69]=d[63].get("errors"),d[70]=new c.Map(),d[70].set("value",void 0),d[70].set("errors",d[68]),d[65]=d[70]),d[66]=d[65].get("value"),d[66]!==void 0?(d[68]=d[66].get("epoch_id"),d[69]=d[66].get("backup_id"),d[70]=d[66].get("epoch_anon_id_blob"),d[71]=d[66].get("epoch_root_key_blob"),d[72]=d[66].get("epoch_status"),d[73]=d[66].get("epoch_head"),d[74]=d[66].get("authority_level"),c.i64.eq(d[69],d[15])&&c.i64.eq(d[74],c.i64.cast([0,80]))?(d[75]=new c.Map(),d[75].set("epoch_root_key",d[71]),d[75].set("epoch_anon_id",d[70]),d[76]=(d[61].push(d[75]),d[61])):0,d[67]=!0):(d[68]=d[65].get("errors"),d[69]=d[65].get("errors"),d[67]=!1),d[59]=d[61]}]):c.sequence([function(a){return d[61]=c.createArray(),c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[57])}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[68]=new c.Map(),d[68].set("error_msg","Expected a nonempty query result"),d[68].set("code",c.i64.cast([0,3])),d[68].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),d[69]=c.createArray(),d[70]=(d[69].push(d[68]),d[69]),e=[void 0,d[69]],d[62]=e[0],d[63]=e[1],e):(b=a.item,d[68]=new c.Map(),d[68].set("epoch_id",b.epochId),d[68].set("backup_id",b.backupId),d[68].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[68].set("epoch_root_key_blob",b.epochRootKeyBlob),d[68].set("epoch_status",b.epochStatus),d[68].set("epoch_head",b.epochHead),d[68].set("authority_level",b.authorityLevel),e=[d[68],void 0],d[62]=e[0],d[63]=e[1],e)})},function(a){return d[65]=new c.Map(),d[65].set("value",d[62]),d[65].set("errors",d[63]),d[66]=d[65].get("value"),d[66]!==void 0?(d[68]=d[66].get("epoch_id"),d[69]=d[66].get("backup_id"),d[70]=d[66].get("epoch_anon_id_blob"),d[71]=d[66].get("epoch_root_key_blob"),d[72]=d[66].get("epoch_status"),d[73]=d[66].get("epoch_head"),d[74]=d[66].get("authority_level"),c.i64.eq(d[69],d[15])&&c.i64.eq(d[74],c.i64.cast([0,80]))?(d[75]=new c.Map(),d[75].set("epoch_root_key",d[71]),d[75].set("epoch_anon_id",d[70]),d[76]=(d[61].push(d[75]),d[61])):0,d[67]=!0):(d[68]=d[65].get("errors"),d[69]=d[65].get("errors"),d[67]=!1),d[59]=d[61]}])},function(a){return d[60]=c.i64.of_int32(d[59].length),c.i64.gt(d[60],c.i64.cast([0,0]))?(d[61]=d[48].get("epoch_anon_id"),d[42].set(c.blobs.to_string(d[61]),d[59])):0,d[52]=d[59]}])},function(e){return d[53]=d[48].get("value"),d[54]=d[48].get("encryption_version"),c.storedProcedure(b("LSDecryptMessageV2"),d[53],a[1],d[54],d[52]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[55]!==void 0?c.resolve((d[57]=d[48].get("otid"),d[58]=d[48].get("message_tags"),d[59]=new c.Map(),d[59].set("value",d[55]),d[59].set("otid",d[57]),d[59].set("message_tags",d[58]),d[60]=(d[40].push(d[59]),d[40]))):c.sequence([function(a){return d[56]!==void 0?c.sequence([function(a){return d[57]=c.i64.of_int32(d[52].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],c.i64.cast([0,0])).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[69]=d[67].get("epoch_root_key"),d[70]=c.createArray(),d[75]=(d[70].push(c.i64.cast([0,18])),d[70]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[69],d[70]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[71]!==void 0?c.sequence([function(a){return d[75]=c.i64.of_int32(d[71].length),c.i64.ge(d[75],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[71],c.i64.cast([0,0])).then(function(a){return a=a,d[77]=a[0],d[78]=a[1],a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[78]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[78]].join("")),d[77]=c.createArray(),void 0!==void 0?d[79]=(d[77].push(void 0),d[77]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[78],d[77],c.i64.cast([0,3]))},function(a){return d[76]=void 0}])},function(a){return d[72]=d[76]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[76]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[76]].join("")),d[75]=c.createArray(),void 0!==void 0?d[77]=(d[75].push(void 0),d[75]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[76],d[75],c.i64.cast([0,3]))},function(a){return d[72]=void 0}])},function(a){return c.blobs.neq(d[72],void 0)?d[73]=!0:d[73]=!1,d[73]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.neq(d[72],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[72]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[74]=d[75]==null?"[encodingFailed]":d[75]}]):c.resolve(d[74]="[null]")},function(a){return d[58]=d[74]}]):c.resolve(d[58]="[noEpochs]")},function(a){return d[59]=d[48].get("otid"),d[60]=d[48].get("epoch_anon_id"),d[61]=d[48].get("encryption_version"),c.i64.neq(d[61],void 0)?d[62]=c.i64.to_string(d[61]):d[62]="null",d[63]=c.i64.of_int32(d[52].length),d[64]=d[48].get("epoch_fingerprint"),c.blobs.neq(d[64],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[64]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[65]=d[67]==null?"[encodingFailed]":d[67]}]):c.resolve(d[65]="[null]")},function(a){return d[66]="",d[56].set("error_message",["Decryption failed for message with otid:",d[66],d[59],d[66]," epoch:",d[66],c.blobs.to_string(d[60]),d[66]," version:",d[66],d[62],d[66]," epoch_key_count:",d[66],c.i64.to_string(d[63]),d[66]," vsr_fingerprint:",d[66],d[65],d[66]," local_fingerprint:",d[66],d[58],d[66]," local_backup_id:",d[66],c.i64.to_string(d[15]),d[66]," local_device_id:",d[66],c.i64.to_string(d[27])].join(""))}]):c.resolve()},function(a){return d[57]=(d[41].push(d[56]),d[41])}])}])}):c.resolve()},function(a){return d[44]=c.i64.of_int32(d[41].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],c.i64.cast([0,0])).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return a=[void 0,d[47]],d[45]=a[0],d[46]=a[1],a}]):c.resolve((a=[d[40],void 0],d[45]=a[0],d[46]=a[1],a))},function(a){return a=[d[45],d[46]],d[34]=a[0],d[35]=a[1],a}]):c.resolve((d[36]=new c.Map(),d[36].set("error_code",c.i64.cast([0,24])),d[36].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[36].set("error_message",""),e=[void 0,d[36]],d[34]=e[0],d[35]=e[1],e))},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.resolve((d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,1])),d[17].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[17].set("error_message",""),e=[void 0,d[17]],d[7]=e[0],d[8]=e[1],e))},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessages] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessages",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessagesStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSGetNextEpochAnonId.nop",["CryptoLogger","LSCryptoUtils","LSResult","Promise","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=d("LSCryptoUtils").strToBuf("0");if(f!=null){e=f;if(e.byteLength===0)f=a;else{var g=new(d("XPlatReactTextDecoder").TextDecoder)();g=g.decode(e);e=Number.parseInt(g,10);g=e+1;f=d("LSCryptoUtils").strToBuf(String(g))}}else f=a;return(h||(h=b("Promise"))).resolve(c("LSResult")(f))["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("get_next_epoch_anonid"),a).mustfix("Getting next epoch anon id failed");throw a})};a.__nop_name__="LSGetNextEpochAnonId";g["default"]=a}),98);
__d("PublicKeyEncryptionUtils",["Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){}function c(a){if(a!=null)return a;else return new Uint8Array(0).buffer}function e(a,b,c,e,f){return d("UInt8Array").concatBytes([a,b,c,e,f]).buffer}function f(a,b,c,e){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveKey({hash:"SHA-256",info:c,name:"HKDF",salt:b},a,{length:256,name:"AES-GCM"},!1,[e])})}var i="key length is not "+32;function j(a,b){if(a.length!==32)return b(i)}function k(a){return new(h||(h=b("Promise")))(function(b,c){j(a,c);return b()})}var l=32;g.assertValidCurvePoint=a;g.getSalt=c;g.concatAad=e;g.getAesKey=f;g.testKeyLength=j;g.assertKeyLength=k;g.keyLength=l}),98);
__d("PublicEncryptionCreateDecryptedData",["CryptoLogger","Promise","PublicKeyEncryptionUtils","RetUtil","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("PublicKeyCrypto").__setRef("PublicEncryptionCreateDecryptedData"),j=c("requireDeferred")("X25519").__setRef("PublicEncryptionCreateDecryptedData");function k(a,b){var c=1+d("PublicKeyEncryptionUtils").keyLength+16;a=a.length;a<1+d("PublicKeyEncryptionUtils").keyLength+16&&b("CipherText length is "+a+", < "+c)}function l(a,b,c){b=b[0];if(b!==a)return c("Unexpected version "+b)}function m(a){return new(h||(h=b("Promise")))(function(b,c){l(1,a,c);k(a,c);return b()})}function n(a,c){return new(h||(h=b("Promise")))(function(b,e){d("PublicKeyEncryptionUtils").assertValidCurvePoint(a,e);d("PublicKeyEncryptionUtils").assertValidCurvePoint(c,e);return b()})}function a(a,c,e,f,g,k){var l=new Uint8Array(g),o=new Uint8Array([1]),p=d("PublicKeyEncryptionUtils").getSalt(f),q=new Uint8Array(a),r=new Uint8Array(e),s=new Uint8Array(c),t=new Uint8Array(k);return(h||(h=b("Promise"))).all([d("PublicKeyEncryptionUtils").assertKeyLength(q),d("PublicKeyEncryptionUtils").assertKeyLength(s),d("PublicKeyEncryptionUtils").assertKeyLength(r)]).then(function(){return m(t)}).then(function(){return j.load()}).then(function(a){var c=t.slice(1,d("PublicKeyEncryptionUtils").keyLength+1),e=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);return n(e,r).then(function(){var f=d("PublicKeyEncryptionUtils").concatAad(o,r,q,c,l),g=function(c,d,f){c=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);d=a.publicKeyFromBytes(d,a.KeyPurpose.Encryption);f=a.secretKeyFromBytes(f,a.KeyPurpose.Encryption);return c==null||d==null||f==null||e==null?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).resolve([c,d,f,e])};return g(q,r,s).then(function(a){if(a==null)return;return{ephemeralPub:a[3],innerAad:f,receiverPriv:a[2],receiverPub:a[0],senderPub:a[1]}})})}).then(function(a){if(a==null)return;var b=a.ephemeralPub,c=a.receiverPriv,e=a.senderPub,f=a.innerAad;return i.load().then(function(a){return a.receiverDeriveSharedSecret(c,b,e)}).then(function(a){if(a==null)return null;else return d("PublicKeyEncryptionUtils").getAesKey(a,p,f,"decrypt")}).then(function(a){if(a==null)return;var b=new Uint8Array(12).buffer,c=t.slice(d("PublicKeyEncryptionUtils").keyLength+1).buffer;return d("XPlatReactCrypto").subtleDecrypt({additionalData:f,iv:new Uint8Array(b),name:"AES-GCM",tagLength:128},a,c)})}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a))})["catch"](function(a){var c=d("CryptoLogger").CryptoLogger("public_encryption_create_decrypted_data");d("CryptoLogger").captureError(c,a).mustfix("Creation of decrypted data for public encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))})}g["default"]=a}),98);
__d("LSPublicEncryptionCreateDecryptedData.nop",["PublicEncryptionCreateDecryptedData"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e,f,g,h,i){return c("PublicEncryptionCreateDecryptedData")(d,e,f,g,h,i)};a.__nop_name__="LSPublicEncryptionCreateDecryptedData";g["default"]=a}),98);
__d("LSRecordEpochSyncStatus",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[7]?c.sequence([function(e){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsRecordEpochSyncStatusStoredProcedure] Issue record epoch sync task"),d[0]=c.createArray(),d[1]=c.i64.of_int32(a[6].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.loopAsync(d[1],function(e){return d[5]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(a){return d[8]=d[6].get("from"),d[9]=d[6].get("to"),d[10]=d[8].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]!==void 0?d[12]=d[11]:d[12]="",d[13]=d[8].get("epoch_id"),d[14]=new c.Map(),d[14].set("anon_id",d[12]),d[14].set("epoch_id",d[13]),d[15]=d[9].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]!==void 0?d[17]=d[16]:d[17]="",d[18]=d[9].get("epoch_id"),d[19]=new c.Map(),d[19].set("anon_id",d[17]),d[19].set("epoch_id",d[18]),d[20]=d[6].get("has_forward_edge"),d[21]=d[6].get("has_backward_edge"),d[22]=d[6].get("result_code"),d[23]=d[6].get("error_message"),d[24]=new c.Map(),d[24].set("from",d[14]),d[24].set("to",d[19]),d[24].set("has_forward_edge",d[20]),d[24].set("has_backward_edge",d[21]),d[24].set("result_code",d[22]),d[24].set("error_message",d[23]),d[25]=(d[0].push(d[24]),d[0])}])}):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("local_device_id",a[0]),d[2].set("decryption_device_id",a[1]),d[2].set("target_device_id",a[2]),d[2].set("epoch_sync_reason",a[3]),d[2].set("start_ms",a[4]),d[2].set("end_ms",a[5]),d[2].set("results",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_record_epoch_sync",c.i64.cast([0,50039]),d[3],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[4]=a[0],a})}]):c.sequence([function(e){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsRecordEpochSyncStatusStoredProcedure] Issue record epoch sync task"),d[0]=c.createArray(),d[1]=c.i64.of_int32(a[6].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.loopAsync(d[1],function(e){return d[5]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(a){return d[8]=d[6].get("from"),d[9]=d[6].get("to"),d[10]=d[8].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]!==void 0?d[12]=d[11]:d[12]="",d[13]=d[8].get("epoch_id"),d[14]=new c.Map(),d[14].set("anon_id",d[12]),d[14].set("epoch_id",d[13]),d[15]=d[9].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]!==void 0?d[17]=d[16]:d[17]="",d[18]=d[9].get("epoch_id"),d[19]=new c.Map(),d[19].set("anon_id",d[17]),d[19].set("epoch_id",d[18]),d[20]=d[6].get("has_forward_edge"),d[21]=d[6].get("has_backward_edge"),d[22]=d[6].get("result_code"),d[23]=d[6].get("error_message"),d[24]=new c.Map(),d[24].set("from",d[14]),d[24].set("to",d[19]),d[24].set("has_forward_edge",d[20]),d[24].set("has_backward_edge",d[21]),d[24].set("result_code",d[22]),d[24].set("error_message",d[23]),d[25]=(d[0].push(d[24]),d[0])}])}):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("local_device_id",a[0]),d[2].set("decryption_device_id",a[1]),d[2].set("target_device_id",a[2]),d[2].set("epoch_sync_reason",a[3]),d[2].set("start_ms",a[4]),d[2].set("end_ms",a[5]),d[2].set("results",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_record_epoch_sync",c.i64.cast([0,50039]),d[3],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[4]=a[0],a})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsRecordEpochSyncStatusStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSStoreEpoch",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[1]="Storing newly derived epoch ",c[2]=b.blobs.to_string(a[2]),c[3]=" authority_level:",c[4]=b.i64.to_string(a[5]),c[5]=" status:",c[6]=b.i64.to_string(a[4]),c[0]="",function(a){b.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] ",c[0],c[1],c[0],c[2],c[0],c[3],c[0],c[4],c[0],c[5],c[0],c[6]].join("")),b.resolve()},function(c){return a[6]?(function(a){b.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] Storing epoch in epochs table (regular execution)"),b.filter(b.db.table(169).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.epochId,a[0])&&b.i64.gt(c.authorityLevel,a[5])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(169).put({epochId:a[0],backupId:a[1],epochAnonIdBlob:a[2],epochRootKeyBlob:a[3],epochStatus:a[4],epochHead:a[7],authorityLevel:a[5]}):0})):(function(a){b.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] Storing epoch in epochs table (regular execution)"),b.filter(b.db.table(169).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.epochId,a[0])&&b.i64.gt(c.authorityLevel,a[5])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(169).put({epochId:a[0],backupId:a[1],epochAnonIdBlob:a[2],epochRootKeyBlob:a[3],epochStatus:a[4],epochHead:a[7],authorityLevel:a[5]}):0}))}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSEncryptedBackupsStoreEpochStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDeriveAndStoreEpochs",["LSArrayGetObjectAt","LSBase64Decode.nop","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSGetNextEpochAnonId.nop","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop","LSPublicEncryptionCreateDecryptedData.nop","LSRecordEpochSyncStatus","LSStoreEpoch","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Beginning execution."),d[1]=c.i64.of_int32(a[0].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.sequence([function(a){return d[8]=c.i64.random(),d[25]=c.i64.to_string(d[8]),d[9]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[26]=new c.Map(),d[26].set("error_msg","Expected a nonempty query result"),d[26].set("code",c.i64.cast([0,3])),d[26].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[27]=c.createArray(),d[28]=(d[27].push(d[26]),d[27]),e=[void 0,d[27]],d[10]=e[0],d[11]=e[1],e):(b=a.item,d[26]=new c.Map(),d[26].set("backup_id",b.backupId),d[26].set("device_public_key_blob",b.devicePublicKeyBlob),d[26].set("device_private_key_blob",b.devicePrivateKeyBlob),d[26].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[26].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[26].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[26].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[26].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[26].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[26].set("orf_client_state_v2_blob",void 0),d[26].set("orf_v2_authority_level",void 0),d[26].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[26].set("device_id",b.deviceId),d[26].set("backup_tenancy",b.backupTenancy),d[26].set("encryption_version",b.encryptionVersion),d[26].set("revision_version",b.revisionVersion),d[26].set("initialize_restore_result",void 0),d[26].set("device_creation_timestamp_sec",void 0),d[26].set("authority_level",b.authorityLevel),e=[d[26],void 0],d[10]=e[0],d[11]=e[1],e)})},function(e){return d[13]=new c.Map(),d[13].set("value",d[10]),d[13].set("errors",d[11]),d[14]=d[13].get("value"),d[14]!==void 0?c.sequence([function(e){return d[26]=d[14].get("backup_id"),d[27]=d[14].get("device_public_key_blob"),d[28]=d[14].get("device_private_key_blob"),d[29]=d[14].get("epoch_storage_public_key_blob"),d[30]=d[14].get("epoch_storage_private_key_blob"),d[31]=d[14].get("epoch_auth_public_key_blob"),d[32]=d[14].get("epoch_auth_private_key_blob"),d[33]=d[14].get("mailbox_root_key_blob"),d[34]=d[14].get("ocmf_client_state_blob"),d[35]=d[14].get("orf_client_state_v2_blob"),d[36]=d[14].get("orf_v2_authority_level"),d[37]=d[14].get("oblivious_validation_token_blob"),d[38]=d[14].get("device_id"),d[39]=d[14].get("backup_tenancy"),d[40]=d[14].get("encryption_version"),d[41]=d[14].get("revision_version"),d[42]=d[14].get("initialize_restore_result"),d[43]=d[14].get("device_creation_timestamp_sec"),d[44]=d[14].get("authority_level"),c.i64.neq(d[38],void 0)?c.sequence([function(a){return d[54]=void 0,c.i64.neq(d[54],void 0)?c.resolve(d[55]=d[54]):c.sequence([function(a){return d[68]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[69]?d[78]=(d[68].push(c.i64.cast([0,0])),d[68]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[70]?d[78]=(d[68].push(c.i64.cast([0,2])),d[68]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[71]?d[78]=(d[68].push(c.i64.cast([0,3])),d[68]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[72]?d[78]=(d[68].push(c.i64.cast([0,4])),d[68]):0,d[73]=c.createArray(),d[74]=c.i64.of_int32(d[68].length),c.i64.gt(d[74],c.i64.cast([0,0]))?c.loopAsync(d[74],function(a){return d[78]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[68],d[78]).then(function(a){return a=a,d[79]=a[0],d[80]=a[1],a})},function(a){return d[81]=(d[73].push(d[79]),d[73])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[78]=c.createArray(),d[79]=c.i64.of_int32(d[73].length),c.i64.gt(d[79],c.i64.cast([0,0]))?c.loopAsync(d[79],function(a){return d[81]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[81]).then(function(a){return a=a,d[82]=a[0],d[83]=a[1],a})},function(a){return d[84]=(d[78].push(c.i64.to_string(d[82])),d[78])}])}):c.resolve()},function(a){return d[80]=d[78].join(","),d[75]=d[80]}])},function(a){return d[73].some(function(a){return c.i64.eq(d[40],a)})?d[76]=d[40]:d[76]=void 0,c.i64.neq(d[76],void 0)?d[77]=d[76]:d[77]=void 0,d[55]=d[77]}])},function(e){return c.i64.neq(d[55],void 0)?d[56]=d[55]:d[56]=c.i64.cast([0,0]),c.i64.neq(d[39],void 0)?d[57]=d[39]:d[57]=c.i64.cast([0,1]),c.i64.neq(a[1],void 0)?c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[74]=new c.Map(),d[74].set("error_msg","Expected a nonempty query result"),d[74].set("code",c.i64.cast([0,3])),d[74].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[75]=c.createArray(),d[76]=(d[75].push(d[74]),d[75]),e=[void 0,d[75]],d[68]=e[0],d[69]=e[1],e):(b=a.item,d[74]=new c.Map(),d[74].set("backup_id",b.backupId),d[74].set("device_public_key_blob",b.devicePublicKeyBlob),d[74].set("device_private_key_blob",b.devicePrivateKeyBlob),d[74].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[74].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[74].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[74].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[74].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[74].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[74].set("orf_client_state_v2_blob",void 0),d[74].set("orf_v2_authority_level",void 0),d[74].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[74].set("device_id",b.deviceId),d[74].set("backup_tenancy",b.backupTenancy),d[74].set("encryption_version",b.encryptionVersion),d[74].set("revision_version",b.revisionVersion),d[74].set("initialize_restore_result",void 0),d[74].set("device_creation_timestamp_sec",void 0),d[74].set("authority_level",b.authorityLevel),e=[d[74],void 0],d[68]=e[0],d[69]=e[1],e)})},function(e){return d[71]=new c.Map(),d[71].set("value",d[68]),d[71].set("errors",d[69]),d[72]=d[71].get("value"),d[72]!==void 0?c.sequence([function(e){return d[74]=d[72].get("backup_id"),d[75]=d[72].get("device_public_key_blob"),d[76]=d[72].get("device_private_key_blob"),d[77]=d[72].get("epoch_storage_public_key_blob"),d[78]=d[72].get("epoch_storage_private_key_blob"),d[79]=d[72].get("epoch_auth_public_key_blob"),d[80]=d[72].get("epoch_auth_private_key_blob"),d[81]=d[72].get("mailbox_root_key_blob"),d[82]=d[72].get("ocmf_client_state_blob"),d[83]=d[72].get("orf_client_state_v2_blob"),d[84]=d[72].get("orf_v2_authority_level"),d[85]=d[72].get("oblivious_validation_token_blob"),d[86]=d[72].get("device_id"),d[87]=d[72].get("backup_tenancy"),d[88]=d[72].get("encryption_version"),d[89]=d[72].get("revision_version"),d[90]=d[72].get("initialize_restore_result"),d[91]=d[72].get("device_creation_timestamp_sec"),d[92]=d[72].get("authority_level"),c.i64.neq(d[86],void 0)?c.sequence([function(a){return d[94]=void 0,c.i64.neq(d[94],void 0)?c.resolve(d[95]=d[94]):c.sequence([function(a){return d[98]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[99]?d[108]=(d[98].push(c.i64.cast([0,0])),d[98]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[100]?d[108]=(d[98].push(c.i64.cast([0,2])),d[98]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[101]=a[0],a})},function(a){return d[101]?d[108]=(d[98].push(c.i64.cast([0,3])),d[98]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[102]=a[0],a})},function(a){return d[102]?d[108]=(d[98].push(c.i64.cast([0,4])),d[98]):0,d[103]=c.createArray(),d[104]=c.i64.of_int32(d[98].length),c.i64.gt(d[104],c.i64.cast([0,0]))?c.loopAsync(d[104],function(a){return d[108]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[98],d[108]).then(function(a){return a=a,d[109]=a[0],d[110]=a[1],a})},function(a){return d[111]=(d[103].push(d[109]),d[103])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[108]=c.createArray(),d[109]=c.i64.of_int32(d[103].length),c.i64.gt(d[109],c.i64.cast([0,0]))?c.loopAsync(d[109],function(a){return d[111]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[103],d[111]).then(function(a){return a=a,d[112]=a[0],d[113]=a[1],a})},function(a){return d[114]=(d[108].push(c.i64.to_string(d[112])),d[108])}])}):c.resolve()},function(a){return d[110]=d[108].join(","),d[105]=d[110]}])},function(a){return d[103].some(function(a){return c.i64.eq(d[88],a)})?d[106]=d[88]:d[106]=void 0,c.i64.neq(d[106],void 0)?d[107]=d[106]:d[107]=void 0,d[95]=d[107]}])},function(b){return c.i64.neq(d[95],void 0)?d[96]=d[95]:d[96]=c.i64.cast([0,0]),c.i64.neq(d[87],void 0)?d[97]=d[87]:d[97]=c.i64.cast([0,1]),d[93]=c.i64.neq(d[86],a[1])}]):c.resolve(d[93]=!1)},function(a){return d[73]=d[93]}]):c.resolve((d[74]=d[71].get("errors"),d[75]=d[71].get("errors"),d[73]=!1))},function(a){return d[58]=d[73]}]):c.resolve(d[58]=!1)},function(e){return d[58]?c.sequence([function(e){return d[68]=c.createArray(),d[69]=c.i64.of_int32(a[0].length),c.i64.gt(d[69],c.i64.cast([0,0]))?c.loopAsync(d[69],function(e){return d[70]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[70]).then(function(a){return a=a,d[71]=a[0],d[72]=a[1],a})},function(a){return d[73]=d[71].get("from_epoch"),d[74]=d[73].get("epoch_anon_id"),d[75]=d[71].get("from_epoch"),d[76]=d[75].get("epoch_id"),d[77]=new c.Map(),d[77].set("epoch_anon_id",d[74]),d[77].set("epoch_id",d[76]),d[78]=d[71].get("to_epoch"),d[79]=d[78].get("epoch_anon_id"),d[80]=d[71].get("to_epoch"),d[81]=d[80].get("epoch_id"),d[82]=new c.Map(),d[82].set("epoch_anon_id",d[79]),d[82].set("epoch_id",d[81]),d[83]=d[71].get("forward_edge"),d[83]?d[84]=!1:d[84]=!0,d[84]?d[85]=!1:d[85]=!0,d[86]=d[71].get("backward_edge"),c.blobs.neq(d[86],void 0)?d[87]=!0:d[87]=!1,d[88]=new c.Map(),d[88].set("from",d[77]),d[88].set("to",d[82]),d[88].set("has_forward_edge",d[85]),d[88].set("has_backward_edge",d[87]),d[88].set("result_code",c.i64.cast([0,8])),d[88].set("error_message",void 0),d[89]=(d[68].push(d[88]),d[68])}])}):c.resolve()},function(b){return b=[d[38],d[38],a[1],a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[68],!1,void 0],d[59]=b[0],d[60]=b[1],d[61]=b[2],d[62]=b[3],d[63]=b[4],d[64]=b[5],d[65]=b[6],d[66]=b[7],d[67]=b[8],b}]):c.sequence([function(e){return d[68]=c.createArray(),d[69]=c.i64.of_int32(a[0].length),c.i64.gt(d[69],c.i64.cast([0,0]))?c.loopAsync(d[69],function(e){return d[70]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[70]).then(function(a){return a=a,d[71]=a[0],d[72]=a[1],a})},function(a){return d[73]=d[71].get("from_epoch"),d[74]=d[73].get("epoch_id"),c.count(c.db.table(169).fetch([[[d[74]]]])).then(function(a){return d[75]=a})},function(a){return c.i64.le(d[75],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[74]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[103]=new c.Map(),d[103].set("error_msg","Expected a nonempty query result"),d[103].set("code",c.i64.cast([0,3])),d[103].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[104]=c.createArray(),d[105]=(d[104].push(d[103]),d[104]),e=[void 0,d[104]],d[99]=e[0],d[100]=e[1],e):(b=a.item,d[103]=new c.Map(),d[103].set("epoch_id",b.epochId),d[103].set("backup_id",b.backupId),d[103].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[103].set("epoch_root_key_blob",b.epochRootKeyBlob),d[103].set("epoch_status",b.epochStatus),d[103].set("epoch_head",b.epochHead),d[103].set("authority_level",b.authorityLevel),e=[d[103],void 0],d[99]=e[0],d[100]=e[1],e)})},function(a){return d[102]=new c.Map(),d[102].set("value",d[99]),d[102].set("errors",d[100]),d[76]=d[102]}]):c.resolve((d[99]=new c.Map(),d[99].set("error_msg","Expected at most one result"),d[99].set("code",c.i64.cast([0,4])),d[99].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[100]),d[76]=d[101]))},function(a){return d[77]=d[76].get("value"),d[77]!==void 0?(d[99]=d[77].get("epoch_id"),d[100]=d[77].get("backup_id"),d[101]=d[77].get("epoch_anon_id_blob"),d[102]=d[77].get("epoch_root_key_blob"),d[103]=d[77].get("epoch_status"),d[104]=d[77].get("epoch_head"),d[105]=d[77].get("authority_level"),d[106]=d[76],d[78]=d[106]):(d[99]=d[76].get("errors"),d[100]=d[76].get("errors"),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[99]),d[78]=d[101]),d[79]=d[78].get("value"),d[79]!==void 0?(d[99]=d[79].get("epoch_id"),d[100]=d[79].get("backup_id"),d[101]=d[79].get("epoch_anon_id_blob"),d[102]=d[79].get("epoch_root_key_blob"),d[103]=d[79].get("epoch_status"),d[104]=d[79].get("epoch_head"),d[105]=d[79].get("authority_level"),d[80]=d[78]):(d[99]=d[78].get("errors"),d[100]=d[78].get("errors"),d[101]=new c.Map(),d[101].set("error_msg","EB_EPOCH_SRC_EPOCH_MISSING"),d[101].set("code",c.i64.cast([0,10003])),d[101].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:343 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge()"),d[103]=(d[99].push(d[101]),d[99]),d[102]=new c.Map(),d[102].set("value",void 0),d[102].set("errors",d[99]),d[80]=d[102]),d[81]=d[80].get("value"),d[81]!==void 0?(d[99]=d[81].get("epoch_id"),d[100]=d[81].get("backup_id"),d[101]=d[81].get("epoch_anon_id_blob"),d[102]=d[81].get("epoch_root_key_blob"),d[103]=d[81].get("epoch_status"),d[104]=d[81].get("epoch_head"),d[105]=d[81].get("authority_level"),d[106]=d[71].get("from_epoch"),d[107]=d[106].get("epoch_anon_id"),c.blobs.eq(d[107],d[101])?d[108]=d[80]:(d[109]=new c.Map(),d[109].set("error_msg","EB_EPOCH_DERIVATION_SRC_ANON_ID_MISMATCH"),d[109].set("code",c.i64.cast([0,10007])),d[109].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:348 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#2()"),d[110]=c.createArray(),d[112]=(d[110].push(d[109]),d[110]),d[111]=new c.Map(),d[111].set("value",void 0),d[111].set("errors",d[110]),d[108]=d[111]),d[82]=d[108]):(d[99]=d[80].get("errors"),d[100]=d[80].get("errors"),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[99]),d[82]=d[101]),d[83]=d[82].get("value"),d[83]!==void 0?c.sequence([function(a){return d[99]=d[83].get("epoch_id"),d[100]=d[83].get("backup_id"),d[101]=d[83].get("epoch_anon_id_blob"),d[102]=d[83].get("epoch_root_key_blob"),d[103]=d[83].get("epoch_status"),d[104]=d[83].get("epoch_head"),d[105]=d[83].get("authority_level"),d[106]=d[71].get("from_epoch_fingerprint"),d[107]=c.createArray(),d[112]=(d[107].push(c.i64.cast([0,18])),d[107]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[102],d[107]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[108]!==void 0?c.sequence([function(a){return d[112]=c.i64.of_int32(d[108].length),c.i64.ge(d[112],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[108],c.i64.cast([0,0])).then(function(a){return a=a,d[114]=a[0],d[115]=a[1],a})},function(a){return d[113]=d[114]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[115]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[115]].join("")),d[114]=c.createArray(),void 0!==void 0?d[116]=(d[114].push(void 0),d[114]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[115],d[114],c.i64.cast([0,3]))},function(a){return d[113]=void 0}])},function(a){return d[109]=d[113]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[113]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[113]].join("")),d[112]=c.createArray(),void 0!==void 0?d[114]=(d[112].push(void 0),d[112]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[113],d[112],c.i64.cast([0,3]))},function(a){return d[109]=void 0}])},function(a){return c.blobs.neq(d[109],void 0)?d[110]=!0:d[110]=!1,d[110]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[106],void 0)||c.blobs.eq(d[106],d[109])?d[111]=d[82]:(d[112]=new c.Map(),d[112].set("error_msg","EB_EPOCH_DERIVATION_SRC_FINGERPRINT_MISMATCH"),d[112].set("code",c.i64.cast([0,10002])),d[112].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:357 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#4()"),d[113]=c.createArray(),d[115]=(d[113].push(d[112]),d[113]),d[114]=new c.Map(),d[114].set("value",void 0),d[114].set("errors",d[113]),d[111]=d[114]),d[84]=d[111]}]):c.resolve((d[99]=d[82].get("errors"),d[100]=d[82].get("errors"),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[99]),d[84]=d[101]))},function(a){return d[85]=d[71].get("forward_edge"),d[85]!==void 0?c.sequence([function(a){return d[99]=d[84].get("value"),d[99]!==void 0?c.sequence([function(a){return d[113]=d[99].get("epoch_id"),d[114]=d[99].get("backup_id"),d[115]=d[99].get("epoch_anon_id_blob"),d[116]=d[99].get("epoch_root_key_blob"),d[117]=d[99].get("epoch_status"),d[118]=d[99].get("epoch_head"),d[119]=d[99].get("authority_level"),c.nativeOperation(b("LSGetNextEpochAnonId.nop"),d[115]).then(function(a){return a=a,d[120]=a[0],a})},function(a){return d[121]=d[71].get("to_epoch"),d[122]=d[121].get("epoch_anon_id"),c.blobs.eq(d[120],d[122])?d[123]=d[84]:(d[124]=new c.Map(),d[124].set("error_msg","EB_EPOCH_FORWARD_EDGE_NOT_CONSECUTIVE"),d[124].set("code",c.i64.cast([0,10009])),d[124].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:114 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge()"),d[125]=c.createArray(),d[127]=(d[125].push(d[124]),d[125]),d[126]=new c.Map(),d[126].set("value",void 0),d[126].set("errors",d[125]),d[123]=d[126]),d[100]=d[123]}]):c.resolve((d[113]=d[84].get("errors"),d[114]=d[84].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[100]=d[115]))},function(a){return d[101]=d[100].get("value"),d[101]!==void 0?c.sequence([function(a){return d[113]=d[101].get("epoch_id"),d[114]=d[101].get("backup_id"),d[115]=d[101].get("epoch_anon_id_blob"),d[116]=d[101].get("epoch_root_key_blob"),d[117]=d[101].get("epoch_status"),d[118]=d[101].get("epoch_head"),d[119]=d[101].get("authority_level"),d[120]=d[71].get("from_epoch"),d[121]=d[120].get("epoch_anon_id"),d[122]=d[71].get("from_epoch"),d[123]=d[122].get("epoch_id"),d[124]=c.createArray(),d[133]=(d[124].push(c.i64.cast([0,32])),d[124]),d[133]=(d[124].push(c.i64.cast([0,32])),d[124]),d[125]="_",c.nativeOperation(b("LSGetBlobFromString.nop"),["epoch_chaining",d[125],c.blobs.to_string(d[121]),d[125],c.i64.to_string(d[123])].join("")).then(function(a){return a=a,d[126]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[126],void 0,d[116],d[124]).then(function(a){return a=a,d[127]=a[0],a})},function(a){return d[127]?d[128]=!1:d[128]=!0,d[128]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Failed to generate epoch_chaining_key and epoch_distribution_pre_shared_key."),d[134]="Failed to generate epoch_chaining_key and epoch_distribution_pre_shared_key.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[134]].join("")),d[133]=c.createArray(),void 0!==void 0?d[137]=(d[133].push(void 0),d[133]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[134],d[133],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[135]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[136]=a[0],a})},function(a){return a=[d[135],d[136]],d[129]=a[0],d[130]=a[1],a}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[127],c.i64.cast([0,0])).then(function(a){return a=a,d[133]=a[0],d[134]=a[1],a})},function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[127],c.i64.cast([0,1])).then(function(a){return a=a,d[135]=a[0],d[136]=a[1],a})},function(a){return a=[d[133],d[135]],d[129]=a[0],d[130]=a[1],a}])},function(a){return d[131]=new c.Map(),d[131].set("epoch_chaining_key",d[129]),d[131].set("epoch_distribution_pre_shared_key",d[130]),d[132]=new c.Map(),d[132].set("value",d[131]),d[132].set("errors",void 0),d[102]=d[132]}]):c.resolve((d[113]=d[100].get("errors"),d[114]=d[100].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[102]=d[115]))},function(a){return d[103]=d[102].get("value"),d[103]!==void 0?c.sequence([function(a){return d[113]=d[103].get("epoch_chaining_key"),d[114]=d[103].get("epoch_distribution_pre_shared_key"),d[115]=d[85].get("psk_fingerprint"),d[116]=c.createArray(),d[121]=(d[116].push(c.i64.cast([0,18])),d[116]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkNyeXB0b1ByZVNoYXJlZEtleQ=="),void 0,d[114],d[116]).then(function(a){return a=a,d[117]=a[0],a})},function(a){return d[117]!==void 0?c.sequence([function(a){return d[121]=c.i64.of_int32(d[117].length),c.i64.ge(d[121],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[117],c.i64.cast([0,0])).then(function(a){return a=a,d[123]=a[0],d[124]=a[1],a})},function(a){return d[122]=d[123]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[124]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[124]].join("")),d[123]=c.createArray(),void 0!==void 0?d[125]=(d[123].push(void 0),d[123]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[124],d[123],c.i64.cast([0,3]))},function(a){return d[122]=void 0}])},function(a){return d[118]=d[122]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[122]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[122]].join("")),d[121]=c.createArray(),void 0!==void 0?d[123]=(d[121].push(void 0),d[121]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[122],d[121],c.i64.cast([0,3]))},function(a){return d[118]=void 0}])},function(a){return c.blobs.neq(d[118],void 0)?d[119]=!0:d[119]=!1,d[119]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[115],void 0)||c.blobs.eq(d[115],d[118])?d[120]=d[102]:(d[121]=new c.Map(),d[121].set("error_msg","EB_EPOCH_DERIVATION_PSK_FINGERPRINT_MISMATCH"),d[121].set("code",c.i64.cast([0,10005])),d[121].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:140 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#4()"),d[122]=c.createArray(),d[124]=(d[122].push(d[121]),d[122]),d[123]=new c.Map(),d[123].set("value",void 0),d[123].set("errors",d[122]),d[120]=d[123]),d[104]=d[120]}]):c.resolve((d[113]=d[102].get("errors"),d[114]=d[102].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[104]=d[115]))},function(a){return d[105]=d[104].get("value"),d[105]!==void 0?(d[113]=d[105].get("epoch_chaining_key"),d[114]=d[105].get("epoch_distribution_pre_shared_key"),d[115]=d[85].get("epoch_storage_public_key"),c.blobs.eq(d[115],void 0)||c.blobs.eq(d[115],d[29])?d[116]=d[104]:(d[117]=new c.Map(),d[117].set("error_msg","EB_EPOCH_DERIVATION_STORAGE_KEY_MISMATCH"),d[117].set("code",c.i64.cast([0,10006])),d[117].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:154 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#7()"),d[118]=c.createArray(),d[120]=(d[118].push(d[117]),d[118]),d[119]=new c.Map(),d[119].set("value",void 0),d[119].set("errors",d[118]),d[116]=d[119]),d[106]=d[116]):(d[113]=d[104].get("errors"),d[114]=d[104].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[106]=d[115]),d[107]=d[106].get("value"),d[107]!==void 0?c.sequence([function(a){return d[113]=d[107].get("epoch_chaining_key"),d[114]=d[107].get("epoch_distribution_pre_shared_key"),d[115]=d[85].get("auth_public_key"),d[116]=d[71].get("to_epoch"),d[117]=d[116].get("epoch_anon_id"),d[118]=d[85].get("encrypted_entropy"),c.nativeOperation(b("LSPublicEncryptionCreateDecryptedData.nop"),d[29],d[30],d[115],d[114],c.blobs.of_string(["epoch_","_",c.blobs.to_string(d[117])].join("")),d[118]).then(function(a){return a=a,d[119]=a[0],a})},function(a){return c.blobs.neq(d[119],void 0)?c.resolve(d[120]=d[119]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Couldn't decrypt epoch key. Returning null entropy"),d[127]="Couldn't decrypt epoch key. Returning null entropy",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[127]].join("")),d[126]=c.createArray(),void 0!==void 0?d[128]=(d[126].push(void 0),d[126]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[127],d[126],c.i64.cast([0,3]))},function(a){return d[120]=void 0}])},function(a){return c.blobs.neq(d[120],void 0)?(d[126]=new c.Map(),d[126].set("entropy",d[120]),d[127]=new c.Map(),d[127].set("value",d[126]),d[127].set("errors",void 0),d[128]=d[127].get("value"),d[129]=d[127].get("errors"),a=[d[128],d[129]],d[121]=a[0],d[122]=a[1],a):(d[126]=c.createArray(),c.blobs.eq(d[120],void 0)?d[133]=(d[126].push("entropy"),d[126]):0,d[127]=d[126].join(", "),d[128]=new c.Map(),d[128].set("error_msg",["The following required nullables are null: ","",d[127]].join("")),d[128].set("code",c.i64.cast([0,2])),d[128].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:179 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#11()"),d[129]=c.createArray(),d[133]=(d[129].push(d[128]),d[129]),d[130]=new c.Map(),d[130].set("value",void 0),d[130].set("errors",d[129]),d[131]=d[130].get("value"),d[132]=d[130].get("errors"),a=[d[131],d[132]],d[121]=a[0],d[122]=a[1],a),d[123]=new c.Map(),d[123].set("value",d[121]),d[123].set("errors",d[122]),d[124]=d[123].get("value"),d[124]!==void 0?(d[126]=d[124].get("entropy"),d[125]=d[123]):(d[126]=d[123].get("errors"),d[127]=d[123].get("errors"),d[128]=new c.Map(),d[128].set("error_msg","EB_EPOCH_FORWARD_DECRYPTION_FAILED"),d[128].set("code",c.i64.cast([0,10004])),d[128].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:181 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#10()"),d[130]=(d[126].push(d[128]),d[126]),d[129]=new c.Map(),d[129].set("value",void 0),d[129].set("errors",d[126]),d[125]=d[129]),d[108]=d[125]}]):c.resolve((d[113]=d[106].get("errors"),d[114]=d[106].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[108]=d[115]))},function(a){return d[109]=d[106].get("value"),d[109]!==void 0?c.sequence([function(a){return d[113]=d[109].get("epoch_chaining_key"),d[114]=d[109].get("epoch_distribution_pre_shared_key"),d[115]=d[108].get("value"),d[115]!==void 0?c.sequence([function(a){return d[117]=d[115].get("entropy"),d[118]=c.createArray(),d[125]=(d[118].push(c.i64.cast([0,32])),d[118]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key").then(function(a){return a=a,d[119]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[119],d[113],d[117],d[118]).then(function(a){return a=a,d[120]=a[0],a})},function(a){return d[120]?d[121]=!1:d[121]=!0,d[121]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Unable to generate epoch root key."),d[126]="Unable to generate epoch root key.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[126]].join("")),d[125]=c.createArray(),void 0!==void 0?d[128]=(d[125].push(void 0),d[125]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[126],d[125],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[127]=a[0],a})},function(a){return d[122]=d[127]}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[120],c.i64.cast([0,0])).then(function(a){return a=a,d[125]=a[0],d[126]=a[1],a})},function(a){return d[122]=d[125]}])},function(a){return d[123]=new c.Map(),d[123].set("root_key",d[122]),d[124]=new c.Map(),d[124].set("value",d[123]),d[124].set("errors",void 0),d[116]=d[124]}]):c.resolve((d[117]=d[108].get("errors"),d[118]=d[108].get("errors"),d[119]=new c.Map(),d[119].set("value",void 0),d[119].set("errors",d[117]),d[116]=d[119]))},function(a){return d[110]=d[116]}]):c.resolve((d[113]=d[106].get("errors"),d[114]=d[106].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[110]=d[115]))},function(a){return d[111]=d[110].get("value"),d[112]=d[110].get("errors"),a=[d[111],d[112]],d[86]=a[0],d[87]=a[1],a}]):c.sequence([function(a){return d[99]=d[71].get("backward_edge"),c.blobs.neq(d[99],void 0)?c.sequence([function(a){return d[105]=d[84].get("value"),d[105]!==void 0?c.sequence([function(a){return d[113]=d[105].get("epoch_id"),d[114]=d[105].get("backup_id"),d[115]=d[105].get("epoch_anon_id_blob"),d[116]=d[105].get("epoch_root_key_blob"),d[117]=d[105].get("epoch_status"),d[118]=d[105].get("epoch_head"),d[119]=d[105].get("authority_level"),d[120]=d[71].get("to_epoch"),d[121]=d[120].get("epoch_anon_id"),c.nativeOperation(b("LSGetNextEpochAnonId.nop"),d[121]).then(function(a){return a=a,d[122]=a[0],a})},function(a){return c.blobs.eq(d[122],d[115])?d[123]=d[84]:(d[124]=new c.Map(),d[124].set("error_msg","EB_EPOCH_BACKWARD_EDGE_NOT_CONSECUTIVE"),d[124].set("code",c.i64.cast([0,10010])),d[124].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:208 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge()"),d[125]=c.createArray(),d[127]=(d[125].push(d[124]),d[125]),d[126]=new c.Map(),d[126].set("value",void 0),d[126].set("errors",d[125]),d[123]=d[126]),d[106]=d[123]}]):c.resolve((d[113]=d[84].get("errors"),d[114]=d[84].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[106]=d[115]))},function(a){return d[107]=d[106].get("value"),d[107]!==void 0?c.sequence([function(a){return d[113]=d[107].get("epoch_id"),d[114]=d[107].get("backup_id"),d[115]=d[107].get("epoch_anon_id_blob"),d[116]=d[107].get("epoch_root_key_blob"),d[117]=d[107].get("epoch_status"),d[118]=d[107].get("epoch_head"),d[119]=d[107].get("authority_level"),d[120]=c.createArray(),d[125]=(d[120].push(c.i64.cast([0,32])),d[120]),c.nativeOperation(b("LSBase64Encode.nop"),d[115]).then(function(a){return a=a,d[121]=a[0],a})},function(a){return d[121]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blobs.of_string(["epoch_data_storage","_",d[121]].join("")),void 0,d[116],d[120]).then(function(a){return a=a,d[125]=a[0],a})},function(a){return d[125]?d[126]=!1:d[126]=!0,d[126]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish"),d[129]="THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[129]].join("")),d[128]=c.createArray(),void 0!==void 0?d[131]=(d[128].push(void 0),d[128]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[129],d[128],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[130]=a[0],a})},function(a){return d[127]=d[130]}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[125],c.i64.cast([0,0])).then(function(a){return a=a,d[128]=a[0],d[129]=a[1],a})},function(a){return d[127]=d[128]}])},function(a){return d[122]=d[127]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish"),d[126]="THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[126]].join("")),d[125]=c.createArray(),void 0!==void 0?d[128]=(d[125].push(void 0),d[125]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[126],d[125],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[127]=a[0],a})},function(a){return d[122]=d[127]}])},function(a){return d[123]=new c.Map(),d[123].set("epoch_data_storage_key",d[122]),d[124]=new c.Map(),d[124].set("value",d[123]),d[124].set("errors",void 0),d[108]=d[124]}]):c.resolve((d[113]=d[106].get("errors"),d[114]=d[106].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[108]=d[115]))},function(a){return d[109]=d[108].get("value"),d[109]!==void 0?c.sequence([function(a){return d[113]=d[109].get("epoch_data_storage_key"),c.nativeOperation(b("LSBase64Encode.nop"),d[99]).then(function(a){return a=a,d[114]=a[0],a})},function(a){return d[121]=d[114],d[121]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),d[113],c.blob("ZXBvY2hfZGF0YV9tZXRhZGF0YQ=="),d[121]).then(function(a){return a=a,d[122]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Decode.nop"),d[122]).then(function(a){return a=a,d[123]=a[0],a})},function(a){return d[115]=d[123]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Unable to base64 encode backward edge."),d[123]="Unable to base64 encode backward edge.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[123]].join("")),d[122]=c.createArray(),void 0!==void 0?d[124]=(d[122].push(void 0),d[122]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[123],d[122],c.i64.cast([0,3]))},function(a){return d[115]=void 0}])},function(a){return c.blobs.neq(d[115],void 0)?(d[122]=new c.Map(),d[122].set("root_key",d[115]),d[123]=new c.Map(),d[123].set("value",d[122]),d[123].set("errors",void 0),d[124]=d[123].get("value"),d[125]=d[123].get("errors"),a=[d[124],d[125]],d[116]=a[0],d[117]=a[1],a):(d[122]=c.createArray(),c.blobs.eq(d[115],void 0)?d[129]=(d[122].push("root_key"),d[122]):0,d[123]=d[122].join(", "),d[124]=new c.Map(),d[124].set("error_msg",["The following required nullables are null: ","",d[123]].join("")),d[124].set("code",c.i64.cast([0,2])),d[124].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:237 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge#5()"),d[125]=c.createArray(),d[129]=(d[125].push(d[124]),d[125]),d[126]=new c.Map(),d[126].set("value",void 0),d[126].set("errors",d[125]),d[127]=d[126].get("value"),d[128]=d[126].get("errors"),a=[d[127],d[128]],d[116]=a[0],d[117]=a[1],a),d[118]=new c.Map(),d[118].set("value",d[116]),d[118].set("errors",d[117]),d[119]=d[118].get("value"),d[119]!==void 0?(d[122]=d[119].get("root_key"),d[120]=d[118]):(d[122]=d[118].get("errors"),d[123]=d[118].get("errors"),d[124]=new c.Map(),d[124].set("error_msg","EB_EPOCH_BACKWARD_DECRYPTION_FAILED"),d[124].set("code",c.i64.cast([0,10013])),d[124].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:239 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge#4()"),d[126]=(d[122].push(d[124]),d[122]),d[125]=new c.Map(),d[125].set("value",void 0),d[125].set("errors",d[122]),d[120]=d[125]),d[110]=d[120]}]):c.resolve((d[113]=d[108].get("errors"),d[114]=d[108].get("errors"),d[115]=new c.Map(),d[115].set("value",void 0),d[115].set("errors",d[113]),d[110]=d[115]))},function(a){return d[111]=d[110].get("value"),d[112]=d[110].get("errors"),a=[d[111],d[112]],d[100]=a[0],d[101]=a[1],a}]):c.resolve((d[105]=new c.Map(),d[105].set("error_msg","EB_EPOCH_EDGE_NEITHER_FORWARD_NOR_BACKWARD"),d[105].set("code",c.i64.cast([0,10008])),d[105].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:382 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#9()"),d[106]=c.createArray(),d[110]=(d[106].push(d[105]),d[106]),d[107]=new c.Map(),d[107].set("value",void 0),d[107].set("errors",d[106]),d[108]=d[107].get("value"),d[109]=d[107].get("errors"),a=[d[108],d[109]],d[100]=a[0],d[101]=a[1],a))},function(a){return d[102]=new c.Map(),d[102].set("value",d[100]),d[102].set("errors",d[101]),d[103]=d[102].get("value"),d[104]=d[102].get("errors"),a=[d[103],d[104]],d[86]=a[0],d[87]=a[1],a}])},function(a){return d[88]=new c.Map(),d[88].set("value",d[86]),d[88].set("errors",d[87]),d[89]=d[88].get("value"),d[89]!==void 0?c.sequence([function(a){return d[99]=d[89].get("root_key"),d[100]=d[71].get("to_epoch_fingerprint"),d[101]=c.createArray(),d[106]=(d[101].push(c.i64.cast([0,18])),d[101]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[99],d[101]).then(function(a){return a=a,d[102]=a[0],a})},function(a){return d[102]!==void 0?c.sequence([function(a){return d[106]=c.i64.of_int32(d[102].length),c.i64.ge(d[106],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[102],c.i64.cast([0,0])).then(function(a){return a=a,d[108]=a[0],d[109]=a[1],a})},function(a){return d[107]=d[108]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[109]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[109]].join("")),d[108]=c.createArray(),void 0!==void 0?d[110]=(d[108].push(void 0),d[108]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[109],d[108],c.i64.cast([0,3]))},function(a){return d[107]=void 0}])},function(a){return d[103]=d[107]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[107]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[107]].join("")),d[106]=c.createArray(),void 0!==void 0?d[108]=(d[106].push(void 0),d[106]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[107],d[106],c.i64.cast([0,3]))},function(a){return d[103]=void 0}])},function(a){return c.blobs.neq(d[103],void 0)?d[104]=!0:d[104]=!1,d[104]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[100],void 0)||c.blobs.eq(d[100],d[103])?d[105]=d[88]:(d[106]=new c.Map(),d[106].set("error_msg","EB_EPOCH_DERIVATION_DEST_FINGERPRINT_MISMATCH"),d[106].set("code",c.i64.cast([0,10001])),d[106].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:386 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#11()"),d[107]=c.createArray(),d[109]=(d[107].push(d[106]),d[107]),d[108]=new c.Map(),d[108].set("value",void 0),d[108].set("errors",d[107]),d[105]=d[108]),d[90]=d[105]}]):c.resolve((d[99]=d[88].get("errors"),d[100]=d[88].get("errors"),d[101]=new c.Map(),d[101].set("value",void 0),d[101].set("errors",d[99]),d[90]=d[101]))},function(a){return d[91]=d[90].get("value"),d[91]!==void 0?c.sequence([function(a){return d[99]=d[91].get("root_key"),d[100]=d[71].get("to_minos_epoch"),d[100]!==void 0?(d[121]=d[100].get("epoch_head"),d[101]=d[121]):d[101]=void 0,d[102]=d[71].get("to_epoch"),d[103]=d[102].get("epoch_id"),d[104]=d[71].get("to_epoch"),d[105]=d[104].get("epoch_anon_id"),c.storedProcedure(b("LSStoreEpoch"),d[103],d[26],d[105],d[99],c.i64.cast([0,2]),c.i64.cast([0,80]),!1,d[101])},function(a){return d[106]=d[71].get("from_epoch"),d[107]=d[106].get("epoch_anon_id"),d[108]=d[71].get("from_epoch"),d[109]=d[108].get("epoch_id"),d[110]=new c.Map(),d[110].set("epoch_anon_id",d[107]),d[110].set("epoch_id",d[109]),d[111]=d[71].get("to_epoch"),d[112]=d[111].get("epoch_anon_id"),d[113]=d[71].get("to_epoch"),d[114]=d[113].get("epoch_id"),d[115]=new c.Map(),d[115].set("epoch_anon_id",d[112]),d[115].set("epoch_id",d[114]),d[116]=d[71].get("forward_edge"),d[116]?d[117]=!1:d[117]=!0,d[117]?d[118]=!1:d[118]=!0,d[119]=d[71].get("backward_edge"),c.blobs.neq(d[119],void 0)?d[120]=!0:d[120]=!1,a=[d[110],d[115],d[118],d[120],void 0,c.i64.cast([0,0])],d[92]=a[0],d[93]=a[1],d[94]=a[2],d[95]=a[3],d[96]=a[4],d[97]=a[5],a}]):c.sequence([function(a){return d[99]=d[90].get("errors"),d[100]=d[90].get("errors"),d[101]=c.i64.of_int32(d[99].length),c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[99],c.i64.sub(d[101],c.i64.cast([0,1]))).then(function(a){return a=a,d[102]=a[0],d[103]=a[1],a})},function(a){return d[104]=d[102].get("code"),d[105]=d[102].get("src_line"),d[106]=d[102].get("error_msg"),c.i64.eq(d[104],c.i64.cast([0,10004]))?d[107]=c.i64.cast([0,3]):(c.i64.eq(d[104],c.i64.cast([0,10003]))?d[125]=c.i64.cast([0,13]):(c.i64.eq(d[104],c.i64.cast([0,10002]))?d[126]=c.i64.cast([0,9]):(c.i64.eq(d[104],c.i64.cast([0,10001]))?d[127]=c.i64.cast([0,10]):(c.i64.eq(d[104],c.i64.cast([0,10005]))?d[128]=c.i64.cast([0,12]):(c.i64.eq(d[104],c.i64.cast([0,10006]))?d[129]=c.i64.cast([0,11]):(c.i64.eq(d[104],c.i64.cast([0,10008]))?d[130]=c.i64.cast([0,2]):(c.i64.eq(d[104],c.i64.cast([0,10009]))?d[131]=c.i64.cast([0,14]):(c.i64.eq(d[104],c.i64.cast([0,10010]))?d[132]=c.i64.cast([0,15]):(c.i64.eq(d[104],c.i64.cast([0,10011]))?d[133]=c.i64.cast([0,16]):(c.i64.eq(d[104],c.i64.cast([0,10012]))?d[134]=c.i64.cast([0,17]):(c.i64.eq(d[104],c.i64.cast([0,10013]))?d[135]=c.i64.cast([0,6]):d[135]=c.i64.cast([0,1]),d[134]=d[135]),d[133]=d[134]),d[132]=d[133]),d[131]=d[132]),d[130]=d[131]),d[129]=d[130]),d[128]=d[129]),d[127]=d[128]),d[126]=d[127]),d[125]=d[126]),d[107]=d[125]),d[108]="",d[109]=c.i64.of_int32(d[99].length),c.i64.gt(d[109],c.i64.cast([0,0]))?c.loopAsync(d[109],function(a){return d[125]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[99],d[125]).then(function(a){return a=a,d[126]=a[0],d[127]=a[1],a})},function(a){return d[128]=d[126].get("code"),d[129]=d[126].get("src_line"),d[130]=d[126].get("error_msg"),d[131]=d[126].get("code"),d[132]=d[126].get("src_line"),d[133]=d[126].get("error_msg"),d[134]=d[126].get("code"),d[135]=d[126].get("src_line"),d[136]=d[126].get("error_msg"),d[108]=[d[108],["at ",d[129],": ","error code ",c.i64.to_string(d[131]),": ",d[136]].join(""),"\n"].join("")}])}):c.resolve()},function(a){return d[110]=d[71].get("from_epoch"),d[111]=d[110].get("epoch_anon_id"),d[112]=d[71].get("from_epoch"),d[113]=d[112].get("epoch_id"),d[114]=new c.Map(),d[114].set("epoch_anon_id",d[111]),d[114].set("epoch_id",d[113]),d[115]=d[71].get("to_epoch"),d[116]=d[115].get("epoch_anon_id"),d[117]=d[71].get("to_epoch"),d[118]=d[117].get("epoch_id"),d[119]=new c.Map(),d[119].set("epoch_anon_id",d[116]),d[119].set("epoch_id",d[118]),d[120]=d[71].get("forward_edge"),d[120]?d[121]=!1:d[121]=!0,d[121]?d[122]=!1:d[122]=!0,d[123]=d[71].get("backward_edge"),c.blobs.neq(d[123],void 0)?d[124]=!0:d[124]=!1,a=[d[114],d[119],d[122],d[124],d[108],d[107]],d[92]=a[0],d[93]=a[1],d[94]=a[2],d[95]=a[3],d[96]=a[4],d[97]=a[5],a}])},function(a){return d[98]=new c.Map(),d[98].set("from",d[92]),d[98].set("to",d[93]),d[98].set("has_forward_edge",d[94]),d[98].set("has_backward_edge",d[95]),d[98].set("error_message",d[96]),d[98].set("result_code",d[97]),d[99]=(d[68].push(d[98]),d[68])}])}):c.resolve()},function(b){return b=[d[38],d[38],a[1],a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[68],!1,void 0],d[59]=b[0],d[60]=b[1],d[61]=b[2],d[62]=b[3],d[63]=b[4],d[64]=b[5],d[65]=b[6],d[66]=b[7],d[67]=b[8],b}])},function(a){return a=[d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66],d[67]],d[45]=a[0],d[46]=a[1],d[47]=a[2],d[48]=a[3],d[49]=a[4],d[50]=a[5],d[51]=a[6],d[52]=a[7],d[53]=a[8],a}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Unable to load client state: 24"),d[55]="Unable to load client state: 24",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] ","",d[55]].join("")),d[54]=c.createArray(),void 0!==void 0?d[58]=(d[54].push(void 0),d[54]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure",d[55],d[54],c.i64.cast([0,3]))},function(e){return d[56]=c.createArray(),d[57]=c.i64.of_int32(a[0].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.loopAsync(d[57],function(e){return d[58]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[58]).then(function(a){return a=a,d[59]=a[0],d[60]=a[1],a})},function(a){return d[61]=d[59].get("from_epoch"),d[62]=d[61].get("epoch_anon_id"),d[63]=d[59].get("from_epoch"),d[64]=d[63].get("epoch_id"),d[65]=new c.Map(),d[65].set("epoch_anon_id",d[62]),d[65].set("epoch_id",d[64]),d[66]=d[59].get("to_epoch"),d[67]=d[66].get("epoch_anon_id"),d[68]=d[59].get("to_epoch"),d[69]=d[68].get("epoch_id"),d[70]=new c.Map(),d[70].set("epoch_anon_id",d[67]),d[70].set("epoch_id",d[69]),d[71]=d[59].get("forward_edge"),d[71]?d[72]=!1:d[72]=!0,d[72]?d[73]=!1:d[73]=!0,d[74]=d[59].get("backward_edge"),c.blobs.neq(d[74],void 0)?d[75]=!0:d[75]=!1,d[76]=new c.Map(),d[76].set("from",d[65]),d[76].set("to",d[70]),d[76].set("has_forward_edge",d[73]),d[76].set("has_backward_edge",d[75]),d[76].set("result_code",c.i64.cast([0,7])),d[76].set("error_message",void 0),d[77]=(d[56].push(d[76]),d[56])}])}):c.resolve()},function(b){return b=[void 0,void 0,void 0,a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[56],!1,void 0],d[45]=b[0],d[46]=b[1],d[47]=b[2],d[48]=b[3],d[49]=b[4],d[50]=b[5],d[51]=b[6],d[52]=b[7],d[53]=b[8],b}])},function(a){return a=[d[45],d[46],d[47],d[48],d[49],d[50],d[51],d[52],d[53]],d[15]=a[0],d[16]=a[1],d[17]=a[2],d[18]=a[3],d[19]=a[4],d[20]=a[5],d[21]=a[6],d[22]=a[7],d[23]=a[8],a}]):c.sequence([function(a){return d[26]=d[13].get("errors"),d[27]=d[13].get("errors"),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Unable to load client state: 1"),d[29]="Unable to load client state: 1",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[32]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure",d[29],d[28],c.i64.cast([0,3]))},function(e){return d[30]=c.createArray(),d[31]=c.i64.of_int32(a[0].length),c.i64.gt(d[31],c.i64.cast([0,0]))?c.loopAsync(d[31],function(e){return d[32]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(a){return d[35]=d[33].get("from_epoch"),d[36]=d[35].get("epoch_anon_id"),d[37]=d[33].get("from_epoch"),d[38]=d[37].get("epoch_id"),d[39]=new c.Map(),d[39].set("epoch_anon_id",d[36]),d[39].set("epoch_id",d[38]),d[40]=d[33].get("to_epoch"),d[41]=d[40].get("epoch_anon_id"),d[42]=d[33].get("to_epoch"),d[43]=d[42].get("epoch_id"),d[44]=new c.Map(),d[44].set("epoch_anon_id",d[41]),d[44].set("epoch_id",d[43]),d[45]=d[33].get("forward_edge"),d[45]?d[46]=!1:d[46]=!0,d[46]?d[47]=!1:d[47]=!0,d[48]=d[33].get("backward_edge"),c.blobs.neq(d[48],void 0)?d[49]=!0:d[49]=!1,d[50]=new c.Map(),d[50].set("from",d[39]),d[50].set("to",d[44]),d[50].set("has_forward_edge",d[47]),d[50].set("has_backward_edge",d[49]),d[50].set("result_code",c.i64.cast([0,7])),d[50].set("error_message",void 0),d[51]=(d[30].push(d[50]),d[30])}])}):c.resolve()},function(b){return b=[void 0,void 0,void 0,a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[30],!1,void 0],d[15]=b[0],d[16]=b[1],d[17]=b[2],d[18]=b[3],d[19]=b[4],d[20]=b[5],d[21]=b[6],d[22]=b[7],d[23]=b[8],b}])},function(a){return d[24]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSRecordEpochSyncStatus"),d[15],d[16],d[17],d[18],d[9],d[24],d[21],d[22])}]):c.resolve()},function(a){return d[2]=c.i64.of_float(Date.now()),d[3]=c.i64.random(),d[5]="Finishing execution. Execution time: ",d[6]=c.i64.to_string(c.i64.sub(d[2],d[0])),d[7]=" ms",d[4]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] ",d[4],d[5],d[4],d[6],d[4],d[7]].join("")),c.i64.eq(c.i64.mod_(d[3],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[8]=",",d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure",[d[5],d[8],d[6],d[8],d[7]].join(""),d[9],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){if(b!=null){p({querySource:e,runningInWorker:(e=f)!=null?e:!1,taskSource:a,traceId:b,triggerType:"paginated"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;if(a!=null){p({querySource:b,runningInWorker:(b=e)!=null?b:!1,taskSource:f,traceId:a,triggerType:"initial"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){if(b!=null){p({querySource:"LS",runningInWorker:(e=e)!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){if(b!=null){p({querySource:"LS",runningInWorker:(e=e)!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){if(b!=null){p({querySource:e,runningInWorker:(e=f)!=null?e:!1,taskSource:a,traceId:b,triggerType:"point"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;if(a!=null){p({querySource:b,runningInWorker:(b=e)!=null?b:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e,f){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,f,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{annotations:f,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){u("protobuf",a)}function p(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:(h=e)!=null?h:!1},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},{providedInstanceKey:d("WAHashStringToNumber").hashStringToNumber(g),providedTimeoutInMs:c("justknobx")._("2950")})}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:(h=e)!=null?h:!1},"int":{requestedMessagesCount:(e=j[a])!=null?e:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function q(a){var b=a.pointName;a=a.traceId;c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+v(b))}function v(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreProtobuf=o;g.addQPLRestorePoint=q;g.addQPLRestorePointWithAnnotations=r;g.addQPLRestorePointWithAnnotationsWorker=s;g.addQPLRestorePointWorker=t}),98);
__d("EBAPISharedUtils",["EBAPIQPLPoints","I64","LSAuthorityLevel","LSDeleteAndReenrollDeviceStateStoredProcedure","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","MAWBridgeSafeActionsWorkerAndUI","MAWRotateDTSG","MWEBODSEntityName.enum","ODS","WALogger","handleRestoreMessagesGraphQLResponse"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Echo to protobuf conversion failed in search range restore response: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backup_id is null during graphQL restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is not complete - cannot proceed with graphQL restore"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is null - cannot proceed with graphQL restore"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] server side exception during graphql restore - ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL worker range restore query returned null for message response"]);p=function(){return a};return a}function a(a,b){if(a!=null){b=b.filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).map(function(a){return(h||(h=d("I64"))).to_string(a.epochId)});return{backupId:a.backupId,device_id:a.deviceId,locally_available_epochs:b,mailboxRootKey:a.mailboxRootKeyBlob,ocmfClientStateBlob:a.ocmfClientStateBlob}}}function b(a){var b=a==null?void 0:a.backupTenancy;a=a==null?void 0:a.authorityLevel;return b==null||a==null?!1:(h||(h=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a)}function q(a){var b=a.backupId,c=a.devicePrivateKeyBlob,d=a.devicePublicKeyBlob,e=a.epochAuthPrivateKeyBlob,f=a.epochAuthPublicKeyBlob,g=a.epochStoragePrivateKeyBlob,h=a.epochStoragePublicKeyBlob,i=a.mailboxRootKeyBlob,j=a.obliviousValidationTokenBlob,k=a.ocmfClientStateBlob;if(b!=null&&c!=null&&d!=null&&e!=null&&f!=null&&g!=null&&h!=null&&i!=null&&j!=null&&k!=null)return{authorityLevel:a.authorityLevel,backupId:b,backupTenancy:a.backupTenancy,deviceId:a.deviceId,devicePrivateKeyBlob:c,devicePublicKeyBlob:d,encryptionVersion:a.encryptionVersion,epochAuthPrivateKeyBlob:e,epochAuthPublicKeyBlob:f,epochStoragePrivateKeyBlob:g,epochStoragePublicKeyBlob:h,mailboxRootKeyBlob:i,obliviousValidationTokenBlob:j,ocmfClientStateBlob:k,revisionVersion:a.revisionVersion}}function r(a){var b=a.authorityLevel,c=a.backupId,d=a.epochAnonIdBlob,e=a.epochId,f=a.epochRootKeyBlob;a=a.epochStatus;if(b!=null&&c!=null&&d!=null&&e!=null&&f!=null&&a!=null)return{authorityLevel:b,backupId:c,epochAnonIdBlob:d,epochId:e,epochRootKeyBlob:f,epochStatus:a}}function e(a){var b=[],c=new Set(["epochId","authorityLevel","backupId","epochAnonIdBlob","epochRootKeyBlob","epochStatus"]);a=a.get("secure_encrypted_backups_epochs");if(a==null||(a==null?void 0:a.size)===0)return b;if(a!=null){a=a.entries();for(a of a){var d=a[0];a[1];d=d;if(d instanceof Object){d=Object.values(d);d=d[1];if(d instanceof Object){var e={};for(d of Object.entries(d)){var f=d[0],g=d[1];c.has(f)&&(e[f]=g)}f=r(e);f!=null&&b.push(f)}}}}return b}function s(a){a=a.get("secure_encrypted_backups_client_state");var b={};if(a==null||(a==null?void 0:a.size)===0)return;if(a!=null){a=a.entries();for(a of a){var c=a[0];a[1];c=c;if(c instanceof Object){c=Object.values(c);c=c[1];if(c instanceof Object)for(c of Object.entries(c)){var d=c[0],e=c[1];b[d]=e}}break}}d=q(b);return d}function t(a){(j||(j=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,a)}async function u(a,b,e,g,j,q,r,s,t,u,v,w){var x;d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END,void 0,j);if(a==null||(a==null?void 0:(x=a.viewer)==null?void 0:(x=x.encrypted_backup)==null?void 0:x.mailbox)==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,j);return{response:"invalid-graphql-response",success:!1}}a=(x=a==null?void 0:(x=a.viewer)==null?void 0:(x=x.encrypted_backup)==null?void 0:(x=x.mailbox)==null?void 0:x.messages)!=null?x:a==null?void 0:(x=a.viewer)==null?void 0:(a=x.encrypted_backup)==null?void 0:(x=a.mailbox)==null?void 0:x.messages_point_restore;if(a==null){d("WALogger").ERROR(p());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,j);return{response:"invalid-graphql-response",success:!1}}x=a;if((x==null?void 0:x.encrypted_messages)==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,j);return{response:"invalid-graphql-response",success:!1}}a=x.backup_id;var y=x.encrypted_messages,z=x.epoch_derivation_set,A=x.exception_string,B=x.message_range_info;x=x.should_delete_mailbox;if(A!=null){d("WALogger").ERROR(o(),A);x===!0&&(d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX,void 0,j),await g.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:q})},"readwrite",void 0,void 0,f.id+":337"));d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,j,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:A}});return{response:"server-side-exception",success:!1}}d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START,void 0,j);await d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(z,g,q,u,b);d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END,void 0,j);if(B==null){d("WALogger").ERROR(n());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,j);return{response:"missing-message-range-info",success:!1}}if(B!=null){x=B.has_more_after;A=B.has_more_before;z=B.next_message_timestamp_ms_after;var C=B.next_message_timestamp_ms_before;if(A==null||x==null||z==null||C==null){d("WALogger").ERROR(m());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,j);return{response:"missing-message-range-info",success:!1}}}a==null&&(d("WALogger").WARN(l()),d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL,void 0,j));d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROCESS_AND_DECRYPT_MESSAGES_START,void 0,j);A=await d("handleRestoreMessagesGraphQLResponse").processEncryptedMessagesWithoutPersisting({backupId:a!=null?a:(h||(h=d("I64"))).to_string(w),encryptedMessages:y,messageRangeInfo:B,qplEvent:e,runningInWorker:b,sortOrderMs:v,source:t,storage:g,threadId:r,traceId:u});d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROCESS_AND_DECRYPT_MESSAGES_END,void 0,j);if(A==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EMPTY_DECRYPTION_RESPONSE,j);return{response:"empty-decryption-response",success:!1}}if(A.echoMessages!=null){x=A;z=x.echoMessages;d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_START,void 0,j);try{C=await d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:s,encodedEchoMessages:z});d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_END,void 0,j);A=babelHelpers.extends({},A,{echoMessages:void 0,protobufMessages:(A.protobufMessages||[]).concat(C)})}catch(a){d("WALogger").ERROR(k(),a.message);d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_FAILURE,j);return{response:"echo-to-protobuf-conversion-error",success:!1}}}d("EBAPIQPLPoints").ebAPIEndSuccess(b,e,j,{bool:{isEcho:((a=A)==null?void 0:a.echoMessages)?((w=A)==null?void 0:w.echoMessages.length)>0:!1,isProtobuf:((y=A)==null?void 0:y.protobufMessages)?((B=A)==null?void 0:B.protobufMessages.length)>0:!1}});return{response:A,success:!0}}function v(a){return a!=null&&a.message.indexOf("1357004")!==-1?d("MAWRotateDTSG").tryRotateDTSG().then(function(a){if(a)return"token-rotation-successful";else return"token-rotation-failed"}):Promise.resolve("token-rotation-not-required")}g.getDeviceAndKeyMetadata=a;g.isBackupTenancyAuthoritative=b;g.getAvailableEpochsFromPersistedEBSM=e;g.getClientStateFromPersistedEBSM=s;g.bumpOdsRestoreKey=t;g.constructEBRestoreResponse=u;g.handleDTSGTokenRotation=v}),98);
__d("EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9266310850161351"}),null);
__d("EBMessagePointQueryWithPersistenceQuery.graphql",["EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},d={defaultValue:null,kind:"LocalArgument",name:"restore_type"},e=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],f={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},l=[g,h];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"EBMessagePointQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"EBMessagePointQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},f,g,h,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[i,f,g,h,j,k],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[i,f,g,h,j,k,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_not_found",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation"),metadata:{},name:"EBMessagePointQueryWithPersistenceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWMainTraceUtils",["I64","LSRequestId"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("LSRequestId").generate()}async function b(a,b,c,e,f,g,i){await a.data_trace_meta.add({contextOne:f,contextThree:i,contextTwo:g,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:b,predefinedId:void 0,shouldFlush:!1,traceId:c,traceType:e})}g.createTraceId=a;g.startTraceWithTxn=b}),98);
__d("XFBLSRestoreOperationType.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DELTA_GENERIC_MESSAGE_SYNC","INITIAL_RESTORE","MESSAGE_QUERY_RESTORE","POINT_QUERY_RESTORE","RANGE_QUERY_RESTORE","SNAPSHOT_RESTORE","SURROUNDING_RESTORE","THREAD_POINT_QUERY_RESTORE","UNKNOWN"]);c=a;f["default"]=c}),66);
__d("EBMessagePointQueryWithPersistence",["Base64Utils","EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBIsEbEnabled","EBMessagePointQueryWithPersistenceQuery.graphql","EBSMDBAPI","EBSMHydrationUtils","I64","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSDeleteAndReenrollDeviceStateStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","LSMEBTaskCreationSource","LSShape","LSVec","MAWBridge","MAWCurrentUser","MAWEBRestoreTrackingUtils","MAWEncryptedBackupUtils","MAWJobDefinitions","MAWMainTraceUtils","QPLUserFlow","WAHashStringToNumber","WALogger","WAResultOrError","WorkerRelay","WorkerRelayNetwork","cr:14165","gkx","handleRestoreMessagesGraphQLResponse","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL point restore error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[protobuf-only] decryptMessageProtobufs failed with error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[protobuf-only] decryptMessageProtobufs failed with an error"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[echo-only][echo] decryptMessageEcho failed with error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[echo-only][echo] decryptMessageEcho failed with an error."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is not complete - cannot proceed with graphQL restore"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backup_id is null during graphQL restore"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is null - cannot proceed with graphQL restore"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] server side exception during graphql restore - ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL worker point restore query returned null for message response"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling EBLS without EBLS being available for message point query"]);x=function(){return a};return a}var y=h!==void 0?h:h=b("EBMessagePointQueryWithPersistenceQuery.graphql");async function a(a){var e,g=a.jid,h=a.messageId,z=a.sortOrderMs,A=a.source,B=a.threadId;a=a.traceId;if(!d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql");var C=a!=null?a:d("MAWMainTraceUtils").createTraceId(),D=d("WAHashStringToNumber").hashStringToNumber(C),E=c("qpl")._(521474469,"2612");c("QPLUserFlow").start(E,{annotations:{bool:{mainThreadRestore:!1,workerThreadRestore:!0},int:{source:(e=A)!=null?e:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestorePoint(A,C,"GQL_WORKER",!0);try{var F;if(b("cr:14165")==null){d("WALogger").ERROR(x());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"ebls_not_initialized");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("ebls-not-initialized")}c("QPLUserFlow").addPoint(E,"before_ebls_initialization",{instanceKey:D});await b("cr:14165").genLSClient();c("QPLUserFlow").addPoint(E,"after_ebls_initialization",{instanceKey:D});e=await b("cr:14165").getLSStorage();var G=await d("EBIsEbEnabled").isEbEnabledLS(e.tables);if(c("gkx")("2489")){var H=d("EBSMDBAPI").getEBLSDB();H=await d("EBSMHydrationUtils").loadEBdataToEphemeralRestore(H);var I=d("EBAPISharedUtils").getClientStateFromPersistedEBSM(H);H=d("EBAPISharedUtils").getAvailableEpochsFromPersistedEBSM(H);if(I===null){d("WALogger").ERROR(w());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"no_client_state");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("no-client-state")}var J=G!=null?G:d("EBAPISharedUtils").isBackupTenancyAuthoritative(I);if(!J){c("QPLUserFlow").addPoint(E,"eb_not_enabled",{instanceKey:D});c("QPLUserFlow").endSuccess(E,{instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"eb_not_enabled",traceId:C});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(C,!0);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.success");return d("WAResultOrError").makeResult()}J=d("EBAPISharedUtils").getDeviceAndKeyMetadata(I,H)}else{I=await d("MAWEncryptedBackupUtils").getBackupTenancy(e.tables);H=G!=null?G:I!=null&&(i||(i=d("I64"))).equal(I,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION));if(!H){c("QPLUserFlow").addPoint(E,"eb_not_enabled",{instanceKey:D});c("QPLUserFlow").endSuccess(E,{instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"eb_not_enabled",traceId:C});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(C,!0);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.success");return d("WAResultOrError").makeResult()}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"lsdb_singleton_retrieved",traceId:C});c("QPLUserFlow").addPoint(E,"lsdb_singleton_retrieved",{instanceKey:D});J=await d("handleRestoreMessagesGraphQLResponse").getClientState(e)}if(J==null){d("WALogger").ERROR(v());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"no_client_state");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("no-client-state")}G=J;I=G.backupId;var K=G.device_id;H=G.locally_available_epochs;var L=G.mailboxRootKey;G=G.ocmfClientStateBlob;if(I==null||K==null||L==null||G==null){d("WALogger").ERROR(u());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotationsWorker({annotations:{string:{device_id:(i||(i=d("I64"))).to_string((F=(F=J)==null?void 0:F.device_id)!=null?F:(i||(i=d("I64"))).zero)}},pointName:"client_state_retrieved",traceId:C});c("QPLUserFlow").addPoint(E,"client_state_retrieved",{data:{string:{device_id:i.to_string((J=(F=J)==null?void 0:F.device_id)!=null?J:(i||(i=d("I64"))).zero)}},instanceKey:D});F=d("MAWCurrentUser").getAppID();d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"app_id_retrieved",traceId:C});c("QPLUserFlow").addPoint(E,"app_id_retrieved",{instanceKey:D});J={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(B),site:"www",tam_thread_subtype:0},success:babelHelpers.extends({device_context:{device_id:i.to_string(K),locally_available_epochs:H,raw_tokens:{mailbox_root_key:d("Base64Utils").fromArrayBuffer(L),ocmf_client_state_blob:d("Base64Utils").fromArrayBuffer(G)}},message_id:h},z!=null?{reference_timestamp:z}:{})};d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"graphql_query_start",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:D});await d("WorkerRelayNetwork").createWorkerNetworkExecute();L=await d("WorkerRelay").createWorkerQuery(y,{app_id:String((H=F)!=null?H:"0"),restore_payload_string:JSON.stringify(J),restore_type:"POINT_QUERY_RESTORE"});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"graphql_query_end",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END,{instanceKey:D});if(L==null||(L==null?void 0:(G=L.viewer)==null?void 0:(h=G.encrypted_backup)==null?void 0:h.mailbox)==null){c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}G=L==null?void 0:(F=L.viewer)==null?void 0:(H=F.encrypted_backup)==null?void 0:(J=H.mailbox)==null?void 0:J.messages_point_restore;if(G==null){d("WALogger").ERROR(t());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}h=G;if((h==null?void 0:h.encrypted_messages)==null){c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES}},instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"null_messages",traceId:C});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"null_messages");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}L=h.backup_id;F=h.encrypted_messages;H=h.epoch_derivation_set;J=h.exception_string;G=h.message_range_info;h=h.should_delete_mailbox;if(J!=null){d("WALogger").ERROR(s(),J);h===!0&&(c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX,{instanceKey:D}),await e.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:K})},"readwrite",void 0,void 0,f.id+":540"),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"delete_mailbox",traceId:C}));c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:J}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:J}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("server-side-exception")}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"derive_and_store_epochs_start",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START,{instanceKey:D});c("QPLUserFlow").addAnnotations(E,{bool:{hasEpochs:H!=null&&H.epoch_edges.length>0}},{instanceKey:D});await d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(H,e,K,C,!0);d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"derive_and_store_epochs_end",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END,{instanceKey:D});F.length===0&&(c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_MESSAGES_TO_RESTORE,{instanceKey:D}),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"no_messages",traceId:C}));if(G==null){d("WALogger").ERROR(r());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"missing_message_range_info");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}L==null&&(d("WALogger").WARN(q()),c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL,{instanceKey:D}),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"backup_id_null",traceId:C}));h=G.has_more_after;J=G.has_more_before;H=G.next_message_timestamp_ms_after;G=G.next_message_timestamp_ms_before;if(J==null||h==null||H==null||G==null){d("WALogger").ERROR(p());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"message_range_info_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}F=d("handleRestoreMessagesGraphQLResponse").processMessageArray(F,L!=null?L:(i||(i=d("I64"))).to_string(I),E,D);var M=F.encryptedLSEchoMessages,N=F.encryptedMessagesWithProtobufs;if(N.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_echo_start",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START,{instanceKey:D});L=await e.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:B,encryptedMessages:c("LSVec").ofArray(M)})},"readwrite",void 0,void 0,f.id+":754");I=L[0];F=L[1];if(F!=null){L=d("LSShape").toRecord(F);d("WALogger").ERROR(o());d("WALogger").WARN(n(),L.error_message);c("QPLUserFlow").endFailure(E,"ECHO_DECRYPTION_FAILURE",{annotations:{string:{error_description:L.error_message}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!1,"ECHO_DECRYPTION_FAILURE",{string:{error_description:L.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("echo-decryption-failure")}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_echo_end",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END,{instanceKey:D});F=I;if(F!=null){L=c("LSVec").toArray(F).map(function(a){return d("LSShape").toRecord(a).value});c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","uiUpdate",{events:[{tag:"RestoreNativeOp",value:{chatJid:g,echoMessages:c("LSVec").ofArray(L),hasMoreAfter:h,hasMoreBefore:J,isPointQuery:!0,nextMessageTimestampMsAfter:(i||(i=d("I64"))).of_string(H),nextMessageTimestampMsBefore:i.of_string(G),referenceTimestamp:z!=null?(i||(i=d("I64"))).to_string(z):void 0,requestId:C,taskSource:(j||(j=d("LSIntEnum"))).ofNumber((I=A)!=null?I:c("LSMEBTaskCreationSource").UNKNOWN),threadId:B}}]}))}}else{d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_protobuf_start",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START,{instanceKey:D});F=await e.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:B,encryptedMessagesWithProtobufs:c("LSVec").ofArray(N)})},"readwrite",void 0,void 0,f.id+":858");L=F[0];I=F[1];if(I!=null){e=d("LSShape").toRecord(I);d("WALogger").ERROR(m());d("WALogger").WARN(l(),e.error_message);c("QPLUserFlow").endFailure(E,"PROTOBUF_DECRYPTION_FAILURE",{annotations:{string:{error_description:e.error_message}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!1,"PROTOBUF_DECRYPTION_FAILURE",{string:{error_description:e.error_message}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("protobuf-decryption-failure")}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_protobuf_end",traceId:C});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END,{instanceKey:D});if(L!=null){F=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(L);c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","uiUpdate",{events:[{tag:"RestoreNativeOp",value:{chatJid:g,decryptedMessagesProtobufs:F,hasMoreAfter:h,hasMoreBefore:J,isPointQuery:!0,nextMessageTimestampMsAfter:(i||(i=d("I64"))).of_string(H),nextMessageTimestampMsBefore:i.of_string(G),referenceTimestamp:z!=null?(i||(i=d("I64"))).to_string(z):void 0,requestId:C,taskSource:(j||(j=d("LSIntEnum"))).ofNumber((I=A)!=null?I:c("LSMEBTaskCreationSource").UNKNOWN),threadId:B}}]}))}else{c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPTED_PROTOBUFS_NULL,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPTED_PROTOBUFS_NULL}},instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypted_protobufs_null",traceId:C});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"decrypted_protobufs_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}}c("QPLUserFlow").endSuccess(E,{annotations:{bool:{isEcho:N.length===0,isProtobuf:N.length>0}},instanceKey:D});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.success");return d("WAResultOrError").makeResult()}catch(b){d("WALogger").ERROR(k(),b);c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,errorStackTrace:(a=b.stack)!=null?a:""}},error:b,instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").DEPRECATED_makeError("runtime-error",b)}}g.pointRestoreQuery=y;g.messagePointQueryWithPersistence=a}),98);
__d("EncryptedBackupTaskFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5725");b=d("FalcoLoggerInternal").create("encrypted_backup_task_failure",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";f=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};var h=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{encryptedTransportMessage:e,metadata:d}}function b(a){return JSON.stringify([a.author,a.chat,a.externalId])}function e(a){a=JSON.parse(a);if(!Array.isArray(a))throw c("FBLogger")("labyrinth_web").mustfixThrow("Unable to parse msg id string as proper json");if(a.length!==3)throw c("FBLogger")("labyrinth_web").mustfixThrow("Parsed array should have 3 components");var b=d("WAJids").unsafeCoerceToUserJid(a[0]),e=d("WAJids").unsafeCoerceToChatJid(a[1]);a=d("WAStanzaUtils").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.entryOlderThan30Days=f;g.timestampOlderThan30Days=h;g.asBackupMessage=a;g.convertWAMsgIdToStringId=b;g.convertStringIdToWAMsgId=e}),98);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("encryption_version"),d[4]=d[2].get("epoch_anon_id"),d[5]=d[2].get("epoch_root_key"),d[6]=d[2].get("payload_key"),d[7]=c.createArray(),d[41]=(d[7].push(c.i64.cast([0,6])),d[7]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[8]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[8],void 0,d[4],d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!1:d[10]=!0,d[10]?c.resolve(d[11]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[11]=d[43]==null?"":d[43]}])},function(a){return d[12]=c.createArray(),d[41]=(d[12].push(c.i64.cast([0,6])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,d[5],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.resolve(d[16]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[16]=d[43]==null?"":d[43]}])},function(a){return d[17]=c.createArray(),d[41]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[6],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[21]=d[43]==null?"":d[43]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[22]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[22]==null?"":d[22],a[0]].join("")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[41]=(d[24].push(c.i64.cast([0,6])),d[24]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[25],void 0,d[23],d[24]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve(d[28]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[28]=d[43]==null?"":d[43]}])},function(a){return d[29]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[41]=c.createArray(),d[47]=(d[41].push(c.i64.cast([0,18])),d[41]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]!==void 0?c.sequence([function(a){return d[47]=c.i64.of_int32(d[42].length),c.i64.ge(d[47],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[50]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[50]].join("")),d[49]=c.createArray(),void 0!==void 0?d[51]=(d[49].push(void 0),d[49]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[50],d[49],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return d[43]=d[48]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[48]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[48]].join("")),d[47]=c.createArray(),void 0!==void 0?d[49]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[48],d[47],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(a){return c.blobs.neq(d[43],void 0)?d[44]=!0:d[44]=!1,d[44]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]!==void 0?d[46]=d[45]:d[46]="encodingfailed",d[30]=d[46]}]):c.resolve(d[30]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[31]=a[0],a})},function(e){return d[32]=new c.Map(),d[32].set("encryption_version",d[3]),d[32].set("epoch_anon_id",d[31]==null?"":d[31]),d[32].set("message_encryption_values",[d[11],d[29],d[16],d[29],d[21],d[29],d[28]].join("")),d[32].set("root_key_fingerprint",d[30]),d[32].set("backup_id",a[1]),d[33]=c.toJSON(d[32]),d[34]=new c.Map(),d[34].set("value_secret_ref",d[33]),d[35]=c.i64.of_float(Date.now()),d[36]=c.i64.random(),d[38]="Finishing execution. Execution time: ",d[39]=c.i64.to_string(c.i64.sub(d[35],d[0])),d[40]=" ms",d[37]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[37],d[38],d[37],d[39],d[37],d[40]].join("")),c.i64.eq(c.i64.mod_(d[36],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[41]=",",d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[38],d[41],d[39],d[41],d[40]].join(""),d[42],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[34],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSGetBlobFromInt64BE.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))};a.__nop_name__="LSGetBlobFromInt64BE";g["default"]=a}),98);
__d("LSHmac_v2.nop",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder","XPlatReactCrypto","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Subtle sign operation timeout; transaction blocked",j="Subtle import key operation timeout; transaction blocked",k=30*1e3;a=function(a,e,f,g){if(c("gkx")("12402"))try{a=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(new Uint8Array(f)).update(new Uint8Array(g)).finish();return(h||(h=b("Promise"))).resolve(c("LSResult")(d("PakeCpaceUtils").typedArrayToBuffer(a)))}catch(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",g==null?void 0:g.byteLength,!1);throw a}e=d("XPlatReactCrypto").subtleImportKey("raw",f,{hash:"SHA-256",name:"HMAC"},!1,["sign"]);return(c("justknobx")._("4025")?(h||(h=b("Promise"))).race([e,new(h||(h=b("Promise")))(function(a,b){return window.setTimeout(function(){return b(c("err")(j))},k)})]):e).then(function(a){a=d("XPlatReactCrypto").subtleSign("HMAC",a,g);return c("justknobx")._("4025")?(h||(h=b("Promise"))).race([a,new(h||(h=b("Promise")))(function(a,b){return window.setTimeout(function(){return b(c("err")(i))},k)})]):a}).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a))})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",g==null?void 0:g.byteLength,(a==null?void 0:a.message)===i||(a==null?void 0:a.message)===j);throw a})};a.__nop_name__="LSHmac_v2";g["default"]=a}),98);
__d("OcmfClientMap",["CryptoLogger","LSCryptoUtils","Promise","XPlatReactCrypto","gkx","requireDeferred","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("OcmfClientMap");a=function(a,e){e=c("gkx")("13930")?d("tweetnacl").hash(d("LSCryptoUtils").bufToUint8(e)):d("XPlatReactCrypto").subtleDigest("SHA-512",e);return(h||(h=b("Promise"))).all([e,i.load()]).then(function(b){var c=b[0];b=b[1];c=b.fromHash(new Uint8Array(c));b=b.scalarMult(new Uint8Array(a),c);return b.buffer})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["LSResult","OcmfClientMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return c("OcmfClientMap")(d,e).then(function(a){return c("LSResult")(a)})};a.__nop_name__="LSOcmfClientMap";g["default"]=a}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","WACryptoHkdfSync","XPlatReactCrypto","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function i(a){var b=a.length;return b%2!==0?"0"+a:a}function j(a){a=BigInt(a);var b=i(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function k(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function l(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function m(a,e,f){var g=new ArrayBuffer(0);if(c("gkx")("13860"))try{var i=d("WACryptoHkdfSync").hkdf(a,d("LSCryptoUtils").bufToUint8(g),d("LSCryptoUtils").bufToUint8(e.buffer),f);return(h||(h=b("Promise"))).resolve({_0:i})}catch(a){c("FBLogger")("labyrinth_web").mustfix("hkdf failed at OrderPreservingEncryption");throw a}return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:e.buffer,name:"HKDF",salt:g},a,f*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function n(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function o(a,e,f,g){var i=f.byteLength;if(i!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(l(i));var j=g.byteLength,o=function(a,b){var c=new Uint8Array(1+j),d=new Uint8Array(j-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(j>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");return(h||(h=b("Promise"))).all(Array.from(g).map(function(b,c){c=o(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return m(b,c,a).then(function(a){return n(a,e)})})).then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),k(a)._0])})}function e(a,b,c,d){d=j(d);return o(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=j;g.buildKeyLengthErrorMsg=l;g.encryptBigEndianBytes=o;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.nop",["CryptoLogger","I64","LSResult","OrderPreservingEncryption","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j){var k=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((i||(i=d("I64"))).to_int32(j),1,f,new Uint8Array(g)).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a.buffer))})["catch"](function(a){d("CryptoLogger").captureError(k,a).mustfix("OpeEncrypt_impl failed");throw a})};a.__nop_name__="LSOpeEncrypt";g["default"]=a}),98);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};a.__nop_name__="LSTruncateSortKey";g["default"]=a}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["EBEncryptMessageTypes","LSSymmetricEncryptionCreateDecryptedData.nop","MWEBODSEntityName.enum","MWFBLogger","ODS","QPLUserFlow","Random","SymmetricEncryptionCreateEncryptedData","WAArrayBufferUtils","WAErrorMessage","WAGetSafeQPLError","WAResultOrError","cr:20303","getErrorSafe","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Decrypted content is not equal"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - Either JS Decrypted or Rust Decrypted is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromJS is null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MISMATCH - ciphertextFromWasm failed with error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["'EB symmetric encryption comparison failed with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["EB symmetric encryption in JS failed with error: ",""]);n=function(){return a};return a}var o=c("qpl")._(521471468,"2968"),p=d("MWFBLogger").MWLogger.tags(["LSEncryption"]);function q(a,b,e){var f=d("Random").uint32();c("QPLUserFlow").start(o,{annotations:{string:{implementation:"js",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:f});return c("SymmetricEncryptionCreateEncryptedData")(a,b,e).then(function(a){c("QPLUserFlow").endSuccess(o,{instanceKey:f});return d("WAResultOrError").makeResult(a[0])}).catch(function(a){var b=c("getErrorSafe")(a);c("QPLUserFlow").endFailure(o,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:f});return d("WAResultOrError").makeError({error:b,type:"runtime-exception"})})}function r(a,e,f){if(b("cr:20303")==null)return Promise.resolve(d("WAResultOrError").makeError("skipped"));var g=d("Random").uint32();c("QPLUserFlow").start(o,{annotations:{string:{implementation:"rust",native_op_name:"LSSymmetricEncryptionCreateEncryptedData"}},instanceKey:g});return b("cr:20303").encryptMessage(d("EBEncryptMessageTypes").unsafeCastToSecretKey(a),d("EBEncryptMessageTypes").unsafeCastToAAD(e),d("EBEncryptMessageTypes").unsafeCastToPlaintext(f)).then(function(a){a.success===!1?c("QPLUserFlow").endFailure(o,a.error,{instanceKey:g}):c("QPLUserFlow").endSuccess(o,{instanceKey:g});return a}).catch(function(a){c("QPLUserFlow").endFailure(o,"runtime-exception",{annotations:{string:{error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(a)}},instanceKey:g});return d("WAResultOrError").makeError("runtime-exception")})}a=function(a,b,d,e,f){return q(d,e,f).then(function(g){if(g.success===!1){p.MUSTFIX(n(),String(g.error));return[void 0]}c("promiseDone")(s(d,e,f,g,a,b));return[g.value]})};async function s(a,b,c,e,f,g){c=await r(a,b,c);try{await t(f,g,a,b,e,c)}catch(a){p.MUSTFIX(m(),d("WAErrorMessage").maybeGetMessageFromError(a))}}async function t(a,b,e,f,g,m){if(m.success===!1&&m.error==="skipped")return;if(m.success===!1){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(l(),m.error);return}g=g.value;m=m.value;if(g==null){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(k());return}g=await c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g);a=await c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,m);b=g[0];e=a[0];if(b==null||e==null){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(j());return}if(d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(b,e)===!1){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"mismatch");p.MUSTFIX(i());return}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST,"match")}a.__nop_name__="LSSymmetricEncryptionCreateEncryptedData";g.default=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};a.__nop_name__="LSSymmetricEncryptionCreateEncryptedString";g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),d[3]=d[2].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[14]=d[2].get("epoch_anon_id"),d[15]=d[2].get("epoch_root_key"),d[16]=d[2].get("payload_key"),d[17]=c.createArray(),d[45]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[14],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[21]=d[47]==null?"":d[47]}])},function(a){return d[22]=c.createArray(),d[45]=(d[22].push(c.i64.cast([0,6])),d[22]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[23],void 0,d[15],d[22]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!1:d[25]=!0,d[25]?c.resolve(d[26]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[26]=d[47]==null?"":d[47]}])},function(a){return d[27]=c.createArray(),d[45]=(d[27].push(c.i64.cast([0,6])),d[27]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[28],void 0,d[16],d[27]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[31]=d[47]==null?"":d[47]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[32]==null?"":d[32],a[1]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[45]=(d[34].push(c.i64.cast([0,6])),d[34]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[35],void 0,d[33],d[34]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve(d[38]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[38]=d[47]==null?"":d[47]}])},function(a){return d[39]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[45]=c.createArray(),d[51]=(d[45].push(c.i64.cast([0,18])),d[45]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?c.sequence([function(a){return d[51]=c.i64.of_int32(d[46].length),c.i64.ge(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[54]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[54]].join("")),d[53]=c.createArray(),void 0!==void 0?d[55]=(d[53].push(void 0),d[53]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[54],d[53],c.i64.cast([0,3]))},function(a){return d[52]=void 0}])},function(a){return d[47]=d[52]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[52]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[53]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[52],d[51],c.i64.cast([0,3]))},function(a){return d[47]=void 0}])},function(a){return c.blobs.neq(d[47],void 0)?d[48]=!0:d[48]=!1,d[48]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[47]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]!==void 0?d[50]=d[49]:d[50]="encodingfailed",d[40]=d[50]}]):c.resolve(d[40]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[41]=a[0],a})},function(b){return d[42]=new c.Map(),d[42].set("encryption_version",d[13]),d[42].set("epoch_anon_id",d[41]==null?"":d[41]),d[42].set("message_encryption_values",[d[21],d[39],d[26],d[39],d[31],d[39],d[38]].join("")),d[42].set("root_key_fingerprint",d[40]),d[42].set("backup_id",a[0]),d[43]=c.toJSON(d[42]),d[44]=new c.Map(),d[44].set("encrypted_message_payload",d[4]),d[44].set("value_secret_ref",d[43]),b=[d[44],void 0],d[5]=b[0],d[6]=b[1],b}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1],e))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSEncryptedBackupsMessagesRangeQueryDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({BEFORE:1,AFTER:2});f["default"]=a}),66);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,d[5]=void 0,a[0]?c.resolve(0):(d[15]=void 0,c.i64.neq(d[15],void 0)?c.sequence([function(a){return c.count(c.db.table(169).fetch([[[d[15]]]])).then(function(a){return d[16]=a})},function(a){return c.i64.le(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[15]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[26]=new c.Map(),d[26].set("error_msg","Expected a nonempty query result"),d[26].set("code",c.i64.cast([0,3])),d[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[27]=c.createArray(),d[28]=(d[27].push(d[26]),d[27]),e=[void 0,d[27]],d[22]=e[0],d[23]=e[1],e):(b=a.item,d[26]=new c.Map(),d[26].set("epoch_id",b.epochId),d[26].set("backup_id",b.backupId),d[26].set("epoch_anon_id_blob",b.epochAnonIdBlob),d[26].set("epoch_root_key_blob",b.epochRootKeyBlob),d[26].set("epoch_status",b.epochStatus),d[26].set("epoch_head",b.epochHead),d[26].set("authority_level",b.authorityLevel),e=[d[26],void 0],d[22]=e[0],d[23]=e[1],e)})},function(a){return d[25]=new c.Map(),d[25].set("value",d[22]),d[25].set("errors",d[23]),d[17]=d[25]}]):c.resolve((d[22]=new c.Map(),d[22].set("error_msg","Expected at most one result"),d[22].set("code",c.i64.cast([0,4])),d[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[23]),d[17]=d[24]))},function(a){return d[18]=d[17].get("value"),d[18]!==void 0?(d[22]=d[18].get("epoch_id"),d[23]=d[18].get("backup_id"),d[24]=d[18].get("epoch_anon_id_blob"),d[25]=d[18].get("epoch_root_key_blob"),d[26]=d[18].get("epoch_status"),d[27]=d[18].get("epoch_head"),d[28]=d[18].get("authority_level"),d[29]=d[17],d[19]=d[29]):(d[22]=d[17].get("errors"),d[23]=d[17].get("errors"),d[24]=new c.Map(),d[24].set("value",void 0),d[24].set("errors",d[22]),d[19]=d[24]),d[20]=d[19].get("value"),d[20]!==void 0?(d[22]=d[20].get("epoch_id"),d[23]=d[20].get("backup_id"),d[24]=d[20].get("epoch_anon_id_blob"),d[25]=d[20].get("epoch_root_key_blob"),d[26]=d[20].get("epoch_status"),d[27]=d[20].get("epoch_head"),d[28]=d[20].get("authority_level"),d[2]=c.blobs.to_string(d[24]),d[3]=d[22],d[4]=d[25],c.blobs.neq(d[27],void 0)?d[5]=d[27]:0,d[21]=!0):(d[22]=d[19].get("errors"),d[23]=d[19].get("errors"),d[21]=!1)}]):c.resolve())},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.sequence([function(b){return d[15]=void 0,d[16]="",d[17]=void 0,d[18]=void 0,c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[20]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[20].length],[0,d[16].length])?d[19]=d[20]>d[16]:d[19]=c.i64.gt([0,d[20].length],[0,d[16].length]),d[19]?(d[15]=a.epochId,d[16]=d[20],d[17]=a.epochRootKeyBlob,d[18]=a.epochHead):0})},function(a){return c.i64.neq(d[15],void 0)?(d[2]=d[16],d[3]=d[15],d[4]=d[17],c.blobs.neq(d[18],void 0)?d[5]=d[18]:0,d[19]=c.i64.of_float(Date.now()),0):0}])},function(a){return d[11]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[11],void 0)?(c.blobs.neq(d[4],void 0)?(d[19]=new c.Map(),d[19].set("epoch_id",d[3]),d[19].set("epoch_root_key",d[4]),d[19].set("epoch_anon_id",d[11]),d[19].set("epoch_head",d[5]),d[20]=new c.Map(),d[20].set("epoch_keys",d[19]),a=[d[20],void 0],d[17]=a[0],d[18]=a[1],a):(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,402])),d[19].set("error_message","failed to query latest epoch"),d[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[19]],d[17]=a[0],d[18]=a[1],a),a=[d[17],d[18]],d[15]=a[0],d[16]=a[1],a):(d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,403])),d[17].set("error_message","failed to query latest epoch"),d[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[17]],d[15]=a[0],d[16]=a[1],a),a=[d[15],d[16]],d[6]=a[0],d[7]=a[1],a):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,400])),d[15].set("error_message","failed to query latest epoch"),d[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[15]],d[6]=a[0],d[7]=a[1],a),d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[6],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure";a.__tables__=["secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLoadThreadPkFromThreadId","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] Beginning execution."),d[10]=c.i64.gt(a[1],c.i64.cast([0,0]))&&c.i64.gt(a[5],c.i64.cast([0,0])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[14]=new c.Map(),d[14].set("error_msg","Expected a nonempty query result"),d[14].set("code",c.i64.cast([0,3])),d[14].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[15]=c.createArray(),d[16]=(d[15].push(d[14]),d[15]),e=[void 0,d[15]],d[1]=e[0],d[2]=e[1],e):(b=a.item,d[14]=new c.Map(),d[14].set("backup_id",b.backupId),d[14].set("device_public_key_blob",b.devicePublicKeyBlob),d[14].set("device_private_key_blob",b.devicePrivateKeyBlob),d[14].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[14].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[14].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[14].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[14].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[14].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[14].set("orf_client_state_v2_blob",void 0),d[14].set("orf_v2_authority_level",void 0),d[14].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[14].set("device_id",b.deviceId),d[14].set("backup_tenancy",b.backupTenancy),d[14].set("encryption_version",b.encryptionVersion),d[14].set("revision_version",b.revisionVersion),d[14].set("initialize_restore_result",void 0),d[14].set("device_creation_timestamp_sec",void 0),d[14].set("authority_level",b.authorityLevel),e=[d[14],void 0],d[1]=e[0],d[2]=e[1],e)})},function(e){return d[4]=new c.Map(),d[4].set("value",d[1]),d[4].set("errors",d[2]),d[5]=d[4].get("value"),d[5]!==void 0?c.sequence([function(e){return d[14]=d[5].get("backup_id"),d[15]=d[5].get("device_public_key_blob"),d[16]=d[5].get("device_private_key_blob"),d[17]=d[5].get("epoch_storage_public_key_blob"),d[18]=d[5].get("epoch_storage_private_key_blob"),d[19]=d[5].get("epoch_auth_public_key_blob"),d[20]=d[5].get("epoch_auth_private_key_blob"),d[21]=d[5].get("mailbox_root_key_blob"),d[22]=d[5].get("ocmf_client_state_blob"),d[23]=d[5].get("orf_client_state_v2_blob"),d[24]=d[5].get("orf_v2_authority_level"),d[25]=d[5].get("oblivious_validation_token_blob"),d[26]=d[5].get("device_id"),d[27]=d[5].get("backup_tenancy"),d[28]=d[5].get("encryption_version"),d[29]=d[5].get("revision_version"),d[30]=d[5].get("initialize_restore_result"),d[31]=d[5].get("device_creation_timestamp_sec"),d[32]=d[5].get("authority_level"),c.i64.neq(d[26],void 0)?c.sequence([function(a){return d[34]=void 0,c.i64.neq(d[34],void 0)?c.resolve(d[35]=d[34]):c.sequence([function(a){return d[40]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[41]?d[50]=(d[40].push(c.i64.cast([0,0])),d[40]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[50]=(d[40].push(c.i64.cast([0,2])),d[40]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[50]=(d[40].push(c.i64.cast([0,3])),d[40]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[50]=(d[40].push(c.i64.cast([0,4])),d[40]):0,d[45]=c.createArray(),d[46]=c.i64.of_int32(d[40].length),c.i64.gt(d[46],c.i64.cast([0,0]))?c.loopAsync(d[46],function(a){return d[50]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[40],d[50]).then(function(a){return a=a,d[51]=a[0],d[52]=a[1],a})},function(a){return d[53]=(d[45].push(d[51]),d[45])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[50]=c.createArray(),d[51]=c.i64.of_int32(d[45].length),c.i64.gt(d[51],c.i64.cast([0,0]))?c.loopAsync(d[51],function(a){return d[53]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[45],d[53]).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[56]=(d[50].push(c.i64.to_string(d[54])),d[50])}])}):c.resolve()},function(a){return d[52]=d[50].join(","),d[47]=d[52]}])},function(a){return d[45].some(function(a){return c.i64.eq(d[28],a)})?d[48]=d[28]:d[48]=void 0,c.i64.neq(d[48],void 0)?d[49]=d[48]:d[49]=void 0,d[35]=d[49]}])},function(e){return c.i64.neq(d[35],void 0)?d[36]=d[35]:d[36]=c.i64.cast([0,0]),c.i64.neq(d[27],void 0)?d[37]=d[27]:d[37]=c.i64.cast([0,1]),c.storedProcedure(b("LSLoadThreadPkFromThreadId"),a[0]).then(function(a){return a=a,d[38]=a[0],d[39]=a[1],a})},function(e){return c.i64.neq(d[38],void 0)?d[10]?c.sequence([function(e){return c.i64.eq(d[37],c.i64.cast([0,3]))?d[40]=c.i64.cast([0,4]):d[40]=c.i64.cast([0,0]),d[41]=new c.Map(),d[41].set("act_thread_id",a[0]),d[41].set("tam_thread_subtype",d[40]),d[41].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=new c.Map(),d[44].set("ocmf_client_state_blob",d[42]==null?"":d[42]),d[44].set("mailbox_root_key",d[43]==null?"":d[43]),d[45]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[56]=(d[45].push(a.epochId),d[45])})},function(a){return d[54]="Queried locally available epochs. Count: ",d[46]=c.i64.of_int32(d[45].length),d[55]=c.i64.to_string(d[46]),d[47]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[47],d[54],d[47],d[55]].join("")),c.resolve()},function(e){return d[48]=new c.Map(),d[48].set("device_id",d[26]),d[48].set("raw_tokens",d[44]),d[48].set("locally_available_epochs",d[45]),d[49]=new c.Map(),d[49].set("reference_timestamp",a[2]),d[49].set("server_thread_key",void 0),d[49].set("device_context",d[48]),d[49].set("source",a[6]),d[50]=new c.Map(),d[50].set("restore_context",d[41]),d[50].set("success",d[49]),d[51]=d[50].get("restore_context"),d[52]=d[51].get("act_thread_id"),d[53]=c.toJSON(d[50]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[52]].join(""),c.i64.cast([0,50031]),d[53],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.i64.gt(a[1],c.i64.cast([0,0]))?c.sequence([function(e){return c.i64.eq(d[37],c.i64.cast([0,3]))?d[40]=c.i64.cast([0,4]):d[40]=c.i64.cast([0,0]),a[7]===!0?d[41]=!0:d[41]=!1,d[42]=new c.Map(),d[42].set("act_thread_id",a[0]),d[42].set("request_id",a[4]),d[42].set("tam_thread_subtype",d[40]),d[42].set("reference_id",void 0),d[42].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=new c.Map(),d[45].set("ocmf_client_state_blob",d[43]==null?"":d[43]),d[45].set("mailbox_root_key",d[44]==null?"":d[44]),d[46]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[57]=(d[46].push(a.epochId),d[46])})},function(a){return d[55]="Queried locally available epochs. Count: ",d[47]=c.i64.of_int32(d[46].length),d[56]=c.i64.to_string(d[47]),d[48]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[48],d[55],d[48],d[56]].join("")),c.resolve()},function(e){return d[49]=new c.Map(),d[49].set("device_id",d[26]),d[49].set("raw_tokens",d[45]),d[49].set("locally_available_epochs",d[46]),d[50]=new c.Map(),d[50].set("reference_timestamp",a[2]),d[50].set("direction",c.i64.cast([0,1])),d[50].set("server_thread_key",void 0),d[50].set("device_context",d[49]),d[50].set("source",a[6]),d[50].set("include_offset",d[41]),d[51]=new c.Map(),d[51].set("restore_context",d[42]),d[51].set("success",d[50]),d[51].set("queue_name",void 0),d[52]=d[51].get("queue_name"),d[52]!==void 0?d[53]=d[52]:(d[57]=d[51].get("restore_context"),d[58]=d[57].get("act_thread_id"),d[53]=["encrypted_backups_restore",":",d[58]].join("")),d[54]=c.toJSON(d[51]),c.storedProcedure(b("LSIssueNewTask"),d[53],c.i64.cast([0,50030]),d[54],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return c.i64.eq(d[37],c.i64.cast([0,3]))?d[40]=c.i64.cast([0,4]):d[40]=c.i64.cast([0,0]),a[7]===!0?d[41]=!0:d[41]=!1,d[42]=new c.Map(),d[42].set("act_thread_id",a[0]),d[42].set("request_id",a[4]),d[42].set("tam_thread_subtype",d[40]),d[42].set("reference_id",void 0),d[42].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=new c.Map(),d[45].set("ocmf_client_state_blob",d[43]==null?"":d[43]),d[45].set("mailbox_root_key",d[44]==null?"":d[44]),d[46]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[57]=(d[46].push(a.epochId),d[46])})},function(a){return d[55]="Queried locally available epochs. Count: ",d[47]=c.i64.of_int32(d[46].length),d[56]=c.i64.to_string(d[47]),d[48]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[48],d[55],d[48],d[56]].join("")),c.resolve()},function(e){return d[49]=new c.Map(),d[49].set("device_id",d[26]),d[49].set("raw_tokens",d[45]),d[49].set("locally_available_epochs",d[46]),d[50]=new c.Map(),d[50].set("reference_timestamp",a[2]),d[50].set("direction",c.i64.cast([0,2])),d[50].set("server_thread_key",void 0),d[50].set("device_context",d[49]),d[50].set("source",a[6]),d[50].set("include_offset",d[41]),d[51]=new c.Map(),d[51].set("restore_context",d[42]),d[51].set("success",d[50]),d[51].set("queue_name",void 0),d[52]=d[51].get("queue_name"),d[52]!==void 0?d[53]=d[52]:(d[57]=d[51].get("restore_context"),d[58]=d[57].get("act_thread_id"),d[53]=["encrypted_backups_restore",":",d[58]].join("")),d[54]=c.toJSON(d[51]),c.storedProcedure(b("LSIssueNewTask"),d[53],c.i64.cast([0,50030]),d[54],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return d[10]?(d[42]=new c.Map(),d[42].set("error_code",c.i64.cast([0,100])),d[42].set("error_message",""),d[42].set("stored_procedure","issueMessageRangeQueryTask"),d[43]=new c.Map(),d[43].set("act_thread_id",a[0]),d[44]=new c.Map(),d[44].set("restore_context",d[43]),d[44].set("failure",d[42]),d[45]=d[44].get("restore_context"),d[46]=d[45].get("act_thread_id"),d[47]=c.toJSON(d[44]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[46]].join(""),c.i64.cast([0,50031]),d[47],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[54]=new c.Map(),d[54].set("error_msg","Expected a nonempty query result"),d[54].set("code",c.i64.cast([0,3])),d[54].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[55]=c.createArray(),d[56]=(d[55].push(d[54]),d[55]),e=[void 0,d[55]],d[42]=e[0],d[43]=e[1],e):(b=a.item,d[54]=new c.Map(),d[54].set("backup_id",b.backupId),d[54].set("device_public_key_blob",b.devicePublicKeyBlob),d[54].set("device_private_key_blob",b.devicePrivateKeyBlob),d[54].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[54].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[54].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[54].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[54].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[54].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[54].set("orf_client_state_v2_blob",void 0),d[54].set("orf_v2_authority_level",void 0),d[54].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[54].set("device_id",b.deviceId),d[54].set("backup_tenancy",b.backupTenancy),d[54].set("encryption_version",b.encryptionVersion),d[54].set("revision_version",b.revisionVersion),d[54].set("initialize_restore_result",void 0),d[54].set("device_creation_timestamp_sec",void 0),d[54].set("authority_level",b.authorityLevel),e=[d[54],void 0],d[42]=e[0],d[43]=e[1],e)})},function(a){return d[45]=new c.Map(),d[45].set("value",d[42]),d[45].set("errors",d[43]),d[46]=d[45].get("value"),d[46]!==void 0?c.sequence([function(a){return d[54]=d[46].get("backup_id"),d[55]=d[46].get("device_public_key_blob"),d[56]=d[46].get("device_private_key_blob"),d[57]=d[46].get("epoch_storage_public_key_blob"),d[58]=d[46].get("epoch_storage_private_key_blob"),d[59]=d[46].get("epoch_auth_public_key_blob"),d[60]=d[46].get("epoch_auth_private_key_blob"),d[61]=d[46].get("mailbox_root_key_blob"),d[62]=d[46].get("ocmf_client_state_blob"),d[63]=d[46].get("orf_client_state_v2_blob"),d[64]=d[46].get("orf_v2_authority_level"),d[65]=d[46].get("oblivious_validation_token_blob"),d[66]=d[46].get("device_id"),d[67]=d[46].get("backup_tenancy"),d[68]=d[46].get("encryption_version"),d[69]=d[46].get("revision_version"),d[70]=d[46].get("initialize_restore_result"),d[71]=d[46].get("device_creation_timestamp_sec"),d[72]=d[46].get("authority_level"),c.i64.neq(d[66],void 0)?c.sequence([function(a){return d[74]=void 0,c.i64.neq(d[74],void 0)?c.resolve(d[75]=d[74]):c.sequence([function(a){return d[78]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[79]?d[88]=(d[78].push(c.i64.cast([0,0])),d[78]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[80]?d[88]=(d[78].push(c.i64.cast([0,2])),d[78]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]?d[88]=(d[78].push(c.i64.cast([0,3])),d[78]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[82]?d[88]=(d[78].push(c.i64.cast([0,4])),d[78]):0,d[83]=c.createArray(),d[84]=c.i64.of_int32(d[78].length),c.i64.gt(d[84],c.i64.cast([0,0]))?c.loopAsync(d[84],function(a){return d[88]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[78],d[88]).then(function(a){return a=a,d[89]=a[0],d[90]=a[1],a})},function(a){return d[91]=(d[83].push(d[89]),d[83])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[88]=c.createArray(),d[89]=c.i64.of_int32(d[83].length),c.i64.gt(d[89],c.i64.cast([0,0]))?c.loopAsync(d[89],function(a){return d[91]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[83],d[91]).then(function(a){return a=a,d[92]=a[0],d[93]=a[1],a})},function(a){return d[94]=(d[88].push(c.i64.to_string(d[92])),d[88])}])}):c.resolve()},function(a){return d[90]=d[88].join(","),d[85]=d[90]}])},function(a){return d[83].some(function(a){return c.i64.eq(d[68],a)})?d[86]=d[68]:d[86]=void 0,c.i64.neq(d[86],void 0)?d[87]=d[86]:d[87]=void 0,d[75]=d[87]}])},function(a){return c.i64.neq(d[75],void 0)?d[76]=d[75]:d[76]=c.i64.cast([0,0]),c.i64.neq(d[67],void 0)?d[77]=d[67]:d[77]=c.i64.cast([0,1]),d[73]=d[66]}]):c.resolve(d[73]=void 0)},function(a){return d[47]=d[73]}]):c.resolve((d[54]=d[45].get("errors"),d[55]=d[45].get("errors"),d[47]=void 0))},function(e){return d[48]=new c.Map(),d[48].set("error_code",c.i64.cast([0,100])),d[48].set("error_message",void 0==null?"":void 0),d[48].set("stored_procedure","issueMessageRangeQueryTask"),d[49]=new c.Map(),d[49].set("act_thread_id",a[0]),d[49].set("source",a[6]),d[49].set("restore_operation_type",c.i64.cast([0,2])),d[49].set("request_id",a[4]),d[49].set("device_id",d[47]),d[50]=new c.Map(),d[50].set("restore_context",d[49]),d[50].set("failure",d[48]),d[51]=d[50].get("queue_name"),d[51]!==void 0?d[52]=d[51]:(d[54]=d[50].get("restore_context"),d[55]=d[54].get("act_thread_id"),d[52]=["encrypted_backups_restore",":",d[55]].join("")),d[53]=c.toJSON(d[50]),c.storedProcedure(b("LSIssueNewTask"),d[52],c.i64.cast([0,50030]),d[53],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[41]="threak pk not found for jid",d[41]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[41]].join("")),d[42]=c.createArray(),a[4]!==void 0?d[43]=(d[42].push(a[4]),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[41],d[42],c.i64.cast([0,3]))):c.resolve()},function(a){return d[10]?d[40]=c.i64.cast([0,5]):d[40]=c.i64.cast([0,2])}])},function(a){return d[33]=!0}]):c.sequence([function(e){return d[10]?(d[36]=new c.Map(),d[36].set("error_code",c.i64.cast([0,1])),d[36].set("error_message",""),d[36].set("stored_procedure","issueMessageRangeQueryTask"),d[37]=new c.Map(),d[37].set("act_thread_id",a[0]),d[38]=new c.Map(),d[38].set("restore_context",d[37]),d[38].set("failure",d[36]),d[39]=d[38].get("restore_context"),d[40]=d[39].get("act_thread_id"),d[41]=c.toJSON(d[38]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[40]].join(""),c.i64.cast([0,50031]),d[41],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[48]=new c.Map(),d[48].set("error_msg","Expected a nonempty query result"),d[48].set("code",c.i64.cast([0,3])),d[48].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[49]=c.createArray(),d[50]=(d[49].push(d[48]),d[49]),e=[void 0,d[49]],d[36]=e[0],d[37]=e[1],e):(b=a.item,d[48]=new c.Map(),d[48].set("backup_id",b.backupId),d[48].set("device_public_key_blob",b.devicePublicKeyBlob),d[48].set("device_private_key_blob",b.devicePrivateKeyBlob),d[48].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[48].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[48].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[48].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[48].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[48].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[48].set("orf_client_state_v2_blob",void 0),d[48].set("orf_v2_authority_level",void 0),d[48].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[48].set("device_id",b.deviceId),d[48].set("backup_tenancy",b.backupTenancy),d[48].set("encryption_version",b.encryptionVersion),d[48].set("revision_version",b.revisionVersion),d[48].set("initialize_restore_result",void 0),d[48].set("device_creation_timestamp_sec",void 0),d[48].set("authority_level",b.authorityLevel),e=[d[48],void 0],d[36]=e[0],d[37]=e[1],e)})},function(a){return d[39]=new c.Map(),d[39].set("value",d[36]),d[39].set("errors",d[37]),d[40]=d[39].get("value"),d[40]!==void 0?c.sequence([function(a){return d[48]=d[40].get("backup_id"),d[49]=d[40].get("device_public_key_blob"),d[50]=d[40].get("device_private_key_blob"),d[51]=d[40].get("epoch_storage_public_key_blob"),d[52]=d[40].get("epoch_storage_private_key_blob"),d[53]=d[40].get("epoch_auth_public_key_blob"),d[54]=d[40].get("epoch_auth_private_key_blob"),d[55]=d[40].get("mailbox_root_key_blob"),d[56]=d[40].get("ocmf_client_state_blob"),d[57]=d[40].get("orf_client_state_v2_blob"),d[58]=d[40].get("orf_v2_authority_level"),d[59]=d[40].get("oblivious_validation_token_blob"),d[60]=d[40].get("device_id"),d[61]=d[40].get("backup_tenancy"),d[62]=d[40].get("encryption_version"),d[63]=d[40].get("revision_version"),d[64]=d[40].get("initialize_restore_result"),d[65]=d[40].get("device_creation_timestamp_sec"),d[66]=d[40].get("authority_level"),c.i64.neq(d[60],void 0)?c.sequence([function(a){return d[68]=void 0,c.i64.neq(d[68],void 0)?c.resolve(d[69]=d[68]):c.sequence([function(a){return d[72]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[73]?d[82]=(d[72].push(c.i64.cast([0,0])),d[72]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[74]?d[82]=(d[72].push(c.i64.cast([0,2])),d[72]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[75]?d[82]=(d[72].push(c.i64.cast([0,3])),d[72]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[76]?d[82]=(d[72].push(c.i64.cast([0,4])),d[72]):0,d[77]=c.createArray(),d[78]=c.i64.of_int32(d[72].length),c.i64.gt(d[78],c.i64.cast([0,0]))?c.loopAsync(d[78],function(a){return d[82]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[72],d[82]).then(function(a){return a=a,d[83]=a[0],d[84]=a[1],a})},function(a){return d[85]=(d[77].push(d[83]),d[77])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[82]=c.createArray(),d[83]=c.i64.of_int32(d[77].length),c.i64.gt(d[83],c.i64.cast([0,0]))?c.loopAsync(d[83],function(a){return d[85]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[77],d[85]).then(function(a){return a=a,d[86]=a[0],d[87]=a[1],a})},function(a){return d[88]=(d[82].push(c.i64.to_string(d[86])),d[82])}])}):c.resolve()},function(a){return d[84]=d[82].join(","),d[79]=d[84]}])},function(a){return d[77].some(function(a){return c.i64.eq(d[62],a)})?d[80]=d[62]:d[80]=void 0,c.i64.neq(d[80],void 0)?d[81]=d[80]:d[81]=void 0,d[69]=d[81]}])},function(a){return c.i64.neq(d[69],void 0)?d[70]=d[69]:d[70]=c.i64.cast([0,0]),c.i64.neq(d[61],void 0)?d[71]=d[61]:d[71]=c.i64.cast([0,1]),d[67]=d[60]}]):c.resolve(d[67]=void 0)},function(a){return d[41]=d[67]}]):c.resolve((d[48]=d[39].get("errors"),d[49]=d[39].get("errors"),d[41]=void 0))},function(e){return d[42]=new c.Map(),d[42].set("error_code",c.i64.cast([0,1])),d[42].set("error_message",void 0==null?"":void 0),d[42].set("stored_procedure","issueMessageRangeQueryTask"),d[43]=new c.Map(),d[43].set("act_thread_id",a[0]),d[43].set("source",a[6]),d[43].set("restore_operation_type",c.i64.cast([0,2])),d[43].set("request_id",a[4]),d[43].set("device_id",d[41]),d[44]=new c.Map(),d[44].set("restore_context",d[43]),d[44].set("failure",d[42]),d[45]=d[44].get("queue_name"),d[45]!==void 0?d[46]=d[45]:(d[48]=d[44].get("restore_context"),d[49]=d[48].get("act_thread_id"),d[46]=["encrypted_backups_restore",":",d[49]].join("")),d[47]=c.toJSON(d[44]),c.storedProcedure(b("LSIssueNewTask"),d[46],c.i64.cast([0,50030]),d[47],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[35]="backup not found",d[35]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[35]].join("")),d[36]=c.createArray(),a[4]!==void 0?d[37]=(d[36].push(a[4]),d[36]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[35],d[36],c.i64.cast([0,3]))):c.resolve()},function(a){return d[10]?d[34]=c.i64.cast([0,5]):d[34]=c.i64.cast([0,2]),d[33]=!1}])},function(a){return d[6]=d[33]}]):c.sequence([function(e){return d[14]=d[4].get("errors"),d[15]=d[4].get("errors"),d[10]?(d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,1])),d[18].set("error_message",""),d[18].set("stored_procedure","issueMessageRangeQueryTask"),d[19]=new c.Map(),d[19].set("act_thread_id",a[0]),d[20]=new c.Map(),d[20].set("restore_context",d[19]),d[20].set("failure",d[18]),d[21]=d[20].get("restore_context"),d[22]=d[21].get("act_thread_id"),d[23]=c.toJSON(d[20]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[22]].join(""),c.i64.cast([0,50031]),d[23],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[30]=new c.Map(),d[30].set("error_msg","Expected a nonempty query result"),d[30].set("code",c.i64.cast([0,3])),d[30].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[31]=c.createArray(),d[32]=(d[31].push(d[30]),d[31]),e=[void 0,d[31]],d[18]=e[0],d[19]=e[1],e):(b=a.item,d[30]=new c.Map(),d[30].set("backup_id",b.backupId),d[30].set("device_public_key_blob",b.devicePublicKeyBlob),d[30].set("device_private_key_blob",b.devicePrivateKeyBlob),d[30].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[30].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[30].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[30].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[30].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[30].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[30].set("orf_client_state_v2_blob",void 0),d[30].set("orf_v2_authority_level",void 0),d[30].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[30].set("device_id",b.deviceId),d[30].set("backup_tenancy",b.backupTenancy),d[30].set("encryption_version",b.encryptionVersion),d[30].set("revision_version",b.revisionVersion),d[30].set("initialize_restore_result",void 0),d[30].set("device_creation_timestamp_sec",void 0),d[30].set("authority_level",b.authorityLevel),e=[d[30],void 0],d[18]=e[0],d[19]=e[1],e)})},function(a){return d[21]=new c.Map(),d[21].set("value",d[18]),d[21].set("errors",d[19]),d[22]=d[21].get("value"),d[22]!==void 0?c.sequence([function(a){return d[30]=d[22].get("backup_id"),d[31]=d[22].get("device_public_key_blob"),d[32]=d[22].get("device_private_key_blob"),d[33]=d[22].get("epoch_storage_public_key_blob"),d[34]=d[22].get("epoch_storage_private_key_blob"),d[35]=d[22].get("epoch_auth_public_key_blob"),d[36]=d[22].get("epoch_auth_private_key_blob"),d[37]=d[22].get("mailbox_root_key_blob"),d[38]=d[22].get("ocmf_client_state_blob"),d[39]=d[22].get("orf_client_state_v2_blob"),d[40]=d[22].get("orf_v2_authority_level"),d[41]=d[22].get("oblivious_validation_token_blob"),d[42]=d[22].get("device_id"),d[43]=d[22].get("backup_tenancy"),d[44]=d[22].get("encryption_version"),d[45]=d[22].get("revision_version"),d[46]=d[22].get("initialize_restore_result"),d[47]=d[22].get("device_creation_timestamp_sec"),d[48]=d[22].get("authority_level"),c.i64.neq(d[42],void 0)?c.sequence([function(a){return d[50]=void 0,c.i64.neq(d[50],void 0)?c.resolve(d[51]=d[50]):c.sequence([function(a){return d[54]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[64]=(d[54].push(c.i64.cast([0,0])),d[54]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[64]=(d[54].push(c.i64.cast([0,2])),d[54]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[57]?d[64]=(d[54].push(c.i64.cast([0,3])),d[54]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[58]?d[64]=(d[54].push(c.i64.cast([0,4])),d[54]):0,d[59]=c.createArray(),d[60]=c.i64.of_int32(d[54].length),c.i64.gt(d[60],c.i64.cast([0,0]))?c.loopAsync(d[60],function(a){return d[64]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[54],d[64]).then(function(a){return a=a,d[65]=a[0],d[66]=a[1],a})},function(a){return d[67]=(d[59].push(d[65]),d[59])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[64]=c.createArray(),d[65]=c.i64.of_int32(d[59].length),c.i64.gt(d[65],c.i64.cast([0,0]))?c.loopAsync(d[65],function(a){return d[67]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[59],d[67]).then(function(a){return a=a,d[68]=a[0],d[69]=a[1],a})},function(a){return d[70]=(d[64].push(c.i64.to_string(d[68])),d[64])}])}):c.resolve()},function(a){return d[66]=d[64].join(","),d[61]=d[66]}])},function(a){return d[59].some(function(a){return c.i64.eq(d[44],a)})?d[62]=d[44]:d[62]=void 0,c.i64.neq(d[62],void 0)?d[63]=d[62]:d[63]=void 0,d[51]=d[63]}])},function(a){return c.i64.neq(d[51],void 0)?d[52]=d[51]:d[52]=c.i64.cast([0,0]),c.i64.neq(d[43],void 0)?d[53]=d[43]:d[53]=c.i64.cast([0,1]),d[49]=d[42]}]):c.resolve(d[49]=void 0)},function(a){return d[23]=d[49]}]):c.resolve((d[30]=d[21].get("errors"),d[31]=d[21].get("errors"),d[23]=void 0))},function(e){return d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,1])),d[24].set("error_message",void 0==null?"":void 0),d[24].set("stored_procedure","issueMessageRangeQueryTask"),d[25]=new c.Map(),d[25].set("act_thread_id",a[0]),d[25].set("source",a[6]),d[25].set("restore_operation_type",c.i64.cast([0,2])),d[25].set("request_id",a[4]),d[25].set("device_id",d[23]),d[26]=new c.Map(),d[26].set("restore_context",d[25]),d[26].set("failure",d[24]),d[27]=d[26].get("queue_name"),d[27]!==void 0?d[28]=d[27]:(d[30]=d[26].get("restore_context"),d[31]=d[30].get("act_thread_id"),d[28]=["encrypted_backups_restore",":",d[31]].join("")),d[29]=c.toJSON(d[26]),c.storedProcedure(b("LSIssueNewTask"),d[28],c.i64.cast([0,50030]),d[29],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[17]="backup not found",d[17]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[17]].join("")),d[18]=c.createArray(),a[4]!==void 0?d[19]=(d[18].push(a[4]),d[18]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[17],d[18],c.i64.cast([0,3]))):c.resolve()},function(a){return d[10]?d[16]=c.i64.cast([0,5]):d[16]=c.i64.cast([0,2]),d[6]=!1}])},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[11]="Finishing execution. Execution time: ",d[12]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[13]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ",d[9],d[11],d[9],d[12],d[9],d[13]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[14]=",",d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",[d[11],d[14],d[12],d[14],d[13]].join(""),d[15],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTaskStoredProcedure",["LSIssueMessageRangeQueryTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageRangeQueryTask"),e.threadId,e.numMessages,e.startSortKey,e.isPointQuery,e.traceId,e.newerNumMessages,e.source,e.includeOffset);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["ReQL"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e){b=await d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===c&&e===b}));if(b.length===0)return Promise.resolve([void 0,void 0,!1]);a=b[0];return Promise.resolve([a.messagePayload,a.messageTimestampMs,!1])};a.__nop_name__="LSQueryLocalPersistenceStoreForBackup";g.default=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["ReQL"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e,f){b=await d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,d=a.threadId;a=a.toplevelOfflineThreadingId;return d===c&&a===e&&b===f}));return b==null?Promise.resolve([void 0,void 0]):Promise.resolve([b.messagePayload,b.messageTimestampMs])};a.__nop_name__="LSQueryLocalPersistenceStoreSupplementalForBackup";g.default=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h=":";a=async function(a,b,e,f){b=await d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(f,e));if(b==null)return Promise.resolve([c("LSVec").ofArray([])]);a=b.tag;return Promise.resolve([c("LSVec").ofArray(a.split(h))])};a.__nop_name__="LSQueryLocalPersistenceStoreTagsForBackup";g.default=a}),98);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],d[12]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[13]=a[0],a})},function(e){return d[14]=new c.Map(),d[14].set("message_tags",d[13]),d[15]=new c.Map(),d[15].set("mt",d[14]),c.blobs.neq(d[10],void 0)?c.sequence([function(e){return d[18]=a[5].get("message_payload_encryption_keys"),d[19]=d[18].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[19],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[10]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.blobs.neq(d[20],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[20]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[21]=d[24]}]):c.resolve(d[21]=void 0)},function(b){return d[21]!==void 0?(d[15]!==void 0?(d[27]=d[15].get("mt"),d[27]!==void 0?(d[29]=new c.Map(),d[33]="message_tags",d[30]=d[27].get(d[33]),d[30]?d[31]=!1:d[31]=!0,d[31]?0:d[29].set(d[33],d[30]),d[32]=c.toJSON(d[29]),d[28]=d[32]):d[28]=void 0,d[24]=d[28]):d[24]=void 0,d[15]!==void 0?(d[27]=d[15].get("mooos"),d[25]=d[27]):d[25]=void 0,d[26]=new c.Map(),d[26].set("backup_action",a[0]),d[26].set("protobuf_encrypted",d[21]),d[26].set("supplemental_data_encrypted",void 0),d[26].set("timestamp_ms",a[4]),d[26].set("message_tags",d[24]),d[26].set("serialized_attachment_backup_payload",void 0),d[26].set("maybe_ooo_supplemental_upload",d[25]),b=[d[26],void 0],d[22]=b[0],d[23]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,62])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),b=[void 0,d[24]],d[22]=b[0],d[23]=b[1],b),b=[d[22],d[23]],d[16]=b[0],d[17]=b[1],b}]):c.resolve((d[12]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,70])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,63])),d[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e),e=[d[18],d[19]],d[16]=e[0],d[17]=e[1],e))},function(a){return a=[d[16],d[17]],d[2]=a[0],d[3]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[17]=new c.Map(),d[17].set("message_tags",d[16]),d[18]=new c.Map(),d[18].set("mt",d[17]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return d[23]=a[5].get("mailbox_root_key_v2"),c.blobs.neq(d[23],void 0)?c.sequence([function(e){return d[26]=a[5].get("message_payload_encryption_keys"),d[27]=d[26].get("epoch_root_key"),d[28]=c.createArray(),d[41]=(d[28].push(c.i64.cast([0,32])),d[28]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,d[23],d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[29].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[30]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[30]=void 0}])},function(a){return c.blobs.neq(d[30],void 0)?d[31]=!0:d[31]=!1,d[31]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[32]=c.createArray(),d[41]=(d[32].push(c.i64.cast([0,32])),d[32]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[27],d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]!==void 0?c.sequence([function(a){return d[41]=c.i64.of_int32(d[33].length),c.i64.ge(d[41],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],c.i64.cast([0,0])).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[44]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[44]].join("")),d[43]=c.createArray(),void 0!==void 0?d[45]=(d[43].push(void 0),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[44],d[43],c.i64.cast([0,3]))},function(a){return d[42]=void 0}])},function(a){return d[34]=d[42]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[42]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[42]].join("")),d[41]=c.createArray(),void 0!==void 0?d[43]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[42],d[41],c.i64.cast([0,3]))},function(a){return d[34]=void 0}])},function(e){return c.blobs.neq(d[34],void 0)?d[35]=!0:d[35]=!1,d[35]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),d[30],d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[34],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[36]).then(function(a){return a=a,d[38]=a[0],a})},function(e){return c.blobs.neq(d[38],void 0)?c.sequence([function(e){return d[41]=new c.Map(),d[41].set("sk_ciphertext",d[38]),d[41].set("sk_hash",d[37]),d[42]=a[5].get("message_payload_encryption_keys"),d[43]=d[42].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[43],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.blobs.neq(d[44],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[45]=d[48]}]):c.resolve(d[45]=void 0)},function(b){return d[45]!==void 0?(d[18]!==void 0?(d[51]=d[18].get("mt"),d[51]!==void 0?(d[53]=new c.Map(),d[57]="message_tags",d[54]=d[51].get(d[57]),d[54]?d[55]=!1:d[55]=!0,d[55]?0:d[53].set(d[57],d[54]),d[56]=c.toJSON(d[53]),d[52]=d[56]):d[52]=void 0,d[48]=d[52]):d[48]=void 0,d[18]!==void 0?(d[51]=d[18].get("mooos"),d[49]=d[51]):d[49]=void 0,d[50]=new c.Map(),d[50].set("backup_action",a[0]),d[50].set("protobuf_encrypted",d[45]),d[50].set("supplemental_data_encrypted",d[41]),d[50].set("timestamp_ms",a[4]),d[50].set("message_tags",d[48]),d[50].set("serialized_attachment_backup_payload",void 0),d[50].set("maybe_ooo_supplemental_upload",d[49]),b=[d[50],void 0],d[46]=b[0],d[47]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[48]=new c.Map(),d[48].set("error_code",c.i64.cast([0,62])),d[48].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[48].set("error_message",""),b=[void 0,d[48]],d[46]=b[0],d[47]=b[1],b),b=[d[46],d[47]],d[39]=b[0],d[40]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),d[41]=new c.Map(),d[41].set("error_code",c.i64.cast([0,66])),d[41].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[41].set("error_message",""),e=[void 0,d[41]],d[39]=e[0],d[40]=e[1],e))},function(a){return a=[d[39],d[40]],d[24]=a[0],d[25]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,27])),d[26].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[26].set("error_message",""),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1],e))},function(a){return a=[d[24],d[25]],d[21]=a[0],d[22]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,65])),d[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[23].set("error_message",""),e=[void 0,d[23]],d[21]=e[0],d[22]=e[1],e))},function(a){return a=[d[21],d[22]],d[19]=a[0],d[20]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,64])),d[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1],e))},function(a){return a=[d[19],d[20]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,65])),d[14].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[14].set("error_message",""),e=[void 0,d[14]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,4]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],d[16]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=new c.Map(),d[18].set("message_tags",d[17]),d[19]=new c.Map(),d[19].set("mt",d[18]),c.blobs.neq(d[14],void 0)?c.sequence([function(e){return d[22]=a[5].get("message_payload_encryption_keys"),d[23]=d[22].get("payload_key"),c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),d[23],c.blobs.of_string(["message_thread","_",a[1]].join("")),d[14]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.blobs.neq(d[24],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[24]).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[25]=d[28]}]):c.resolve(d[25]=void 0)},function(b){return d[25]!==void 0?(d[19]!==void 0?(d[31]=d[19].get("mt"),d[31]!==void 0?(d[33]=new c.Map(),d[37]="message_tags",d[34]=d[31].get(d[37]),d[34]?d[35]=!1:d[35]=!0,d[35]?0:d[33].set(d[37],d[34]),d[36]=c.toJSON(d[33]),d[32]=d[36]):d[32]=void 0,d[28]=d[32]):d[28]=void 0,d[19]!==void 0?(d[31]=d[19].get("mooos"),d[29]=d[31]):d[29]=void 0,d[30]=new c.Map(),d[30].set("backup_action",a[0]),d[30].set("protobuf_encrypted",d[25]),d[30].set("supplemental_data_encrypted",void 0),d[30].set("timestamp_ms",a[4]),d[30].set("message_tags",d[28]),d[30].set("serialized_attachment_backup_payload",void 0),d[30].set("maybe_ooo_supplemental_upload",d[29]),b=[d[30],void 0],d[26]=b[0],d[27]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,62])),d[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[28].set("error_message",""),b=[void 0,d[28]],d[26]=b[0],d[27]=b[1],b),b=[d[26],d[27]],d[20]=b[0],d[21]=b[1],b}]):c.resolve((d[16]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,70])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,63])),d[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1],e),e=[d[22],d[23]],d[20]=e[0],d[21]=e[1],e))},function(a){return a=[d[20],d[21]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(void 0!==void 0?(d[19]=(void 0).get("mt"),d[19]!==void 0?(d[21]=new c.Map(),d[25]="message_tags",d[22]=d[19].get(d[25]),d[22]?d[23]=!1:d[23]=!0,d[23]?0:d[21].set(d[25],d[22]),d[24]=c.toJSON(d[21]),d[20]=d[24]):d[20]=void 0,d[16]=d[20]):d[16]=void 0,void 0!==void 0?(d[19]=(void 0).get("mooos"),d[17]=d[19]):d[17]=void 0,d[18]=new c.Map(),d[18].set("backup_action",a[0]),d[18].set("protobuf_encrypted",void 0),d[18].set("supplemental_data_encrypted",void 0),d[18].set("timestamp_ms",a[4]),d[18].set("message_tags",d[16]),d[18].set("serialized_attachment_backup_payload",void 0),d[18].set("maybe_ooo_supplemental_upload",d[17]),e=[d[18],void 0],d[14]=e[0],d[15]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN_PROTOBUF_TYPE"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,60])),d[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1],e),e=[d[14],d[15]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}])},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,67])),d[11].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1],g):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure";a.__tables__=["pending_protobuf_backups_context"];e.exports=a}),null);
__d("LSSerializeBackupPayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(b){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[18]=d.i64.mul(e[1],d.i64.cast([0,1e6])),e[2]=d.i64.random(),d.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[3]=void 0:(b=a.item,e[3]=b.dataTraceId)})},function(a){return e[3]!==void 0?e[5]=e[3]:e[5]=void 0,d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(e[22]=new d.Map(),e[22].set("error_msg","Expected a nonempty query result"),e[22].set("code",d.i64.cast([0,3])),e[22].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),e[23]=d.createArray(),e[24]=(e[23].push(e[22]),e[23]),c=[void 0,e[23]],e[6]=c[0],e[7]=c[1],c):(b=a.item,e[22]=new d.Map(),e[22].set("backup_id",b.backupId),e[22].set("device_public_key_blob",b.devicePublicKeyBlob),e[22].set("device_private_key_blob",b.devicePrivateKeyBlob),e[22].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),e[22].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),e[22].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),e[22].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),e[22].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),e[22].set("ocmf_client_state_blob",b.ocmfClientStateBlob),e[22].set("orf_client_state_v2_blob",void 0),e[22].set("orf_v2_authority_level",void 0),e[22].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),e[22].set("device_id",b.deviceId),e[22].set("backup_tenancy",b.backupTenancy),e[22].set("encryption_version",b.encryptionVersion),e[22].set("revision_version",b.revisionVersion),e[22].set("initialize_restore_result",void 0),e[22].set("device_creation_timestamp_sec",void 0),e[22].set("authority_level",b.authorityLevel),c=[e[22],void 0],e[6]=c[0],e[7]=c[1],c)})},function(f){return e[9]=new d.Map(),e[9].set("value",e[6]),e[9].set("errors",e[7]),e[10]=e[9].get("value"),e[10]!==void 0?d.sequence([function(f){return e[22]=e[10].get("backup_id"),e[23]=e[10].get("device_public_key_blob"),e[24]=e[10].get("device_private_key_blob"),e[25]=e[10].get("epoch_storage_public_key_blob"),e[26]=e[10].get("epoch_storage_private_key_blob"),e[27]=e[10].get("epoch_auth_public_key_blob"),e[28]=e[10].get("epoch_auth_private_key_blob"),e[29]=e[10].get("mailbox_root_key_blob"),e[30]=e[10].get("ocmf_client_state_blob"),e[31]=e[10].get("orf_client_state_v2_blob"),e[32]=e[10].get("orf_v2_authority_level"),e[33]=e[10].get("oblivious_validation_token_blob"),e[34]=e[10].get("device_id"),e[35]=e[10].get("backup_tenancy"),e[36]=e[10].get("encryption_version"),e[37]=e[10].get("revision_version"),e[38]=e[10].get("initialize_restore_result"),e[39]=e[10].get("device_creation_timestamp_sec"),e[40]=e[10].get("authority_level"),d.i64.neq(e[34],void 0)?d.sequence([function(a){return e[45]=void 0,d.i64.neq(e[45],void 0)?d.resolve(e[46]=e[45]):d.sequence([function(a){return e[54]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[55]=a[0],a})},function(a){return e[55]?e[64]=(e[54].push(d.i64.cast([0,0])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[56]=a[0],a})},function(a){return e[56]?e[64]=(e[54].push(d.i64.cast([0,2])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[57]=a[0],a})},function(a){return e[57]?e[64]=(e[54].push(d.i64.cast([0,3])),e[54]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[58]=a[0],a})},function(a){return e[58]?e[64]=(e[54].push(d.i64.cast([0,4])),e[54]):0,e[59]=d.createArray(),e[60]=d.i64.of_int32(e[54].length),d.i64.gt(e[60],d.i64.cast([0,0]))?d.loopAsync(e[60],function(a){return e[64]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[54],e[64]).then(function(a){return a=a,e[65]=a[0],e[66]=a[1],a})},function(a){return e[67]=(e[59].push(e[65]),e[59])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[64]=d.createArray(),e[65]=d.i64.of_int32(e[59].length),d.i64.gt(e[65],d.i64.cast([0,0]))?d.loopAsync(e[65],function(a){return e[67]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[59],e[67]).then(function(a){return a=a,e[68]=a[0],e[69]=a[1],a})},function(a){return e[70]=(e[64].push(d.i64.to_string(e[68])),e[64])}])}):d.resolve()},function(a){return e[66]=e[64].join(","),e[61]=e[66]}])},function(a){return e[59].some(function(a){return d.i64.eq(e[36],a)})?e[62]=e[36]:e[62]=void 0,d.i64.neq(e[62],void 0)?e[63]=e[62]:e[63]=void 0,e[46]=e[63]}])},function(f){return d.i64.neq(e[46],void 0)?e[47]=e[46]:e[47]=d.i64.cast([0,0]),d.i64.neq(e[35],void 0)?e[48]=e[35]:e[48]=d.i64.cast([0,1]),d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(f,g){var h=f.done;f=f.value;return h?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[66]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[66],d.i64.cast([0,1e6])),e[18]),void 0],e[54]=b[0],e[55]=b[1],e[56]=b[2],e[57]=b[3],e[58]=b[4],e[59]=b[5],e[60]=b[6],b):(f=c.item,e[66]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[66],d.i64.cast([0,1e6])),e[18]),void 0],e[54]=b[0],e[55]=b[1],e[56]=b[2],e[57]=b[3],e[58]=b[4],e[59]=b[5],e[60]=b[6],b)})},function(a){return e[62]=new d.Map(),e[62].set("task_id",e[54]),e[62].set("queue_name",e[55]),e[62].set("enqueue_timestamp_ms",e[56]),e[62].set("priority",e[57]),e[62].set("first_executed_timestamp_ms",e[58]),e[62].set("execution_time_ns",e[59]),e[62].set("echo_encoding_execution_time_ns",e[60]),e[63]=new d.Map(),e[63].set("task_metadata",e[62]),e[63].set("action_type",void 0),e[63].set("content_type",void 0),e[63].set("identifiers",void 0),e[63].set("identifiers_v2",void 0),e[63].set("task_creation_source",void 0),e[63].set("message_payload_source",d.i64.cast([0,2])),e[64]=new d.Map(),e[64].set("error_code",d.i64.cast([0,5])),e[64].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[64].set("error_message","Pending backup context row not found"),e[64]!==void 0?(e[66]=e[64].get("stored_procedure"),e[67]=e[64].get("error_code"),e[68]=e[64].get("error_message"),e[69]="."):0,void 0!==void 0?(e[66]=(void 0).get("stored_procedure"),e[67]=(void 0).get("error_code"),e[68]=(void 0).get("error_message"),e[69]="."):0,e[65]=d.createArray(),a=[void 0,e[64],e[63],e[65]],e[49]=a[0],e[50]=a[1],e[51]=a[2],e[52]=a[3],a}]):(g=f.item,d.sequence([function(f){return e[59]=g.actionType,e[60]=g.contentType,e[64]=g.echoContent,e[65]=g.lsTraceId,e[63]=g.echoEncodingLatencyNs,e[62]=g.attachmentPayload,e[66]=g.tamThreadSubtype,e[67]=g.isInstamadillo,e[54]=new d.Map(),e[54].set("backup_id",d.i64.to_string(e[22])),e[54].set("act_thread_id",g.listKey),e[54].set("timestamp",g.sortKey),e[54].set("otid",g.uniqueKey),e[61]=g.error==null?d.i64.cast([0,0]):g.error,[d.i64.cast([0,0]),d.i64.cast([0,32])].some(function(a){return d.i64.eq(e[61],a)})?d.sequence([function(a){return e[68]=e[54].get("act_thread_id"),e[69]=e[54].get("otid"),d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[70]=a[0],e[71]=a[1],a})},function(a){return e[70]!==void 0?d.sequence([function(a){return d.i64.eq(e[60],d.i64.cast([0,1]))?d.sequence([function(a){return e[81]=d.createArray(),e[86]=(e[81].push(d.i64.cast([0,32])),e[81]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[68]].join("")).then(function(a){return a=a,e[82]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[82],void 0,e[29],e[81]).then(function(a){return a=a,e[83]=a[0],a})},function(a){return e[83]?e[84]=!1:e[84]=!0,e[84]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[87]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[87]].join("")),e[86]=d.createArray(),void 0!==void 0?e[88]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[87],e[86],d.i64.cast([0,3]))},function(a){return e[85]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[83],d.i64.cast([0,0])).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(a){return e[85]=e[86]}])},function(a){return e[78]=e[85]}]):d.sequence([function(a){return d.i64.eq(e[59],d.i64.cast([0,2]))?d.sequence([function(a){return e[82]=d.createArray(),e[87]=(e[82].push(d.i64.cast([0,32])),e[82]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[69]].join("")).then(function(a){return a=a,e[83]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[83],void 0,e[29],e[82]).then(function(a){return a=a,e[84]=a[0],a})},function(a){return e[84]?e[85]=!1:e[85]=!0,e[85]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[88]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[88]].join("")),e[87]=d.createArray(),void 0!==void 0?e[89]=(e[87].push(void 0),e[87]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[88],e[87],d.i64.cast([0,3]))},function(a){return e[86]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[84],d.i64.cast([0,0])).then(function(a){return a=a,e[87]=a[0],e[88]=a[1],a})},function(a){return e[86]=e[87]}])},function(a){return e[81]=e[86]}]):d.resolve(e[81]=void 0)},function(a){return e[78]=e[81]}])},function(a){return d.blobs.neq(e[78],void 0)?d.sequence([function(a){return e[81]=e[70].get("epoch_keys"),e[82]=e[81].get("epoch_anon_id"),e[83]=e[81].get("epoch_root_key"),e[84]=d.createArray(),e[99]=(e[84].push(d.i64.cast([0,32])),e[84]),d.i64.ge(e[47],d.i64.cast([0,3]))?d.resolve(e[85]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[68]).then(function(a){return a=a,e[99]=a[0],a})},function(a){return e[85]=e[99]}])},function(a){return d.i64.ge(e[47],d.i64.cast([0,4]))?(e[99]="_",e[86]=["message_key_in_epoch",e[99],d.blobs.to_string(e[82]),e[99],"cipher_version",e[99],d.i64.to_string(e[47]),e[99],"thread",e[99],e[68]==null?"":e[68]].join("")):(d.i64.ge(e[47],d.i64.cast([0,3]))?(e[100]="_",e[99]=["message_key_in_epoch",e[100],d.blobs.to_string(e[82]),e[100],"cipher_version",e[100],d.i64.to_string(e[47]),e[100],"thread",e[100],e[68]==null?"":e[68]].join("")):(d.i64.ge(e[47],d.i64.cast([0,2]))?(e[101]="_",e[100]=["message_key_in_epoch",e[101],d.blobs.to_string(e[82]),e[101],"cipher_version",e[101],d.i64.to_string(e[47])].join("")):e[100]=["message_key_in_epoch","_",d.blobs.to_string(e[82])].join(""),e[99]=e[100]),e[86]=e[99]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[86]).then(function(a){return a=a,e[87]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[87],e[85],e[83],e[84]).then(function(a){return a=a,e[88]=a[0],a})},function(a){return e[88]?e[89]=!1:e[89]=!0,e[89]?d.resolve(e[90]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[88],d.i64.cast([0,0])).then(function(a){return a=a,e[99]=a[0],e[100]=a[1],a})},function(a){return e[90]=e[99]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(b,c){var a=b.done;b=b.value;return a?(e[99]=new d.Map(),e[99].set("error_msg","Expected a nonempty query result"),e[99].set("code",d.i64.cast([0,3])),e[99].set("src_line","MEBEpochClientUtils.php:556 MEBEpochClientUtils::maybeEpochWithAnonIDFromPersistentEpochsTableDirectly()"),e[100]=d.createArray(),e[101]=(e[100].push(e[99]),e[100]),a=[void 0,e[100]],e[91]=a[0],e[92]=a[1],a):(c=b.item,e[99]=new d.Map(),e[99].set("epoch_id",c.epochId),e[99].set("backup_id",c.backupId),e[99].set("epoch_anon_id_blob",c.epochAnonIdBlob),e[99].set("epoch_root_key_blob",c.epochRootKeyBlob),e[99].set("epoch_status",c.epochStatus),e[99].set("epoch_head",c.epochHead),e[99].set("authority_level",c.authorityLevel),a=[e[99],void 0],e[91]=a[0],e[92]=a[1],a)})},function(a){return e[94]=new d.Map(),e[94].set("value",e[91]),e[94].set("errors",e[92]),e[95]=e[94].get("value"),e[95]!==void 0?d.sequence([function(a){return e[99]=e[95].get("epoch_id"),e[100]=e[95].get("backup_id"),e[101]=e[95].get("epoch_anon_id_blob"),e[102]=e[95].get("epoch_root_key_blob"),e[103]=e[95].get("epoch_status"),e[104]=e[95].get("epoch_head"),e[105]=e[95].get("authority_level"),e[106]=d.createArray(),e[114]=(e[106].push(d.i64.cast([0,32])),e[106]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[29],e[106]).then(function(a){return a=a,e[107]=a[0],a})},function(a){return e[107]!==void 0?d.sequence([function(a){return e[114]=d.i64.of_int32(e[107].length),d.i64.ge(e[114],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[107],d.i64.cast([0,0])).then(function(a){return a=a,e[116]=a[0],e[117]=a[1],a})},function(a){return e[115]=e[116]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[117]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[117],e[116],d.i64.cast([0,3]))},function(a){return e[115]=void 0}])},function(a){return e[108]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[115]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[115]].join("")),e[114]=d.createArray(),void 0!==void 0?e[116]=(e[114].push(void 0),e[114]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[115],e[114],d.i64.cast([0,3]))},function(a){return e[108]=void 0}])},function(a){return d.blobs.neq(e[108],void 0)?e[109]=!0:e[109]=!1,e[109]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[110]=d.createArray(),e[114]=(e[110].push(d.i64.cast([0,32])),e[110]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[108],e[102],e[110]).then(function(a){return a=a,e[111]=a[0],a})},function(a){return e[111]!==void 0?d.sequence([function(a){return e[114]=d.i64.of_int32(e[111].length),d.i64.ge(e[114],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[111],d.i64.cast([0,0])).then(function(a){return a=a,e[116]=a[0],e[117]=a[1],a})},function(a){return e[115]=e[116]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[117]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[117]].join("")),e[116]=d.createArray(),void 0!==void 0?e[118]=(e[116].push(void 0),e[116]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[117],e[116],d.i64.cast([0,3]))},function(a){return e[115]=void 0}])},function(a){return e[112]=e[115]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[115]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[115]].join("")),e[114]=d.createArray(),void 0!==void 0?e[116]=(e[114].push(void 0),e[114]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[115],e[114],d.i64.cast([0,3]))},function(a){return e[112]=void 0}])},function(a){return d.blobs.neq(e[112],void 0)?e[113]=!0:e[113]=!1,e[113]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[96]=e[112]}]):d.sequence([function(a){return e[99]=e[94].get("errors"),e[100]=e[94].get("errors"),function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBEpochClientUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[102]="Failed to get mailbox_root_key_v2: epoch 0 is not available.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBEpochClientUtils] ","",e[102]].join("")),e[101]=d.createArray(),void 0!==void 0?e[103]=(e[101].push(void 0),e[101]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBEpochClientUtils",e[102],e[101],d.i64.cast([0,3]))},function(a){return e[96]=void 0}])},function(a){return d.blobs.neq(e[90],void 0)?d.sequence([function(a){return d.blobs.neq(e[96],void 0)?d.sequence([function(a){return e[105]=d.createArray(),e[109]=(e[105].push(d.i64.cast([0,32])),e[105]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[96],e[105]).then(function(a){return a=a,e[106]=a[0],a})},function(a){return e[106]!==void 0?d.sequence([function(a){return e[109]=d.i64.of_int32(e[106].length),d.i64.ge(e[109],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[106],d.i64.cast([0,0])).then(function(a){return a=a,e[111]=a[0],e[112]=a[1],a})},function(a){return e[110]=e[111]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[112]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[112]].join("")),e[111]=d.createArray(),void 0!==void 0?e[113]=(e[111].push(void 0),e[111]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[112],e[111],d.i64.cast([0,3]))},function(a){return e[110]=void 0}])},function(a){return e[107]=e[110]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[110]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){d.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",e[110]].join("")),e[109]=d.createArray(),void 0!==void 0?e[111]=(e[109].push(void 0),e[109]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",e[110],e[109],d.i64.cast([0,3]))},function(a){return e[107]=void 0}])},function(a){return d.blobs.neq(e[107],void 0)?e[108]=!0:e[108]=!1,e[108]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[99]=e[107]}]):d.resolve(e[99]=void 0)},function(a){return e[100]=e[81].get("epoch_root_key"),e[101]=e[81].get("epoch_anon_id"),e[102]=e[81].get("epoch_id"),e[103]=new d.Map(),e[103].set("payload_key",e[90]),e[103].set("payload_fallback_key",e[99]),e[103].set("encryption_version",e[47]),e[103].set("epoch_root_key",e[100]),e[103].set("epoch_anon_id",e[101]),e[103].set("epoch_id",e[102]),e[104]=new d.Map(),e[104].set("ope_key",e[78]),e[104].set("message_payload_encryption_keys",e[103]),e[104].set("ocmf_shared_key",e[30]),e[104].set("mailbox_base_salt",e[29]),e[104].set("mailbox_root_key_v2",e[96]),a=[e[104],void 0],e[97]=a[0],e[98]=a[1],a}]):d.resolve((e[99]=new d.Map(),e[99].set("error_code",d.i64.cast([0,26])),e[99].set("stored_procedure","MEBKeyDeriver"),e[99].set("error_message",""),a=[void 0,e[99]],e[97]=a[0],e[98]=a[1],a))},function(a){return a=[e[97],e[98]],e[79]=a[0],e[80]=a[1],a}]):d.resolve((e[81]=new d.Map(),e[81].set("error_code",d.i64.cast([0,25])),e[81].set("stored_procedure","MEBKeyDeriver"),e[81].set("error_message",""),a=[void 0,e[81]],e[79]=a[0],e[80]=a[1],a))},function(a){return a=[e[79],e[80]],e[72]=a[0],e[73]=a[1],a}]):d.resolve((a=[void 0,e[71]],e[72]=a[0],e[73]=a[1],a))},function(f){return e[72]!==void 0?d.sequence([function(a){return e[78]=e[54].get("backup_id"),e[79]=e[54].get("act_thread_id"),e[80]=e[54].get("timestamp"),e[81]=e[54].get("otid"),d.storedProcedure(b("LSEncryptIdentifiersV2"),e[59],e[60],e[78],e[79],d.i64.from_string(e[80]),e[81],e[72]).then(function(a){return a=a,e[82]=a[0],e[83]=a[1],a})},function(f){return e[82]!==void 0?d.sequence([function(c){return e[88]=e[54].get("act_thread_id"),d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[72],e[88]).then(function(a){return a=a,e[89]=a[0],e[90]=a[1],a})},function(f){return e[95]=d.i64.eq(e[61],d.i64.cast([0,32]))||!1||c("gkx")("12541")||!1,e[96]=e[89]!==void 0,e[95]&&e[96]?d.sequence([function(a){return e[97]=e[54].get("act_thread_id"),e[98]=e[54].get("backup_id"),d.storedProcedure(b("LSDeriveValueSecretRefV2"),e[97],e[98],e[72]).then(function(a){return a=a,e[99]=a[0],e[100]=a[1],a})},function(c){return e[89]!==void 0?d.sequence([function(c){return e[99]!==void 0?d.sequence([function(a){return e[109]=e[99].get("value_secret_ref"),e[110]=e[82].get("act_thread_id_ocmf_partial"),e[111]=e[82].get("otid_ocmf_partial"),e[112]=e[82].get("timestamp_encrypted"),e[113]=new d.Map(),e[113].set("list_key",e[110]),e[113].set("unique_key",e[111]),e[113].set("sort_key",e[112]),void 0!==void 0?(e[146]=(void 0).get("encrypted_message_payload"),e[147]=(void 0).get("value_secret_ref"),e[148]=new d.Map(),e[148].set("value",e[146]),e[148].set("value_secret_ref",e[147]),e[114]=e[148]):e[114]=void 0,e[115]=new d.Map(),e[115].set("list_item_id",e[113]),e[115].set("list_item",e[114]),e[115].set("action_type",e[59]),e[116]=e[54].get("timestamp"),e[117]=e[54].get("otid"),e[118]=e[54].get("act_thread_id"),e[119]=e[54].get("supplemental_otid"),e[120]=new d.Map(),e[120].set("timestamp",e[116]),e[120].set("otid",e[117]),e[120].set("wa_thread_id",d.i64.from_string(e[118])),e[120].set("supplemental_otid",e[119]),e[121]=e[72].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[121]).then(function(a){return a=a,e[122]=a[0],a})},function(a){return e[123]=e[72].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[123]).then(function(a){return a=a,e[124]=a[0],a})},function(a){return e[125]=new d.Map(),e[125].set("mailbox_root_key",e[122]==null?"":e[122]),e[125].set("ocmf_client_state_blob",e[124]==null?"":e[124]),e[126]=e[82].get("backup_id_ocmf_partial"),e[127]=e[72].get("message_payload_encryption_keys"),e[128]=e[127].get("epoch_id"),e[129]=e[72].get("message_payload_encryption_keys"),e[130]=e[129].get("encryption_version"),e[145]=e[65]==null?"":e[65],e[131]=new d.Map(),e[131].set("mailbox_partial_id",e[126]),e[131].set("action",e[115]),e[131].set("device_id",e[34]),e[131].set("echo_version",d.i64.cast([0,0])),e[131].set("epoch_id",e[128]),e[131].set("trace_id",void 0),e[131].set("encryption_version",e[130]),e[131].set("is_thread",d.i64.eq(e[60],d.i64.cast([0,2]))),e[131].set("raw_identifiers",e[120]),e[131].set("raw_tokens",e[125]),e[131].set("request_id",e[145]),e[131].set("tam_thread_subtype",e[66]==null?d.i64.cast([0,0]):e[66]),e[131].set("is_instamadillo",e[67]==null?!1:e[67]),e[131].set("empty_echo_payload_reason",d.i64.cast([0,1])),e[131].set("value_secret_ref",e[109]),e[89]!==void 0?d.sequence([function(a){return e[146]=e[89].get("supplemental_data_encrypted"),e[146]!==void 0?d.sequence([function(a){return e[148]=e[89].get("protobuf_encrypted"),e[149]=e[89].get("backup_action"),e[150]=e[89].get("timestamp_ms"),e[151]=e[146].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[151]).then(function(a){return a=a,e[152]=a[0],a})},function(a){return e[153]=e[146].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[153]).then(function(a){return a=a,e[154]=a[0],a})},function(a){return e[155]=e[89].get("message_tags"),e[156]=e[89].get("maybe_ooo_supplemental_upload"),e[157]=new d.Map(),e[157].set("supplementary_data_key",void 0),e[157].set("encrypted_protobuf",e[148]),e[157].set("key_value_backup_action",e[149]),e[157].set("protobuf_ts_ms",e[150]),e[157].set("supplemental_key_ciphertext",e[152]),e[157].set("supplemental_key_hash",e[154]),e[157].set("message_tags",e[155]),e[157].set("maybe_ooo_supplemental_upload",e[156]),e[147]=e[157]}]):d.resolve((e[148]=e[89].get("protobuf_encrypted"),e[149]=e[89].get("backup_action"),e[150]=e[89].get("timestamp_ms"),e[151]=e[89].get("message_tags"),e[152]=new d.Map(),e[152].set("supplementary_data_key",void 0),e[152].set("encrypted_protobuf",e[148]),e[152].set("key_value_backup_action",e[149]),e[152].set("protobuf_ts_ms",e[150]),e[152].set("message_tags",e[151]),e[147]=e[152]))},function(a){return e[131].set("key_value_backup_payload",e[147])}]):d.resolve()},function(a){return e[62]!==void 0?e[131].set("attachment_backup_payload",e[62]):function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[145]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[145],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[132]=d.toJSON(e[131]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[146]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[147]=void 0:e[147]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[146],d.i64.cast([0,1e6])),e[18]),e[147]],e[133]=b[0],e[134]=b[1],e[135]=b[2],e[136]=b[3],e[137]=b[4],e[138]=b[5],e[139]=b[6],b):(f=c.item,e[146]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[147]=void 0:e[147]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[146],d.i64.cast([0,1e6])),e[18]),e[147]],e[133]=b[0],e[134]=b[1],e[135]=b[2],e[136]=b[3],e[137]=b[4],e[138]=b[5],e[139]=b[6],b)})},function(a){return e[141]=new d.Map(),e[141].set("task_id",e[133]),e[141].set("queue_name",e[134]),e[141].set("enqueue_timestamp_ms",e[135]),e[141].set("priority",e[136]),e[141].set("first_executed_timestamp_ms",e[137]),e[141].set("execution_time_ns",e[138]),e[141].set("echo_encoding_execution_time_ns",e[139]),e[142]=new d.Map(),e[142].set("task_metadata",e[141]),e[142].set("action_type",e[59]),e[142].set("content_type",e[60]),e[142].set("identifiers",void 0),e[142].set("identifiers_v2",e[54]),e[142].set("task_creation_source",void 0),e[142].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[146]=(void 0).get("stored_procedure"),e[147]=(void 0).get("error_code"),e[148]=(void 0).get("error_message"),e[149]="."):0,void 0!==void 0?(e[146]=(void 0).get("stored_procedure"),e[147]=(void 0).get("error_code"),e[148]=(void 0).get("error_message"),e[149]="."):0,e[143]=new d.Map(),e[143].set("payload",e[132]),e[144]=d.createArray(),e[146]=(e[144].push(void 0),e[144]),a=[e[143],void 0,e[142],e[144]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[121]=void 0:e[121]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[18]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b):(f=c.item,e[120]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[121]=void 0:e[121]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[120],d.i64.cast([0,1e6])),e[18]),e[121]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b)})},function(a){return e[117]=new d.Map(),e[117].set("task_id",e[109]),e[117].set("queue_name",e[110]),e[117].set("enqueue_timestamp_ms",e[111]),e[117].set("priority",e[112]),e[117].set("first_executed_timestamp_ms",e[113]),e[117].set("execution_time_ns",e[114]),e[117].set("echo_encoding_execution_time_ns",e[115]),e[118]=new d.Map(),e[118].set("task_metadata",e[117]),e[118].set("action_type",e[59]),e[118].set("content_type",e[60]),e[118].set("identifiers",void 0),e[118].set("identifiers_v2",e[54]),e[118].set("task_creation_source",void 0),e[118].set("message_payload_source",d.i64.cast([0,2])),e[100]!==void 0?(e[120]=e[100].get("stored_procedure"),e[121]=e[100].get("error_code"),e[122]=e[100].get("error_message"),e[123]="."):0,void 0!==void 0?(e[120]=(void 0).get("stored_procedure"),e[121]=(void 0).get("error_code"),e[122]=(void 0).get("error_message"),e[123]="."):0,e[119]=d.createArray(),e[120]=(e[119].push(void 0),e[119]),a=[void 0,e[100],e[118],e[119]],e[105]=a[0],e[106]=a[1],e[107]=a[2],e[108]=a[3],a}])},function(a){return a=[e[105],e[106],e[107],e[108]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[117]=void 0:e[117]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[18]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6],b):(f=c.item,e[116]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[117]=void 0:e[117]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[116],d.i64.cast([0,1e6])),e[18]),e[117]],e[105]=b[0],e[106]=b[1],e[107]=b[2],e[108]=b[3],e[109]=b[4],e[110]=b[5],e[111]=b[6],b)})},function(a){return e[113]=new d.Map(),e[113].set("task_id",e[105]),e[113].set("queue_name",e[106]),e[113].set("enqueue_timestamp_ms",e[107]),e[113].set("priority",e[108]),e[113].set("first_executed_timestamp_ms",e[109]),e[113].set("execution_time_ns",e[110]),e[113].set("echo_encoding_execution_time_ns",e[111]),e[114]=new d.Map(),e[114].set("task_metadata",e[113]),e[114].set("action_type",e[59]),e[114].set("content_type",e[60]),e[114].set("identifiers",void 0),e[114].set("identifiers_v2",e[54]),e[114].set("task_creation_source",void 0),e[114].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[116]=(void 0).get("stored_procedure"),e[117]=(void 0).get("error_code"),e[118]=(void 0).get("error_message"),e[119]="."):0,e[90]!==void 0?(e[116]=e[90].get("stored_procedure"),e[117]=e[90].get("error_code"),e[118]=e[90].get("error_message"),e[119]="."):0,e[115]=d.createArray(),e[116]=(e[115].push(e[90]),e[115]),a=[void 0,void 0,e[114],e[115]],e[101]=a[0],e[102]=a[1],e[103]=a[2],e[104]=a[3],a}])},function(a){return a=[e[101],e[102],e[103],e[104]],e[91]=a[0],e[92]=a[1],e[93]=a[2],e[94]=a[3],a}]):d.sequence([function(c){return e[95]===!0&&e[96]===!1?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[112]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[113]=void 0:e[113]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[112],d.i64.cast([0,1e6])),e[18]),e[113]],e[101]=b[0],e[102]=b[1],e[103]=b[2],e[104]=b[3],e[105]=b[4],e[106]=b[5],e[107]=b[6],b):(f=c.item,e[112]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[113]=void 0:e[113]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[112],d.i64.cast([0,1e6])),e[18]),e[113]],e[101]=b[0],e[102]=b[1],e[103]=b[2],e[104]=b[3],e[105]=b[4],e[106]=b[5],e[107]=b[6],b)})},function(a){return e[109]=new d.Map(),e[109].set("task_id",e[101]),e[109].set("queue_name",e[102]),e[109].set("enqueue_timestamp_ms",e[103]),e[109].set("priority",e[104]),e[109].set("first_executed_timestamp_ms",e[105]),e[109].set("execution_time_ns",e[106]),e[109].set("echo_encoding_execution_time_ns",e[107]),e[110]=new d.Map(),e[110].set("task_metadata",e[109]),e[110].set("action_type",e[59]),e[110].set("content_type",e[60]),e[110].set("identifiers",void 0),e[110].set("identifiers_v2",e[54]),e[110].set("task_creation_source",void 0),e[110].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[112]=(void 0).get("stored_procedure"),e[113]=(void 0).get("error_code"),e[114]=(void 0).get("error_message"),e[115]="."):0,e[90]!==void 0?(e[112]=e[90].get("stored_procedure"),e[113]=e[90].get("error_code"),e[114]=e[90].get("error_message"),e[115]="."):0,e[111]=d.createArray(),e[112]=(e[111].push(e[90]),e[111]),a=[void 0,void 0,e[110],e[111]],e[97]=a[0],e[98]=a[1],e[99]=a[2],e[100]=a[3],a}]):d.sequence([function(c){return d.i64.eq(e[59],d.i64.cast([0,1]))?(e[109]=e[64]===""?void 0:e[64],e[109]!==void 0?(c=[e[109],void 0],e[107]=c[0],e[108]=c[1],c):(e[110]=new d.Map(),e[110].set("error_code",d.i64.cast([0,30])),e[110].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[110].set("error_message",""),c=[void 0,e[110]],e[107]=c[0],e[108]=c[1],c),c=[e[107],e[108]],e[101]=c[0],e[102]=c[1],c):(c=["",void 0],e[101]=c[0],e[102]=c[1],c),e[101]!==void 0?d.sequence([function(a){return d.i64.eq(e[59],d.i64.cast([0,1]))?d.sequence([function(a){return e[113]=e[54].get("backup_id"),e[114]=e[54].get("act_thread_id"),d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[113],e[114],e[72],e[101]).then(function(a){return a=a,e[115]=a[0],e[116]=a[1],a})},function(a){return a=[e[115],e[116]],e[107]=a[0],e[108]=a[1],a}]):d.resolve((e[113]=new d.Map(),e[113].set("encrypted_message_payload",""),e[113].set("value_secret_ref",""),a=[e[113],void 0],e[107]=a[0],e[108]=a[1],a))},function(c){return e[107]!==void 0?d.sequence([function(a){return e[113]=e[82].get("act_thread_id_ocmf_partial"),e[114]=e[82].get("otid_ocmf_partial"),e[115]=e[82].get("timestamp_encrypted"),e[116]=new d.Map(),e[116].set("list_key",e[113]),e[116].set("unique_key",e[114]),e[116].set("sort_key",e[115]),e[107]!==void 0?(e[149]=e[107].get("encrypted_message_payload"),e[150]=e[107].get("value_secret_ref"),e[151]=new d.Map(),e[151].set("value",e[149]),e[151].set("value_secret_ref",e[150]),e[117]=e[151]):e[117]=void 0,e[118]=new d.Map(),e[118].set("list_item_id",e[116]),e[118].set("list_item",e[117]),e[118].set("action_type",e[59]),e[119]=e[54].get("timestamp"),e[120]=e[54].get("otid"),e[121]=e[54].get("act_thread_id"),e[122]=e[54].get("supplemental_otid"),e[123]=new d.Map(),e[123].set("timestamp",e[119]),e[123].set("otid",e[120]),e[123].set("wa_thread_id",d.i64.from_string(e[121])),e[123].set("supplemental_otid",e[122]),e[124]=e[72].get("mailbox_base_salt"),d.nativeOperation(b("LSBase64Encode.nop"),e[124]).then(function(a){return a=a,e[125]=a[0],a})},function(a){return e[126]=e[72].get("ocmf_shared_key"),d.nativeOperation(b("LSBase64Encode.nop"),e[126]).then(function(a){return a=a,e[127]=a[0],a})},function(a){return e[128]=new d.Map(),e[128].set("mailbox_root_key",e[125]==null?"":e[125]),e[128].set("ocmf_client_state_blob",e[127]==null?"":e[127]),e[129]=e[82].get("backup_id_ocmf_partial"),e[130]=e[72].get("message_payload_encryption_keys"),e[131]=e[130].get("epoch_id"),e[132]=e[72].get("message_payload_encryption_keys"),e[133]=e[132].get("encryption_version"),e[148]=e[65]==null?"":e[65],e[134]=new d.Map(),e[134].set("mailbox_partial_id",e[129]),e[134].set("action",e[118]),e[134].set("device_id",e[34]),e[134].set("echo_version",d.i64.cast([0,0])),e[134].set("epoch_id",e[131]),e[134].set("trace_id",void 0),e[134].set("encryption_version",e[133]),e[134].set("is_thread",d.i64.eq(e[60],d.i64.cast([0,2]))),e[134].set("raw_identifiers",e[123]),e[134].set("raw_tokens",e[128]),e[134].set("request_id",e[148]),e[134].set("tam_thread_subtype",e[66]==null?d.i64.cast([0,0]):e[66]),e[134].set("is_instamadillo",e[67]==null?!1:e[67]),e[89]!==void 0?d.sequence([function(a){return e[149]=e[89].get("supplemental_data_encrypted"),e[149]!==void 0?d.sequence([function(a){return e[151]=e[89].get("protobuf_encrypted"),e[152]=e[89].get("backup_action"),e[153]=e[89].get("timestamp_ms"),e[154]=e[149].get("sk_ciphertext"),d.nativeOperation(b("LSBase64Encode.nop"),e[154]).then(function(a){return a=a,e[155]=a[0],a})},function(a){return e[156]=e[149].get("sk_hash"),d.nativeOperation(b("LSBase64Encode.nop"),e[156]).then(function(a){return a=a,e[157]=a[0],a})},function(a){return e[158]=e[89].get("message_tags"),e[159]=e[89].get("maybe_ooo_supplemental_upload"),e[160]=new d.Map(),e[160].set("supplementary_data_key",void 0),e[160].set("encrypted_protobuf",e[151]),e[160].set("key_value_backup_action",e[152]),e[160].set("protobuf_ts_ms",e[153]),e[160].set("supplemental_key_ciphertext",e[155]),e[160].set("supplemental_key_hash",e[157]),e[160].set("message_tags",e[158]),e[160].set("maybe_ooo_supplemental_upload",e[159]),e[150]=e[160]}]):d.resolve((e[151]=e[89].get("protobuf_encrypted"),e[152]=e[89].get("backup_action"),e[153]=e[89].get("timestamp_ms"),e[154]=e[89].get("message_tags"),e[155]=new d.Map(),e[155].set("supplementary_data_key",void 0),e[155].set("encrypted_protobuf",e[151]),e[155].set("key_value_backup_action",e[152]),e[155].set("protobuf_ts_ms",e[153]),e[155].set("message_tags",e[154]),e[150]=e[155]))},function(a){return e[134].set("key_value_backup_payload",e[150])}]):d.resolve()},function(a){return e[62]!==void 0?e[134].set("attachment_backup_payload",e[62]):function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[148]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[148],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(b){return e[135]=d.toJSON(e[134]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[149]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[150]=void 0:e[150]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[149],d.i64.cast([0,1e6])),e[18]),e[150]],e[136]=b[0],e[137]=b[1],e[138]=b[2],e[139]=b[3],e[140]=b[4],e[141]=b[5],e[142]=b[6],b):(f=c.item,e[149]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[150]=void 0:e[150]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[149],d.i64.cast([0,1e6])),e[18]),e[150]],e[136]=b[0],e[137]=b[1],e[138]=b[2],e[139]=b[3],e[140]=b[4],e[141]=b[5],e[142]=b[6],b)})},function(a){return e[144]=new d.Map(),e[144].set("task_id",e[136]),e[144].set("queue_name",e[137]),e[144].set("enqueue_timestamp_ms",e[138]),e[144].set("priority",e[139]),e[144].set("first_executed_timestamp_ms",e[140]),e[144].set("execution_time_ns",e[141]),e[144].set("echo_encoding_execution_time_ns",e[142]),e[145]=new d.Map(),e[145].set("task_metadata",e[144]),e[145].set("action_type",e[59]),e[145].set("content_type",e[60]),e[145].set("identifiers",void 0),e[145].set("identifiers_v2",e[54]),e[145].set("task_creation_source",void 0),e[145].set("message_payload_source",d.i64.cast([0,2])),void 0!==void 0?(e[149]=(void 0).get("stored_procedure"),e[150]=(void 0).get("error_code"),e[151]=(void 0).get("error_message"),e[152]="."):0,e[90]!==void 0?(e[149]=e[90].get("stored_procedure"),e[150]=e[90].get("error_code"),e[151]=e[90].get("error_message"),e[152]="."):0,e[146]=new d.Map(),e[146].set("payload",e[135]),e[147]=d.createArray(),e[149]=(e[147].push(e[90]),e[147]),a=[e[146],void 0,e[145],e[147]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[125]=void 0:e[125]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[18]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6],b):(f=c.item,e[124]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[125]=void 0:e[125]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[124],d.i64.cast([0,1e6])),e[18]),e[125]],e[113]=b[0],e[114]=b[1],e[115]=b[2],e[116]=b[3],e[117]=b[4],e[118]=b[5],e[119]=b[6],b)})},function(a){return e[121]=new d.Map(),e[121].set("task_id",e[113]),e[121].set("queue_name",e[114]),e[121].set("enqueue_timestamp_ms",e[115]),e[121].set("priority",e[116]),e[121].set("first_executed_timestamp_ms",e[117]),e[121].set("execution_time_ns",e[118]),e[121].set("echo_encoding_execution_time_ns",e[119]),e[122]=new d.Map(),e[122].set("task_metadata",e[121]),e[122].set("action_type",e[59]),e[122].set("content_type",e[60]),e[122].set("identifiers",void 0),e[122].set("identifiers_v2",e[54]),e[122].set("task_creation_source",void 0),e[122].set("message_payload_source",d.i64.cast([0,2])),e[108]!==void 0?(e[124]=e[108].get("stored_procedure"),e[125]=e[108].get("error_code"),e[126]=e[108].get("error_message"),e[127]="."):0,e[90]!==void 0?(e[124]=e[90].get("stored_procedure"),e[125]=e[90].get("error_code"),e[126]=e[90].get("error_message"),e[127]="."):0,e[123]=d.createArray(),e[124]=(e[123].push(e[90]),e[123]),a=[void 0,e[108],e[122],e[123]],e[109]=a[0],e[110]=a[1],e[111]=a[2],e[112]=a[3],a}])},function(a){return a=[e[109],e[110],e[111],e[112]],e[103]=a[0],e[104]=a[1],e[105]=a[2],e[106]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[118]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[119]=void 0:e[119]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[118],d.i64.cast([0,1e6])),e[18]),e[119]],e[107]=b[0],e[108]=b[1],e[109]=b[2],e[110]=b[3],e[111]=b[4],e[112]=b[5],e[113]=b[6],b):(f=c.item,e[118]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[119]=void 0:e[119]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[118],d.i64.cast([0,1e6])),e[18]),e[119]],e[107]=b[0],e[108]=b[1],e[109]=b[2],e[110]=b[3],e[111]=b[4],e[112]=b[5],e[113]=b[6],b)})},function(a){return e[115]=new d.Map(),e[115].set("task_id",e[107]),e[115].set("queue_name",e[108]),e[115].set("enqueue_timestamp_ms",e[109]),e[115].set("priority",e[110]),e[115].set("first_executed_timestamp_ms",e[111]),e[115].set("execution_time_ns",e[112]),e[115].set("echo_encoding_execution_time_ns",e[113]),e[116]=new d.Map(),e[116].set("task_metadata",e[115]),e[116].set("action_type",e[59]),e[116].set("content_type",e[60]),e[116].set("identifiers",void 0),e[116].set("identifiers_v2",e[54]),e[116].set("task_creation_source",void 0),e[116].set("message_payload_source",d.i64.cast([0,2])),e[102]!==void 0?(e[118]=e[102].get("stored_procedure"),e[119]=e[102].get("error_code"),e[120]=e[102].get("error_message"),e[121]="."):0,e[90]!==void 0?(e[118]=e[90].get("stored_procedure"),e[119]=e[90].get("error_code"),e[120]=e[90].get("error_message"),e[121]="."):0,e[117]=d.createArray(),e[118]=(e[117].push(e[90]),e[117]),a=[void 0,e[102],e[116],e[117]],e[103]=a[0],e[104]=a[1],e[105]=a[2],e[106]=a[3],a}])},function(a){return a=[e[103],e[104],e[105],e[106]],e[97]=a[0],e[98]=a[1],e[99]=a[2],e[100]=a[3],a}])},function(a){return a=[e[97],e[98],e[99],e[100]],e[91]=a[0],e[92]=a[1],e[93]=a[2],e[94]=a[3],a}])},function(a){return a=[e[91],e[92],e[93],e[94]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[99]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[100]=void 0:e[100]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[99],d.i64.cast([0,1e6])),e[18]),e[100]],e[88]=b[0],e[89]=b[1],e[90]=b[2],e[91]=b[3],e[92]=b[4],e[93]=b[5],e[94]=b[6],b):(f=c.item,e[99]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[100]=void 0:e[100]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[99],d.i64.cast([0,1e6])),e[18]),e[100]],e[88]=b[0],e[89]=b[1],e[90]=b[2],e[91]=b[3],e[92]=b[4],e[93]=b[5],e[94]=b[6],b)})},function(a){return e[96]=new d.Map(),e[96].set("task_id",e[88]),e[96].set("queue_name",e[89]),e[96].set("enqueue_timestamp_ms",e[90]),e[96].set("priority",e[91]),e[96].set("first_executed_timestamp_ms",e[92]),e[96].set("execution_time_ns",e[93]),e[96].set("echo_encoding_execution_time_ns",e[94]),e[97]=new d.Map(),e[97].set("task_metadata",e[96]),e[97].set("action_type",e[59]),e[97].set("content_type",e[60]),e[97].set("identifiers",void 0),e[97].set("identifiers_v2",e[54]),e[97].set("task_creation_source",void 0),e[97].set("message_payload_source",d.i64.cast([0,2])),e[83]!==void 0?(e[99]=e[83].get("stored_procedure"),e[100]=e[83].get("error_code"),e[101]=e[83].get("error_message"),e[102]="."):0,void 0!==void 0?(e[99]=(void 0).get("stored_procedure"),e[100]=(void 0).get("error_code"),e[101]=(void 0).get("error_message"),e[102]="."):0,e[98]=d.createArray(),e[99]=(e[98].push(void 0),e[98]),a=[void 0,e[83],e[97],e[98]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}])},function(a){return a=[e[84],e[85],e[86],e[87]],e[74]=a[0],e[75]=a[1],e[76]=a[2],e[77]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[89]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[90]=void 0:e[90]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[89],d.i64.cast([0,1e6])),e[18]),e[90]],e[78]=b[0],e[79]=b[1],e[80]=b[2],e[81]=b[3],e[82]=b[4],e[83]=b[5],e[84]=b[6],b):(f=c.item,e[89]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[90]=void 0:e[90]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[89],d.i64.cast([0,1e6])),e[18]),e[90]],e[78]=b[0],e[79]=b[1],e[80]=b[2],e[81]=b[3],e[82]=b[4],e[83]=b[5],e[84]=b[6],b)})},function(a){return e[86]=new d.Map(),e[86].set("task_id",e[78]),e[86].set("queue_name",e[79]),e[86].set("enqueue_timestamp_ms",e[80]),e[86].set("priority",e[81]),e[86].set("first_executed_timestamp_ms",e[82]),e[86].set("execution_time_ns",e[83]),e[86].set("echo_encoding_execution_time_ns",e[84]),e[87]=new d.Map(),e[87].set("task_metadata",e[86]),e[87].set("action_type",e[59]),e[87].set("content_type",e[60]),e[87].set("identifiers",void 0),e[87].set("identifiers_v2",e[54]),e[87].set("task_creation_source",void 0),e[87].set("message_payload_source",d.i64.cast([0,2])),e[73]!==void 0?(e[89]=e[73].get("stored_procedure"),e[90]=e[73].get("error_code"),e[91]=e[73].get("error_message"),e[92]="."):0,void 0!==void 0?(e[89]=(void 0).get("stored_procedure"),e[90]=(void 0).get("error_code"),e[91]=(void 0).get("error_message"),e[92]="."):0,e[88]=d.createArray(),e[89]=(e[88].push(void 0),e[88]),a=[void 0,e[73],e[87],e[88]],e[74]=a[0],e[75]=a[1],e[76]=a[2],e[77]=a[3],a}])},function(a){return a=[e[74],e[75],e[76],e[77]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[81]=void 0:e[81]=e[63],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[18]),e[81]],e[68]=b[0],e[69]=b[1],e[70]=b[2],e[71]=b[3],e[72]=b[4],e[73]=b[5],e[74]=b[6],b):(f=c.item,e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[63],d.i64.cast([0,0]))||d.i64.eq(e[63],void 0)?e[81]=void 0:e[81]=e[63],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[18]),e[81]],e[68]=b[0],e[69]=b[1],e[70]=b[2],e[71]=b[3],e[72]=b[4],e[73]=b[5],e[74]=b[6],b)})},function(a){return e[76]=new d.Map(),e[76].set("task_id",e[68]),e[76].set("queue_name",e[69]),e[76].set("enqueue_timestamp_ms",e[70]),e[76].set("priority",e[71]),e[76].set("first_executed_timestamp_ms",e[72]),e[76].set("execution_time_ns",e[73]),e[76].set("echo_encoding_execution_time_ns",e[74]),e[77]=new d.Map(),e[77].set("task_metadata",e[76]),e[77].set("action_type",e[59]),e[77].set("content_type",e[60]),e[77].set("identifiers",void 0),e[77].set("identifiers_v2",e[54]),e[77].set("task_creation_source",void 0),e[77].set("message_payload_source",d.i64.cast([0,2])),e[78]=new d.Map(),e[78].set("error_code",e[61]),e[78].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[78].set("error_message",""),e[78]!==void 0?(e[80]=e[78].get("stored_procedure"),e[81]=e[78].get("error_code"),e[82]=e[78].get("error_message"),e[83]="."):0,void 0!==void 0?(e[80]=(void 0).get("stored_procedure"),e[81]=(void 0).get("error_code"),e[82]=(void 0).get("error_message"),e[83]="."):0,e[79]=d.createArray(),a=[void 0,e[78],e[77],e[79]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}])},function(a){return a=[e[55],e[56],e[57],e[58]],e[49]=a[0],e[50]=a[1],e[51]=a[2],e[52]=a[3],a}]))})},function(a){return a=[e[49],e[50],e[51],e[52]],e[41]=a[0],e[42]=a[1],e[43]=a[2],e[44]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[57]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[57],d.i64.cast([0,1e6])),e[18]),void 0],e[45]=f[0],e[46]=f[1],e[47]=f[2],e[48]=f[3],e[49]=f[4],e[50]=f[5],e[51]=f[6],f):(c=b.item,e[57]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[57],d.i64.cast([0,1e6])),e[18]),void 0],e[45]=f[0],e[46]=f[1],e[47]=f[2],e[48]=f[3],e[49]=f[4],e[50]=f[5],e[51]=f[6],f)})},function(a){return e[53]=new d.Map(),e[53].set("task_id",e[45]),e[53].set("queue_name",e[46]),e[53].set("enqueue_timestamp_ms",e[47]),e[53].set("priority",e[48]),e[53].set("first_executed_timestamp_ms",e[49]),e[53].set("execution_time_ns",e[50]),e[53].set("echo_encoding_execution_time_ns",e[51]),e[54]=new d.Map(),e[54].set("task_metadata",e[53]),e[54].set("action_type",void 0),e[54].set("content_type",void 0),e[54].set("identifiers",void 0),e[54].set("identifiers_v2",void 0),e[54].set("task_creation_source",void 0),e[54].set("message_payload_source",d.i64.cast([0,2])),e[55]=new d.Map(),e[55].set("error_code",d.i64.cast([0,24])),e[55].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[55].set("error_message",""),e[55]!==void 0?(e[57]=e[55].get("stored_procedure"),e[58]=e[55].get("error_code"),e[59]=e[55].get("error_message"),e[60]="."):0,void 0!==void 0?(e[57]=(void 0).get("stored_procedure"),e[58]=(void 0).get("error_code"),e[59]=(void 0).get("error_message"),e[60]="."):0,e[56]=d.createArray(),a=[void 0,e[55],e[54],e[56]],e[41]=a[0],e[42]=a[1],e[43]=a[2],e[44]=a[3],a}])},function(a){return a=[e[41],e[42],e[43],e[44]],e[11]=a[0],e[12]=a[1],e[13]=a[2],e[14]=a[3],a}]):d.sequence([function(b){return e[22]=e[9].get("errors"),e[23]=e[9].get("errors"),d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[36]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[36],d.i64.cast([0,1e6])),e[18]),void 0],e[24]=f[0],e[25]=f[1],e[26]=f[2],e[27]=f[3],e[28]=f[4],e[29]=f[5],e[30]=f[6],f):(c=b.item,e[36]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[36],d.i64.cast([0,1e6])),e[18]),void 0],e[24]=f[0],e[25]=f[1],e[26]=f[2],e[27]=f[3],e[28]=f[4],e[29]=f[5],e[30]=f[6],f)})},function(a){return e[32]=new d.Map(),e[32].set("task_id",e[24]),e[32].set("queue_name",e[25]),e[32].set("enqueue_timestamp_ms",e[26]),e[32].set("priority",e[27]),e[32].set("first_executed_timestamp_ms",e[28]),e[32].set("execution_time_ns",e[29]),e[32].set("echo_encoding_execution_time_ns",e[30]),e[33]=new d.Map(),e[33].set("task_metadata",e[32]),e[33].set("action_type",void 0),e[33].set("content_type",void 0),e[33].set("identifiers",void 0),e[33].set("identifiers_v2",void 0),e[33].set("task_creation_source",void 0),e[33].set("message_payload_source",d.i64.cast([0,2])),e[34]=new d.Map(),e[34].set("error_code",d.i64.cast([0,1])),e[34].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[34].set("error_message",""),e[34]!==void 0?(e[36]=e[34].get("stored_procedure"),e[37]=e[34].get("error_code"),e[38]=e[34].get("error_message"),e[39]="."):0,void 0!==void 0?(e[36]=(void 0).get("stored_procedure"),e[37]=(void 0).get("error_code"),e[38]=(void 0).get("error_message"),e[39]="."):0,e[35]=d.createArray(),a=[void 0,e[34],e[33],e[35]],e[11]=a[0],e[12]=a[1],e[13]=a[2],e[14]=a[3],a}])},function(a){return e[15]=d.i64.of_float(Date.now()),e[16]=d.i64.random(),e[19]="Finishing execution. Execution time: ",e[20]=d.i64.to_string(d.i64.sub(e[15],e[0])),e[21]=" ms",e[17]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[17],e[19],e[17],e[20],e[17],e[21]].join("")),d.i64.eq(d.i64.mod_(e[16],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[22]=",",e[23]=d.createArray(),void 0!==void 0?e[24]=(e[23].push(void 0),e[23]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[19],e[22],e[20],e[22],e[21]].join(""),e[23],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[11],e[12],e[13],e[14]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure";a.__tables__=["pending_tasks","secure_encrypted_backups_client_state","pending_backups_context_v2","secure_encrypted_backups_epochs"];d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.createArray(),d[7]=c.i64.of_int32(d[5].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(a){return d[23]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[23]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],a})},function(a){return d[24]!==void 0?d[26]=(d[6].push(d[24]),d[6]):0}])}):c.resolve()},function(a){return d[8]=c.i64.of_int32(d[6].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[6],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[9]=d[23]}]):c.resolve(d[9]=void 0)},function(a){return d[2]?d[10]=!1:d[10]=!0,d[10]?(d[3]?d[23]=!1:d[23]=!0,d[23]?(a=[void 0,void 0,d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a):(a=[void 0,d[3],d[9],d[6],d[4]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],d[28]=a[4],a),a=[d[24],d[25],d[26],d[27],d[28]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a):(d[23]=d[2].get("payload"),a=[d[23],d[3],d[9],d[6],d[4]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a),d[23]=new c.Map(),d[24]=d[23].set("success",d[11]),d[25]=d[23].set("failure",d[12]),d[26]=d[23].set("protobuf_failure",d[13]),d[27]=d[23].set("protobuf_failures",d[14]),d[28]=d[23].set("context",d[15]),d[29]=c.toJSON(d[23]),d[16]=d[29],d[17]=c.i64.of_float(Date.now()),d[18]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[17],d[0])),d[22]=" ms",d[19]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[19],d[20],d[19],d[21],d[19],d[22]].join("")),c.i64.eq(c.i64.mod_(d[18],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[16],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure";a.__tables__=["pending_backups_context_v2"];e.exports=a}),null);
__d("MAWAsyncEBPendingQueryPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h=new Map(),i=new Map(),j=new Map(),k=new Map(),l=new Map(),m=new Map();function a(a){var c=new(g||(g=b("Promise")))(function(b,c){i.set(a,b),k.set(a,c)});h.set(a,c);return c}function c(a,b){j.set(a,b)}function d(a){return j.get(a)}function e(a){var c=new(g||(g=b("Promise")))(function(b,c){l.set(a,{data:null,resolve:b}),m.set(a,c)});return c}function n(a,b){var c=i.get(a);c!=null&&(i["delete"](a),c(b));c=l.get(a);c!=null&&l.set(a,{data:b,resolve:c.resolve})}function o(a,b){var c=k.get(a);c!=null&&(i["delete"](a),c(b));c=m.get(a);c!=null&&(m["delete"](a),c(b),l["delete"](a))}function p(a){var b=l.get(a);b!=null&&b.data!=null&&(b.resolve(b.data),l["delete"](a),m["delete"](a))}f.getPendingQueryPromiseFromTrace=a;f.setJidFromThreadId=c;f.getJidFromThreadId=d;f.getWaitForRestorePromiseFromTrace=e;f.resolvePendingQueryIfPresent=n;f.rejectPendingQueryIfPresent=o;f.resolvePendingQueryUponReStore=p}),66);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("messenger_web").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MNXMAPreviewImageDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21});f["default"]=a}),66);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Random","ReQL","WAArmadilloXMA.pb","WAJids","cr:3468","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a,b,c,e,f,g){var i=b.ctas,j=b.defaultCTA,m=k(b.targetId,b.targetType),q=(h||(h=d("I64"))).of_int32(d("Random").uint32());if(j!=null){var r=n(j,q,e,c,f,m,b.targetType);await p(a,r,q,g.defaultCta)}r=d("MAWXMAUtils").isFBXMAPostMention(b.targetType)&&b.author===d("WAJids").AUTHOR_ME;b=[];i!=null&&!r&&(b=await Promise.all(i.map(function(b,d){var h=l(q,d);b=o(b,h,e,c,f,m);d=d===0?g.attachmentCta1:d===1?g.attachmentCta2:d===2?g.attachmentCta3:void 0;return p(a,b,h,d)})));return{attachmentCta1Id:b.length>0?b[0]:void 0,attachmentCta2Id:b.length>1?b[1]:void 0,attachmentCta3Id:b.length>2?b[2]:void 0,defaultCtaId:j==null?void 0:q}}function j(a){var b="xma_web_url";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b="xma_rtc_missed_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:b="igd_web_post_share";break}return b}function k(a,b){return d("MAWXMAUtils").isFBXMAPostMention(b)?void 0:a!=null?d("MAWBridgeUIEventDataValidation").stringToI64Opt(a):void 0}function l(a,b){return(h||(h=d("I64"))).add(a,h.of_int32(b+1))}function m(a,b,c,e,f,g,i){i===void 0&&(i="xma_web_url");var j=a.actionUrl,k=a.nativeUrl;return{actionContentBlob:void 0,actionUrl:j!=null?j:k,attachmentFbid:f,attachmentIndex:(h||(h=d("I64"))).zero,ctaId:b,enableExtensions:!1,extensionHeightType:void 0,messageId:c,nativeUrl:k!=null?k:j,platformToken:void 0,targetId:(f=g)!=null?f:void 0,threadKey:e,title:(b=a.title)!=null?b:"Tap to view status update",type_:(c=i)!=null?c:"xma_web_url",urlWebviewType:void 0}}function n(a,b,c,d,e,f,g){g=j(g);return m(a,b,c,d,e,f,g)}function o(a,b,c,d,e,f){var g;switch(a.ctaType){case"contact_sharing_profile":g="contact_sharing_profile";break;case"contact_sharing_message":g="contact_sharing_message";break}return m(a,b,c,d,e,f,g)}async function p(a,b,c,d){d!=null?await a.attachment_ctas.upsert([d.ctaId],b):await a.attachment_ctas.add(b);return c}async function e(a,b,c){var e=null,f={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,c));e!=null&&(f.defaultCta=await q(a,e.defaultCtaId),f.attachmentCta1=await q(a,e.attachmentCta1Id),f.attachmentCta2=await q(a,e.attachmentCta2Id),f.attachmentCta3=await q(a,e.attachmentCta3Id));return[e,f]}function q(a,b){return b==null?Promise.resolve(void 0):(a=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachment_ctas).getKeyRange(b)))!=null?a:void 0}function f(a,e,f,g,j,k,l,m,n){var o,p=b("cr:3468")!=null?(h||(h=d("I64"))).of_int32(b("cr:3468").getInChatMsgIdFromMsgId(g)):(h||(h=d("I64"))).zero,q=r(a),w=d("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(a.targetType);w=w?(h||(h=d("I64"))).of_int32(w):void 0;o=(o=a==null?void 0:(o=a.defaultCTA)==null?void 0:o.actionUrl)!=null?o:a==null?void 0:(o=a.defaultCTA)==null?void 0:o.nativeUrl;a.defaultPreviewMediaId!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+n+"."+a.targetType+"."+(a.defaultPreviewMediaPlaintextHash!=null?"true":"false"));n=c("gkx")("11351");return{accessibilitySummaryText:void 0,actionUrl:(o=o)!=null?o:void 0,attachmentCta1Id:j,attachmentCta2Id:k,attachmentCta3Id:l,attachmentFbid:f,attachmentIndex:(h||(h=d("I64"))).zero,attachmentLoggingType:void 0,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:h.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:t(a.ctas,1),cta1Type:s(a.ctas,1),cta2Title:t(a.ctas,2),cta2Type:s(a.ctas,2),cta3Title:t(a.ctas,3),cta3Type:s(a.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:m,defaultCtaTitle:(o=a.defaultCTA)==null?void 0:o.title,defaultCtaType:q.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:a.filesize!=null?(h||(h=d("I64"))).of_int32(a.filesize):void 0,gatingTitle:a.overlayTitle,gatingType:a.overlayIconGlyph!=null?String(a.overlayIconGlyph):void 0,hasMedia:a.hasMedia!=null?a.hasMedia:!1,hasXma:!0,hasXmaFavicon:n?a.faviconPlaintextHash!=null:a.faviconMediaId!=null,hasXmaHeaderImage:n?a.headerMediaPlaintextHash!=null:a.headerMediaId!=null,hasXmaPreview:n?a.defaultPreviewMediaPlaintextHash!=null:a.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:a.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines!=null?(h||(h=d("I64"))).of_int32(a.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:a.maxTitleNumOfLines!=null?(h||(h=d("I64"))).of_int32(a.maxTitleNumOfLines):void 0,messageId:g,miniPreview:void 0,offlineAttachmentId:(j=a.offlineAttachmentId)!=null?j:f,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:q.height,previewHeightLarge:a.previewHeightLarge!=null?(h||(h=d("I64"))).of_int32(a.previewHeightLarge):void 0,previewImageDecorationType:v(a.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:q.width,previewWidthLarge:a.previewWidthLarge!=null?(h||(h=d("I64"))).of_int32(a.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:a.subtitleText,targetId:void 0,threadKey:e,timestampMs:p,titleText:a.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:w,xmaDataclass:a.xmaDataclass,xmaFaviconFbid:n?a.faviconPlaintextHash:c("gkx")("8162")?(k=a.faviconPlaintextHash)!=null?k:(l=a.faviconMediaId)==null?void 0:l.toString():(m=a.faviconMediaId)==null?void 0:m.toString(),xmaHeaderImageFbid:n?a.headerMediaPlaintextHash:c("gkx")("8162")?(o=a.headerMediaPlaintextHash)!=null?o:(g=a.headerMediaId)==null?void 0:g.toString():(j=a.headerMediaId)==null?void 0:j.toString(),xmaLayoutType:a.xmaLayoutType!=null?u(a.xmaLayoutType):void 0,xmaPreviewFbid:n?a.defaultPreviewMediaPlaintextHash:c("gkx")("8162")?(f=a.defaultPreviewMediaPlaintextHash)!=null?f:(q=a.defaultPreviewMediaId)==null?void 0:q.toString():(e=a.defaultPreviewMediaId)==null?void 0:e.toString(),xmasTemplateType:a.xmaLayoutType!=null?u(a.xmaLayoutType):void 0}}function r(a){var b;switch(a.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:b={height:(h||(h=d("I64"))).of_int32(108),width:(h||(h=d("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:b={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:b={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_group_video"};break;default:b={height:a.previewHeight!=null?(h||(h=d("I64"))).of_int32(a.previewHeight):void 0,width:a.previewWidth!=null?(h||(h=d("I64"))).of_int32(a.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return b}function s(a,b){if(a==null)return;a=a[b-1];if(a==null)return;b=a.buttonType;a=a.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return b===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}function t(a,b){if(a==null)return;a=a[b-1];if(a!=null)return a.title}function u(a){return a===0||a!==3?(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)}function v(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").COLLAGE);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}}g.addAttachmentCtas=a;g.maybeBridgeToLSTargetId=k;g.getCtaIdFromDefaultCtaId=l;g.composeDefaultAttachmentCta=n;g.composeAttachmentCta=o;g.getExistingAttachmentAndAttachmentCtas=e;g.composeAttachmentXMA=f}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return(h||(h=d("I64"))).of_float(a)}function c(a){return(h||(h=d("I64"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("MAWEBEnabledStateManager").MAWEBEnabledStateManager)();function i(){h.set(c("MAWEBSwitch").isEnabled()&&c("MAWEBLSInWorkerSwitch").isEnabled())}c("MAWEBSwitch").onSet(function(){i()});c("MAWEBLSInWorkerSwitch").onSet(function(){i()});i();g.MAWEBCombinedSwitch=h}),98);
__d("MAWExtractMsFromExternalId",["I64","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""]);i=function(){return a};return a}function j(a){return new Date(a).getTime()>0}var k=2199023255551;function a(a){try{a=(h||(h=d("I64"))).of_string_opt(a);if(a!=null){return(a=l(a))!=null?a:0}}catch(a){d("WALogger").ERROR(i(),a)}return 0}function l(a){a=Number((h||(h=d("I64"))).to_string(h.and_(h.lsr_(a,22),h.of_float(k))));if(j(a)){a=Math.floor(Number(a)%1e5/100);return a}}g.extractMsFromStanzaId=a;g.extractMsFromExternalId=l}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(d("WAJids").isAuthorSystem(a)||b==null||e==null){c("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",e);return}return{author:a,chat:b,externalId:e}}function a(a){var b;return j(a.author,a.threadJid,(b=a.externalId)!=null?b:a.editExternalId)}function b(a){return d("WAJids").isAuthorMe(a)?d("WAGlobals").getMyUserJid():a}function e(a,b){a=(h||(h=d("I64"))).to_string(a);b=(i||(i=d("LSIntEnum"))).unwrapIntEnum(b);switch(b){case 15:return d("MAWJids").jidUtils.toUserJid(a);case 16:return d("WAJids").toGroupJid(a);default:return null}}function f(a){return m(a.threadJid,a.externalId)}function k(a){return l(a.threadJid,a.externalId)}function l(a,b){a=d("MAWDbMsg").toMsgId(m(a,b));if(a==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",b);return a}function m(a,b){return a+"."+b}g.maybeToProtocolMsgId=j;g.toProtocolMsgId=a;g.getAuthorJid=b;g.LSJidtoChatJid=e;g.toProtocolMsgIdStringForMAWStorage=f;g.formatProtocolMsgIdFromMsg=k;g.formatProtocolMsgIdFromExternalId=l}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={};k.name="Armadillo";k.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.name="Armadillo$Metadata";l.internalSpec={};m.name="Armadillo$Payload";m.internalSpec={content:[1,h.TYPES.MESSAGE,E],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};n.name="Armadillo$SubProtocolPayload";n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};o.name="Armadillo$Signal";o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:["encryptedBackupsSecrets"]}};p.name="Armadillo$Signal$EncryptedBackupsSecrets";p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch";q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.name="Armadillo$ApplicationData";r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,D],aiBotResponse:[2,h.TYPES.MESSAGE,t],messageHistoryDocumentMessage:[3,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}};s.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage";s.internalSpec={document:[1,h.TYPES.MESSAGE,i.SubProtocolSpec]};t.name="Armadillo$ApplicationData$AIBotResponseMessage";t.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};u.name="Armadillo$ApplicationData$MetadataSyncAction";u.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,x],messageAction:[102,h.TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction";v.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete";w.internalSpec={};x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction";x.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,A],chatDelete:[102,h.TYPES.MESSAGE,z],chatRead:[103,h.TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead";y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],read:[2,h.TYPES.BOOL]};z.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete";z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C]};A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive";A.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],archived:[2,h.TYPES.BOOL]};B.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage";B.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};C.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange";C.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,B]};D.name="Armadillo$ApplicationData$MetadataSyncNotification";D.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};E.name="Armadillo$Content";E.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,O],screenshotAction:[3,h.TYPES.MESSAGE,K],extendedContentMessage:[4,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,N],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,M],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,L],imageGalleryMessage:[8,h.TYPES.MESSAGE,J],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,F],bumpExistingMessage:[11,h.TYPES.MESSAGE,I],noteReplyMessage:[13,h.TYPES.MESSAGE,H],ravenMessageMsgr:[14,h.TYPES.MESSAGE,N],networkVerificationMessage:[15,h.TYPES.MESSAGE,G],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}};F.name="Armadillo$Content$PaymentsTransactionMessage";F.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec]};G.name="Armadillo$Content$NetworkVerificationMessage";G.internalSpec={codeText:[1,h.TYPES.STRING]};H.name="Armadillo$Content$NoteReplyMessage";H.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}};I.name="Armadillo$Content$BumpExistingMessage";I.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};J.name="Armadillo$Content$ImageGalleryMessage";J.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};K.name="Armadillo$Content$ScreenshotAction";K.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};L.name="Armadillo$Content$ExtendedContentMessageWithSear";L.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};M.name="Armadillo$Content$RavenActionNotifMessage";M.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};N.name="Armadillo$Content$RavenMessage";N.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};O.name="Armadillo$Content$CommonSticker";O.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=s;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$PaymentsTransactionMessageSpec=F;g.Armadillo$Content$NetworkVerificationMessageSpec=G;g.Armadillo$Content$NoteReplyMessageSpec=H;g.Armadillo$Content$BumpExistingMessageSpec=I;g.Armadillo$Content$ImageGalleryMessageSpec=J;g.Armadillo$Content$ScreenshotActionSpec=K;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=L;g.Armadillo$Content$RavenActionNotifMessageSpec=M;g.Armadillo$Content$RavenMessageSpec=N;g.Armadillo$Content$CommonStickerSpec=O}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="LocallyTransformedMessage";a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.name="LocallyTransformedMessage$PollUpdateAdminMessage";b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({CHANGED:1,REMOVED:2});e=a({PINNED:1,UNPINNED:2});f=a({ALL_MEMBERS:1,ADMINS_ONLY:2});b=a({ADDED:1,REMOVED:2});a=a({ADDED:1,REMOVED:2});var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={};h.name="MiTransportAdminMessage";h.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,u],nicknameChanged:[2,d.TYPES.MESSAGE,t],groupParticipantChanged:[3,d.TYPES.MESSAGE,s],groupAdminChanged:[4,d.TYPES.MESSAGE,r],groupNameChanged:[5,d.TYPES.MESSAGE,q],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,p],messagePinned:[7,d.TYPES.MESSAGE,o],groupImageChanged:[8,d.TYPES.MESSAGE,n],quickReactionChanged:[9,d.TYPES.MESSAGE,m],linkCta:[10,d.TYPES.MESSAGE,k],iconChanged:[11,d.TYPES.MESSAGE,j],disappearingSettingChanged:[12,d.TYPES.MESSAGE,i],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged"]}};i.name="MiTransportAdminMessage$DisappearingSettingChanged";i.internalSpec={disappearingSettingDurationSeconds:[1,d.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,d.TYPES.INT32]};j.name="MiTransportAdminMessage$IconChanged";j.internalSpec={threadIcon:[1,d.TYPES.STRING]};k.name="MiTransportAdminMessage$LinkCta";k.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,l],__oneofs__:{content:["ukOsaAdminText"]}};l.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText";l.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};m.name="MiTransportAdminMessage$QuickReactionChanged";m.internalSpec={emojiName:[1,d.TYPES.STRING]};n.name="MiTransportAdminMessage$GroupImageChanged";n.internalSpec={action:[1,d.TYPES.ENUM,c]};o.name="MiTransportAdminMessage$MessagePinned";o.internalSpec={action:[1,d.TYPES.ENUM,e]};p.name="MiTransportAdminMessage$GroupMembershipAddModeChanged";p.internalSpec={mode:[1,d.TYPES.ENUM,f]};q.name="MiTransportAdminMessage$GroupNameChanged";q.internalSpec={groupName:[1,d.TYPES.STRING]};r.name="MiTransportAdminMessage$GroupAdminChanged";r.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,b]};s.name="MiTransportAdminMessage$GroupParticipantChanged";s.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};t.name="MiTransportAdminMessage$NicknameChanged";t.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};u.name="MiTransportAdminMessage$ChatThemeChanged";u.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$GroupImageChanged$Action=c;g.MiTransportAdminMessage$MessagePinned$Action=e;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=f;g.MiTransportAdminMessage$GroupAdminChanged$Action=b;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=h;g.MiTransportAdminMessage$DisappearingSettingChangedSpec=i;g.MiTransportAdminMessage$IconChangedSpec=j;g.MiTransportAdminMessage$LinkCtaSpec=k;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=l;g.MiTransportAdminMessage$QuickReactionChangedSpec=m;g.MiTransportAdminMessage$GroupImageChangedSpec=n;g.MiTransportAdminMessage$MessagePinnedSpec=o;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=p;g.MiTransportAdminMessage$GroupNameChangedSpec=q;g.MiTransportAdminMessage$GroupAdminChangedSpec=r;g.MiTransportAdminMessage$GroupParticipantChangedSpec=s;g.MiTransportAdminMessage$NicknameChangedSpec=t;g.MiTransportAdminMessage$ChatThemeChangedSpec=u}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.name="TransportEvent";f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.name="TransportEvent$Event";b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.name="TransportEvent$Event$IcdcAlert";h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.name="TransportEvent$Event$DeviceChange";i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.name="TransportEvent$Placeholder";j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.name="ConsumerApplication";e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.name="ConsumerApplication$Payload";f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.name="ConsumerApplication$SubProtocolPayload";i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.name="ConsumerApplication$Metadata";j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.name="ConsumerApplication$Signal";k.internalSpec={};l.name="ConsumerApplication$ApplicationData";l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.name="ConsumerApplication$Content";m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.name="ConsumerApplication$EditMessage";n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.name="ConsumerApplication$PollAddOptionMessage";o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.name="ConsumerApplication$PollVoteMessage";p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.name="ConsumerApplication$PollEncValue";q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.name="ConsumerApplication$PollUpdateMessage";r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.name="ConsumerApplication$PollCreationMessage";s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.name="ConsumerApplication$Option";t.internalSpec={optionName:[1,h.TYPES.STRING]};u.name="ConsumerApplication$ReactionMessage";u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.name="ConsumerApplication$RevokeMessage";v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.name="ConsumerApplication$ViewOnceMessage";w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.name="ConsumerApplication$GroupInviteMessage";x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.name="ConsumerApplication$LiveLocationMessage";y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.name="ConsumerApplication$ContactsArrayMessage";z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.name="ConsumerApplication$ContactMessage";A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.name="ConsumerApplication$StatusTextMesage";B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.name="ConsumerApplication$ExtendedTextMessage";C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.name="ConsumerApplication$LocationMessage";D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.name="ConsumerApplication$StickerMessage";E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.name="ConsumerApplication$DocumentMessage";F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.name="ConsumerApplication$VideoMessage";G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.name="ConsumerApplication$AudioMessage";H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.name="ConsumerApplication$ImageMessage";I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.name="ConsumerApplication$InteractiveAnnotation";J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.name="ConsumerApplication$Point";K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.name="ConsumerApplication$Location";L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.name="ConsumerApplication$MediaPayload";M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.name="WAMediaTransport";f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.name="WAMediaTransport$Ancillary";i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.name="WAMediaTransport$Ancillary$Thumbnail";j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail";k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.name="WAMediaTransport$Integral";l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.name="ImageTransport";m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.name="ImageTransport$Ancillary";n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.name="ImageTransport$Integral";o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.name="VideoTransport";p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.name="VideoTransport$Ancillary";q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b],accessibilityLabel:[8,h.TYPES.STRING],isHd:[9,h.TYPES.BOOL]};r.name="VideoTransport$Integral";r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.name="AudioTransport";s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.name="AudioTransport$Ancillary";t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.name="AudioTransport$Ancillary$AvatarAudio";u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations";v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.name="AudioTransport$Integral";w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.name="DocumentTransport";x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.name="DocumentTransport$Ancillary";y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.name="DocumentTransport$Integral";z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.name="StickerTransport";A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.name="StickerTransport$Ancillary";B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING],accessibilityLabel:[9,h.TYPES.STRING]};C.name="StickerTransport$Integral";C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.name="ContactTransport";D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.name="ContactTransport$Ancillary";E.internalSpec={displayName:[1,h.TYPES.STRING]};F.name="ContactTransport$Integral";F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};c.name="MessageApplication";c.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,j],metadata:[2,h.TYPES.MESSAGE,e]};e.name="MessageApplication$Metadata";e.internalSpec={forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,f],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],chatEphemeralSetting:[1,h.TYPES.MESSAGE,o],ephemeralSettingList:[2,h.TYPES.MESSAGE,i],ephemeralSharedSecret:[3,h.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};f.name="MessageApplication$Metadata$QuotedMessage";f.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,j]};i.name="MessageApplication$Metadata$EphemeralSettingMap";i.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,o]};j.name="MessageApplication$Payload";j.internalSpec={coreContent:[1,h.TYPES.MESSAGE,n],signal:[2,h.TYPES.MESSAGE,m],applicationData:[3,h.TYPES.MESSAGE,l],subProtocol:[4,h.TYPES.MESSAGE,k],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};k.name="MessageApplication$SubProtocolPayload";k.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};l.name="MessageApplication$ApplicationData";l.internalSpec={};m.name="MessageApplication$Signal";m.internalSpec={};n.name="MessageApplication$Content";n.internalSpec={};o.name="MessageApplication$EphemeralSetting";o.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],ephemeralityType:[5,h.TYPES.ENUM,b],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=b;g.MessageApplicationSpec=c;g.MessageApplication$MetadataSpec=e;g.MessageApplication$Metadata$QuotedMessageSpec=f;g.MessageApplication$Metadata$EphemeralSettingMapSpec=i;g.MessageApplication$PayloadSpec=j;g.MessageApplication$SubProtocolPayloadSpec=k;g.MessageApplication$ApplicationDataSpec=l;g.MessageApplication$SignalSpec=m;g.MessageApplication$ContentSpec=n;g.MessageApplication$EphemeralSettingSpec=o}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null?void 0:(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null?void 0:(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null?void 0:(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b;this.kind="imageTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(b=a.image)==null?void 0:b.payload);this.caption=a.caption},i=function(a){var b;this.kind="audioTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},j=function(a){var b;this.kind="videoTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},k=function(a){var b;this.kind="documentTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},l=function(a){this.kind="stickerTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},m=function(a){var b=this;this.kind="extendedContentMessage";this.favicon=c("memoize")(function(){var a;return((a=b.payload)==null?void 0:(a=a.favicon)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null?void 0:(a=a.favicon)==null?void 0:a.payload)});this.headerImage=c("memoize")(function(){var a;return((a=b.payload)==null?void 0:(a=a.headerImage)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null?void 0:(a=a.headerImage)==null?void 0:a.payload)});this.previews=c("memoize")(function(){var a;return(a=(a=b.payload)==null?void 0:(a=a.previews)==null?void 0:a.map(function(a){return d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,a.payload)}))!=null?a:[]});this.payload=a},n=function(){function a(a){this.kind="armadillo",this.bytes=a,this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var b=a.prototype;b.extendedContentMessage=function(){var a;a=(a=this.payload)==null?void 0:(a=a.content)==null?void 0:a.extendedContentMessage;return a==null?null:new m(a)};return a}(),o=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new h(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new i(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new j(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new k(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new l(a)});this.bytes=a;this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},p=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null)switch(a.subprotocolType){case"consumerMessage":return new o(c("nullthrows")(a.payload));case"armadillo":return new n(c("nullthrows")(a.payload));case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}});this.bytes=a;this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),q=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},r=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},s=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},t="SKIP_CACHE",u=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new q(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new r(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new p(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new s(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();u.create=c("memoizeWithArgsWeak")(function(a){return new u(a,t)});g.DeserializedExtendedContentMessage=m;g.DeserializedConsumerApplication=o;g.DeserializedMessageApplication=p;g.DeserializedTransportEvent=q;g.DeserializedLocallyTransformedMessage=r;g.DeserializedAdminMessage=s;g.DeserializedBackupMessage=u}),98);
__d("MAWSupportedDocumentTypes",[],(function(a,b,c,d,e,f){"use strict";var g=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function a(a){if(a==null)return!1;a=a.includes(".")?a.split(".").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);
__d("MpsTypes",["$InternalEnum","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function c(a){return a}function e(a){return a}function f(a){return d("WAStanzaUtils").toStanzaId(a)}function h(a){return a}function i(a){return a}function j(a){return a}var k=b("$InternalEnum").Mirrored(["Send","Receive"]);b=b("$InternalEnum")({Unknown:0,Noop:1,UpsertTopLevel:2,UpsertSupplemental:3,DeleteTopLevel:4,DeleteTopLevelWithPlaceholder:5,Preprocess:6,DeleteSupplemental:7,DeleteThread:8});g.toBytes=a;g.toTimestamp=c;g.toMessageId=e;g.messageIdToStanzaId=f;g.toThreadId=h;g.toSupplementalKey=i;g.fromSupplementalKey=j;g.InsertionSource=k;g.ActionType=b}),98);
__d("MpsToBridgeMessageId",["MAWDbMsg","MpsTypes","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("nullthrows")(d("MAWDbMsg").toMsgId(a+"_"+b+"_m"))}function b(a){a=a.split("_");var b=a[0];a=a[1];return{messageId:d("MpsTypes").toMessageId(a),threadId:d("MpsTypes").toThreadId(b)}}g.mpsToBridgeMsgId=a;g.bridgeMsgIdToMps=b}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MAWProtobufDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){this.loadMessage=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",a)},this.loadMessages=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",a)}},i;function a(){i==null&&(i=new h());return i}g.mps=a}),98);
__d("WAGetPlatformFromStanzaId",["I64","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""]);i=function(){return a};return a}function a(a){try{var b=(1<<5)-1;b=(h||(h=d("I64"))).of_float(b<<17);var c=h.of_float(0),e=h.of_float(1<<17);b=h.and_(h.of_string(a),b);if((h||(h=d("I64"))).equal(b,c))return"web";return(h||(h=d("I64"))).equal(b,e)?"mobile":"unknown"}catch(b){d("WALogger").ERROR(i(),a,b);return"error"}}g.getPlatformFromStanzaId=a}),98);
__d("WAMediaHdType",[],(function(a,b,c,d,e,f,g){"use strict";a=0;b=1;c=2;d={HD_TYPE_NONE:a,HD_TYPE_LQ_4K:b,HD_TYPE_HQ_4K:c};g.HD_TYPE_NONE=a;g.HD_TYPE_LQ_4K=b;g.HD_TYPE_HQ_4K=c;g.HD_TYPE=d}),98);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a==null?void 0:(a=a.payload)==null?void 0:a.content;if((a==null?void 0:a.audioMessage)!=null)return"ptt";if((a==null?void 0:a.videoMessage)!=null){var b,c;b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,a==null?void 0:(b=a.videoMessage)==null?void 0:(b=b.video)==null?void 0:b.payload);return(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifPlayback)===!0||(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifAttribution)!=null?"gif":"video"}if((a==null?void 0:a.documentMessage)!=null)return"document";if((a==null?void 0:a.stickerMessage)!=null)return"sticker";if((a==null?void 0:a.imageMessage)!=null)return"image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);
__d("last",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=null;if(Array.isArray(a)||typeof a==="string")a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;return b?b.value:null}f["default"]=a}),66);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(a,b,c,d,e,f,g){function a(a){if(a==null||a.text==null||a.mentions==null||a.mentions.length===0)return a;var b=a.text,c=[],e=[],f=0;for(var g of a.mentions){var h=g.offset,i=g.length,j=g.mentionedJid,k=g.mentionType;if(k!==d("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||h==null||i==null||j==null)continue;e.push(j+"@msgr");c.push(b.substring(f,h));c.push("@"+j+"@msgr");f=h+i}if(e.length===0)return a;c.push(b.substring(f));return babelHelpers["extends"]({},a,{text:c.join(""),mentionedJid:e,mentions:[]})}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("MultiwaySharedTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,SFU:1,P2P:2});d=a({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f=a({OFFER:0,PRANSWER:1,ANSWER:2,PROFFER:3});b=a({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});var g=a({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2}),h=a({NOT_SET:0,CONTROL:1,TEST:2}),i=a({NOT_SET:0,CONTROL:1,TEST:2}),j=a({NotPaused:0,Paused:1}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8}),m=a({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2}),n=a({UNKNOWN:0,DEFAULT:1,SCREEN_SHARE:2}),o=a({UNSPECIFIED:0,FNA:1,FNA_PREFERRED:2});a=a({IntValue:"intValue",StringValue:"stringValue"});e.exports={ConferenceType:d,E2eeInfraMandatedExpStatus:h,E2eeMode:g,EdgerayType:o,EndpointServiceType:l,MediaPath:c,MediaPauseStatus:j,MediaType:k,P2PSFrameExpStatus:i,QuickExperimentValue$Types:a,RenderedStreamType:n,SdpType:f,SubscriptionType:m,VideoQuality:b}}),null);
__d("WebrtcSignalingCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3,CUSTOM_VIDEO:4,CUSTOM_AUDIO:5});d=a({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f=a({NONE:0,AVATAR:1,AUGMENTED_CALLING:2,SCENE_COMPOSITION:3,STEREO_VIDEO:4,SHARED_STATE:5,CODEC_AVATAR_2D:6});b=a({NONE:0,AMBISONIC:1,CONVERSATION_BOT:2,MONOMIX:3});e.exports={ClientStack:d,CustomAudioContentType:b,CustomVideoContentType:f,TrackLabel:c}}),null);
__d("MultiwaySharedSerializers",["MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{cluster:"",nonce:""}}function b(){return{cluster:"",conferenceName:"",nonce:"",userId:"",clientSessionId:""}}function e(){return{userId:"",deviceId:"",appId:"",appVersion:"",appBuildNumber:""}}function f(){return{mode:d("MultiwaySharedTypes").E2eeMode.cast(0),preventSfuMode:!1,infraMandatedExpStatus:d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0),p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0)}}function i(){return{semantics:"",ssrcs:[]}}function j(){return{type:d("MultiwaySharedTypes").MediaType.cast(0),id:"",ssrcs:[],enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function k(){return{parameters:{},conditionFbid:"0",exposureHasBeenLogged:!1,canExposureLog:!1,universeShortName:"",userFbid:"0",unitId:""}}function l(){return{experiments:{},userFbid:"0"}}function m(){return{conditionFbid:"0",userFbid:"0",universeName:"",unitId:""}}function n(){return{enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function o(){return{tracks:{}}}function p(){return{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function q(){return{cname:"",type:d("MultiwaySharedTypes").SubscriptionType.cast(0)}}function r(){return{restrictiveLogging:!0,verboseLogging:!1}}function s(){return{userId:"",streamId:"",streamType:0,renderWidth:0,renderHeight:0}}function t(){return{}}function u(){return{}}function v(){return{}}function w(){return{host:Uint8Array.of(),port:0}}function x(){return{}}function y(a,b){b.writeStructBegin("ServerInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();a.conferenceName_deprecated!=null&&(b.writeFieldBegin({fname:"conferenceName_deprecated",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.conferenceName_deprecated),b.writeFieldEnd());b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("ClientSessionInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userId",ftype:h.STRING,fid:4});if(a.userId!=null)b.writeString(a.userId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"clientSessionId",ftype:h.STRING,fid:5});if(a.clientSessionId!=null)b.writeString(a.clientSessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("Endpoint");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.STRING,fid:2});if(a.deviceId!=null)b.writeString(a.deviceId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appId",ftype:h.STRING,fid:3});if(a.appId!=null)b.writeString(a.appId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appVersion",ftype:h.STRING,fid:4});if(a.appVersion!=null)b.writeString(a.appVersion);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appBuildNumber",ftype:h.STRING,fid:5});if(a.appBuildNumber!=null)b.writeString(a.appBuildNumber);else{d="";b.writeString(d)}b.writeFieldEnd();a.clientStackInfo!=null&&(b.writeFieldBegin({fname:"clientStackInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.clientStackInfo),b.writeFieldEnd());a.familyDeviceId!=null&&(b.writeFieldBegin({fname:"familyDeviceId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.familyDeviceId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("E2eeEnforcement");b.writeFieldBegin({fname:"mode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.mode!=null){var e;b.writeI32((e=a.mode)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeMode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"preventSfuMode",ftype:h.BOOL,fid:2});if(a.preventSfuMode!=null)b.writeBool(a.preventSfuMode);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"infraMandatedExpStatus",ftype:h.I32,fid:3});if(a.infraMandatedExpStatus!=null){b.writeI32((e=a.infraMandatedExpStatus)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"p2pSFrameExpStatus",ftype:h.I32,fid:4});if(a.p2pSFrameExpStatus!=null){b.writeI32((e=a.p2pSFrameExpStatus)!=null?e:0)}else{a=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("SsrcGroup");b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.semantics!=null)b.writeString(a.semantics);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:2});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(d of a.ssrcs)b.writeI64(BigInt(d));b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.length});for(d of a)b.writeI64(BigInt(d));b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("Media");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"id",ftype:h.STRING,fid:2});if(a.id!=null)b.writeString(a.id);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:3});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(e of a.ssrcs)b.writeI64(BigInt(e));b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:e.length});for(e of e)b.writeI64(BigInt(e));b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"enabled",ftype:h.BOOL,fid:4});if(a.enabled!=null)b.writeBool(a.enabled);else{e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:9});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:11});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{a=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("QuickExperiment");b.writeFieldBegin({fname:"parameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.parameters!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.parameters).length});for(var d of Object.entries(a.parameters)){var e=d[0],f=d[1];b.writeString(e);R(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);R(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"conditionFbid",ftype:h.I64,fid:2});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"exposureHasBeenLogged",ftype:h.BOOL,fid:3});if(a.exposureHasBeenLogged!=null)b.writeBool(a.exposureHasBeenLogged);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"canExposureLog",ftype:h.BOOL,fid:4});if(a.canExposureLog!=null)b.writeBool(a.canExposureLog);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"universeShortName",ftype:h.STRING,fid:5});if(a.universeShortName!=null)b.writeString(a.universeShortName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:6});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:7});if(a.unitId!=null)b.writeString(a.unitId);else{f="";b.writeString(f)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("QuickExperimentResult");b.writeFieldBegin({fname:"experiments",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.experiments!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.experiments).length});for(var d of Object.entries(a.experiments)){var e=d[0],f=d[1];b.writeString(e);E(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeString(d);E(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("QuickExperimentExposureLoggingEvent");b.writeFieldBegin({fname:"conditionFbid",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"universeName",ftype:h.STRING,fid:3});if(a.universeName!=null)b.writeString(a.universeName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:4});if(a.unitId!=null)b.writeString(a.unitId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("ClientTrackInfo");b.writeFieldBegin({fname:"enabled",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.enabled!=null)b.writeBool(a.enabled);else{var e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:6});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:8});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.nodeId!=null&&(b.writeFieldBegin({fname:"nodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.nodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("ClientMediaStatus");b.writeFieldBegin({fname:"tracks",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.tracks!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.tracks).length});for(a of Object.entries(a.tracks)){var d=a[0],e=a[1];b.writeString(d);H(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeString(a);H(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SubscriptionOptions");b.writeFieldBegin({fname:"videoQuality",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.videoQuality!=null){var e;b.writeI32((e=a.videoQuality)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.qualityIndex!=null&&(b.writeFieldBegin({fname:"qualityIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.qualityIndex),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("Subscription");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();a.options!=null&&(b.writeFieldBegin({fname:"options",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),J(a.options,b),b.writeFieldEnd());b.writeFieldBegin({fname:"type",ftype:h.I32,fid:3});if(a.type!=null){b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").SubscriptionType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.trackId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("LoggingOptions");b.writeFieldBegin({fname:"restrictiveLogging",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.restrictiveLogging!=null)b.writeBool(a.restrictiveLogging);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"verboseLogging",ftype:h.BOOL,fid:2});if(a.verboseLogging!=null)b.writeBool(a.verboseLogging);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("ResolutionData");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamId",ftype:h.STRING,fid:2});if(a.streamId!=null)b.writeString(a.streamId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamType",ftype:h.I32,fid:3});if(a.streamType!=null)b.writeI32(a.streamType);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderWidth",ftype:h.I32,fid:4});if(a.renderWidth!=null)b.writeI32(a.renderWidth);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderHeight",ftype:h.I32,fid:5});if(a.renderHeight!=null)b.writeI32(a.renderHeight);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("TurnInfo"),a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.ipv4),b.writeFieldEnd()),a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv6),b.writeFieldEnd()),a.udpPort!=null&&(b.writeFieldBegin({fname:"udpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.udpPort),b.writeFieldEnd()),a.tcpPort!=null&&(b.writeFieldBegin({fname:"tcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.tcpPort),b.writeFieldEnd()),a.sslTcpPort!=null&&(b.writeFieldBegin({fname:"sslTcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.sslTcpPort),b.writeFieldEnd()),a.portInfoIdx!=null&&(b.writeFieldBegin({fname:"portInfoIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.portInfoIdx),b.writeFieldEnd()),a.tlsPort!=null&&(b.writeFieldBegin({fname:"tlsPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.tlsPort),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function O(a,b){b.writeStructBegin("EdgerayInfo");if(a.edgerayType!=null){var d;b.writeFieldBegin({fname:"edgerayType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.edgerayType)!=null?d:0);b.writeFieldEnd()}a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv4),b.writeFieldEnd());a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.ipv6),b.writeFieldEnd());a.token!=null&&(b.writeFieldBegin({fname:"token",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.token),b.writeFieldEnd());a.tokenIdx!=null&&(b.writeFieldBegin({fname:"tokenIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.tokenIdx),b.writeFieldEnd());a.secret!=null&&(b.writeFieldBegin({fname:"secret",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeBinary(a.secret),b.writeFieldEnd());a.secretIdx!=null&&(b.writeFieldBegin({fname:"secretIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.secretIdx),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function P(a,b){b.writeStructBegin("RelayInfo");if(a.turns!=null){b.writeFieldBegin({fname:"turns",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});b.writeListBegin({etype:h.STRUCT,size:a.turns.length});for(var d of a.turns)N(d,b);b.writeListEnd();b.writeFieldEnd()}if(a.edgerays!=null){b.writeFieldBegin({fname:"edgerays",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.edgerays.length});for(d of a.edgerays)O(d,b);b.writeListEnd();b.writeFieldEnd()}a.turnUsername!=null&&(b.writeFieldBegin({fname:"turnUsername",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.turnUsername),b.writeFieldEnd());a.turnPassword!=null&&(b.writeFieldBegin({fname:"turnPassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.turnPassword),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("TSocketAddress");b.writeFieldBegin({fname:"host",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.host!=null)b.writeBinary(a.host);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"port",ftype:h.I16,fid:2});if(a.port!=null)b.writeI16(a.port);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function R(a,b){b.writeStructBegin("QuickExperimentValue");if(a.intValue!=null){b.writeFieldBegin({fname:"intValue",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});b.writeI64(BigInt(a.intValue));b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.stringValue!=null){b.writeFieldBegin({fname:"stringValue",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});b.writeString(a.stringValue);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName_deprecated=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.nonce===void 0&&(b.nonce="");return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.conferenceName===void 0&&(b.conferenceName="");b.nonce===void 0&&(b.nonce="");b.userId===void 0&&(b.userId="");b.clientSessionId===void 0&&(b.clientSessionId="");return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.deviceId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.appId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.appVersion=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.appBuildNumber=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.clientStackInfo=a.readString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.familyDeviceId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.deviceId===void 0&&(b.deviceId="");b.appId===void 0&&(b.appId="");b.appVersion===void 0&&(b.appVersion="");b.appBuildNumber===void 0&&(b.appBuildNumber="");return b}function aa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mode=d("MultiwaySharedTypes").E2eeMode.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BOOL?b.preventSfuMode=a.readBool():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mode===void 0&&(b.mode=d("MultiwaySharedTypes").E2eeMode.cast(0));b.preventSfuMode===void 0&&(b.preventSfuMode=!1);b.infraMandatedExpStatus===void 0&&(b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0));b.p2pSFrameExpStatus===void 0&&(b.p2pSFrameExpStatus=d("MultiwaySharedTypes").P2PSFrameExpStatus.cast(0));return b}function ba(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.ssrcs.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.semantics===void 0&&(b.semantics="");b.ssrcs===void 0&&(b.ssrcs=[]);return b}function ca(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString();b.ssrcs.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwaySharedTypes").MediaType.cast(0));b.id===void 0&&(b.id="");b.ssrcs===void 0&&(b.ssrcs=[]);b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.parameters={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=$(a);b.parameters[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.exposureHasBeenLogged=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.canExposureLog=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.universeShortName=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.parameters===void 0&&(b.parameters={});b.conditionFbid===void 0&&(b.conditionFbid="0");b.exposureHasBeenLogged===void 0&&(b.exposureHasBeenLogged=!1);b.canExposureLog===void 0&&(b.canExposureLog=!1);b.universeShortName===void 0&&(b.universeShortName="");b.userFbid===void 0&&(b.userFbid="0");b.unitId===void 0&&(b.unitId="");return b}function da(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.experiments={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=V(a);b.experiments[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.experiments===void 0&&(b.experiments={});b.userFbid===void 0&&(b.userFbid="0");return b}function ea(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.universeName=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.conditionFbid===void 0&&(b.conditionFbid="0");b.userFbid===void 0&&(b.userFbid="0");b.universeName===void 0&&(b.universeName="");b.unitId===void 0&&(b.unitId="");return b}function W(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I64?b.nodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function fa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.tracks={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=W(a);b.tracks[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.tracks===void 0&&(b.tracks={});return b}function X(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.qualityIndex=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.videoQuality===void 0&&(b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.options=X(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").SubscriptionType.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.type===void 0&&(b.type=d("MultiwaySharedTypes").SubscriptionType.cast(0));return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).BOOL?b.restrictiveLogging=a.readBool():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.verboseLogging=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.restrictiveLogging===void 0&&(b.restrictiveLogging=!0);b.verboseLogging===void 0&&(b.verboseLogging=!1);return b}function ia(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.streamId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.streamType=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.renderWidth=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.renderHeight=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.streamId===void 0&&(b.streamId="");b.streamType===void 0&&(b.streamType=0);b.renderWidth===void 0&&(b.renderWidth=0);b.renderHeight===void 0&&(b.renderHeight=0);return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.udpPort=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.tcpPort=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.sslTcpPort=a.readI32():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I32?b.portInfoIdx=a.readI32():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).I32?b.tlsPort=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.edgerayType=d("MultiwaySharedTypes").EdgerayType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.token=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.tokenIdx=a.readI32():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.secret=a.readBinary():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.secretIdx=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ja(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.turns=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Y(a);b.turns.push(g)}}else a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.edgerays=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=Z(a);b.edgerays.push(d)}}else a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.turnUsername=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.turnPassword=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function ka(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.host=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.port=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.host===void 0&&(b.host=Uint8Array.of());b.port===void 0&&(b.port=0);return b}function $(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).I64)if(b==null)d.intValue=a.readI64().toString(),b="intValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: intValue, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRING)if(b==null)d.stringValue=a.readString(),b="stringValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: stringValue, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.ServerInfo$DefaultConstructor=a;g.ClientSessionInfo$DefaultConstructor=b;g.Endpoint$DefaultConstructor=e;g.E2eeEnforcement$DefaultConstructor=f;g.SsrcGroup$DefaultConstructor=i;g.Media$DefaultConstructor=j;g.QuickExperiment$DefaultConstructor=k;g.QuickExperimentResult$DefaultConstructor=l;g.QuickExperimentExposureLoggingEvent$DefaultConstructor=m;g.ClientTrackInfo$DefaultConstructor=n;g.ClientMediaStatus$DefaultConstructor=o;g.SubscriptionOptions$DefaultConstructor=p;g.Subscription$DefaultConstructor=q;g.LoggingOptions$DefaultConstructor=r;g.ResolutionData$DefaultConstructor=s;g.TurnInfo$DefaultConstructor=t;g.EdgerayInfo$DefaultConstructor=u;g.RelayInfo$DefaultConstructor=v;g.TSocketAddress$DefaultConstructor=w;g.QuickExperimentValue$DefaultConstructor=x;g.serializeServerInfo=y;g.serializeClientSessionInfo=z;g.serializeEndpoint=A;g.serializeE2eeEnforcement=B;g.serializeSsrcGroup=C;g.serializeMedia=D;g.serializeQuickExperiment=E;g.serializeQuickExperimentResult=F;g.serializeQuickExperimentExposureLoggingEvent=G;g.serializeClientTrackInfo=H;g.serializeClientMediaStatus=I;g.serializeSubscriptionOptions=J;g.serializeSubscription=K;g.serializeLoggingOptions=L;g.serializeResolutionData=M;g.serializeTurnInfo=N;g.serializeEdgerayInfo=O;g.serializeRelayInfo=P;g.serializeTSocketAddress=Q;g.serializeQuickExperimentValue=R;g.deserializeServerInfo=S;g.deserializeClientSessionInfo=T;g.deserializeEndpoint=U;g.deserializeE2eeEnforcement=aa;g.deserializeSsrcGroup=ba;g.deserializeMedia=ca;g.deserializeQuickExperiment=V;g.deserializeQuickExperimentResult=da;g.deserializeQuickExperimentExposureLoggingEvent=ea;g.deserializeClientTrackInfo=W;g.deserializeClientMediaStatus=fa;g.deserializeSubscriptionOptions=X;g.deserializeSubscription=ga;g.deserializeLoggingOptions=ha;g.deserializeResolutionData=ia;g.deserializeTurnInfo=Y;g.deserializeEdgerayInfo=Z;g.deserializeRelayInfo=ja;g.deserializeTSocketAddress=ka;g.deserializeQuickExperimentValue=$}),98);
__d("WebrtcSignalingCommonSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{topic:"",data:Uint8Array.of()}}function b(a,b){b.writeStructBegin("GenericDataMessage");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:2});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.e2eEncryptedData!=null&&(b.writeFieldBegin({fname:"e2eEncryptedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.e2eEncryptedData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.e2eEncryptedData=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.data===void 0&&(b.data=Uint8Array.of());return b}g.GenericDataMessage$DefaultConstructor=a;g.serializeGenericDataMessage=b;g.deserializeGenericDataMessage=d}),98);
__d("DataMessageSerializers",["MultiwaySharedSerializers","MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonSerializers"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{topic_DEPRECATED:""}}function a(){return{userId:""}}function b(){return{userId:"",cname:"",trackIds:[],transactionId:"0"}}function e(){return{cname:"",quality_DEPRECATED:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function f(){return{userId:"",bottleneckBps:0}}function j(){return{bottleneckUplinksByLayer:{}}}function k(){return{duplicationAmount:0,delayMs:0}}function l(){return{}}function m(){return{}}function n(){return{primarySpeakerUserId:"",transactionId:"0"}}function o(){return{}}function p(){return{signalingMessagePayload:Uint8Array.of()}}function q(){return{signalingMessagePayload:Uint8Array.of()}}function r(){return{subscriptionMessagePayload:[]}}function s(){return{}}function t(){return{}}function u(){return{nodeIdToUserIdMap:{},nodeIdToServiceTypeMap:{}}}function v(){return{}}function w(){return{header:i()}}function x(a,b){b.writeStructBegin("DataHeader");a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sender),b.writeFieldEnd());b.writeFieldBegin({fname:"topic_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic_DEPRECATED!=null)b.writeString(a.topic_DEPRECATED);else{var d="";b.writeString(d)}b.writeFieldEnd();if(a.recipients!=null){b.writeFieldBegin({fname:"recipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.recipients.size});for(d of a.recipients)b.writeString(d);b.writeSetEnd();b.writeFieldEnd()}if(a.serviceSender!=null){b.writeFieldBegin({fname:"serviceSender",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4});b.writeI32((d=a.serviceSender)!=null?d:0);b.writeFieldEnd()}if(a.serviceRecipients!=null){b.writeFieldBegin({fname:"serviceRecipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.serviceRecipients.size});for(d of a.serviceRecipients){var e;b.writeI32((e=d)!=null?e:0)}b.writeSetEnd();b.writeFieldEnd()}a.shouldSendToAllUsers!=null&&(b.writeFieldBegin({fname:"shouldSendToAllUsers",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.shouldSendToAllUsers),b.writeFieldEnd());a.senderE2eeId!=null&&(b.writeFieldBegin({fname:"senderE2eeId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeBinary(a.senderE2eeId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SpeakerDetail");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("DominantSpeakerNotification");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"cname",ftype:h.STRING,fid:2});if(a.cname!=null)b.writeString(a.cname);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"trackIds",ftype:h.LIST,fid:4});if(a.trackIds!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.trackIds.length});for(d of a.trackIds)b.writeString(d);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.length});for(d of d)b.writeString(d);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:5});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();if(a.dominantSpeakers!=null){b.writeFieldBegin({fname:"dominantSpeakers",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRUCT,size:a.dominantSpeakers.length});for(d of a.dominantSpeakers)y(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("VideoUploadRequest");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"quality_DEPRECATED",ftype:h.I32,fid:2});if(a.quality_DEPRECATED!=null){b.writeI32((e=a.quality_DEPRECATED)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(e of Object.entries(a.perSsrcTargetBitrateBpsMap)){a=e[0];var f=e[1];b.writeI64(BigInt(a));b.writeI64(BigInt(f))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("ReceiverBottleneck");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bottleneckBps",ftype:h.I32,fid:2});if(a.bottleneckBps!=null)b.writeI32(a.bottleneckBps);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("BweDebugInfo");b.writeFieldBegin({fname:"bottleneckUplinksByLayer",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.bottleneckUplinksByLayer!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.bottleneckUplinksByLayer).length});for(a of Object.entries(a.bottleneckUplinksByLayer)){var d=a[0],e=a[1];b.writeI32(Number(d));B(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));B(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("AudioDuplicationDebugInfo");b.writeFieldBegin({fname:"duplicationAmount",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.duplicationAmount!=null)b.writeI16(a.duplicationAmount);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"delayMs",ftype:h.I16,fid:2});if(a.delayMs!=null)b.writeI16(a.delayMs);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("ReceiveTrackDebugInfo"),a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.trackId),b.writeFieldEnd()),a.numSimulcastLayersSupported!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersSupported",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.numSimulcastLayersSupported),b.writeFieldEnd()),a.numSimulcastLayersAllocated!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersAllocated",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.numSimulcastLayersAllocated),b.writeFieldEnd()),a.spatialLayerIndex!=null&&(b.writeFieldBegin({fname:"spatialLayerIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.spatialLayerIndex),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function F(a,b){b.writeStructBegin("DebugInfo");a.audioDuplicationDebugInfo!=null&&(b.writeFieldBegin({fname:"audioDuplicationDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.audioDuplicationDebugInfo,b),b.writeFieldEnd());if(a.receiveTrackDebugInfo!=null){b.writeFieldBegin({fname:"receiveTrackDebugInfo",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.receiveTrackDebugInfo.length});for(a of a.receiveTrackDebugInfo)E(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("DominantSpeakerInfo");b.writeFieldBegin({fname:"primarySpeakerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.primarySpeakerUserId!=null)b.writeString(a.primarySpeakerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:2});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("VideoUploadInfo");a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});for(a of Object.entries(a.perSsrcTargetBitrateBpsMap)){var d=a[0],e=a[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("SignalingMessageToClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SignalingMessageFromClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SubscriptionMessageFromClient");b.writeFieldBegin({fname:"subscriptionMessagePayload",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptionMessagePayload!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptionMessagePayload.length});for(a of a.subscriptionMessagePayload)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("RenderResolutionMessageFromClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function aa(a,b){b.writeStructBegin("RenderResolutionMessageToClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});for(a of Object.entries(a.renderResolutionMap)){var e=a[0],f=a[1];b.writeString(e);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(e of Object.entries(f)){f=e[0];var g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("MultiwaySharedSerializers").serializeResolutionData(g,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function ba(a,b){b.writeStructBegin("NodeIdNotification");b.writeFieldBegin({fname:"nodeIdToUserIdMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.nodeIdToUserIdMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(a.nodeIdToUserIdMap).length});for(var d of Object.entries(a.nodeIdToUserIdMap)){var e=d[0],f=d[1];b.writeI64(BigInt(e));b.writeI64(BigInt(f))}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeI64(BigInt(d));b.writeI64(BigInt(e))}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"nodeIdToServiceTypeMap",ftype:h.MAP,fid:2});if(a.nodeIdToServiceTypeMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a.nodeIdToServiceTypeMap).length});for(d of Object.entries(a.nodeIdToServiceTypeMap)){e=d[0];f=d[1];b.writeI64(BigInt(e));b.writeI32((a=f)!=null?a:0)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(e).length});for(f of Object.entries(e)){a=f[0];d=f[1];b.writeI64(BigInt(a));b.writeI32((e=d)!=null?e:0)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("DataMessageBody"),a.genericMessage!=null&&(b.writeFieldBegin({fname:"genericMessage",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),d("WebrtcSignalingCommonSerializers").serializeGenericDataMessage(a.genericMessage,b),b.writeFieldEnd()),a.dominantSpeakerNotification!=null&&(b.writeFieldBegin({fname:"dominantSpeakerNotification",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),z(a.dominantSpeakerNotification,b),b.writeFieldEnd()),a.videoUploadRequest!=null&&(b.writeFieldBegin({fname:"videoUploadRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),A(a.videoUploadRequest,b),b.writeFieldEnd()),a.dominantSpeakerSignalingInfo!=null&&(b.writeFieldBegin({fname:"dominantSpeakerSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),G(a.dominantSpeakerSignalingInfo,b),b.writeFieldEnd()),a.bweDebugInfo!=null&&(b.writeFieldBegin({fname:"bweDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),C(a.bweDebugInfo,b),b.writeFieldEnd()),a.debugInfo!=null&&(b.writeFieldBegin({fname:"debugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),F(a.debugInfo,b),b.writeFieldEnd()),a.videoUploadSignalingInfo!=null&&(b.writeFieldBegin({fname:"videoUploadSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),H(a.videoUploadSignalingInfo,b),b.writeFieldEnd()),a.signalingMessageToClient!=null&&(b.writeFieldBegin({fname:"signalingMessageToClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),I(a.signalingMessageToClient,b),b.writeFieldEnd()),a.signalingMessageFromClient!=null&&(b.writeFieldBegin({fname:"signalingMessageFromClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),J(a.signalingMessageFromClient,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ca(a,b){b.writeStructBegin("DataMessage");b.writeFieldBegin({fname:"header",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.header!=null)x(a.header,b);else{var d=i();x(d,b)}b.writeFieldEnd();a.data_DEPRECATED!=null&&(b.writeFieldBegin({fname:"data_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data_DEPRECATED),b.writeFieldEnd());a.body!=null&&(b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),M(a.body,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function N(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sender=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic_DEPRECATED=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.recipients=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.recipients.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.serviceSender=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32()):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.serviceRecipients=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.serviceRecipients.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.shouldSendToAllUsers=a.readBool():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.senderE2eeId=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic_DEPRECATED===void 0&&(b.topic_DEPRECATED="");return b}function O(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");return b}function P(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.trackIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.trackIds.push(g)}}else a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;case 6:if(e===(h||(h=c("ThriftTypes"))).LIST){b.dominantSpeakers=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=O(a);b.dominantSpeakers.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.cname===void 0&&(b.cname="");b.trackIds===void 0&&(b.trackIds=[]);b.transactionId===void 0&&(b.transactionId="0");return b}function Q(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.quality_DEPRECATED===void 0&&(b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function R(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bottleneckBps=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.bottleneckBps===void 0&&(b.bottleneckBps=0);return b}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.bottleneckUplinksByLayer={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=R(a);b.bottleneckUplinksByLayer[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bottleneckUplinksByLayer===void 0&&(b.bottleneckUplinksByLayer={});return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.duplicationAmount=a.readI16():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.delayMs=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.duplicationAmount===void 0&&(b.duplicationAmount=0);b.delayMs===void 0&&(b.delayMs=0);return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersSupported=a.readI32():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersAllocated=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.spatialLayerIndex=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.audioDuplicationDebugInfo=T(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.receiveTrackDebugInfo=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=U(a);b.receiveTrackDebugInfo.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function W(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.primarySpeakerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.primarySpeakerUserId===void 0&&(b.primarySpeakerUserId="");b.transactionId===void 0&&(b.transactionId="0");return b}function X(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString(),i=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function Z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function da(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptionMessagePayload=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptionMessagePayload.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptionMessagePayload===void 0&&(b.subscriptionMessagePayload=[]);return b}function ea(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function fa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToUserIdMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.nodeIdToUserIdMap[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToServiceTypeMap={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readI64().toString();e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.nodeIdToServiceTypeMap[g]=e}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.nodeIdToUserIdMap===void 0&&(b.nodeIdToUserIdMap={});b.nodeIdToServiceTypeMap===void 0&&(b.nodeIdToServiceTypeMap={});return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.genericMessage=d("WebrtcSignalingCommonSerializers").deserializeGenericDataMessage(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerNotification=P(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadRequest=Q(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerSignalingInfo=W(a):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bweDebugInfo=S(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.debugInfo=V(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadSignalingInfo=X(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageToClient=Y(a):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageFromClient=Z(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.header=N(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data_DEPRECATED=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.body=$(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.header===void 0&&(b.header=i());return b}g.DataHeader$DefaultConstructor=i;g.SpeakerDetail$DefaultConstructor=a;g.DominantSpeakerNotification$DefaultConstructor=b;g.VideoUploadRequest$DefaultConstructor=e;g.ReceiverBottleneck$DefaultConstructor=f;g.BweDebugInfo$DefaultConstructor=j;g.AudioDuplicationDebugInfo$DefaultConstructor=k;g.ReceiveTrackDebugInfo$DefaultConstructor=l;g.DebugInfo$DefaultConstructor=m;g.DominantSpeakerInfo$DefaultConstructor=n;g.VideoUploadInfo$DefaultConstructor=o;g.SignalingMessageToClient$DefaultConstructor=p;g.SignalingMessageFromClient$DefaultConstructor=q;g.SubscriptionMessageFromClient$DefaultConstructor=r;g.RenderResolutionMessageFromClient$DefaultConstructor=s;g.RenderResolutionMessageToClient$DefaultConstructor=t;g.NodeIdNotification$DefaultConstructor=u;g.DataMessageBody$DefaultConstructor=v;g.DataMessage$DefaultConstructor=w;g.serializeDataHeader=x;g.serializeSpeakerDetail=y;g.serializeDominantSpeakerNotification=z;g.serializeVideoUploadRequest=A;g.serializeReceiverBottleneck=B;g.serializeBweDebugInfo=C;g.serializeAudioDuplicationDebugInfo=D;g.serializeReceiveTrackDebugInfo=E;g.serializeDebugInfo=F;g.serializeDominantSpeakerInfo=G;g.serializeVideoUploadInfo=H;g.serializeSignalingMessageToClient=I;g.serializeSignalingMessageFromClient=J;g.serializeSubscriptionMessageFromClient=K;g.serializeRenderResolutionMessageFromClient=L;g.serializeRenderResolutionMessageToClient=aa;g.serializeNodeIdNotification=ba;g.serializeDataMessageBody=M;g.serializeDataMessage=ca;g.deserializeDataHeader=N;g.deserializeSpeakerDetail=O;g.deserializeDominantSpeakerNotification=P;g.deserializeVideoUploadRequest=Q;g.deserializeReceiverBottleneck=R;g.deserializeBweDebugInfo=S;g.deserializeAudioDuplicationDebugInfo=T;g.deserializeReceiveTrackDebugInfo=U;g.deserializeDebugInfo=V;g.deserializeDominantSpeakerInfo=W;g.deserializeVideoUploadInfo=X;g.deserializeSignalingMessageToClient=Y;g.deserializeSignalingMessageFromClient=Z;g.deserializeSubscriptionMessageFromClient=da;g.deserializeRenderResolutionMessageFromClient=ea;g.deserializeRenderResolutionMessageToClient=fa;g.deserializeNodeIdNotification=ga;g.deserializeDataMessageBody=$;g.deserializeDataMessage=ha}),98);
__d("DataMessageTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({OK:200,NOT_FOUND:404});e.exports={DataMessageStatusCode:a}}),null);
__d("HorizonWebMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(){var a;d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);return new(c("MqttChannel"))({appId:(a=c("MqttWebConfig")).appID,capabilities:a.capabilities,chatVisibility:!0,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,pageId:null,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid})}var i=null;function a(){i==null&&(i=h());return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getHorizonWebMqttChannelInstance=a;g.shutdownAndClear=b}),98);
__d("IGDOverLSMqttChannel",["CurrentUser","Env","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c("MqttEnvInitializer").initialize();function j(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);var b=c("CurrentUser").getAppID()==null?936619743392459:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:b,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"cookie_auth",deviceId:a,endpoint:(i||(i=c("Env"))).ig_mqtt_wss_endpoint||"wss://edge-chat.instagram.com/chat",initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:(i||(i=c("Env"))).ig_mqtt_polling_endpoint||"https://edge-chat.instagram.com/mqtt/pull",userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var k=null,l;function m(a){k==null&&(k=j(a));a=k;l==null?void 0:l(a);return a}function a(){return new(h||(h=b("Promise")))(function(a){k?a(m()):l=function(b){a(b)}})}function e(){k!=null&&(k.shutdown(),k=null)}g.getInstance=m;g.waitAndGetInstance=a;g.shutdownAndClear=e}),98);
__d("MDCMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?218968626708284:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getMDCMqttChannelInstance=a;g.getMDCMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("MqttThriftHeaderSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(a,b){b.writeStructBegin("MqttThriftHeader"),a.traceInfo!=null&&(b.writeFieldBegin({fname:"traceInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.traceInfo),b.writeFieldEnd()),a.coreContextRequestId!=null&&(b.writeFieldBegin({fname:"coreContextRequestId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.coreContextRequestId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.traceInfo=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.coreContextRequestId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.MqttThriftHeader$DefaultConstructor=a;g.serializeMqttThriftHeader=b;g.deserializeMqttThriftHeader=d}),98);
__d("MultiwayCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({STRING:0,THRIFT:1,BOTH:2});d=a({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f=a({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});b=a({NONE:0,INFO:1,ERROR:2});var g=a({SUCCESS:0,ERROR:1,SESSION_NOT_FOUND:10,SESSION_MISMATCH:11,SESSION_TERMINATING:12,CONNECTION_ALREADY_EXIST:20,CONNECTION_OLD_EXIST:21,CONNECTION_NOT_FOUND:23,CONNECTION_MISMATCH:24,SDP_INVALID:30,SDP_NEGOTIATION_FAILED:31,EXCEEDED_MAX_PARTICIPANT_COUNT:40,UNAUTHORIZED:50}),h=a({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28}),i=a({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10}),j=a({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23}),k=a({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20}),l=a({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8}),m=a({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}),n=a({ACTIVE:0,TERMINATED:1}),o=a({UNKNOWN:0,ACTIVE:1,TERMINATED:2}),p=a({DENIED:0,APPROVED:1}),q=a({UNKNOWN:0,SIGNALING_DATA_MESSAGE:1,STATE_SYNC_UPDATE:2,STATE_SYNC_SNAPSHOT:3}),r=a({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18}),s=a({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002}),t=a({PRIMARY:0,SECONDARY:1}),u=a({UNKNOWN:0,MEDIA_CONNECTED:1});a=a({JoinRequest:"joinRequest",JoinResponse:"joinResponse",ServerMediaUpdateRequest:"serverMediaUpdateRequest",ServerMediaUpdateResponse:"serverMediaUpdateResponse",HangupRequest:"hangupRequest",IceCandidateRequest:"iceCandidateRequest",RingRequest:"ringRequest",RingResponse:"ringResponse",DismissRequest:"dismissRequest",ConferenceStateRequest:"conferenceStateRequest",ConferenceStateResponse:"conferenceStateResponse",AddParticipantsRequest:"addParticipantsRequest",SubscriptionRequest:"subscriptionRequest",ClientMediaUpdateRequest:"clientMediaUpdateRequest",ClientMediaUpdateResponse:"clientMediaUpdateResponse",DataMessageRequest:"dataMessageRequest",RemoveParticipantsRequest:"removeParticipantsRequest",DataMessageResponse:"dataMessageResponse",UpdateRequest:"updateRequest",UpdateResponse:"updateResponse",NotifyRequest:"notifyRequest",NotifyResponse:"notifyResponse",ConnectRequest:"connectRequest",ConnectResponse:"connectResponse",ClientEventRequest:"clientEventRequest",ClientEventResponse:"clientEventResponse",UnsubscribeRequest:"unsubscribeRequest",UnsubscribeResponse:"unsubscribeResponse",ApprovalRequest:"approvalRequest",TransferRequest:"transferRequest"});e.exports={ApprovalStatus:p,Capability:k,ClientEventType:u,DeviceStatus:m,DismissReason:j,E2eeDataMessageType:q,ExtensionSessionStatus:o,HangupReason:i,JoinMode:t,MediaConnectionStatus:n,MessageTag:s,MessageType:h,ParticipantCallState:r,RingType:l,RtcApiStatusCode:g,RtcLogSeverity:b,RtcMessageBodyVariant$Types:a,RtcResponseStatusCode:d,RtcResponseSubCode:f,SdpPayloadType:c}}),null);
__d("StateSyncTopicsConfigTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,INTERNAL:1,EXTERNAL:2});d=a({UNKNOWN:0,PARTICIPANT_JOIN:100,PARTICIPANT_UPDATE:101,PARTICIPANT_LEAVE:102,PARTICIPANT_NEGOTIATED:103,PARTICIPANT_SDP_CHANGED:104,EXTENSION_CREATION:201,EXTENSION_JOIN:202,EXTENSION_UPDATE:203,EXTENSION_LEAVE:204,EXTENSION_REQUEST:205,CONFERENCE_UPDATE:501,DOMINANT_SPEAKER_UPDATE:1001,MEDIA_ASPECT_RATIO_UPDATE:1002,TIMER_FIRED:1003,MEDIA_PATH_CHANGED:1004,PARTICIPANTS_ACKED_MEDIA:1005});f=a({UNKNOWN:0,ANY_PARTICIPANT_SUBSCRIBED:1,ALWAYS_RESOLVE:2});b=a({CACHIUS:1,IRIS:2});a=a({Config_engine:1,E2eeState:2,Media_information:3,Breakout:4,Countdown_timer:5,Effect_match:6,Emoji_reactions:7,Entered_avatars_mode:8,Moderator_controls:9,Polls:10,Raised_hands_queue:11,Xac_calling:12,Action_items:13,Can_you_see_my_screen:14,Collage:15,Companion:16,Coplay:17,Coview:18,Custom_video_capabilities:19,Dropin:20,Dtmf:21,E2ee_v2_msg:22,Effect_sync:23,Et_pluto_activity:24,Et_pluto_session:25,Et_test_activity:26,Et_test_session:27,Et_tubi_activity:28,Et_tubi_session:29,External_resolution_enabled:30,Hyperspace_copresence_state:31,Hyperspace_mic_state:32,Intenticons:33,Live_stream:34,Live_stream_app_message:35,Max_video_subscriptions:36,Media_sync:37,Media_sync_autoplay:38,Meeting_assistant:39,Meeting_transcription:40,Morpheo_grid:41,Multipeer_ar:42,Number_of_people:43,Opaque_blob:44,Photo_booth:45,Qna:46,Quizzes:47,Reactions:48,Role_assignments:49,Room_features_availability:50,Rooms_notes:51,Screenshare_floor_control:52,Screenshare_single_floor_control:53,Sctp_negotiation:54,Sideband:55,Simple:56,Simple_external:57,Simple_pass_through:58,Simple_passthrough:59,Snippets:60,Sound_effects:61,Whiteboard:62,Whiteboard_messenger:63,Workroom:64,Workrooms_ask_everyone_to_open:65,Workrooms_vr:66,Avatar_transport_state:67,Ambisonic:68,Cathode_extension:69,Biz_calling:70,Work_costreaming:71,Conversation_bot:72,Voip_zone:73,Admin_initiated_casting:74,Smart_glasses_assistant:75,Codec_avatar_2d:76});e.exports={CryptoAuthVerifierIdentity:b,DataSource:d,DataSourceCondition:f,ResolutionPath:c,TopicId:a}}),null);
__d("WebrtcEnumsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({OFFER:0,ANSWER:1,ICE_CANDIDATE:2,OK:3,HANG_UP:4,OTHER_DISMISS:5,PRANSWER:7,PING:8,PING_ACK:9,ICE_RESTART_OFFER:10,ICE_RESTART_ANSWER:11,OFFER_ACK:12,ANSWER_ACK:13,NOTIFY_MEDIA_STATE:14,ACK:15,INVALID:16,OFFER_NACK:17,NACK:18,VIDEO_REQUEST:19,SDP_UPDATE:20,SWITCH_TO_MULTIWAY:28,NEGOTIATE:30,PR_OFFER_ACK:32,CLIENT_REPORTED_EVENT:33});d=a({OFFER:0,ANSWER:1});f=a({LL_NIL:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});b=a({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,MAX_ALLOWED_PARTICIPANTS_REACHED:24,CALLEE_REQUIRES_MULTIWAY:25,LIVE_NOT_ACKED:26,TX_ACK_TIMEDOUT:27,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:28,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:29,ANSWERED_BY_OTHER_USER:30,LONG_LASTING_AUDIO_ISSUE:31,ADMIN_CALLING_OWN_PAGE:32,PAGE_CALLS_BLOCKED:33});var g=a({UDP:0,TCP:1,SSLTCP:2}),h=a({HOST:0,SERVER_REFLEXIVE:1,PEER_REFLEXIVE:2,RELAY:3}),i=a({TCPTYPE_NONE:0,TCPTYPE_PASSIVE:1,TCPTYPE_ACTIVE:2,TCPTYPE_SIMOPEN:3}),j=a({SENDONLY:0,SENDRECV:1,RECVONLY:2,INACTIVE:3}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({AUDIO:0,VIDEO:1,SCREEN:2}),m=a({AES_CM_128_HMAC_SHA1_80:0,AES_CM_128_HMAC_SHA1_32:1,F8_128_HMAC_SHA1_80:2,AEAD_AES_256_GCM:8}),n=a({RTP_SAVPF:0,DTLS_SCTP:1,SCTP:2}),o=a({URN_IETF_PARAMS_RTP_HDREXT_SSRC_AUDIO_LEVEL:0,URN_IETF_PARAMS_RTP_HDREXT_TOFFSET:1,IETF_DRAFT_HOLMER_RMCAT_TRANSPORT_WIDE_CC_01:2,URN_3GPP_VIDEO_ORIENTATION:3,ABS_SEND_TIME:4,PLAYOUT_DELAY:5,VIDEO_CONTENT_TYPE:6,VIDEO_TIMING:7,RTP_MID:8,RTP_STREAM_ID:9,RTP_REPAIRED_STREAM_ID:10,ENCRYPT_EXTENSIONS:11,FRAME_MARKING:12,GENERIC_FRAME_DESCRIPTOR:13,RTP_LOSS_INFO:14,RTP_CONGESTION_INFO:15,RTP_AUDIO_DROP_INFO:16,FRAME_ENCRYPTION_INFO:17,GENERIC_FRAME_DESCRIPTOR_01:18,DEPENDENCY_DESCRIPTOR:19,COLOR_SPACE:20,ABS_CAPTURE_TIME:21,VIDEO_FRAME_TRACKING_ID:22}),p=a({ISAC:0,SPEEX_ISAC_OBSOLETE:1,SPEEX:2,OPUS:3,PCMU_OBSOLETE:4,PCMA_OBSOLETE:5,CN:6,TELEPHONE_EVENT:7,VP8:8,RED:9,ULPFEC:10,H264:17,ISPX_WB_2:32,GOOGLE_DATA:33,AAC:36,AAC_LD:37,VP9:96,GOOGLE_SCTP_DATA:97,H265:98,RTX:99,FLEXFEC:100,MULTIPLEX:101,VIDEO_DATA:102,AV1:103}),q=a({SILENCEBIT_OBSOLETE:0,SPEEXUSEJITTERBIT_OBSOLETE:1,USEINBANDFEC:2,USEADAPTIVEFEC_OBSOLETE:3,EXTERNALBWE_OBSOLETE:4,FEC_BEI_OBSOLETE:5,ISPX_ADAPTIVE_FEC:6,CBR:7,USEDTX:8}),r=a({MINPTIME:0,MAXAVERAGEBITRATE:1,SPROP_STEREO:2,STEREO:3,MAXPTIME:4,PTIME:5,FEC_BEI_OBSOLETE:6,PORT:7,H264PROFILELEVELID:8,PACKETIZATION_MODE:9,LEVEL_ASYMMETRY_ALLOWED:10,APT:11,MAXPLAYBACKRATE:12,REPAIR_WINDOW:13,EMPTY_KEY:14}),s=a({CR_NONE:0,CR_ACTIVE:1,CR_PASSIVE:2,CR_ACTPASS:3,CR_HOLDCONN:4});a=a({EVENT_NONE:0,EVENT_MEDIA_CONNECTED:1});e.exports={CallEndReason:b,ClientReportedEventType:a,CodecName:p,CodecOption:r,CodecOptionBoolean:q,ConnectionRole:s,CryptoSuite:m,ExtmapUris:o,IceCandidateProtocolType:h,IceCandidateTcpType:i,IceCandidateTransport:g,MediaProtocol:n,MediaType:k,PayloadType:c,SdpNegotiateType:d,SendRecvMode:j,StreamType:l,UploadLogLevel:f}}),null);
__d("WebrtcSdpSerializers",["ThriftTypes","WebrtcEnumsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{msid:"stream_label"}}function e(){return{id:""}}function f(){return{bwtype:"",bw:0}}function i(){return{numAudioChannels:1}}function j(){return{id:1,extensionAttributes:[]}}function k(){return{}}function l(){return{componentId:1,transport:d("WebrtcEnumsTypes").IceCandidateTransport.cast(0),generation:0}}function m(){return{port:1,protocol:d("WebrtcEnumsTypes").MediaProtocol.cast(0),sendRecvMode:d("WebrtcEnumsTypes").SendRecvMode.cast(1),hasRtcpMux:!0}}function n(){return{supportsMsid:!0}}function o(){return{}}function p(a,b){b.writeStructBegin("SsrcGroup");a.semantics!=null&&(b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.semantics),b.writeFieldEnd());if(a.ssrcIds!=null){b.writeFieldBegin({fname:"ssrcIds",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I32,size:a.ssrcIds.length});for(a of a.ssrcIds)b.writeI32(a);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("SsrcObject");a.ssrcId!=null&&(b.writeFieldBegin({fname:"ssrcId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.ssrcId),b.writeFieldEnd());a.cname!=null&&(b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.cname),b.writeFieldEnd());b.writeFieldBegin({fname:"msid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3});if(a.msid!=null)b.writeString(a.msid);else{var d="stream_label";b.writeString(d)}b.writeFieldEnd();a.msidAppData!=null&&(b.writeFieldBegin({fname:"msidAppData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.msidAppData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("RtcpFbVal");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{var d="";b.writeString(d)}b.writeFieldEnd();a.param!=null&&(b.writeFieldBegin({fname:"param",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.param),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Bandwidth");b.writeFieldBegin({fname:"bwtype",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bwtype!=null)b.writeString(a.bwtype);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bw",ftype:h.I32,fid:2});if(a.bw!=null)b.writeI32(a.bw);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("CodecDescription");a.payloadType!=null&&(b.writeFieldBegin({fname:"payloadType",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:1}),b.writeByte(a.payloadType),b.writeFieldEnd());if(a.encodingName!=null){var d;b.writeFieldBegin({fname:"encodingName",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.encodingName)!=null?d:0);b.writeFieldEnd()}a.clockRateKhz!=null&&(b.writeFieldBegin({fname:"clockRateKhz",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:3}),b.writeByte(a.clockRateKhz),b.writeFieldEnd());b.writeFieldBegin({fname:"numAudioChannels",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:4});if(a.numAudioChannels!=null)b.writeByte(a.numAudioChannels);else{d=1;b.writeByte(d)}b.writeFieldEnd();if(a.fmtParameters!=null){b.writeFieldBegin({fname:"fmtParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:5});b.writeMapBegin({ktype:h.I32,vtype:h.STRING,size:Object.keys(a.fmtParameters).length});for(d of Object.entries(a.fmtParameters)){var e=d[0],f=d[1];b.writeI32((e=Number(e))!=null?e:0);b.writeString(f)}b.writeMapEnd();b.writeFieldEnd()}if(a.enabledOptions!=null){b.writeFieldBegin({fname:"enabledOptions",ftype:(h||(h=c("ThriftTypes"))).SET,fid:6});b.writeSetBegin({etype:h.I32,size:a.enabledOptions.size});for(e of a.enabledOptions){b.writeI32((f=e)!=null?f:0)}b.writeSetEnd();b.writeFieldEnd()}if(a.rtcpFbParameters!=null){b.writeFieldBegin({fname:"rtcpFbParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.rtcpFbParameters).length});for(d of Object.entries(a.rtcpFbParameters)){f=d[0];e=d[1];b.writeString(f);b.writeString(e)}b.writeMapEnd();b.writeFieldEnd()}if(a.rtcpFbParamList!=null){b.writeFieldBegin({fname:"rtcpFbParamList",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:10});b.writeListBegin({etype:h.STRUCT,size:a.rtcpFbParamList.length});for(f of a.rtcpFbParamList)r(f,b);b.writeListEnd();b.writeFieldEnd()}a.videoWidth!=null&&(b.writeFieldBegin({fname:"videoWidth",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8}),b.writeI32(a.videoWidth),b.writeFieldEnd());a.videoHeight!=null&&(b.writeFieldBegin({fname:"videoHeight",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.videoHeight),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("Extmap");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.id!=null)b.writeI32(a.id);else{var d=1;b.writeI32(d)}b.writeFieldEnd();if(a.uri!=null){b.writeFieldBegin({fname:"uri",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.uri)!=null?d:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"extensionAttributes",ftype:h.LIST,fid:3});if(a.extensionAttributes!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.extensionAttributes.length});for(d of a.extensionAttributes){b.writeI32((a=d)!=null?a:0)}b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.length});for(d of a){b.writeI32((a=d)!=null?a:0)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("CryptoParam");a.tag!=null&&(b.writeFieldBegin({fname:"tag",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.tag),b.writeFieldEnd());if(a.suite!=null){var d;b.writeFieldBegin({fname:"suite",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.suite)!=null?d:0);b.writeFieldEnd()}a.keyParams!=null&&(b.writeFieldBegin({fname:"keyParams",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.keyParams),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("IceCandidateSdp");a.foundation!=null&&(b.writeFieldBegin({fname:"foundation",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.foundation),b.writeFieldEnd());b.writeFieldBegin({fname:"componentId",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:2});if(a.componentId!=null)b.writeByte(a.componentId);else{var e=1;b.writeByte(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transport",ftype:h.I32,fid:3});if(a.transport!=null){b.writeI32((e=a.transport)!=null?e:0)}else{e=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.priority!=null&&(b.writeFieldBegin({fname:"priority",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.priority),b.writeFieldEnd());a.address!=null&&(b.writeFieldBegin({fname:"address",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.address),b.writeFieldEnd());a.port!=null&&(b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.port),b.writeFieldEnd());if(a.protocolType!=null){b.writeFieldBegin({fname:"protocolType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7});b.writeI32((e=a.protocolType)!=null?e:0);b.writeFieldEnd()}a.relatedAddress!=null&&(b.writeFieldBegin({fname:"relatedAddress",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.relatedAddress),b.writeFieldEnd());a.relatedPort!=null&&(b.writeFieldBegin({fname:"relatedPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.relatedPort),b.writeFieldEnd());a.username!=null&&(b.writeFieldBegin({fname:"username",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.username),b.writeFieldEnd());a.password!=null&&(b.writeFieldBegin({fname:"password",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.password),b.writeFieldEnd());b.writeFieldBegin({fname:"generation",ftype:h.I32,fid:12});if(a.generation!=null)b.writeI32(a.generation);else{e=0;b.writeI32(e)}b.writeFieldEnd();if(a.tcptype!=null){b.writeFieldBegin({fname:"tcptype",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((e=a.tcptype)!=null?e:0);b.writeFieldEnd()}a.networkId!=null&&(b.writeFieldBegin({fname:"networkId",ftype:(h||(h=c("ThriftTypes"))).I16,fid:14}),b.writeI16(a.networkId),b.writeFieldEnd());a.networkCost!=null&&(b.writeFieldBegin({fname:"networkCost",ftype:(h||(h=c("ThriftTypes"))).I16,fid:15}),b.writeI16(a.networkCost),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("MediaDescription");if(a.mediaType!=null){var e;b.writeFieldBegin({fname:"mediaType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((e=a.mediaType)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.port!=null)b.writeI32(a.port);else{e=1;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"protocol",ftype:h.I32,fid:3});if(a.protocol!=null){b.writeI32((e=a.protocol)!=null?e:0)}else{e=d("WebrtcEnumsTypes").MediaProtocol.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.fmt!=null&&(b.writeFieldBegin({fname:"fmt",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:22}),b.writeString(a.fmt),b.writeFieldEnd());a.mediaIceUserFrag!=null&&(b.writeFieldBegin({fname:"mediaIceUserFrag",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.mediaIceUserFrag),b.writeFieldEnd());a.mediaIcePassword!=null&&(b.writeFieldBegin({fname:"mediaIcePassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.mediaIcePassword),b.writeFieldEnd());if(a.mediaIceOptions!=null){b.writeFieldBegin({fname:"mediaIceOptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRING,size:a.mediaIceOptions.length});for(e of a.mediaIceOptions)b.writeString(e);b.writeListEnd();b.writeFieldEnd()}a.mediaSslFingerprintHash!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintHash",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.mediaSslFingerprintHash),b.writeFieldEnd());a.mediaSslFingerprintDigest!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintDigest",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.mediaSslFingerprintDigest),b.writeFieldEnd());if(a.extmaps!=null){b.writeFieldBegin({fname:"extmaps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.extmaps.length});for(e of a.extmaps)u(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"sendRecvMode",ftype:h.I32,fid:10});if(a.sendRecvMode!=null){b.writeI32((e=a.sendRecvMode)!=null?e:0)}else{e=d("WebrtcEnumsTypes").SendRecvMode.cast(1);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"hasRtcpMux",ftype:h.BOOL,fid:11});if(a.hasRtcpMux!=null)b.writeBool(a.hasRtcpMux);else{e=!0;b.writeBool(e)}b.writeFieldEnd();a.rtcpReducedSize!=null&&(b.writeFieldBegin({fname:"rtcpReducedSize",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:25}),b.writeBool(a.rtcpReducedSize),b.writeFieldEnd());if(a.cryptoParams!=null){b.writeFieldBegin({fname:"cryptoParams",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:12});b.writeListBegin({etype:h.STRUCT,size:a.cryptoParams.length});for(e of a.cryptoParams)v(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.codecs!=null){b.writeFieldBegin({fname:"codecs",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:13});b.writeListBegin({etype:h.STRUCT,size:a.codecs.length});for(e of a.codecs)t(e,b);b.writeListEnd();b.writeFieldEnd()}a.maxPTime!=null&&(b.writeFieldBegin({fname:"maxPTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:14}),b.writeI32(a.maxPTime),b.writeFieldEnd());a.pTime!=null&&(b.writeFieldBegin({fname:"pTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:15}),b.writeI32(a.pTime),b.writeFieldEnd());if(a.ssrcObjects!=null){b.writeFieldBegin({fname:"ssrcObjects",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:16});b.writeListBegin({etype:h.STRUCT,size:a.ssrcObjects.length});for(e of a.ssrcObjects)q(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.candidates!=null){b.writeFieldBegin({fname:"candidates",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:17});b.writeListBegin({etype:h.STRUCT,size:a.candidates.length});for(e of a.candidates)w(e,b);b.writeListEnd();b.writeFieldEnd()}a.conferenceMode!=null&&(b.writeFieldBegin({fname:"conferenceMode",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:18}),b.writeBool(a.conferenceMode),b.writeFieldEnd());if(a.ssrcGroups!=null){b.writeFieldBegin({fname:"ssrcGroups",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:19});b.writeListBegin({etype:h.STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)p(e,b);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:20});b.writeI32((e=a.connectionRole)!=null?e:0);b.writeFieldEnd()}a.mid!=null&&(b.writeFieldBegin({fname:"mid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:21}),b.writeString(a.mid),b.writeFieldEnd());a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:23}),s(a.bandwidth,b),b.writeFieldEnd());a.sctpPort!=null&&(b.writeFieldBegin({fname:"sctpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.sctpPort),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SessionDescription");a.sessionId!=null&&(b.writeFieldBegin({fname:"sessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sessionId),b.writeFieldEnd());a.sessionVersion!=null&&(b.writeFieldBegin({fname:"sessionVersion",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sessionVersion),b.writeFieldEnd());b.writeFieldBegin({fname:"supportsMsid",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3});if(a.supportsMsid!=null)b.writeBool(a.supportsMsid);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();a.useIceLite!=null&&(b.writeFieldBegin({fname:"useIceLite",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.useIceLite),b.writeFieldEnd());if(a.features!=null){b.writeFieldBegin({fname:"features",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.STRING,size:a.features.length});for(d of a.features)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.connectionRole)!=null?d:0);b.writeFieldEnd()}a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),s(a.bandwidth,b),b.writeFieldEnd());if(a.transportBundle!=null){b.writeFieldBegin({fname:"transportBundle",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRING,size:a.transportBundle.length});for(d of a.transportBundle)b.writeString(d);b.writeListEnd();b.writeFieldEnd()}if(a.commonCryptos!=null){b.writeFieldBegin({fname:"commonCryptos",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.commonCryptos.length});for(d of a.commonCryptos)v(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("Sdp");a.sessionDescription!=null&&(b.writeFieldBegin({fname:"sessionDescription",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),y(a.sessionDescription,b),b.writeFieldEnd());if(a.mediaDescriptions!=null){b.writeFieldBegin({fname:"mediaDescriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.mediaDescriptions.length});for(a of a.mediaDescriptions)x(a,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI32();b.ssrcIds.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.ssrcId=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.msidAppData=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.msid===void 0&&(b.msid="stream_label");return b}function C(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.param=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bwtype=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bw=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bwtype===void 0&&(b.bwtype="");b.bw===void 0&&(b.bw=0);return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BYTE?b.payloadType=a.readByte():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.encodingName=d("WebrtcEnumsTypes").CodecName.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BYTE?b.clockRateKhz=a.readByte():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BYTE?b.numAudioChannels=a.readByte():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).MAP){b.fmtParameters={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").CodecOption.cast(a.readI32()),j=a.readString();i!=null&&(b.fmtParameters[i]=j)}}else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).SET){b.enabledOptions=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("WebrtcEnumsTypes").CodecOptionBoolean.cast(a.readI32());b.enabledOptions.add(g)}}else a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.rtcpFbParameters={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();i=a.readString();b.rtcpFbParameters[j]=i}}else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).LIST){b.rtcpFbParamList=[];j=a.readListBegin();for(i=0;i<j.size;i++){g=C(a);b.rtcpFbParamList.push(g)}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.videoWidth=a.readI32():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.videoHeight=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.numAudioChannels===void 0&&(b.numAudioChannels=1);return b}function F(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.id=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.uri=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extensionAttributes=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32());b.extensionAttributes.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id=1);b.extensionAttributes===void 0&&(b.extensionAttributes=[]);return b}function G(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.tag=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.suite=d("WebrtcEnumsTypes").CryptoSuite.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.keyParams=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function H(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.foundation=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BYTE?b.componentId=a.readByte():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.priority=a.readI32():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.address=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.protocolType=d("WebrtcEnumsTypes").IceCandidateProtocolType.cast(a.readI32()):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.relatedAddress=a.readString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.relatedPort=a.readI32():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.username=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.password=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.generation=a.readI32():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.tcptype=d("WebrtcEnumsTypes").IceCandidateTcpType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I16?b.networkId=a.readI16():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I16?b.networkCost=a.readI16():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.componentId===void 0&&(b.componentId=1);b.transport===void 0&&(b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0));b.generation===void 0&&(b.generation=0);return b}function I(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mediaType=d("WebrtcEnumsTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(a.readI32()):a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRING?b.fmt=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIceUserFrag=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIcePassword=a.readString():a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaIceOptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.mediaIceOptions.push(i)}}else a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintHash=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintDigest=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extmaps=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=F(a);b.extmaps.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(a.readI32()):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).BOOL?b.hasRtcpMux=a.readBool():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).BOOL?b.rtcpReducedSize=a.readBool():a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cryptoParams=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.cryptoParams.push(i)}}else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).LIST){b.codecs=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=E(a);b.codecs.push(e)}}else a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I32?b.maxPTime=a.readI32():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.pTime=a.readI32():a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcObjects=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=B(a);b.ssrcObjects.push(i)}}else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).LIST){b.candidates=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=H(a);b.candidates.push(e)}}else a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.conferenceMode=a.readBool():a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=A(a);b.ssrcGroups.push(i)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.sctpPort=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.port===void 0&&(b.port=1);b.protocol===void 0&&(b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(0));b.sendRecvMode===void 0&&(b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(1));b.hasRtcpMux===void 0&&(b.hasRtcpMux=!0);return b}function J(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionVersion=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BOOL?b.supportsMsid=a.readBool():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.useIceLite=a.readBool():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.features=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.features.push(i)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.transportBundle=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=a.readString();b.transportBundle.push(e)}}else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.commonCryptos=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.commonCryptos.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.supportsMsid===void 0&&(b.supportsMsid=!0);return b}function K(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sessionDescription=J(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaDescriptions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=I(a);b.mediaDescriptions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.SsrcGroup$DefaultConstructor=a;g.SsrcObject$DefaultConstructor=b;g.RtcpFbVal$DefaultConstructor=e;g.Bandwidth$DefaultConstructor=f;g.CodecDescription$DefaultConstructor=i;g.Extmap$DefaultConstructor=j;g.CryptoParam$DefaultConstructor=k;g.IceCandidateSdp$DefaultConstructor=l;g.MediaDescription$DefaultConstructor=m;g.SessionDescription$DefaultConstructor=n;g.Sdp$DefaultConstructor=o;g.serializeSsrcGroup=p;g.serializeSsrcObject=q;g.serializeRtcpFbVal=r;g.serializeBandwidth=s;g.serializeCodecDescription=t;g.serializeExtmap=u;g.serializeCryptoParam=v;g.serializeIceCandidateSdp=w;g.serializeMediaDescription=x;g.serializeSessionDescription=y;g.serializeSdp=z;g.deserializeSsrcGroup=A;g.deserializeSsrcObject=B;g.deserializeRtcpFbVal=C;g.deserializeBandwidth=D;g.deserializeCodecDescription=E;g.deserializeExtmap=F;g.deserializeCryptoParam=G;g.deserializeIceCandidateSdp=H;g.deserializeMediaDescription=I;g.deserializeSessionDescription=J;g.deserializeSdp=K}),98);
__d("MultiwayCommonSerializers",["DataMessageSerializers","DataMessageTypes","MultiwayCommonTypes","MultiwaySharedSerializers","MultiwaySharedTypes","StateSyncSerializers","StateSyncTopicsConfigTypes","ThriftTypes","Utf8ToString","WebrtcSdpSerializers","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a;return{message:"",responseStatusCode:(a=d("MultiwayCommonTypes")).RtcResponseStatusCode.cast(0),responseSubCode:a.RtcResponseSubCode.cast(0),apiStatusCode:a.RtcApiStatusCode.cast(0),rtcLogSeverity:a.RtcLogSeverity.cast(0)}}function i(){return{}}function b(){return{media:{}}}function e(){return{body:"",msid:"",mid:""}}function f(){return{sourceKey:"",media:[],ssrcGroups:[]}}function j(){return{mediaStatus:{}}}function k(){return{sdpMLineIndex:"0",sdpMid:""}}function l(){return{stateStore:{},stateStoreV2:{}}}function aa(){return{version:0}}function ba(){return{encryptedTopic:"",encryptedData:Uint8Array.of(),senderId:Uint8Array.of(),messageType:d("MultiwayCommonTypes").E2eeDataMessageType.cast(0)}}function ca(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[]}}function da(){return{currentVersion:"0",mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0)}}function ea(){return{callerUserId:"",calleeUserId:"",sessionId:""}}function fa(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[],renegotiationRequested:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),screenShareStreamAllowed:!1}}function ga(){return{currentVersion:"0"}}function ha(){return{}}function ia(){return{reason:d("MultiwayCommonTypes").HangupReason.cast(0),detailedReasonString:""}}function ja(){return{iceCandidateSdps:[]}}function ka(){return{reason:d("MultiwayCommonTypes").DismissReason.cast(0),detailedReasonString:""}}function la(){return{joinMode:d("MultiwayCommonTypes").JoinMode.cast(0)}}function ma(){return{state:d("MultiwayCommonTypes").ParticipantCallState.cast(0)}}function na(){return{}}function oa(){return{}}function pa(){return{}}function qa(){return{version:"0",participantStates:{},groupsOfUsers:[]}}function ra(){return{currentVersion:"0"}}function sa(){return{subscriptions:[]}}function ta(){return{message:d("DataMessageSerializers").DataMessage$DefaultConstructor()}}function ua(){return{deliveryResult:{}}}function va(){return{usersToInvite:new Set()}}function wa(){return{smcTier:"",region:"",isUsfu:!1,isEdge:!1}}function xa(){return{offer:i(),deviceCapabilities:new Set()}}function ya(){return{answer:i(),mediaStatus:{},initiator:"",isPendingApproval:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),groupsOfUsers:[],screenShareStreamAllowed:!1}}function za(){return{deviceCapabilities:new Set()}}function Aa(){return{}}function Ba(){return{type:d("MultiwayCommonTypes").ClientEventType.cast(0)}}function Ca(){return{clientEvents:[]}}function Da(){return{}}function Ea(){return{}}function Fa(){return{caller:"",otherParticipants:new Set(),ringType:d("MultiwayCommonTypes").RingType.cast(0),mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),isTransferCall:!1}}function Ga(){return{deviceStatus:d("MultiwayCommonTypes").DeviceStatus.cast(0)}}function Ha(){return{usersToRemove:new Set()}}function Ia(){return{topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Ja(){return{topic:"",version:0}}function Ka(){return{syncPayload:l(),topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function La(){return{topic:"",version:0}}function Ma(){return{topic:"",version:0,data:Uint8Array.of()}}function Na(){return{topic:"",version:0}}function Oa(){return{approvalStatus:d("MultiwayCommonTypes").ApprovalStatus.cast(0),targetUsers:new Set()}}function Pa(){return{id:""}}function Qa(){return{actorId:"",baseId:""}}function m(){return{type:d("MultiwayCommonTypes").MessageType.cast(0),conferenceName:"",transactionId:"",retryCount:0}}function n(){return{}}function Ra(){return{messageHeader:m(),messageBody:n()}}function Sa(){return{users:new Set(),allowMultipleJoins:!1,dismissOthersOnFirstJoin:!1,aliasId:""}}function Ta(){return{}}function Ua(a,b){b.writeStructBegin("RtcException");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseStatusCode",ftype:h.I32,fid:2});if(a.responseStatusCode!=null){b.writeI32((e=a.responseStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseSubCode",ftype:h.I32,fid:3});if(a.responseSubCode!=null){b.writeI32((e=a.responseSubCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"apiStatusCode",ftype:h.I32,fid:4});if(a.apiStatusCode!=null){b.writeI32((e=a.apiStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"rtcLogSeverity",ftype:h.I32,fid:5});if(a.rtcLogSeverity!=null){b.writeI32((e=a.rtcLogSeverity)!=null?e:0)}else{a=d("MultiwayCommonTypes").RtcLogSeverity.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("SessionDescription"),a.sdpString!=null&&(b.writeFieldBegin({fname:"sdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sdpString),b.writeFieldEnd()),a.sdpThrift!=null&&(b.writeFieldBegin({fname:"sdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("WebrtcSdpSerializers").serializeSdp(a.sdpThrift,b),b.writeFieldEnd()),a.sdpCompressionVersion!=null&&(b.writeFieldBegin({fname:"sdpCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sdpCompressionVersion)),b.writeFieldEnd()),a.sdpCompressedData!=null&&(b.writeFieldBegin({fname:"sdpCompressedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.sdpCompressedData),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function Va(a,b){b.writeStructBegin("SessionDescriptionUpdate");b.writeFieldBegin({fname:"media",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.media!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.media).length});for(a of Object.entries(a.media)){var d=a[0],e=a[1];b.writeI32(Number(d));p(e,b)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(d).length});for(e of Object.entries(d)){a=e[0];d=e[1];b.writeI32(Number(a));p(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("MediaDescriptionUpdate");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeString(a.body);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"msid",ftype:h.STRING,fid:2});if(a.msid!=null)b.writeString(a.msid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"mid",ftype:h.STRING,fid:3});if(a.mid!=null)b.writeString(a.mid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ServerMediaUpdate");b.writeFieldBegin({fname:"sourceKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.sourceKey!=null)b.writeString(a.sourceKey);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"media",ftype:h.LIST,fid:2});if(a.media!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.media.length});for(e of a.media)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("MultiwaySharedSerializers").serializeMedia(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcGroups",ftype:h.LIST,fid:3});if(a.ssrcGroups!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.ssrcGroups.length});for(e of a.ssrcGroups)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(e of a)d("MultiwaySharedSerializers").serializeSsrcGroup(e,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("ClientMediaUpdate");b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(var e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("IceCandidate");a.candidateSdpString!=null&&(b.writeFieldBegin({fname:"candidateSdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.candidateSdpString),b.writeFieldEnd());b.writeFieldBegin({fname:"sdpMLineIndex",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2});if(a.sdpMLineIndex!=null)b.writeI64(BigInt(a.sdpMLineIndex));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"sdpMid",ftype:h.STRING,fid:3});if(a.sdpMid!=null)b.writeString(a.sdpMid);else{e="";b.writeString(e)}b.writeFieldEnd();a.candidateSdpThrift!=null&&(b.writeFieldBegin({fname:"candidateSdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),d("WebrtcSdpSerializers").serializeIceCandidateSdp(a.candidateSdpThrift,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("SyncPayload");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(var e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"stateStoreV2",ftype:h.MAP,fid:4});if(a.stateStoreV2!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(e of Object.entries(a.stateStoreV2)){f=e[0];g=e[1];b.writeI32((a=Number(f))!=null?a:0);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(a of Object.entries(f)){g=a[0];e=a[1];b.writeI32((f=Number(g))!=null?f:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Wa(a,b){b.writeStructBegin("SyncAck");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{a=0;b.writeI32(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Xa(a,b){b.writeStructBegin("E2eeData");b.writeFieldBegin({fname:"encryptedTopic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.encryptedTopic!=null)b.writeString(a.encryptedTopic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"encryptedData",ftype:h.STRING,fid:2});if(a.encryptedData!=null)b.writeBinary(a.encryptedData);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"senderId",ftype:h.STRING,fid:3});if(a.senderId!=null)b.writeBinary(a.senderId);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();if(a.targetIds!=null){b.writeFieldBegin({fname:"targetIds",ftype:(h||(h=c("ThriftTypes"))).SET,fid:4});b.writeSetBegin({etype:h.STRING,size:a.targetIds.size});for(e of a.targetIds)b.writeBinary(e);b.writeSetEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"messageType",ftype:h.I32,fid:5});if(a.messageType!=null){b.writeI32((e=a.messageType)!=null?e:0)}else{a=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("ClientMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(d of a.mediaUpdates)r(d,b);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:d.length});for(d of d)r(d,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("ClientMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:6});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(f of Object.entries(a.stateStoreV2)){g=f[0];e=f[1];b.writeI32((a=Number(g))!=null?a:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function Ya(a,b){b.writeStructBegin("MultipleRelaysAllocationParameters");b.writeFieldBegin({fname:"callerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.callerUserId!=null)b.writeString(a.callerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"calleeUserId",ftype:h.STRING,fid:2});if(a.calleeUserId!=null)b.writeString(a.calleeUserId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"sessionId",ftype:h.STRING,fid:3});if(a.sessionId!=null)b.writeString(a.sessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("ServerMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(e of a.mediaUpdates)q(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)q(e,b);b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldBegin({fname:"renegotiationRequested",ftype:h.BOOL,fid:8});if(a.renegotiationRequested!=null)b.writeBool(a.renegotiationRequested);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.prAnswer!=null&&(b.writeFieldBegin({fname:"prAnswer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),o(a.prAnswer,b),b.writeFieldEnd());if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:10});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(e of Object.entries(a.stateStore)){var f=e[0],g=e[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.multipleRelaysParameters!=null&&(b.writeFieldBegin({fname:"multipleRelaysParameters",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),Ya(a.multipleRelaysParameters,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:13});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((f=e)!=null?f:0)}b.writeFieldEnd();a.update!=null&&(b.writeFieldBegin({fname:"update",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),Va(a.update,b),b.writeFieldEnd());b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:17});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(e of Object.entries(a.stateStoreV2)){f=e[0];g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(f of a.allowedCustomVideoContentTypes){b.writeI32((g=f)!=null?g:0)}b.writeSetEnd();b.writeFieldEnd()}a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("ServerMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("TransferRequest"),b.writeFieldStop(),b.writeStructEnd()}function z(a,b){b.writeStructBegin("HangupRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").HangupReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("IceCandidateRequest");b.writeFieldBegin({fname:"iceCandidateSdps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.iceCandidateSdps!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.iceCandidateSdps.length});for(a of a.iceCandidateSdps)s(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)s(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("DismissRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").DismissReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();a.callabilityResultErrorCode!=null&&(b.writeFieldBegin({fname:"callabilityResultErrorCode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.callabilityResultErrorCode)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Za(a,b){b.writeStructBegin("EndpointSettings");b.writeFieldBegin({fname:"joinMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.joinMode!=null){b.writeI32((a=a.joinMode)!=null?a:0)}else{a=d("MultiwayCommonTypes").JoinMode.cast(0);b.writeI32((a=a)!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("ParticipantState");b.writeFieldBegin({fname:"state",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.state!=null){var e;b.writeI32((e=a.state)!=null?e:0)}else{e=d("MultiwayCommonTypes").ParticipantCallState.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.sctpNodeId!=null&&(b.writeFieldBegin({fname:"sctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sctpNodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function $a(a,b){b.writeStructBegin("ServerOnlyParticipantState"),a.userCountry!=null&&(b.writeFieldBegin({fname:"userCountry",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.userCountry),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function D(a,b){b.writeStructBegin("UserProfile"),a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.name),b.writeFieldEnd()),a.profilePictureUri!=null&&(b.writeFieldBegin({fname:"profilePictureUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.profilePictureUri),b.writeFieldEnd()),a.aliasId!=null&&(b.writeFieldBegin({fname:"aliasId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.aliasId),b.writeFieldEnd()),a.thirdPartyId!=null&&(b.writeFieldBegin({fname:"thirdPartyId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.thirdPartyId),b.writeFieldEnd()),a.groupId!=null&&(b.writeFieldBegin({fname:"groupId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.groupId),b.writeFieldEnd()),a.avatarImageUri!=null&&(b.writeFieldBegin({fname:"avatarImageUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.avatarImageUri),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ab(a,b){b.writeStructBegin("ProductMetadata"),a.callerInfo!=null&&(b.writeFieldBegin({fname:"callerInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.callerInfo,b),b.writeFieldEnd()),a.liveBroadcastId!=null&&(b.writeFieldBegin({fname:"liveBroadcastId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.liveBroadcastId),b.writeFieldEnd()),a.callingTags!=null&&(b.writeFieldBegin({fname:"callingTags",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.callingTags),b.writeFieldEnd()),a.backingIdentifier!=null&&(b.writeFieldBegin({fname:"backingIdentifier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.backingIdentifier),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function E(a,b){b.writeStructBegin("ConferenceStateRequest");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.version!=null)b.writeI64(BigInt(a.version));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"participantStates",ftype:h.MAP,fid:2});if(a.participantStates!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.participantStates).length});for(e of Object.entries(a.participantStates)){var f=e[0],g=e[1];b.writeString(f);C(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);C(f,b)}b.writeMapEnd()}b.writeFieldEnd();if(a.userProfiles!=null){b.writeFieldBegin({fname:"userProfiles",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:3});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.userProfiles).length});for(e of Object.entries(a.userProfiles)){f=e[0];g=e[1];b.writeString(f);D(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:5});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(g of a.groupsOfUsers)Y(g,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(f of e)Y(f,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("ConferenceStateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{a="0";b.writeI64(BigInt(a))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("SubscriptionRequest");b.writeFieldBegin({fname:"subscriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptions.length});for(a of a.subscriptions)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)d("MultiwaySharedSerializers").serializeSubscription(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("DataMessageRequest");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.message!=null)d("DataMessageSerializers").serializeDataMessage(a.message,b);else{a=d("DataMessageSerializers").DataMessage$DefaultConstructor();d("DataMessageSerializers").serializeDataMessage(a,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("DataMessageResponse");b.writeFieldBegin({fname:"deliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.deliveryResult!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(a.deliveryResult).length});for(var d of Object.entries(a.deliveryResult)){var e=d[0],f=d[1];b.writeString(e);b.writeI32((e=f)!=null?e:0)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(f).length});for(e of Object.entries(f)){d=e[0];f=e[1];b.writeString(d);b.writeI32((d=f)!=null?d:0)}b.writeMapEnd()}b.writeFieldEnd();if(a.serviceTypeDeliveryResult!=null){b.writeFieldBegin({fname:"serviceTypeDeliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.serviceTypeDeliveryResult).length});for(f of Object.entries(a.serviceTypeDeliveryResult)){d=f[0];e=f[1];b.writeI32((a=Number(d))!=null?a:0);b.writeI32((d=e)!=null?d:0)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("AddParticipantsRequest");b.writeFieldBegin({fname:"usersToInvite",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToInvite!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToInvite.size});for(var e of a.usersToInvite)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SfuAllocation");b.writeFieldBegin({fname:"smcTier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.smcTier!=null)b.writeString(a.smcTier);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"region",ftype:h.STRING,fid:2});if(a.region!=null)b.writeString(a.region);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isUsfu",ftype:h.BOOL,fid:3});if(a.isUsfu!=null)b.writeBool(a.isUsfu);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isEdge",ftype:h.BOOL,fid:4});if(a.isEdge!=null)b.writeBool(a.isEdge);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("JoinRequest");b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.offer!=null)o(a.offer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceCapabilities",ftype:h.SET,fid:2});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(e of a.deviceCapabilities){var f;b.writeI32((f=e)!=null?f:0)}b.writeSetEnd()}else{f=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:f.size});for(e of f){b.writeI32((f=e)!=null?f:0)}b.writeSetEnd()}b.writeFieldEnd();if(a.usersToCall!=null){b.writeFieldBegin({fname:"usersToCall",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.usersToCall.size});for(f of a.usersToCall)b.writeString(f);b.writeSetEnd();b.writeFieldEnd()}if(a.mediaStatus!=null){b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){f=e[0];var g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd();b.writeFieldEnd()}a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.supportedExperiments!=null&&(b.writeFieldBegin({fname:"supportedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.supportedExperiments),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}a.userToEscalate!=null&&(b.writeFieldBegin({fname:"userToEscalate",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.userToEscalate),b.writeFieldEnd());a.escalatingCallId!=null&&(b.writeFieldBegin({fname:"escalatingCallId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.escalatingCallId)),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:12});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.answer,b),b.writeFieldEnd());a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),t(a.syncPayload,b),b.writeFieldEnd());if(a.usersToApproveFromWaitingRoom!=null){b.writeFieldBegin({fname:"usersToApproveFromWaitingRoom",ftype:(h||(h=c("ThriftTypes"))).SET,fid:16});b.writeSetBegin({etype:h.STRING,size:a.usersToApproveFromWaitingRoom.size});for(e of a.usersToApproveFromWaitingRoom)b.writeString(e);b.writeSetEnd();b.writeFieldEnd()}a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.sfuAllocation!=null&&(b.writeFieldBegin({fname:"sfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),K(a.sfuAllocation,b),b.writeFieldEnd());if(a.clientMediaMode!=null){b.writeFieldBegin({fname:"clientMediaMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:19});b.writeI32((f=a.clientMediaMode)!=null?f:0);b.writeFieldEnd()}a.endpointSettings!=null&&(b.writeFieldBegin({fname:"endpointSettings",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),Za(a.endpointSettings,b),b.writeFieldEnd());a.backupSfuAllocation!=null&&(b.writeFieldBegin({fname:"backupSfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),K(a.backupSfuAllocation,b),b.writeFieldEnd());if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(g of a.supportedCustomVideoContentTypes){b.writeI32((e=g)!=null?e:0)}b.writeSetEnd();b.writeFieldEnd()}a.configIntegrityOpaqueToken!=null&&(b.writeFieldBegin({fname:"configIntegrityOpaqueToken",ftype:(h||(h=c("ThriftTypes"))).I32,fid:23}),b.writeI32(a.configIntegrityOpaqueToken),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("JoinResponse");b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.answer!=null)o(a.answer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaStatus",ftype:h.MAP,fid:2});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});for(e of Object.entries(a.mediaStatus)){var f=e[0],g=e[1];b.writeString(f);b.writeBool(g)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"initiator",ftype:h.STRING,fid:3});if(a.initiator!=null)b.writeString(a.initiator);else{e="";b.writeString(e)}b.writeFieldEnd();a.negotiatedExperiments!=null&&(b.writeFieldBegin({fname:"negotiatedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.negotiatedExperiments),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:7});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f of a.appMessages)d("DataMessageSerializers").serializeDataMessage(f,b);b.writeListEnd();b.writeFieldEnd()}if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});for(g of Object.entries(a.stateStore)){e=g[0];f=g[1];b.writeString(e);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());b.writeFieldBegin({fname:"isPendingApproval",ftype:h.BOOL,fid:10});if(a.isPendingApproval!=null)b.writeBool(a.isPendingApproval);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:12});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:13});if(a.mediaPath!=null){b.writeI32((g=a.mediaPath)!=null?g:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((f=e)!=null?f:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:14});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(g of a.groupsOfUsers)Y(g,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(f of e)Y(f,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:15});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());a.selfSctpNodeId!=null&&(b.writeFieldBegin({fname:"selfSctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.selfSctpNodeId)),b.writeFieldEnd());if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});for(e of Object.entries(a.stateStoreV2)){f=e[0];g=e[1];b.writeI32((f=Number(f))!=null?f:0);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(f of a.allowedCustomVideoContentTypes){b.writeI32((g=f)!=null?g:0)}b.writeSetEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("ConnectRequest");a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd());b.writeFieldBegin({fname:"deviceCapabilities",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(var e of a.deviceCapabilities){var f;b.writeI32((f=e)!=null?f:0)}b.writeSetEnd()}else{f=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:f.size});for(e of f){b.writeI32((f=e)!=null?f:0)}b.writeSetEnd()}b.writeFieldEnd();if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(f of a.supportedCustomVideoContentTypes){b.writeI32((e=f)!=null?e:0)}b.writeSetEnd();b.writeFieldEnd()}a.prOffer!=null&&(b.writeFieldBegin({fname:"prOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.prOffer,b),b.writeFieldEnd());a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function O(a,b){b.writeStructBegin("ConnectResponse"),a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd()),a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function P(a,b){b.writeStructBegin("ClientEvent");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").ClientEventType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.time!=null&&(b.writeFieldBegin({fname:"time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.time)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("ClientEventRequest");b.writeFieldBegin({fname:"clientEvents",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.clientEvents!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.clientEvents.length});for(a of a.clientEvents)P(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)P(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function bb(a,b){b.writeStructBegin("ThreadIdInfo"),a.groupThreadId!=null&&(b.writeFieldBegin({fname:"groupThreadId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.groupThreadId),b.writeFieldEnd()),a.peerId!=null&&(b.writeFieldBegin({fname:"peerId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.peerId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function R(a,b){b.writeStructBegin("ClientEventResponse"),b.writeFieldStop(),b.writeStructEnd()}function S(a,b){b.writeStructBegin("RingRequest");b.writeFieldBegin({fname:"caller",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.caller!=null)b.writeString(a.caller);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"otherParticipants",ftype:h.SET,fid:2});if(a.otherParticipants!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.otherParticipants.size});for(e of a.otherParticipants)b.writeString(e);b.writeSetEnd()}else{e=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:e.size});for(e of e)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ringType",ftype:h.I32,fid:4});if(a.ringType!=null){b.writeI32((e=a.ringType)!=null?e:0)}else{e=d("MultiwayCommonTypes").RingType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.offeredExperiments!=null&&(b.writeFieldBegin({fname:"offeredExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.offeredExperiments),b.writeFieldEnd());a.isScheduledCall!=null&&(b.writeFieldBegin({fname:"isScheduledCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.isScheduledCall),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e of a.appMessages)d("DataMessageSerializers").serializeDataMessage(e,b);b.writeListEnd();b.writeFieldEnd()}a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),o(a.offer,b),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.isPreconnectSupported!=null&&(b.writeFieldBegin({fname:"isPreconnectSupported",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:12}),b.writeBool(a.isPreconnectSupported),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:13}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.unifiedOffer!=null&&(b.writeFieldBegin({fname:"unifiedOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.unifiedOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.isLegacyCall!=null&&(b.writeFieldBegin({fname:"isLegacyCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:17}),b.writeBool(a.isLegacyCall),b.writeFieldEnd());b.writeFieldBegin({fname:"isTransferCall",ftype:h.BOOL,fid:18});if(a.isTransferCall!=null)b.writeBool(a.isTransferCall);else{e=!1;b.writeBool(e)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());if(a.overlayConfigs!=null){b.writeFieldBegin({fname:"overlayConfigs",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:21});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.overlayConfigs).length});for(e of Object.entries(a.overlayConfigs)){var f=e[0],g=e[1];b.writeI32(Number(f));b.writeI32(g)}b.writeMapEnd();b.writeFieldEnd()}a.productMetadata!=null&&(b.writeFieldBegin({fname:"productMetadata",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:22}),ab(a.productMetadata,b),b.writeFieldEnd());a.callerClientSessionId!=null&&(b.writeFieldBegin({fname:"callerClientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:23}),b.writeString(a.callerClientSessionId),b.writeFieldEnd());a.threadIdInfo!=null&&(b.writeFieldBegin({fname:"threadIdInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:24}),bb(a.threadIdInfo,b),b.writeFieldEnd());a.linkUrl!=null&&(b.writeFieldBegin({fname:"linkUrl",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:25}),b.writeString(a.linkUrl),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function T(a,b){b.writeStructBegin("RingResponse");b.writeFieldBegin({fname:"deviceStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.deviceStatus!=null){b.writeI32((a=a.deviceStatus)!=null?a:0)}else{a=d("MultiwayCommonTypes").DeviceStatus.cast(0);b.writeI32((a=a)!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function U(a,b){b.writeStructBegin("RemoveParticipantsRequest");b.writeFieldBegin({fname:"usersToRemove",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToRemove!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToRemove.size});for(a of a.usersToRemove)b.writeString(a);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(a of a)b.writeString(a);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function V(a,b){b.writeStructBegin("UnsubscribeRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:3});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function W(a,b){b.writeStructBegin("UnsubscribeResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function X(a,b){b.writeStructBegin("UpdateRequest");b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.syncPayload!=null)t(a.syncPayload,b);else{var e=l();t(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"topic",ftype:h.STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:5});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function cb(a,b){b.writeStructBegin("UpdateResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function db(a,b){b.writeStructBegin("NotifyRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:4});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),t(a.syncPayload,b),b.writeFieldEnd());if(a.topicId!=null){b.writeFieldBegin({fname:"topicId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.topicId)!=null?d:0);b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function eb(a,b){b.writeStructBegin("NotifyResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function fb(a,b){b.writeStructBegin("ApprovalRequest");b.writeFieldBegin({fname:"approvalStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.approvalStatus!=null){var e;b.writeI32((e=a.approvalStatus)!=null?e:0)}else{e=d("MultiwayCommonTypes").ApprovalStatus.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"targetUsers",ftype:h.SET,fid:3});if(a.targetUsers!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.targetUsers.size});for(e of a.targetUsers)b.writeString(e);b.writeSetEnd()}else{a=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.size});for(e of a)b.writeString(e);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function gb(a,b){b.writeStructBegin("RtcSender");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function hb(a,b){b.writeStructBegin("RtcReceiver");b.writeFieldBegin({fname:"actorId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.actorId!=null)b.writeString(a.actorId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"baseId",ftype:h.STRING,fid:2});if(a.baseId!=null)b.writeString(a.baseId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function ib(a,b){b.writeStructBegin("RtcMessageHeader");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").MessageType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.STRING,fid:3});if(a.transactionId!=null)b.writeString(a.transactionId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"retryCount",ftype:h.I16,fid:4});if(a.retryCount!=null)b.writeI16(a.retryCount);else{e=0;b.writeI16(e)}b.writeFieldEnd();a.serverInfoData!=null&&(b.writeFieldBegin({fname:"serverInfoData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.serverInfoData),b.writeFieldEnd());if(a.responseStatusCode!=null){b.writeFieldBegin({fname:"responseStatusCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.responseStatusCode)!=null?e:0);b.writeFieldEnd()}if(a.extensions!=null){b.writeFieldBegin({fname:"extensions",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.extensions).length});for(e of Object.entries(a.extensions)){var f=e[0],g=e[1];b.writeString(f);b.writeString(g)}b.writeMapEnd();b.writeFieldEnd()}a.sequenceNumber!=null&&(b.writeFieldBegin({fname:"sequenceNumber",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.sequenceNumber)),b.writeFieldEnd());a.clientSessionId!=null&&(b.writeFieldBegin({fname:"clientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.clientSessionId),b.writeFieldEnd());a.responseStatusMessage!=null&&(b.writeFieldBegin({fname:"responseStatusMessage",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.responseStatusMessage),b.writeFieldEnd());if(a.responseSubCode!=null){b.writeFieldBegin({fname:"responseSubCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:11});b.writeI32((f=a.responseSubCode)!=null?f:0);b.writeFieldEnd()}a.collisionKey!=null&&(b.writeFieldBegin({fname:"collisionKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:12}),b.writeString(a.collisionKey),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.serverSessionId!=null&&(b.writeFieldBegin({fname:"serverSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:14}),b.writeString(a.serverSessionId),b.writeFieldEnd());a.rtcHandle!=null&&(b.writeFieldBegin({fname:"rtcHandle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:15}),b.writeString(a.rtcHandle),b.writeFieldEnd());a.retryAfterMsec!=null&&(b.writeFieldBegin({fname:"retryAfterMsec",ftype:(h||(h=c("ThriftTypes"))).I32,fid:16}),b.writeI32(a.retryAfterMsec),b.writeFieldEnd());a.receiverUserId!=null&&(b.writeFieldBegin({fname:"receiverUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:17}),b.writeString(a.receiverUserId),b.writeFieldEnd());if(a.clientStack!=null){b.writeFieldBegin({fname:"clientStack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:18});b.writeI32((e=a.clientStack)!=null?e:0);b.writeFieldEnd()}a.serverMsgTime!=null&&(b.writeFieldBegin({fname:"serverMsgTime",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.serverMsgTime)),b.writeFieldEnd());a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),gb(a.sender,b),b.writeFieldEnd());a.receiver!=null&&(b.writeFieldBegin({fname:"receiver",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),hb(a.receiver,b),b.writeFieldEnd());if(a.messageTags!=null){b.writeFieldBegin({fname:"messageTags",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.messageTags.size});for(f of a.messageTags){b.writeI32((g=f)!=null?g:0)}b.writeSetEnd();b.writeFieldEnd()}a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());a.protocolVersion!=null&&(b.writeFieldBegin({fname:"protocolVersion",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.protocolVersion),b.writeFieldEnd());a.bodyCompressionVersion!=null&&(b.writeFieldBegin({fname:"bodyCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.bodyCompressionVersion)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function jb(a,b){b.writeStructBegin("RtcMessageBody"),a.joinRequest!=null&&(b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),L(a.joinRequest,b),b.writeFieldEnd()),a.joinResponse!=null&&(b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),M(a.joinResponse,b),b.writeFieldEnd()),a.serverMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),w(a.serverMediaUpdateRequest,b),b.writeFieldEnd()),a.serverMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),x(a.serverMediaUpdateResponse,b),b.writeFieldEnd()),a.hangupRequest!=null&&(b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),z(a.hangupRequest,b),b.writeFieldEnd()),a.iceCandidateRequest!=null&&(b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),A(a.iceCandidateRequest,b),b.writeFieldEnd()),a.ringRequest!=null&&(b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),S(a.ringRequest,b),b.writeFieldEnd()),a.ringResponse!=null&&(b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),T(a.ringResponse,b),b.writeFieldEnd()),a.dismissRequest!=null&&(b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),B(a.dismissRequest,b),b.writeFieldEnd()),a.conferenceStateRequest!=null&&(b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),E(a.conferenceStateRequest,b),b.writeFieldEnd()),a.conferenceStateResponse!=null&&(b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),F(a.conferenceStateResponse,b),b.writeFieldEnd()),a.addParticipantsRequest!=null&&(b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),J(a.addParticipantsRequest,b),b.writeFieldEnd()),a.subscriptionRequest!=null&&(b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),G(a.subscriptionRequest,b),b.writeFieldEnd()),a.clientMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),u(a.clientMediaUpdateRequest,b),b.writeFieldEnd()),a.clientMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),v(a.clientMediaUpdateResponse,b),b.writeFieldEnd()),a.dataMessageRequest!=null&&(b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),H(a.dataMessageRequest,b),b.writeFieldEnd()),a.removeParticipantsRequest!=null&&(b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),U(a.removeParticipantsRequest,b),b.writeFieldEnd()),a.dataMessageResponse!=null&&(b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19}),I(a.dataMessageResponse,b),b.writeFieldEnd()),a.updateRequest!=null&&(b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30}),X(a.updateRequest,b),b.writeFieldEnd()),a.updateResponse!=null&&(b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31}),cb(a.updateResponse,b),b.writeFieldEnd()),a.notifyRequest!=null&&(b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32}),db(a.notifyRequest,b),b.writeFieldEnd()),a.notifyResponse!=null&&(b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33}),eb(a.notifyResponse,b),b.writeFieldEnd()),a.connectRequest!=null&&(b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34}),N(a.connectRequest,b),b.writeFieldEnd()),a.connectResponse!=null&&(b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35}),O(a.connectResponse,b),b.writeFieldEnd()),a.clientEventRequest!=null&&(b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36}),Q(a.clientEventRequest,b),b.writeFieldEnd()),a.clientEventResponse!=null&&(b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37}),R(a.clientEventResponse,b),b.writeFieldEnd()),a.unsubscribeRequest!=null&&(b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40}),V(a.unsubscribeRequest,b),b.writeFieldEnd()),a.unsubscribeResponse!=null&&(b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41}),W(a.unsubscribeResponse,b),b.writeFieldEnd()),a.approvalRequest!=null&&(b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42}),fb(a.approvalRequest,b),b.writeFieldEnd()),a.transferRequest!=null&&(b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43}),y(a.transferRequest,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function kb(a,b){b.writeStructBegin("RtcMultiwayMessage");b.writeFieldBegin({fname:"messageHeader",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.messageHeader!=null)ib(a.messageHeader,b);else{var d=m();ib(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"messageBody",ftype:h.STRUCT,fid:2});if(a.messageBody!=null)jb(a.messageBody,b);else{d=n();jb(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Y(a,b){b.writeStructBegin("GroupOfUsers");b.writeFieldBegin({fname:"users",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.users!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.users.size});for(var d of a.users)b.writeString(d);b.writeSetEnd()}else{d=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:d.size});for(d of d)b.writeString(d);b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"allowMultipleJoins",ftype:h.BOOL,fid:2});if(a.allowMultipleJoins!=null)b.writeBool(a.allowMultipleJoins);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"dismissOthersOnFirstJoin",ftype:h.BOOL,fid:3});if(a.dismissOthersOnFirstJoin!=null)b.writeBool(a.dismissOthersOnFirstJoin);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"aliasId",ftype:h.STRING,fid:4});if(a.aliasId!=null)b.writeString(a.aliasId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function lb(a,b){b.writeStructBegin("RtcMessageBodyVariant");if(a.joinRequest!=null){b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});L(a.joinRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.joinResponse!=null){b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});M(a.joinResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateRequest!=null){b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});w(a.serverMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateResponse!=null){b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});x(a.serverMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.hangupRequest!=null){b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});z(a.hangupRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.iceCandidateRequest!=null){b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});A(a.iceCandidateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringRequest!=null){b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8});S(a.ringRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringResponse!=null){b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9});T(a.ringResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dismissRequest!=null){b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10});B(a.dismissRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateRequest!=null){b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11});E(a.conferenceStateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateResponse!=null){b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12});F(a.conferenceStateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.addParticipantsRequest!=null){b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13});J(a.addParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.subscriptionRequest!=null){b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14});G(a.subscriptionRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateRequest!=null){b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15});u(a.clientMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateResponse!=null){b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16});v(a.clientMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageRequest!=null){b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17});H(a.dataMessageRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.removeParticipantsRequest!=null){b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18});U(a.removeParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageResponse!=null){b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19});I(a.dataMessageResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateRequest!=null){b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30});X(a.updateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateResponse!=null){b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31});cb(a.updateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyRequest!=null){b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32});db(a.notifyRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyResponse!=null){b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33});eb(a.notifyResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectRequest!=null){b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34});N(a.connectRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectResponse!=null){b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35});O(a.connectResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventRequest!=null){b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36});Q(a.clientEventRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventResponse!=null){b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37});R(a.clientEventResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeRequest!=null){b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40});V(a.unsubscribeRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeResponse!=null){b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41});W(a.unsubscribeResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.approvalRequest!=null){b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42});fb(a.approvalRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.transferRequest!=null){b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43});y(a.transferRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");b.responseStatusCode===void 0&&(b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0));b.responseSubCode===void 0&&(b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0));b.apiStatusCode===void 0&&(b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0));b.rtcLogSeverity===void 0&&(b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(0));return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdpThrift=d("WebrtcSdpSerializers").deserializeSdp(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sdpCompressionVersion=a.readI64().toString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpCompressedData=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function nb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.media={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=ob(a);b.media[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.media===void 0&&(b.media={});return b}function ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body="");b.msid===void 0&&(b.msid="");b.mid===void 0&&(b.mid="");return b}function pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sourceKey=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.media=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeMedia(a);b.media.push(i)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedSerializers").deserializeSsrcGroup(a);b.ssrcGroups.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sourceKey===void 0&&(b.sourceKey="");b.media===void 0&&(b.media=[]);b.ssrcGroups===void 0&&(b.ssrcGroups=[]);return b}function qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readBool();b.mediaStatus[i]=j}}else a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mediaStatus===void 0&&(b.mediaStatus={});return b}function rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.candidateSdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.sdpMLineIndex=a.readI64().toString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpMid=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.candidateSdpThrift=d("WebrtcSdpSerializers").deserializeIceCandidateSdp(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sdpMLineIndex===void 0&&(b.sdpMLineIndex="0");b.sdpMid===void 0&&(b.sdpMid="");return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});b.stateStoreV2===void 0&&(b.stateStoreV2={});return b}function sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedTopic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedData=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.senderId=a.readBinary():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetIds=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("Utf8ToString").Utf8ToString(a.readBinary());b.targetIds.add(i)}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.encryptedTopic===void 0&&(b.encryptedTopic="");b.encryptedData===void 0&&(b.encryptedData=Uint8Array.of());b.senderId===void 0&&(b.senderId=Uint8Array.of());b.messageType===void 0&&(b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0));return b}function ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=qb(a);b.mediaUpdates.push(g)}}else a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);return b}function vb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));return b}function wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.callerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.calleeUserId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.callerUserId===void 0&&(b.callerUserId="");b.calleeUserId===void 0&&(b.calleeUserId="");b.sessionId===void 0&&(b.sessionId="");return b}function xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=pb(a);b.mediaUpdates.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).BOOL?b.renegotiationRequested=a.readBool():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prAnswer=Z(a):a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};i=a.readMapBegin();for(g=0;g<i.size;g++){e=a.readString();var j=d("StateSyncSerializers").deserializeState(a);b.stateStore[e]=j}}else a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRUCT?b.multipleRelaysParameters=wb(a):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.update=nb(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(j=0;j<e.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());i=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=i)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();g=a.readSetBegin();for(i=0;i<g.size;i++){j=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(j)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);b.renegotiationRequested===void 0&&(b.renegotiationRequested=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ab(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").HangupReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").HangupReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Bb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.iceCandidateSdps=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=rb(a);b.iceCandidateSdps.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.iceCandidateSdps===void 0&&(b.iceCandidateSdps=[]);return b}function Cb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").DismissReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.callabilityResultErrorCode=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").DismissReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Db(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.joinMode===void 0&&(b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(0));return b}function Eb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sctpNodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.state===void 0&&(b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(0));return b}function Fb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userCountry=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Gb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.profilePictureUri=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.thirdPartyId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.groupId=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.avatarImageUri=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Hb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.callerInfo=Gb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.liveBroadcastId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.callingTags=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.backingIdentifier=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ib(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.participantStates={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=Eb(a);b.participantStates[i]=j}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).MAP){b.userProfiles={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readString();e=Gb(a);b.userProfiles[g]=e}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];g=a.readListBegin();for(e=0;e<g.size;e++){j=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(j)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];i=a.readListBegin();for(j=0;j<i.size;j++){e=lc(a);b.groupsOfUsers.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version="0");b.participantStates===void 0&&(b.participantStates={});b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);return b}function Jb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function Kb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptions.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptions===void 0&&(b.subscriptions=[]);return b}function Lb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.message=d("DataMessageSerializers").deserializeDataMessage(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message=d("DataMessageSerializers").DataMessage$DefaultConstructor());return b}function Mb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.deliveryResult={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());b.deliveryResult[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.serviceTypeDeliveryResult={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());e=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());g!=null&&(b.serviceTypeDeliveryResult[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deliveryResult===void 0&&(b.deliveryResult={});return b}function Nb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToInvite=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.usersToInvite.add(i)}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.usersToInvite===void 0&&(b.usersToInvite=new Set());return b}function Ob(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.smcTier=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.region=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.isUsfu=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.isEdge=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.smcTier===void 0&&(b.smcTier="");b.region===void 0&&(b.region="");b.isUsfu===void 0&&(b.isUsfu=!1);b.isEdge===void 0&&(b.isEdge=!1);return b}function Pb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var j=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(j)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToCall=new Set();j=a.readSetBegin();for(g=0;g<j.size;g++){e=a.readString();b.usersToCall.add(e)}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();var k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.supportedExperiments=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.userToEscalate=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I64?b.escalatingCallId=a.readI64().toString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToApproveFromWaitingRoom=new Set();e=a.readSetBegin();for(g=0;g<e.size;g++){k=a.readString();b.usersToApproveFromWaitingRoom.add(k)}}else a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sfuAllocation=Ob(a):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I32?b.clientMediaMode=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.endpointSettings=Db(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.backupSfuAllocation=Ob(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I32?b.configIntegrityOpaqueToken=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.offer===void 0&&(b.offer=i());b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var j=a.readString(),k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.initiator=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.negotiatedExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(g=0;g<e.size;g++){k=a.readString();j=d("StateSyncSerializers").deserializeState(a);b.stateStore[k]=j}}else a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPendingApproval=a.readBool():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];k=a.readListBegin();for(j=0;j<k.size;j++){g=lc(a);b.groupsOfUsers.push(g)}}else a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).I64?b.selfSctpNodeId=a.readI64().toString():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());k=d("StateSyncSerializers").deserializeState(a);j!=null&&(b.stateStoreV2[j]=k)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(g)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.answer===void 0&&(b.answer=i());b.mediaStatus===void 0&&(b.mediaStatus={});b.initiator===void 0&&(b.initiator="");b.isPendingApproval===void 0&&(b.isPendingApproval=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function Rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(i)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prOffer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").ClientEventType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.time=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").ClientEventType.cast(0));return b}function Ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.clientEvents=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Tb(a);b.clientEvents.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.clientEvents===void 0&&(b.clientEvents=[]);return b}function Vb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.groupThreadId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.peerId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.caller=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.otherParticipants=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.otherParticipants.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.ringType=d("MultiwayCommonTypes").RingType.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.offeredExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.isScheduledCall=a.readBool():a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPreconnectSupported=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.unifiedOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.isLegacyCall=a.readBool():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.isTransferCall=a.readBool():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 21:if(f===(h||(h=c("ThriftTypes"))).MAP){b.overlayConfigs={};e=a.readMapBegin();for(g=0;g<e.size;g++){i=a.readI32();var j=a.readI32();b.overlayConfigs[i]=j}}else a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRUCT?b.productMetadata=Hb(a):a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRING?b.callerClientSessionId=a.readString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).STRUCT?b.threadIdInfo=Vb(a):a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).STRING?b.linkUrl=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.caller===void 0&&(b.caller="");b.otherParticipants===void 0&&(b.otherParticipants=new Set());b.ringType===void 0&&(b.ringType=d("MultiwayCommonTypes").RingType.cast(0));b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.isTransferCall===void 0&&(b.isTransferCall=!1);return b}function Yb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceStatus===void 0&&(b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(0));return b}function Zb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.usersToRemove=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.usersToRemove.add(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.usersToRemove===void 0&&(b.usersToRemove=new Set());return b}function $b(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function ac(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function bc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.syncPayload===void 0&&(b.syncPayload=l());b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function cc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function dc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.data===void 0&&(b.data=Uint8Array.of());return b}function ec(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function fc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetUsers=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.targetUsers.add(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.approvalStatus===void 0&&(b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(0));b.targetUsers===void 0&&(b.targetUsers=new Set());return b}function gc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function hc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.actorId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.baseId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.actorId===void 0&&(b.actorId="");b.baseId===void 0&&(b.baseId="");return b}function ic(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").MessageType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.transactionId=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I16?b.retryCount=a.readI16():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.serverInfoData=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.extensions={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readString();b.extensions[i]=j}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I64?b.sequenceNumber=a.readI64().toString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.responseStatusMessage=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRING?b.collisionKey=a.readString():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRING?b.serverSessionId=a.readString():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRING?b.rtcHandle=a.readString():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).I32?b.retryAfterMsec=a.readI32():a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRING?b.receiverUserId=a.readString():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).I32?b.clientStack=d("WebrtcSignalingCommonTypes").ClientStack.cast(a.readI32()):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I64?b.serverMsgTime=a.readI64().toString():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sender=gc(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.receiver=hc(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.messageTags=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("MultiwayCommonTypes").MessageTag.cast(a.readI32());b.messageTags.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.protocolVersion=a.readI32():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).I64?b.bodyCompressionVersion=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").MessageType.cast(0));b.conferenceName===void 0&&(b.conferenceName="");b.transactionId===void 0&&(b.transactionId="");b.retryCount===void 0&&(b.retryCount=0);return b}function jc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinRequest=Pb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinResponse=Qb(a):a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateRequest=xb(a):a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateResponse=yb(a):a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRUCT?b.hangupRequest=Ab(a):a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.iceCandidateRequest=Bb(a):a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringRequest=Xb(a):a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringResponse=Yb(a):a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dismissRequest=Cb(a):a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateRequest=Ib(a):a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateResponse=Jb(a):a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).STRUCT?b.addParticipantsRequest=Nb(a):a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).STRUCT?b.subscriptionRequest=Kb(a):a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateRequest=ub(a):a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateResponse=vb(a):a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageRequest=Lb(a):a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).STRUCT?b.removeParticipantsRequest=Zb(a):a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageResponse=Mb(a):a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateRequest=bc(a):a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateResponse=cc(a):a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyRequest=dc(a):a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyResponse=ec(a):a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectRequest=Rb(a):a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectResponse=Sb(a):a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventRequest=Ub(a):a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventResponse=Wb(a):a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeRequest=$b(a):a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeResponse=ac(a):a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).STRUCT?b.approvalRequest=fc(a):a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).STRUCT?b.transferRequest=zb(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function kc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageHeader=ic(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageBody=jc(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.messageHeader===void 0&&(b.messageHeader=m());b.messageBody===void 0&&(b.messageBody=n());return b}function lc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.users=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.users.add(g)}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.allowMultipleJoins=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.dismissOthersOnFirstJoin=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.users===void 0&&(b.users=new Set());b.allowMultipleJoins===void 0&&(b.allowMultipleJoins=!1);b.dismissOthersOnFirstJoin===void 0&&(b.dismissOthersOnFirstJoin=!1);b.aliasId===void 0&&(b.aliasId="");return b}function mc(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinRequest=Pb(a),b="joinRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinRequest, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinResponse=Qb(a),b="joinResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinResponse, previous deserialized field: "+b);else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateRequest=xb(a),b="serverMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateResponse=yb(a),b="serverMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.hangupRequest=Ab(a),b="hangupRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: hangupRequest, previous deserialized field: "+b);else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.iceCandidateRequest=Bb(a),b="iceCandidateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: iceCandidateRequest, previous deserialized field: "+b);else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringRequest=Xb(a),b="ringRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringRequest, previous deserialized field: "+b);else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringResponse=Yb(a),b="ringResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringResponse, previous deserialized field: "+b);else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dismissRequest=Cb(a),b="dismissRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dismissRequest, previous deserialized field: "+b);else a.skip(f);break;case 11:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateRequest=Ib(a),b="conferenceStateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateRequest, previous deserialized field: "+b);else a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateResponse=Jb(a),b="conferenceStateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateResponse, previous deserialized field: "+b);else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.addParticipantsRequest=Nb(a),b="addParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: addParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.subscriptionRequest=Kb(a),b="subscriptionRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: subscriptionRequest, previous deserialized field: "+b);else a.skip(f);break;case 15:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateRequest=ub(a),b="clientMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateResponse=vb(a),b="clientMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageRequest=Lb(a),b="dataMessageRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageRequest, previous deserialized field: "+b);else a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.removeParticipantsRequest=Zb(a),b="removeParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: removeParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageResponse=Mb(a),b="dataMessageResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageResponse, previous deserialized field: "+b);else a.skip(f);break;case 30:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateRequest=bc(a),b="updateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateRequest, previous deserialized field: "+b);else a.skip(f);break;case 31:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateResponse=cc(a),b="updateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateResponse, previous deserialized field: "+b);else a.skip(f);break;case 32:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyRequest=dc(a),b="notifyRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyRequest, previous deserialized field: "+b);else a.skip(f);break;case 33:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyResponse=ec(a),b="notifyResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyResponse, previous deserialized field: "+b);else a.skip(f);break;case 34:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectRequest=Rb(a),b="connectRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectRequest, previous deserialized field: "+b);else a.skip(f);break;case 35:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectResponse=Sb(a),b="connectResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectResponse, previous deserialized field: "+b);else a.skip(f);break;case 36:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventRequest=Ub(a),b="clientEventRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventRequest, previous deserialized field: "+b);else a.skip(f);break;case 37:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventResponse=Wb(a),b="clientEventResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventResponse, previous deserialized field: "+b);else a.skip(f);break;case 40:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeRequest=$b(a),b="unsubscribeRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeRequest, previous deserialized field: "+b);else a.skip(f);break;case 41:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeResponse=ac(a),b="unsubscribeResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeResponse, previous deserialized field: "+b);else a.skip(f);break;case 42:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.approvalRequest=fc(a),b="approvalRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: approvalRequest, previous deserialized field: "+b);else a.skip(f);break;case 43:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.transferRequest=zb(a),b="transferRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: transferRequest, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.RtcException$DefaultConstructor=a;g.SessionDescription$DefaultConstructor=i;g.SessionDescriptionUpdate$DefaultConstructor=b;g.MediaDescriptionUpdate$DefaultConstructor=e;g.ServerMediaUpdate$DefaultConstructor=f;g.ClientMediaUpdate$DefaultConstructor=j;g.IceCandidate$DefaultConstructor=k;g.SyncPayload$DefaultConstructor=l;g.SyncAck$DefaultConstructor=aa;g.E2eeData$DefaultConstructor=ba;g.ClientMediaUpdateRequest$DefaultConstructor=ca;g.ClientMediaUpdateResponse$DefaultConstructor=da;g.MultipleRelaysAllocationParameters$DefaultConstructor=ea;g.ServerMediaUpdateRequest$DefaultConstructor=fa;g.ServerMediaUpdateResponse$DefaultConstructor=ga;g.TransferRequest$DefaultConstructor=ha;g.HangupRequest$DefaultConstructor=ia;g.IceCandidateRequest$DefaultConstructor=ja;g.DismissRequest$DefaultConstructor=ka;g.EndpointSettings$DefaultConstructor=la;g.ParticipantState$DefaultConstructor=ma;g.ServerOnlyParticipantState$DefaultConstructor=na;g.UserProfile$DefaultConstructor=oa;g.ProductMetadata$DefaultConstructor=pa;g.ConferenceStateRequest$DefaultConstructor=qa;g.ConferenceStateResponse$DefaultConstructor=ra;g.SubscriptionRequest$DefaultConstructor=sa;g.DataMessageRequest$DefaultConstructor=ta;g.DataMessageResponse$DefaultConstructor=ua;g.AddParticipantsRequest$DefaultConstructor=va;g.SfuAllocation$DefaultConstructor=wa;g.JoinRequest$DefaultConstructor=xa;g.JoinResponse$DefaultConstructor=ya;g.ConnectRequest$DefaultConstructor=za;g.ConnectResponse$DefaultConstructor=Aa;g.ClientEvent$DefaultConstructor=Ba;g.ClientEventRequest$DefaultConstructor=Ca;g.ThreadIdInfo$DefaultConstructor=Da;g.ClientEventResponse$DefaultConstructor=Ea;g.RingRequest$DefaultConstructor=Fa;g.RingResponse$DefaultConstructor=Ga;g.RemoveParticipantsRequest$DefaultConstructor=Ha;g.UnsubscribeRequest$DefaultConstructor=Ia;g.UnsubscribeResponse$DefaultConstructor=Ja;g.UpdateRequest$DefaultConstructor=Ka;g.UpdateResponse$DefaultConstructor=La;g.NotifyRequest$DefaultConstructor=Ma;g.NotifyResponse$DefaultConstructor=Na;g.ApprovalRequest$DefaultConstructor=Oa;g.RtcSender$DefaultConstructor=Pa;g.RtcReceiver$DefaultConstructor=Qa;g.RtcMessageHeader$DefaultConstructor=m;g.RtcMessageBody$DefaultConstructor=n;g.RtcMultiwayMessage$DefaultConstructor=Ra;g.GroupOfUsers$DefaultConstructor=Sa;g.RtcMessageBodyVariant$DefaultConstructor=Ta;g.serializeRtcException=Ua;g.serializeSessionDescription=o;g.serializeSessionDescriptionUpdate=Va;g.serializeMediaDescriptionUpdate=p;g.serializeServerMediaUpdate=q;g.serializeClientMediaUpdate=r;g.serializeIceCandidate=s;g.serializeSyncPayload=t;g.serializeSyncAck=Wa;g.serializeE2eeData=Xa;g.serializeClientMediaUpdateRequest=u;g.serializeClientMediaUpdateResponse=v;g.serializeMultipleRelaysAllocationParameters=Ya;g.serializeServerMediaUpdateRequest=w;g.serializeServerMediaUpdateResponse=x;g.serializeTransferRequest=y;g.serializeHangupRequest=z;g.serializeIceCandidateRequest=A;g.serializeDismissRequest=B;g.serializeEndpointSettings=Za;g.serializeParticipantState=C;g.serializeServerOnlyParticipantState=$a;g.serializeUserProfile=D;g.serializeProductMetadata=ab;g.serializeConferenceStateRequest=E;g.serializeConferenceStateResponse=F;g.serializeSubscriptionRequest=G;g.serializeDataMessageRequest=H;g.serializeDataMessageResponse=I;g.serializeAddParticipantsRequest=J;g.serializeSfuAllocation=K;g.serializeJoinRequest=L;g.serializeJoinResponse=M;g.serializeConnectRequest=N;g.serializeConnectResponse=O;g.serializeClientEvent=P;g.serializeClientEventRequest=Q;g.serializeThreadIdInfo=bb;g.serializeClientEventResponse=R;g.serializeRingRequest=S;g.serializeRingResponse=T;g.serializeRemoveParticipantsRequest=U;g.serializeUnsubscribeRequest=V;g.serializeUnsubscribeResponse=W;g.serializeUpdateRequest=X;g.serializeUpdateResponse=cb;g.serializeNotifyRequest=db;g.serializeNotifyResponse=eb;g.serializeApprovalRequest=fb;g.serializeRtcSender=gb;g.serializeRtcReceiver=hb;g.serializeRtcMessageHeader=ib;g.serializeRtcMessageBody=jb;g.serializeRtcMultiwayMessage=kb;g.serializeGroupOfUsers=Y;g.serializeRtcMessageBodyVariant=lb;g.deserializeRtcException=mb;g.deserializeSessionDescription=Z;g.deserializeSessionDescriptionUpdate=nb;g.deserializeMediaDescriptionUpdate=ob;g.deserializeServerMediaUpdate=pb;g.deserializeClientMediaUpdate=qb;g.deserializeIceCandidate=rb;g.deserializeSyncPayload=$;g.deserializeSyncAck=sb;g.deserializeE2eeData=tb;g.deserializeClientMediaUpdateRequest=ub;g.deserializeClientMediaUpdateResponse=vb;g.deserializeMultipleRelaysAllocationParameters=wb;g.deserializeServerMediaUpdateRequest=xb;g.deserializeServerMediaUpdateResponse=yb;g.deserializeTransferRequest=zb;g.deserializeHangupRequest=Ab;g.deserializeIceCandidateRequest=Bb;g.deserializeDismissRequest=Cb;g.deserializeEndpointSettings=Db;g.deserializeParticipantState=Eb;g.deserializeServerOnlyParticipantState=Fb;g.deserializeUserProfile=Gb;g.deserializeProductMetadata=Hb;g.deserializeConferenceStateRequest=Ib;g.deserializeConferenceStateResponse=Jb;g.deserializeSubscriptionRequest=Kb;g.deserializeDataMessageRequest=Lb;g.deserializeDataMessageResponse=Mb;g.deserializeAddParticipantsRequest=Nb;g.deserializeSfuAllocation=Ob;g.deserializeJoinRequest=Pb;g.deserializeJoinResponse=Qb;g.deserializeConnectRequest=Rb;g.deserializeConnectResponse=Sb;g.deserializeClientEvent=Tb;g.deserializeClientEventRequest=Ub;g.deserializeThreadIdInfo=Vb;g.deserializeClientEventResponse=Wb;g.deserializeRingRequest=Xb;g.deserializeRingResponse=Yb;g.deserializeRemoveParticipantsRequest=Zb;g.deserializeUnsubscribeRequest=$b;g.deserializeUnsubscribeResponse=ac;g.deserializeUpdateRequest=bc;g.deserializeUpdateResponse=cc;g.deserializeNotifyRequest=dc;g.deserializeNotifyResponse=ec;g.deserializeApprovalRequest=fc;g.deserializeRtcSender=gc;g.deserializeRtcReceiver=hc;g.deserializeRtcMessageHeader=ic;g.deserializeRtcMessageBody=jc;g.deserializeRtcMultiwayMessage=kc;g.deserializeGroupOfUsers=lc;g.deserializeRtcMessageBodyVariant=mc}),98);
__d("OculusMqttChannel",["CurrentUser","HorizonMetaIsCastingRoute","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("HorizonMetaIsCastingRoute").getIsCastingRoute()?c("MqttEnvInitializer").initialize(function(a){return new WebSocket(a,"horizon_webcasting")}):c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?2763362503905702:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getOculusMqttChannelInstance=a;g.getOculusMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("OverlayConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a={OverlayConfigNumParameters:4798,OverlayConfigNotPresentFlagValue:-1};b=a;f["default"]=b}),66);
__d("OverlayConfigLayerSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({UNKNOWN:0,DEFAULT:1,MOBILECONFIG:2,APP_CRUCIBLE:3,APP_JNI:4,UNITTEST_CONFIG:5,SERVER:6,PLACEHOLDER:7,LS_MOBILECONFIG:8,APP_LS:9,APP_JS:10,BROWSER:11,APP_OVRRTC:12,APP_IG:13,MLITE4A_LEGACY_QE:14,APP_MLITE4A:15,APP_PORTAL:16,IG_LAUNCHER:17,APP_ARCHON:18,APP_WS:19,APP_NOX:20,APP_WEARABLE_MSNGR:21,APP_WEARABLE_IG:22,APP_ORCA_RSYS:23,APP_WILDE:24,APP_MKIOS:25,APP_MK4A:26,DYNAMIC:27,SDK_DEFAULT:28,APP_FB4A:29,APP_RSYS_SDK_SAMPLE:30,APP_BIZAPP:31,APP_WORKCHAT:32,APP_ARCHON_LOCAL_OVERRIDES:33,APP_CATHODE:34,APP_WR4I:35,APP_WR4A:36,APP_METACAM:37,HORIZON_EMERGENCY:38,APP_SOCIALPLATFORM:39,APP_TWILIGHT:40,APP_AR_CALLING_LOCAL_OVERRIDES:41,APP_TWILIGHT_CASTING:42,TWILIGHT_EMERGENCY:43,METACAM_EMERGENCY:44,CALL_SCOPED:45,APP_CASE50:46});b=a;f["default"]=b}),66);
__d("OverlayConfigServerLayer",["OverlayConfigConstants","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.createFromHeader=function(b){try{b=b==null?void 0:(b=b.extensions)==null?void 0:b.oc1_json;if(b==null)return null;b=JSON.parse(b);b=b==null?void 0:b.values;return b==null?null:new a(b)}catch(a){return null}};function a(a){this.$1=a}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").SERVER};b.getValue=function(a){a=this.$1[String(a)];return a!=null?a:c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("RequestStreamBodyUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return g(atob(a))};b=function(a){return btoa(h(a))};c=function(a){a=btoa(a);var b=a.indexOf("=");return b===-1?a:a.substring(0,b)};var g=function(a){a=a;var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c},h=function(a){var b="",c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};f.base64ToUint8Array=a;f.uint8ArrayToBase64=b;f.stringToBase64WithoutPadding=c;f.stringToUint8Array=g;f.uint8ArrayToString=h}),66);
__d("ZenonIceStatsParser",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a=a.split("\r\n");a.forEach(function(a){g(a)&&b.push({gen:h(a),type:i(a)})});return b}function g(a){return a.indexOf("candidate:")>-1}function h(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b}function i(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"}f.extractIceInfo=a}),66);
__d("ZenonMWThriftMessageMap",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return"UNKNOWN";switch(a){case d("MultiwayCommonTypes").MessageType.JOIN:return"JOIN";case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return"ICE_CANDIDATE";case d("MultiwayCommonTypes").MessageType.HANGUP:return"HANGUP";case d("MultiwayCommonTypes").MessageType.RING:return"RING";case d("MultiwayCommonTypes").MessageType.DISMISS:return"DISMISS";case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:return"CONFERENCE_STATE";case d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return"SUBSCRIPTION";case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:return"DATA_MESSAGE";case d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.PING:return"PING";case d("MultiwayCommonTypes").MessageType.NOTIFY:return"NOTIFY";case d("MultiwayCommonTypes").MessageType.CONNECT:return"CONNECT";case d("MultiwayCommonTypes").MessageType.CLIENT_EVENT:return"CLIENT_EVENT";case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:return"UNSUBSCRIBE";case d("MultiwayCommonTypes").MessageType.UPDATE:return"UPDATE";case d("MultiwayCommonTypes").MessageType.APPROVAL:return"APPROVAL";case d("MultiwayCommonTypes").MessageType.WAKEUP:return"WAKEUP";default:return"UNKNOWN"}}function b(a){switch(a.toLowerCase()){case"join":return d("MultiwayCommonTypes").MessageType.JOIN;case"server_media_update":return d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE;case"ice_candidate":return d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE;case"hangup":return d("MultiwayCommonTypes").MessageType.HANGUP;case"ring":return d("MultiwayCommonTypes").MessageType.RING;case"dismiss":return d("MultiwayCommonTypes").MessageType.DISMISS;case"conference_state":return d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE;case"add_participants":return d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS;case"subscription":return d("MultiwayCommonTypes").MessageType.SUBSCRIPTION;case"client_media_update":return d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE;case"data_message":return d("MultiwayCommonTypes").MessageType.DATA_MESSAGE;case"remove_participants":return d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS;case"ping":return d("MultiwayCommonTypes").MessageType.PING;case"notify":return d("MultiwayCommonTypes").MessageType.NOTIFY;case"connect":return d("MultiwayCommonTypes").MessageType.CONNECT;case"client_event":return d("MultiwayCommonTypes").MessageType.CLIENT_EVENT;case"unsubscribe":return d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE;case"update":return d("MultiwayCommonTypes").MessageType.UPDATE;case"approval":return d("MultiwayCommonTypes").MessageType.APPROVAL;case"wakeup":return d("MultiwayCommonTypes").MessageType.WAKEUP;default:return null}}g.messageTypeToString=a;g.messageTypeFromString=b}),98);
__d("ZenonEndCallReason",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BREAKOUT_SESSION_SWITCH_ROOM:"BreakoutSessionSwitchRoom",CALL_END_ACCEPT_AFTER_HANG_UP:"CallEndAcceptAfterHangUp",CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:"CallerHasAppealableCallingRestriction",CALLER_NOT_VISIBLE:"CallerNotVisible",CAMERA_PERMISSION_DENIED:"CameraPermissionDenied",CARRIER_BLOCKED:"CarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError",CLIENT_ERROR:"ClientError",CLIENT_INTERRUPTED:"ClientInterrupted",CONNECTION_DROPPED:"ConnectionDropped",END_TO_END_ENCRYPTION_INVARIANT_VIOLATED:"EndToEndEncryptionInvariantViolated",HANGUP_CALL:"HangupCall",IGNORE_CALL:"IgnoreCall",IN_ANOTHER_CALL:"InAnotherCall",INACTIVE_TIMEOUT:"InactiveTimeout",INCOMING_TIMEOUT:"IncomingTimeout",MAX_ALLOWED_PARTICIPANTS_REACHED:"MaxAllowedParticipantsReached",MICROPHONE_PERMISSION_DENIED:"MicrophonePermissionDenied",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",NO_PERMISSION:"NoPermission",NO_UI_SHOWN:"NoUIShown",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",OTHER_NOT_CAPABLE:"OtherNotCapable",PRODUCT_SERVER_DEFINED_END_REASON:"ProductServerDefinedEndReason",REMOVED_BY_PARTICIPANT:"RemovedByParticipant",RING_MUTED:"RingMuted",SESSION_MIGRATED:"SessionMigrated",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",TX_ACK_TIMEOUT:"TxAckTimeout",UNEXPECTED_END_OF_CALL:"UnexpectedEndOfCall",UNKNOWN:"Unknown",VERSION_UNSUPPORTED:"VersionUnsupported",WEBRTC_ERROR:"WebRTCError"});c=a;f["default"]=c}),66);
__d("ZenonIncomingRingSDKTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Hangup","OtherDismiss"]);f.ZenonCancelReason=a}),66);
__d("fbwebrtc_ClientStack",[],(function(a,b,c,d,e,f){a=Object.freeze({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f["default"]=a}),66);
__d("multiway_ApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DENIED:0,APPROVED:1});f["default"]=a}),66);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){a=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20});f["default"]=a}),66);
__d("multiway_ClientEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1});f["default"]=a}),66);
__d("multiway_ConferenceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23,ULLC:24});f["default"]=a}),66);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10});f["default"]=a}),66);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){a=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22,CALL_ENDED_BY_OVER_CAPACITY:23});f["default"]=a}),66);
__d("multiway_E2eeMode",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2});f["default"]=a}),66);
__d("multiway_EndpointServiceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8});f["default"]=a}),66);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){a=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10});f["default"]=a}),66);
__d("multiway_JoinMode",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:0,SECONDARY:1});f["default"]=a}),66);
__d("multiway_MediaPath",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SFU:1,P2P:2});f["default"]=a}),66);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NotPaused:0,Paused:1});f["default"]=a}),66);
__d("multiway_MessageTag",[],(function(a,b,c,d,e,f){a=Object.freeze({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002});f["default"]=a}),66);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28});f["default"]=a}),66);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17,UNCALLABLE_DELAYED:18});f["default"]=a}),66);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8});f["default"]=a}),66);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f["default"]=a}),66);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:2035,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,INVALID_MULTIWAY_PARAMS:3009,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,TOO_MANY_MEDIA_TRACKS_IN_SDP:4045,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});f["default"]=a}),66);
__d("multiway_SubscriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2});f["default"]=a}),66);
__d("multiway_VideoQuality",[],(function(a,b,c,d,e,f){a=Object.freeze({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});f["default"]=a}),66);
__d("ZenonMWMessageTypes",["$InternalEnum","fbwebrtc_ClientStack","multiway_ApprovalStatus","multiway_Capability","multiway_ClientEventType","multiway_ConferenceType","multiway_DeviceStatus","multiway_DismissReason","multiway_E2eeMode","multiway_EndpointServiceType","multiway_HangupReason","multiway_JoinMode","multiway_MediaPath","multiway_MediaPauseStatus","multiway_MessageTag","multiway_MessageType","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_SubscriptionType","multiway_VideoQuality"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum")({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3});g.ZenonMWClientStack=c("fbwebrtc_ClientStack");g.ZenonMWApprovalStatus=c("multiway_ApprovalStatus");g.ZenonMWCapability=c("multiway_Capability");g.ZenonMWClientEventType=c("multiway_ClientEventType");g.ZenonMWConferenceType=c("multiway_ConferenceType");g.ZenonMWDeviceStatus=c("multiway_DeviceStatus");g.ZenonMWDismissReason=c("multiway_DismissReason");g.ZenonMWE2eeMode=c("multiway_E2eeMode");g.ZenonMWEndpointServiceType=c("multiway_EndpointServiceType");g.ZenonMWHangupReason=c("multiway_HangupReason");g.ZenonMWMediaPath=c("multiway_MediaPath");g.ZenonMWJoinMode=c("multiway_JoinMode");g.ZenonMWMediaPauseStatus=c("multiway_MediaPauseStatus");g.ZenonMWMessageTag=c("multiway_MessageTag");g.ZenonMWSignalingPayloadType=c("multiway_MessageType");g.ZenonMWParticipantCallState=c("multiway_ParticipantCallState");g.ZenonMWRingType=c("multiway_RingType");g.ZenonMWResponseStatusCode=c("multiway_RtcResponseStatusCode");g.ZenonMWResponseSubCode=c("multiway_RtcResponseSubCode");g.ZenonMWSubscriptionType=c("multiway_SubscriptionType");g.ZenonMWVideoQuality=c("multiway_VideoQuality");g.ZenonMWTrackLabel=a}),98);
__d("ZenonMediaError",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ConnectionClosed","IceDisconnected","IceFailure","SetLocalSdpFailed","SetRemoteSdpFailed","RollbackSdpFailed","UnknownError"]);f.ZenonMediaError=a}),66);
__d("ZenonDismissReason",["$InternalEnum","FBLogger","ZenonIncomingRingSDKTypes","ZenonMWMessageTypes","ZenonMediaError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({IgnoreCall:0,HangupCall:1,InAnotherCall:2,AcceptAfterHangUp:3,NoAnswerTimeout:4,IncomingTimeout:5,OtherInstanceHandled:6,SignalingMessageFailed:7,ConnectionDropped:8,ClientInterrupted:9,WebRTCError:10,ClientError:11,NoPermission:12,OtherNotCapable:13,NoUIShown:14,VersionUnsupported:15,CallerNotVisible:16,CarrierBlocked:17,OtherCarrierBlocked:18,ClientEncryptionError:19,MicrophonePermissionDenied:20,CameraPermissionDenied:21,SessionMigrated:22,RingMuted:23,JoinApprovalDenied:24,RejectedByCallee:25,CallEndedByProduct:26,CallEnded:27,AnsweredOnAnotherDevice:28,RejectedOnAnotherDevice:29,CallCollision:30,MaxAllowedParticipantsReached:31,UnexpectedEndOfCall:32,TxAckTimeout:33,EndToEndEncryptionInvariantViolated:34,ProductServerDefinedEndReason:35,RemovedByParticipant:39,AnsweredByOtherUser:40,CallerHasAppealableCallingRestriction:41});function a(a){switch(a){case"BreakoutSessionSwitchRoom":return i.HangupCall;case"CallEndAcceptAfterHangUp":return i.AcceptAfterHangUp;case"CallerNotVisible":return i.CallerNotVisible;case"CarrierBlocked":return i.CarrierBlocked;case"ClientEncryptionError":return i.ClientEncryptionError;case"ClientError":return i.ClientError;case"ClientInterrupted":return i.ClientInterrupted;case"ConnectionDropped":return i.ConnectionDropped;case"HangupCall":return i.HangupCall;case"IgnoreCall":return i.IgnoreCall;case"InAnotherCall":return i.InAnotherCall;case"EndToEndEncryptionInvariantViolated":return i.EndToEndEncryptionInvariantViolated;case"InactiveTimeout":return i.CallEnded;case"IncomingTimeout":return i.IncomingTimeout;case"MaxAllowedParticipantsReached":return i.MaxAllowedParticipantsReached;case"NoAnswerTimeout":return i.NoAnswerTimeout;case"NoPermission":return i.NoPermission;case"NoUIShown":return i.NoUIShown;case"OtherCarrierBlocked":return i.OtherCarrierBlocked;case"OtherInstanceHandled":return i.OtherInstanceHandled;case"OtherNotCapable":return i.OtherNotCapable;case"SignalingMessageFailed":return i.SignalingMessageFailed;case"UnexpectedEndOfCall":return i.UnexpectedEndOfCall;case"Unknown":return i.CallEnded;case"VersionUnsupported":return i.VersionUnsupported;case"WebRTCError":return i.WebRTCError;case"MicrophonePermissionDenied":return i.MicrophonePermissionDenied;case"CameraPermissionDenied":return i.CameraPermissionDenied;case"SessionMigrated":return i.SessionMigrated;case"RingMuted":return i.RingMuted;case"TxAckTimeout":return i.TxAckTimeout;case"ProductServerDefinedEndReason":return i.ProductServerDefinedEndReason;case"RemovedByParticipant":return i.RemovedByParticipant;case"CallerHasAppealableCallingRestriction":return i.CallerHasAppealableCallingRestriction}}function e(a){switch(a){case i.CallEnded:case i.CallEndedByProduct:case i.HangupCall:return"HangupCall";case i.IgnoreCall:case i.JoinApprovalDenied:case i.RejectedByCallee:return"IgnoreCall";case i.InAnotherCall:return"InAnotherCall";case i.AcceptAfterHangUp:return"CallEndAcceptAfterHangUp";case i.NoAnswerTimeout:return"NoAnswerTimeout";case i.IncomingTimeout:return"IncomingTimeout";case i.AnsweredOnAnotherDevice:case i.CallCollision:case i.RejectedOnAnotherDevice:case i.OtherInstanceHandled:case i.AnsweredByOtherUser:return"OtherInstanceHandled";case i.SignalingMessageFailed:return"SignalingMessageFailed";case i.ConnectionDropped:return"ConnectionDropped";case i.ClientInterrupted:return"ClientInterrupted";case i.WebRTCError:return"WebRTCError";case i.ClientError:return"ClientError";case i.NoPermission:return"NoPermission";case i.OtherNotCapable:return"OtherNotCapable";case i.NoUIShown:return"NoUIShown";case i.VersionUnsupported:return"VersionUnsupported";case i.CallerNotVisible:return"CallerNotVisible";case i.CarrierBlocked:return"CarrierBlocked";case i.OtherCarrierBlocked:return"OtherCarrierBlocked";case i.ClientEncryptionError:return"ClientEncryptionError";case i.UnexpectedEndOfCall:return"UnexpectedEndOfCall";case i.MaxAllowedParticipantsReached:return"MaxAllowedParticipantsReached";case i.MicrophonePermissionDenied:return"MicrophonePermissionDenied";case i.CameraPermissionDenied:return"CameraPermissionDenied";case i.SessionMigrated:return"SessionMigrated";case i.RingMuted:return"RingMuted";case i.TxAckTimeout:return"TxAckTimeout";case i.EndToEndEncryptionInvariantViolated:return"EndToEndEncryptionInvariantViolated";case i.ProductServerDefinedEndReason:return"ProductServerDefinedEndReason";case i.RemovedByParticipant:return"RemovedByParticipant";case i.CallerHasAppealableCallingRestriction:return"CallerHasAppealableCallingRestriction"}c("FBLogger")("rtc_www").mustfix("Unknown dismiss reason: %s",a);return"Unknown"}function f(a){switch(a){case i.OtherInstanceHandled:case i.AnsweredOnAnotherDevice:case i.AnsweredByOtherUser:case i.RejectedOnAnotherDevice:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss;default:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup}}function j(a){switch(a){case d("ZenonMediaError").ZenonMediaError.IceDisconnected:return i.ConnectionDropped;case d("ZenonMediaError").ZenonMediaError.ConnectionClosed:return i.HangupCall;case d("ZenonMediaError").ZenonMediaError.IceFailure:case d("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed:case d("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed:case d("ZenonMediaError").ZenonMediaError.RollbackSdpFailed:return i.WebRTCError;case d("ZenonMediaError").ZenonMediaError.UnknownError:return i.UnexpectedEndOfCall}}function k(a){return l[a]}var l=Object.freeze((b={},b[(h=d("ZenonMWMessageTypes")).ZenonMWDismissReason.CALL_ENDED]=i.CallEnded,b[h.ZenonMWDismissReason.ANSWERED_ON_ANOTHER_DEVICE]=i.AnsweredOnAnotherDevice,b[h.ZenonMWDismissReason.ANSWERED_BY_OTHER_USER]=i.AnsweredByOtherUser,b[h.ZenonMWDismissReason.IN_ANOTHER_CALL]=i.InAnotherCall,b[h.ZenonMWDismissReason.CONNECTION_DROPPED]=i.ConnectionDropped,b[h.ZenonMWDismissReason.REJECTED_ON_ANOTHER_DEVICE]=i.RejectedOnAnotherDevice,b[h.ZenonMWDismissReason.REJECTED_BY_CALLEE]=i.RejectedByCallee,b[h.ZenonMWDismissReason.CALL_ENDED_BY_PRODUCT]=i.CallEndedByProduct,b[h.ZenonMWDismissReason.INTERNAL_ERROR]=i.SignalingMessageFailed,b[h.ZenonMWDismissReason.REMOVED_BY_PARTICIPANT]=i.RemovedByParticipant,b[h.ZenonMWDismissReason.TX_ACK_TIMEDOUT]=i.TxAckTimeout,b));g.ZenonDismissReason=i;g.endCallToDismissReason=a;g.dismissToEndCallReason=e;g.dismissReasonToCancelReason=f;g.mediaErrorToDismissReason=j;g.mwDismissToDmissReason=k}),98);
__d("ZenonMWThriftMessageTagUtils",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("MultiwayCommonTypes").MessageTag.PRANSWER:return 1001;case d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER:return 1002;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE:return 1003;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER:return 1004;case d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER:return 1005;case d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE:return 1006;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:return 1007;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:return 1008;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED:return 1009;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED:return 1010;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR:return 2001;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR:return 2002;case d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS:return 2003;case d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING:return 3001;case d("MultiwayCommonTypes").MessageTag.IS_INITIATOR:return 4001;case d("MultiwayCommonTypes").MessageTag.PREGEN_SDP:return 4002}}function a(a){switch(a){case 1001:return d("MultiwayCommonTypes").MessageTag.PRANSWER;case 1002:return d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER;case 1003:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE;case 1004:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER;case 1005:return d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER;case 1006:return d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE;case 1007:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM;case 1008:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS;case 1009:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED;case 1010:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED;case 2001:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR;case 2002:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR;case 2003:return d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS;case 3001:return d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING;case 4001:return d("MultiwayCommonTypes").MessageTag.IS_INITIATOR;case 4002:return d("MultiwayCommonTypes").MessageTag.PREGEN_SDP}}function b(a){var b=[];a==null?void 0:a.forEach(function(a){a&&b.push(h(a))});return b}g.toThriftMessageTag=a;g.fromThriftMessageTags=b}),98);
__d("ZenonCallsModelTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum")).Mirrored(["Disconnected","Precontacting","Contacting","Ringing","PendingApproval","Approved","FailedApproval","Connecting","Connected","Reconnecting","ProvisionalRinging"]);d=a.Mirrored(["Facebook","Instagram","Messenger","Guest","WhatsApp","Workplace"]);e=a.Mirrored(["New","Connecting","PendingApproval","Connected","Terminating","Terminated"]);b=a.Mirrored(["Unknown","CallsBlocked","PageAdminPressedDecline"]);a=a.Mirrored(["None","PendingPeerFeedback","Declined","RemoteDeclined","LocalDeclined","Cancelled","TimedOut","Accepted","InitiatedFromPeer"]);f.ZenonCallParticipantState=c;f.ZenonCallParticipantType=d;f.ZenonCallState=e;f.ZenonEndCallSubreason=b;f.ZenonVideoEscalationStatus=a}),66);
__d("ZenonParticipantState",["$InternalEnum","ZenonCallsModelTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({UNKNOWN:0,ADDING:1,CONTACTING:2,RINGING:3,ACCEPTING:4,PRECONNECTING:5,CONNECTING:6,CONNECTED:7,REMOVING:8,DISCONNECTED:9,NO_ANSWER:10,REJECTED:11,UNREACHABLE:12,CONNECTION_DROPPED:13,PARTICIPANT_LIMIT_REACHED:14,IN_ANOTHER_CALL:15,RING_TYPE_UNSUPPORTED:16,PENDING_APPROVAL:17,APPROVING:18,DENYING:19,APPROVED:20,FAILED_APPROVAL:21,HANGUP_IN_WAITING_ROOM:22,RECONNECTING:23});function a(a){if(a==null)return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected;switch(a){case h.CONTACTING:case h.PRECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Contacting;case h.RINGING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Ringing;case h.CONNECTING:case h.RECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connecting;case h.CONNECTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected;case h.PENDING_APPROVAL:case h.APPROVING:case h.DENYING:case h.ACCEPTING:case h.ADDING:case h.REMOVING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.PendingApproval;case h.APPROVED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Approved;case h.FAILED_APPROVAL:return d("ZenonCallsModelTypes").ZenonCallParticipantState.FailedApproval;case h.HANGUP_IN_WAITING_ROOM:case h.UNKNOWN:case h.DISCONNECTED:case h.NO_ANSWER:case h.REJECTED:case h.UNREACHABLE:case h.CONNECTION_DROPPED:case h.PARTICIPANT_LIMIT_REACHED:case h.IN_ANOTHER_CALL:case h.RING_TYPE_UNSUPPORTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}g.ZenonParticipantState=h;g.toCallParticipantState=a}),98);
__d("ZenonScreenShare",["UserAgent","ZenonAppProvider","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.length===1&&((a=a[0])==null?void 0:a.contentType)==="screen"}function h(){return!c("UserAgent").isBrowser("Safari")}function i(){return d("ZenonAppProvider").isOculusCastingSite()&&c("justknobx")._("1977")?!1:!0}function b(){return!h()||!i()}g.isScreenSharingTrack=a;g.screenShareWithReplaceTrack=b}),98);
__d("addDevTierOverridesToHeaderExtensions",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={multiwayCoreTier:"",multiwayWwwTier:""};if(!c("gkx")("25224"))return b;b.multiwayWwwTier=h(a,"multiway_www_tier");b.multiwayCoreTier=h(a,"multiway_core_tier");return b}function h(a,b){b=b+"=";a=a.split(b);return a[1]?a.pop().split("&").shift():""}g["default"]=a}),98);
__d("ZenonMWThriftTranslatorUtils",["MultiwayCommonTypes","MultiwaySharedTypes","OverlayConfigServerLayer","RequestStreamBodyUtils","WebrtcSignalingCommonTypes","ZenonDismissReason","ZenonMWMessageTypes","ZenonMWThriftMessageTagUtils","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","addDevTierOverridesToHeaderExtensions","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="signalingDominantSpeakerUpdate",l="signalingVideoUploadUpdate",m="E2eeState",n=new Map(Array.from(d("MultiwaySharedTypes").ConferenceType.members(),function(a){return[d("MultiwaySharedTypes").ConferenceType.getName(a),a]}));function a(a,b,c,d){c===void 0&&(c=!1),a&&Object.keys(a).forEach(function(e){if(e===m&&d)return;var f=a[e],g=f.data;f=f.version;if(g!=null){g={data:g,eventName:"stateSyncNotifyRequest",responseRequired:c,topic:e,version:f};b.push(g)}})}function b(a){if(a){a=a[m];return a==null?void 0:a.data}}function e(a){if(a==null)return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN;switch(a){case d("MultiwaySharedTypes").MediaPath.SFU:return d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU;case d("MultiwaySharedTypes").MediaPath.P2P:return d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P;default:return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN}}function f(a){if(a==null)return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN;switch(a){case d("MultiwayCommonTypes").ParticipantCallState.DISCONNECTED:return d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.NO_ANSWER:return d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER;case d("MultiwayCommonTypes").ParticipantCallState.REJECTED:return d("ZenonParticipantState").ZenonParticipantState.REJECTED;case d("MultiwayCommonTypes").ParticipantCallState.UNREACHABLE:case d("MultiwayCommonTypes").ParticipantCallState.UNCALLABLE:return d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTION_DROPPED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED;case d("MultiwayCommonTypes").ParticipantCallState.CONTACTING:return d("ZenonParticipantState").ZenonParticipantState.CONTACTING;case d("MultiwayCommonTypes").ParticipantCallState.RINGING:return d("ZenonParticipantState").ZenonParticipantState.RINGING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTING:return d("ZenonParticipantState").ZenonParticipantState.CONNECTING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.PARTICIPANT_LIMIT_REACHED:return d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED;case d("MultiwayCommonTypes").ParticipantCallState.IN_ANOTHER_CALL:return d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL;case d("MultiwayCommonTypes").ParticipantCallState.RING_TYPE_UNSUPPORTED:return d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED;case d("MultiwayCommonTypes").ParticipantCallState.PENDING_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.APPROVED:return d("ZenonParticipantState").ZenonParticipantState.APPROVED;case d("MultiwayCommonTypes").ParticipantCallState.FAILED_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.HANGUP_IN_WAITING_ROOM:return d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM;default:return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN}}function o(a){var b=null;a!=null&&a.forEach(function(a){a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var c;a=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(a));b={groupThreadID:(c=a.group_thread_id)!=null?c:null,peerID:(c=a.peer_id)!=null?c:null,serverInfoData:(c=a.server_info_data)!=null?c:null}}}});return b}function p(a){a=a&&a.length>0?a.find(function(a){return((a=a.body)==null?void 0:(a=a.genericMessage)==null?void 0:a.topic)==="room_metadata"}):null;if(a){var b;b=(b=a.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;if(b!=null){b=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(b));a=(a=a.header)==null?void 0:a.sender;if(b.link_hash!=null&&b.room_name!=null&&a!=null)return{linkHash:b.link_hash,profileURL:b.profile_url,ringSubtitle:b.ring_subtitle,roomName:b.room_name,sender:a}}}return null}function q(a){return a.reduce(function(a,b){var c;c=(c=b.body)==null?void 0:(c=c.genericMessage)==null?void 0:c.topic;b=(b=b.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;c!=null&&b!=null&&(a[c]=d("RequestStreamBodyUtils").uint8ArrayToString(b));return a},{})}function r(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return d("MultiwaySharedTypes").MediaPath.SFU;case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return d("MultiwaySharedTypes").MediaPath.P2P;default:return d("MultiwaySharedTypes").MediaPath.UNKNOWN}}function s(a,b,c){c===void 0&&(c=0);var d={fromVersion:b,tracks:[],version:c};a!=null&&Object.keys(a.tracks).forEach(function(b){var c,e=a.tracks[b];c={enabled:e.enabled,name:(c=e.name)!=null?c:"",participantID:(c=e.owner)!=null?c:"0",trackID:b,type:t(e.label)};d.tracks.push(c)});return d}function t(a){if(a==null)return null;switch(a){case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO:return"audio";case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO:return"video";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO:return"screen_audio";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO:return"screen";default:return null}}function u(a,b){b=c("OverlayConfigServerLayer").createFromHeader(b);if(b){b={eventName:"overlayConfigServerUpdateRequest",serverLayer:b};a.push(b)}}function v(a){var b=a.header,c=a.rtcMessageBody;a=a.type;b=A(b,a);a={messageBody:c,messageHeader:b};return a}function w(a){var b=a.header,c=a.rtcMessageBody,d=a.statusCode,e=a.subCode;a=a.type;b=H(b,a,d,e);a={messageBody:c,messageHeader:b};return a}var x={IN_ANOTHER_CALL:(i=d("MultiwayCommonTypes")).DeviceStatus.IN_ANOTHER_CALL,NO_OP:null,NOT_SUPPORTED:i.DeviceStatus.NOT_SUPPORTED,OK:i.DeviceStatus.OK};function y(a,b){return Object.keys(a).map(function(c){var e=a[c];return{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(e),topic:c}},header:{recipients:new Set(b),topic_DEPRECATED:c}}})}function z(a){var b=a.clientSessionId,e=a.conferenceName,f=a.receiver,g=a.receiverUserId,h=a.sequenceNumber,i=a.serverInfoData,j=a.transactionId;if(g==null)throw c("err")("Incoming Thrift MW messages should have receiverUserId populated.");b=b;var k={userID:"2"};j={actorID:(f=f==null?void 0:f.actorId)!=null?f:null,messageID:j,messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(a.messageTags),protocol:c("ZenonSignalingProtocol").MW,remoteInfo:k,retryCount:a.retryCount,roomInfo:{name:e},sequenceNumber:Number(h),signalingID:b,userInfo:{userID:(f=g)!=null?f:"1"}};i!=null&&(j.remoteSignalingID=i);return j}function A(a,b){var e,f=a.messageID,g=a.messageTags,h=a.remoteSignalingID,i=a.roomInfo,j=a.signalingID,k=c("addDevTierOverridesToHeaderExtensions")(window.location.href);e={clientStack:d("WebrtcSignalingCommonTypes").ClientStack.ZENON,conferenceName:(e=i.name)!=null?e:"",conferenceType:I((e=i.name)!=null?e:""),messageTags:new Set(g==null?void 0:g.map(function(a){return d("ZenonMWThriftMessageTagUtils").toThriftMessageTag(a)})),retryCount:a.retryCount,sequenceNumber:(i=a.sequenceNumber)==null?void 0:i.toString(),transactionId:f,type:b};(k.multiwayCoreTier!==""||k.multiwayWwwTier!=="")&&(e.extensions=k);j!=null&&(e.clientSessionId=j);h!=null&&(e.serverInfoData=h);a.actorID!=null&&(e.sender={id:a.actorID});return e}function B(a){switch(a){case d("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return d("MultiwayCommonTypes").HangupReason.IGNORE_CALL;case d("ZenonDismissReason").ZenonDismissReason.HangupCall:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL;case d("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return d("MultiwayCommonTypes").HangupReason.NO_ANSWER_TIMEOUT;case d("ZenonDismissReason").ZenonDismissReason.ClientError:return d("MultiwayCommonTypes").HangupReason.CLIENT_ERROR;case d("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return d("MultiwayCommonTypes").HangupReason.IN_ANOTHER_CALL;case d("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return d("MultiwayCommonTypes").HangupReason.CLIENT_INTERRUPTED;case d("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return d("MultiwayCommonTypes").HangupReason.SESSION_MIGRATED;default:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL}}function C(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return d("RequestStreamBodyUtils").uint8ArrayToString(c.data);else if(b)return JSON.stringify(b);else if(a)return JSON.stringify(a);return null}function D(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return c.topic;else if(b)return k;else if(a)return l;return null}function E(a){if(a==null)return null;if(a===1)return d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE;else return d("MultiwaySharedTypes").EndpointServiceType.UNKNOWN}function F(a){a=G(a);return(a=a)!=null?a:d("ZenonDismissReason").ZenonDismissReason.CallEnded}function G(a){if(a==null)return null;switch(a){case d("MultiwayCommonTypes").DismissReason.CALL_ENDED:return d("ZenonDismissReason").ZenonDismissReason.CallEnded;case d("MultiwayCommonTypes").DismissReason.ANSWERED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.AnsweredOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.ANSWERED_BY_OTHER_USER:return d("ZenonDismissReason").ZenonDismissReason.AnsweredByOtherUser;case d("MultiwayCommonTypes").DismissReason.IN_ANOTHER_CALL:return d("ZenonDismissReason").ZenonDismissReason.InAnotherCall;case d("MultiwayCommonTypes").DismissReason.CONNECTION_DROPPED:return d("ZenonDismissReason").ZenonDismissReason.ConnectionDropped;case d("MultiwayCommonTypes").DismissReason.PRIMARY_ENDPOINT_HANGUP:return d("ZenonDismissReason").ZenonDismissReason.HangupCall;case d("MultiwayCommonTypes").DismissReason.REJECTED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.RejectedOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.REMOVED_BY_PARTICIPANT:return d("ZenonDismissReason").ZenonDismissReason.RemovedByParticipant;case d("MultiwayCommonTypes").DismissReason.REJECTED_BY_CALLEE:return d("ZenonDismissReason").ZenonDismissReason.RejectedByCallee;case d("MultiwayCommonTypes").DismissReason.INTERNAL_ERROR:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").DismissReason.CALL_ENDED_BY_PRODUCT:return d("ZenonDismissReason").ZenonDismissReason.CallEndedByProduct;case d("MultiwayCommonTypes").DismissReason.TX_ACK_TIMEDOUT:return d("ZenonDismissReason").ZenonDismissReason.TxAckTimeout;default:return null}}function H(a,b,c,e){a=A(a,b);a.responseStatusCode=(b=c)!=null?b:d("MultiwayCommonTypes").RtcResponseStatusCode.OK;a.responseSubCode=e;return a}function I(a){var b=a.indexOf(":");if(b===-1)return null;a=a.slice(0,b);return(b=n.get(a))!=null?b:null}function J(a){var b={},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.NONE,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.NONE,enabled:a.enabled},f=c?P(a.type):null;f!=null&&(e.label=f);b[a.trackID]=e});return{tracks:b}}function K(a){a=x[a];return(a=a)!=null?a:d("MultiwayCommonTypes").DeviceStatus.OK}function L(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b}function M(a){return R[a]}function N(a){return a==null?null:S[a]}function O(a){var b={};a.forEach(function(a,c){b[c]={data:a.data,version:a.version}});return b}function P(a){switch(a){case"audio":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO;case"video":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO;case"screen":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO;case"screen_audio":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO;default:return null}}function Q(a){if(a===d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE)return 1;else return 0}var R=Object.freeze((h={},h[(j=d("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=i.RtcResponseStatusCode.OK,h[j.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=i.RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,h[j.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=i.RtcResponseStatusCode.METHOD_NOT_ALLOWED,h)),S=Object.freeze((h={},h[j.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=i.RtcResponseSubCode.CLIENT_TERMINATED,h));g.addThriftStateStoreSignalingEvents=a;g.fetchE2eeServerState=b;g.fromThriftMediaPath=e;g.fromThriftParticipantState=f;g.getCollisionContextFromThriftAppMessages=o;g.getRoomMetadataFromThriftAppMessages=p;g.mwThriftAppMessagesToSignalingAppMessages=q;g.toThriftMediaPath=r;g.toZenonMediaStatesFromThrift=s;g.toMWClientTrackContentTypeFromThrift=t;g.maybeAddOverlayConfigServerUpdateRequestFromThrift=u;g.createMWThriftRequest=v;g.createMWThriftResponse=w;g.signalingMessageAppMessagesToThriftMWAppMessages=y;g.mwThriftMessageHeaderToSignalingMessageHeader=z;g.toMWThriftHangupReason=B;g.getGenericMWThriftDataMessageData=C;g.getGenericMWThriftDataMessageTopic=D;g.toThriftServiceRecipient=E;g.fromMWThriftDismissReason=F;g.getConferenceTypeFromName=I;g.toThriftMWMediaStatusEx=J;g.toMWThriftDeviceStatus=K;g.toMWThriftMediaStatus=L;g.toMWThriftResponseStatusCode=M;g.toMWThriftResponseStatusSubCode=N;g.toThriftMWSyncStateStore=O;g.toMWThriftTrackLabel=P;g.toServiceRecipientType=Q}),98);
__d("ZenonMWThriftMessageDebugLogger",["Log","LogHistory","MultiwayCommonTypes","ODS","RequestStreamBodyUtils","RpWebStateMachineLoggingBlocklist","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWThriftMessageMap","ZenonMWThriftTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){this.$1=d("LogHistory").getInstance("webrtc"),this.$2=new Set(c("RpWebStateMachineLoggingBlocklist").MESSAGE_TYPES)}var b=a.prototype;b.$3=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:d})};b.$4=function(a){a=a.messageHeader.responseStatusCode;return a!=null};b.logMWThriftMessage=function(a,b,e){this.$5(a,b,e);if(!c("isEmployeeTestUserZenonLogging")())return;var f=e.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type),h=this.$4(e)?"RESPONSE":"REQUEST";e=this.$6(e);a="[ms] "+a+" ["+b+"] "+g+" "+h+" [retryCount: "+f.retryCount+(e!=null?" details: "+e:"")+"]";this.$2.has(g)||this.$3(a,!0,f.transactionId)};b.$5=function(a,b,c){a=this.$7(a,b,c);a!==null&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_signaling",a)};b.$7=function(a,b,c){var e=c.messageBody,f=c.messageHeader,g="";if(f.type!=null)switch(f.type){case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:if(e.dataMessageRequest){g=(e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(e.dataMessageRequest))!=null?e:"undefined"}break;default:break}e=this.$4(c)?"RESPONSE":"REQUEST";c=d("ZenonMWThriftMessageMap").messageTypeToString(f.type);if(g==="")return a+"-"+b+"-"+c+"-"+e;else return a+"-"+b+"-"+c+"-"+e+"-"+g};b.$6=function(a){var b=a.messageHeader;if(d("MultiwayCommonTypes").MessageType==null||b.type==null)return null;switch(b.type){case d("MultiwayCommonTypes").MessageType.JOIN:return this.$8(a);case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return this.$9(a);case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return this.$10(a);case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return this.$11(a);case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return this.$12(a);default:return null}};b.$8=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({hasAnswer:((a=b.joinResponse)==null?void 0:a.answer)!=null,hasRenegotiationOffer:((a=b.joinResponse)==null?void 0:a.renegotiationOffer)!=null,isPendingApproval:(a=b.joinResponse)==null?void 0:a.isPendingApproval,multipleVideoStreamsAllowed:(a=b.joinResponse)==null?void 0:a.multipleVideoStreamsAllowed,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({deviceCapabilities:(a=b.joinRequest)==null?void 0:a.deviceCapabilities,sdpType:((c=b.joinRequest)==null?void 0:c.offer)!=null?"offer":((a=b.joinRequest)==null?void 0:a.answer)!=null?"answer":"null",userCapabilities:((c=b.joinRequest)==null?void 0:c.userCapabilities)?d("RequestStreamBodyUtils").uint8ArrayToString(b.joinRequest.userCapabilities):""})};b.$9=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=b.serverMediaUpdateResponse)==null?void 0:a.currentVersion,hasAnswer:((a=b.serverMediaUpdateResponse)==null?void 0:a.answer)!=null,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(a=b.serverMediaUpdateRequest)==null?void 0:a.fromVersion,messageTags:c.messageTags,renegotiationRequested:(c=(a=b.serverMediaUpdateRequest)==null?void 0:a.renegotiationRequested)!=null?c:!1,sdpType:((a=b.serverMediaUpdateRequest)==null?void 0:a.offer)?"offer":((c=b.serverMediaUpdateRequest)==null?void 0:c.answer)?"answer":((a=b.serverMediaUpdateRequest)==null?void 0:a.update)?"delta":"empty",toVersion:(a=(c=b.serverMediaUpdateRequest)==null?void 0:c.toVersion)!=null?a:""})};b.$10=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=(a=b.clientMediaUpdateResponse)==null?void 0:a.currentVersion)!=null?a:"",statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.fromVersion)!=null?c:"",toVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.toVersion)!=null?c:""})};b.$11=function(a){var b=a.messageBody;return this.$4(a)?null:JSON.stringify({subscriptions:(b=(a=b.subscriptionRequest)==null?void 0:a.subscriptions)!=null?b:""})};b.$12=function(a){var b=a.messageBody;if(this.$4(a))return null;b=(a=b.iceCandidateRequest)==null?void 0:a.iceCandidateSdps.map(function(a){a=a.candidateSdpString;if(a!=null)return d("ZenonIceStatsParser").extractIceInfo(a)});return JSON.stringify({iceCandidates:b})};b.logSendMultiwayThriftMessageFailure=function(a,b,e){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure");h.flush();e=e?"Stack Trace: "+e.stack+".":"Error msg: "+a;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW Thrift message of type "+b+". "+e})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonMWMessageReliabilityLogTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RECEIVED_REQUEST","RECEIVED_RESPONSE","PROCESSING_REQUEST","START_PROCESSING_RESPONSE","PROCESSING_RESPONSE","PROCESSED_REQUEST","PROCESSED_RESPONSE","SENDING_REQUEST","SENDING_RESPONSE","SENT_REQUEST","SENT_REQUEST_FROM_HANDLER","SENT_RESPONSE","SEND_REQUEST_FAILED","SEND_REQUEST_FAILED_FROM_HANDLER","SEND_RESPONSE_FAILED","SENT_SM_EVENT","PROCESSED_SM_EVENT","REQUEST_AFTER_NULL_CHECK","REQUEST_AFTER_TRANSLATION"]);f.ZenonMWMessageReliabilityEvent=a}),66);
__d("ZenonMWThriftResponseStatusCodeUtils",["MultiwayCommonTypes","ZenonMWMessageTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK;case d("MultiwayCommonTypes").RtcResponseStatusCode.BAD_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.BAD_REQUEST;case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED;case d("MultiwayCommonTypes").RtcResponseStatusCode.NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONFLICT:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONFLICT;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVER_INTERNAL_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVER_INTERNAL_ERROR;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE}}function b(a){switch(a){case d("MultiwayCommonTypes").RtcResponseSubCode.UNKNOWN:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN;case d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEMBERSHIP_CHECK_FAIL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEMBERSHIP_CHECK_FAIL;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_REQUEST_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_REQUEST_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.RING_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RING_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_NAME:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_NAME;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_VERSION_RANGE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_VERSION_RANGE;case d("MultiwayCommonTypes").RtcResponseSubCode.SENDER_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SENDER_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.RECIPIENT_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RECIPIENT_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.FIELD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FIELD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseSubCode.USERS_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USERS_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CALL_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CALL_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SERVER_INFO_DATA:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SERVER_INFO_DATA;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.MISMATCHED_STATE_FOR_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISMATCHED_STATE_FOR_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.NO_RESOLVER_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NO_RESOLVER_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_APPROVERLIST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_APPROVERLIST;case d("MultiwayCommonTypes").RtcResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_BROADCAST_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_BROADCAST_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_ENDPOINT_CONFIG:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_ENDPOINT_CONFIG;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_E2EE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_E2EE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.SFU_MODE_PREVENTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SFU_MODE_PREVENTED;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.JOIN_REQUEST_DENIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_REQUEST_DENIED;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ENDPOINT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ENDPOINT;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HEADER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HEADER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_BODY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_BODY;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_JOIN_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_JOIN_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HANGUP_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HANGUP_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_APPROVAL_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_APPROVAL_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_TRANSFER_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_TRANSFER_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_GENERIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_GENERIC;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.NOT_BROADCAST_OWNER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NOT_BROADCAST_OWNER;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_NOT_INVITED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_NOT_INVITED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_DISCONNECTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_DISCONNECTED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_INVITATION_EXPIRED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_INVITATION_EXPIRED;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_MULTIWAY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_MULTIWAY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ALREADY_STOPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ALREADY_STOPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_SESSION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_SESSION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.LOCAL_DESCRIPTION_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOCAL_DESCRIPTION_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_PROTOCOL_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_PROTOCOL_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLVE_STATE_API_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLVE_STATE_API_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.EXTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.INTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLUTION_DISABLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLUTION_DISABLED;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ID_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ID_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_OFFER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_OFFER;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS;case d("MultiwayCommonTypes").RtcResponseSubCode.OTHER_USER_ANSWERED_THE_CALL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OTHER_USER_ANSWERED_THE_CALL;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATING;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION;case d("MultiwayCommonTypes").RtcResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL;case d("MultiwayCommonTypes").RtcResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_CAPABILITIES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_CAPABILITIES;case d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON;case d("MultiwayCommonTypes").RtcResponseSubCode.WWW_KILLSWITCHED_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.WWW_KILLSWITCHED_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_PATH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_STATUS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_USER_IDS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_USER_IDS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_SDP_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_SDP_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_TIMEOUT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_TIMEOUT;case d("MultiwayCommonTypes").RtcResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.TOO_MANY_MEDIA_TRACKS_IN_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OK}}g.getResponseStatusCodeFromThrift=a;g.getResponseSubCodeFromThrift=b}),98);
__d("ZenonMqttChannel",["CurrentUser","FBLogger","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=-1;try{c("MqttEnvInitializer").initialize();d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);if(c("gkx")("11152")&&c("CurrentUser").getAppID()===String(1358015658191005))a=949958857019662;else{var b;a=Number((b=c("CurrentUser").getAppID())!=null?b:c("MqttWebConfig").appID)}return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!1,clientCapabilities:c("MqttWebConfig").clientCapabilities,endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid})}catch(b){c("FBLogger")("rtc_www").catching(b).warn("[ZenonMqttChannel][%d] failed to create MqttChannel",a);throw b}}b=a();e=b;g["default"]=e}),98);
__d("getZenonMqttChannel",["CurrentUser","FBMqttChannel","HorizonWebMqttChannel","IGDOverLSMqttChannel","MDCMqttChannel","OculusMqttChannel","RpWebMqttEnabledAppIds","ZenonAppProvider","ZenonMqttChannel"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(c("RpWebMqttEnabledAppIds").APP_IDS);function a(){if(d("ZenonAppProvider").isInstagramApp())return d("IGDOverLSMqttChannel").getInstance();else if(d("ZenonAppProvider").isOculusCastingSite())return d("OculusMqttChannel").getOculusMqttChannelInstance();else if(d("ZenonAppProvider").isHorizonApp())return d("HorizonWebMqttChannel").getHorizonWebMqttChannelInstance();else if(d("ZenonAppProvider").isMDCApp())return d("MDCMqttChannel").getMDCMqttChannelInstance();else return h.has(Number(c("CurrentUser").getAppID()))?c("ZenonMqttChannel"):c("FBMqttChannel")}g["default"]=a}),98);
__d("ZenonMWThriftMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageTagUtils","ZenonMWThriftResponseStatusCodeUtils","getZenonMqttChannel","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC,i=c("getZenonMqttChannel")(),j=new Map();function a(a,b,e){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;var f=a.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();if(!c("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(g))return;f=k(f.transactionId);switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:l(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(b=e==null?void 0:e.peerConnectionState)!=null?b:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:m(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:n(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:o(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:p(f,a,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:q(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(g=e==null?void 0:e.peerConnectionState)!=null?g:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:r(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:s(f,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:t(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:u(f,e==null?void 0:e.smEvent);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:v(f,e==null?void 0:e.smEvent);return;default:return}}function b(a,b){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:babelHelpers["extends"]({},b)},{instanceKey:+a})}function k(a){a=isNaN(+a)?0:+a;var b=9223372036854776e3;return Math.round(a%b)}function l(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h});if(f.messageBody.serverMediaUpdateRequest){e=f.messageBody.serverMediaUpdateRequest;b=e.answer;f=e.offer;e=e.update;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:{sdpType:f?"offer":b?"answer":e?"delta":"empty"}},{instanceKey:a})}f={onMQTTStateChanged:function(b){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"mqtt_"+b,{instanceKey:a})}};i.subscribeChannelEvents(f);j.set(a,f)}function m(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_request",{instanceKey:a})}function n(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_response",{instanceKey:a});c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},{instanceKey:a})}function o(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a});e=j.get(a);e&&(i.unsubscribeChannelEvents(e),j["delete"](a))}function p(a,b,e){b=b.messageHeader;var f=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_response_failed",{annotations:{"int":{responseStatusCode:f?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(f):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3},string:{errorMessage:e}},instanceKey:a});f=j.get(a);f&&(i.unsubscribeChannelEvents(f),j["delete"](a))}function q(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h})}function r(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_request",{instanceKey:a})}function s(a,b){c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:b}},instanceKey:a})}function t(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a})}function u(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sent_sm_event:"+b,{instanceKey:a})}function v(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_sm_event:"+b,{instanceKey:a})}g.log=a;g.updateState=b}),98);
__d("ZenonMWThriftMessageReliabilityLogger",["ODS","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map(),k=new Map();function a(a){k.set(a,!0)}function b(a,b,c){a=j.get(a);if(!a)return;u(a,b,c)}function c(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function e(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function f(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function l(a){q(a)||u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function m(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function n(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function o(a){q(a)?u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):u(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function p(a,b){var c=q(a)?d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;u(a,c,{errorMessage:b})}function q(a){a=a.messageHeader.responseStatusCode;return a!=null}function r(a,b){var c=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();a=q(a)?"response":"request";switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;default:return}}var s={connectionState:"",peerConnectionState:"",signalingState:""};function t(a){var b=babelHelpers["extends"]({},s,a);if(s.connectionState!==b.connectionState||s.peerConnectionState!==b.peerConnectionState||s.signalingState!==b.signalingState){s=b;for(b of i.keys())d("ZenonMWThriftMessageQPLLogger").updateState(b,a)}}function u(a,b,c){var e,f=a.messageHeader;e=(e=i.get(f.transactionId))!=null?e:new Set();i.set(f.transactionId,e);if(b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&e.has(b))return;e.add(b);j.set(f.transactionId,a);r(a,b);d("ZenonMWThriftMessageQPLLogger").log(a,b,babelHelpers["extends"]({},c,s))}g.setE2eeIsMandatedForCall=a;g.logEventForTxid=b;g.logReceivedMessage=c;g.logProcessingMessage=e;g.logMessageAfterNullCheck=f;g.logMessageAfterTranslation=l;g.logProcessedMessage=m;g.logSendingMessage=n;g.logSentMessage=o;g.logSendMessageFailed=p;g.updateState=t}),98);
__d("ZenonMWThriftMessageSerializer",["CompactSerializer","MqttThriftHeaderSerializers","MultiwayCommonSerializers","TCompactProtocol","TReadBuffer"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);var c=d("CompactSerializer").serialize(a.messageHeader,d("MultiwayCommonSerializers").serializeRtcMessageHeader);a=d("CompactSerializer").serialize(a.messageBody,d("MultiwayCommonSerializers").serializeRtcMessageBody);if(b){b=new Uint8Array(c.length+a.length);b.set(c);b.set(a,c.length);return b}b={};b=d("CompactSerializer").serialize(b,d("MqttThriftHeaderSerializers").serializeMqttThriftHeader);var e=new Uint8Array(b.length+c.length+a.length);e.set(b);e.set(c,b.length);e.set(a,b.length+c.length);return e}function b(a,b){b===void 0&&(b=!1);a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);b||d("MqttThriftHeaderSerializers").deserializeMqttThriftHeader(a);b=d("MultiwayCommonSerializers").deserializeRtcMessageHeader(a);a=d("MultiwayCommonSerializers").deserializeRtcMessageBody(a);return{messageBody:a,messageHeader:b}}g.serializeMWThriftMessage=a;g.deserializeMWThriftMessage=b}),98);
__d("ZenonMWThriftAddParticipantsTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="new_room_context";function a(a,b){var c={usersToInvite:new Set(b.participants)};if(b.groupThreadId!=null){b={calling_tags:2,group_thread_id:b.groupThreadId};if(b){b=[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(b)),topic:h}},header:{topic_DEPRECATED:h}}];c.appMessages=b}}return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{addParticipantsRequest:c},type:d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS})}g.NEW_ROOM_CONTEXT=h;g.toThriftAddParticipantsRequest=a}),98);
__d("ZenonMWThriftApprovalTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=b.approvalStatus;b=b.targetUsers;c={approvalStatus:c===0?d("MultiwayCommonTypes").ApprovalStatus.DENIED:d("MultiwayCommonTypes").ApprovalStatus.APPROVED,targetUsers:new Set(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{approvalRequest:c},type:d("MultiwayCommonTypes").MessageType.APPROVAL})}g.toThriftApprovalRequest=a}),98);
__d("ZenonMWThriftClientEventTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={clientEvents:[{type:b.clientEventType===0?d("MultiwayCommonTypes").ClientEventType.UNKNOWN:d("MultiwayCommonTypes").ClientEventType.MEDIA_CONNECTED}]};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientEventRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_EVENT})}g.toThriftClientEventRequest=a}),98);
__d("ZenonMWCommonUtils",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.split("\n");if(a.length<2)throw c("unrecoverableViolation")("Expected SDP string with two or more lines, but got "+a.length,"rtc_www");a=a[1].trim();a=a.split(" ");if(a.length<3)throw c("unrecoverableViolation")("Session line should have at least 3 tokens, but got "+a.length,"rtc_www");a=parseInt(a[2],10);if(isNaN(a))throw c("unrecoverableViolation")("SDP version could not be parsed as number.","rtc_www");return a}function b(a){return a.includes("BUNDLE 0")}g.getSdpVersion=a;g.isUnifiedPlan=b}),98);
__d("ZenonMWThriftClientMediaUpdateTranslator",["MultiwayCommonTypes","ZenonMWCommonUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody;a=a.messageHeader;c=c.clientMediaUpdateResponse;var e=a.responseStatusCode,f=a.responseSubCode,g=a.retryAfterMsec;if(c){var h=c.answer,i=c.mediaStatus,j=h!=null&&i!=null;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(c.stateStore,b,!1,j);var k=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(c.stateStore);if(j){h=(j=h==null?void 0:h.sdpString)!=null?j:"";j=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(i);i={ackMessageId:a.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:!1,source:"clientMediaUpdate"};var l=c.renegotiationOffer,m=null;l!=null&&l.sdpString!=null&&(m={sdp:l.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(l.sdpString)});l={e2eeServerState:k,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(c.mediaPath),mediaStates:j,negotiateType:!1,renegotiationOffer:m,sdp:{sdp:h,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(h)},sdpOriginLocalId:c.sdpOriginLocalId,source:"clientMediaUpdateResponse"};b.push(i);b.push(l)}j={ackMessageId:a.transactionId,acknowledgedVersion:Number(c.currentVersion),eventName:"mediaUpdateResponse",retryAfter:(k=g)!=null?k:0};e!=null&&(j.responseStatusCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e));f!=null&&(j.responseSubCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(f));b.push(j)}return b}function b(a,b,c){b={fromVersion:String(b.version),mediaUpdates:[{mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(b),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(b)}],toVersion:String(b.version)};c!==void 0&&(b.offer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientMediaUpdateRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE})}g.fromThriftClientMediaUpdateResponse=a;g.toThriftClientMediaUpdateRequest=b}),98);
__d("ZenonMWThriftConferenceStateTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWMessageTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody.conferenceStateRequest;if(c){var e=c.appMessages,f=c.participantStates,g={eventName:"participantUpdateRequest",participantStates:new Map(),sctpUserIdNodeIdMap:new Map(),versionId:+c.version},h={actorRepresentatives:new Map(),eventName:"clientInfoRequest",mediaPath:d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN,userCapabilities:new Map()};Object.keys(f).forEach(function(a){var b=f[a],c=b.sctpNodeId,e=b.state;b=b.userCapabilities;g.participantStates.set(a,d("ZenonMWThriftTranslatorUtils").fromThriftParticipantState(e));c!=null&&g.sctpUserIdNodeIdMap.set(a,+c);h.userCapabilities.set(a,b?d("RequestStreamBodyUtils").uint8ArrayToString(b):"")});b.push(g);b.push(h);c=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(e);if(c){c.serverInfoData=a.messageHeader.serverInfoData;e={context:c,eventName:"roomContextUpdateRequest"};b.push(e)}}return b}function b(a,b){b={currentVersion:String(b.requestVersionId)};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{conferenceStateResponse:b},type:d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE})}g.fromThriftConferenceStateRequest=a;g.toThriftConferenceStateResponse=b}),98);
__d("ZenonMWThriftDataMessageTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonActorHooks","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dataMessageRequest;if(a){var c=a.message.header,e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageData(a);a=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(a);var f=h(c.serviceRecipients);if(e!=null&&a!=null){c={data:e,eventName:"genericDataMessageRequest",recipientIDs:Array.from((e=c.recipients)!=null?e:[]),serviceRecipients:f,topic:a};b.push(c)}}return b}function b(a,b){var c={data:d("RequestStreamBodyUtils").stringToUint8Array(b.data),topic:b.topic},e=new Set(b.serviceRecipients.map(d("ZenonMWThriftTranslatorUtils").toThriftServiceRecipient));return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{dataMessageRequest:{message:{body:{genericMessage:c},header:{recipients:new Set(b.recipientIDs),sender:d("ZenonActorHooks").ZenonActor.getID(),serviceRecipients:e,topic_DEPRECATED:""}}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{dataMessageResponse:{deliveryResult:{}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function h(a){var b=[];a==null?void 0:a.forEach(function(a){return b.push(d("ZenonMWThriftTranslatorUtils").toServiceRecipientType(a))});return b}g.fromThriftDataMessageRequest=a;g.toThriftDataMessageRequest=b;g.toThriftDataMessageResponse=c}),98);
__d("ZenonMWThriftDismissTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dismissRequest;if(a){var c=a.detailedReasonString;a=a.reason;a={eventName:"terminateRequest",fromJoinResponse:!1,reason:d("ZenonMWThriftTranslatorUtils").fromMWThriftDismissReason(a),shouldInformPeer:!0,subreason:c};b.push(a)}return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.DISMISS})}g.fromThriftDismissRequest=a;g.toThriftDismissResponse=b}),98);
__d("ZenonMWThriftHangupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"hangupResponse"};b.push(a);return b}function b(a,b){b=b.reason;b={detailedReasonString:"",reason:d("ZenonMWThriftTranslatorUtils").toMWThriftHangupReason(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{hangupRequest:b},type:d("MultiwayCommonTypes").MessageType.HANGUP})}g.fromThriftHangupResponse=a;g.toThriftHangupRequest=b}),98);
__d("ZenonMWThriftIceCandidateTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){var b;return{candidateSdpString:(b=a.candidateSdpString)!=null?b:"",sdpMid:a.sdpMid,sdpMLineIndex:parseInt(a.sdpMLineIndex,10)}})};b.push(a)}return b}function b(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"iceCandidateResponse"};b.push(a);return b}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}function e(a,b){b=b.iceCandidates;b=b.map(function(a){return{candidateSdpString:a.candidateSdpString,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex.toString()}});b={iceCandidateSdps:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{iceCandidateRequest:b},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}g.fromThriftIceCandidateRequest=a;g.fromThriftIceCandidateResponse=b;g.toThriftIceCandidateResponse=c;g.toThriftIceCandidateRequest=e}),98);
__d("ZenonBrowsers",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("UserAgent").isBrowser("Chrome")}function i(){return!!navigator.webkitGetUserMedia}function a(){return c("UserAgent").isBrowser("Edge (Chromium Based)")||c("UserAgent").isBrowser("Edge PWA (Chromium Based)")}function j(){return c("UserAgent").isBrowser("Safari")}function k(){return c("UserAgent").isBrowser("Firefox")}function b(){return c("UserAgent").isBrowser("Opera")}function l(){return c("UserAgent").isBrowser("Mobile Safari")}function m(){return c("UserAgent").isBrowser("Oculus Browser")}function n(){return c("UserAgent").isBrowser("Samsung Browser")}function d(){return l()||c("UserAgent").isPlatform("Android")||n()}function o(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function p(){if(k()){var a;return(a=c("UserAgentData").browserVersion)!=null?a:0}if(i()){a=navigator.userAgent.match(/Chrom(e|ium)\/(\d+)\./);return a!=null?parseInt(a[2],10):999}return 0}function q(){return c("UserAgent").isBrowser("FBLite")||c("UserAgent").isBrowser("Facebook for Android")}function e(a){if(!q())return!1;var b=p();return b>=a}function f(){return k()}function r(){return k()||j()||c("UserAgent").isBrowser("Chrome >= 97")}function s(){return!o()&&(c("UserAgent").isBrowser("Chrome >= 51")||c("UserAgent").isBrowser("Opera >= 36"))}function t(){return c("UserAgent").isBrowser("Firefox < 60")||c("UserAgent").isBrowser("Edge")}function u(){return!m()}function v(){return!m()}function w(){return!l()&&!j()&&!((i()||h())&&p()<80)&&!(k()&&p()<70)}function x(){return(i()||h())&&p()>=77||c("UserAgent").isBrowser("Firefox >= 70")||c("UserAgent").isBrowser("Safari >= 14.1")}function y(){return!(c("UserAgent").isBrowser("Chrome > 105")&&c("UserAgent").isBrowser("Chrome < 115"))}function z(){return c("UserAgent").isBrowser("Chrome >= 89")||c("UserAgent").isBrowser("Opera >= 75")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 89")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) >= 89")}g.isChrome=h;g.isChromium=i;g.isChromiumBasedEdge=a;g.isDesktopSafari=j;g.isFirefox=k;g.isOpera=b;g.isMobileSafari=l;g.isOculusBrowser=m;g.isSamsung=n;g.isSupportedMobileBrowser=d;g.isMobileDevice=o;g.webrtcVersion=p;g.isFBWebview=q;g.isFBWebviewWithChromeMinVersion=e;g.noTransceiverForNegotiations=f;g.onlySupportsUnifiedPlan=r;g.isVideoFilterEffectSupported=s;g.videoEscalationByUnmuteWorkaround=t;g.supportsMWAVEscalation=u;g.supportsVideoCalls=v;g.supportsRollback=w;g.supportsIceRestart=x;g.supportsPranswer=y;g.isVideoLayersAllocationSupported=z}),98);
__d("ZenonJoiningContext",[],(function(a,b,c,d,e,f){"use strict";b="joining_context";function a(a){var b=a.callablePostID,c=a.callingTags,d=a.callTrigger,e=a.conferenceName,f=a.groupThreadID,g=a.igThreadID,h=a.immersiveModeDoorID,i=a.isMetaAiCall,j=a.linkUrl,k=a.liveBroadcastID,l=a.meetingID,m=a.peerID,n=a.rtcDoorID;a=a.serverInfoData;return{call_trigger:d,callable_post_id:b,calling_tags:c,conference_name:e,group_thread_id:f,ig_thread_id:g,immersive_mode_door_id:h,is_meta_ai_call:i,link_url:j,live_broadcast_id:k,meeting_id:l,peer_id:m,rtc_door_id:n,server_info_data:a}}f.JOINING_CONTEXT_TOPIC=b;f.convertCollisionToJoiningContext=a}),66);
__d("ZenonMWJoinUtils",["ZenonBrowsers","ZenonIGMediaUtil","gkx","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ZenonBrowsers").isFirefox()&&a!=="answer"?!1:!c("ZenonIGMediaUtil").shouldUseSFUOnly()}function b(){return c("shouldUseSFUMediaPath")(!1)?!1:c("gkx")("25223")}g.canUseMwpp=a;g.canDeescalate=b}),98);
__d("ZenonMWThriftJoinTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","RequestStreamBodyUtils","RoboticsPermission","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonDismissReason","ZenonInfraActionsLogger","ZenonJoiningContext","ZenonMWCommonUtils","ZenonMWJoinUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare","justknobx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageHeader,f=e.responseStatusCode,g=e.responseSubCode;if(f&&f!==d("MultiwayCommonTypes").RtcResponseStatusCode.OK){var i;g="JOIN response status code: "+String(f)+" subcode "+String((g=g)!=null?g:"[undefined]");c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Got non-OK "+g,errorDomain:"ZenonMWThriftMessageTranslator.fromThriftJoinResponse"});i={detailedReasonFromMW:(i=e.responseStatusMessage)!=null?i:"",eventName:"terminateRequest",fromJoinResponse:!0,reason:h(f,e.responseSubCode),shouldInformPeer:!1,subreason:g};b.push(i);return b}f=a.messageBody.joinResponse;if(!f)return b;a=(i=(g=f.answer)==null?void 0:g.sdpString)!=null?i:"";g=a!=="";d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(f.stateStore,b,!1,g);d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,e);i=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(f.stateStore);e={ackMessageId:e.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:g,source:"joinResponse"};b.push(e);if(g){e={sdp:a,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(a)};g=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(f.mediaStatusEx);a=f.renegotiationOffer;var j=null;a!=null&&a.sdpString!=null&&(j={sdp:a.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(a.sdpString)});a={e2eeServerState:i,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),mediaStates:g,negotiateType:!1,renegotiationOffer:j,sdp:e,sdpOriginLocalId:f.sdpOriginLocalId,source:"joinResponse"};b.push(a)}i={capabilities:{addParticipantEnabled:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multipleVideoStreamsAllowed:f.multipleVideoStreamsAllowed},eventName:"capabilitiesRequest"};b.push(i);if(f.isPendingApproval){g={eventName:"pendingApprovalRequest"};b.push(g)}j=f.groupsOfUsers;var k=new Map();j.forEach(function(a){var b=a.aliasId;a=a.users;b!=null&&a.forEach(function(a){k.set(a,b)})});e={actorRepresentatives:k,eventName:"clientInfoRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),userCapabilities:new Map()};b.push(e);return b}function b(a,b,e,f){var g=b.initialSyncStates,h=b.isSecondaryJoinRole,j=b.userCapabilities;j={clientMediaMode:e.mediaMode==="p2p"?d("MultiwaySharedTypes").MediaPath.P2P:d("MultiwaySharedTypes").MediaPath.SFU,deviceCapabilities:new Set([d("MultiwayCommonTypes").Capability.SUPPORT_NEW_PARTICIPANT_STATES,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU,d("MultiwayCommonTypes").Capability.SUPPORT_SDP_RENEGOTIATION,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED].concat(d("ZenonBrowsers").supportsPranswer()?[d("MultiwayCommonTypes").Capability.SUPPORT_PRECONNECT]:[])),mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(e.mediaStates),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(e.mediaStates),offer:{},syncPayload:g?{stateStore:d("ZenonMWThriftTranslatorUtils").toThriftMWSyncStateStore(g),stateStoreV2:{}}:void 0,userCapabilities:d("RequestStreamBodyUtils").stringToUint8Array((g=j.get(a.userInfo.userID))!=null?g:"")};h!=null&&(j.endpointSettings={joinMode:h?d("MultiwayCommonTypes").JoinMode.SECONDARY:d("MultiwayCommonTypes").JoinMode.PRIMARY});g=b.isE2eeMandated===!0;j.e2eeEnforcement={infraMandatedExpStatus:b.e2eeInfraMandatedExpStatus,mode:g?d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED:d("MultiwaySharedTypes").E2eeMode.E2EE_NOT_MANDATED,p2pSFrameExpStatus:d("MultiwaySharedTypes").P2PSFrameExpStatus.NOT_SET,preventSfuMode:!1};e.sdp.type==="offer"&&(j.offer={sdpString:e.sdp.sdp});d("ZenonMWJoinUtils").canUseMwpp(e.sdp.type)&&(j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP),e.sdp.type==="answer"&&(j.answer={sdpString:e.sdp.sdp}),d("ZenonMWJoinUtils").canDeescalate()&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP_DEESCALATION));(!d("ZenonScreenShare").screenShareWithReplaceTrack()||c("RoboticsPermission").is_authorized_robot)&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MULTIPLE_VIDEO_STREAMS);h=f==null?void 0:f.otherParticipants;h&&(j.usersToCall=new Set(h));b=[];e=(e=f==null?void 0:f.roomInfo.context)!=null?e:a.roomInfo.context;if(e!=null){var k=d("ZenonJoiningContext").convertCollisionToJoiningContext(e);g&&(k.calling_tags=2);b=[].concat(b,[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(k)),topic:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}},header:{topic_DEPRECATED:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}}])}(f==null?void 0:f.appMessages)!=null&&(b=[].concat(b,d("ZenonMWThriftTranslatorUtils").signalingMessageAppMessagesToThriftMWAppMessages(f.appMessages,h)));j.appMessages=b;g=d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{joinRequest:j},type:d("MultiwayCommonTypes").MessageType.JOIN});e&&e.serverInfoData!=null&&(g.messageHeader.serverInfoData=e.serverInfoData);i(e,g.messageHeader)&&(g.messageHeader.conferenceType=d("MultiwaySharedTypes").ConferenceType.ROOM);return g}function h(a,b){if(b===d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return d("ZenonDismissReason").ZenonDismissReason.MaxAllowedParticipantsReached;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON)return d("ZenonDismissReason").ZenonDismissReason.ProductServerDefinedEndReason;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION&&c("justknobx")._("4391"))return d("ZenonDismissReason").ZenonDismissReason.CallerHasAppealableCallingRestriction;switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonDismissReason").ZenonDismissReason.NoPermission;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:throw c("unrecoverableViolation")("Response status code is OK; should not return a dismiss reason","rtc_www");default:c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",error:"[ZP] Got unexpected JOIN response status: "+String(a)+" subcode "+String((a=b)!=null?a:"[undefined]"),errorDomain:"fromMWThriftJoinResponseStatusToDismissReason"});return d("ZenonDismissReason").ZenonDismissReason.UnexpectedEndOfCall}}function i(a,b){return((a==null?void 0:a.peerID)!=null||(a==null?void 0:a.groupThreadID)!=null)&&b.conferenceName===""}g.fromThriftJoinResponse=a;g.toThriftJoinRequest=b}),98);
__d("ZenonMWThriftPingTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"pingResponse"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.PING})}g.fromThriftPingResponse=a;g.toThriftPingRequest=b}),98);
__d("ZenonMWThriftRemoveParticipantsTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={usersToRemove:new Set(b.participants)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{removeParticipantsRequest:b},type:d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS})}g.toThriftRemoveParticipantsRequest=a}),98);
__d("ZenonMWThriftRingTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWCommonUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){if(b)return{groupThreadID:b.groupThreadId,peerID:b.peerId,serverInfoData:c};b=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(a);b&&(b.serverInfoData=c);return(a=b)!=null?a:{groupThreadID:null,peerID:null,serverInfoData:c}}function a(a,b){var c=[],e=a.messageBody;a=a.messageHeader;e=e.ringRequest;if(e){var f=e.appMessages,g=e.caller,i=e.e2eeEnforcement,j=e.otherParticipants,k=e.ringType,l=e.sdpOriginLocalId,m=e.threadIdInfo;g=g;k=k===d("MultiwayCommonTypes").RingType.PEER_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.GROUP_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.LIVE_STREAM||k===d("MultiwayCommonTypes").RingType.PEER_ESCALATED_AUDIO_CALL;var n=a.conferenceName;a=a.serverInfoData;m=h(f,m,a);var o=d("ZenonMWThriftTranslatorUtils").getRoomMetadataFromThriftAppMessages(f);g={actorID:b.actorID,e2eeInfraMandatedExpStatus:i==null?void 0:i.infraMandatedExpStatus,eventName:"inviteRequest",inviterID:g,isE2eeMandated:(i==null?void 0:i.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED,isRemoteOfferer:!1,otherParticipants:Array.from(j),requestingVideo:k,roomInfo:babelHelpers["extends"]({context:m,name:n},o==null?{}:{room:o,sender:o.sender}),userID:b.userInfo.userID};a!=null&&(g.serverInfoData=a);f!=null&&(g.appMessages=d("ZenonMWThriftTranslatorUtils").mwThriftAppMessagesToSignalingAppMessages(f));c.push(g);k=(j=(i=e.offer)==null?void 0:i.sdpString)!=null?j:"";n=(m=e.mediaStatusEx)!=null?m:null;if(k!==""&&n!=null){o={sdp:k,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(k)};b=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(n);a={eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(e.mediaPath),mediaStates:b,negotiateType:!1,sdp:o,sdpOriginLocalId:l,source:"ringRequest"};c.push(a)}}return c}function b(a,b){b=b.status;b==="IN_ANOTHER_CALL"&&(a.signalingID=null);b=d("ZenonMWThriftTranslatorUtils").toMWThriftDeviceStatus(b);b={deviceStatus:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{ringResponse:b},type:d("MultiwayCommonTypes").MessageType.RING})}g.fromThriftRingRequest=a;g.toThriftRingResponse=b}),98);
__d("ZenonMWThriftServerMediaUpdateTranslator",["FBLogger","MultiwayCommonTypes","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonInfraActionsLogger","ZenonMWCommonUtils","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageTagUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageBody.serverMediaUpdateRequest,f=a.messageHeader,g=f.messageTags,i=f.transactionId;if(!e)return b;var j=e.answer,k=e.fromVersion,l=e.mediaPath,m=e.mediaStatus,n=e.multipleVideoStreamsAllowed,o=e.offer,p=e.prAnswer,q=e.renegotiationRequested,r=e.sdpOriginLocalId,s=e.stateStore,t=e.toVersion;e=e.update;o=(o=o==null?void 0:o.sdpString)!=null?o:"";j=(j=j==null?void 0:j.sdpString)!=null?j:"";p=(p=p==null?void 0:p.sdpString)!=null?p:"";k=+k;t=+t;l=d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(l);g=d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(g);var u=function(){d("ZenonMWThriftMessageReliabilityLogger").logProcessedMessage(a)},v=o!=="",w=j!=="",x=d("ZenonBrowsers").supportsPranswer()&&p!=="",y=e!==null;y=v||w||x||y;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(s,b,!1,y);y=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(s);if(q){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 1: renegotationRequested"});q={ackMessageId:i,eventName:"initiateRenegotiationRequest",fromVersion:k,hasRemoteOffer:o!=="",mediaPath:l,messageTags:(s=g)!=null?s:[],onProcessed:u,version:t};b.push(q);if(v){s=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(s)}}else if(w){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 2: answer SDP"});q=h(i,k,l,m,{sdp:j,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(j)},r,u,g,y);if(q.sdp.sdp!=null&&d("ZenonMWCommonUtils").isUnifiedPlan(q.sdp.sdp)){s={sdp:j,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(j)};q.renegotiationOffer=s}b.push(q)}else if(v){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 3: offer SDP"});w=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(w)}else if(e){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 4: delta SDP"});j=h(i,k,l,m,{type:"offer",update:e,version:t},r,u,g,y);b.push(j)}else if(x){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 5: prAnswer SDP"});s=h(i,k,l,m,{sdp:p,type:"pranswer",version:d("ZenonMWCommonUtils").getSdpVersion(p)},r,u,g,y);b.push(s)}else if(m){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 6: media update"});v={ackMessageId:i,eventName:"mediaUpdateRequest",mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(m,k,t),messageTags:(q=g)!=null?q:[],onProcessed:u};b.push(v)}else{o="Warning: unsupported SMU type. TXID: "+i;c("FBLogger")("rpweb").warn(o);c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:o,errorDomain:"ZenonMWThriftServerMediaUpdateTranslator"})}d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,f);e={capabilities:{multipleVideoStreamsAllowed:n},eventName:"capabilitiesRequest",messageTags:(w=g)!=null?w:[]};b.push(e);return b}function h(a,b,c,e,f,g,h,i,j){return{ackMessageId:a,e2eeServerState:j,eventName:"remoteSdpRequest",fromVersion:b,mediaPath:c,mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(e),messageTags:(a=i)!=null?a:[],negotiateType:!1,onProcessed:h,sdp:f,sdpOriginLocalId:g,source:"serverMediaUpdateRequest"}}function b(a,b,c,e){return i({acknowledgedVersion:b.acknowledgedVersion,answer:e,header:a,mediaStates:c,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(e=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?e:void 0})}function e(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(a=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?a:void 0})}function f(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:(a=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(b.responseStatusCode))!=null?a:d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,subCode:d("MultiwayCommonTypes").RtcResponseSubCode.cast(b.responseSubCode)})}function i(a){var b=a.acknowledgedVersion,c=a.answer,e=a.header,f=a.mediaStates,g=a.statusCode;a=a.subCode;b={currentVersion:String(b)};f&&(b.mediaStatus=j(f));c&&(b.answer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:e,rtcMessageBody:{serverMediaUpdateResponse:b},statusCode:g,subCode:a,type:d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE})}function j(a){var b={tracks:{}},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:void 0,customVideoContentType:void 0,enabled:a.enabled,name:a.name,owner:a.participantID},f=c?d("ZenonMWThriftTranslatorUtils").toMWThriftTrackLabel(a.type):null;f!=null&&(e.label=f);b.tracks[a.trackID]=e});return b}g.fromThriftServerMediaUpdateRequest=a;g.toThriftServerMediaUpdateResponse=b;g.toThriftServerMediaUpdateRenegotiationResponse=e;g.toThriftServerMediaUpdateNoSdpResponse=f}),98);
__d("ZenonMWThriftStateSyncTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageBody.updateResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUpdateResponse",topic:c,version:b};return[a]}function b(a){a=a.messageBody.notifyRequest;if(!a)return[];var b=[];if(a.syncPayload!=null)d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(a.syncPayload.stateStore,b,!0,!1);else{var c=a.data,e=a.topic;a=a.version;c={data:c,eventName:"stateSyncNotifyRequest",responseRequired:!0,topic:e,version:a};b.push(c)}return b}function c(a){var b=a.messageBody.unsubscribeResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUnsubscribeResponse",topic:c,version:b};return[a]}function e(a,b){var c=b.data,e=b.topic;b=b.version;c={data:c,syncPayload:{stateStore:{},stateStoreV2:{}},topic:e,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{updateRequest:c},type:d("MultiwayCommonTypes").MessageType.UPDATE})}function f(a,b){var c=b.topic;b=b.version;c={topic:c,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{notifyResponse:c},type:d("MultiwayCommonTypes").MessageType.NOTIFY})}function h(a,b){var c=b.topic;b=b.version;c={topic:c,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{unsubscribeRequest:c},type:d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE})}g.fromThriftUpdateResponse=a;g.fromThriftNotifyRequest=b;g.fromThriftUnsubscribeResponse=c;g.toThriftUpdateRequest=e;g.toThriftNotifyResponse=f;g.toThriftUnsubscribeRequest=h}),98);
__d("ZenonMWThriftSubscriptionTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=b.subscriptions;b={subscriptions:b.map(function(a){var b;return{cname:"",options:{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast((b=a.options)==null?void 0:b.videoQuality)},trackId:a.trackId,type:d("MultiwaySharedTypes").SubscriptionType.cast(a.type)}})};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{subscriptionRequest:b},type:d("MultiwayCommonTypes").MessageType.SUBSCRIPTION})}g.toThriftSubscriptionRequest=a}),98);
__d("ZenonMWThriftWakeupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"wakeupRequest"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.WAKEUP})}g.fromThriftWakeupRequest=a;g.toThriftWakeupResponse=b}),98);
__d("ZenonMWThriftMessageTranslator",["FBLogger","MultiwayCommonTypes","ZenonActorHooks","ZenonMWThriftAddParticipantsTranslator","ZenonMWThriftApprovalTranslator","ZenonMWThriftClientEventTranslator","ZenonMWThriftClientMediaUpdateTranslator","ZenonMWThriftConferenceStateTranslator","ZenonMWThriftDataMessageTranslator","ZenonMWThriftDismissTranslator","ZenonMWThriftHangupTranslator","ZenonMWThriftIceCandidateTranslator","ZenonMWThriftJoinTranslator","ZenonMWThriftPingTranslator","ZenonMWThriftRemoveParticipantsTranslator","ZenonMWThriftRingTranslator","ZenonMWThriftServerMediaUpdateTranslator","ZenonMWThriftStateSyncTranslator","ZenonMWThriftSubscriptionTranslator","ZenonMWThriftTranslatorUtils","ZenonMWThriftWakeupTranslator","ZenonSignalingMessage","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.getHeader();a=a.getEvents();if(a.length===0)throw c("unrecoverableViolation")("Unexpected Translation: called toMWThriftMessage with empty signaling events","rtc_www");else{var e=a[0];switch(e.eventName){case"addParticipantsRequest":return d("ZenonMWThriftAddParticipantsTranslator").toThriftAddParticipantsRequest(b,e);case"clientEventRequest":return d("ZenonMWThriftClientEventTranslator").toThriftClientEventRequest(b,e);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&(a[1].sdp.type==="offer"||a[1].sdp.type==="answer"))return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,e,a[1]);break;case"dismissResponse":return d("ZenonMWThriftDismissTranslator").toThriftDismissResponse(b);case"genericDataMessageRequest":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageRequest(b,e);case"genericDataMessageResponse":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageResponse(b);case"terminateRequest":return d("ZenonMWThriftHangupTranslator").toThriftHangupRequest(b,e);case"initiateRenegotiationResponse":if(a.length>=3&&a[1].eventName==="remoteSdpResponse"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="answer")return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,a[1],a[2].mediaStates,a[2].sdp);else return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateRenegotiationResponse(b,e);case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,a[1],a[2],e);break;case"inviteResponse":return d("ZenonMWThriftRingTranslator").toThriftRingResponse(b,e);case"iceCandidateRequest":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateRequest(b,e);case"iceCandidateResponse":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateResponse(b);case"participantUpdateResponse":return d("ZenonMWThriftConferenceStateTranslator").toThriftConferenceStateResponse(b,e);case"localSdpRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates,e.sdp);case"mediaUpdateRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates);case"mediaUpdateResponse":return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateNoSdpResponse(b,e);case"pingRequest":return d("ZenonMWThriftPingTranslator").toThriftPingRequest(b);case"remoteSdpResponse":return e.type==="offer"&&(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer")?a[1].mediaMode!=="p2p"?d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates,a[1].sdp):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e);case"removeParticipantsRequest":return d("ZenonMWThriftRemoveParticipantsTranslator").toThriftRemoveParticipantsRequest(b,e);case"subscriptionRequest":return d("ZenonMWThriftSubscriptionTranslator").toThriftSubscriptionRequest(b,e);case"stateSyncNotifyResponse":return d("ZenonMWThriftStateSyncTranslator").toThriftNotifyResponse(b,e);case"stateSyncUpdateRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUpdateRequest(b,e);case"stateSyncUnsubscribeRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUnsubscribeRequest(b,e);case"usersApprovalRequest":return d("ZenonMWThriftApprovalTranslator").toThriftApprovalRequest(b,e);case"wakeupResponse":return d("ZenonMWThriftWakeupTranslator").toThriftWakeupResponse(b)}}return null}function b(a){var b=a.messageHeader;if(!h(b)){c("FBLogger")("rtc_www").info("Ignoring Thrift MW message; receiver does not match self ID","rtc_www");return null}var e=b.type,f=b.responseStatusCode==null;b=d("ZenonMWThriftTranslatorUtils").mwThriftMessageHeaderToSignalingMessageHeader(b);var g=[];if(e==null)return new(c("ZenonSignalingMessage"))(b,g);switch(e){case d("MultiwayCommonTypes").MessageType.RING:f&&(g=d("ZenonMWThriftRingTranslator").fromThriftRingRequest(a,b));break;case d("MultiwayCommonTypes").MessageType.JOIN:f||(g=d("ZenonMWThriftJoinTranslator").fromThriftJoinResponse(a));break;case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:f&&(g=d("ZenonMWThriftConferenceStateTranslator").fromThriftConferenceStateRequest(a));break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:f||(g=d("ZenonMWThriftClientMediaUpdateTranslator").fromThriftClientMediaUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.HANGUP:f||(g=d("ZenonMWThriftHangupTranslator").fromThriftHangupResponse(a));break;case d("MultiwayCommonTypes").MessageType.PING:f||(g=d("ZenonMWThriftPingTranslator").fromThriftPingResponse(a));break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:!f?g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateResponse(a):g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateRequest(a);break;case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:f&&(g=d("ZenonMWThriftDataMessageTranslator").fromThriftDataMessageRequest(a));break;case d("MultiwayCommonTypes").MessageType.DISMISS:f&&(g=d("ZenonMWThriftDismissTranslator").fromThriftDismissRequest(a));break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:f&&(g=d("ZenonMWThriftServerMediaUpdateTranslator").fromThriftServerMediaUpdateRequest(a));break;case d("MultiwayCommonTypes").MessageType.NOTIFY:f&&(g=d("ZenonMWThriftStateSyncTranslator").fromThriftNotifyRequest(a));break;case d("MultiwayCommonTypes").MessageType.UPDATE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUnsubscribeResponse(a));break;case d("MultiwayCommonTypes").MessageType.WAKEUP:f&&(g=d("ZenonMWThriftWakeupTranslator").fromThriftWakeupRequest(a));break;default:break}return new(c("ZenonSignalingMessage"))(b,g)}function h(a){return d("ZenonActorHooks").ZenonActor.isInstagramUser()||d("ZenonActorHooks").ZenonActor.isOculusUser()||d("ZenonActorHooks").ZenonActor.isKadabraUser()||d("ZenonActorHooks").ZenonActor.isManagedMetaAccount()||d("ZenonActorHooks").ZenonActor.isMDCUser()||a.receiverUserId==null||a.receiverUserId===d("ZenonActorHooks").ZenonActor.getID()||((a=a.receiver)==null?void 0:a.baseId)===d("ZenonActorHooks").ZenonActor.getAccountID()}g.toMWThriftMessage=a;g.toSignalingMessage=b}),98);
__d("RTWebSignalingListener",["FBLogger","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","getZenonMqttChannel","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("getZenonMqttChannel")()}var b=a.prototype;b.setLoggingEventHandler=function(a){this.$2=a};b.subscribe=function(a,b){var e=this;this.$1.subscribeBinary("/t_rtc_multi",function(f){try{f=d("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(f);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","MQTT Thrift",f);d("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(f);e.$2&&e.$2({mwThriftMessage:f,name:"mwThriftMessageRecv"});var g=d("ZenonMWThriftMessageTranslator").toSignalingMessage(f);d("ZenonMWThriftMessageReliabilityLogger").logMessageAfterTranslation(f);if(g==null)return;d("ZenonMWThriftMessageReliabilityLogger").logMessageAfterNullCheck(f);b&&e.$3(f,g,b);a(g);d("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(f)}catch(a){c("FBLogger")("rpweb").catching(a).warn("Error receiving binary MQTT message from /t_rtc_multi topic")}})};b.unsubscribe=function(){this.$1.unsubscribeAll("/t_rtc_multi")};b.$3=function(a,b,d){try{d(a,b)}catch(a){c("recoverableViolation")("Signaling messages should be json parsable. error:"+a,"rtweb")}};return a}();g["default"]=a}),98);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Send","Receive"]);c=b("$InternalEnum")({Primary:"primary",Secondary:"secondary"});d="rtc_www";f.ZenonUpdateIceInfoDirection=a;f.ZenonJoinMode=c;f.tslogSource=d}),66);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(),i=new Set();function a(a,b){var c=a.messageHeader;a=a.messageBody;if(h.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&j(a.joinRequest,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&m(a.clientMediaUpdateRequest,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&p(a.serverMediaUpdateResponse,b);break;default:break}h.add(c.transactionId)}function b(a,b){var c=a.messageHeader;a=a.messageBody;if(i.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinResponse&&k(a.joinResponse,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateResponse&&n(a.clientMediaUpdateResponse,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateRequest&&o(a.serverMediaUpdateRequest,b);break;default:break}i.add(c.transactionId)}function j(a,b){var c=a.answer;a=a.offer;b({name:"inviteSent"});q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function k(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function l(a,b,c){a=a.iceCandidateSdps;a.forEach(function(a){a.candidateSdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.candidateSdpString})})}function m(a,b){a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function n(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function o(a,b){var c=a.answer;a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function q(a,b,c){a.sdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.sdpString})}g.logSentMessage=a;g.logReceivedMessage=b}),98);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageHeader.type,e=d("ZenonMWThriftMessageMap").messageTypeToString(b);if(a.messageHeader.serverInfoData==null&&b!=null&&b!==d("MultiwayCommonTypes").MessageType.JOIN){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+e});c("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+e);return!1}return!0}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(a,b,c,d,e,f,g){var h,i="javascript-sandbox",j="OverrideServer",k="www_sandbox",l="www_tier";a=function(){function a(){}var d=a.prototype;d.patchRequestHeaders=function(a){var d={},e=c("RTISubscriptionManagerConfig").bladerunner_www_sandbox,f=c("RTISubscriptionManagerConfig").is_intern;if(!(h||(h=c("isEmpty")))(c("WebDriverConfig").auxiliaryServiceInfo)){var g;g=(g=c("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?g:c("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];g!=null?(typeof g.ip_address==="string"?d[j]=g.ip_address+":18295":typeof g.hostname==="string"&&(d[j]=g.hostname+":18295"),typeof c("WebDriverConfig").originHost==="string"&&(d[k]="www."+c("WebDriverConfig").originHost)):e!=null&&(d[i]=e)}else e!=null&&(d[i]=e);f===!0&&(d[l]="intern");if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){g=b("cr:3024")==null?void 0:b("cr:3024").get();g!=null&&(d.is_test="true",d.original_request_id=g)}c("gkx")("20929")&&(d["Accept-Ack"]="RSAck");for(e in a)d[e]=a[e];d.http_referer=window.location.href;return d};return a}();d=new a();e=d;g["default"]=e}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f,g){var h,i="bladerunner_js_client",j={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$2>=2&&c("FBLogger")(i).info("BladeRunner info: %s",a),this.$3(j.info,a)};b.warn=function(a){this.$2>=1&&c("FBLogger")(i).warn("BladeRunner warn: %s",a),this.$3(j.warning,a)};b.exception=function(a,b){b===void 0&&(b="");var d=b+" "+a.toString();this.$2>=0&&c("FBLogger")(i).warn("BladeRunner exception: %s, %s",b,a.toString());this.$3(j.exception,d)};b.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};b.bumpCounter=function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$1=a};b.setFBLoggerLevel=function(a){this.$2=a};b.$3=function(a,b){};return a}();b=new a();e=b;g["default"]=e}),98);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f,g){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};g.StreamFrameType=a;g.StreamRequestType=b}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){var h=function(){function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};b.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.updateRetryRequestPayload=function(a){a!=null?this.payload=c("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.requestType=o(b.requestType);c.payload=r(b.payload);c.headers=u(b.headers);c.extraHeader=r(b.extraHeader);c.requestTarget=r(b.requestTarget);c.instrumentationData=r(b.instrumentationData);return c};return a}(),i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=p(b.dataId);c.data=r(b.data);c.shouldAck=w(b.shouldAck);return c};var b=a.prototype;b.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};b.rawDataSize=function(){return this.data==null?0:this.data.length};b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return c("Base64").decode(this.data)};b.setData=function(a){this.data=c("Base64").encode(a)};b.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}(),j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=o(b.dataId);c.success=v(b.success);c.message=r(b.message);c.code=p(b.code);return c};return a}();j.ACK_CODE_LANDED_AND_ACCEPTED=20;j.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;j.ACK_CODE_FAILED_TO_LAND=50;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=p(b.streamId);c.message=r(b.message);return c};return a}(),l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.status=o(b.status);c.message=r(b.message);c.code=p(b.code);c.shouldRetry=w(b.shouldRetry);c.retryDelayMs=p(b.retryDelayMs);return c};return a}(),m=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.newBody=r(b.newBody);c.newExtraHeader=r(b.newExtraHeader);c.patchExtraHeader=r(b.patchExtraHeader);c.killBody=w(b.killBody);c.temporary=w(b.temporary);return c};return a}(),n=function(){function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};b.isInstrumented=function(){if(this.type===d("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===d("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(b){var e=new a();e.type=o(b.type);switch(e.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:e.request=h.readObject(s(b.request));break;case d("BladeRunnerTypes").StreamFrameType.DATA:e.data=i.readObject(s(b.data));break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:e.dataAck=j.readObject(s(b.dataAck));break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:e.statusUpdate=l.readObject(s(b.statusUpdate));break;case d("BladeRunnerTypes").StreamFrameType.LOG:e.log=k.readObject(s(b.log));break;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:e.rewriteRequest=m.readObject(s(b.rewriteRequest));break;default:c("BladeRunnerLogger").warn("Frame with unexpected type: "+e.type);return null}return e};a.newRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var a=JSON.parse(this.instrumentationData);return(a=a.dataFlowTracingData)==null?void 0:a.traceId}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e of b.frames){var f=n.readObject(e);f!=null&&d.push(f)}f=b.instrumentationData||null;return new a(c,d,f)};return a}();function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}g.GatewayStreamRequest=h;g.GatewayStreamData=i;g.GatewayStreamDataAck=j;g.GatewayStreamLog=k;g.GatewayStreamStatusUpdate=l;g.GatewayStreamRewriteRequest=m;g.GatewayStreamFrame=n;g.GatewayStreamBatch=a}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});f["default"]=a}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});f["default"]=a}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){this.$4(a);var b=[];for(var e of a.getFrames())this.$2.witnessFrame(e)&&b.push(e);e=this.$2.getRequest();(e=e.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,{},(e=a.getInstrumentationData())==null?void 0:e.auxId,null,a.getInstrumentationDataDfTraceId());b.length>0&&this.$5(new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,b,a.instrumentationData))};b.onDisconnect=function(){this.$2.resetErrors();var a=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){var b=this;a=a.getFrames().filter(function(a){return a.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(a of a){var e=a.getStatusUpdate();if(e.status==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||e.status==d("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,g=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=d("BladeRunnerStreamStatus").StreamStatus.STOPPED;var i=h;e.retryDelayMs!=null&&(i=e.retryDelayMs);c("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?c("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(c("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?c("setTimeoutAcrossTransitions")(function(){return b.$6()},i):this.$6())}else c("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?c("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):c("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();a!=null&&this.$2.updateRetryRequestPayload(a);this.$3.sendRetryStreamRequest(this.$2)}};b.$5=function(a){c("BladeRunnerLogger").bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(a of a.getFrames())try{switch(a.type){case d("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(a.getData());b.push(a.getData());break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(a.getStatusUpdate().status);break;case d("BladeRunnerTypes").StreamFrameType.LOG:var e=a.getLog().message;e!=null&&this.$1.onLog(e);break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){c("BladeRunnerLogger").bumpCounter("send_to_handler_error"),c("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}this.$7(b)};b.$7=function(a){var b=[];for(a of a)if(a.shouldAck===!0&&a.dataId!=null){var c=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();c.streamId=a.streamId;c.dataId=a.dataId;c.success=!0;b.push(c)}this.$3.sendDataAcks(b)};return a}();g["default"]=a}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("819");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",a);e=b;g["default"]=e}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1857112");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e=b;g["default"]=e}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","FBLQ:comet_notifications_live_query_experimental"],i=0;function j(){var a=Date.now();i>=a?i+=1:i=a;return i.toString()}var k=function(){function a(a,b,c,e,f,g,h,i,j,k){this.$10=[];this.$11=!1;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.$7=h;this.$8=i;this.$9=j;this.$12=(a=k)!=null?a:!1;b=d("ConstUriUtils").getUri(window.location.href);b&&(this.$13=b.getDomain())}var b=a.prototype;b.logE2EEvent=function(a,b,c,d,e,f){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);if(this.$3==="Falco")return;e={request_id:this.$1,resume_id:"0",retry_id:e,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:b,timestamp_ms:j(),aux_id:d,additional_data:c,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:f};this.$14(e)};b.$14=function(a){if(!this.$12){c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return a});return}this.$10.push(a);if(this.$11||a.event==c("RequestStreamE2EClientLoggerEvent").FAILURE||a.message_type==c("RequestStreamE2EClientLoggerMessageType").RESPONSE){var b={events:this.$10};c("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return b});this.$10=[];this.$11=!0}};b.getRequestId=function(){return this.$1};return a}();function a(a,b,c){if(a==null||a.method==null)return null;var d=!1;h.includes(a.method)&&(d=!0);if(b==null||b.length==0)return null;b=JSON.parse(b);return b.requestId==null?null:new k(b.requestId,c,a.method,l(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate,b.dgwStreamGroupLoggingId,b.dgwCountPriorStreamsInGroup,d)}function l(a,b){if(a==="FBLQ"&&b.config_id)return b.config_id;if(a==="SKY"){if(b.topic){var c=b.topic.lastIndexOf("/");return c>0?b.topic.substr(0,c):b.topic}return}return a}function b(a,b,d,e,f,g){f===void 0&&(f=null);g===void 0&&(g=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var h={request_id:a.requestId,resume_id:"0",transport:b,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:j(),aux_id:a.auxId,additional_data:f,df_trace_id:g};c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return h})}g.RequestStreamE2ELogger=k;g.createStreamLogger=a;g.logRequestStreamE2EEventStatic=b}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Connected",j="Disconnected",k="/br_sr",l="/sr_res",m=null;function n(a){var b;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return(b=a.request)==null?void 0:b.getInstrumentationData();case d("BladeRunnerTypes").StreamFrameType.DATA:return(b=a.data)==null?void 0:b.getInstrumentationData()}return null}function o(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case d("BladeRunnerTypes").StreamFrameType.DATA:return c("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function p(a){if(a===null)return null;switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case d("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function q(a){var b={};a==null?void 0:(a=a.frames)==null?void 0:a.forEach(function(a){if(a.type===d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){a=(a=a.statusUpdate)==null?void 0:a.status;a=p(a);a!==null&&(b.flow_status=a)}});return b}function r(a,b){var c;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:b.data_base64_size=(c=a.request)==null?void 0:(c=c.payload)==null?void 0:(c=c.length)==null?void 0:c.toString();break;case d("BladeRunnerTypes").StreamFrameType.DATA:b.data_base64_size=(c=a.data)==null?void 0:(b=c.rawDataSize())==null?void 0:b.toString();break}return null}function s(a,b,e){var f=n(a);if(f==null)return;var g=o(a);if(g==null)return;var h=null;switch(b){case d("MqttPublishListener").MqttPublishEvent.SENT:h=c("RequestStreamE2EClientLoggerEvent").SENT;break;case d("MqttPublishListener").MqttPublishEvent.ACKED:h=c("RequestStreamE2EClientLoggerEvent").PUBACK;break;case d("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:h=c("RequestStreamE2EClientLoggerEvent").FAILURE;e.reason==null&&(e.reason=b);break}if(h==null)return;r(a,e);if(((b=a.request)==null?void 0:b.e2eLogger)!=null&&f.clientLoggingDisabled==null){(b=a.request)==null?void 0:b.e2eLogger.logE2EEvent(g,h,e,f.auxId)}else d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(f,d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,g,h,e)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:c("FBMqttChannel"),this.$8=new Map(),c("BladeRunnerLogger").setClientSessionId(c("uuidv4")()),this.$9()}a.get=function(){m==null&&(m=new a(c("FBMqttChannel")));return m};var e=a.prototype;e.sendNewStreamRequest=function(b,d){d=new(c("BladeRunnerEventHandler"))(b,d,this);var e=b.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(c("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),c("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$11(d,e.streamId))};e.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};e.sendCancel=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_cancel");var b=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();b.streamId=a.streamId;b.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;this.$13(b,a);this.removeStream(a.streamId)};e.sendAmendment=function(a,b,e){c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=new(d("BladeRunnerTypesInternal").GatewayStreamData)();f.streamId=a;f.setData(b);e!=null&&(f.instrumentationData=e);this.$14(f)};e.sendAmendmentWithAck=function(a,e,f){var g=this;c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var i=this.$15(),j=new(d("BladeRunnerTypesInternal").GatewayStreamData)();j.streamId=a;j.setData(e);j.shouldAck=!0;j.dataId=i;f!=null&&(j.instrumentationData=f);a=new(h||(h=b("Promise")))(function(a,b){g.$8.set(i,{resolve:a,reject:b})});this.$14(j);return a};e.$14=function(a){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};e.sendDataAcks=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};e.removeStream=function(a){this.$6["delete"](a)};e.getStreamCount=function(){return this.$6.size};e.getNextStreamId=function(){this.$5++;return this.$5};e.onMQTTStateChanged=function(a){this.$16();if(a!=j&&a!=i||this.$4==a)return;this.$4=a;c("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==j?(c("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==i&&c("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};e.$12=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};e.$13=function(a,b){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").SENT)}};e.$17=function(a){for(a of a)this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(a));this.$16()};e.$19=function(){this.$2++;return this.$2};e.$15=function(){this.$3++;return this.$3};e.$16=function(){var a=!1;if(this.$7.getConnectionState()===i&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};e.$20=function(a){var b=this,e=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),f=e.write();if(f.length>this.$21()){var g=Math.floor(a.length/2);if(g===0){a.forEach(function(a){return s(a,d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var h=new Error("Publish is too long: "+f.length);h.stack;this.$22(e,h,"Publish is too long");throw h}this.$20(a.slice(0,g));this.$20(a.slice(g,a.length))}else try{c("BladeRunnerLogger").info("send message to "+k+" ("+f.length+" bytes)");h={qos:1,skipBuffer:!1};if(e.isInstrumented()){var i=Date.now();h.listener={onEvent:function(b){var c=(Date.now()-i).toString();a.forEach(function(a){s(a,b,{latency:c})})}}}this.$7.publish(k,f,h)["catch"](function(a){b.$22(e,a,"Failed publishing to MQTT")});c("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$22(e,a,"Failed publishing to MQTT");throw a}};e.$9=function(){var a=this;c("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?c("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(c("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),c("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(k,function(a){throw new Error("Unexpected response: "+k+" "+a.toString())});this.$7.subscribe(l,function(b){a.$23(b)})};e.$23=function(a){a=d("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};e.$22=function(a,b,e){for(a of a.getFrames())if(a.type===d("BladeRunnerTypes").StreamFrameType.REQUEST){var f=a.getRequest(),g=this.$6.get(f.streamId);g!=null&&this.$24(g,f.streamId,d("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(a.type===d("BladeRunnerTypes").StreamFrameType.DATA){g=a.getData();f=g.dataId;if(g.shouldAck!=null&&g.shouldAck&&f!=null){var h=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();h.streamId=g.streamId;h.dataId=f;h.success=!1;h.code=d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;h.message=e;this.$25(h)}}c("BladeRunnerLogger").info("Failed publishing to MQTT: "+b.message);c("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};e.$25=function(a){var b=this.$8.get(a.dataId);b!=null&&(this.$8["delete"](a.dataId),a.success?b.resolve(!0):a.code===d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?b.resolve(!1):b.reject(a.message))};e.processBatch=function(a){try{d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a),a.getInstrumentationDataDfTraceId());c("BladeRunnerLogger").bumpCounter("socket_process_batch");var b=JSON.stringify(a);c("BladeRunnerLogger").info("Received batch ("+b.length+" bytes)");b=null;for(var e of a.getFrames()){var f=e.getStreamId();b==null&&(b=f);if(f!=null&&b!=f)throw new Error("Received batch with frames for multiple streams");e.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(e.getDataAck())}if(b!=null){f=this.$6.get(b);f!=null?f.onProxyResponse(a):c("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+b)}else c("BladeRunnerLogger").info("Received batch with no frames")}catch(a){c("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");c("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};e.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};e.$11=function(a,b){this.$24(a,b,d("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)};e.$24=function(a,b,c,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=b;g.status=c;g.shouldRetry=e;g.retryDelayMs=f;b=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(b)};e.$10=function(){if(!c("CurrentUser").isLoggedIn()){c("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};e.$21=function(){var a=1024*1024,b=512*1024;try{var d=c("justknobx")._("317");b=d*a}catch(a){}return Math.max(b-1024,0)};return a}();a.maxStreamCount=2e3;g["default"]=a}),98);
__d("BladeRunnerStream",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a}var b=a.prototype;b.getStreamHandler=function(){return this.$1};b.cancel=function(){};b.amendWithAck=async function(a){return!1};b.amendFireAndForget=function(a){};b.amendWithoutAck=function(a){};b.start=function(){return Promise.resolve()};b.isAlive=function(){return!1};b.canAmend=function(){return!1};b.getStatus=function(){return null};b.getStreamId=function(){return 0};return a}();f.default=a}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};b.isAlive=function(){return!(this.$2==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.REJECTED)};b.canAmend=function(){return this.$2==d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STOPPED};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:c=this.getLastStatus()!=d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:c=this.getLastStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var b=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var e of Object.keys(b))this.$1.headers[e]=b[e],d[e]=b[e];this.$1.extraHeader=JSON.stringify(d)}catch(b){c("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();g["default"]=a}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","uuidv4"],(function(a,b,c,d,e,f,g){var h=4,i={reason:"stream_dead"};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d,e){b=a.call(this,b)||this;b.$BladeRunnerSocketStream$p_1=e;b.$BladeRunnerSocketStream$p_2=new(c("BladeRunnerStreamState"))(d);b.$BladeRunnerSocketStream$p_2.setRetriesAllowed(h);return b}var e=b.prototype;e.start=function(){var a=this;return new Promise(function(b){a.send(),b()})};e.send=function(){var a,b=this.$BladeRunnerSocketStream$p_2.getRequest();(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=b.payload)==null?void 0:(b=a.length)==null?void 0:b.toString()});this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())};e.amendWithAck=async function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}if(this.canAmend()){if(d){(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(b.streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d))}(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,i,d==null?void 0:d.auxId);return Promise.reject("Stream is closed or not accepted")};e.amendFireAndForget=function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d));if(d){(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}}else{(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,i,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};e.amendWithoutAck=function(a){this.amendFireAndForget(a)};e.$BladeRunnerSocketStream$p_3=function(a){return typeof a=="object"?btoa(new TextDecoder("utf8").decode(a)):a};e.cancel=function(){var a=this.$BladeRunnerSocketStream$p_2.getRequest();(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(d("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};e.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()};e.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()};e.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()};e.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId};return b}(c("BladeRunnerStream"));g.default=a}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function j(a,b){var d=c("RequestStreamE2EClientSamplingConfig").sampleRate;if(d>1&&a!=null){a=c("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];a==0?d=0:a!=null&&(d/=a)}return d==1?1:d/b}function k(a,b,d,e){var f=c("uuidv4")();(b.requestId==null||b.requestId===""||typeof b.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?b.requestId=a.requestId:b.requestId=f);b.requestId+="/_"+f.substring(0,4);b.resumeId="0";d!=null?b.sampleRate=d:b.sampleRate=void 0;f="";e!=null&&e.length>0&&(f=e);f.length>0&&(b.requestLogContext!=null&&b.requestLogContext.length>0?b.requestLogContext+=":":b.requestLogContext="",b.requestLogContext+=f);(a==null?void 0:a.method)==="Falco"&&(b.clientLoggingDisabled="Falco");d={};for(e of Object.keys(b).sort())d[e]=b[e];return JSON.stringify(d)}function a(a,b,d,e){b&&(!b.requestId.includes("/")&&!b.requestId.includes("#")||h(0,41721));e=j(a.method,(e=e)!=null?e:1);if(c("Random").coinflip(e))return k(a,b||{requestId:""},e,d);return i(b)?k(a,b||{requestId:""},null,d):""}g.isForceLogged=i;g.getSampleRateForLogging=j;g.normalizeInstrumentationData=k;g.validateInstrumentationData=a}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:c("BladeRunnerSocket").get(),b&&(this.$2=b)}var e=a.prototype;e.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};e.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};e.logInfo=function(a){c("BladeRunnerLogger").info(a)};e.bumpCounter=function(a){c("BladeRunnerLogger").bumpCounter(a)};e.$3=function(a,b,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamRequest)();g.streamId=this.$1.getNextStreamId();g.requestType=d("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;g.headers=c("BladeRunnerConfig").patchRequestHeaders(a);g.extraHeader=JSON.stringify(g.headers);g.payload=b!=null?c("Base64").encode(b):null;f!=null&&(f.transport="WEB_RS_MQTT");g.instrumentationData=d("RequestStreamE2ESampling").validateInstrumentationData(g.headers||{},f);g.e2eLogger=d("RequestStreamE2ELogger").createStreamLogger(g.headers,g.instrumentationData,this.$2);return new(c("BladeRunnerSocketStream"))(e,g,this.$1)};return a}();g["default"]=a}),98);
__d("ClickToWhatsAppBusinessDownloadFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1923272");b=d("FalcoLoggerInternal").create("click_to_whats_app_business_download",a);e=b;g["default"]=e}),98);
__d("CometSSREntrypoint",["objectValues","relay-runtime/util/withProvidedVariables"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b,d=c("relay-runtime/util/withProvidedVariables")(a.variables,a.parameters.params.providedVariables);return{actor_id:(b=(b=a.environmentProviderOptions)==null?void 0:b.actorID)!=null?b:null,exclude_from_ssr:(b=(b=a.environmentProviderOptions)==null?void 0:b.excludeFromSSR)!=null?b:!1,graphql_env_override_ref:(b=(b=a.environmentProviderOptions)==null?void 0:b.graphQLEnvOverrideRef)!=null?b:null,id:a.parameters.params.id,name:a.parameters.params.name,num_connections_for_ssr:(b=(b=a.environmentProviderOptions)==null?void 0:b.numConnectionsForSSR)!=null?b:null,preloader_group:(b=a.environmentProviderOptions)==null?void 0:b.preloaderGroup,variables:d}}function i(a,b){b=a.getPreloadProps(b);var d=b.entryPoints;b=b.queries;b=(b=b)!=null?b:{};var e=c("objectValues")(b).filter(function(a){return a!=null}),f=[a.root.getModuleId()];if(d!=null){b=Object.keys(d);b.forEach(function(a){a=d[a];if(a==null)return;var b=a.entryPoint;a=a.entryPointParams;b=i(b,a);e=e.concat(b.queries);f=f.concat(b.roots)})}return{queries:e,roots:f}}function a(a,b){a=i(a,b);b=a.queries;return b.map(h)}function b(a){a=a.map(function(a){return i(a.entryPoint,a.entryPointParams)});return a.map(function(a){var b=a.queries;a=a.roots;return{quries:b.map(h),roots:a}})}function d(a,b){a=i(a,b);b=a.queries;a=a.roots;return{queries:b.map(h),roots:a}}function e(){throw new Error("This function should not be called. It exists solely for the type-generation")}function f(a,b){var d;a=a.map(function(a){return i(a.entryPoint,a.entryPointParams)});a=a.map(function(a){var b=a.queries;a=a.roots;return{queries:b.map(h),roots:a}});d=c("objectValues")((d=b==null?void 0:b.getDisplayQueries())!=null?d:{}).filter(function(a){return a!=null}).map(h);b=c("objectValues")((b=b==null?void 0:b.getDeferredQueries())!=null?b:{}).filter(function(a){return a!=null}).map(h);return{appshellQueries:{deferred:b,display:d},routeObjects:a}}g.processRootEntryPoint=a;g.processRootEntryPoints=b;g.processRootEntryPointData=d;g.preloadQuery=e;g.processServerEntryPoints=f}),98);
__d("CometRouterSSREntrypoint",["CometSSREntrypoint"],(function(a,b,c,d,e,f){"use strict";a=importNamespace("CometSSREntrypoint").processRootEntryPoint;b=importNamespace("CometSSREntrypoint").processRootEntryPointData;f.processRootEntryPoint=a;f.processRootEntryPointData=b}),66);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){if(!c("gkx")("26332"))return;a=a.filter(function(a){return!i.has(a)});if(a.length===0)return;a.forEach(function(a){d("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",a)});var b=(h||(h=c("performanceAbsoluteNow")))(),e=c("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:a},method:"POST"}).then(function(a){return{fetchPredictionsEnd:(h||(h=c("performanceAbsoluteNow")))(),fetchPredictionsStart:b,payload:a}});a.forEach(function(a){return i.set(a,e)})}function a(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);j(a.map(function(a){a=a.name;return a}))}function k(a){if(!c("gkx")("26332"))return;j(a);var b=(h||(h=c("performanceAbsoluteNow")))();a.forEach(function(a){var e=i.get(a);e&&e!==!0&&c("promiseDone")(e,function(e){var f=e.fetchPredictionsEnd,g=e.fetchPredictionsStart;e=e.payload;if(e!=null&&typeof e==="object"){var h;c("Bootloader").loadPredictedResourceMap(e.predictions[a],{onLog:function(c){return d("BootloaderEvents").notifyHasteResponseEF("relay_3d",a,{fetchPredictionsEnd:f,fetchPredictionsStart:g,fetchRsrcsStart:b,tierOne:c})}},(h=(h=e.consistency)==null?void 0:h.rev)!=null?h:null);e.consistency!=null&&c("ClientConsistencyEventEmitter").emit("newEntry",e.consistency)}});i.set(a,!0)})}function b(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);b=a.map(function(a){a=a.name;return a});k(b)}e={fetchPredictedResources:b,fetchPredictedResourcesForQueries:k,fetchPredictions:a,fetchPredictionsForQueries:j};g["default"]=e}),98);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b;return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map:void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),j=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:i.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:i.CT_BOOLEAN_FALSE}),k=[i.CT_STOP,0,i.CT_BOOLEAN_TRUE,i.CT_BYTE,i.CT_DOUBLE,0,i.CT_I16,0,i.CT_I32,0,i.CT_I64,i.CT_BINARY,i.CT_STRUCT,i.CT_MAP,i.CT_SET,i.CT_LIST,0,0,0,i.CT_FLOAT],l=Math.pow(2,7)-1,m=-1*Math.pow(2,7),n=Math.pow(2,15)-1,o=-1*Math.pow(2,15),p=Math.pow(2,31)-1,q=-1*Math.pow(2,31),r=Math.pow(2,32)-1,s=(a=c("jsbi")).BigInt("9223372036854775807"),t=a.BigInt("-9223372036854775808"),u=a.BigInt("18446744073709551615"),v=a.BigInt(63),w=a.BigInt(1),x=a.BigInt(0),y=a.BigInt(7),z=a.BigInt(70),A=a.BigInt(127),B=a.BigInt(128),C=Math.pow(2,4);b=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===(h||(h=c("ThriftTypes"))).BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,j.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===j.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=C-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=C-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===(h||(h=c("ThriftTypes"))).STOP)return{ftype:(h||(h=c("ThriftTypes"))).STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===i.CT_BOOLEAN_TRUE||b===i.CT_BOOLEAN_FALSE)&&(this.$5=b===i.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<m||a>l)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case(h||(h=c("ThriftTypes"))).STOP:return;case(h||(h=c("ThriftTypes"))).BOOL:this.readBool();break;case(h||(h=c("ThriftTypes"))).BYTE:this.readByte();break;case(h||(h=c("ThriftTypes"))).DOUBLE:this.readDouble();break;case(h||(h=c("ThriftTypes"))).I16:this.readI16();break;case(h||(h=c("ThriftTypes"))).I32:this.readI32();break;case(h||(h=c("ThriftTypes"))).I64:this.readI64();break;case(h||(h=c("ThriftTypes"))).STRING:this.readString();break;case(h||(h=c("ThriftTypes"))).STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===(h||(h=c("ThriftTypes"))).STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case(h||(h=c("ThriftTypes"))).MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case(h||(h=c("ThriftTypes"))).SET:case(h||(h=c("ThriftTypes"))).LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case(h||(h=c("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte((h||(h=c("ThriftTypes"))).STOP)};b.writeI16=function(a){if(a<o||a>n)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<o||a>n)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<q||a>p)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===i.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?j.CT_BOOLEAN_TRUE:j.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<q||a>p)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>r)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(c("jsbi").greaterThan(a,s)||c("jsbi").lessThan(a,t))throw new Error("i64 out of range: "+a.toString());return c("jsbi").bitwiseXor(c("jsbi").signedRightShift(a,v),c("jsbi").leftShift(a,w))};b.zigzagToI64=function(a){if(c("jsbi").lessThan(a,0)||c("jsbi").greaterThan(a,u))throw new Error("invalid uint64: "+a.toString());return c("jsbi").equal(c("jsbi").bitwiseAnd(a,w),w)?c("jsbi").bitwiseNot(c("jsbi").signedRightShift(a,w)):c("jsbi").signedRightShift(a,w)};b.writeVarint32=function(a){if(a<0||a>r)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(c("jsbi").lessThan(a,x)||c("jsbi").greaterThan(a,u))throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(c("jsbi").equal(c("jsbi").signedRightShift(a,y),x)){this.$1.writeByte(c("jsbi").toNumber(a));b++;break}else{var d,e=(d=c("jsbi")).toNumber(d.bitwiseOr(d.bitwiseAnd(a,A),B));this.$1.writeByte(e);b++;a=d.signedRightShift(a,y)}return b};b.readVarint64=function(){var a=x,b=x,d;while(!0){var e;d=(e=c("jsbi")).BigInt(this.$1.readByte());a=e.bitwiseOr(a,e.leftShift(e.bitwiseAnd(d,A),b));b=e.add(b,y);if(c("jsbi").equal(c("jsbi").bitwiseAnd(d,B),x)){if(c("jsbi").equal(b,z)&&c("jsbi").notEqual(d,w))throw new Error("result exceeded 64 bit limit");break}if(c("jsbi").greaterThan(b,v))throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return k[a]};b.$10=function(a){switch(a){case i.CT_STOP:return(h||(h=c("ThriftTypes"))).STOP;case i.CT_BOOLEAN_FALSE:case i.CT_BOOLEAN_TRUE:return(h||(h=c("ThriftTypes"))).BOOL;case i.CT_BYTE:return(h||(h=c("ThriftTypes"))).BYTE;case i.CT_I16:return(h||(h=c("ThriftTypes"))).I16;case i.CT_I32:return(h||(h=c("ThriftTypes"))).I32;case i.CT_I64:return(h||(h=c("ThriftTypes"))).I64;case i.CT_DOUBLE:return(h||(h=c("ThriftTypes"))).DOUBLE;case i.CT_FLOAT:return(h||(h=c("ThriftTypes"))).FLOAT;case i.CT_BINARY:return(h||(h=c("ThriftTypes"))).STRING;case i.CT_LIST:return(h||(h=c("ThriftTypes"))).LIST;case i.CT_SET:return(h||(h=c("ThriftTypes"))).SET;case i.CT_MAP:return(h||(h=c("ThriftTypes"))).MAP;case i.CT_STRUCT:return(h||(h=c("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=b}),98);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocolPolyfill"))(a);return b(a)}function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocolPolyfill"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocolPolyfill"))(e);b(a,d);return d.toByteArray()}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}g.deserialize=h;g.deserializeNoThrow=a;g.serialize=i;g.serializeNoThrow=b}),98);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};e=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.ANALYTICS_SAMPLE_RATE=a;f.BUCKET_DELIMITER=b;f.CONTEXT_BUCKET_STRATEGY=c;f.CONFIG_TYPE=d;f.EMPTY_RESOLVED_CONTEXTS=e;f.EMPTY_RESOLVED_MONITORS=g;f.EMPTY_RESULT_PARAMS=h;f.ERROR=i;f.JSON_SUB_SAMPLE_RATE=j;f.LIST_DELIMITER=k;f.TYPE=l}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(a of a){var c=a.bucketIndex;if(c==void 0)break;b.push(c)}return b};b=function(a){var b=[];for(a of a){var c=a.bucketName;if(c===void 0)break;b.push(c)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(a of a){var c=a.value;if(c===void 0)break;b.push(c)}return b};f.getBucketIndices=a;f.getBucketNames=b;f.getContextNames=c;f.getContextValues=d}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["cfg_ver_timestamp","policy_id","version","sample_rate"],i=function(a){return a.join(d("ContextualConfigConstants").LIST_DELIMITER)},j=function(a,b){for(var c of h)b[c]!=null&&(a[c]=b[c]);b.name&&(a.config_name=b.name)},k=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=i(e.map(function(a){return a.value}))||"INVALID";a.context=i(d("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=i(d("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=i(d("ContextualConfigResolvedContextsUtils").getContextNames(b));a.monitor_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(b))};function a(a,b,c){var e={sample_rate:d("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};j(e,a);k(e,b);c&&(e.config_contents=JSON.stringify(a));return e}g["default"]=a}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2=a,this.$4=d("Random").random()<1/a.sample_rate,this.$3=b,this.$1=c}var b=a.prototype;b.getData=function(){return this.$2};b.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};b.isSampled=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.createEvent=function(a){var b=this.$1,d=this.$2;a=new(c("ContextualConfigExposureEvent"))(a,d,b);return a};return a}();function a(a,b){return new h(a,b)}g["default"]=a}),98);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){};b=function(a){d("MarauderLogger").log("contextual_config_exposure","",a)};e=c("ContextualConfigExposureLoggerFactory")(a,b);g["default"]=e}),98);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===!1)throw new Error(b)}f["default"]=a}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return Array.isArray(a)};b=function(a){return typeof a==="boolean"};c=function(a){return a!=null};e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case d("ContextualConfigConstants").TYPE.BOOL:case d("ContextualConfigConstants").TYPE.FLOAT:case d("ContextualConfigConstants").TYPE.INT:case d("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};g.isArray=a;g.isBoolean=b;g.isDefined=c;g.isKey=e;g.isInteger=f;g.isNonEmptyString=h;g.isNumber=i;g.isString=j;g.isType=k}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(d("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}g["default"]=a}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var f=c("ContextualConfigParseBoolean")(a);e=function(a){return a===f};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:e=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:e=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:e=function(a){return!0};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return e(a)}}g["default"]=a}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return(h||(h=c("ContextualConfigAssert")))(a>0,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};b=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};e=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a<b,d("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};g.assertHasValues=a;g.assertNumberOfValues=b;g.assertValueOrder=e}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=e.map(f?c("ContextualConfigParseInteger"):h||(h=c("ContextualConfigParseFloat"))),i;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var j=f?c("ContextualConfigParseInteger")(a):(h||(h=c("ContextualConfigParseFloat")))(a);i=function(a){return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===j};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,2);d("ContextualConfigPredAssertions").assertValueOrder(g[0],g[1]);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]&&a<g[1]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<=g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a!==g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return i(a)}}g["default"]=a}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=/^\/(.+)\/(.*)$/;function a(a){try{var b=a.match(h);if(b!=null)return new RegExp(b[1],b[2]);else return new RegExp(a)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}g["default"]=a}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){if(typeof a!=="string")throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},i=function(a){var b=[];for(a of a)b.push(h(a));return b};function a(a,b,e){var f=i(e),g;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:g=function(b){return typeof b!=="string"?!1:b===a};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:g=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:g=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:g=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)===-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);g=function(a){return typeof a!=="string"?!1:a.indexOf(f[0])!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);var h=c("ContextualConfigParseRegExp")(f[0]);g=function(a){return typeof a!=="string"?!1:h.test(a)};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return g(a)}}g["default"]=a}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},k=d("ContextualConfigValidators").isKey(d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a)&&k(a.toUpperCase()),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},n=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},o=function(a,b){var e=b.name;n(e);var f=b.strategy;l(f);b=b.values||[];m(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParsePredBoolean")(e,f);case d("ContextualConfigConstants").TYPE.FLOAT:return c("ContextualConfigParsePredNumeric")(e,f,b,!1);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParsePredNumeric")(e,f,b,!0);case d("ContextualConfigConstants").TYPE.STRING:return c("ContextualConfigParsePredString")(e,f,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},p=function(a,b){i(b);var c=b.name;n(c);return{name:c,pred:o(a,b)}};function a(a,b){j(b);return b.map(function(b){return p(a,b)})}g["default"]=a}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a)&&a.length>0,d("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name,d=a.type;a=a.buckets;k(b);l(d);return{name:b,type:d,buckets:c("ContextualConfigParseContextBuckets")(d,a)}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}f["default"]=a}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a),d("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,b){j(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParseBoolean")(b);case d("ContextualConfigConstants").TYPE.FLOAT:return(i||(i=c("ContextualConfigParseFloat")))(b);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParseInteger")(b);case d("ContextualConfigConstants").TYPE.STRING:return b;default:throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_RESULTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},n=function(a,b){for(a of a)if(a.name===b)return a.type;throw new Error(d("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},o=function(a){return function(b){k(b);var d=b.name;l(d);var e=n(a,d);m(e);b=(i||(i=c("ContextualConfigParseResultParamValue")))(e,b.value);return{name:d,type:e,value:b}}};function a(a,b){j(b);return b.map(o(a))}g["default"]=a}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b.map(function(b,c){return{name:a[c].name,value:b}}));i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("ContextualConfigParseDenseResultParams")(a,b)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}g["default"]=a}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name;a=a.type;k(b);l(a);return{name:b,type:a}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(m(a),d("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(a){var b={};for(a of a){if(b[a.name])return!1;b[a.name]=!0}return!0},n=function(a){k(a.name);j(a.type);return a};function a(a){i(a);a=a.map(n);l(a);return a}g["default"]=a}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_VECTOR)},k=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(a,b){k(a.length,b.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=b[d];(i||(i=c("ContextualConfigParseResultParamValue")))(e,f)}},m=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){j(c);b=m(b);var d=a.length;k(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;l(a,c.slice(f,f+d))}return c}g["default"]=a}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,b,c){var e=null;a=a.map(function(a){var f=a.name,g={name:f};if(e!=null)return g;var i;c[f]!=null?i=c[f]:b[f]!=null?i=b[f]():i=null;g.value=i;if(a.buckets!=null){f=h(a.buckets,i);if(f==null){e=new Error(d("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return g}a=f[0];i=f[1];g.bucketName=a;g.bucketIndex=i}return g});return[e,a]}g["default"]=a}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},k=function(a,b,d,e){try{b=b.slice(d,d+a.length);return[null,c("ContextualConfigParseDenseResultParams")(a,b)]}catch(a){return[a,e]}},l=function(a,b,d){try{d=d.reduce(function(b,d,e){(h||(h=c("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return b+a[e]*d},0);return[null,d*b]}catch(a){return[a,-1]}};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);var d=c("ContextualConfigParseContexts")(a.contexts);this.aux=j(d);this.contexts=d;this.defaults=c("ContextualConfigParseDenseDefaults")(b,a.vectorDefaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=b;this.vector=c("ContextualConfigParseVector")(b,d,a.vector)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.aux,e=this.globalContextProviders,f=this.contexts,g=this.defaults,h=this.monitors,i=this.outputs,j=this.vector;f=c("ContextualConfigResolveContexts")(f,e,a);var m=f[0];f=f[1];if(m!=null)return[m,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=l(b,i.length,d("ContextualConfigResolvedContextsUtils").getBucketIndices(f));b=m[0];m=m[1];if(b!=null)return[b,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];b=k(i,j,m,g);i=b[0];j=b[1];if(i!=null)return[i,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=c("ContextualConfigResolveContexts")(h,e,a);g=m[0];b=m[1];return g!=null?[g,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,j,f,b]};return a}();g["default"]=a}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.values=c("ContextualConfigParseResultParams")(b,a.values)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.monitors,f=this.values;e=c("ContextualConfigResolveContexts")(e,b,a);b=e[0];a=e[1];return b!=null?[b,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();g["default"]=a}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(b of b)c[b.name]=b;b=[];for(a of a){var d=c[a.name];b.push(d!=null&&d.name===a.name&&d.type===a.type?d:a)}return b}f["default"]=a}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b);i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(a,b){j(b);var d=b.bucket;b=b.values;k(d);l(b);return{bucket:d,values:c("ContextualConfigParseResultParams")(a,b)}};function a(a,b){i(b);return b.reduce(function(b,c){c=m(a,c);b[c.bucket]=c.values;return b},{})}g["default"]=a}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){j(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.contexts=c("ContextualConfigParseContexts")(a.contexts);this.defaults=c("ContextualConfigParseDefaults")(b,a.defaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.table=c("ContextualConfigParseTable")(b,a.table)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.table;e=c("ContextualConfigResolveContexts")(e,b,a);var j=e[0];e=e[1];if(j!=null)return[j,f,e,[]];j=d("ContextualConfigResolvedContextsUtils").getBucketNames(e).join(d("ContextualConfigConstants").BUCKET_DELIMITER);h=h[j]||i;j=c("ContextualConfigMergePartialResultParams")(f,h);f=c("ContextualConfigResolveContexts")(g,b,a);h=f[0];g=f[1];return h!=null?[h,j,e,[]]:[null,j,e,g]};return a}();g["default"]=a}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[1],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a)&&d("ContextualConfigValidators").isDefined(a.version),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(i.indexOf(a)!==-1,d("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,b){j(a);k(a.version);switch(a.cctype){case d("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(c("DenseContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(c("MultiOutputResolvedContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(c("TableContextualConfig"))(a,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var b=a.prototype;b.get=function(a,b){try{a=this.$1[a];if(typeof a!==typeof b){c("ContextualConfigWarn")(d("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return b}return a}catch(a){c("ContextualConfigWarn")(a.message);return b}};b.getParams=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,d("ContextualConfigConstants").EMPTY_RESULT_PARAMS,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();g["default"]=a}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f,g){"use strict";var h=1/d("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,i=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var b=a.prototype;b.$5=function(){if(this.$1)return this.$1;var a=this.$2,b=this.$4;try{b=c("ContextualConfigParseConfig")(b,a)}catch(a){b=new(c("ErrorContextualConfig"))(a)}this.$1=b;return b};b.$6=function(a){var b=this.isDebugLoggingEnabled,e=this.$4,f=this.$3;f=!f&&d("Random").random()<h;f&&(this.$3=!0);e=c("ContextualConfigCollateExposureData")(e,a,f);a=c("ContextualConfigExposureLogger").createEvent(e);a.log(b)};b.resolve=function(a){a===void 0&&(a={});var b=this.$1||this.$5();b=b.resolve(a);this.$6(b);return new(c("ContextualConfigResult"))(b[i])};return a}();g["default"]=a}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.$6=e,this.$2=f,this.$7=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$8(a,b,null,j.INFO,c,d,e)};b.$8=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$7)return;(k(a)&&this.$1!=null||!k(a)&&this.$6!=null)&&c("DgwClientFalcoEvent").log(function(){var c;return{event:b,logging_id:(c=h)!=null?c:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.$6,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var b=a.prototype;b.waitForAck=async function(a,b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var c=this.$1;try{var e=await new Promise(function(d,e){c.set(a,new h(a,b,d))});e===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+b+"ms"));c.delete(a);return e}catch(b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");c.delete(a);throw b}};b.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};b.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e.delete(c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0"});function a(a){if(a==="TEST")return h.TEST;else if(a==="FACEBOOK")return h.FACEBOOK;else if(a==="INTERNALFB")return h.INTERNALFB;else if(a==="OCULUS")return h.OCULUS;else if(a==="ENTERPRISEFB")return h.ENTERPRISEFB;else if(a==="RECRUITINGFB")return h.RECRUITINGFB;else if(a==="INSTAGRAM")return h.INSTAGRAM;else if(a==="HORIZON_WEB")return h.HORIZON_WEB;else if(a==="SPARK_WEB")return h.SPARK_WEB;else if(a==="ABRA")return h.ABRA;else throw c("err")("failed to convert string ("+a+") to DGWAuth Type")}function d(a){if(a===h.FACEBOOK)return"FACEBOOK";else if(a===h.INTERNALFB)return"INTERNALFB";else if(a===h.OCULUS)return"OCULUS";else if(a===h.ENTERPRISEFB)return"ENTERPRISEFB";else if(a===h.RECRUITINGFB)return"RECRUITINGFB";else if(a===h.INSTAGRAM)return"INSTAGRAM";else if(a===h.HORIZON_WEB)return"HORIZON_WEB";else if(a===h.SPARK_WEB)return"SPARK_WEB";else if(a===h.ABRA)return"ABRA";else return"TEST"}g.DGWAuth=h;g.fromStringToDGWAuth=a;g.fromDGWAuthToString=d}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function j(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var k=null,l=null;function m(){l==null&&(l=Promise.resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){k=a}));return l}b=function(){function a(){}a.initialize=async function(){return m()};a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,k=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint,t=a.establishStreamFrame;a=a.trafficTracing;var u=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);t!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=j(t));o!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);k!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=k);a!==void 0&&(u[d("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+a);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(u,b)||(u[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(u);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete u[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(u));return f.toStringRawQuery()};return a}();e=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=async function(){return m()};var b=a.prototype;b.malloc=function(a){try{a=k.__malloc(a);if(a===0){var b;(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};b.free=function(a){k.__free(a)};b.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};b.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=k.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(i*4);if(f===-1)return;e=f;var g=e+i,h=g+i,j=h+i;b=k.__DgwCodecDecode(c,b,e,g,h,j);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null?void 0:h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=k.HEAPU32.subarray(j/i,j/i+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;j=k.HEAPU32.subarray(g/i,g/i+1)[0];c=k.HEAPU32.subarray(e/i,e/i+1)[0];var l=[];for(b=0;b<j;++b){var m=k.__getDGWFramePtr(c,b);h=k.__getFrameType(m);switch(h){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:g=function(){var b=k.__getDrainReasonFromDrainFrame(m),c=d("DGWConstants").drainReasonToDrainReasonString(b);(b=a.$2)==null?void 0:b.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+c);l.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:e=function(){var b=k.__getStreamIdFromStreamGroupFrame(m),c=k.__getEncodedParamsFromEstablishStreamFrame(m),d=new Uint8Array(k.HEAPU8.subarray(c,c+k.__getEncodedParamsSizeFromEstablishStreamFrame(m)));a.free(c);l.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEstablishStreamReceived(b,d)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:h=function(){var b=k.__getStreamIdFromStreamGroupFrame(m),c=k.__getDataFromGroupedStreamDataFrame(m),d=new Uint8Array(k.HEAPU8.subarray(c,c+k.__getDataSizeFromGroupedStreamDataFrame(m)));a.free(c);var e=k.__getRequiresAckFromGroupedStreamDataFrame(m)?k.__getAckIdFromGroupedStreamDataFrame(m):null;l.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamDataReceived(b,d,e)});return"break"}();if(h==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:g=function(){var b=k.__getStreamIdFromStreamGroupFrame(m),c=k.__getAckIdFromGroupedStreamAckFrame(m);l.push(function(){var d;return(d=a.$3)==null?void 0:d.onGroupedStreamAckReceived(b,c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:e=function(){var b=k.__getStreamIdFromStreamGroupFrame(m);l.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEndOfDataReceived(b)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:l.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:l.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}this.free(m)}this.free(f);for(h=0;h<l.length;h++)l[h]()};b.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=k.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(i*2);h=a;var j=a+i;e=k.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,j);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null?void 0:g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=k.HEAPU32.subarray(h/i,h/i+1)[0];c=k.HEAPU32.subarray(j/i,j/i+1)[0];f=new Uint8Array(k.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};b.encodeAck=function(a,b){var c=this.malloc(i*2);if(c===-1)return null;var e=c,f=c+i;b=k.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null?void 0:a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=k.HEAPU32.subarray(e/i,e/i+1)[0];b=k.HEAPU32.subarray(f/i,f/i+1)[0];e=new Uint8Array(k.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};b.encodeDrain=function(a){var b=this.malloc(i*2);if(b===-1)return null;var c=b,e=b+i;a=k.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=k.HEAPU32.subarray(c/i,c/i+1)[0];a=k.HEAPU32.subarray(e/i,e/i+1)[0];c=new Uint8Array(k.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};b.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=k.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(i*2);f=e;var g=e+i;b=k.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null?void 0:c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=k.HEAPU32.subarray(f/i,f/i+1)[0];b=k.HEAPU32.subarray(g/i,g/i+1)[0];a=new Uint8Array(k.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};b.encodeEndOfData=function(a){var b=this.malloc(i*2);if(b===-1)return null;var c=b,e=b+i;a=k.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=k.HEAPU32.subarray(c/i,c/i+1)[0];a=k.HEAPU32.subarray(e/i,e/i+1)[0];c=new Uint8Array(k.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};b.encodePing=function(){var a=this.malloc(i*2);if(a===-1)return null;var b=a,c=a+i,e=k.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=k.HEAPU32.subarray(b/i,b/i+1)[0];e=k.HEAPU32.subarray(c/i,c/i+1)[0];b=new Uint8Array(k.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);return b};b.encodePong=function(){if(this.$5!=null)return this.$5;var a=this.malloc(i*2);if(a===-1)return null;var b=a,c=a+i,e=k.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=k.HEAPU32.subarray(b/i,b/i+1)[0];e=k.HEAPU32.subarray(c/i,c/i+1)[0];b=new Uint8Array(k.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=j;g.DGWUtils=b;g.DGWCodec=e}),98);
__d("DGWExponentialBackoff",[],(function(a,b,c,d,e,f){"use strict";var g={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.errors=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));async function a(a,b){b===void 0&&(b=g);try{return await i(a,b)}catch(a){throw a.errors[a.errors.length-1]}}async function i(a,b){var c=0,d=[],e=b.baseRetryInterval,f=b.backoffFactor;while(c<=b.maxRetries){try{var g=await a();return g}catch(a){d.push(a)}await j(e*Math.pow(f,c));++c}throw new h("Max call count exceeded",d)}async function j(a){await new Promise(function(b){return window.setTimeout(b,a)})}f.callWithExponentialBackoff=a}),66);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportPingSent=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",a,!0)};b.transportPongReceived=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",a,!0)};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b,c){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b,c))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a.code+" reason: "+a.reason+" wasClean: "+String(a.wasClean)),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=b?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+c+", payloadSize:"+a,!0);this.$4.set(c,{ackRequested:b,payloadSize:a,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+((d=c)!=null?d:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(701242292,"2919");a=function(){function a(a,b,e,f,g,j,k){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=e,this.$8=f,this.$2=j,this.$9=g,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=k,this.$14=Date.now()+(Math.round(d("Random").random()*1e4)+1e4),(h||(h=c("QuickPerformanceLogger"))).markerStart(i,this.$14)}var b=a.prototype;b.send=async function(a,b){var c=this.$11++%d("DGWConstants").MAX_ACK_ID;a=this.$15(a,!0,c);if(!this.$16(a,!0,c))return!1;c=await this.$10.waitForAck(c,(a=b)!=null?a:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return c};b.sendFrame=async function(a,b,c){var e=this.$11++%d("DGWConstants").MAX_ACK_ID;b=this.$15(b,!0,e);if(b==null)return!1;var f=new Uint8Array(a.length+b.length);f.set(a);f.set(b,a.length);if(!this.$16(f,!0,e))return!1;a=await this.$10.waitForAck(e,(b=c)!=null?b:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a};b.sendAndForget=function(a){a=this.$15(a,!1,0);return this.$16(a,!1,0)};b.sendFrameAndForget=function(a,b){b=this.$15(b,!1,0);if(b==null)return!1;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return this.$16(c,!1,0)};b.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$17()};b.loggingContext=function(){return this.$9};b.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};b.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};b.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};b.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$18(b),this.$6.onDataReceived(a)};b.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};b.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};b.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)};b.__markerPoint=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,a,{instanceKey:b})};b.__markerAnnotate=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,a,{instanceKey:b})};b.__endMarker=function(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a,this.$14)};b.$15=function(a,b,c){return this.$2.encodeData(a,b,c,this.$1)};b.$16=function(a,b,c){this.__markerPoint("send_data_start");if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.__markerPoint("send_data_end");this.$12.dataSent(a.length,b,c);return!0};b.$18=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$2<=h)return this.$2++;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<=h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","QuickPerformanceLogger","Random","StreamIdGenerator","err","gkx","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(701238781,"3037"),j=c("gkx")("12124"),k=(a=c("qex")._("4494"))!=null?a:20,l=(b=c("qex")._("4495"))!=null?b:!1,m=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};e=function(){function a(b,e,f,g,j,k,l,m){var n=this;this.$18=-1;this.$15=j;this.$17=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$9=!1;this.$3=!0;this.$4=!1;this.$21=!1;this.$22=!1;this.$13=f;this.$11=new TextEncoder();this.$12=new TextDecoder();this.$14=g;j={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){n.$9||(n.$9=!0,n.$15(),n.$13.transportClosed(!0,""),n.$14.streamGroupCallbacks.onStreamGroupMustDrain(a),n.$5.forEach(function(b){b.__drainReceivedHook(a)}),n.onClose(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(a,b,c){if(n.$5.has(a)){var d=n.$5.get(a);d==null?void 0:d.__dataReceivedHook(b,c)}else{n.$13.receivedFrameForInactiveStream("Data",a,"sendAckID: "+((d=c)!=null?d:"null"))}},onGroupedStreamAckReceived:function(a,b){if(n.$5.has(a)){var c=n.$5.get(a);c==null?void 0:c.__ackReceivedHook(b)}else{n.$13.receivedFrameForInactiveStream("ACK",a,"ackId: "+((c=b)!=null?c:"null"))}},onGroupedStreamEndOfDataReceived:function(a){if(n.$5.has(a)){var b=n.$5.get(a);b==null?void 0:b.__endOfDataHook()}else n.$13.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(n.$6.has(a)){var c=n.$6.get(a);n.$6.delete(a);b=JSON.parse(n.$12.decode(b));(b.code===void 0||b.code!==200)&&(c==null?void 0:c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null?void 0:c.handleEstablishFrameReceived()}else n.$13.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=n.$2.encodePing();if(a==null)return;n.send(a)},onPongReceived:function(){n.$3=!1,n.$22||(n.$22=!0,n.__markerPoint("auth_success")),n.$13.transportPongReceived("readyState:"+n.$1.readyState+", bufferedAmount:"+n.$1.bufferedAmount)}};this.$2=new(d("DGWUtils").DGWCodec)(k,j,g.dgwVersion);this.$20=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);if(g.enableFirstStreamOnWsHandshake){if(l===void 0)throw c("err")("Missing grouped stream options");if(m===void 0)throw c("err")("Missing grouped stream callbacks");var o=this.$17.getNextStreamId();f=this.createEstablishStreamFrame(o,l);j=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(k=g.deviceId)!=null?k:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(j=g.loggingId)!=null?j:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(k=g.regionHint)!=null?k:void 0,establishStreamFrame:f});this.$1=e(j);if(!j.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;g=new(d("DGWLoggingContext").DGWLoggingContext)(this.$14.dgwVersion,l.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,l.disableFalcoLogging);k=this.__createGroupedStream(o,m,l,g);this.$16=this.waitForEstablishStream(o,k,l,function(a){n.$5.set(o,a)},function(){n.$17.putBackStreamId(o)})}else this.$1=e(b);(h||(h=c("QuickPerformanceLogger"))).markerStart(i,this.$20);this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var b=a.prototype;b.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};b.close=function(){this.onClose()};b.onClose=function(a){var b;this.__markerPoint("abort");this.__markerAnnotate({int:{abort_code:(b=a)!=null?b:0}});this.$8=!0;(b=this.$10)==null?void 0:b.cancel();this.$1.close(a)};b.abort=function(a,b,c,d,e){if(this.$8)return;this.$8=!0;this.$13.transportClosed(!1,d,e);this.$5.forEach(function(a){a.__transportCloseHook(b)});this.$6.forEach(function(a){a.abortStream(b)});this.$14.streamGroupCallbacks.onStreamGroupError(a);this.$5.clear();this.$6.clear();this.$15();this.onClose(c)};a.getTransportWithInitialStream=async function(b,c,e,f,g,h){await d("DGWUtils").DGWCodec.initialize();var i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();var j=function(){return a.$23("",e,i,g,f,b,c)};try{j=await d("DGWExponentialBackoff").callWithExponentialBackoff(j,h);h=j.$16!=null?j.$16:j.establishGroupedStream(c,b,new(d("DGWLoggingContext").DGWLoggingContext)(e.dgwVersion,b.loggingId,e.serviceId,e.fbId,e.loggingId,b.disableFalcoLogging));return{transport:j,streamPromise:h}}catch(a){throw a}};a.getTransport_DEPRECATED=async function(b,c,e,f,g){await d("DGWUtils").DGWCodec.initialize();var h=new(d("DGWTransportEvents").DGWTransportEvents)(e);h.transportEstablishmentPending();var i=function(){return a.$23(b,c,h,f,e)};try{return await d("DGWExponentialBackoff").callWithExponentialBackoff(i,g)}catch(a){throw a}};b.establishGroupedStream=async function(a,b,d,e,f,g){var h=this;f===void 0&&(f=!0);var i=this.getStreamId(),j=this.createEstablishStreamFrame(i,b);a=this.__createGroupedStream(i,a,b,d);a.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:b.streamTraceId}});g!=null&&a.__markerAnnotate(g);d=this.waitForEstablishStream(i,a,b,function(a){h.$5.set(i,a)},function(){h.$17.putBackStreamId(i)});if(e!=null){a.__markerPoint("send_payload_start");a.__markerAnnotate({int:{establishStreamPayloadSize:e.byteLength}});g=f?await a.sendFrame(j,e):a.sendFrameAndForget(j,e);if(!g){a.__endMarker(3);return Promise.reject("Failed to send data when establishing stream")}a.__markerPoint("send_payload_end");a.__endMarker(2);return Promise.resolve(a)}a.__markerPoint("send_establish_stream_start");if(!this.send(j)){a.__endMarker(3);throw c("err")("Websocket connection closed before stream established")}a.__markerPoint("send_establish_stream_end");b=await d;a.__endMarker(2);return b};a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};b.waitForEstablishStream=async function(a,b,c,d,e){var f=this;this.$13.streamEstablishmentPending(a,c.loggingId);try{var g=await new Promise(function(c,d){f.$6.set(a,new m(b,c,d,3e4,function(){f.streamEndCallback(a)}))});d(b);this.$13.streamEstablishmentSuccess(a,c.loggingId);return g}catch(b){e();this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,c.loggingId);throw b}};a.$23=async function(b,c,e,f,g,h,i){var k=new a(b,d("DGWWebSocketTransport").getWebSocketConnection,e,c,f,g,h,i);k.$1.onmessage=a.$24(k);k.$1.onopen=function(){k.__markerPoint("onopen"),e.transportEstablished(b),k.$10!=null&&k.$10.cancel(),k.$7!=null&&(k.$10=new(d("DGWPinger").DGWPinger)(k.$7,function(){k.$25()},function(){if(k.$18===0&&j){var a;(a=k.$10)==null?void 0:a.reset()}else k.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+k.$1.readyState+", bufferedAmount:"+k.$1.bufferedAmount)}))};k.$1.onerror=function(){k.__markerPoint("onerror"),k.$13.transportError("onerror","readyState: "+k.$1.readyState)};k.$1.onclose=a.$26(k);c=await a.getTransportPromise(k);return c};a.getTransportPromise=async function(a){var b=await new Promise(function(b,c){var e=a.$1.onerror,f=a.$1.onmessage,g=a.$1.onclose;a.$19=window.setTimeout(function(){a.$15(),a.$13.transportClosed(!1,"TIMEOUT"),a.__markerPoint("connect_timeout"),a.close(),c(d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},k*1e3);a.$1.onerror=function(){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),e(),l||c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(b){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),g(b),b.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(b.code+":"+b.reason)};a.$1.onmessage=function(c){f(c),a.$19!=null&&!a.$3&&(window.clearTimeout(a.$19),a.$19=null,a.__markerPoint("connect_success"),b(a))}});return b};a.$24=function(a){return function(b){var c;a.$21||(a.$21=!0,a.__markerPoint("onmessage"));(c=a.$10)==null?void 0:c.reset();if(!(b.data instanceof ArrayBuffer)){a.$13.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$26=function(a){return function(b){var c;a.__markerPoint("onclose");a.__markerAnnotate({string:{reason:b.reason},int:{code:b.code}});a.__endMarker(b.code===d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3);(c=a.$10)==null?void 0:c.cancel();if(a.$8===!0||a.$4)return;a.$8=!0;if(a.$3===!0){a.$13.transportEstablishmentFailure(b);a.$5.clear();a.$15();return}a.$15();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$13.transportClosed(!1,"Websocket connection failure with code: "+b.code+" reason: "+b.reason+" wasClean: "+String(b.wasClean));c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$14.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$13.transportClosed(!0,""),a.$14.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};b.$25=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");var b=this.send(a);this.$18=this.$1.bufferedAmount;this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(a==null?void 0:a.byteLength)+", sent:"+String(b))};b.isClosedLocally=function(){return this.$3||this.$8||this.$4};b.streamEndCallback=function(a){this.$5.delete(a),this.$6.delete(a),this.$17.putBackStreamId(a)};b.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()};b.createEstablishStreamFrame=function(b,e){var f=a.__prefixAppHeaders(e.groupedStreamHeaders);e.streamTraceId!=null&&(f[d("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=e.streamTraceId);e=this.$2.encodeEstablishStream(b,new Uint8Array(this.$11.encode(JSON.stringify(f))));if(e==null){this.$17.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return e};b.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(a){this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};b.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};b.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};b.__markerPoint=function(a){var b=this.$20;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,a,{instanceKey:b})};b.__markerAnnotate=function(a){var b=this.$20;(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,a,{instanceKey:b})};b.__endMarker=function(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a,this.$20)};return a}();g.StreamGroupWebSocketTransport=e}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,c,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;this.$5=null;this.$3={appId:a,appVersion:b,authType:c,deviceId:h.deviceId,dgwVersion:e,headers:h.streamGroupAppHeaders,tier:(f=h.serviceTier)!=null?f:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:j,fbId:g,loggingId:h.loggingId,serviceId:h.serviceId,streamGroupCallbacks:i,keepAliveMs:h.keepAliveMs,regionHint:h.regionHint,enableFirstStreamOnWsHandshake:!1};this.$4=h;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=h.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(c=this.$3.loggingId)!=null?c:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0,trafficTracing:(f=this.$4.trafficTracing)!=null?f:void 0})}var b=a.prototype;b.initTransport=async function(){var b=this,a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){b.$2.removeStreamGroupAndTransport(b.$1)},a);var c;try{c=await this.$5,this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,c);return c};b.establishStream=async function(a,b,c,e,f){var g=this;if(this.$2.containsStreamGroup(this.$1)===!1){this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(!this.$3.enableFirstStreamOnWsHandshake){this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);var i;try{i=await this.$5,this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,i)}else{var j=await d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,b,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);this.$2.setStreamGroupAndTransport(this.$1,j.transport);return j.streamPromise}}return this.establishStreamWithTransport(a,b,c,e,f)};b.establishStreamWithTransport=async function(a,b,c,e,f){var g=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(c!=null),!0,g);g=await this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(b,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,g,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(b=a.verboseLoggingEnabled)!=null?b:!1),c,e,f);return g};b.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};b.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){this.handleUserChecks();return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(){if(!c("CurrentUser").isLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e,f){var g={};for(a of Object.entries(a)){var h=a[0],i=a[1];typeof i=="string"?g["XRSS-"+h]=i:typeof i=="number"?g["XRSN-"+h]=i.toString():typeof i=="boolean"?g["XRSB-"+h]=i.toString():typeof i=="object"&&i!=null&&(g["XRSO-"+h]=c("Base64").encode(JSON.stringify(i)))}d&&(g["xrs-body"]="true");e!=null&&e.length>0&&(g["xrs-instrumentation"]=c("Base64").encode(e));g["XRS-Accept-Ack"]="RSAck";f!=null&&f.ackTimeoutSec!=null&&(g["XRS-SRAck-Timeout"]=f.ackTimeoutSec.toString());g["XRSS-http_referer"]=window.location.href;if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){h=b("cr:3024")==null?void 0:b("cr:3024").get();h!=null&&(g["XRSB-is_test"]="true",g["XRSS-original_request_id"]=h)}return g}function h(a){return Object.keys(a).reduce(function(b,c){(typeof a[c]==="string"||typeof a[c]==="boolean"||typeof a[c]==="number"||typeof a[c]==="object")&&(b[c]=a[c]);return b},{})}function d(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return{auxId:a.auxId,dfTraceId:(a=a.dataFlowTracingData)==null?void 0:a.traceId}}catch(a){}return null}function e(a,b){var c=a.headers;a=a.body;b.kill_body===!0&&(a=null);b.new_body!=null&&(a=b.new_body);if(b.new_headers!=null)try{c=h(JSON.parse(b.new_headers))}catch(a){}if(b.patch_headers!=null)try{c=babelHelpers["extends"]({},c,h(JSON.parse(b.patch_headers)))}catch(a){}return{headers:c,body:a}}g.convertHeaders=a;g.cleanHeaders=h;g.getInstrumentationDataFieldsFromPayload=d;g.transformContextWithRewriteDelta=e}),98);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=e,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){if(!this.$1)return;this.$6(a)};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();f["default"]=a}),66);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f,g){"use strict";var h="inflight_amends_timeout",i="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var b=a.prototype;b.add=function(a){var b=this;if(this.$2.has(a))throw c("err")(i);var d=new(c("Deferred"))(),e=Date.now(),f=setTimeout(function(){b.$2.has(a)&&b.reject(a,c("err")(h))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};b.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};b.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null?void 0:a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};b.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null?void 0:a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};b.rejectAll=function(a){for(var b of this.$2.entries()){var c=b[0];b[1];this.reject(c,a)}};b.getSize=function(){return this.$2.size};b.getAllPromises=function(){var a=[];for(var b of this.$2.values())a.push(b.deferred.getPromise());return a};b.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};b.$5=function(a){return this.$2.get(a)};return a}();g["default"]=a}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{expected_existing_headers:"",patch_headers_if_match:""}}function e(){return{bytes:Uint8Array.of()}}function f(){return{message:""}}function i(){return{reason:d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function j(){return{}}function k(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function l(){return{caller_timestamp_ms:"0"}}function m(){return{original_ping_timestamp_ms:"0"}}function n(){return{}}function o(a,b){b.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(b.writeFieldBegin({fname:"new_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.new_headers),b.writeFieldEnd()),a.new_body!=null&&(b.writeFieldBegin({fname:"new_body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.new_body),b.writeFieldEnd()),a.patch_headers!=null&&(b.writeFieldBegin({fname:"patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers),b.writeFieldEnd()),a.kill_body!=null&&(b.writeFieldBegin({fname:"kill_body",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.kill_body),b.writeFieldEnd()),a.temporary!=null&&(b.writeFieldBegin({fname:"temporary",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:5}),b.writeBool(a.temporary),b.writeFieldEnd()),a.conditional_patch_headers!=null&&(b.writeFieldBegin({fname:"conditional_patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),p(a.conditional_patch_headers,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function p(a,b){b.writeStructBegin("ResponseRewriteConditionalPatchHeaders");b.writeFieldBegin({fname:"expected_existing_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.expected_existing_headers!=null)b.writeString(a.expected_existing_headers);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"patch_headers_if_match",ftype:h.STRING,fid:2});if(a.patch_headers_if_match!=null)b.writeString(a.patch_headers_if_match);else{d="";b.writeString(d)}b.writeFieldEnd();a.patch_headers_otherwise!=null&&(b.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers_otherwise),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ResponseData");b.writeFieldBegin({fname:"bytes",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bytes!=null)b.writeBinary(a.bytes);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.metadata!=null&&(b.writeFieldBegin({fname:"metadata",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.metadata),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("LogMessage");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Termination");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.message!=null&&(b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.message),b.writeFieldEnd());a.retry_delay_ms!=null&&(b.writeFieldBegin({fname:"retry_delay_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(c("jsbi").BigInt(a.retry_delay_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd()),a.accepted!=null&&(b.writeFieldBegin({fname:"accepted",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:2}),b.writeBool(a.accepted),b.writeFieldEnd()),a.result!=null&&(b.writeFieldBegin({fname:"result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.result),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function u(a,b){b.writeStructBegin("StreamCheck");b.writeFieldBegin({fname:"stream_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.stream_id!=null)b.writeI64(c("jsbi").BigInt(a.stream_id));else{var e="0";b.writeI64(c("jsbi").BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"last_sequencer",ftype:h.I32,fid:2});if(a.last_sequencer!=null)b.writeI32(a.last_sequencer);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"amendment_count",ftype:h.I32,fid:4});if(a.amendment_count!=null)b.writeI32(a.amendment_count);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"last_status",ftype:h.I32,fid:3});if(a.last_status!=null){b.writeI32((e=a.last_status)!=null?e:0)}else{a=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("Ping");b.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.caller_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.streams_to_check!=null){b.writeFieldBegin({fname:"streams_to_check",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.streams_to_check.length});for(d of a.streams_to_check)u(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("Pong");b.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.original_ping_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.stream_ids_missing!=null){b.writeFieldBegin({fname:"stream_ids_missing",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I64,size:a.stream_ids_missing.length});for(d of a.stream_ids_missing)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_behind!=null){b.writeFieldBegin({fname:"stream_ids_behind",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:3});b.writeListBegin({etype:h.I64,size:a.stream_ids_behind.length});for(d of a.stream_ids_behind)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_lost_amendments!=null){b.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_lost_amendments.length});for(d of a.stream_ids_with_lost_amendments)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_wrong_status!=null){b.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_wrong_status.length});for(d of a.stream_ids_with_wrong_status)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;b.writeFieldBegin({fname:"flow_status",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.flow_status)!=null?d:0);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.log!=null){b.writeFieldBegin({fname:"log",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});r(a.log,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.rewrite!=null){b.writeFieldBegin({fname:"rewrite",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});o(a.rewrite,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.data!=null){b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});q(a.data,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.termination!=null){b.writeFieldBegin({fname:"termination",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});s(a.termination,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend_ack!=null){b.writeFieldBegin({fname:"amend_ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});t(a.amend_ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.new_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.new_body=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.kill_body=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).BOOL?b.temporary=a.readBool():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conditional_patch_headers=z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.expected_existing_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_if_match=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_otherwise=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.expected_existing_headers===void 0&&(b.expected_existing_headers="");b.patch_headers_if_match===void 0&&(b.patch_headers_if_match="");return b}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bytes=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bytes===void 0&&(b.bytes=Uint8Array.of());return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");return b}function C(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.retry_delay_ms=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.accepted=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.stream_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.last_sequencer=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.amendment_count=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stream_id===void 0&&(b.stream_id="0");b.last_sequencer===void 0&&(b.last_sequencer=0);b.amendment_count===void 0&&(b.amendment_count=0);b.last_status===void 0&&(b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.caller_timestamp_ms===void 0&&(b.caller_timestamp_ms="0");return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_behind=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(f=0;f<d.size;f++){g=a.readI64().toString();b.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_wrong_status=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.original_ping_timestamp_ms===void 0&&(b.original_ping_timestamp_ms="0");return b}function H(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).I32)if(b==null)e.flow_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),b="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.log=B(a),b="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.rewrite=y(a),b="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.data=A(a),b="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.termination=C(a),b="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend_ack=D(a),b="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.ResponseRewriteRequest$DefaultConstructor=a;g.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=b;g.ResponseData$DefaultConstructor=e;g.LogMessage$DefaultConstructor=f;g.Termination$DefaultConstructor=i;g.AmendStreamAck$DefaultConstructor=j;g.StreamCheck$DefaultConstructor=k;g.Ping$DefaultConstructor=l;g.Pong$DefaultConstructor=m;g.StreamResponseDelta$DefaultConstructor=n;g.serializeResponseRewriteRequest=o;g.serializeResponseRewriteConditionalPatchHeaders=p;g.serializeResponseData=q;g.serializeLogMessage=r;g.serializeTermination=s;g.serializeAmendStreamAck=t;g.serializeStreamCheck=u;g.serializePing=v;g.serializePong=w;g.serializeStreamResponseDelta=x;g.deserializeResponseRewriteRequest=y;g.deserializeResponseRewriteConditionalPatchHeaders=z;g.deserializeResponseData=A;g.deserializeLogMessage=B;g.deserializeTermination=C;g.deserializeAmendStreamAck=D;g.deserializeStreamCheck=E;g.deserializePing=F;g.deserializePong=G;g.deserializeStreamResponseDelta=H}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{body:Uint8Array.of()}}function e(){return{amendment:Uint8Array.of()}}function f(){return{ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function i(){return{delta:[]}}function j(){return{}}function k(a,b){b.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(b.writeFieldBegin({fname:"headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.headers),b.writeFieldEnd()),a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function l(a,b){b.writeStructBegin("RequestStreamBody");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeBinary(a.body);else{a=Uint8Array.of();b.writeBinary(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a,b){b.writeStructBegin("AmendStream");a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"amendment",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.amendment!=null)b.writeBinary(a.amendment);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.is_query!=null&&(b.writeFieldBegin({fname:"is_query",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3}),b.writeBool(a.is_query),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function n(a,b){b.writeStructBegin("StreamResponseAck");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.ack!=null){var e;b.writeI32((e=a.ack)!=null?e:0)}else{e=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.query_result!=null&&(b.writeFieldBegin({fname:"query_result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.query_result),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("StreamResponse");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"delta",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.delta!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.delta.length});for(var e of a.delta)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}b.writeFieldEnd();if(a.ack_level!=null){b.writeFieldBegin({fname:"ack_level",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.ack_level)!=null?e:0);b.writeFieldEnd()}a.query_request!=null&&(b.writeFieldBegin({fname:"query_request",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.query_request),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("Payload");if(a.request_headers!=null){b.writeFieldBegin({fname:"request_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});k(a.request_headers,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.request_body!=null){b.writeFieldBegin({fname:"request_body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});l(a.request_body,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend!=null){b.writeFieldBegin({fname:"amend",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});m(a.amend,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ack!=null){b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});n(a.ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.response!=null){b.writeFieldBegin({fname:"response",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});o(a.response,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ping!=null){b.writeFieldBegin({fname:"ping",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});d("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.pong!=null){b.writeFieldBegin({fname:"pong",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7});d("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function q(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.headers=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function r(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body=Uint8Array.of());return b}function s(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.amendment=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.is_query=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.amendment===void 0&&(b.amendment=Uint8Array.of());return b}function t(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.query_result=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.ack===void 0&&(b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return b}function u(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.delta=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);b.delta.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.ack_level=d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.query_request=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.delta===void 0&&(b.delta=[]);return b}function v(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_headers=q(a),b="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_body=r(a),b="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend=s(a),b="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ack=t(a),b="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.response=u(a),b="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ping=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),b="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+b);else a.skip(g);break;case 7:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.pong=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),b="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.RequestStreamHeaders$DefaultConstructor=a;g.RequestStreamBody$DefaultConstructor=b;g.AmendStream$DefaultConstructor=e;g.StreamResponseAck$DefaultConstructor=f;g.StreamResponse$DefaultConstructor=i;g.Payload$DefaultConstructor=j;g.serializeRequestStreamHeaders=k;g.serializeRequestStreamBody=l;g.serializeAmendStream=m;g.serializeStreamResponseAck=n;g.serializeStreamResponse=o;g.serializePayload=p;g.deserializeRequestStreamHeaders=q;g.deserializeRequestStreamBody=r;g.deserializeAmendStream=s;g.deserializeStreamResponseAck=t;g.deserializeStreamResponse=u;g.deserializePayload=v}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:if(a.seenAccepted)return a;return a.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?a:{flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===b)return a;else return{flowStatus:b,seenAccepted:!0}}}g.getNextState=a}),98);
__d("StreamRetryState",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=2*60*1e3;a=function(){function a(){this.$1=0}var b=a.prototype;b.resetErrorAndRetryCount=function(){this.$1=0};b.onRetry=function(){this.$1+=1};b.getRetryCount=function(){return this.$1};b.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return g*Math.random();var a=g*Math.pow(2,this.$1-3),b=a*Math.random();a=a+b;return Math.min(a,h)};return a}();f["default"]=a}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","err","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4,j=0,k=1e3,l=2,m=c("gkx")("20915")?3e4:5e3,n="dgw_stream_send_ack_failure",o=(a=c("qex")._("1382"))!=null?a:!1,p=(b=c("qex")._("2067"))!=null?b:!1;function q(a){if(!a){a=c("err")(n);a.stack;throw a}}function r(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}function s(a){var b={};a=a.delta;a.forEach(function(a){if(a.flow_status){b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status;switch(a.flow_status){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b.flow_status="Accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b.flow_status="Started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b.flow_status="Stopped";break}}else a.log?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:a.rewrite?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:a.data?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:a.termination?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:a.amend_ack&&(b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)});return b}e=function(){function a(a,b,e,f,g,h){var j=this;this.$6=null;this.$7={};this.$10=!1;this.$15=new(c("StreamRetryState"))();this.$16=0;this.$17=0;this.$18=0;this.$21=0;var k=null;typeof b==="string"?k=new TextEncoder().encode(b):typeof b==="object"&&(k=b);this.$1={headers:a,body:k};this.$3=e;this.$4=f;this.$12=i;this.$9=!1;this.$14=!1;this.$20=h;k=f==null?void 0:f.serviceId;g!=null&&(this.$22()||(g.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(k)),g.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(k),g.transport="WEB_RS_STARGATE");this.$5=d("RequestStreamE2ESampling").validateInstrumentationData(a,g,f==null?void 0:f.requestLogContext,f==null?void 0:f.upsampleMultiplier);!this.$22()?this.$6=d("RequestStreamE2ELogger").createStreamLogger(a,this.$5,d("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE):this.$7.disableFalcoLogging=!0;(f==null?void 0:f.deviceId)!=null&&(this.$7.deviceId=f.deviceId);this.$6&&(this.$7.loggingId=this.$6.getRequestId());f&&f.overrideUrl!=null&&(this.$7.overrideUrl=f.overrideUrl);k!=null&&(this.$7.serviceId=k);this.$8={flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$19=new(c("InflightAmends"))(m,function(a,b){var d;(d=j.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},j.$23(),{latency:b.toString()}),a)},function(a,b){if(b.message!==n){var d;(d=j.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},j.$23(),{reason:b.message}),a)}});(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(g=b==null?void 0:(h=b.length)==null?void 0:h.toString())!=null?g:"0"},"0","0")}var b=a.prototype;b.getInstrumentationData=function(){return this.$5};b.getE2EClientLogger=function(){return this.$6};b.amendWithAck=function(a){a=this.$24(a,!0);return a==null?Promise.resolve(!1):this.$19.getPromise(a)||Promise.resolve(!1)};b.amendWithoutAck=function(a){this.$24(a,!1)};b.cancel=function(){var a;(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};b.start=function(a){var b=this;a===void 0&&(a=!1);var e=String(this.$16++),f=Date.now();return this.$26(e).then(function(){var a;b.$14=!1;b.$21=0;var d=(Date.now()-f).toString();(a=b.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:d},e,String(b.$18))}).catch(function(f){f.stack;if(f.message===n&&b.$10)return;b.$14=!1;if(f!==d("DGWStream").StreamError.ESTABLISHMENT_ERROR){var g,h=f.message;f===d("DGWStream").StreamError.UNAUTHENTICATED?h="UNAUTHENTICATED":f===d("DGWStream").StreamError.UNAUTHORIZED&&(h="UNAUTHORIZED");(g=b.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:h},e,String(b.$18));b.$25(a?d("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:d("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,h,!0);if(f===d("DGWStream").StreamError.UNAUTHENTICATED||f===d("DGWStream").StreamError.UNAUTHORIZED)return;throw f}else{(g=b.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(h=f.message)!=null?h:f},e,String(b.$18));b.$15.onRetry();var i=c("gkx")("20916")?b.$15.getBackoffDelayMs():k*Math.pow(l,b.$21);return new Promise(function(a){return window.setTimeout(a,i)}).then(function(){b.$21++;b.$18++;return b.start()})}})};b.getFlowStatus=function(){return this.$8.flowStatus};b.shouldTerminateOrRetry=function(a,b,e,f){var g=this;if(this.$14)return;var h=b;this.$12||(h="cannot retry for error: "+b+" because of hit max retry limitation");if(a!==d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){(b=this.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:h},null,String(this.$18))}b=e&&(c("gkx")("20916")||this.$12);this.$25(a,h,!b);if(b){var i=c("gkx")("20916")?Math.max((e=f)!=null?e:0,this.$15.getBackoffDelayMs()):(a=f)!=null?a:j;this.$14=!0;return new Promise(function(a){return window.setTimeout(a,i)}).then(function(){return g.$27()}).catch(function(a){})}};b.$28=function(){return this.$11!=null};b.$24=function(a,b){var e,f=this,g=typeof a==="string"?new TextEncoder().encode(a):a,h=String(this.$17++);(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{},h);e=r(this.$5,h);g={amend:{amendment:g,instrumentation_data:e}};b&&g.amend&&(g.amend.amendment_id=h);e=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var i=Date.now();if(this.$29()&&this.$11!=null){b&&this.$19.add(h);this.$11.send(e).then(function(a){var b;q(a);a=(Date.now()-i).toString();(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},h)}).catch(function(a){var b;(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},h);f.$19.reject(h,a)});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(e=a==null?void 0:(b=a.length)==null?void 0:b.toString())!=null?e:"0"},h);return h}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},h)}};b.$26=async function(a){var b=this;if(!this.$9){var e=this.$2||this.$1;try{var f=this.$30();this.$13=f;var g=e.headers.graphiql_sandbox,h=babelHelpers.extends({},e.headers,this.$31());g!=null&&(h=babelHelpers.extends({},h,{www_sandbox:g,distillery_sandbox:g+":8086"}));g=d("DGWRequestStreamUtils").convertHeaders(h,e.body!=null,this.$5);this.$11=await this.$20.establishStream(g,f,this.$7)}catch(a){if(a===d("DGWStream").StreamError.ESTABLISHMENT_ERROR)throw a;if(d("DGWStream").StreamError.isValid(a)&&!d("DGWStream").isRetryableError(a))throw a;else if(d("DGWStream").StreamError.isValid(a)&&d("DGWStream").isRetryableError(a)){this.$32(a);return}throw a}if(this.$9){this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}h=new Uint8Array([]);if(e.body!=null){g={request_body:{body:e.body}};h=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");f=this.$11.send(h).then(function(a){q(a),b.$9&&b.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").SENT,{},a,String(this.$18));this.$12=i;return f}else throw new Error("stream_already_canceled")};b.$29=function(){return this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};b.$25=function(a,b,c){var e;this.$11&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null?void 0:e.stop();this.$11=null;this.$10=!0;this.$33(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);c&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+b)};b.$33=function(a){var b=this.$8;this.$8=d("RequestStreamState").getNextState(b,a);return b!==this.$8};b.$27=function(){this.$12--;this.$18++;this.$15.onRetry();return this.start(!0)};b.$34=function(a){var b=this;a=d("CompactSerializerPolyfill").deserialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var e=d("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(a),f=e==null?void 0:e.auxId;e=e==null?void 0:e.dfTraceId;if(!this.$28()){var g;(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},f,String(this.$18),e);return}(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,s(a.response),f,String(this.$18),e);g=a.response.delta;g.forEach(function(a){if(a.data)b.$15.resetErrorAndRetryCount(),c("justknobx")._("4109")?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):b.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):(h||(h=d("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(b.$22()?"falco":"graphql"));else if(a.flow_status){var e=a.flow_status;e===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$15.resetErrorAndRetryCount();b.$33(e)&&b.$3.onFlowStatus(e)}else if(a.termination){e=(e=a.termination.message)!=null?e:"unknown termination msg";b.$2=null;b.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,e,a.termination.reason===d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)b.$3.onLog(a.log.message);else if(a.amend_ack){e=a.amend_ack.amendment_id;if(e!=null){var f=a.amend_ack.accepted||!1;b.$19.resolve(e,f)}}else if(a.rewrite){e=d("DGWRequestStreamUtils").transformContextWithRewriteDelta(b.$1,a.rewrite);a.rewrite.temporary===!0?b.$2=e:b.$1=e}});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,s(a.response),f,String(this.$18),e);a.response.ack_level===d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$35(a.response.response_id,f)}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}};b.$35=function(a,b){a={ack:{response_id:a,ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=d("CompactSerializerPolyfill").serialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").SENT,{},b,String(this.$18))}else{(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},b,String(this.$18))}};b.$22=function(){return this.$1.headers.method==="Falco"};b.$30=function(){return new(c("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))};b.$39=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)};b.$36=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};b.$37=function(a){try{this.$34(a)}catch(b){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:b.message},null,String(this.$18));this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,b.message,!1)}};b.$32=function(a){var b="",c=d("DGWStream").isRetryableError(a);b="StreamError: Received "+a;c=o&&a===d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT?this.$12>0:c;a=p&&a===d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT?k*l:void 0;this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,b,c,a)};b.$38=function(a,b){this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,b,!0)};b.$31=function(){return c("RtiWebRequestStreamClient").overrideHeaders};b.$23=function(){var a={};c("gkx")("20918")&&(a.pending_amendments_size=this.$19.getSize().toString());return a};return a}();g.default=e}),98);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.onStreamGroupError=function(a){this.$1(a)};b.onStreamGroupMustDrain=function(a){this.$2(a)};b.onStreamGroupTransportClose=function(){this.$3()};return a}();f["default"]=a}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="realtime",j=1e4,k=null;a=function(){function a(){this.$1={}}a.get=function(){k==null&&(k=new a());return k};var d=a.prototype;d.$2=function(a){var b;this.$1=(b={},b[a]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},b)};d.getStreamGroupLoggingId=function(a){a===void 0&&(a=null);return(a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupLoggingId};d.guessStreamGroupPriorStreamCount=function(a){a===void 0&&(a=null);return((a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupPriorStreamCountGuess)||0};d.establishStream=function(a,d,e){var f,g=this,k=e.serviceId==null?i:e.serviceId;f=(f=this.$1[k])==null?void 0:f.dgwStreamGroup;if(f==null||!f.canCreateGroupedStream()){var l={deviceId:e.deviceId,serviceId:k,disableFalcoLogging:e.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"}};e.overrideUrl!=null&&(l.overrideUrl=e.overrideUrl);l.keepAliveMs=j;c("gkx")("20920")&&(l.loggingId=c("uuidv4")());try{f=c("DGWClient")().createStreamGroup(new(c("DGWStreamGroupHandler"))(function(){g.$2(k)},function(){g.$2(k)},function(){g.$2(k)}),l),this.$1[k]={dgwStreamGroup:f,multiStreamGroupLoggingId:l.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(a){return(h||(h=b("Promise"))).reject(a)}}this.$1[k].multiStreamGroupPriorStreamCountGuess++;return f.establishStream({loggingId:e.loggingId,disableFalcoLogging:e.disableFalcoLogging,groupedStreamHeaders:a},d)};return a}();g["default"]=a}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a!=null?a:c("DGWStreamFactory").get()}var d=a.prototype;d.createStream=function(a,d,e,f,g){b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return(h||(h=b("Promise"))).resolve(new(c("DGWRequestStreamRef"))(a,d,f,g,e,this.$1))};return a}();g["default"]=a}),98);
__d("FDSDialogStartAlignedTextHeader.react",["fbt","BaseDialogLabelIDProvider","FBNucleusCrossFilled24Icon.react","FDSCircleButton.react","FDSDialogHeaderContainer.react","FDSText.react","emptyFunction","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={addOnEnd:{alignSelf:"xqcrz7y",marginTop:"x14vqqas",marginBottom:"xod5an3",marginInlineStart:"xyqm7xq",marginInlineEnd:"x1ys307a",marginLeft:null,marginRight:null,$$css:!0},headerPlaceholder:{height:"xc9qbxq",marginTop:"xw7yly9",marginBottom:"x1yztbdb",width:"x14qfxbe",$$css:!0},headerText:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",marginLeft:"xq1n1xh",marginInlineStart:null,marginInlineEnd:null,$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(12),e=a.closeTestID,f=a.disabled,g=a.onClose,i=a.text,l=a.withCloseButton;a=a.withoutDivider;e=e===void 0?"close-button":e;f=f===void 0?!1:f;g=g===void 0?c("emptyFunction"):g;l=l===void 0?!0:l;a=a===void 0?!0:a;var m=d("BaseDialogLabelIDProvider").useDialogHeaderID();a=!a;var n;b[0]!==m||b[1]!==i?(n=i!=null&&j.jsx(d("react-strict-dom").html.div,{style:k.headerText,children:j.jsx(c("FDSText.react"),{align:"start",id:m,isSemanticHeading:!0,type:"headlineEmphasized2",children:i})}),b[0]=m,b[1]=i,b[2]=n):n=b[2];b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==l?(m=j.jsx(d("react-strict-dom").html.div,{style:k.addOnEnd,children:l?j.jsx(c("FDSCircleButton.react"),{disabled:f,icon:c("FBNucleusCrossFilled24Icon.react"),label:h._(/*BTDS*/"\u0110\u00f3ng"),onPress:g,size:36,testid:void 0}):j.jsx(d("react-strict-dom").html.div,{style:k.headerPlaceholder})}),b[3]=e,b[4]=f,b[5]=g,b[6]=l,b[7]=m):m=b[7];b[8]!==a||b[9]!==n||b[10]!==m?(i=j.jsxs(c("FDSDialogHeaderContainer.react"),{withDivider:a,children:[n,m]}),b[8]=a,b[9]=n,b[10]=m,b[11]=i):i=b[11];return i}g["default"]=a}),226);
__d("FDSAlertDialogImpl.react",["fbt","FDSDialog.react","FDSDialogFooter.react","FDSDialogStartAlignedTextHeader.react","FDSText.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={content:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(16),e=a.body,f=a.close,g=a.onClose;a=a.title;if(b[0]!==f){var i;i=(i=f)!=null?i:h._(/*BTDS*/"\u0110\u00f3ng");b[0]=f;b[1]=i}else i=b[1];b[2]!==g||b[3]!==i?(f=j.jsx(c("FDSDialogFooter.react"),{expanding:!1,primary:{label:i,onPress:g,testid:"FDSAlertDialogImpl-closeButton"}}),b[2]=g,b[3]=i,b[4]=f):f=b[4];b[5]!==g||b[6]!==a?(i=j.jsx(c("FDSDialogStartAlignedTextHeader.react"),{onClose:g,text:a}),b[5]=g,b[6]=a,b[7]=i):i=b[7];var l;b[8]!==e?(l=j.jsx(d("react-strict-dom").html.div,{style:k.content,children:j.jsx(c("FDSText.react"),{type:"body3",children:e})}),b[8]=e,b[9]=l):l=b[9];b[10]!==g||b[11]!==f||b[12]!==i||b[13]!==l||b[14]!==a?(e=j.jsx(c("FDSDialog.react"),{"aria-label":a,footer:f,header:i,onClose:g,children:l}),b[10]=g,b[11]=f,b[12]=i,b[13]=l,b[14]=a,b[15]=e):e=b[15];return e}g["default"]=a}),226);
__d("FDSTwoButtonDialog.react",["fbt","CometTrackingNodeProvider.react","FDSDialog.react","FDSDialogConfirmationFooter.react","FDSDialogHeader.react","FDSText.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={content:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0}},l={dialog:"comet-two-button-dialog",primary:"comet-two-button-dialog-primary",secondary:"comet-two-button-dialog-secondary"};function a(a){var b=d("react-compiler-runtime").c(37),e=a.disabled,f=a.onClose,g=a.testids,i=a.body,m=a.primary,n=a.secondary;a=a.title;e=e===void 0?!1:e;g=g===void 0?l:g;if(b[0]!==m){var o;o=(o=m)!=null?o:h._(/*BTDS*/"X\u00e1c nh\u1eadn");b[0]=m;b[1]=o}else o=b[1];b[2]!==f?(m=function(){return f("PRIMARY")},b[2]=f,b[3]=m):m=b[3];var p;b[4]!==e||b[5]!==o||b[6]!==m||b[7]!==g.primary?(p={disabled:e,label:o,onPress:m,testid:g.primary},b[4]=e,b[5]=o,b[6]=m,b[7]=g.primary,b[8]=p):p=b[8];if(b[9]!==n){m=(o=n)!=null?o:h._(/*BTDS*/"H\u1ee7y");b[9]=n;b[10]=m}else m=b[10];b[11]!==f?(o=function(){return f("SECONDARY")},b[11]=f,b[12]=o):o=b[12];b[13]!==e||b[14]!==m||b[15]!==o||b[16]!==g.secondary?(n={disabled:e,label:m,onPress:o,testid:g.secondary},b[13]=e,b[14]=m,b[15]=o,b[16]=g.secondary,b[17]=n):n=b[17];b[18]!==p||b[19]!==n?(e=j.jsx(c("FDSDialogConfirmationFooter.react"),{primary:p,secondary:n}),b[18]=p,b[19]=n,b[20]=e):e=b[20];b[21]!==f?(m=function(){return f("EXIT")},b[21]=f,b[22]=m):m=b[22];b[23]!==m||b[24]!==a?(o=j.jsx(c("FDSDialogHeader.react"),{onClose:m,text:a,withCloseButton:!0}),b[23]=m,b[24]=a,b[25]=o):o=b[25];b[26]!==f?(p=function(){return f("EXIT")},b[26]=f,b[27]=p):p=b[27];b[28]!==i?(n=j.jsx(d("react-strict-dom").html.div,{style:k.content,children:j.jsx(c("FDSText.react"),{type:"body3",children:i})}),b[28]=i,b[29]=n):n=b[29];b[30]!==o||b[31]!==p||b[32]!==n||b[33]!==e||b[34]!==g.dialog||b[35]!==a?(m=j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:163,children:j.jsx(c("FDSDialog.react"),{"aria-label":a,footer:e,header:o,onClose:p,testid:void 0,children:n})}),b[30]=o,b[31]=p,b[32]=n,b[33]=e,b[34]=g.dialog,b[35]=a,b[36]=m):m=b[36];return m}g["default"]=a}),226);
__d("FDSConfirmationDialogImpl.react",["FDSTwoButtonDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.body,f=a.cancel,g=a.confirm,h=a.disabled,j=a.onClose;a=a.title;h=h===void 0?!1:h;var k;b[0]!==j?(k=function(a){return j(a==="PRIMARY")},b[0]=j,b[1]=k):k=b[1];var l;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(l={dialog:"FDSConfirmationDialogImpl",primary:"CometConfirmationDialogConfirmButton",secondary:"CometConfirmationDialogCancelButton"},b[2]=l):l=b[2];b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==h||b[7]!==k||b[8]!==a?(l=i.jsx(c("FDSTwoButtonDialog.react"),{body:e,disabled:h,onClose:k,primary:g,secondary:f,testids:l,title:a}),b[3]=e,b[4]=f,b[5]=g,b[6]=h,b[7]=k,b[8]=a,b[9]=l):l=b[9];return l}g["default"]=a}),98);
__d("QpActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744247");b=d("FalcoLoggerInternal").create("qp_action",a);e=b;g["default"]=e}),98);
__d("QpImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744249");b=d("FalcoLoggerInternal").create("qp_impression",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("AsyncStorage",["Promise","WebAsyncStorage"],(function(a,b,c,d,e,f,g){"use strict";var h;a={getItem:function(a,d){return new(h||(h=b("Promise")))(function(b,e){c("WebAsyncStorage").getItem(a,function(a,c){d&&d(a,c),a!=null?e(a):b(c)})})},removeItem:function(a,d){return new(h||(h=b("Promise")))(function(b,e){c("WebAsyncStorage").removeItem(a,function(a){d&&d(a),a!=null?e(a):b()})})},setItem:function(a,d,e){return new(h||(h=b("Promise")))(function(b,f){c("WebAsyncStorage").setItem(a,d,function(a){e&&e(a),a!=null?f(a):b()})})}};d=a;g["default"]=d}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b){var c=d("react-compiler-runtime").c(9),e=a.dataSource;a=b===void 0?!1:b;b=k(a);a=b[0];var f=b[1],g=j(null);c[0]!==e?(b=function(a){var b,c=a.onResolvePayload;a=a.requestParams;(b=g.current)==null?void 0:b.unsubscribe();g.current=e.fetchNetwork(a).subscribe({complete:function(){f(!1)},error:function(a){f(!1)},next:function(a){return c(a)},start:function(a){f(!0)},unsubscribe:function(){f(!1)}})},c[0]=e,c[1]=b):b=c[1];b=b;var h,l;c[2]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){return function(){var a;(a=g.current)==null?void 0:a.unsubscribe()}},l=[],c[2]=h,c[3]=l):(h=c[2],l=c[3]);i(h,l);c[4]!==a?(h={isLoading:a},c[4]=a,c[5]=h):h=c[5];c[6]!==b||c[7]!==h?(l=[h,b],c[6]=b,c[7]=h,c[8]=l):l=c[8];return l}g["default"]=a}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolver",["cometTypeaheadODSLogFetchNetworkEvent","cr:2557","react","react-compiler-runtime","recoverableViolation","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useCallback;var i=e.useEffect,j=e.useRef;function a(a,e){var f=d("react-compiler-runtime").c(17),g=a.dataSource,h=a.dataSourceFetchConfigParams,k=a.onResolvePayload;f[0]!==h?(a=h===void 0?{}:h,f[0]=h,f[1]=a):a=f[1];h=a;a=h.requestFlow;h=h.shouldDebounceNetwork;var l=h===void 0?!0:h;f[2]!==g?(h={dataSource:g},f[2]=g,f[3]=h):h=f[3];g=c("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")(h);h=g[0];var m=g[1];g=h.isLoading;var n=c("useDebouncedComet")(m);f[4]!==k?(h=function(a,b){var d=b.isTraceComplete;b=b.source;try{k(a,{isTraceComplete:d,source:b})}catch(a){c("recoverableViolation")("Failed to resolve fetched payload","search")}return b},f[4]=k,f[5]=h):h=f[5];var o=h,p=j(a);f[6]!==o?(h=function(a){o(a,{isTraceComplete:!0,source:a.entries.length>0?"network":"network-no-results"}),c("cometTypeaheadODSLogFetchNetworkEvent")&&c("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1),b("cr:2557")&&b("cr:2557")(["all"],a)},f[6]=o,f[7]=h):h=f[7];var q=h;f[8]!==m||f[9]!==n||f[10]!==e||f[11]!==q||f[12]!==l?(a=function(){var a=function(a){a=a.requestParams;var b=a.requestFlow;b!=null&&(p.current=b);b={onResolvePayload:q,requestParams:babelHelpers["extends"]({},a,{requestFlow:p.current})};Boolean(l)?n(b):m(b)};e!=null&&a(e)},h=[m,n,e,q,l],f[8]=m,f[9]=n,f[10]=e,f[11]=q,f[12]=l,f[13]=a,f[14]=h):(a=f[13],h=f[14]);i(a,h);f[15]!==g?(a=[{isLoading:g}],f[15]=g,f[16]=a):a=f[16];return a}g["default"]=a}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetch",["react","react-compiler-runtime","recoverableViolation","useBaseTypeaheadSubscriptionDataSourceFetchResolver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useState;function a(a){var b,e=d("react-compiler-runtime").c(9),f=i(null),g=f[0],h=f[1];f=c("useBaseTypeaheadSubscriptionDataSourceFetchResolver")(a,g);a=f[0];f=a.isLoading;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a,b){b=b===void 0?"all":b;h({requestParams:a,source:b})},e[0]=a):a=e[0];var j=a;e[1]!==g?(a=function(a){a=a||{};var b=a.requestFlow;a=a.source;if(g==null){c("recoverableViolation")("Refetch cannot be called with undefined `fetchParams`","search");return}var d=g.requestParams,e=d.loggingEventTrace;d=babelHelpers.objectWithoutPropertiesLoose(d,["loggingEventTrace"]);e=babelHelpers["extends"]({loggingEventTrace:babelHelpers["extends"]({},e,{sequenceID:String(Date.now())}),requestFlow:b},d);j(e,a)},e[1]=g,e[2]=a):a=e[2];a=a;b=(b=g==null?void 0:g.source)!=null?b:"all";var k;e[3]!==f||e[4]!==b?(k={isLoading:f,source:b},e[3]=f,e[4]=b,e[5]=k):k=e[5];e[6]!==a||e[7]!==k?(f=[k,j,a],e[6]=a,e[7]=k,e[8]=f):f=e[8];return f}g["default"]=a}),98);
__d("TypeaheadLoggingFetchRequestFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1880031");b=d("FalcoLoggerInternal").create("typeahead_logging_fetch_request",a);e=b;g["default"]=e}),98);
__d("CometTypeaheadVolumeLoggingProvider",["TypeaheadLoggingFetchRequestFalcoEvent","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){return Math.random().toString()};a=function(){function a(a){this.$2=null,this.$1=a,this.$2=h()}var b=a.prototype;b.getContext=function(){return this.$1};b.getSessionID=function(){this.$2==null&&c("recoverableViolation")("Logging sessionID requested from "+this.getContext()+" surface does not exist.","search");return this.$2};b.logRequest=function(a){var b={context:this.getContext(),requestType:a,sessionID:this.getSessionID()};c("TypeaheadLoggingFetchRequestFalcoEvent").log(function(){return{fetchRequest:b}})};return a}();g["default"]=a}),98);
__d("useCometTypeaheadVolumeLoggingProvider",["CometTypeaheadVolumeLoggingProvider","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(2);a=a===void 0?"UNKNOWN":a;var e;b[0]!==a?(e=new(c("CometTypeaheadVolumeLoggingProvider"))(a),b[0]=a,b[1]=e):e=b[1];a=e;return a}g["default"]=a}),98);
__d("CometInternalTypeaheadSubscriptionProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","useBaseTypeaheadSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher","useCometTypeaheadVolumeLoggingProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function a(a){var b=a.children,d=a.dataSource,e=a.dataSourceFetchConfigParams,f=a.loggingContext,g=a.onFetchEntries_DO_NOT_USE,h=a.traceProvider;a=c("useCometInternalTypeaheadStateDispatcher")();var l=a.dispatchActiveEntries,m=c("useCometTypeaheadVolumeLoggingProvider")(f);a=c("useBaseTypeaheadSubscriptionDataSourceFetch")({dataSource:d,dataSourceFetchConfigParams:e,onResolvePayload:j(function(a,b){var c;a=a.entries;var d=b.isTraceComplete;b=b.source;l((c=a)!=null?c:[]);m.logRequest(o);g&&g(a);h&&!h.isResolved()&&(d&&(b==="cache"&&a.length>=h.getEntriesCountForVisualComplete()?h.setEndReason("max_suggestions_reached"):b==="network"?h.setEndReason("all_queries_completed"):b==="network-no-results"&&h.setEndReason("all_queries_completed_no_network_results"),h.resolve()))},[l,g,h])});f=a[0];var n=f.isLoading,o=f.source,p=a[1],q=a[2];d=k(function(){return{fetch:p,isLoading:n,refetch:q,source:o}},[p,n,q,o]);return i.jsx(c("CometInternalTypeaheadFetchContext").Provider,{value:d,children:i.jsx(c("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:n,source:o,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseSubscriptionTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadStateProvider","CometInternalTypeaheadSubscriptionProvider","emptyFunction","react","react-compiler-runtime","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useId;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(77),e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;b[0]!==a?(r=a.autoOpen,B=a.autoFocus,C=a.isDisabled,D=a.errorMessage,e=a.inputStrategyRenderer,g=a.dataSource,h=a.dataSourceFetchConfigParams,E=a.decorators,k=a.emptyEntries_DO_NOT_USE,n=a.id,F=a.label,m=a.loggingContext,G=a.onBackspace,H=a.onBlur,o=a.onChange,I=a.onClose,s=a.onEnter,t=a.onEscape,p=a.onFetchEntries_DO_NOT_USE,u=a.onFocus,v=a.onOpen,q=a.onPressEntry,w=a.placeholder,x=a.shouldQueryStringFollowHighlightedEntry,y=a.shouldQueryStringUpdateFromSelectedEntryOnClick,z=a.testid,J=a.traceProvider,l=a.inputRef,A=a.viewRole,f=a.viewStrategyRenderer,K=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","autoFocus","isDisabled","errorMessage","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","inputRef","viewRole","viewStrategyRenderer"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B,b[23]=C,b[24]=D,b[25]=E,b[26]=F,b[27]=G,b[28]=H,b[29]=I,b[30]=J,b[31]=K):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22],C=b[23],D=b[24],E=b[25],F=b[26],G=b[27],H=b[28],I=b[29],J=b[30],K=b[31]);a=r===void 0?!1:r;r=B===void 0?!1:B;B=C===void 0?!1:C;C=D===void 0?null:D;b[32]!==E?(D=E===void 0?[]:E,b[32]=E,b[33]=D):D=b[33];E=D;D=F===void 0?"":F;F=G===void 0?c("emptyFunction"):G;G=H===void 0?c("emptyFunction"):H;H=I===void 0?c("emptyFunction"):I;I=s===void 0?c("emptyFunction"):s;s=t===void 0?c("emptyFunction"):t;t=u===void 0?c("emptyFunction"):u;u=v===void 0?c("emptyFunction"):v;v=w===void 0?"":w;w=x===void 0?!0:x;var L=y===void 0?!0:y;x=z===void 0?"":z;y=A===void 0?"listbox":A;z=j();var M;b[34]!==E?(M=c("CometInternalTypeahead.react"),E.forEach(function(a){var b=a.decorate;a=a.params;M=b(M,a)}),b[34]=E,b[35]=M):M=b[35];A=M;E=A;b[36]!==o||b[37]!==q||b[38]!==L?(A=function(a){L&&o(a.label),q&&q(a)},b[36]=o,b[37]=q,b[38]=L,b[39]=A):A=b[39];A=A;var N;b[40]!==e||b[41]!==w?(N=c("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(e,{shouldQueryStringFollowHighlightedEntry:w}),b[40]=e,b[41]=w,b[42]=N):N=b[42];e=N;w=e;N=D||v;D=(e=n)!=null?e:z;if(b[43]!==w||b[44]!==E||b[45]!==f||b[46]!==r||b[47]!==C||b[48]!==l||b[49]!==F||b[50]!==G||b[51]!==I||b[52]!==s||b[53]!==t||b[54]!==A||b[55]!==B||b[56]!==o||b[57]!==v||b[58]!==N||b[59]!==D||b[60]!==x||b[61]!==K||b[62]!==y){e=i.jsx(E,babelHelpers["extends"]({},K,{autoFocus:r,errorMessage:C,id:D,inputRef:l,inputStrategyRenderer:w,isDisabled:B,label:N,onBackspace:F,onBlur:G,onChange:o,onDownArrow:n=c("emptyFunction"),onEnter:I,onEscape:s,onFocus:t,onHighlightEntry:n,onPressEntry:A,onShiftTab:n,onTab:n,onUpArrow:n,placeholder:v,testid:void 0,viewRole:y,viewStrategyRenderer:f}));b[43]=w;b[44]=E;b[45]=f;b[46]=r;b[47]=C;b[48]=l;b[49]=F;b[50]=G;b[51]=I;b[52]=s;b[53]=t;b[54]=A;b[55]=B;b[56]=o;b[57]=v;b[58]=N;b[59]=D;b[60]=x;b[61]=K;b[62]=y;b[63]=e}else e=b[63];b[64]!==g||b[65]!==h||b[66]!==m||b[67]!==p||b[68]!==e||b[69]!==J?(z=i.jsx(c("CometInternalTypeaheadSubscriptionProvider"),{dataSource:g,dataSourceFetchConfigParams:h,loggingContext:m,onFetchEntries_DO_NOT_USE:p,traceProvider:J,children:e}),b[64]=g,b[65]=h,b[66]=m,b[67]=p,b[68]=e,b[69]=J,b[70]=z):z=b[70];b[71]!==a||b[72]!==k||b[73]!==H||b[74]!==u||b[75]!==z?(n=i.jsx(c("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:i.jsx(c("CometInternalTypeaheadStateProvider"),{autoOpen:a,emptyEntries_DO_NOT_USE:k,onClose:H,onOpen:u,children:z})}),b[71]=a,b[72]=k,b[73]=H,b[74]=u,b[75]=z,b[76]=n):n=b[76];return n}g["default"]=a}),98);
__d("CancellablePromise",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i="CancellationToken.TokenCancelled";function a(a,d,e){return e.then(function(e){return a.isCancelled()?(h||(h=b("Promise"))).reject(c("err")(i)):d(e)})}function d(a,d){return d["catch"](function(d){return d instanceof Error&&d.message===i?(h||(h=b("Promise"))).resolve(a):(h||(h=b("Promise"))).reject(c("err"))})}g.then_=a;g.ignoreFailed=d}),98);
__d("CancellationToken",[],(function(a,b,c,d,e,f){"use strict";function a(){var a={contents:!1};return{cancel:function(){a.contents=!0},isCancelled:function(){return a.contents}}}f["default"]=a}),66);
__d("CometMessagingJewelCommunitiesQPBannerContainer_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelCommunitiesQPBannerContainer_viewer",selections:[{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:10713},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"xxYRh"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelCommunitiesQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"xxYRh")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10713,trigger:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN")'}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometMessagingJewelCommunitiesQPBannerContainer.react",["CometMessagingJewelCommunitiesQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPlaceholder.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e,f=d("react-compiler-runtime").c(13),g=a.messagingEntryPoint,i=a.onClose;a=a.viewer;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometMessagingJewelCommunitiesQPBannerContainer_viewer.graphql"),a);var l;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={context_surface_id:10713,context_trigger:"messaging_jewel_communities_tab_open"},f[0]=l):l=f[0];l=c("useQuickPromotionFalcoEvent")(l);if(f[1]!==(a==null?void 0:(e=a.eligible_promotions)==null?void 0:e.nodes)){e=a==null?void 0:(e=a.eligible_promotions)==null?void 0:(e=e.nodes)==null?void 0:e.find(k);f[1]=a==null?void 0:(a=a.eligible_promotions)==null?void 0:a.nodes;f[2]=e}else e=f[2];a=e;a=a==null?void 0:(e=a.comet_qp_sections)==null?void 0:e.renderer_strategy;if(a==null)return null;f[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),f[3]=e):e=f[3];var m;f[4]!==g||f[5]!==i?(m={messagingEntryPoint:g,onClose:i},f[4]=g,f[5]=i,f[6]=m):m=f[6];f[7]!==a||f[8]!==m?(g=j.jsx(d("CometRelay").MatchContainer,{match:a,props:m}),f[7]=a,f[8]=m,f[9]=g):g=f[9];f[10]!==l||f[11]!==g?(i=j.jsx(c("CometPlaceholder.react"),{fallback:e,name:"CometMessagingJewelCommunitiesQPBannerContainer",children:j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:l,children:g})}),f[10]=l,f[11]=g,f[12]=i):i=f[12];return i}function k(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}g["default"]=a}),98);
__d("MWTopNavListDropdownTitle.react",["fbt","BaseHeading.react","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=[];function a(a){var b=d("react-compiler-runtime").c(16),e=a.actions,f=a.onReturn,g=a.testid;a=a.title;e=e===void 0?k:e;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x6s0dn4 x78zum5 x2lah0s x1qughib x21xpn4 x1whwgri x1hndj7l xdwfu72 xnx504b"},b[0]=i):i=b[0];var m;b[1]!==f?(m=f!=null?j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:d("Locale").isRTL()?c("MWXIconArrowRight"):c("MWXIconArrowLeft"),iconRatio:"large",label:h._(/*BTDS*/"Quay l\u1ea1i"),onPress:f,size:32,type:"deemphasized"})}):null,b[1]=f,b[2]=m):m=b[2];b[3]!==a?(f=j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("BaseHeading.react"),{isPrimaryHeading:!0,children:j.jsx(c("MWXText.react"),{type:"headlineEmphasized1",children:a})})}),b[3]=a,b[4]=f):f=b[4];b[5]!==m||b[6]!==f?(a=j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:[m,f]}),b[5]=m,b[6]=f,b[7]=a):a=b[7];b[8]!==e?(m=e.map(l),b[8]=e,b[9]=m):m=b[9];b[10]!==m?(f=j.jsx(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:m}),b[10]=m,b[11]=f):f=b[11];b[12]!==a||b[13]!==f||b[14]!==g?(e=j.jsxs("header",babelHelpers["extends"]({},i,{"data-testid":void 0,children:[a,f]})),b[12]=a,b[13]=f,b[14]=g,b[15]=e):e=b[15];return e}function l(a,b){return j.jsx(c("MWXRowItem.react"),{children:a},b)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("CometMessagingJewelDropdownContentGlimmer.react",["FDSListCellGlimmer.react","MWTopNavListDropdownTitle.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.isFullHeight,f=a.title;a=a.withBackButton;e=e===void 0?!1:e;a=a===void 0?!1:a;var g;b[0]!==e?(g={0:{},1:{className:"x9f619 x20eyyc xvv7f4i x1cvmir6"}}[!!e<<0],b[0]=e,b[1]=g):g=b[1];b[2]!==f||b[3]!==a?(e=f!=null&&i.jsx(c("MWTopNavListDropdownTitle.react"),{onReturn:a?c("emptyFunction"):void 0,title:f}),b[2]=f,b[3]=a,b[4]=e):e=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("FDSListCellGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:Math.max(Math.ceil((window.innerHeight-72-45)/76),1)}),b[5]=f):f=b[5];b[6]!==g||b[7]!==e?(a=i.jsxs("div",babelHelpers["extends"]({},g,{children:[e,f]})),b[6]=g,b[7]=e,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("CometMessagingJewelDropdownContent_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__CometMessagingJewelDropdownCMBlendedEntrpyointEnabledrelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider"}],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownContent_query",selections:[{condition:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider",kind:"Condition",passingValue:!1,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsJewelNuxWrapper_query"}],type:"Query",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"encrypted_backups_jewel_nux_wrapper"}]},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider",kind:"Condition",passingValue:!1,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownQPBannerContainer_viewer"}],type:"Viewer",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"qp_banner"}]},{condition:"__relay_internal__pv__CometMessagingJewelDropdownCMBlendedEntrpyointEnabledrelayprovider",kind:"Condition",passingValue:!1,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelCommunitiesQPBannerContainer_viewer"}],type:"Viewer",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"cm_qp_banner"},{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MWCMBlendedThreadListV2_viewer"}],type:"Viewer",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"cm_thread_list"}]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQPBannerContainer_viewer",selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3nNEjf"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3nNEjf")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometMessagingJewelDropdownQPBannerContainer.react",["CometMessagingJewelDropdownQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPageletWithDiv.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e,f=d("react-compiler-runtime").c(9);a=a.viewer;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql"),a);var g;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={context_surface_id:8439,context_trigger:"messaging_jewel_open"},f[0]=g):g=f[0];g=c("useQuickPromotionFalcoEvent")(g);if(f[1]!==(a==null?void 0:(e=a.jewel_qp)==null?void 0:e.nodes)){e=a==null?void 0:(e=a.jewel_qp)==null?void 0:(e=e.nodes)==null?void 0:e.find(k);f[1]=a==null?void 0:(a=a.jewel_qp)==null?void 0:a.nodes;f[2]=e}else e=f[2];a=e;a=a==null?void 0:(e=a.comet_qp_sections)==null?void 0:e.renderer_strategy;if(a==null)return null;f[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),f[3]=e):e=f[3];var i;f[4]!==a?(i=j.jsx(d("CometRelay").MatchContainer,{match:a}),f[4]=a,f[5]=i):i=f[5];f[6]!==g||f[7]!==i?(a=j.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:e,name:"CometMessagingJewelDropdownQPBannerContainer",children:j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:g,children:i})}),f[6]=g,f[7]=i,f[8]=a):a=f[8];return a}function k(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}g["default"]=a}),98);
__d("MWEncryptedBackupsJewelNuxWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEncryptedBackupsJewelNuxWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapperDeferred.react"));function a(a){return i.jsx(j,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={tabPlaceholder:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx("div",babelHelpers["extends"]({className:"x78zum5 xu0aao5 x1y1aw1k xwib8y2 xf7dkkf xv54qhq x3bhodz"},{children:i.jsx(c("MDSGlimmer.react"),{index:0,xstyle:j.tabPlaceholder})})),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWInboxContextSwitcherUtils",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadRangeFilter","MWPIsThreadUnread"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return function(a){return d("MWPIsThreadUnread").isThreadUnread(a)};case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return function(a){return d("LSMessagingThreadTypeUtil").isFnFGroupThread(a)};case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):default:return void 0}}function b(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return(i||(i=d("LSIntEnum"))).ofNumber(-14);case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):default:return(i||(i=d("LSIntEnum"))).ofNumber(0)}}function e(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return"Inbox";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return"Communities";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return"Unread";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return"Groups";default:return"Other"}}function f(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return h._(/*BTDS*/"Kh\u00f4ng c\u00f3 \u0111o\u1ea1n chat c\u1ed9ng \u0111\u1ed3ng n\u00e0o");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return h._(/*BTDS*/"Kh\u00f4ng c\u00f3 \u0111o\u1ea1n chat n\u00e0o ch\u01b0a \u0111\u1ecdc");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return h._(/*BTDS*/"Kh\u00f4ng c\u00f3 nh\u00f3m chat n\u00e0o");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):default:return h._(/*BTDS*/"Kh\u00f4ng c\u00f3 \u0111o\u1ea1n chat n\u00e0o")}}function k(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return h._(/*BTDS*/"\u0110o\u1ea1n chat c\u1ed9ng \u0111\u1ed3ng m\u1edbi s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\u00e2y.");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return h._(/*BTDS*/"\u0110o\u1ea1n chat ch\u01b0a \u0111\u1ecdc s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\u00e2y.");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return h._(/*BTDS*/"Nh\u00f3m chat m\u1edbi s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\u00e2y.");case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):default:return h._(/*BTDS*/"\u0110o\u1ea1n chat m\u1edbi s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\u00e2y.")}}function l(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return"jewel_communities";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return"jewel_unread";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return"jewel_groups";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return"jewel_all";default:return"jewel"}}function m(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return"inbox_communities";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return"inbox_unread";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return"inbox_groups";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return"inbox_all";default:return"inbox"}}function n(a){var b;switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return"inbox";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return"communities";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return"unread";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return"groups";default:return((b=Object.keys(c("LSThreadRangeFilter")).find(function(b){return(j||(j=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter")[b]),a)}))!=null?b:"other").toLowerCase()}}function o(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):return"jewelCommunities";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):return"jewelUnread";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):return"jewelGroups";case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return"jewelAll"}}function p(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return!0;case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):default:return!1}}function q(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return!0;case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):default:return!1}}function r(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):return!0;case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY):case(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES):default:return!1}}g.getCustomThreadFilter=a;g.getParentThreadKeyFromFilter=b;g.getInteractionDescFromFilter=e;g.getNullStateHeadline=f;g.getNullStateMessage=k;g.getJewelEntryPointFromFilter=l;g.getInboxEntryPointFromFilter=m;g.getTracePolicyFromFilter=n;g.getJewelLsSubEntryPointFromFilter=o;g.shouldShowEBUpsellFromFilter=p;g.shouldShowNewMessageForInboxFromFilter=q;g.shouldShowMessageRequestsFromFilter=r}),226);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPageletWithDiv.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.onError;var f;b[0]!==e?(f=i.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxQuickPromotionWrapper",children:i.jsx(j,{children:e})}),b[0]=e,b[1]=f):f=b[1];b[2]!==a||b[3]!==f?(e=i.jsx(c("CometErrorBoundary.react"),{onError:a,children:f}),b[2]=a,b[3]=f,b[4]=e):e=b[4];return e}g["default"]=a}),98);
__d("MWInboxTrayContainer.react",["MWInboxTrayGating","cr:17196","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(3),e=a.mwInboxTrayContainerQuery;a=a.onClose;if(e==null)return null;if(!d("MWInboxTrayGating").isInboxTrayEnabled())return null;var f;c[0]!==e||c[1]!==a?(f=b("cr:17196")!=null?i.jsx(b("cr:17196"),{mwInboxTrayContainerQuery:e,onClose:a}):null,c[0]=e,c[1]=a,c[2]=f):f=c[2];return f}c=i.memo(a);g["default"]=c}),98);
__d("MWJewelDropdownHeaderOpenInAppButton.react",["fbt","ix","Actor","FDSCircleButton.react","FDSTooltip.react","ImageIconSource","MessengerDesktopDeeplinkEventFalcoEvent","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","react","react-compiler-runtime","useCurrentDisplayMode","useSinglePartialViewImpression","useStable","uuidv4"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(18),e=a.onClose;a=d("Actor").useActor();a=a[0];var f=c("useStable")(l),g=c("useCurrentDisplayMode")();g=g==="dark";var j;b[0]!==f?(j={onImpressionStart:function(){return c("MessengerDesktopDeeplinkEventFalcoEvent").log(function(){return{event:"open_in_app_button_impression",eventLocation:"browser",eventType:"thread",funnelSessionId:f,mobile_app_source:"unknown"}})}},b[0]=f,b[1]=j):j=b[1];j=c("useSinglePartialViewImpression")(j);var m;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"M\u1edf \u1ee9ng d\u1ee5ng Messenger"),b[2]=m):m=b[2];m=m;if(b[3]!==a||b[4]!==f){var n;n=(n=c("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri({funnel_session_id:f,id:a,origin:"FB"}).setDomain("messenger.com"))==null?void 0:(n=n.setProtocol("https"))==null?void 0:n.toString();b[3]=a;b[4]=f;b[5]=n}else n=b[5];a=n;b[6]!==g?(n=g?new(c("ImageIconSource"))(i("2009370"),32,32):new(c("ImageIconSource"))(i("1996477"),32,32),b[6]=g,b[7]=n):n=b[7];g=n;b[8]!==a?(n={url:a},b[8]=a,b[9]=n):n=b[9];b[10]!==f||b[11]!==e?(a=function(){c("MessengerDesktopDeeplinkEventFalcoEvent").log(function(){return{event:"open_in_app_button_click",eventLocation:"browser",eventType:"thread",funnelSessionId:f,mobile_app_source:"unknown"}}),e()},b[10]=f,b[11]=e,b[12]=a):a=b[12];b[13]!==g||b[14]!==j||b[15]!==n||b[16]!==a?(m=k.jsx(c("FDSTooltip.react"),{align:"end",tooltip:m,children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"secondary",icon:g,label:m,linkProps:n,onPress:a,ref:j,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})}),b[13]=g,b[14]=j,b[15]=n,b[16]=a,b[17]=m):m=b[17];return m}function l(){return c("uuidv4")()}g["default"]=a}),226);
__d("useMWJewelSettingsButtonBadge",["cr:4042","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(){var a;a=(a=b("cr:4042")==null?void 0:b("cr:4042")())!=null?a:{};a=a.badge;a=a===void 0?null:a;return{badge:a,onButtonPress:function(){}}}g["default"]=a}),98);
__d("MWJewelDropdownHeader.react",["fbt","CometHomeChatSettings.entrypoint","FDSCircleButton.react","FDSComposeFilled16Icon","FDSDots3HorizontalFilled20Icon","FDSEntryPointPopoverTrigger.react","FDSTooltip.react","MWFacebookUserWithoutMessengerAccess","MWJewelDropdownHeaderOpenInAppButton.react","MWJewelDropdownHeaderSeeAllButton.react","MWJewelPopoverDialogContext.react","MWPSearchSystem","MWTopNavListDropdownTitle.react","MessengerDesktopDeepLinkUtils","MessengerWebUXLogger","emptyFunction","gkx","react","react-compiler-runtime","useCometPreloader","useMWChatOpenNewTab","useMWJewelSettingsButtonBadge","useMWNewChatTabContainerPreload","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useContext;function m(a){var b=d("react-compiler-runtime").c(13),e=a.onOpenArchivedChats,f=a.onOpenMessageRequests;a=a.onOpenRestrictedAccountsList;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"T\u00f9y ch\u1ecdn"),b[0]=g):g=b[0];var i=g;g=l(c("MWJewelPopoverDialogContext.react"));var j=g.setIsOpenForDialog;g=c("useMWJewelSettingsButtonBadge")();var m=g.badge,n=g.onButtonPress;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g={},b[1]=g):g=b[1];e=(e=e)!=null?e:void 0;f=(f=f)!=null?f:void 0;a=(a=a)!=null?a:void 0;var o;b[2]!==e||b[3]!==f||b[4]!==a?(o={onOpenArchivedChats:e,onOpenMessageRequests:f,onOpenRestrictedAccountsList:a},b[2]=e,b[3]=f,b[4]=a,b[5]=o):o=b[5];b[6]!==m||b[7]!==n||b[8]!==j?(e=function(a,b,d,e,f,g){return k.jsxs(c("FDSTooltip.react"),{align:"end",tooltip:i,children:[m,k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"secondary",icon:c("FDSDots3HorizontalFilled20Icon"),label:i,onHoverIn:e,onHoverOut:f,onPress:function(){j(!1),b(),n()},onPressIn:g,ref:a,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})]})},b[6]=m,b[7]=n,b[8]=j,b[9]=e):e=b[9];b[10]!==o||b[11]!==e?(f=k.jsx(c("FDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:g,otherProps:o,popoverEntryPoint:c("CometHomeChatSettings.entrypoint"),position:"below",preloadTrigger:"button",children:e}),b[10]=o,b[11]=e,b[12]=f):f=b[12];return f}function a(a){var b=d("react-compiler-runtime").c(37),e=a.inboxUrl,f=a.onClose,g=a.onOpenArchivedChats,j=a.onOpenMessageRequests,l=a.onOpenRestrictedAccountsList,n=a.onReturn;a=a.title;var o=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),p=c("useMWChatOpenNewTab")("jewelNewMessage"),q=c("MessengerWebUXLogger").useInteractionLogger(),r;b[0]!==o||b[1]!==q||b[2]!==f||b[3]!==p?(r=function(){o&&(p(!1),f()),q==null?void 0:q({eventName:"create_thread"})},b[0]=o,b[1]=q,b[2]=f,b[3]=p,b[4]=r):r=b[4];r=r;var s=c("useMWNewChatTabContainerPreload")(),t=s[0],u=s[1],v=(i||(i=c("useReStore")))();b[5]!==v?(s=function(){return d("MWPSearchSystem").makeAll(v)},b[5]=v,b[6]=s):s=b[6];s=s;var w=c("useCometPreloader")("button_aggressive",c("emptyFunction"),s),x=w.onHoverInPreloader,y=w.onHoverMovePreloader,z=w.onHoverOutPreloader;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"Tin nh\u1eafn m\u1edbi"),b[7]=w):w=b[7];w=w;var A=d("MessengerDesktopDeepLinkUtils").isMessengerDesktopDeeplinkEnabled,B=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess();A=!c("gkx")("2669")&&A()&&!B;if(A){b[8]!==f?(B=k.jsx(c("MWJewelDropdownHeaderOpenInAppButton.react"),{onClose:f}),b[8]=f,b[9]=B):B=b[9];A=B}else{b[10]!==e||b[11]!==f?(B=k.jsx(c("MWJewelDropdownHeaderSeeAllButton.react"),{onClose:f,testid:void 0,url:e}),b[10]=e,b[11]=f,b[12]=B):B=b[12];A=B}b[13]!==g||b[14]!==j||b[15]!==l?(e=k.jsx(m,{onOpenArchivedChats:g,onOpenMessageRequests:j,onOpenRestrictedAccountsList:l},"mw-jewel-settings"),b[13]=g,b[14]=j,b[15]=l,b[16]=e):e=b[16];b[17]!==t||b[18]!==x?(B=function(a){t(a),x(a)},b[17]=t,b[18]=x,b[19]=B):B=b[19];b[20]!==u||b[21]!==z?(g=function(){u(),z()},b[20]=u,b[21]=z,b[22]=g):g=b[22];b[23]!==r||b[24]!==s||b[25]!==y||b[26]!==B||b[27]!==g?(j=k.jsx(c("FDSTooltip.react"),{align:"end",tooltip:w,children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"secondary",icon:c("FDSComposeFilled16Icon"),label:w,onFocusIn:s,onHoverIn:B,onHoverMove:y,onHoverOut:g,onPress:r,role:"button",size:32,testid:void 0,type_DEPRECATED:"deemphasized"})},"mw-jewel-new-message"),b[23]=r,b[24]=s,b[25]=y,b[26]=B,b[27]=g,b[28]=j):j=b[28];b[29]!==A||b[30]!==e||b[31]!==j?(l=[e,A,j].filter(Boolean),b[29]=A,b[30]=e,b[31]=j,b[32]=l):l=b[32];b[33]!==n||b[34]!==l||b[35]!==a?(w=k.jsx(c("MWTopNavListDropdownTitle.react"),{actions:l,onReturn:n,title:a}),b[33]=n,b[34]=l,b[35]=a,b[36]=w):w=b[36];return w}g["default"]=a}),226);
__d("MWJewelNestedFolderThreadListHeader.react",["MWTopNavListDropdownTitle.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e=a.onReturn;a=a.title;var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWTopNavListDropdownTitle.react"),{onReturn:e,title:a}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MWJewelMessageRequestsThread.react",["fbt","FDSChevronLeftFilled16Icon","FDSChevronRightFilled16Icon","FDSIcon.react","FDSMessagesFilled24Icon","I64","LSIntEnum","Locale","MWJewelThreadSnippet.react","MWXListCellStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react");function n(){var a=d("react-compiler-runtime").c(5),b=(i||(i=c("useReStore")))(),e;a[0]!==b.tables.contacts||a[1]!==b.tables.threads?(e=function(){return d("ReQL").fromTableDescending(b.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(-1)).filter(o).map(function(a){a=a.snippetSenderContactId;if(a!=null){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a),f.id+":51");return a?a.name:void 0}})},a[0]=b.tables.contacts,a[1]=b.tables.threads,a[2]=e):e=a[2];var g;a[3]!==b?(g=[b],a[3]=b,a[4]=g):g=a[4];return d("ReQLSuspense").useFirst(e,g,f.id+":36")}function o(a){return(k||(k=d("I64"))).gt(a.lastActivityTimestampMs,a.lastReadWatermarkTimestampMs)}function a(a){var b=d("react-compiler-runtime").c(17),e=a.onOpenMessageRequests;a=a.unreadRequestsCount;var f;b[0]!==a?(f=h._(/*BTDS*/"_j{\"*\":\"Tin nh\\u1eafn \\u0111ang ch\\u1edd m\\u1edbi\"}",[h._plural(a)]),b[0]=a,b[1]=f):f=b[1];f=f;var g;b[2]!==a?(g=h._(/*BTDS*/"_j{\"someone\":\"T\\u1eeb nh\\u1eefng ng\\u01b0\\u1eddi b\\u1ea1n c\\u00f3 th\\u1ec3 bi\\u1ebft\",\"people\":\"T\\u1eeb nh\\u1eefng ng\\u01b0\\u1eddi b\\u1ea1n c\\u00f3 th\\u1ec3 bi\\u1ebft\"}",[h._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]),b[2]=a,b[3]=g):g=b[3];g=g;var i=n();if(i!=null)if(a===1){var j;b[4]!==i?(j=h._(/*BTDS*/"T\u1eeb {name}",[h._param("name",i)]),b[4]=i,b[5]=j):j=b[5];g=j}else{b[6]!==i||b[7]!==a?(j=h._(/*BTDS*/"T\u1eeb {name} v\u00e0 {count} ng\u01b0\u1eddi kh\u00e1c",[h._param("name",i),h._param("count",a-1)]),b[6]=i,b[7]=a,b[8]=j):j=b[8];g=j}b[9]===Symbol["for"]("react.memo_cache_sentinel")?(i={addOn:m.jsx(c("FDSIcon.react"),{color:"secondary",icon:d("Locale").isRTL()?c("FDSChevronLeftFilled16Icon"):c("FDSChevronRightFilled16Icon")}),type:"body"},a={icon:c("FDSMessagesFilled24Icon"),size:56,type:"contained-icon"},b[9]=i,b[10]=a):(i=b[9],a=b[10]);b[11]!==g?(j=m.jsx(c("MWJewelThreadSnippet.react"),{isUnread:!0,text:g}),b[11]=g,b[12]=j):j=b[12];b[13]!==e||b[14]!==j||b[15]!==f?(g=m.jsx(c("MWXListCellStrict.react"),{addOnEnd:i,addOnStart:a,body:j,headline:f,level:4,onPress:e}),b[13]=e,b[14]=j,b[15]=f,b[16]=g):g=b[16];return g}g["default"]=a}),226);
__d("useMWLSJewelLoadMoreThreads",["Int64Hooks","loadMoreLSThreads","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==a||b[1]!==e?(g=function(){return function(){var b=e.runInTransaction(function(b){return c("loadMoreLSThreads")(b,a)},"readwrite",void 0,void 0,f.id+":26");c("promiseDone")(b)}},i=[e,a],b[0]=a,b[1]=e,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("Int64Hooks").useMemoInt64(g,i)}g["default"]=a}),98);
__d("useMWLSLoadThreadFolderIfNotPresent",["CancellablePromise","CancellationToken","I64","Int64Hooks","ReQL","promiseDone","react-compiler-runtime","useMWLSJewelLoadMoreThreads","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(8),e=(i||(i=c("useReStore")))(),f=c("useMWLSJewelLoadMoreThreads")(a),g;b[0]!==e.tables.threads_ranges_v2__generated||b[1]!==f||b[2]!==a?(g=function(){var b=c("CancellationToken")();c("promiseDone")(d("CancellablePromise").ignoreFailed(void 0,d("CancellablePromise").then_(b,function(a){a==null&&f()},d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads_ranges_v2__generated).filter(function(b){return(h||(h=d("I64"))).equal(b.parentThreadKey,a)})))));return b.cancel},b[0]=e.tables.threads_ranges_v2__generated,b[1]=f,b[2]=a,b[3]=g):g=b[3];var j;b[4]!==e||b[5]!==f||b[6]!==a?(j=[f,e,a],b[4]=e,b[5]=f,b[6]=a,b[7]=j):j=b[7];d("Int64Hooks").useEffectInt64(g,j)}g["default"]=a}),98);
__d("MWLSJewelMessageRequestsThreadContainer.react",["I64","LSIntEnum","MWJewelMessageRequestsThread.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWLSLoadThreadFolderIfNotPresent","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.threads?(e=function(){return d("ReQL").fromTableDescending(b.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((i||(i=d("LSIntEnum"))).ofNumber(-1)).filter(n)},a[0]=b.tables.threads,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];a=d("ReQLSuspense").useArray(e,g,f.id+":26");return a.length}function n(a){return(j||(j=d("I64"))).gt(a.lastActivityTimestampMs,a.lastReadWatermarkTimestampMs)}function a(a){var b=d("react-compiler-runtime").c(4);a=a.onOpenMessageRequests;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(i||(i=d("LSIntEnum"))).ofNumber(-1),b[0]=e):e=b[0];c("useMWLSLoadThreadFolderIfNotPresent")(e);e=m();if(a==null||e===0)return null;var f;b[1]!==a||b[2]!==e?(f=l.jsx(c("MWJewelMessageRequestsThread.react"),{onOpenMessageRequests:a,unreadRequestsCount:e}),b[1]=a,b[2]=e,b[3]=f):f=b[3];return f}g["default"]=a}),98);
__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.i64.neq(a[10],void 0)?d[0]=a[10]:d[0]=c.i64.cast([0,0]),a[11]!==void 0?d[1]=a[11]:d[1]="",(a[2]&&c.i64.neq(a[7],void 0)&&c.i64.neq(a[4],void 0)||a[3]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[5],void 0))&&!(a[2]&&c.i64.neq(a[7],void 0)&&c.i64.neq(a[4],void 0)&&a[3]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[5],void 0))?c.sequence([function(e){return d[3]=a[4]==null?c.i64.cast([-2147483648,0]):a[4],d[4]=a[7]==null?c.i64.cast([0,1]):a[7],d[10]=c.i64.gt(d[4],c.i64.cast([0,1]))&&c.i64.gt(d[3],c.i64.cast([-2147483648,0])),c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,1])).then(function(a){return a=a,d[2]=a[0],a})},function(e){return d[5]=new c.Map(),d[5].set("cursor",d[2]),d[5].set("filter",a[1]),d[5].set("is_after",a[3]),d[5].set("parent_thread_key",a[0]),d[5].set("reference_activity_timestamp",a[3]?a[6]:a[7]),d[5].set("reference_thread_key",a[3]?a[5]:a[4]),d[5].set("secondary_filter",d[0]),d[5].set("filter_value",d[1]),d[5].set("sync_group",c.i64.cast([0,1])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[11]=c.i64.of_float(Date.now()),d[6]=c.i64.add(d[11],c.i64.cast([0,0]))):d[6]=c.i64.cast([0,0]),d[7]=c.toJSON(d[5]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,313]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[6],c.i64.cast([0,0])).then(function(a){return a=a,d[8]=a[0],a})},function(b){return c.filter(c.db.table(247).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.eq(b.threadRangeFilter,a[1])&&c.i64.eq(b.secondaryThreadRangeFilter,d[0])&&b.threadRangeFilterValue===d[1]}).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(247).add({folderName:"",parentThreadKey:a[0],minThreadKey:d[3]==null?c.i64.cast([-2147483648,0]):d[3],minLastActivityTimestampMs:d[4]==null?c.i64.cast([0,1]):d[4],threadRangeFilter:a[1],secondaryThreadRangeFilter:d[0],threadRangeFilterValue:d[1],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:d[10],hasMoreAfter:!1,syncGroup:c.i64.cast([0,1])}):(b.item,c.forEach(c.filter(c.db.table(247).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.eq(b.threadRangeFilter,a[1])&&c.i64.eq(b.secondaryThreadRangeFilter,d[0])&&b.threadRangeFilterValue===d[1]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:d[10],hasMoreAfter:!1})}))})}]):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFilteredThreadsRangesQueryStoredProcedure";a.__tables__=["filtered_threads_ranges_v3__generated"];e.exports=a}),null);
__d("LSFilteredThreadsRangesQueryStoredProcedure",["LSFilteredThreadsRangesQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFilteredThreadsRangesQuery"),e.parentThreadKey,e.filter,e.isLoadingBefore,e.isLoadingAfter,e.minThreadKey,e.maxThreadKey,e.maxLastActivityTimestampMs,e.minLastActivityTimestampMs,e.numThreads,e.numMessages,e.secondaryFilter,e.filterValue);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("ReQLPaginatedList.shared",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{ascending:a,descending:b}}f.fromIterables=a}),66);
__d("MWPBaseThreadListHooks",["I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadRangeFilter","MAWIsIDBOperational","MWThreadListSupportedThreadTypes","MWXacGating","MetaConfig","ReQL","ReQLPaginatedList.shared","ReQLSuspense","gkx","isCommunityContainersEnabled","isMWXacGroupThread","mwCMIsAnyCMThread","mwCMIsThreadBumped","mwIsThreadDisabled","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,g){var j=d("react-compiler-runtime").c(16),k;j[0]!==e?(k=e===void 0?(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):e,j[0]=e,j[1]=k):k=j[1];var l=k;j[2]!==l?(e=(i||(i=d("I64"))).equal(l,(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE)),j[2]=l,j[3]=e):e=j[3];var m=e;j[4]!==a||j[5]!==m||j[6]!==b?(k=function(){return m?d("ReQL").fromTableDescending(a.tables.threads_ranges_v2__generated).getKeyRange(b):d("ReQL").empty()},e=[a,b,m],j[4]=a,j[5]=m,j[6]=b,j[7]=k,j[8]=e):(k=j[7],e=j[8]);k=d("ReQLSuspense").useFirst(k,e,f.id+":60");var n;j[9]!==a||j[10]!==l||j[11]!==m||j[12]!==b||j[13]!==g?(e=function(){return m?d("ReQL").empty():d("ReQL").fromTableDescending(a.tables.filtered_threads_ranges_v3__generated).getKeyRange(b).filter(function(a){return(i||(i=d("I64"))).equal(a.threadRangeFilter,l)&&(g==null||(i||(i=d("I64"))).equal(a.secondaryThreadRangeFilter,g))})},n=[a,l,b,g,m],j[9]=a,j[10]=l,j[11]=m,j[12]=b,j[13]=g,j[14]=e,j[15]=n):(e=j[14],n=j[15]);j=d("ReQLSuspense").useFirst(e,n,f.id+":67");return m?k:j}function b(a){var b=d("react-compiler-runtime").c(4),e=c("MetaConfig")._("44"),f=a!=null?(i||(i=d("I64"))).equal(a.minLastActivityTimestampMs,(i||(i=d("I64"))).zero)||(i||(i=d("I64"))).equal(a.minLastActivityTimestampMs,(i||(i=d("I64"))).one)||(e?(i||(i=d("I64"))).equal(a.minLastActivityTimestampMs,(i||(i=d("I64"))).max_int):!1)?null:a.minLastActivityTimestampMs:null,g=a!=null?(i||(i=d("I64"))).equal(a.maxLastActivityTimestampMs,(i||(i=d("I64"))).zero)||(i||(i=d("I64"))).equal(a.maxLastActivityTimestampMs,(i||(i=d("I64"))).one)?null:a.maxLastActivityTimestampMs:null;b[0]!==g||b[1]!==f?(e=function(){var a;return{gte:d("ReQL").key((a=f)!=null?a:(i||(i=d("I64"))).min_int),lte:d("ReQL").key((a=g)!=null?a:(i||(i=d("I64"))).max_int)}},a=[g,f],b[0]=g,b[1]=f,b[2]=e,b[3]=a):(e=b[2],a=b[3]);b=d("Int64Hooks").useMemoInt64(e,a);return b}function e(a){var b=d("react-compiler-runtime").c(11),e=a.customThreadFilter,g=a.db,k=a.parentThreadKey,l=d("MAWIsIDBOperational").useIsIDBOperational();b[0]!==e||b[1]!==g.tables.community_folders||b[2]!==g.tables.threads||b[3]!==l||b[4]!==k?(a=function(){var a,b=(a=d("ReQL")).fromTableDescending(g.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(k),n=a.fromTableDescending(g.tables.threads.index("secondaryParentThreadKeyLastActivityTimestampMs")).getKeyRange(k);b=a.union(b,n).map(function(a){if(!c("mwCMIsThreadBumped")(a))return{hideFromThreadlist:!1,thread:a};var b=c("gkx")("23433"),e=c("isCommunityContainersEnabled")();if(b&&e){if((i||(i=d("I64"))).equal(a.threadType,(h||(h=d("LSIntEnum"))).ofNumber(18)))return{hideFromThreadlist:!0,thread:a}}else if((i||(i=d("I64"))).equal(a.threadType,(h||(h=d("LSIntEnum"))).ofNumber(17)))return{hideFromThreadlist:!0,thread:a};b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.community_folders,["isHidden","takedownState"]).getKeyRange((i||(i=d("I64"))).equal(a.threadType,(h||(h=d("LSIntEnum"))).ofNumber(17))?a.threadKey:a.parentThreadKey),f.id+":181");e=(b==null?void 0:b.takedownState)!=null?(i||(i=d("I64"))).equal(b.takedownState,(h||(h=d("LSIntEnum"))).ofNumber(1)):!1;b=(b==null?void 0:b.isHidden)===!0;b=b||e;return{hideFromThreadlist:b,thread:a}}).filter(function(a){var b=a.hideFromThreadlist,f=a.thread;if(b)return!1;a=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType);return(!a||l)&&(c("mwCMIsAnyCMThread")(f.threadType)?!c("mwIsThreadDisabled")(f.takedownState):!0)&&c("MWThreadListSupportedThreadTypes").findIndex(function(a){return(i||(i=d("I64"))).equal(f.threadType,a)})!==-1&&(h||(h=d("LSIntEnum"))).toNumber(f.authorityLevel)>c("LSAuthorityLevel").CLIENT_PARTIAL&&(d("MWXacGating").isGroupsEnabled()||!c("isMWXacGroupThread")(f))&&(!e||e(f))}).map(j);return d("ReQLPaginatedList.shared").fromIterables(a.empty(),b)},b[0]=e,b[1]=g.tables.community_folders,b[2]=g.tables.threads,b[3]=l,b[4]=k,b[5]=a):a=b[5];var m;b[6]!==e||b[7]!==g||b[8]!==l||b[9]!==k?(m=[g,l,k,e],b[6]=e,b[7]=g,b[8]=l,b[9]=k,b[10]=m):m=b[10];b=d("Int64Hooks").useMemoInt64(a,m);return b}function j(a){a=a.thread;return a}g.useMWPBaseThreadListDefaultThreadsRange=a;g.useMWPBaseThreadListBounds=b;g.useMWPBaseThreadListFilteredData=e}),98);
__d("MWPBaseThreadListUtils",["I64","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,g,j,k){k===void 0&&(k=!1);var l=(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE));c("promiseDone")(async function(){var m=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((i||(i=d("LSIntEnum"))).ofNumber(1)));m!=null&&(h||(h=d("I64"))).equal(m.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))&&await a.runInTransaction(function(a){j==null?void 0:j();if(l)return c("LSThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{additionalPagesToFetch:(h||(h=d("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:h.max_int,maxThreadKey:h.max_int,minLastActivityTimestampMs:h.max_int,minThreadKey:h.max_int,parentThreadKey:b,shouldSkipE2eeThreadsRanges:k});else return c("LSFilteredThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{filter:e,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:(h||(h=d("I64"))).max_int,maxThreadKey:h.max_int,minLastActivityTimestampMs:h.max_int,minThreadKey:h.max_int,parentThreadKey:b,secondaryFilter:g})},"readwrite","ui",void 0,f.id+":56")}())}g.loadMoreThreadsForEmptyRangeDefault=a}),98);
__d("ReQLScrollAnchored.react",["BaseScrollableAreaContext","BaseThemeProvider.react","CometPlaceholder.react","CometSSRSuspendOnServer.react","MWXScrollableAreaStyles","intersectionObserverEntryIsIntersecting","react","react-compiler-runtime","stylex","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var aa=b.useContext,ba=b.useEffect,ca=b.useImperativeHandle,da=b.useLayoutEffect;b.useMemo;var k=b.useRef,ea=b.useState,fa=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.render=function(){return c.props.children},a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.componentDidUpdate=function(a,b,c){b=a.children;this.props.componentDidUpdate(b,c)};c.getSnapshotBeforeUpdate=function(a){a=a.children;return this.props.getSnapshotBeforeUpdate(a)};return a}(j.PureComponent),ga={overscrollBehaviorContain:{overscrollBehavior:"xish69e",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},ha=typeof ResizeObserver!=="undefined";function ia(a){var b=a.clientHeight;a=a.scrollTop;return a>b*2}function ja(a,b){return a-b.scrollTop>b.clientHeight*2}var ka=5;function a(a){var b=d("react-compiler-runtime").c(98),e=a.ref,f=a.hasReachedBottom,g=a.hasReachedTop,i=a.setScrollTopInResetForBottomAnchor,l=a.initialAnchor,m=a.initialRenderComplete,n=a.onReachingBottom,o=a.onReachingTop,p=a.onScroll,q=a.onUserScroll,r=a.renderEmptyContent,s=a.renderFooter,t=a.renderHeader,u=a.renderHeaderContentSpacer,v=a.renderLoadingAnimation,w=a.isSufficientContentLoadedAbove,x=a.isSufficientContentLoadedBelow,y=a.headerStyle,z=a.snapThreshold,A=a.xstyle,B=a.shouldOverscrollBehaviourContain,C=a.elements,D=f===void 0?!0:f,E=g===void 0?!0:g,F=i===void 0?!0:i,G=w===void 0?ia:w,H=x===void 0?ja:x,I=z===void 0?5:z;a=aa(c("BaseScrollableAreaContext"));var J=k();b[0]===Symbol.for("react.memo_cache_sentinel")?(f={getDOMNode:function(){return J==null?void 0:J.current}},b[0]=f):f=b[0];b[1]!==a?(g=[].concat(a,[f]),b[1]=a,b[2]=g):g=b[2];i=g;w=i;var la=k(),K=k();x=ea(l);z=x[0];var L=x[1],M=k(l),N=k(null);b[3]!==D||b[4]!==E||b[5]!==G||b[6]!==H||b[7]!==n||b[8]!==o?(f=function(){var a=J.current,b=K.current;if(a==null||b==null||a.offsetParent===null||b.offsetParent===null)return;b=H(b.clientHeight,a);N.current=a.scrollTop;if(!b&&!D&&n!=null){n();return}b=G(a);N.current=a.scrollTop;!b&&!E&&o!=null&&o()},b[3]=D,b[4]=E,b[5]=G,b[6]=H,b[7]=n,b[8]=o,b[9]=f):f=b[9];var O=f;b[10]!==C.length||b[11]!==O?(a=[O,C.length],b[10]=C.length,b[11]=O,b[12]=a):a=b[12];ba(O,a);b[13]!==D||b[14]!==I?(g=function(a){if(a.scrollHeight===a.clientHeight)return;var b=a.scrollHeight-a.clientHeight-a.scrollTop<I&&D?"bottom":"top";L(M.current=b);N.current=a.scrollTop},b[13]=D,b[14]=I,b[15]=g):g=b[15];var P=g;b[16]!==p?(i=function(){var a=J.current,b=N.current;if(b==null||a==null)return;a.scrollTop!==b&&(a.scrollTop=b,p&&p(a))},b[16]=p,b[17]=i):i=b[17];var Q=i;b[18]!==D||b[19]!==E||b[20]!==l||b[21]!==p||b[22]!==F||b[23]!==I?(x=function(){var a=J.current,b=K.current;if(a==null||b==null)return;l==="bottom"?(F&&(a.scrollTop=a.scrollHeight),p&&p(a)):E||(a.scrollTop=b.offsetTop,p&&p(a));D&&a.scrollHeight-a.clientHeight-a.scrollTop<I?L(M.current="bottom"):L(M.current=l);N.current=a.scrollTop},b[18]=D,b[19]=E,b[20]=l,b[21]=p,b[22]=F,b[23]=I,b[24]=x):x=b[24];var R=x,ma=k(!1);b[25]!==R?(f=function(){if(ma.current)return;R();ma.current=!0},a=[R],b[25]=R,b[26]=f,b[27]=a):(f=b[26],a=b[27]);da(f,a);b[28]!==m||b[29]!==p?(g=function(){var a=J.current;if(a==null)return;m&&a.scrollHeight>a.clientHeight&&m();M.current==="bottom"&&(a.scrollTop=a.scrollHeight,p&&p(a));N.current=a.scrollTop},b[28]=m,b[29]=p,b[30]=g):g=b[30];var S=g;b[31]!==O||b[32]!==p||b[33]!==q||b[34]!==P?(i=function(){var a=J.current;if(a==null)return;p&&p(a);if(a.scrollTop===N.current)return;N.current=null;O();P(a);q&&q()},b[31]=O,b[32]=p,b[33]=q,b[34]=P,b[35]=i):i=b[35];var T=i;b[36]!==O||b[37]!==S?(x=function(){S(),O()},b[36]=O,b[37]=S,b[38]=x):x=b[38];var U=x;b[39]!==S?(f=function(){return S()},b[39]=S,b[40]=f):f=b[40];a=f;var V=c("useResizeObserver")(a),W=c("useResizeObserver")(U);b[41]!==V?(g=function(a){V(a),K.current=a},b[41]=V,b[42]=g):g=b[42];var X=g;b[43]!==W?(i=function(a){W(a),J.current=a},b[43]=W,b[44]=i):i=b[44];var Y=i;b[45]!==p?(x=function(a,b){if(b!=null){a=b.element;var c=b.height;b=b.scrollAreaElement;a=a.clientHeight;N.current=b.scrollTop;a!==c&&!(a<=c&&M.current==="bottom")&&(b.scrollTop=b.scrollTop+(a-c),N.current=b.scrollTop,p&&p(b))}},b[45]=p,b[46]=x):x=b[46];var Z=x;b[47]!==D||b[48]!==p?(f=function(){if(J.current!=null){var a=J.current;a.scrollTop=a.scrollHeight;N.current=a.scrollTop;p&&p(a)}L(M.current=D?"bottom":"top")},b[47]=D,b[48]=p,b[49]=f):f=b[49];var $=f;b[50]===Symbol.for("react.memo_cache_sentinel")?(a=function(){if(J.current!=null){var a=J.current,b=a.scrollHeight-a.scrollTop-a.clientHeight<ka;N.current=a.scrollTop;return b}else return!1},b[50]=a):a=b[50];var na=a,oa=k(null);b[51]===Symbol.for("react.memo_cache_sentinel")?(g=function(a,b){var d=oa.current,e=J.current;if(d!=null&&e!=null){var f=new IntersectionObserver(function(a){a=a[0];(a.boundingClientRect.height!==0||a.boundingClientRect.width!==0)&&b(c("intersectionObserverEntryIsIntersecting")(a))},{root:e,rootMargin:a+"px"});f.observe(d);return function(){return f.disconnect()}}},b[51]=g):g=b[51];var pa=g;b[52]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var a=J.current;if(a!=null){var b=a.scrollHeight-a.clientHeight>0;N.current=a.scrollTop;return b}return!1},b[52]=i):i=b[52];var qa=i;b[53]===Symbol.for("react.memo_cache_sentinel")?(x=function(){var a=J.current;if(a==null)return null;var b={clientHeight:a.clientHeight,scrollHeight:a.scrollHeight,scrollTop:a.scrollTop};N.current=a.scrollTop;return b},b[53]=x):x=b[53];var ra=x;b[54]!==R||b[55]!==Q||b[56]!==$?(f=function(){return{doesContentFillScroll:qa,getScrollAreaElement:function(){return J.current},getScrollerMeasurements:ra,isAtBottom:na,onCloseToBottom:pa,resetScrollPosition:R,restoreScrollPosition:Q,scrollToBottom:$}},a=[qa,pa,R,Q,$],b[54]=R,b[55]=Q,b[56]=$,b[57]=f,b[58]=a):(f=b[57],a=b[58]);ca(e,f,a);b[59]!==C[0]||b[60]!==C.length||b[61]!==E?(g=function(a){var b=K.current,c=J.current;if(b!=null&&c!=null&&!(E&&c.scrollTop===0)&&(!a.length||C.length&&a[0].key!==C[0].key&&a.length!==C.length)){a=b.clientHeight;N.current=c.scrollTop;return{element:b,height:a,scrollAreaElement:c}}return null},b[59]=C[0],b[60]=C.length,b[61]=E,b[62]=g):g=b[62];b[63]!==C||b[64]!==Z||b[65]!==g?(i=j.jsx(fa,{componentDidUpdate:Z,getSnapshotBeforeUpdate:g,children:C}),b[63]=C,b[64]=Z,b[65]=g,b[66]=i):i=b[66];x=i;var sa=x;b[67]!==A?(e=(h||(h=c("stylex"))).props(A),b[67]=A,b[68]=e):e=b[68];b[69]!==z?(f={0:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6 x1xzczws"}}[!!(z==="bottom")<<0],b[69]=z,b[70]=f):f=b[70];b[71]!==X||b[72]!==C.length||b[73]!==sa||b[74]!==Z||b[75]!==S||b[76]!==T||b[77]!==U||b[78]!==D||b[79]!==E||b[80]!==y||b[81]!==r||b[82]!==s||b[83]!==t||b[84]!==u||b[85]!==v||b[86]!==Y||b[87]!==B?(a=j.jsx(c("BaseThemeProvider.react"),{children:function(a,b){return j.jsxs("div",{className:(h||(h=c("stylex")))(ga.scrollArea,B===!0&&ga.overscrollBehaviorContain,c("MWXScrollableAreaStyles").themed,a),"data-testid":void 0,onScroll:T,ref:Y,style:b,children:[j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.ScrollArea",children:j.jsx(c("CometSSRSuspendOnServer.react"),{children:!ha&&j.jsx("iframe",babelHelpers.extends({className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x17qophe x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3"},{ref:function(a){a!=null&&(a.contentWindow.onresize=U)}}))})}),j.jsxs(fa,{componentDidUpdate:Z,getSnapshotBeforeUpdate:function(){var a=la.current,b=J.current;if(a!=null&&b!=null){N.current=b.scrollTop;if(N.current!==0){var c=a.clientHeight;return{element:a,height:c,scrollAreaElement:b}}}return null},children:[j.jsx("div",babelHelpers.extends({},h.props(y),{ref:la,children:E?t&&t():v&&v("onTop",C.length)})),r!=null?r():null]}),u!=null&&u(),j.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x1us19tq"}}[!!(C.length!==0&&!E&&!D)<<0],{children:j.jsxs("div",babelHelpers.extends({className:"x1n2onr6"},{ref:X,children:[j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.elementsHOC",children:j.jsx(c("CometSSRSuspendOnServer.react"),{children:!ha&&j.jsx("iframe",babelHelpers.extends({className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x17qophe x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3"},{ref:function(a){a!=null&&(a.contentWindow.onresize=S)}}))})}),sa,j.jsx("div",babelHelpers.extends({className:"x1ey2m1c xjm9jq1 x1y332i5 x47corl x10l6tqk"},{ref:oa})),D?s&&s():v&&v("onBottom",C.length)]}))}))]})}}),b[71]=X,b[72]=C.length,b[73]=sa,b[74]=Z,b[75]=S,b[76]=T,b[77]=U,b[78]=D,b[79]=E,b[80]=y,b[81]=r,b[82]=s,b[83]=t,b[84]=u,b[85]=v,b[86]=Y,b[87]=B,b[88]=a):a=b[88];b[89]!==f||b[90]!==a?(g=j.jsx("div",babelHelpers.extends({},f,{children:a})),b[89]=f,b[90]=a,b[91]=g):g=b[91];b[92]!==e||b[93]!==g?(i=j.jsx("div",babelHelpers.extends({},e,{children:g})),b[92]=e,b[93]=g,b[94]=i):i=b[94];b[95]!==w||b[96]!==i?(x=j.jsx(c("BaseScrollableAreaContext").Provider,{value:w,children:i}),b[95]=w,b[96]=i,b[97]=x):x=b[97];return x}g.default=a}),98);
__d("useStableValue",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useRef;function a(a){return k(a,(i||(i=d("I64"))).equal)}function k(a,b){var c=j(a);b(c.current,a)||(c.current=a);return c.current}g.useStableI64=a;g.useStableValue=k}),98);
__d("useStableBounds",["deepEquals","useStableValue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("useStableValue").useStableValue(a,c("deepEquals"))}g["default"]=a}),98);
__d("ReQLPaginatedList.react",["FBLogger","I64","PromiseOrValue","ReQL","ReQLScrollAnchored.react","ReQLSuspense","SortedAsyncIterable","deepEquals","gkx","justknobx","promiseDone","react","useMergeRefs","useStableBounds","useStableValue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useCallback,m=b.useEffect,aa=b.useLayoutEffect,n=b.useMemo,o=b.useRef,p=b.useState,q=b.useTransition;function r(a,b){return b==null?a:a.bounds(b)}function s(a){if(a instanceof Promise)throw a;return a}function t(a){return{direction:a.direction,iterator:function(b,c){var e=a.iterator(b,c);return{next:function(a){return(i||(i=d("PromiseOrValue"))).map(e.next(a),function(a){return a.done?a:{done:!1,value:[a.value[0],a.value]}})}}},keyLength:a.keyLength,subscribe:function(b,c){return a.subscribe(async function(a,c,d){c.operation==="delete"?await b(a,c,d):c.operation==="add"?await b(a,{operation:"add",value:[a,c.value]},d):c.operation==="put"&&await b(a,{operation:"put",value:[a,c.value]},d)},c)}}}function ba(a){var b=a.clientHeight;a=a.scrollTop;return a>b*2}function a(a){var b=a.bounds,e=a.direction,g=e===void 0?"asc":e;e=a.hasReachedBottom;var h=e===void 0?!0:e;e=a.hasReachedTop;var i=e===void 0?!0:e;e=a.imperativeRef;var j=a.initialAnchor,da=a.initialRenderComplete,u=a.onPageLoaded,v=a.onReachingBottom,w=a.onReachingTop,ea=a.onScroll,fa=a.onUserScroll,x=a.pageSize,y=x===void 0?15:x;x=a.renderEmptyContent;var z=a.renderFooter,ga=a.renderHeader,ha=a.renderHeaderContentSpacer,A=a.renderItem,ia=a.renderLoadingAnimation,ja=a.headerStyle,B=a.isSufficientContentLoadedAbove;B=B===void 0?ba:B;var ka=a.isSufficientContentLoadedBelow,C=a.snapThreshold;C=C===void 0?5:C;var D=a.setScrollTopInResetForBottomAnchor;D=D===void 0?!0:D;var E=a.data,F=E.ascending,G=E.descending;E=a.xstyle;var H=a.isLogDuplicatedItemEnabled;H=H===void 0?!1:H;a=a.shouldOverscrollBehaviourContain;var I=q();I[0];var J=I[1],K=c("useStableBounds")(b);if(j!=null&&j!=="top"&&j!=="bottom"){I=r(G,K).bounds({lt:j}).iterator(new WeakMap()).next();if(I instanceof Promise)throw I;j=I.done?"top":I.value[0]}var L=d("useStableValue").useStableValue(j,c("deepEquals")),M=n(function(){var a,b;L==="top"||L==null?(a=d("ReQL").empty(),b=g==="asc"?F:G):L==="bottom"?(a=g==="asc"?G:F,b=d("ReQL").empty()):(a=g==="asc"?G.bounds({lt:L}):F.bounds({gt:L}),b=g==="asc"?F.bounds({gte:L}):G.bounds({lte:L}));return{after:b,before:a}},[L,F,G,g]),N=o(!1),O=n(function(){var a=s(d("SortedAsyncIterable").toArray(r(M.before,K).take(L==="bottom"?y:0),f.id+":204")).reverse(),b=s(d("SortedAsyncIterable").toArray(r(M.after,K).take(y),f.id+":211")),c=L==="bottom"?!0:b.length<y,e=L==="top"||L==null?!0:L==="bottom"?a.length<y:!1;return{firstKey:e?void 0:L==="bottom"?(e=a[0])==null?void 0:e[0]:(a=b[0])==null?void 0:a[0],lastKey:c?void 0:(e=b[b.length-1])==null?void 0:e[0]}},[L,K,M.after,M.before,y]);b=p(function(){return{anchor:L,iterables:M,values:O}});I=b[0];var P=b[1];j=I.iterables===M&&I.anchor===L;b=j?I.values:O;var Q=b.firstKey,R=b.lastKey,S=d("ReQLSuspense").useArray(function(){return t(Q==null?r(M.before,K).take(y):r(M.before,K).bounds(g==="asc"?{gte:Q}:{lte:Q}))},[K,g,Q,M.before,y],f.id+":246"),T=n(function(){return[].concat(S).reverse()},[S]);m(function(){T.length===y&&Q==null&&J(function(){return P({anchor:L,iterables:M,values:{firstKey:T[0][0],lastKey:R}})})},[T,Q,L,M,R,y]);var U=d("ReQLSuspense").useArray(function(){return t(R==null?r(M.after,K).take(y):r(M.after,K).bounds(g==="asc"?{lte:R}:{gte:R}))},[K,g,M.after,R,y],f.id+":273");m(function(){U.length===y&&R==null&&J(function(){return P({anchor:L,iterables:M,values:{firstKey:Q,lastKey:U[U.length-1][0]}})})},[U,Q,L,M,R,y]);var V=n(function(){return[].concat(T,U)},[T,U]),W=d("ReQLSuspense").useFirst(function(){return V.length===0?d("ReQL").empty():r(M.before,K).bounds(g==="asc"?{lt:V[0][0]}:{gt:V[0][0]})},[V,K,g,M.before],f.id+":300")==null,X=d("ReQLSuspense").useFirst(function(){return V.length===0?d("ReQL").empty():r(M.after,K).bounds(g==="asc"?{gt:V[V.length-1][0]}:{lt:V[V.length-1][0]})},[V,K,g,M.after],f.id+":310")==null;j=q();var Y=j[0],la=j[1];I=l(function(){if(N.current||Y)return;if(X){if(!h&&v!=null)return v()}else{N.current=!0;c("promiseDone")(Promise.resolve(d("SortedAsyncIterable").toArray(r(g==="asc"?F:G,K).bounds(g==="asc"?{gt:V[V.length-1][0]}:{lt:V[V.length-1][0]}).take(y),f.id+":337")),function(a){N.current=!1,u!=null&&u("bottom",V[V.length-1][1],a.map(function(a){return a[1]})),la(function(){var b;return P({anchor:L,iterables:M,values:{firstKey:Q,lastKey:(b=(b=a[a.length-1])==null?void 0:b[0])!=null?b:V[V.length-1][0]}})})});return}},[Y,X,h,v,g,F,G,K,V,y,u,Q,M,L]);b=q();var ma=b[0],na=b[1],oa=o(!0);j=l(function(){if(N.current||ma)return;if(W){if(!i)return w==null?void 0:w();return}N.current=!0;c("promiseDone")(Promise.resolve(d("SortedAsyncIterable").toArray(r(g==="asc"?G:F,K).bounds(g==="asc"?{lt:V[0][0]}:{gt:V[0][0]}).take(y),f.id+":409")),function(a){N.current=!1,u!=null&&(oa.current?(oa.current=!1,u("top",null,V.slice(0,y).map(function(a){return a[1]}).reverse())):u("top",V[0][1],a.map(function(a){return a[1]}))),a.reverse(),na(function(){var b;return P({anchor:L,iterables:M,values:{firstKey:(b=(b=a[0])==null?void 0:b[0])!=null?b:V[0][0],lastKey:R}})})})},[ma,W,i,w,g,G,F,K,V,y,u,R,M,L]);var Z=W&&i?0:1,$=V.length-(X&&h?0:1);b=n(function(){var a=new Array($>Z?$-Z:0);for(var b=Z;b<$;b++){var d;a[b-Z]=A(V[b][1],{nextItem:(d=V[b+1])==null?void 0:d[1],previousItem:(d=V[b-1])==null?void 0:d[1]},c("gkx")("7810")?$-Z-b:0)}return a},[V,Z,A,$]);var pa=o(null);e=c("useMergeRefs")(pa,e);aa(function(){var a;(a=pa.current)==null?void 0:a.resetScrollPosition()},[L]);var qa=l(function(){return z==null?void 0:z(V.length>0?V[V.length-1][1]:void 0)},[V,z]);ca(H,V);return k.jsx(c("ReQLScrollAnchored.react"),{elements:b,hasReachedBottom:X&&h,hasReachedTop:W&&i,headerStyle:ja,initialAnchor:L==="bottom"?"bottom":"top",initialRenderComplete:da,isSufficientContentLoadedAbove:B,isSufficientContentLoadedBelow:ka,onReachingBottom:I,onReachingTop:j,onScroll:ea,onUserScroll:fa,pageSize:y,ref:e,renderEmptyContent:x,renderFooter:qa,renderHeader:ga,renderHeaderContentSpacer:ha,renderLoadingAnimation:ia,setScrollTopInResetForBottomAnchor:D,shouldOverscrollBehaviourContain:a,snapThreshold:C,xstyle:E})}a.displayName=a.name+" [from "+f.id+"]";function ca(a,b){var e=p(!1),f=e[0],g=e[1];m(function(){try{if(!c("justknobx")._("1789"))return;if(a&&!f){var e=new Set(),h=[];for(var i of b){var k=i[1];if(typeof k==="object"&&(k==null?void 0:k.threadKey)!=null&&(j||(j=d("I64"))).isI64(k==null?void 0:k.threadKey)){k=(j||(j=d("I64"))).to_string(k==null?void 0:k.threadKey);e.has(k)&&h.push(k);e.add(k)}}e.size!==b.length&&(g(!0),c("FBLogger")("messenger_web").warn("Duplicated thread item detected in ReQLPaginatedList %s",h.join(",")))}}catch(a){c("FBLogger")("messenger_web").warn("Duplicated thread item error",a)}},[b,f,a])}g.default=a}),98);
__d("useMWCMMarkBumpedThreadsSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWCMMarkBumpedThreadsSeen").__setRef("useMWCMMarkBumpedThreadsSeen");function a(a){var b=d("react-compiler-runtime").c(3),c,e;b[0]!==a?(c=function(){return{load:async function(){var b=await h.load();return function(c){return b.MWCMMarkBumpedThreadsSeen(a,c)}}}},e=[a],b[0]=a,b[1]=c,b[2]=e):(c=b[1],e=b[2]);return d("Int64Hooks").useMemoInt64(c,e)}g.default=a}),98);
__d("useMarkSeenWhenVisible",["CometDebounce","Int64Hooks","ReQL","UserActivity","promiseDone","react","useMWCMMarkBumpedThreadsSeen","useMWPMarkSeen","useMWPWatchFolderFocusChanges","useReStore","useSimpleImpression","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useCallback,k=b.useRef;function a(a){var b=(h||(h=c("useReStore")))(),e=k(!1),g=c("useMWCMMarkBumpedThreadsSeen")(a),i=c("useVisibilityObserver")({onHidden:function(){e.current=!1},onVisible:function(){e.current=!0}}),l=c("useMWPMarkSeen")(a),m=c("CometDebounce")(j(function(){c("promiseDone")(async function(){var a=await Promise.all([l.load(),g.load()]),c=a[0],d=a[1];await b.runInTransaction(async function(a){await c(a),await d(a)},"readwrite",void 0,void 0,f.id+":56")}())},[l,g,b]),{leading:!0,wait:500});c("useMWPWatchFolderFocusChanges")(m,e);c("useSimpleImpression")(m);d("Int64Hooks").useEffectInt64(function(){return d("ReQL").fromTableDescending(b.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),[]).getKeyRange(a).take(1).subscribe(function(){c("UserActivity").isOnTab()&&e.current===!0&&m()})},[b,a,m]);return i}g.default=a}),98);
__d("MWPBaseThreadList.react",["Box.react","FBLogger","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","MAWMaybeWithTimeout","MWPBaseThreadListHooks","MWPBaseThreadListUtils","MWThreadListFocusableTable.react","ReQL","ReQLPaginatedList.react","ReQLSuspense","react","react-compiler-runtime","useMarkSeenWhenVisible","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));b=i;b.useCallback;var m=b.useEffect,n={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},o=1e4;function p(a,b,e,g){g===void 0&&(g=!1),void d("MAWMaybeWithTimeout").maybeWithTimeout(a.runInTransaction(async function(a){var f;f=await (f=a.threads_ranges_v2__generated).get.apply(f,b);if(f==null||f.isLoadingBefore)return;e&&e();return c("LSThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{additionalPagesToFetch:(j||(j=d("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:f.maxLastActivityTimestampMs,maxThreadKey:f.maxThreadKey,minLastActivityTimestampMs:f.minLastActivityTimestampMs,minThreadKey:f.minThreadKey,parentThreadKey:f.parentThreadKey,shouldSkipE2eeThreadsRanges:g})},"readwrite","ui",void 0,f.id+":91"),o,function(){c("FBLogger")("messenger_web").warn("Paginated threads load took longer than "+o/1e3+" seconds.\n        parent_thread_key: "+(j||(j=d("I64"))).to_string(b[0])+"\n        min_thread_key: "+j.to_string(b[1])+"\n        min_last_activity_timestamp_ms: "+j.to_string(b[2]))})}function q(a,b,e,g,h){g===void 0&&(g=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE)),void d("MAWMaybeWithTimeout").maybeWithTimeout(a.runInTransaction(async function(a){var d;d=await (d=a.filtered_threads_ranges_v3__generated).get.apply(d,b);if(d==null||d.isLoadingBefore)return;h&&h();return c("LSFilteredThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{filter:e,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:d.maxLastActivityTimestampMs,maxThreadKey:d.maxThreadKey,minLastActivityTimestampMs:d.minLastActivityTimestampMs,minThreadKey:d.minThreadKey,parentThreadKey:d.parentThreadKey,secondaryFilter:g})},"readwrite","ui",void 0,f.id+":150"),o,function(){c("FBLogger")("messenger_web").warn("Filtered paginated threads load took longer than "+o/1e3+" seconds.\n        parent_thread_key: "+(j||(j=d("I64"))).to_string(b[0])+"\n        min_thread_key: "+j.to_string(b[1])+"\n        min_last_activity_timestamp_ms: "+j.to_string(b[2])+"\n        thread_range_filter: "+j.to_string(b[3])+"\n        secondary_thread_range_filter: "+j.to_string(b[5]))})}function r(a,b,e,f,g,h){f===void 0&&(f=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE));h===void 0&&(h=!1);if(b==null)return;if(!b.threadRangeFilter){var i=[b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs];p(a,i,g,h)}else{i=[b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs,b.threadRangeFilter,b.folderName,b.secondaryThreadRangeFilter,b.threadRangeFilterValue];q(a,i,e,f,g)}}function s(a,b,e,g){var h=d("react-compiler-runtime").c(14),i;h[0]!==e?(i=(j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE)),h[0]=e,h[1]=i):i=h[1];var l=i,m;h[2]!==a||h[3]!==l||h[4]!==b?(i=function(){return l?d("ReQL").fromTableDescending(a.tables.threads_ranges_v2__generated).getKeyRange(b):d("ReQL").empty()},m=[a,b,l],h[2]=a,h[3]=l,h[4]=b,h[5]=i,h[6]=m):(i=h[5],m=h[6]);i=d("ReQLSuspense").useFirst(i,m,f.id+":250");var n;h[7]!==a||h[8]!==e||h[9]!==l||h[10]!==b||h[11]!==g?(m=function(){return l?d("ReQL").empty():d("ReQL").fromTableDescending(a.tables.filtered_threads_ranges_v3__generated).getKeyRange(b).filter(function(a){return(j||(j=d("I64"))).equal(a.threadRangeFilter,e)&&(g==null||(j||(j=d("I64"))).equal(a.secondaryThreadRangeFilter,g))})},n=[a,e,b,g,l],h[7]=a,h[8]=e,h[9]=l,h[10]=b,h[11]=g,h[12]=m,h[13]=n):(m=h[12],n=h[13]);h=d("ReQLSuspense").useFirst(m,n,f.id+":257");return l?i:h}function a(a){var b=d("react-compiler-runtime").c(70),e=a.afterContent,g=a.beforeContent,i=a.containerStyle,o=a.customThreadFilter,p=a.emptyContent,q=a.filter,t=a.gridLabel,u=a.imperativeRef,v=a.isSufficientContentLoadedBelow,w=a.loadMoreThreads,x=a.loadMoreThreadsForEmptyRange,y=a.onLoadMoreThreads,z=a.onReachingTop,A=a.onScroll,B=a.onThreadsLoaded,C=a.pageSize,D=a.parentThreadKey,E=a.renderItem,F=a.renderLoadingAnimation,G=a.role,H=a.secondaryFilter,I=a.setIsEmptyInbox;a=a.shouldSkipE2eeThreadsRanges;var J;b[0]!==q?(J=q===void 0?(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE):q,b[0]=q,b[1]=J):J=b[1];var K=J,L=w===void 0?r:w,M=x===void 0?d("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault:x;q=G===void 0?"grid":G;var N=a===void 0?!1:a,O=(h||(h=c("useReStore")))(),P=s(O,D,K,H);P!=null&&!P.isLoadingBefore&&(B&&B());var Q=d("MWPBaseThreadListHooks").useMWPBaseThreadListBounds(P);b[2]!==o||b[3]!==O||b[4]!==D?(J={customThreadFilter:o,db:O,parentThreadKey:D},b[2]=o,b[3]=O,b[4]=D,b[5]=J):J=b[5];var R=d("MWPBaseThreadListHooks").useMWPBaseThreadListFilteredData(J);b[6]!==Q||b[7]!==R.descending?(w=function(){return R.descending.bounds(Q)},b[6]=Q,b[7]=R.descending,b[8]=w):w=b[8];b[9]!==Q||b[10]!==R?(x=[Q,R],b[9]=Q,b[10]=R,b[11]=x):x=b[11];var S=d("ReQLSuspense").useFirst(w,x,f.id+":344")==null;b[12]!==S||b[13]!==I?(G=function(){I&&I(S)},a=[S,I],b[12]=S,b[13]=I,b[14]=G,b[15]=a):(G=b[14],a=b[15]);m(G,a);b[16]!==O||b[17]!==P||b[18]!==K||b[19]!==M||b[20]!==y||b[21]!==D||b[22]!==H?(B=function(){P==null&&M(O,D,K,H,y)},o=[D,P,O,K,H,y,M],b[16]=O,b[17]=P,b[18]=K,b[19]=M,b[20]=y,b[21]=D,b[22]=H,b[23]=B,b[24]=o):(B=b[23],o=b[24]);d("Int64Hooks").useEffectInt64(B,o);J=c("useMarkSeenWhenVisible")(D);b[25]!==O||b[26]!==P||b[27]!==K||b[28]!==L||b[29]!==y||b[30]!==H||b[31]!==N?(w=function(){L(O,P,K,H,y,N)},b[25]=O,b[26]=P,b[27]=K,b[28]=L,b[29]=y,b[30]=H,b[31]=N,b[32]=w):w=b[32];x=w;b[33]!==E?(G=function(a){return l.jsx(l.Fragment,{children:E(a)},(j||(j=d("I64"))).to_string(a.threadKey))},b[33]=E,b[34]=G):G=b[34];a=G;if(P==null){b[35]!==F?(B=F!=null?F("nullState",0):null,b[35]=F,b[36]=B):B=b[36];o=B}else{w=!P.hasMoreBefore;G=!P.hasMoreAfter;b[37]!==P.isLoadingAfter||b[38]!==P.isLoadingBefore||b[39]!==p||b[40]!==S?(B=function(){return S&&!P.isLoadingAfter&&!P.isLoadingBefore?l.jsx(c("Box.react"),{xstyle:n.emptyContentContainer,children:p}):null},b[37]=P.isLoadingAfter,b[38]=P.isLoadingBefore,b[39]=p,b[40]=S,b[41]=B):B=b[41];var T;b[42]!==e?(T=function(){return e},b[42]=e,b[43]=T):T=b[43];var U;b[44]!==g?(U=function(){return g},b[44]=g,b[45]=U):U=b[45];var V;b[46]!==Q||b[47]!==R||b[48]!==u||b[49]!==v||b[50]!==x||b[51]!==z||b[52]!==A||b[53]!==C||b[54]!==a||b[55]!==F||b[56]!==w||b[57]!==G||b[58]!==B||b[59]!==T||b[60]!==U?(V=l.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:l.jsx(c("ReQLPaginatedList.react"),{bounds:Q,data:R,direction:"desc",hasReachedBottom:w,hasReachedTop:G,imperativeRef:u,isLogDuplicatedItemEnabled:!0,isSufficientContentLoadedBelow:v,onReachingBottom:x,onReachingTop:z,onScroll:A,pageSize:C,renderEmptyContent:B,renderFooter:T,renderHeader:U,renderItem:a,renderLoadingAnimation:F,shouldOverscrollBehaviourContain:!0,xstyle:n.list})}),b[46]=Q,b[47]=R,b[48]=u,b[49]=v,b[50]=x,b[51]=z,b[52]=A,b[53]=C,b[54]=a,b[55]=F,b[56]=w,b[57]=G,b[58]=B,b[59]=T,b[60]=U,b[61]=V):V=b[61];o=V}b[62]!==i?(u=[n.container,i],b[62]=i,b[63]=u):u=b[63];b[64]!==o||b[65]!==t||b[66]!==q||b[67]!==u||b[68]!==J?(v=l.jsx(c("Box.react"),{"aria-label":t,"data-testid":void 0,ref:J,role:q,xstyle:u,children:o}),b[64]=o,b[65]=t,b[66]=q,b[67]=u,b[68]=J,b[69]=v):v=b[69];return v}g.default=a}),98);
__d("MWPParentThreadKeyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(null);g["default"]=b}),98);
__d("MWThreadListCommunityContainer.react",["CometPlaceholder.react","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSIntEnum","LSRtcCallState","LSThreadTitle.react","MAWVault","MWCMGetValidId","MWCMThreadTypes.react","MWInboxCommunityThreadsRouteBuilder","MWPIsThreadUnread","MWThreadListConsts","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListItemMoreActions.react","MWThreadListLastMessage.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXListCellPressable.react","MWXProfilePhoto.react","MWXText.react","MessengerClientEventLogger","ReQL","ReQLSuspense","emptyFunction","getLSMediaThreadPictureUrl","gkx","mwCMisStandAloneCommunity","mwIsThreadDisabled","qpl","react","react-strict-dom","requireDeferred","useMatchViewport","useMenuButtonVisibilityState","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));b=i;var m=b.useCallback,n=b.useMemo,o=c("requireDeferred")("QuickPerformanceLogger").__setRef("MWThreadListCommunityContainer.react"),p={listItemContainer:{paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0},listItemContainerForMessengerDotCom:{paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0}},q=c("qpl")._(269227335,"359");function a(a){var b,e=a.containerThread,g=a.folder,i=a.messagingEntrypoint,r=a.responsive,s=a.selected,t=d("MWPIsThreadUnread").isThreadUnread(e);a=c("useSinglePartialViewImpression")({onImpressionStart:function(){d("MessengerClientEventLogger").log({business_account_user:null,event_type:"one_px_impression",is_smc:c("mwCMisStandAloneCommunity")(g.communityType),marketplace_user:null,multiple_account_user:null,surface:{entry_point:"community_container",major_surface:"inbox_tab",minor_surface:"inbox_communities"},target:{badging:{count:t?"1":"0"},button:{type:null},community:{id:(j||(j=d("I64"))).to_string(g.folderId)},group:{id:j.to_string(g.fbGroupId)},ranking:null}})}});var u=(b=c("getLSMediaThreadPictureUrl")(e))!=null?b:"",v=n(function(){return l.jsx("div",babelHelpers["extends"]({className:"xyiysdx x14vy60q"},{children:l.jsx(c("MWXProfilePhoto.react"),{shape:"roundedRectLarge",size:48,source:{uri:u}})}))},[u]),w=n(function(){return l.jsx(c("LSThreadTitle.react"),{thread:e})},[e]),x=d("MAWVault").unvault((b=e.snippet)!=null?b:""),y=d("Int64Hooks").useMemoInt64(function(){return l.jsx(c("MWThreadListLastMessage.react"),{hasOngoingCall:!(j||(j=d("I64"))).equal(e.ongoingCallState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").NO_ONGOING_CALL)),isUnread:t,lastMessageCtaType:e.lastMessageCtaType,lastMessageTimestamp:j.to_float(e.lastActivityTimestampMs),showDisappearingMessageVisualIndicator:!1,showSnippetText:!0,showTimestamp:!0,snippet:l.jsx(c("MWThreadSnippetForDisplay.react"),{snippetRaw:x,thread:e}),thread:e})},[t,x,e]),z=n(function(){var a=(j||(j=d("I64"))).to_float(g.notificationMutedUntil);return a===-1||a===0?a:a+Date.now()},[g.notificationMutedUntil]),A=d("Int64Hooks").useMemoInt64(function(){return l.jsx(c("MWThreadListItemAddOnEnd.react"),{communityId:g.folderId,fbGroupId:g.fbGroupId,isMaximized:!1,messagingEntrypoint:"inbox",mutedUntilMs:z,parentSurface:"channel_list",showGroupsJoinChatDialog:c("emptyFunction"),threadKey:e.threadKey})},[g.fbGroupId,g.folderId,e.threadKey,z]),B=c("useMenuButtonVisibilityState")(!0),C=B[1].setListItemHovered;b=m(function(){return C(!1)},[C]);var D=m(function(){return C(!0)},[C]),E=c("mwIsThreadDisabled")(void 0,g.takedownState);r=c("gkx")("24056")?!1:r;r=c("useMatchViewport")("min","width",d("MWThreadListConsts").minimumPixelsNeededForMaxDisplay)||!r;var F=E?!1:r;E=d("Int64Hooks").useMemoInt64(function(){return F?l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWThreadListCommunityContainer",children:l.jsx(c("MWThreadListItemMoreActions.react"),{communityType:g.communityType,fbGroupId:g.fbGroupId,folderId:g.folderId,isContainerUnread:t,menuButtonVisibilityState:B,messagingEntrypoint:i,onClose:c("emptyFunction"),selected:s,thread:{threadKey:e.threadKey,threadName:e.threadName,threadType:e.threadType}})}):null},[g.communityType,g.fbGroupId,g.folderId,t,B,i,s,F,e.threadName,e.threadKey,e.threadType]);var G=d("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(j||(j=d("I64"))).to_string(e.threadKey)}),H=(h||(h=c("useReStore")))();r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(H.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(g.folderId)},[H,g.folderId],f.id+":274").filter(function(a){return!(j||(j=d("I64"))).equal(a.threadType,(k||(k=d("LSIntEnum"))).ofNumber(17))&&d("MWCMThreadTypes.react").isJoinedCMThread(a.threadType)});var I=r.filter(function(a){return d("MWPIsThreadUnread").isThreadUnread(a)}),J=I.length,K=r.filter(function(a){return!d("MWPIsThreadUnread").isThreadUnread(a)}).sort(function(a,b){return((a=a==null?void 0:a.threadName)!=null?a:"").localeCompare((a=b==null?void 0:b.threadName)!=null?a:"")}),L=K.length,M=d("MWCMGetValidId").MWCMHasValidFbGroupId(g==null?void 0:g.fbGroupId)?(j||(j=d("I64"))).to_string(g.fbGroupId):null,N=d("Int64Hooks").useCallbackInt64(function(){var a=function(a){return function(){return d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_community_container:"true",read_count:L.toString(),unread_count:J.toString()},community_id:(j||(j=d("I64"))).to_string(g.folderId),entry_point:"cm:community_container",event:"thread_open",group_id:M,source:"messenger_inbox",surface:"messenger_inbox",thread_id:a})}};if(J===1){var b=I[0]&&(j||(j=d("I64"))).to_string(I[0].threadKey);return[d("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:(j||(j=d("I64"))).to_string(g.folderId),thread_key:b}),a(b)]}if(L>0){b=K[0]&&(j||(j=d("I64"))).to_string(K[0].threadKey);return[d("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:(j||(j=d("I64"))).to_string(g.folderId),thread_key:b}),a(b)]}return[G,void 0]},[J,L,G,g.folderId,M,I,K]);r=d("Int64Hooks").useMemoInt64(function(){var a=N(),b=a[0],e=a[1];return l.jsx(c("MWXListCellPressable.react"),{addOnEnd:A,addOnStart:v,content:l.jsxs("div",{children:[l.jsx(c("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:"headline4",children:w}),l.jsx(c("MWVerticalRhythm"),{height:8}),y]}),linkProps:{passthroughProps:{isOpenedFromCommunityContainer:!0},preventLocalNavigation:!1,url:b},onPress:function(a){var b=(a=a.nativeEvent)==null?void 0:a.timeStamp;o.onReady(function(a){a.markerStart(q,(j||(j=d("I64"))).to_int32(g.folderId),b),a.markerAnnotate(q,{bool:{is_container:!0}},{instanceKey:j.to_int32(g.folderId)})});e==null?void 0:e();d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_community_container:"true",open_thread:e==null?"false":"true",read_count:L.toString(),unread_count:J.toString()},community_id:(j||(j=d("I64"))).to_string(g.folderId),entry_point:"cm:community_container",event:"community_container_open",group_id:M,source:"messenger_inbox",surface:"messenger_inbox"});d("MessengerClientEventLogger").log({business_account_user:null,event_type:"single_click",is_smc:c("mwCMisStandAloneCommunity")(g.communityType),marketplace_user:null,multiple_account_user:null,surface:{entry_point:"community_container",major_surface:"inbox_tab",minor_surface:"inbox_communities"},target:{badging:{count:t?"1":"0"},button:{type:null},community:{id:j.to_string(g.folderId)},group:{id:j.to_string(g.fbGroupId)},ranking:null}})},selected:s})},[N,A,v,w,y,s,L,J,g.folderId,g.communityType,g.fbGroupId,M,t]);return l.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,onMouseEnter:D,onMouseLeave:b,ref:a,role:"row",style:[p.listItemContainer,c("gkx")("23219")?p.listItemContainerForMessengerDotCom:!1],children:l.jsxs(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[l.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:l.jsx(d("react-strict-dom").html.div,{role:"gridcell",children:r})}),E]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadListFolderItem.react",["BaseView.react","CometTextWithEntities.react","I64","MAWVault","MWAddOnCircleContainer.react","MWCMThreadTypes.react","MWChatTextTransform","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListLastMessage.react","MWXListCellPressable.react","MWXTextPairing.react","react","react-compiler-runtime","useMatchMedia"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;b.useCallback;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(28),e=a.icon,f=a.onClick,g=a.responsive,h=a.selected,k=a.size,l=a.thread;a=a.threadName;g=c("useMatchMedia")("(min-width: 900px)")||!g;var m;b[0]!==l.snippet?(m=l.snippet!=null?d("MAWVault").unvault(l.snippet):null,b[0]=l.snippet,b[1]=m):m=b[1];m=m;m=m;var n;b[2]!==l.lastActivityTimestampMs?(n=(i||(i=d("I64"))).to_float(l.lastActivityTimestampMs),b[2]=l.lastActivityTimestampMs,b[3]=n):n=b[3];n=n;var o=d("MWPIsThreadUnread").useIsThreadUnread(l.threadKey),p;b[4]!==e||b[5]!==k?(p=j.jsx(c("MWAddOnCircleContainer.react"),{size:k,children:e}),b[4]=e,b[5]=k,b[6]=p):p=b[6];e=p;k=e;e=(p=a)!=null?p:l.threadName;a=e;b[7]!==f?(p=function(){return f()},b[7]=f,b[8]=p):p=b[8];e=p;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"xmzvs34 xf159sx"},b[9]=p):p=b[9];var q;b[10]!==g||b[11]!==o||b[12]!==n||b[13]!==m||b[14]!==l.threadType?(q=g?j.jsx(c("MWThreadListLastMessage.react"),{hasOngoingCall:!1,isUnread:o,lastMessageCtaType:null,lastMessageTimestamp:n,showTimestamp:!d("MWCMThreadTypes.react").isUnjoinedCMThread(l.threadType),snippet:m}):null,b[10]=g,b[11]=o,b[12]=n,b[13]=m,b[14]=l.threadType,b[15]=q):q=b[15];b[16]!==a||b[17]!==g?(n=g?j.jsx(c("CometTextWithEntities.react"),{text:a.toString(),transforms:d("MWChatTextTransform").textTransforms}):null,b[16]=a,b[17]=g,b[18]=n):n=b[18];m=!o;b[19]!==n||b[20]!==m||b[21]!==q?(l=j.jsx(c("MWXTextPairing.react"),{body:q,bodyLineLimit:1,headline:n,headlineLineLimit:1,level:4,reduceEmphasis:m}),b[19]=n,b[20]=m,b[21]=q,b[22]=l):l=b[22];b[23]!==k||b[24]!==e||b[25]!==h||b[26]!==l?(a=j.jsx(c("BaseView.react"),{testid:void 0,children:j.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:j.jsx("div",{role:"row",children:j.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:j.jsx("div",babelHelpers["extends"]({},p,{role:"gridcell",children:j.jsx(c("MWXListCellPressable.react"),{addOnStart:k,content:l,onPress:e,selected:h,size:"large"})}))})})})}),b[23]=k,b[24]=e,b[25]=h,b[26]=l,b[27]=a):a=b[27];return a}g["default"]=a}),98);
__d("MWThreadListJobsItem.react",["fbt","ix","LSIntEnum","MWThreadListFolderItem.react","MWXIcon.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.onClick,f=a.responsive,g=a.selected,j=a.size;a=a.thread;var m;b[0]!==e?(m=function(){return e((k||(k=d("LSIntEnum"))).ofNumber(-13))},b[0]=e,b[1]=m):m=b[1];m=m;var n;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(n=l.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(i("512668"),32),size:48}),b[2]=n):n=b[2];var o;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(o=(k||(k=d("LSIntEnum"))).ofNumber(-13),b[3]=o):o=b[3];var p;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._(/*BTDS*/"Vi\u1ec7c l\u00e0m").toString(),b[4]=p):p=b[4];b[5]!==m||b[6]!==f||b[7]!==g||b[8]!==j||b[9]!==a?(n=l.jsx(c("MWThreadListFolderItem.react"),{icon:n,onClick:m,responsive:f,selected:g,size:j,systemFolder:o,thread:a,threadName:p}),b[5]=m,b[6]=f,b[7]=g,b[8]=j,b[9]=a,b[10]=n):n=b[10];return n}g["default"]=a}),226);
__d("useVirtualizationContainerContext",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useMemo;var i=b.useRef;function a(){var a=d("react-compiler-runtime").c(2),b=i(null),c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=function(a){b.current=a},a[0]=c):c=a[0];c=c;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(c={rootElementRef:b,updateRootElementRef:c},a[1]=c):c=a[1];a=c;c=a;return c}g["default"]=a}),98);
__d("MWThreadList.react",["CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","CometPageletWithDiv.react","CometRouterFocusRegion.react","CometVisualCompletion","CurrentEnvironment","FBLogger","FocusRegion.react","FocusRegionType","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSThreadBitOffset","MWCMGetValidId","MWCreatorMessagingUtils","MWJewelPopoverThreadlistContext.react","MWLSJewelMessageRequestsThreadContainer.react","MWPBaseThreadList.react","MWPBumpEntityKey","MWPParentThreadKeyContext","MWPThreadIsPage.react","MWPThreadsForThreadList","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWThreadKey.react","MWThreadListCommunityContainer.react","MWThreadListEmptyContainer.react","MWThreadListGlimmer.react","MWThreadListItem.react","MWThreadListJobsItem.react","MWThreadListSupportedThreadTypes","MWXacGating","MessagingFolderTag","MessengerWebUXLogger","QPLUserFlow","ReQL","ReQLSuspense","VirtualizationContainerContext","cr:21161","cr:21162","cr:2261","cr:6055","emptyFunction","focusScopeQueries","gkx","isCommunityContainersEnabled","isMWXacGroupThread","justknobx","mwCMIsThreadBumped","qpl","react","react-compiler-runtime","useCommunityFolder","useEmptyFunction","useGroupsCometIsInCCNegativeTest","useMWGetInboxFocusTargetFromRoute","useMWResponsiveLogExtraData","useReStore","useVirtualizationContainerContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.useCallback,o=m.useContext,p=m.useId,q=m.useRef,r=(m=(m=b("cr:21162"))==null?void 0:m.useFilterPinnedThreads)!=null?m:c("useEmptyFunction"),s=b("cr:6055")||c("useEmptyFunction");function t(a){return(j||(j=d("I64"))).equal(a.threadType,(k||(k=d("LSIntEnum"))).ofNumber(15))&&(j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&(j||(j=d("I64"))).equal(a.lastReadWatermarkTimestampMs,(j||(j=d("I64"))).of_int32(-1))&&(j||(j=d("I64"))).equal(a.lastActivityTimestampMs,(j||(j=d("I64"))).of_int32(-1))}var u=5;function a(a){var e=a.lsEntryPoint,f=a.lsSubEntryPoint,g=a.messagingEntrypoint,h=a.onClickNestedFolderThread,i=a.onClose,m=a.responsive,n=a.selected,p=a.thread,r=o(c("MWJewelPopoverThreadlistContext.react")),s=c("useCommunityFolder")({parentThreadKey:(j||(j=d("I64"))).equal(p.threadType,(k||(k=d("LSIntEnum"))).ofNumber(17))?p.threadKey:p.parentThreadKey});a=o(c("MWResponsiveLayoutContext.react"));var u=a.pushCard,v=p.threadKey;d("Int64Hooks").useEffectInt64(function(){if(b("cr:2261")==null)return;r==null?void 0:r.add(v);return function(){r==null?void 0:r["delete"](v)}},[r,v]);var w=q({loggingTimeout:null,threadKey:(j||(j=d("I64"))).of_int32(-1)}),x=q(j.of_int32(-1)),y=o(c("MWPParentThreadKeyContext"));d("Int64Hooks").useEffectInt64(function(){if(!c("justknobx")._("2234"))return;if(y!=null){var a=(j||(j=d("I64"))).to_string(p.parentThreadKey),b=j.to_string(y);!(j||(j=d("I64"))).equal(x.current,v)&&p.folderName!==c("MessagingFolderTag").COMMUNITY&&a!==b&&c("FBLogger")("messenger_threadlist_folder_inconsistency").mustfix("Render thread item expected folder %s but receive %s",b,a)}t(p)?(j||(j=d("I64"))).equal(w.current.threadKey,v)||(w.current.threadKey=v,w.current.loggingTimeout=window.setTimeout(function(){c("FBLogger")("messenger_web").mustfix("Thread ID %s showing up as ghost",(j||(j=d("I64"))).to_string(v)),w.current.loggingTimeout=null},5e3)):(j||(j=d("I64"))).equal(w.current.threadKey,v)&&w.current.loggingTimeout!=null&&window.clearTimeout(w.current.loggingTimeout)},[y,p,v]);a=d("Int64Hooks").useCallbackInt64(function(){d("MWCreatorMessagingUtils").isAPPlusMessageRequest(p)&&c("QPLUserFlow").start(c("qpl")._(421070823,"2981"),{annotations:{string:{entrypoint:d("MWCreatorMessagingUtils").fetchQPLEntrypoint(p)}},instanceKey:(j||(j=d("I64"))).to_int32(p.threadKey)}),c("mwCMIsThreadBumped")({secondaryParentThreadKey:p.secondaryParentThreadKey,threadType:p.threadType})&&d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_bumped:"true"},community_id:s?(j||(j=d("I64"))).to_string(s.folderId):(j||(j=d("I64"))).to_string(p.parentThreadKey),event:"thread_open",group_id:d("MWCMGetValidId").MWCMHasValidFbGroupId(s==null?void 0:s.fbGroupId)?(j||(j=d("I64"))).to_string(s.fbGroupId):null,source:"chat_row",surface:e==="jewel"?"jewel_tray":"messenger_inbox",thread_id:(j||(j=d("I64"))).to_string(v)}),c("gkx")("24056")&&n&&u(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL)},[p.secondaryParentThreadKey,p.threadType,p.parentThreadKey,s,e,v,n,u]);if((j||(j=d("I64"))).equal(p.threadType,(k||(k=d("LSIntEnum"))).ofNumber(6))){if((j||(j=d("I64"))).equal(v,(k||(k=d("LSIntEnum"))).ofNumber(-13)))return l.jsx(c("MWThreadListJobsItem.react"),{onClick:h,responsive:m,selected:n,size:56,thread:p});else if(b("cr:2261")!=null&&(j||(j=d("I64"))).equal(v,(k||(k=d("LSIntEnum"))).ofNumber(-12)))return l.jsx(b("cr:2261"),{onClick:h,responsive:m,selected:n,size:56,thread:p});return null}h=c("isCommunityContainersEnabled")();h=d("CurrentEnvironment").messengerdotcom&&h&&c("mwCMIsThreadBumped")({secondaryParentThreadKey:p.secondaryParentThreadKey,threadType:p.threadType});return l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:l.jsx(c("MWThreadListGlimmer.react"),{parentComponentForDebug:"MWThreadListItem"}),name:"MWThreadListThreadListRow",children:l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:p.threadKey,children:l.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:p.threadKey,children:s!=null&&h?l.jsx(c("MWThreadListCommunityContainer.react"),{containerThread:p,folder:s,messagingEntrypoint:g,responsive:m,selected:n}):l.jsx(c("MWThreadListItem.react"),{lsEntryPoint:e,lsSubEntryPoint:f,messagingEntrypoint:g,onClose:i,onThreadSelected:a,responsive:m,selected:n,size:56,thread:p})})})})}a.displayName=a.name+" [from "+f.id+"]";var v=l.memo(a);function e(a){var e=a.gridLabel,g=a.filter,i=a.customThreadFilter,m=a.header,o=a.lsEntryPoint,q=a.onOpenMessageRequests,t=a.lsSubEntryPoint,x=a.parentThreadKey,y=a.responsive,z=a.selectedThreadKey,A=a.setHasScrolled,B=a.setIsEmptyInbox,C=a.threadListMessagingEntrypoint,D=a.onClose,E=D===void 0?c("emptyFunction"):D;D=a.onClickNestedFolderThread;var F=D===void 0?c("emptyFunction"):D;D=a.preamble;var G=(h||(h=c("useReStore")))(),H=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(G.tables.threads_ranges_v2__generated).getKeyRange(x)},[G,x],f.id+":387"),I=d("ReQLSuspense").useArray(function(){return d("MWPThreadsForThreadList").createIterable(G,x,H,["lastActivityTimestampMs","threadType"].concat(d("LSThreadBitOffset").threadCapabilityFields)).filter(function(a){if(!c("MWThreadListSupportedThreadTypes").some(function(b){return(j||(j=d("I64"))).equal(a.threadType,b)}))return!1;return d("MWXacGating").isGroupsEnabled()?!0:!c("isMWXacGroupThread")(a)}).take(5)},[G,x,H],f.id+":399").pop();a=p();var J=d("ReQLSuspense").useFirst(function(){return z!=null?d("ReQL").fromTableAscending(G.tables.threads,["parentThreadKey"]).getKeyRange(z):d("ReQL").empty()},[G,z],f.id+":425");s(a);var K=d("useGroupsCometIsInCCNegativeTest").useShouldDisableBumpToInboxForNegativeTest(),L=n(function(a){var b;if(a==null)return l.jsx("div",{});if(d("CurrentEnvironment").facebookdotcom&&c("mwCMIsThreadBumped")({secondaryParentThreadKey:a.secondaryParentThreadKey,threadType:a.threadType})&&K)return l.jsx("div",{});var e;(j||(j=d("I64"))).equal(a.threadKey,(k||(k=d("LSIntEnum"))).ofNumber(-13))||(j||(j=d("I64"))).equal(a.threadKey,(k||(k=d("LSIntEnum"))).ofNumber(-12))?e=J!=null&&(j||(j=d("I64"))).equal(a.threadKey,J.parentThreadKey):e=z!=null&&(j||(j=d("I64"))).equal(z,a.threadKey);return a!=null?l.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_list",disableHiding:!0,children:l.jsx(v,{lsEntryPoint:o==="inboxThreadList"?I!=null&&(j||(j=d("I64"))).le(a.lastActivityTimestampMs,I.lastActivityTimestampMs)?"inboxRecentThreads":"inboxRemainingThreads":o,lsSubEntryPoint:t,messagingEntrypoint:(b=C)!=null?b:"jewel",onClickNestedFolderThread:F,onClose:E,responsive:y,selected:e,thread:a})}):l.jsx("div",{})},[o,I,C,F,E,y,J,z,K]),M=n(function(a){A&&A(function(b){return a.scrollTop>0})},[A]),N=c("useMWResponsiveLogExtraData")();N=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_impression",extraData:N});var O=c("useVirtualizationContainerContext")(),P=n(function(a){O.rootElementRef.current=a==null?void 0:a.getScrollAreaElement()},[O.rootElementRef]),Q=r(),R=n(function(a){return(Q!=null?Q(a):!0)&&(i!=null?i(a):!0)},[Q,i]),S=c("useMWGetInboxFocusTargetFromRoute")();S=S===1;q=l.jsx(d("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xmz0i5r x6ikm8r x10wlt62",fallback:null,name:"MWThreadList",children:l.jsx(c("MWPParentThreadKeyContext").Provider,{value:x,children:l.jsx(c("VirtualizationContainerContext").Provider,{value:O,children:l.jsx(c("MWPBaseThreadList.react"),{beforeContent:l.jsxs(l.Fragment,{children:[l.jsx(c("MWLSJewelMessageRequestsThreadContainer.react"),{onOpenMessageRequests:q}),D,b("cr:21161")&&l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWPinnedThreadsList",children:l.jsx(b("cr:21161"),{customThreadFilter:i,parentThreadKey:x,renderItem:L})})]}),customThreadFilter:R,emptyContent:l.jsx(c("MWThreadListEmptyContainer.react"),{filter:g,parentThreadKey:x}),filter:g,gridLabel:e,imperativeRef:P,onLoadMoreThreads:function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.threadlist","load_more_threads"),c("CometVisualCompletion").addFirstMarkerPoint("threadListLoadMoreThreads")},onScroll:M,pageSize:15,parentThreadKey:x,renderItem:L,renderLoadingAnimation:function(a,b){b=a==="onBottom"&&b>u;return l.jsxs("div",{children:[l.jsx(c("MWThreadListGlimmer.react"),{numberOfItems:2,parentComponentForDebug:"MWThreadListLoadingAnimation",vcIgnore:b}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"ThreadListLoadingMoreItems."+a,hold:!b})]})},setIsEmptyInbox:B})})})});return l.jsxs("div",babelHelpers["extends"]({className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62"},{id:a,ref:N,children:[m!=null?l.jsx(d("FocusRegion.react").FocusRegion,{children:m}):null,l.jsx(w,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,enabled:S,children:l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:S?d("focusScopeQueries").tabbableScopeQuery:void 0,recoverFocusQuery:d("focusScopeQueries").tabbableScopeQuery,recoverFocusStrategy:d("FocusRegionType").RecoverFocusStrategy.Nearest,children:q})})]}))}e.displayName=e.name+" [from "+f.id+"]";function w(a){var b=d("react-compiler-runtime").c(3),e=a.autoFocusQuery,f=a.children;a=a.enabled;if(!a)return f;b[0]!==e||b[1]!==f?(a=l.jsx(c("CometRouterFocusRegion.react"),{autoFocusQuery:e,children:f}),b[0]=e,b[1]=f,b[2]=a):a=b[2];return a}g["default"]=e}),98);
__d("MWJewelNestedFolderThreadList.react",["CometScrollView.react","CometTopNavListDropdownCard.react","MWJewelNestedFolderThreadListHeader.react","MWThreadList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a.folder,f=a.onClose,g=a.onReturn;a=a.title;var h;b[0]!==g||b[1]!==a?(h=i.jsx(c("MWJewelNestedFolderThreadListHeader.react"),{onReturn:g,title:a}),b[0]=g,b[1]=a,b[2]=h):h=b[2];b[3]!==a?(g=typeof a==="string"?a:a.toString(),b[3]=a,b[4]=g):g=b[4];b[5]!==e||b[6]!==f||b[7]!==g?(a=i.jsx(c("MWThreadList.react"),{gridLabel:g,lsEntryPoint:"jewelNestedFolder",onClose:f,parentThreadKey:e,responsive:!1}),b[5]=e,b[6]=f,b[7]=g,b[8]=a):a=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("div",{className:"x1qx5ct2"}),b[9]=e):e=b[9];b[10]!==h||b[11]!==a?(f=i.jsx(c("CometTopNavListDropdownCard.react"),{useMaxHeight:!0,children:i.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[h,a,e]})}),b[10]=h,b[11]=a,b[12]=f):f=b[12];return f}g["default"]=a}),98);
__d("MWSearchLoggingTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Jewel:"jewel",Inbox:"inbox"});f.SearchSurface=a}),66);
__d("UniversalSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("843");b=d("FalcoLoggerInternal").create("universal_search_query_changed",a);e=b;g["default"]=e}),98);
__d("UniversalSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("840");b=d("FalcoLoggerInternal").create("universal_search_start",a);e=b;g["default"]=e}),98);
__d("MWJewelLightspeedSearchTypeaheadViewList.react",["CometScrollView.react","MWChatSearchLightspeedTypeaheadViewList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={scroll:{maxHeight:"x1wxkln1",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(10),e,f;b[0]!==a?(f=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=[j.scroll,f],b[3]=f,b[4]=a):a=b[4];b[5]!==e?(f=i.jsx(c("MWChatSearchLightspeedTypeaheadViewList.react"),babelHelpers["extends"]({showActionItems:!1},e)),b[5]=e,b[6]=f):f=b[6];b[7]!==a||b[8]!==f?(e=i.jsx(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:a,children:f}),b[7]=a,b[8]=f,b[9]=e):e=b[9];return e}g["default"]=a}),98);
__d("MWJewelSearchEmptyState.react",["fbt","MWXText.react","react","react-compiler-runtime","useCometTypeaheadEmptyState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.queryString;var e=c("useCometTypeaheadEmptyState")(),f;b[0]!==e||b[1]!==a?(f=e?j.jsxs("div",babelHelpers["extends"]({className:"xz9dl7a xpdmqnj xsag5q8 x1g0dm76"},{children:[j.jsx(c("MWXText.react"),{align:"center",type:"body2",children:h._(/*BTDS*/"Kh\u00f4ng t\u00ecm th\u1ea5y k\u1ebft qu\u1ea3")}),j.jsx("br",{}),j.jsx(c("MWXText.react"),{align:"center",color:"tertiary",type:"body3",children:h._(/*BTDS*/"Ch\u00fang t\u00f4i kh\u00f4ng t\u00ecm \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3 n\u00e0o cho \"{query}\". H\u00e3y th\u1eed ki\u1ec3m tra ch\u00ednh t\u1ea3 ho\u1eb7c d\u00f9ng t\u1eeb ho\u00e0n ch\u1ec9nh.",[h._param("query",a)])})]})):null,b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),226);
__d("createMWJewelSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWJewelLightspeedSearchTypeaheadViewList.react","MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return function(d){var e=d.ariaProps,f=d.entries;d.extraViewProps;var g=d.highlightedEntry,h=d.isLoading;d.onAbandonTypeahead_DO_NOT_USE;var j=babelHelpers.objectWithoutPropertiesLoose(d,["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE"]);d=f.length===0&&j.queryString.length>0;var k=f.length>0&&h;h=f.length===0&&h&&j.queryString.length===0&&c("gkx")("15587");return h?i.jsx(c("CometTypeaheadProgressGlimmer.react"),{}):d?i.jsx(c("MWJewelSearchEmptyState.react"),{queryString:j.queryString}):i.jsxs(i.Fragment,{children:[i.jsx(c("MWJewelLightspeedSearchTypeaheadViewList.react"),{ariaProps:e,entries:f,highlightedEntry:g,xstyle:a,children:function(a){var d=a.entry,e=a.isActive;a=a.itemRole;return i.createElement(c("MWJewelSearchTypeaheadViewItem.react"),babelHelpers["extends"]({},j,{entry:d,extraViewItemProps:{loggingSessionId:b},isActive:e,key:d.key,role:a}))}}),k&&i.jsx(c("CometTypeaheadProgressGlimmer.react"),{})]})}}g["default"]=a}),98);
__d("MWJewelSearchSubscriptionTypeahead.react",["fbt","BaseSubscriptionTypeahead.react","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWFacebookUserWithoutMessengerAccess","MWInboxRouteBuilder","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPConversationSearchLogger","MWPSearchSystem","MWSearchLogging","MWSearchLoggingTypes","UniversalSearchEndFalcoEvent","UniversalSearchQueryChangedFalcoEvent","UniversalSearchStartFalcoEvent","cr:2012305","cr:20302","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","promiseDone","qex","react","useCometRouterDispatcher","useReStore","uuidv4","xplatToDOMRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q={searchInput:{marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"x1e56ztr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},searchView:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},r=function(a){return c("createMWJewelSearchTypeaheadViewStrategy.react")(null,a)},s=c("gkx")("24086"),t=c("gkx")("23390");function a(a){var e=a.onChange,f=a.onFocus,g=a.onPressEntry,j=a.onSelectFreeformQuery,u=babelHelpers.objectWithoutPropertiesLoose(a,["onChange","onFocus","onPressEntry","onSelectFreeformQuery"]);a=p(null);var v=a[0],w=a[1],x=o(null),y=(i||(i=c("useReStore")))(),z=o(!1);m(function(){var a=x.current;b("cr:2012305")!==null&&a!=null&&b("cr:2012305").trackTypingPerf(a,"MWJewelSearchTypeahead");return function(){b("cr:2012305")!==null&&a!=null&&b("cr:2012305").unregisterTypingPerf(a)}},[x]);var A=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=n(function(){var a;return new(c("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:y,excludedIDs:[],includeGroupSearch:A!=="ChatTab",includeMessageSearchEntry:(a=c("qex")._("4628"))!=null?a:!1,includeRecommendations:!0,lightspeedSupportedTypes:d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,source:c("MWChatSearchSurfaces").universal})},[y,A]);var B=l(function(){w(null),v!=null&&(z.current||(c("UniversalSearchEndFalcoEvent").log(function(){return{end_action:8,is_epd:t,session_id:v,transport_type:null}}),z.current=!0)),b("cr:20302")==null?void 0:b("cr:20302").qplCancel("abandon"),e("")},[e,v]),C=c("useCometRouterDispatcher")(),D=l(function(a){var b=a.rawData.resultType;if(b===c("MWChatSearchResultType").MESSAGE&&a.rawData.query!=null&&c("qex")._("4628")===!0){b=d("MWInboxRouteBuilder").buildMultiThreadMesageSearchURL({search:a.rawData.query});C!=null&&b!=null&&(c("MWPConversationSearchLogger").logUniversalMessageSearch(),C.go(b,{}))}b=function(){g!=null&&g(a)};if(v==null){b();return}d("MWSearchLogging").logResultSelected(v,u.queryString,a,z);b()},[g,v,u.queryString,C]);m(function(){return function(){b("cr:20302")==null?void 0:b("cr:20302").qplCancel("abandon")}},[]);var E=l(function(){s&&c("promiseDone")(d("MWPSearchSystem").clearAll(y));var a=c("uuidv4")();w(a);b("cr:20302")==null?void 0:b("cr:20302").qplStart({queryString:"",sessionInstanceId:a,surface:d("MWSearchLoggingTypes").SearchSurface.Jewel});z.current=!1;c("UniversalSearchStartFalcoEvent").log(function(){return{is_epd:t,search_surface:0,session_id:a}});c("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:"0",query_string:null,session_id:a}})},[y]),F=l(function(a){v!=null&&(c("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:a.length.toString(),query_string:a,session_id:v}}),b("cr:20302")==null?void 0:b("cr:20302").qplStart({queryString:a,sessionInstanceId:v,surface:d("MWSearchLoggingTypes").SearchSurface.Jewel})),e(a)},[e,v]),G=function(){f()},H=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),I=h._(/*BTDS*/"T\u00ecm ki\u1ebfm tr\u00ean Messenger"),J=h._(/*BTDS*/"T\u00ecm ki\u1ebfm tin nh\u1eafn");H=H?J:I;return k.jsx(c("BaseSubscriptionTypeahead.react"),{dataSource:a,dataSourceFetchConfigParams:c("isArmadillo")()?{requestFlow:"network-upon-approve"}:void 0,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:d("xplatToDOMRef").xplatToInputRef(x),inputStartContent:v!=null?k.jsx(c("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:c("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:F,onClose:B,onFocus:G,onOpen:E,onPressEntry:D,onSelectFreeformQuery:j,placeholder:H,queryString:u.queryString,shouldCloseOnEnter:!1,shouldHandleCloseAfterHandlePressEntry:!0,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:r(v),xstyles:{inputXStyle:q.searchInput,viewXStyle_DO_NOT_USE:q.searchView}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWJewelThreadListSearchTypeahead.react",["CometRelay","FBLogger","I64","MWChatSearchFilteringUtils","MWChatSearchResultType","MWJewelSearchSubscriptionTypeahead.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWPSearchSystem","MWThreadCreationUtil","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","setTimeoutCometSpeculative","useCometPreloader","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useState;function a(a){var b=d("react-compiler-runtime").c(25),e=a.onClose;a=m("");var f=a[0];a=a[1];var g=c("useMWChatOpenTabForGroup")("jewelSearch"),j=g[0],o=c("useMWChatOpenTabForPage")("jewelSearch");g=c("useMWChatOpenTabForUser")("jewelSearch");var p=g.openTabByThreadKey,q=g.openTabForUserWithoutPreloadedNavigationData,r=(h||(h=c("useReStore")))(),s=d("CometRelay").useRelayEnvironment();b[0]!==r?(g=function(){return d("MWPSearchSystem").makeAll(r)},b[0]=r,b[1]=g):g=b[1];var t=g;b[2]!==t?(g=function(){c("setTimeoutCometSpeculative")(t,1e4)},b[2]=t,b[3]=g):g=b[3];l(g,void 0);b[4]!==r||b[5]!==s||b[6]!==p||b[7]!==q?(g=function(a,b){var c=d("MWChatSearchFilteringUtils").getIsE2ee(b.rawData);if(c)return p(a,!0);d("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(b,s,r).then(async function(c){var e=c.isSecureThread;c=c.reason;if(c==="default_e2ee")q({unpreloadedReason:"jewelsearch_not_support_gql",userId:a});else{var f=await r.tables.threads.get((i||(i=d("I64"))).of_string(a));q({isSecureThread:e,reason:"MWJewelThreadListSearchTypeahead, FBID: "+a+", reason: "+((e=c)!=null?e:"")+", searchSource: "+((c=b.rawData.searchSource)!=null?c:"")+", otherUserId: "+((e=b.rawData.otherUserId)!=null?e:"")+", hasCutoverThread: "+((e=(c=b.rawData.hasCutoverThread)==null?void 0:c.toString())!=null?e:"false")+", threadAuthorityLevel: "+(f!=null?(i||(i=d("I64"))).to_string(f.authorityLevel):"null"),unpreloadedReason:"jewelsearch_not_support_gql",userId:a})}}).catch(n)},b[4]=r,b[5]=s,b[6]=p,b[7]=q,b[8]=g):g=b[8];var u=g;b[9]!==e||b[10]!==j||b[11]!==o||b[12]!==u?(g=function(a){var b=a.rawData,d=b.id;b=b.resultType;bb41:switch(b){case c("MWChatSearchResultType").MESSAGE:break bb41;case c("MWChatSearchResultType").GROUP:j(d);break bb41;case c("MWChatSearchResultType").USER:case c("MWChatSearchResultType").AI_BOT:u(d,a);break bb41;case c("MWChatSearchResultType").PAGE:o(d)}e()},b[9]=e,b[10]=j,b[11]=o,b[12]=u,b[13]=g):g=b[13];g=g;var v=c("useCometPreloader")("button_aggressive",c("emptyFunction"),t),w=v.onHoverInPreloader,x=v.onHoverMovePreloader;v=v.onHoverOutPreloader;var y;b[14]!==t?(y=function(){d("MWLogInteraction").logPopoverOpenCancel("initiate_search"),d("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_search"),t(),c("QPLUserFlow").start(c("qpl")._(25312244,"1683"))},b[14]=t,b[15]=y):y=b[15];b[16]!==g||b[17]!==f||b[18]!==y?(a=k.jsx(c("MWJewelSearchSubscriptionTypeahead.react"),{onChange:a,onFocus:y,onPressEntry:g,queryString:f}),b[16]=g,b[17]=f,b[18]=y,b[19]=a):a=b[19];b[20]!==w||b[21]!==x||b[22]!==v||b[23]!==a?(g=k.jsx("div",{onMouseEnter:w,onMouseLeave:v,onMouseMove:x,children:a}),b[20]=w,b[21]=x,b[22]=v,b[23]=a,b[24]=g):g=b[24];return g}function n(a){c("FBLogger")("messenger_search").mustfix("Error fetching contact capabilities: %s",a)}e=k.memo(a);g.default=e}),98);
__d("CometMessagingJewelDropdownContent.react",["fbt","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometMessagingJewelCommunitiesQPBannerContainer.react","CometMessagingJewelDropdownContentGlimmer.react","CometMessagingJewelDropdownContent_query.graphql","CometMessagingJewelDropdownQPBannerContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","CometTopNavListDropdownCard.react","CometTransientDialogProvider.react","FBLogger","I64","InteractionTracing","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSPlatformErrorsCatcher.react","LSThreadRangeFilter","MAWUnrecoverableErrorBoundary.react","MWCMJewelContext","MWEncryptedBackupsJewelNuxWrapperDeferred.react","MWInboxContextSwitcherGlimmer.react","MWInboxContextSwitcherUtils","MWInboxQuickPromotionWrapper.react","MWInboxTrayContainer.react","MWInboxTrayGating","MWJewelDropdownHeader.react","MWJewelNestedFolderThreadList.react","MWJewelPopoverDialogContext.react","MWJewelThreadListSearchTypeahead.react","MWResponsiveLayoutContext.react","MWThreadList.react","ODS","ReQL","ReQLSuspense","WebUXLoggingEntryPointContextProvider","XCometMessengerControllerRouteBuilder","cr:21316","cr:7643","deferredLoadComponent","gkx","lazyLoadComponent","qpl","react","react-compiler-runtime","recoverableViolation","requireDeferredForDisplay","useCometInteractionTracing","useMWChatSearchClearSearchResults","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o=n||(n=d("react"));e=n;var p=e.memo;e.useCallback;var q=e.useContext,r=e.useEffect,s=e.useState,t=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWInboxContextSwitcherCond.react").__setRef("CometMessagingJewelDropdownContent.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMBlendedThreadListV2.react").__setRef("CometMessagingJewelDropdownContent.react")),v=c("lazyLoadComponent")(c("JSResourceForInteraction")("MAWJewelMessageRequestsAndSpamDropdownWithTab.react").__setRef("CometMessagingJewelDropdownContent.react")),w=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWRestrictedAccountsList.react").__setRef("CometMessagingJewelDropdownContent.react")),x=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWJewelArchivedChatsDropdown.react").__setRef("CometMessagingJewelDropdownContent.react")),y=c("lazyLoadComponent")(c("JSResourceForInteraction")("CometMessagingJewelDropdownErrorState.react").__setRef("CometMessagingJewelDropdownContent.react")),z=h._(/*BTDS*/"\u0110o\u1ea1n chat");function A(a){c("recoverableViolation")("CometMessagingJewelDropdownQPBannerContainer failed to render","messenger_web_entrypoints",{error:a})}var B=c("gkx")("22839")===!0;function C(a){var e=d("react-compiler-runtime").c(98),g=a.ebSoftblockUpsell,n=a.ebUpsellContainerQueryRef,p=a.mwInboxTrayContainerQuery,y=a.onClose,C=a.pushPage;a=a.query;var E=q(c("MWResponsiveLayoutContext.react"));E=E.isDenseMode;var F=q(c("MWJewelPopoverDialogContext.react")),G=F.setIsOpenForDialog,H=c("useMWChatSearchClearSearchResults")();e[0]!==H||e[1]!==y?(F=function(){H(),y()},e[0]=H,e[1]=y,e[2]=F):F=e[2];var I=F,J;e[3]!==H?(F=function(){return H},J=[H],e[3]=H,e[4]=F,e[5]=J):(F=e[4],J=e[5]);r(F,J);e[6]===Symbol["for"]("react.memo_cache_sentinel")?(F=c("XCometMessengerControllerRouteBuilder").buildURL({}),e[6]=F):F=e[6];J=F;F=q(c("MWCMJewelContext"));var K=F.MWCMBlendedThreadListEntrypointRef,L=F.selectedFilterTab,M=F.setSelectedFilterTab;F=s();var N=F[0],O=F[1];e[7]===Symbol["for"]("react.memo_cache_sentinel")?(F=c("qpl")._(30610001,"3003"),e[7]=F):F=e[7];var P=c("useCometInteractionTracing")(F,"fast","INTERACTION");F=d("CometRelay").useFragment(i!==void 0?i:i=b("CometMessagingJewelDropdownContent_query.graphql"),a);var Q=(j||(j=c("useReStore")))();e[8]!==Q.tables._user_info?(a=function(){return d("ReQL").fromTableAscending(Q.tables._user_info).map(D)},e[8]=Q.tables._user_info,e[9]=a):a=e[9];var R;e[10]!==Q?(R=[Q],e[10]=Q,e[11]=R):R=e[11];var S=d("ReQLSuspense").useFirst(a,R,f.id+":211");e[12]!==Q.tables.contacts||e[13]!==S?(a=function(){return S!=null?d("ReQL").fromTableAscending(Q.tables.contacts,["capabilities","capabilities2"]).getKeyRange(S):d("ReQL").empty()},e[12]=Q.tables.contacts,e[13]=S,e[14]=a):a=e[14];e[15]!==Q||e[16]!==S?(R=[Q,S],e[15]=Q,e[16]=S,e[17]=R):R=e[17];var T=d("ReQLSuspense").useFirst(a,R,f.id+":215");e[18]!==I||e[19]!==C?(a=function(){var a=c("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:c("qpl")._(30607516,"756"),tracePolicy:"comet.jewel.message_requests",traceType:"INTERACTION"});C(function(b){b=b.onReturn;return o.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:o.jsx(c("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!1,title:z,withBackButton:!0}),name:"MAWJewelMessageRequestsAndSpamDropdownWithTab",children:o.jsx(v,{interactionID:a,onClose:I,onReturn:b})})})},e[18]=I,e[19]=C,e[20]=a):a=e[20];R=a;e[21]!==R||e[22]!==L?(a=d("MWInboxContextSwitcherUtils").shouldShowMessageRequestsFromFilter(L)?R:void 0,e[21]=R,e[22]=L,e[23]=a):a=e[23];a=a;var U;e[24]!==I||e[25]!==C?(U=function(){C(function(a){a=a.onReturn;return o.jsx(w,{hidePage:a,onClose:I})})},e[24]=I,e[25]=C,e[26]=U):U=e[26];U=U;var V;e[27]!==I||e[28]!==C?(V=function(){(k||(k=d("ODS"))).bumpEntityKey(3185,"mw_jewel","archived_chats"),C(function(a){a=a.onReturn;return o.jsx(x,{onClose:I,onReturn:a})})},e[27]=I,e[28]=C,e[29]=V):V=e[29];V=V;var W;e[30]!==I||e[31]!==C||e[32]!==T?(W=function(a){C(function(b){b=b.onReturn;switch((l||(l=d("I64"))).to_int32(a)){case-13:return o.jsx(c("MWJewelNestedFolderThreadList.react"),{folder:a,onClose:I,onReturn:b,title:h._(/*BTDS*/"Vi\u1ec7c l\u00e0m")});case-12:var e=T!=null&&d("LSContactBitOffset").has(86,T),f=h._(/*BTDS*/"Marketplace");e&&(f=h._(/*BTDS*/"_j[\"Nh\\u00f3m mua v\\u00e0 b\\u00e1n\",\"6a9a0529abd169ff91b49b4022dbf5a5\",1]"));return o.jsx(c("MWJewelNestedFolderThreadList.react"),{folder:a,onClose:I,onReturn:b,title:f});default:c("FBLogger")("messenger_web_entrypoints").mustfix("Attempted to show an unimplemented nested system folder");return null}})},e[30]=I,e[31]=C,e[32]=T,e[33]=W):W=e[33];W=W;var X;e[34]!==E||e[35]!==p||e[36]!==I?(X=E?null:o.jsx(c("MWInboxTrayContainer.react"),{mwInboxTrayContainerQuery:p,onClose:I}),e[34]=E,e[35]=p,e[36]=I,e[37]=X):X=e[37];E=X;e[38]!==g||e[39]!==n||e[40]!==F||e[41]!==L?(p=b("cr:21316")!=null&&n!=null?o.jsx(b("cr:21316"),{ebSoftblockUpsell:g,ebUpsellContainerQueryRef:n,selectedFilterTab:L}):d("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(L)&&g==null&&(F==null?void 0:F.encrypted_backups_jewel_nux_wrapper)!=null&&(F==null?void 0:F.viewer.qp_banner)!=null?o.jsx(c("MWInboxQuickPromotionWrapper.react"),{onError:A,children:o.jsx(c("MWEncryptedBackupsJewelNuxWrapperDeferred.react"),{query:F.encrypted_backups_jewel_nux_wrapper,children:o.jsx(c("CometMessagingJewelDropdownQPBannerContainer.react"),{viewer:F.viewer.qp_banner})})}):null,e[38]=g,e[39]=n,e[40]=F,e[41]=L,e[42]=p):p=e[42];X=p;n=d("MWInboxTrayGating").isInboxTrayEnabled();e[43]!==L?(p=d("MWInboxContextSwitcherUtils").getCustomThreadFilter(L),e[43]=L,e[44]=p):p=e[44];p=p;var Y;e[45]!==L?(Y=d("MWInboxContextSwitcherUtils").getParentThreadKeyFromFilter(L),e[45]=L,e[46]=Y):Y=e[46];Y=Y;var Z;e[47]!==I||e[48]!==V||e[49]!==R||e[50]!==U?(Z=o.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelDropdownHeader",children:o.jsx(c("MWJewelDropdownHeader.react"),{inboxUrl:J,onClose:I,onOpenArchivedChats:V,onOpenMessageRequests:R,onOpenRestrictedAccountsList:U,title:z})}),e[47]=I,e[48]=V,e[49]=R,e[50]=U,e[51]=Z):Z=e[51];e[52]===Symbol["for"]("react.memo_cache_sentinel")?(V={className:"x1c4vz4f"},e[52]=V):V=e[52];e[53]!==I||e[54]!==C?(R=o.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelThreadListSearchTypeahead",children:o.jsx(c("MWJewelThreadListSearchTypeahead.react"),{onClose:I,pushPage:C})}),e[53]=I,e[54]=C,e[55]=R):R=e[55];U=n?X:null;var $;e[56]!==P||e[57]!==Y||e[58]!==L||e[59]!==G||e[60]!==M?($=B&&o.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:o.jsx(c("MWInboxContextSwitcherGlimmer.react"),{}),name:"MWInboxContextSwitcher",children:o.jsx(t,{entryPoint:"jewel",onTabChange:function(a){P(function(a){O(a.getTraceId())},void 0,void 0,"comet.jewel.messenger."+d("MWInboxContextSwitcherUtils").getTracePolicyFromFilter(a)),G(!1),M==null?void 0:M(a)},parentThreadKey:Y,selectedFilterTab:L})}),e[56]=P,e[57]=Y,e[58]=L,e[59]=G,e[60]=M,e[61]=$):$=e[61];e[62]!==E||e[63]!==R||e[64]!==U||e[65]!==$?(V=o.jsxs("div",babelHelpers["extends"]({},V,{children:[R,U,E,$]})),e[62]=E,e[63]=R,e[64]=U,e[65]=$,e[66]=V):V=e[66];E=n?null:X;e[67]!==Z||e[68]!==V||e[69]!==E?(R=o.jsxs(o.Fragment,{children:[Z,V,E]}),e[67]=Z,e[68]=V,e[69]=E,e[70]=R):R=e[70];U=R;$=F==null?void 0:F.viewer.cm_thread_list;n=F==null?void 0:F.viewer.cm_qp_banner;e[71]!==L?(X=d("MWInboxContextSwitcherUtils").getJewelEntryPointFromFilter(L),e[71]=L,e[72]=X):X=e[72];Z=X;e[73]!==L?(V=c("gkx")("12903")?d("MWInboxContextSwitcherUtils").getJewelLsSubEntryPointFromFilter(L):void 0,e[73]=L,e[74]=V):V=e[74];E=V;e[75]!==K||e[76]!==n||e[77]!==$||e[78]!==p||e[79]!==g||e[80]!==E||e[81]!==W||e[82]!==I||e[83]!==a||e[84]!==Y||e[85]!==L?(R=g!=null&&d("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(L)?o.jsx(o.Fragment,{children:g}):o.jsxs(o.Fragment,{children:[B&&(l||(l=d("I64"))).equal(L,(m||(m=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES))?o.jsx(c("CometPlaceholder.react"),{fallback:o.jsx(c("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0}),name:"CometMessagingJewelDropdownContent.MWCMBlendedThreadList",children:$!=null?o.jsx(u,{filter:L,header:o.jsx(o.Fragment,{children:n!=null&&o.jsx(c("CometErrorBoundary.react"),{onError:A,children:o.jsx(c("CometPlaceholder.react"),{fallback:null,name:"CometMessagingJewelDropdownContent.CommunitiesQPBanner",children:o.jsx(c("CometTransientDialogProvider.react"),{children:o.jsx(c("CometMessagingJewelCommunitiesQPBannerContainer.react"),{messagingEntryPoint:"jewel",onClose:I,viewer:n})})})})}),lsEntryPoint:"jewel",lsSubEntryPoint:E,messagingEntryPoint:"jewel",onClose:I,parentThreadKey:Y,responsive:!1,viewer:$}):K!=null?o.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:K,props:{filter:L,gridLabel:z.toString(),header:null,lsEntryPoint:"jewel",lsSubEntryPoint:E,onDropdownClose:I,onError:A,parentThreadKey:Y}}):null}):o.jsx(c("MWThreadList.react"),{customThreadFilter:p,filter:L,gridLabel:z.toString(),lsEntryPoint:"jewel",lsSubEntryPoint:E,onClickNestedFolderThread:W,onClose:I,onOpenMessageRequests:a,parentThreadKey:Y,responsive:!1},(l||(l=d("I64"))).to_string(L)),b("cr:7643")&&o.jsx(b("cr:7643"),{onClick:I,url:J})]}),e[75]=K,e[76]=n,e[77]=$,e[78]=p,e[79]=g,e[80]=E,e[81]=W,e[82]=I,e[83]=a,e[84]=Y,e[85]=L,e[86]=R):R=e[86];e[87]!==U||e[88]!==R?(F=o.jsxs(c("CometTopNavListDropdownCard.react"),{testid:void 0,useFullHeight:B,useMaxHeight:!0,children:[U,R]}),e[87]=U,e[88]=R,e[89]=F):F=e[89];X=F;e[90]===Symbol["for"]("react.memo_cache_sentinel")?(V=o.jsx(c("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0,title:z}),e[90]=V):V=e[90];J=c("gkx")("12903")?Z:"jewel";e[91]!==N||e[92]!==L||e[93]!==X?(K=N!=null?o.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"JewelThreadList."+d("MWInboxContextSwitcherUtils").getInteractionDescFromFilter(L),interactionUUID:N,children:X}):X,e[91]=N,e[92]=L,e[93]=X,e[94]=K):K=e[94];e[95]!==J||e[96]!==K?(n=o.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:V,name:"MWJewelDropdownContent",children:o.jsx(d("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:J,children:K})}),e[95]=J,e[96]=K,e[97]=n):n=e[97];return n}function D(a){return a.facebookUserId}function a(a){var b=d("react-compiler-runtime").c(2),e=E;b[0]!==a?(e=o.jsx(c("MAWUnrecoverableErrorBoundary.react"),{fallback:e,children:o.jsx(c("CometErrorBoundary.react"),{fallback:e,children:o.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:e,children:o.jsx(C,babelHelpers["extends"]({},a))})})}),b[0]=a,b[1]=e):e=b[1];return e}function E(a){return o.jsx(y,{error:a})}E.displayName=E.name+" [from "+f.id+"]";e=p(a);g["default"]=e}),226);
__d("CometMessagingJewelDropdownQuery.graphql",["CometMessagingJewelDropdownQuery_facebookRelayOperation","CometMessagingJewelDropdownCMBlendedEntrpyointEnabled.relayprovider","CometMessagingJewelDropdownSplitPreloadedQuery.relayprovider","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQuery",selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownContent_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometMessagingJewelDropdownCMBlendedEntrpyointEnabledrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"CometMessagingJewelDropdownQuery",selections:[{condition:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},a],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},a,c],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[d,{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},{"if":null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{"if":null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[d,{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},a],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],storageKey:null}]}]}]},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3nNEjf"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[c,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3nNEjf")'}],storageKey:null},a],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}]},{condition:"__relay_internal__pv__CometMessagingJewelDropdownCMBlendedEntrpyointEnabledrelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:10713},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"xxYRh"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[c,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelCommunitiesQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"xxYRh")'}],storageKey:null},a],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10713,trigger:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN")'},{alias:null,args:null,concreteType:"GroupsTab",kind:"LinkedField",name:"groups_tab",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGlobalFBGroupChat",kind:"LinkedField",name:"suggested_chats",plural:!0,selections:[a],storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:b("CometMessagingJewelDropdownQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__CometMessagingJewelDropdownCMBlendedEntrpyointEnabledrelayprovider:b("CometMessagingJewelDropdownCMBlendedEntrpyointEnabled.relayprovider"),__relay_internal__pv__CometMessagingJewelDropdownSplitPreloadedQueryrelayprovider:b("CometMessagingJewelDropdownSplitPreloadedQuery.relayprovider"),__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:b("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometMessagingJewelDropdown.react",["fbt","BaseMultiStepContainer.react","BasePopoverReflowSheetContext","CometMessagingJewelDropdownContent.react","CometMessagingJewelDropdownQuery.graphql","CometRelay","CometTopNavListDropdown.react","MWLogInboxFiltersInteraction","MWLogInteraction","cr:6188","justknobx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;e.useCallback;var l=e.useContext;function a(a){var b=d("react-compiler-runtime").c(10),c=a.entryPoints,e=a.extraProps,f=a.props;a=a.queries;if(a.jewelQueryRef!=null){var g;b[0]!==c||b[1]!==e||b[2]!==f||b[3]!==a?(g=k.jsx(m,{entryPoints:c,extraProps:e,jewelQueryRef:a.jewelQueryRef,props:f,queries:a}),b[0]=c,b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}else{b[5]!==c||b[6]!==e||b[7]!==f||b[8]!==a?(g=k.jsx(n,{entryPoints:c,extraProps:e,props:f,queries:a}),b[5]=c,b[6]=e,b[7]=f,b[8]=a,b[9]=g):g=b[9];return g}}function m(a){var c=d("react-compiler-runtime").c(4),e=a.jewelQueryRef,f=a.props;a=a.queries;f=f.onClose;a=a.mwInboxTrayContainerQuery;e=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("CometMessagingJewelDropdownQuery.graphql"),e);var g;c[0]!==a||c[1]!==f||c[2]!==e?(g=k.jsx(o,{mwInboxTrayContainerQuery:a,onClose:f,query$key:e}),c[0]=a,c[1]=f,c[2]=e,c[3]=g):g=c[3];return g}function n(a){var b=d("react-compiler-runtime").c(4),c=a.props;a=a.queries;c=c.onClose;var e=a.ebUpsellContainerQueryRef;a=a.mwInboxTrayContainerQuery;var f;b[0]!==e||b[1]!==a||b[2]!==c?(f=k.jsx(o,{ebUpsellContainerQueryRef:e,mwInboxTrayContainerQuery:a,onClose:c,query$key:null}),b[0]=e,b[1]=a,b[2]=c,b[3]=f):f=b[3];return f}function o(a){var e=d("react-compiler-runtime").c(13),f=a.ebUpsellContainerQueryRef,g=a.mwInboxTrayContainerQuery,i=a.onClose,j=a.query$key;a=l(c("BasePopoverReflowSheetContext"));a=a.isReflowSheet;var m=p,n;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Messenger"),e[0]=n):n=e[0];var o;e[1]!==a?(o={0:{className:"x1cvmir6"},1:{className:"x14atkfc"}}[!!a<<0],e[1]=a,e[2]=o):o=e[2];e[3]!==f||e[4]!==g||e[5]!==i||e[6]!==j?(a=k.jsx(c("BaseMultiStepContainer.react"),{fitContentWidth:!0,onPageChange:m,children:function(a){return k.jsx(c("CometMessagingJewelDropdownContent.react"),{ebUpsellContainerQueryRef:f,mwInboxTrayContainerQuery:g,onClose:i,pushPage:a,query:j})}}),e[3]=f,e[4]=g,e[5]=i,e[6]=j,e[7]=a):a=e[7];e[8]!==o||e[9]!==a?(m=k.jsx(c("CometTopNavListDropdown.react"),{label:n,name:"MWJewelDropdown",children:k.jsx("div",babelHelpers["extends"]({},o,{children:a}))}),e[8]=o,e[9]=a,e[10]=m):m=e[10];n=m;e[11]!==n?(o=b("cr:6188")!=null?k.jsx(b("cr:6188"),{children:n}):n,e[11]=n,e[12]=o):o=e[12];return o}function p(a){a>0&&c("justknobx")._("3802")&&(d("MWLogInteraction").logPopoverOpenCancel("popover_page_change"),d("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("popover_page_change"))}g["default"]=a}),226);
__d("FBIconMarketplaceFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M108 922v5.27a.23.23 0 0 1-.23.23h-7.54a.23.23 0 0 1-.23-.23V922h-1v5.27c0 .68.55 1.23 1.23 1.23h7.54c.68 0 1.23-.55 1.23-1.23V922h-1z",transform:"translate(352 157)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M109.291 919c.18 0 .3-.183.23-.348l-.686-1.609a.863.863 0 0 0-.802-.543h-8.066a.86.86 0 0 0-.799.534l-.69 1.618a.25.25 0 0 0 .23.348h10.583zm-11.041 1a.25.25 0 0 0-.25.25v1c0 .69.553 1.25 1.234 1.25h.083c.287 0 .567-.102.788-.288l.206-.194.097.082c.308.259.695.4 1.096.4h.088a1.71 1.71 0 0 0 1.106-.409l.063-.072.11.091c.305.252.688.39 1.084.39h.067c.401 0 .792-.144 1.1-.404l.068-.076.09.076c.31.261.702.404 1.107.404h.103c.404 0 .797-.145 1.11-.41l.056-.067.195.166c.236.2.534.311.843.311.72 0 1.306-.594 1.306-1.325v-.925a.25.25 0 0 0-.25-.25h-11.5zm6.75 8h-2v-3.25a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25V928z",transform:"translate(352 157)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M105.5 928.5h-3v-3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v3.75zm-1-1V925h-1v2.5h1z",transform:"translate(352 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FDSResizeFreeFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("580260"),20);b=a;g["default"]=b}),98);
__d("LSFetchCommunitiesActivityStatus",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.createArray(),c.forEach(c.db.table(162).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.folderId),d[0])})},function(a){return d[1]=c.i64.of_int32(d[0].length),c.i64.gt(d[1],c.i64.cast([0,0]))?(d[2]=new c.Map(),d[2].set("community_ids",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"fetch_unjoined_communities_activity_status",c.i64.cast([0,170003]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchCommunitiesActivityStatusStoredProcedure";a.__tables__=["community_folders"];e.exports=a}),null);
__d("LSFetchCommunitiesActivityStatusStoredProcedure",["LSFetchCommunitiesActivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a){a=a.storedProcedure(c("LSFetchCommunitiesActivityStatus"));return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSVerifyThreadsActivityStatus",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("server_mode",a[1]),d[0].set("from_timestamp_ms",a[2]),d[0].set("threads",a[3]),d[0].set("session_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"verify_threads_activity_status",c.i64.cast([0,648]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyThreadsActivityStatusStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSVerifyThreadsActivityStatusStoredProcedure",["LSSynchronousPromise","LSVerifyThreadsActivityStatus","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyThreadsActivityStatus"),e.sessionId,e.serverMode,e.fromTimestampMs,e.threads);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react",["cr:1266"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1266")}),98);
__d("useHasOTCEligibleDevices",["MAWOneTimeCodeGating","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.encrypted_backups?(e=function(){return d("ReQL").fromTableAscending(b.tables.encrypted_backups)},a[0]=b.tables.encrypted_backups,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];a=d("ReQLSuspense").useFirst(e,g,f.id+":19");return a==null||!d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?!1:a.hasOtcEligibleDevices}g["default"]=a}),98);
__d("MWEBVirtualDevicesContextProvider.react",["MAWOneTimeCodeGating","MWEBVirtualDevicesContext.react","gkx","react","react-compiler-runtime","useHasOTCEligibleDevices","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j=(b=c("gkx")("24064"))!=null?b:!1;function a(a){var b=d("react-compiler-runtime").c(14),e=a.children,f=a.hasOtcEligibleDevicesInitialValue,g=a.offlineDevicesCountInitialValue;a=a.vestaClientIDInitialValue;g=g===void 0?-1:g;a=(a=a)!=null?a:void 0;var h;b[0]!==g||b[1]!==a?(h={offlineDevicesCountInitialValue:g,vestaClientIDInitialValue:a},b[0]=g,b[1]=a,b[2]=h):h=b[2];g=c("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")(h);a=g.offlineDevicesCount;h=g.vestaClientID;g=c("useHasOTCEligibleDevices")();var k;b[3]!==g||b[4]!==f?(k=d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&(j===!0||f===!0||g),b[3]=g,b[4]=f,b[5]=k):k=b[5];g=k;f=h!=null;b[6]!==g||b[7]!==a||b[8]!==f||b[9]!==h?(k={virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:g,isPINCodeRegistered:f,offlineDevicesCount:a,vestaClientID:h}},b[6]=g,b[7]=a,b[8]=f,b[9]=h,b[10]=k):k=b[10];g=k;a=g;b[11]!==e||b[12]!==a?(f=i.jsx(d("MWEBVirtualDevicesContext.react").MWEBVirtualDevicesContext.Provider,{value:a,children:e}),b[11]=e,b[12]=a,b[13]=f):f=b[13];return f}g["default"]=a}),98);
__d("MWEncryptedBackupsJewelNuxWrapper_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsJewelNuxWrapper_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query"}]},{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup",selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null}],storageKey:null}],type:"XFBEncryptedBackup",abstractKey:null};e.exports=a}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded",["CometRelay","react","react-compiler-runtime","useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a){var c=d("react-compiler-runtime").c(4);a=a.encryptedBackup;var e=d("CometRelay").useFragment(h!==void 0?h:h=b("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"),a);c[0]!==(e==null?void 0:e.virtual_devices)?(a=function(){var a;a=0;var b;b=null;e==null?void 0:e.virtual_devices.forEach(function(c){bb13:switch(c.device_type){case"HSM":b=c.client_generated_id;break bb13;case"OFFLINE":a=a+1;a;break bb13;default:}});return{offlineDevicesCount:a,vestaClientID:b}},c[0]=e==null?void 0:e.virtual_devices,c[1]=a):a=c[1];e==null?void 0:e.virtual_devices;a=a;var f;c[2]!==a?(f={getVirtualDevices:a},c[2]=a,c[3]=f):f=c[3];return f}g["default"]=a}),98);
__d("MWEncryptedBackupsJewelNuxWrapper.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","HeroInteractionIgnoreWithDiv.react","JSResourceForInteraction","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEBMobileOnboardingEligibility","MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContextProvider.react","MWEncryptedBackupsJewelNuxWrapper_query.graphql","MWEncryptedBackupsThreadListQPWrapper.react","cr:20045","cr:2046","cr:21270","react","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded","useMWChatEncryptedBackupsVestaUserInfo","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useMemo;var k=d("MWEBMobileOnboardingEligibility").requireMobileOnboardingIfEligible(c("JSResourceForInteraction")("MWEBMobileOnboardingQPBannerWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapper.react"));function a(a){var e,f,g=d("react-compiler-runtime").c(23),i=a.children;a=a.query;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsJewelNuxWrapper_query.graphql"),a);var k;g[0]!==a?(k={entrypoint:c("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST,query:a},g[0]=a,g[1]=k):k=g[1];k=c("useEncryptedBackupsProcessStatePreLoaded")(k);e=(e=a.viewer.messenger_default_encrypted_backup)==null?void 0:e.vesta_user_info;var m;g[2]!==e?(m={vestaGetUserInfoResponse$key:e},g[2]=e,g[3]=m):m=g[3];e=c("useMWChatEncryptedBackupsVestaUserInfo")(m);g[4]!==e.attemptsRemaining||g[5]!==e.loginTimeoutRemainingSecs?(m={attemptsRemaining:e.attemptsRemaining,loginTimeoutRemainingSecs:e.loginTimeoutRemainingSecs,vestaClientID:null},g[4]=e.attemptsRemaining,g[5]=e.loginTimeoutRemainingSecs,g[6]=m):m=g[6];e=m;m=e;e=a==null?void 0:a.xfb_backup;var n;g[7]!==e?(n={encryptedBackup:e},g[7]=e,g[8]=n):n=g[8];e=c("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(n);n=e.getVirtualDevices;g[9]!==n?(e=n(),g[9]=n,g[10]=e):e=g[10];n=e;e=n.offlineDevicesCount;n=n.vestaClientID;f=(f=a==null?void 0:(f=a.xfb_backup)==null?void 0:f.has_otc_eligible_devices)!=null?f:void 0;var o;g[11]!==k||g[12]!==i||g[13]!==a?(o=j.jsx(l,{backupState:k,children:i,fragment:a}),g[11]=k,g[12]=i,g[13]=a,g[14]=o):o=g[14];g[15]!==o||g[16]!==m?(k=j.jsx(d("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContext.Provider,{value:m,children:o}),g[15]=o,g[16]=m,g[17]=k):k=g[17];g[18]!==e||g[19]!==k||g[20]!==f||g[21]!==n?(i=j.jsx(c("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:f,offlineDevicesCountInitialValue:e,vestaClientIDInitialValue:n,children:k}),g[18]=e,g[19]=k,g[20]=f,g[21]=n,g[22]=i):i=g[22];return i}function l(a){var e=d("react-compiler-runtime").c(13),f=a.backupState,g=a.children;a=a.fragment;switch(f){case 4:e[0]!==g||e[1]!==a?(f=b("cr:2046")||c("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react")?j.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return g},children:c("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react")!=null?j.jsx(c("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react"),{trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL,children:g}):b("cr:2046")!=null&&j.jsx(b("cr:2046"),{fragmentKey:a,trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL,children:g})})}):g,e[0]=g,e[1]=a,e[2]=f):f=e[2];return f;case 2:e[3]!==g?(f=b("cr:20045")?j.jsx(b("cr:20045"),{source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,children:g}):g,e[3]=g,e[4]=f):f=e[4];var h=f;e[5]!==h?(f=function(){return h},e[5]=h,e[6]=f):f=e[6];var i;e[7]!==h||e[8]!==a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?(i=a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:j.jsx(d("CometRelay").MatchContainer,{match:a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,props:{bannerSource:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,children:h,qpSource:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_ONBOARDING_QP}})}):b("cr:21270")?j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:j.jsx(b("cr:21270"),{source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,children:h})}):j.jsx(k,{fallback:h,props:{children:h,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_ONBOARDING_QP,trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL}}),e[7]=h,e[8]=a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,e[9]=i):i=e[9];e[10]!==f||e[11]!==i?(a=j.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:j.jsx(c("CometErrorBoundary.react"),{fallback:f,children:i})}),e[10]=f,e[11]=i,e[12]=a):a=e[12];return a;default:return g}}g["default"]=a}),98);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("gkx")("23433"),k={logoGlimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",height:"x1qx5ct2",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(6),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={0:{className:"xlhe6ec x1lq5wgf xgqcy7u x30kzoy x9jhf4c x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1lq5wgf xgqcy7u x30kzoy x9jhf4c x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!j<<0],a[0]=b):b=a[0];var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.logoGlimmer})}),a[1]=e):e=a[1];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsxs(c("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[e,i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})})]}),a[2]=e):e=a[2];var f;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("MWXRow.react"),{wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx("div",babelHelpers["extends"]({className:"x16ngw23 xwib8y2"},{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})}))})}),a[3]=f):f=a[3];var g;a[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("MWXRow.react"),{direction:"forward",wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:k.pinInputGlimmer})})}),a[4]=g):g=a[4];a[5]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx("div",babelHelpers["extends"]({},b,{children:i.jsxs(c("MWXColumn.react"),{spacing:8,style:k.root,children:[e,f,g,i.jsx(c("MWXRow.react"),{wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx("div",babelHelpers["extends"]({className:"x18xe386 xpdvgm7 x1y1aw1k"},{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})}))})})]})})),a[5]=b):b=a[5];return b}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(18);a=a.upsellType;var e=(h||(h=c("useReStore")))(),g;b[0]!==a?(g=d("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),b[0]=a,b[1]=g):g=b[1];a=g;g=a;var i=g.countdownInMS,j=g.impressionsCountKey,k=g.lastImpressionTimeKey,l=g.maxImpressionLimit;b[2]!==i||b[3]!==e.tables.experiences_shared_state||b[4]!==k?(a=function(){return d("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(k).map(function(a){a=a.stateValue;return a!=null&&+a+i>Date.now()?!0:!1})},b[2]=i,b[3]=e.tables.experiences_shared_state,b[4]=k,b[5]=a):a=b[5];b[6]!==i||b[7]!==e||b[8]!==k?(g=[i,e,k],b[6]=i,b[7]=e,b[8]=k,b[9]=g):g=b[9];a=d("ReQLSuspense").useFirst(a,g,f.id+":41");b[10]!==e.tables.experiences_shared_state||b[11]!==j||b[12]!==l?(g=function(){return d("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(j).map(function(a){a=a.stateValue;return l===d("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+a<l?!1:!0})},b[10]=e.tables.experiences_shared_state,b[11]=j,b[12]=l,b[13]=g):g=b[13];var m;b[14]!==e||b[15]!==j||b[16]!==l?(m=[e,j,l],b[14]=e,b[15]=j,b[16]=l,b[17]=m):m=b[17];b=d("ReQLSuspense").useFirst(g,m,f.id+":56");return a===!0||b===!0}g["default"]=a}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState;function a(a){var b=d("react-compiler-runtime").c(5);a=a.upsellType;var e=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),f=i(!1),g=f[0];f=f[1];var h;b[0]!==a?(h={upsellType:a},b[0]=a,b[1]=h):h=b[1];h=c("useMWEBIsUpsellDeferred")(h);var j=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();j=j.virtualDeviceInfo;j=j.doesUserHaveOtcEligibleDevices;if(e&&a===d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!j){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=[!0,f],b[2]=e):e=b[2];return e}a=h===!0||g;b[3]!==a?(j=[a,f],b[3]=a,b[4]=j):j=b[4];return j}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=c("deferredLoadComponent")(c("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),l=c("gkx")("3952");function a(a){var e=d("react-compiler-runtime").c(15),f=a.children,g=a.fragmentKey;a=a.trigger;g=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),g);var i=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),m=c("useMWEBGetUpsellState")();m=m.isRestoreUpsellsDismissed;var n;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(n={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},e[0]=n):n=e[0];n=c("useMWEncryptedBackupsIsUpsellDismissed")(n);var o=n[0];n=n[1];var p;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(p={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},e[1]=p):p=e[1];p=c("useMWEncryptedBackupsIsUpsellDismissed")(p);var q=p[0];p=p[1];var r;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(r={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},e[2]=r):r=e[2];r=c("useMWEncryptedBackupsIsUpsellDismissed")(r);var s=r[0];r=r[1];var t;e[3]!==i?(t={backupState:4,isCooldownOrLockOutState:i},e[3]=i,e[4]=t):t=e[4];i=c("useHasRestoreInterstitialSoftblockBeenDismissed")(t);t=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform();o=o||q;if(m||o&&!l||o&&l&&s)return f;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(c("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),e[5]=q):q=e[5];e[6]!==f||e[7]!==t||e[8]!==g||e[9]!==o||e[10]!==r||e[11]!==n||e[12]!==p||e[13]!==a?(m=j.jsx(c("CometPlaceholder.react"),{fallback:q,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:j.jsx(k,{children:f,currentSupportedPlatform:t,fragmentKey:g,hasDismissedQps:o,setHasDismissedBanner:r,setHasDismissedQp:n,setHasDismissedQpWithPin:p,trigger:a})}),e[6]=f,e[7]=t,e[8]=g,e[9]=o,e[10]=r,e[11]=n,e[12]=p,e[13]=a,e[14]=m):m=e[14];s=m;switch(t){case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return f;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return i?s:f;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return s}}g["default"]=a}),98);
__d("useHasUnjoinedCMThreads",["LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("react-compiler-runtime").c(4),b=(i||(i=c("useReStore")))(),e;a[0]!==b.tables.threads?(e=function(){return d("ReQL").union(d("ReQL").fromTableDescending(b.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange((h||(h=d("LSIntEnum"))).ofNumber(24)),d("ReQL").fromTableDescending(b.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(h.ofNumber(19)))},a[0]=b.tables.threads,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];return!!d("ReQLSuspense").useFirst(e,g,f.id+":22")}g["default"]=a}),98);
__d("MessengerAsyncStorage",["AsyncStorage"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("AsyncStorage")}),98);
__d("useMWCMVerifyActivityStatusOnMountAndFocus",["FBLogger","I64","LSDict","LSFactory","LSFetchCommunitiesActivityStatusStoredProcedure","LSVec","LSVerifyThreadsActivityStatusStoredProcedure","MessengerAsyncStorage","MetaConfig","ServerTime","VisibilityAPI","clearInterval","isCommunityContainersEnabled","promiseDone","react","react-compiler-runtime","setInterval","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=i||d("react");b.useCallback;var k=b.useEffect;b.useMemo;var l=b.useRef,m=b.useState,n=1e3*60*60,o=n*3;function p(a){return(j||(j=d("I64"))).add(j.lsl_(j.of_float(a[0]),32),j.of_float(a[1]))}function q(a){return[(j||(j=d("I64"))).to_float(j.lsr_(a,32)),j.to_float(j.and_(a,j.of_int32(4294967295)))]}function a(a,b){var e=d("react-compiler-runtime").c(33),g=(h||(h=c("useReStore")))(),i=l(null),t="__"+a+".fromTimestampMs__",u;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(u=q((j||(j=d("I64"))).of_float(d("ServerTime").getMillis()-o)),e[0]=u):u=e[0];u=u;u=m(u);var v=u[0],w=u[1],x=l(v),y;e[1]!==v?(u=function(){x.current=v},y=[v],e[1]=v,e[2]=u,e[3]=y):(u=e[2],y=e[3]);k(u,y);var z=l(!1);e[4]===Symbol["for"]("react.memo_cache_sentinel")?(u=c("MetaConfig")._("55")?["JOINED_PUBLIC_CHANNELS"]:[],e[4]=u):u=e[4];y=u;e[5]!==a?(u=c("MetaConfig")._("95")||a==="ContextSwitcher"?["JOINED_COMMUNITY_CHANNELS"]:[],e[5]=a,e[6]=u):u=e[6];a=u;e[7]!==a?(u=[].concat(y,a),e[7]=a,e[8]=u):u=e[8];y=u;var A=y;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("isCommunityContainersEnabled")(),e[9]=a):a=e[9];var B=a;e[10]!==g||e[11]!==t||e[12]!==A?(u=function(){A.length>0&&c("promiseDone")(c("MessengerAsyncStorage").getItem(t).then(function(a){if(a!=null){var b=JSON.parse(a);b!=null&&(B&&c("promiseDone")(g.runInTransaction(s,"readwrite",void 0,void 0,f.id+":103")),c("promiseDone")(g.runInTransaction(function(a){return c("LSVerifyThreadsActivityStatusStoredProcedure")(c("LSFactory")(a),{fromTimestampMs:p(b),serverMode:c("LSVec").ofArray(A),threads:new(c("LSDict"))([])})},"readwrite",void 0,void 0,f.id+":114")))}})["catch"](r),function(){z.current=!0;var a=q((j||(j=d("I64"))).of_float(d("ServerTime").getMillis()));c("promiseDone")(c("MessengerAsyncStorage").setItem(t,JSON.stringify(a)),function(){w(a)})})},e[10]=g,e[11]=t,e[12]=A,e[13]=u):u=e[13];var C=u;e[14]===Symbol["for"]("react.memo_cache_sentinel")?(y=function(){i.current!=null&&(c("clearInterval")(i.current),i.current=null)},e[14]=y):y=e[14];var D=y;e[15]!==C?(a=function(){if(i.current!=null)return;if(c("MetaConfig")._("96")){var a;i.current=c("setInterval")(C,(a=c("MetaConfig")._("43"))!=null?a:n)}},e[15]=C,e[16]=a):a=e[16];var E=a;e[17]!==E||e[18]!==C?(u=function(){var a=d("ServerTime").getMillis()-(j||(j=d("I64"))).to_float(p(x.current));i.current==null&&E();a>=((a=c("MetaConfig")._("43"))!=null?a:n)&&C()},e[17]=E,e[18]=C,e[19]=u):u=e[19];var F=u;e[20]!==F||e[21]!==b?(y=function(){d("VisibilityAPI").isVisibilityHidden()?D():b&&c("MetaConfig")._("97")&&F()},e[20]=F,e[21]=b,e[22]=y):y=e[22];var G=y;e[23]!==E||e[24]!==C||e[25]!==G?(a=function(){var a;a=null;z.current||(C(),d("VisibilityAPI").canUseVisibilityAPI&&(a=d("VisibilityAPI").onVisibilityChange(G)),E());return function(){a!=null&&d("VisibilityAPI").removeVisibiltyChangeListener(a),i.current!=null&&(c("clearInterval")(i.current),i.current=null)}},e[23]=E,e[24]=C,e[25]=G,e[26]=a):a=e[26];e[27]!==F||e[28]!==E||e[29]!==b||e[30]!==C||e[31]!==G?(u=[D,F,E,b,C,G],e[27]=F,e[28]=E,e[29]=b,e[30]=C,e[31]=G,e[32]=u):u=e[32];k(a,u)}function r(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to set timestamp for thread activity status")}function s(a){return c("LSFetchCommunitiesActivityStatusStoredProcedure")(c("LSFactory")(a))}g["default"]=a}),98);
__d("useMWInboxContextSwitcherFilterPreloaderCond",["cr:21092","emptyFunction","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){a=d("react-compiler-runtime").c(1);a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={onHoverIn:c("emptyFunction"),onHoverOut:c("emptyFunction"),onPressIn:c("emptyFunction")},a[0]=b):b=a[0];return b}f=(e=b("cr:21092"))!=null?e:a;b=f;g["default"]=b}),98);
__d("useMWInboxContextSwitcherFilterPreloaderOnMountCond",["cr:21093"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){}d=(c=b("cr:21093"))!=null?c:a;e=d;g["default"]=e}),98);
__d("MWInboxContextSwitcher.react",["fbt","C4GFalcoLoggerDeferred","FDSPivotLinkTabs.react","I64","LSFactory","LSIntEnum","LSThreadRangeFilter","MWChatBadgeCountUpdates.react","MWInboxPersistedUIState","MWPBumpEntityKey","Promise","ReQL","ReQLSuspense","cr:7085","gkx","promiseDone","react","react-compiler-runtime","useHasUnjoinedCMThreads","useMWCMVerifyActivityStatusOnMountAndFocus","useMWInboxContextSwitcherFilterPreloaderCond","useMWInboxContextSwitcherFilterPreloaderOnMountCond","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react")),o=m.useEffect,p={tabContainer:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},tabContainerWithFilters:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineStart:"xwn43p0",paddingInlineEnd:"x1x5flf6",paddingLeft:null,paddingRight:null,$$css:!0},tabWithFilters:{paddingInlineStart:"xyiysdx",paddingInlineEnd:"x14vy60q",paddingLeft:null,paddingRight:null,$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(33),e=a.entryPoint,g=a.onTabChange,i=a.parentThreadKey,m=a.selectedFilterTab,s=(j||(j=c("useReStore")))();c("useMWCMVerifyActivityStatusOnMountAndFocus")("ContextSwitcher",e==="inbox");var t;b[0]!==s?(a=function(){c("promiseDone")(s.runInTransaction(r,"readwrite",void 0,void 0,f.id+":92"))},t=[s],b[0]=s,b[1]=a,b[2]=t):(a=b[1],t=b[2]);o(a,t);b[3]!==s.tables.threads?(a=function(){var a=[d("ReQL").fromTableDescending(s.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange((k||(k=d("LSIntEnum"))).ofNumber(23)),d("ReQL").fromTableDescending(s.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(k.ofNumber(18)),d("ReQL").fromTableDescending(s.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(k.ofNumber(21))];return d("ReQL").union.apply(void 0,a)},b[3]=s.tables.threads,b[4]=a):a=b[4];b[5]!==s?(t=[s],b[5]=s,b[6]=t):t=b[6];a=!!d("ReQLSuspense").useFirst(a,t,f.id+":102");var u=c("useHasUnjoinedCMThreads")();t=d("MWInboxPersistedUIState").usePersistedUIState(u,"__MWInboxContextSwitcher.hasViewedSuggestedChats__");var v=t[0],w=t[1];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(t=(k||(k=d("LSIntEnum"))).ofNumber(0),b[7]=t):t=b[7];t=d("MWChatBadgeCountUpdates.react").useUnseenThreadCount(t);t=t!=null&&t>0;var x=d("MWChatBadgeCountUpdates.react").useHasUnseenCommunityThreads(),y=u&&!v,z=e==="jewel"?"jewel_tray":"messenger_inbox",A=e==="inbox"?"jewel_inbox":"chats_inbox",B;b[8]!==A||b[9]!==z?(B={onImpressionStart:function(){d("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"impression",event:"blended_threadlist_community_tab_rendered",parent_surface:A,source:"blended_threadlist_community_tab",surface:z})}},b[8]=A,b[9]=z,b[10]=B):B=b[10];B=c("useSinglePartialViewImpression")(B);var C;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(C=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY),b[11]=C):C=b[11];c("useMWInboxContextSwitcherFilterPreloaderOnMountCond")(s,i,C);b[12]===Symbol["for"]("react.memo_cache_sentinel")?(C=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY),b[12]=C):C=b[12];c("useMWInboxContextSwitcherFilterPreloaderOnMountCond")(s,i,C);b[13]===Symbol["for"]("react.memo_cache_sentinel")?(C=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY),b[13]=C):C=b[13];C=c("useMWInboxContextSwitcherFilterPreloaderCond")(s,i,C);C=C.onPressIn;var D;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(D=(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY),b[14]=D):D=b[14];i=c("useMWInboxContextSwitcherFilterPreloaderCond")(s,i,D);D=i.onPressIn;if(b[15]!==e||b[16]!==a||b[17]!==u||b[18]!==y||b[19]!==x||b[20]!==t||b[21]!==v||b[22]!==B||b[23]!==C||b[24]!==D||b[25]!==g||b[26]!==A||b[27]!==m||b[28]!==w||b[29]!==z){i=[{filter:(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").NONE),hasNewContentBadge:t,isShown:!0,label:c("gkx")("12903")?h._(/*BTDS*/"T\u1ea5t c\u1ea3"):h._(/*BTDS*/"H\u1ed9p th\u01b0"),odsAction:"inbox_tab_click"}].concat(c("gkx")("12903")?[{filter:(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").UNREAD_ONLY),hasNewContentBadge:!1,isShown:!0,label:h._(/*BTDS*/"Ch\u01b0a \u0111\u1ecdc"),odsAction:"unread_tab_click",onPressIn:D}]:[],c("gkx")("12903")?[{filter:(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").GROUPS_ONLY),hasNewContentBadge:!1,isShown:!0,label:h._(/*BTDS*/"Nh\u00f3m"),odsAction:"groups_tab_click",onPressIn:C}]:[],[{filter:k.ofNumber(c("LSThreadRangeFilter").COMMUNITIES),hasNewContentBadge:x||y,isShown:c("gkx")("12903")?!0:a||u,label:h._(/*BTDS*/"C\u1ed9ng \u0111\u1ed3ng"),logClick:function(){d("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",event:"blended_threadlist_community_tab_clicked",parent_surface:A,source:"blended_threadlist_community_tab",surface:z})},odsAction:"communities_tab_click",ref:B}]);i=i.filter(q).map(function(a,b){var f=a.filter;b=a.hasNewContentBadge;a.isShown;var h=a.logClick,i=a.odsAction,j=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,["filter","hasNewContentBadge","isShown","logClick","odsAction","ref"]);return babelHelpers["extends"]({},a,{hasNewContentBadge:b,onPress:function(){(l||(l=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES))&&u&&!v&&w(!0),d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.contextswitcher."+e,i),h==null?void 0:h(),g(f)},ref:j,selected:(l||(l=d("I64"))).equal(f,m),testid:(l||(l=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRangeFilter").COMMUNITIES))?"communities_tab":void 0,xstyle:c("gkx")("12903")?p.tabWithFilters:{}})});b[15]=e;b[16]=a;b[17]=u;b[18]=y;b[19]=x;b[20]=t;b[21]=v;b[22]=B;b[23]=C;b[24]=D;b[25]=g;b[26]=A;b[27]=m;b[28]=w;b[29]=z;b[30]=i}else i=b[30];a=i;b[31]!==a?(y=n.jsx(c("FDSPivotLinkTabs.react"),{linkType:"deemphasized",tabs:a,tabsContainerStyle:c("gkx")("12903")?p.tabContainerWithFilters:p.tabContainer}),b[31]=a,b[32]=y):y=b[32];return y}function q(a){return a.isShown}function r(a){return b("cr:7085")!=null?b("cr:7085")(c("LSFactory")(a)):(i||(i=b("Promise"))).resolve()}g["default"]=a}),226);
__d("MWInboxContextSwitcherCond.react",["cr:8635","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(2),e;c[0]!==a?(e=b("cr:8635")?i.jsx(b("cr:8635"),babelHelpers["extends"]({},a)):null,c[0]=a,c[1]=e):e=c[1];return e}g["default"]=a}),98);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:12489","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12489")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWThreadListMarketplaceItem.react",["fbt","CometMarketplaceLogger","LSContactBitOffset","LSIntEnum","MWPBumpEntityKey","MWThreadListFolderItem.react","MWXIconGroup","MWXIconMarketplace","MWXIconStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useLogMarketplaceClick","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect;function a(a){var b=d("react-compiler-runtime").c(27),e=a.onClick,g=a.responsive,k=a.selected,p=a.size;a=a.thread;var q=c("useLogMarketplaceClick")("marketplace_inbox_folder"),r=(i||(i=c("useReStore")))(),s;b[0]!==r.tables._user_info?(s=function(){return d("ReQL").fromTableAscending(r.tables._user_info).map(o)},b[0]=r.tables._user_info,b[1]=s):s=b[1];var t;b[2]!==r?(t=[r],b[2]=r,b[3]=t):t=b[3];var u=d("ReQLSuspense").useFirst(s,t,f.id+":51");b[4]!==r.tables.contacts||b[5]!==u?(s=function(){return u!=null?d("ReQL").fromTableAscending(r.tables.contacts,[].concat(d("LSContactBitOffset").contactCapabilityFields)).getKeyRange(u):d("ReQL").empty()},b[4]=r.tables.contacts,b[5]=u,b[6]=s):s=b[6];b[7]!==r||b[8]!==u?(t=[r,u],b[7]=r,b[8]=u,b[9]=t):t=b[9];s=d("ReQLSuspense").useFirst(s,t,f.id+":56");t=s!=null&&d("LSContactBitOffset").has(86,s);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(s=[],b[10]=s):s=b[10];m(n,s);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._(/*BTDS*/"Marketplace").toString(),b[11]=s):s=b[11];s=s;var v=c("MWXIconMarketplace");if(t===!0){b[12]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"_j[\"Nh\\u00f3m mua v\\u00e0 b\\u00e1n\",\"3a9a1e192465754ec4427995fe1cffb4\",1]").toString(),b[12]=t):t=b[12];s=t;v=c("MWXIconGroup")}b[13]!==v?(t=l.jsx(c("MWXIconStrict.react"),{color:"primary",icon:v,size:36}),b[13]=v,b[14]=t):t=b[14];b[15]!==q||b[16]!==e?(v=function(){q();e((j||(j=d("LSIntEnum"))).ofNumber(-12));return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","marketplace_threads")},b[15]=q,b[16]=e,b[17]=v):v=b[17];var w;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(w=(j||(j=d("LSIntEnum"))).ofNumber(-12),b[18]=w):w=b[18];b[19]!==g||b[20]!==k||b[21]!==p||b[22]!==t||b[23]!==v||b[24]!==a||b[25]!==s?(w=l.jsx(c("MWThreadListFolderItem.react"),{icon:t,onClick:v,responsive:g,selected:k,size:p,systemFolder:w,thread:a,threadName:s}),b[19]=g,b[20]=k,b[21]=p,b[22]=t,b[23]=v,b[24]=a,b[25]=s,b[26]=w):w=b[26];return w}function n(){return d("CometMarketplaceLogger").logImpression("marketplace_inbox_folder")}function o(a){return a.facebookUserId}g["default"]=a}),226);
__d("useMWJewelSettingsButtonSecurityAlertsBadge",["FDSBadge.react","react","react-compiler-runtime","useDeviceAlertCount","useMAWSecurityAlertsPreferences"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(){var a=d("react-compiler-runtime").c(5),b=c("useMAWSecurityAlertsPreferences")();b=b.securityAlertsPreferences;var e=d("useDeviceAlertCount").useDeviceAlertCount();b==null?void 0:b.allowSecurityAlertForSelf;var f;a[0]!==(b==null?void 0:b.allowSecurityAlertForSelf)||a[1]!==e?(f=(b==null?void 0:b.allowSecurityAlertForSelf)&&e>0?i.jsx("div",babelHelpers["extends"]({className:"x1j1mzgm x10l6tqk x12ibf10"},{children:i.jsx(c("FDSBadge.react"),{testid:void 0})})):null,a[0]=b==null?void 0:b.allowSecurityAlertForSelf,a[1]=e,a[2]=f):f=a[2];a[3]!==f?(b={badge:f},a[3]=f,a[4]=b):b=a[4];e=b;return e}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("AudioSettingsVolumeSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",QUIET:"quiet"});f["default"]=a}),66);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isWatchTab:!1,onNodeChangeFunc:null});function a(){return i(j)}g.CometVideoPlayerInstreamAdsFeedContextCardContext=j;g.useCometVideoPlayerInstreamAdsFeedContextCardContext=a}),98);
__d("CometVideoPlayerNextgendashAvailability",[],(function(a,b,c,d,e,f){a=Object.freeze({AVAILABLE:"AVAILABLE",UNAVAILABLE_NEXTGENDASH_GK:"UNAVAILABLE_NEXTGENDASH_GK",UNAVAILABLE_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5",UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",UNAVAILABLE_FROM_JS_NEXTGENDASH_GK:"UNAVAILABLE_FROM_JS_NEXTGENDASH_GK",UNAVAILABLE_FROM_JS_NOT_DESIRED:"UNAVAILABLE_FROM_JS_NOT_DESIRED"});f["default"]=a}),66);
__d("FDSResizeUpFilled20Icon",["cr:14081"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14081")}),98);
__d("FDSResizeUpFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("517763"),20);b=a;g["default"]=b}),98);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.fairplay_cert,d=a.graph_api_video_license_uri,e=a.video_license_uri_map;a=a.widevine_cert;d={fairplayCert:b,graphApiVideoLicenseUri:(b=d)!=null?b:null,videoLicenseUriMap:e,widevineCert:a};return d.graphApiVideoLicenseUri===null&&c("isEmptyObject")(d.videoLicenseUriMap)?null:d}g.makeGraphQLVideoDRMInfo=a}),98);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);function a(a){return(a=g.cast(a))!=null?a:null}f.HiveTechOrder=g;f.hiveTechOrderOrNull=a}),66);
__d("InstreamAdsConfig",["PMVInterruptionsWWWSitevarConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=15e3,j=5e3,k=200,l=200,m=3e3,n=5e3,o=6e4,p=300,q=6e4,r=6e4,s=3e3,t=16,u=15,v=5,w=200,x=96,y=93,z=92,A=97,B="unified_scheduler",C="is_live_preroll";function a(){return 4e3}function b(){return s}function d(){return 1e3}function e(){return 2e3}function f(){return c("gkx")("24371")?o:3e5}function D(){return i}function E(){return j}function F(){return k}function G(){return h}function H(){return p}function I(){return l}function J(){return!c("gkx")("24372")?m:n}function K(){return c("PMVInterruptionsWWWSitevarConfig").pmv_pre_roll_fetch_timeout_ms}function L(){return q}function M(){return r}g.DEFAULT_LONGER_AD_DURATION=t;g.DEFAULT_AD_COMPLETION_DURATION=u;g.DEFAULT_SKIPPABLE_TIME_THRESHOLD=v;g.DEFAULT_FETCH_TIME_INTERVAL_MS=w;g.UNIFIED_SCHEDULER_AD_INDEX=x;g.FULLSCREEN_AD_INDEX=y;g.CLICK_TO_PLAY_AD_INDEX=z;g.IS_LIVE_PREROLL_INDEX=A;g.UNIFIED_SCHEDULER_TIGGER_SOURCE=B;g.IS_LIVE_PREROLL_TRIGGER_SOURCE=C;g.getNonPmvMaxFetchTimeMS=a;g.getIsLivePrerollMaxFetchTimeMS=b;g.getHaloStartFetchTimeMS=d;g.getNonLiveBeginningTransitionTimeMS=e;g.getNonLiveMidrollGapRuleMS=f;g.getPostRollPreFetchTimeMs=D;g.getPostRollPreFetchEndTimeMs=E;g.getPreFetchTimeDeltaMs=F;g.getPreFetchTimeMs=G;g.getRecheckStartMs=H;g.getStartDeltaMs=I;g.getStartingIndicatorMs=J;g.getPMVInterruptionsPreRollFetchTimeMs=K;g.getUnifiedSchedulerStartDelayMs=L;g.getUnifiedSchedulerFrequencyMs=M}),98);
__d("InstreamAdsExtraFieldsContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext(null);function a(){return i(j)}g.InstreamAdsExtraFieldsContext=j;g.useInstreamAdsExtraFieldsContext=a}),98);
__d("InstreamAdsPalmStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext("INIT");function a(){return i(j)}g.InstreamAdsPalmStateContext=j;g.useInstreamAdsPalmStateContext=a}),98);
__d("InstreamPalmStateManagerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext;c={setCurrentInsertion:function(){},setExtraFields:function(){},setHideAdBehavior:function(){},setIsEmpty:function(){},setState:function(){}};var j=b.createContext(c);function a(){return i(j)}g.InstreamPalmStateManagerContext=j;g.useInstreamPalmStateManager=a}),98);
__d("InstreamVideoAdBreaksPlayer_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"InstreamExtraConfig",kind:"LinkedField",name:"instream_extra_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"instream_halo_delay_time_seconds",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{args:null,documentName:"InstreamVideoAdBreaksPlayer_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayerImpl_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("InstreamVideoAdBreaksPlayer.react",["CometPlaceholder.react","CometRelay","InstreamVideoAdBreaksPlayer_video.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(11),f=a.playerFormat,g=a.subOrigin;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("InstreamVideoAdBreaksPlayer_video.graphql"),a);var i=a.id,k=a.instream_extra_config;a=a.instream_video_ad_breaks_comet;k=k==null?void 0:k.instream_halo_delay_time_seconds;var l;e[0]!==k?(l={instreamHaloDelayTimeSeconds:k},e[0]=k,e[1]=l):l=e[1];e[2]!==a||e[3]!==f||e[4]!==g||e[5]!==l||e[6]!==i?(k={instreamExtraConfig:l,instreamVideoAdBreaksComet:a,playerFormat:f,subOrigin:g,videoFBID:i},e[2]=a,e[3]=f,e[4]=g,e[5]=l,e[6]=i,e[7]=k):k=e[7];e[8]!==a||e[9]!==k?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:k})}),e[8]=a,e[9]=k,e[10]=f):f=e[10];return f}g["default"]=a}),98);
__d("LatencySensitiveType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2});c=a;f["default"]=c}),66);
__d("OzActiveActiveFailoverNetworkRequestStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.onResponse=function(a,b){var c=a.headers;c&&c.has("x-fb-video-replica")&&this.$1(a,b);return null};b.onError=function(a,b){return null};return a}();f["default"]=a}),66);
__d("OzBufferVTTCaptionsVisibleStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!this.$1()};b.getBufferTarget=function(){return 0};return a}();f["default"]=a}),66);
__d("OzCDNSignedQueryParams",["ConstUriUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.$2=function(a,b,c){this.$1[a]==null&&(this.$1[a]={}),this.$1[a][b]=c};b.get=function(a){a=this.$1[a];return a==null?null:a};b.update=function(a){a=d("ConstUriUtils").getUri(a);if(a!=null){var b=a.getQueryParams();a=a.getDomain()+a.getPath();var c=b.get("oe");c!=null&&this.$2(a,"oe",String(b.get("oe")));b.get("oh")!=null&&this.$2(a,"oh",String(b.get("oh")))}};return a}();g["default"]=a}),98);
__d("OzCustomParsers",[],(function(a,b,c,d,e,f){function a(){return new Map([["fbProjection",function(a){try{return a.Period[0].AdaptationSet[0].$.FBProjection||null}catch(a){return null}}],["hasInbandCaptionsFromAccessibility",function(a){a=a.Period[0];a=a&&a.AdaptationSet[0].Accessibility;return a&&a[0]?a[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInbandCaptionsFromUsingASRCaptions",function(a){a=Number.parseInt(a.$.usingASRCaptions,0);return!isNaN(a)&&a!=0}],["hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding",function(a){a=Number.parseInt(a.$.isUsingAsrCaptionsEmployeeDogfooding,0);return!isNaN(a)&&a!=0}],["hasVTTRepresentationCaptions",function(a){return a.Period[0].AdaptationSet.find(function(a){var b;return((b=a.$.mimeType)==null?void 0:b.startsWith("application"))&&a.$.lang!=null})!=null}],["isLiveTemplated",function(a){return a.$.FBIsLiveTemplated==="true"}],["isFBMS",function(a){return a.$.FBMS==="true"}],["isFBWasLive",function(a){return a.$.FBWasLive==="true"}],["loapStreamType",function(a){return a.$.loapStreamType?parseInt(a.$.loapStreamType,10):0}],["fbManifestIdentifier",function(a){return(a=a.$.FBManifestIdentifier)!=null?a:""}],["lastVideoFrameTs",function(a){return a.$.lastVideoFrameTs?Number.parseInt(a.$.lastVideoFrameTs,10):null}],["currentServerTimeMs",function(a){return a.$.currentServerTimeMs?Number.parseInt(a.$.currentServerTimeMs,10):null}],["validationErrors",function(a){return(a=a.$.validationErrors)!=null?a:""}]])}f.createOzCustomParser=a}),66);
__d("oz-player/manifests/OzSegmentOptions",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1,this.$2=null}var b=a.prototype;b.setSegmentNumDecisionTime=function(a){this.$2=a};b.getSegmentNumDecisionTime=function(){return this.$2};b.setIsDVLEnabled=function(a){this.$1=a};b.isDVLEnabled=function(){return this.$1};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzURIWWWImplConstUri",["ConstUriUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.getQueryParams();var b={};a.forEach(function(a,c){typeof a==="string"||typeof a==="number"?b[c]=a:b[c]=String(a)});return b}a=function(){function a(a){this.$1=d("ConstUriUtils").getUri(a);if(this.$1==null)throw c("err")("Invalid URI passed to OzURI");this.$2=h(this.$1)}var b=a.prototype;b.addQueryData=function(a,b){var c=this.$1;if(typeof a==="string"){var d;c=(d=c)==null?void 0:d.addQueryParam(a,b===void 0?"":b)}else{var e=new Map();Object.keys(a).forEach(function(b){e.set(b,a[b])});c=(d=c)==null?void 0:d.addQueryParams(e)}c!=null&&(this.$1=c,this.$2=h(this.$1))};b.getQueryData=function(){return this.$2};b.getDomain=function(){var a;return(a=(a=this.$1)==null?void 0:a.getDomain())!=null?a:""};b.toString=function(){var a;return(a=(a=this.$1)==null?void 0:a.toString())!=null?a:""};b.getPath=function(){var a;return(a=(a=this.$1)==null?void 0:a.getPath())!=null?a:""};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzURIWWW",["oz-player/shims/www/OzURIWWWImplConstUri"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzURIWWWImplConstUri")}),98);
__d("oz-player/shims/OzURI",["oz-player/shims/www/OzURIWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzURIWWW")}),98);
__d("oz-player/utils/ozConcatUint8Arrays",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.length;++c)b+=a[c].byteLength;var e,f;try{e=new ArrayBuffer(b),f=new Uint8Array(e)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_ALLOCATION_FAILURE",description:a.name+": "+a.message})}c=0;for(b=0;b<a.length;++b){var g=a[b];f.set(g,c);c+=g.byteLength}return{buffer:e,view:f}}g["default"]=a}),98);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof TextDecoder!=="undefined"?function(a){return new TextDecoder("utf-8").decode(new Uint8Array(a))}:function(a){return String.fromCharCode.apply(null,a)};function i(a){var b=[],d=function c(){return a.read().then(function(a){var d=a.value;a=a.done;if(a)return null;if(!d)return null;b.push(d);return c()})};return d().then(function(){var a=c("oz-player/utils/ozConcatUint8Arrays")(b);a=a.view;return a})}function a(a){return i(a).then(function(a){return h(a)})}function b(a){var b=new Uint8Array(a.length);return b.map(function(b,c){return a.charCodeAt(c)})}g.pumpAllData=i;g.pumpString=a;g.stringToUint8Array=b}),98);
__d("OzCustomRepresentationParsers",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.ozConfig,e=a.startTimestamp;a={timescale:function(a){a=a.SegmentTemplate;if(a&&a.length>0){a=a[0].$;if(a)return Number.parseInt(a.timescale,0)||null}return null}};b.getBool("parse_initialization_binary",!1)&&(a.initializationBinary=function(a){try{a=window.atob(a.FBInitializationBinary[0]._);return d("oz-player/utils/OzReadableStreamUtils").stringToUint8Array(a)}catch(a){return null}});a.playbackResolutionMos=function(a){try{return a.$.FBPlaybackResolutionMos}catch(a){return null}};a.playbackResolutionCsvqm=function(a){try{return a.$.FBPlaybackResolutionCsvqm}catch(a){return null}};a.qualityLabel=function(a){try{return a.$.FBQualityLabel}catch(a){return null}};b.getBool("parse_first_segment",!1)&&(a.firstSegmentParser=function(a){if(e!=null&&e>0)return null;try{var b=a.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),d={startByte:b[0],endByte:b[1]};b=a.BaseURL[0]._;var f=new(c("oz-player/shims/OzURI"))(b),g=new(c("oz-player/manifests/OzSegmentOptions"))();return{getData:function(){return null},getURI:function(){return f},getByteRange:function(){return d},getTimeRange:function(){return{startTime:0,endTime:2}},getSequenceNumber:function(){return null},getOptions:function(){return g}}}catch(a){return null}});return a}g.createOzCustomRepresentationParsers=a}),98);
__d("OzDOMEventListenerImpl",["CometEventListener"],(function(a,b,c,d,e,f,g){"use strict";a={listenDOMEvent:c("CometEventListener").listen,captureDOMEvent:c("CometEventListener").capture,suppressDOMEvent:c("CometEventListener").suppress};b=a;g["default"]=b}),98);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a){var b=this;if(a.length===0)return[];var c=a.filter(function(a){var c=a.getWidth();a=a.getHeight();c=c<a?c:a;return c>=b.$1});return c.length>0?c:[a[a.length-1]]};return a}();f["default"]=a}),66);
__d("OzMosThresholdRestriction",["MosUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=new Map(),this.$4=a,this.$1=a.getNumber("mos_upper_threshold",0),this.$2=a.getNumber("mos_lower_threshold",0)}var b=a.prototype;b.$5=function(){return this.$4.getBool("cache_mos_threshold",!1)?{mosUpperThreshold:this.$1,mosLowerThreshold:this.$2}:{mosUpperThreshold:this.$4.getNumber("mos_upper_threshold",0),mosLowerThreshold:this.$4.getNumber("mos_lower_threshold",0)}};b.$6=function(a,b){var c=null;if(this.$3.get(a))c=this.$3.get(a);else{var e=a.getCustomField("playbackResolutionMos");e!=null&&(c=d("MosUtils").parsePlaybackMos(String(e)),c&&this.$3.set(a,c))}return c!=null?d("MosUtils").getMosValue(c,d("MosUtils").getQualityLabel(b.width,b.height)):null};b.$7=function(a,b){var c=this,d=null,e=this.$5(),f=e.mosUpperThreshold;a.forEach(function(a){a=c.$6(a,b);a!=null&&a>f&&(d==null||d>a)&&(d=a)});return d==null?a.slice():a.filter(function(a){a=c.$6(a,b);return a==null?!0:a<=f||a===d})};b.$8=function(a,b){var c=this,d=[],e=this.$5(),f=e.mosLowerThreshold;a.forEach(function(a){var e=c.$6(a,b);e!=null&&e>f&&d.push(a)});d.length===0&&d.push(a[a.length-1]);return d};b.applyRestriction=function(a,b){if(a.length===0)return[];var c=this.$5(),d=c.mosLowerThreshold;c=c.mosUpperThreshold;var e;if(c>0){e=this.$7((c=e)!=null?c:a,b)}if(d>0){e=this.$8((c=e)!=null?c:a,b)}return(d=e)!=null?d:a.slice()};return a}();g["default"]=a}),98);
__d("OzOneSemanticHandlerUtils",["ConstUriUtils","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){b!=null&&(b.indexOf("+RE")>=0&&a.retry()),c!=null&&c()}function a(a,b){var d=b.error;d=d.getExtra();var e=d.code;d=d.headers;var f=null;e==null&&c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");d==null&&c("recoverableViolation")("A ONE Semantic error response must contain response Headers.","comet_video_player");if(d!=null){d=d.get("x-fb-one-variant");f=(d=d)!=null?d:null}d=JSON.parse(a.getString("network_retry_intervals_json","{}"));a=d[e];switch(e){case"410":b.endStream();break;case"404":h(b,f,function(){b.retry({behavior:"recover_failed_request"})});break;case"429":b.retry(a);break;case"403":default:}}function i(a){if(a!=null){a=parseInt(a,10);if(3>0)return!isNaN(a)&&a>0&&a<=3}return!1}function j(a,b){if(a!=null&&b!=null){a=parseInt(a,10);b=parseInt(b,10);return!isNaN(a)&&!isNaN(b)&&a>0&&a<=b}return!1}function k(a){if(a!=null){a=d("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("os_param");return a?String(a).toString():null}}return null}function l(a,b){var d=a!=null;return i(b)||(d||!!c("qex")._("1636"))&&j(b,a)}function b(a){var b=a.getExtra();b=b.headers;b=m(b);a=a.getExtra();var d=a.code;a=a.url;if(b!=null&&d==null){c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");return!1}d=k(a);return l(d,b)}function m(a){if(a){a=a.get("x-fb-one");if(a!=null)return parseInt(a,10)>0?a:null}return null}function e(a,b,c){var d=null,e=null;b!=null&&(d=k(b),d!=null&&a.setOneReqWave(parseInt(d,10)));b=c==null?void 0:c.headers;b&&(e=m(b),e!=null&&a.setOneResWave(parseInt(e,10)));a.setOneObserved(l(d,e))}g.maybeRetryForVariant=h;g.evaluateOneSemanticsResponse=a;g.isOneSemanticsForcedForResponseWave=i;g.isOneSemanticsEnabledForWave=j;g.getOneSemanticRequestWave=k;g.shouldRespondWithOneSemantics=b;g.getOneSemanticResponseWave=m;g.setOneSemanticFetchStreamLoggingAttributes=e}),98);
__d("handleOzManifestFetchErrorEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.getNumber("initial_manifest_request_retry_count",0),d=JSON.parse(a.getString("network_retry_intervals_json","{}")),e=a.getNumber("live_max_try_attempts_on_404",1),f=["404","503"];a.getBool("live_gracefully_handle_no_network",!1)&&f.push("0");a.getBool("live_gracefully_handle_410",!1)&&f.push("410");a.getBool("live_gracefully_handle_502",!1)&&f.push("502");a.getBool("live_gracefully_handle_429",!1)&&f.push("429");a.getBool("live_gracefully_handle_504",!1)&&f.push("504");a.getBool("normalize_mpd_fetch_errors",!1)&&f.push("20");var g=b.error.getExtra().code;if(a.getBool("no_retry_on_empty_string_error_code",!1)&&g==="")return;a.getBool("handle_mpd_null_error_codes",!1)&&(g=g!=null?g:null);d=d[g];if(b.isInitialRequest)typeof d==="number"&&d>0&&b.retryAttemptCount<c&&b.retry({waitMs:d});else if(g!=null&&f.indexOf(g)>-1)switch(g){case"410":b.endStream();break;case"404":e<b.consecutiveFailuresForErrorCode&&b.retry();break;case"504":case"502":case"503":case"20":case"0":b.retry();break;case"429":typeof d==="number"&&d>0&&b.retry({waitMs:d});break;default:break}else g===null&&a.getBool("handle_mpd_null_error_codes",!1)&&b.retry()}f["default"]=a}),66);
__d("handleOzStreamErrorEvent",[],(function(a,b,c,d,e,f){"use strict";var g=[0,1,1,2,3,5,8,13,21,34];function a(a,b){var c=b.error.getExtra().code;if(a.getBool("no_retry_on_empty_string_error_code",!1)&&c==="")return;if(a.getBool("retry_null_error_code_in_stream",!1)&&c==null){b.retry();return}var d=JSON.parse(a.getString("network_end_broadcasts_json","[]"));if(d.includes(c)){b.endStream();return}d=JSON.parse(a.getString("network_skip_json","[]"));if(d.includes(c)){b.retry();return}d=a.getBool("back_off_pdash_504_retry",!0)?g[b.retryAttemptCount]:0;var e=JSON.parse(a.getString("network_reload_mpd_json","[]")),f=a.getBool("fix_reload_manifest_retry",!1);if(a.getBool("back_off_pdash_504_retry",!0)&&d==null&&(!f||e.includes(c)))return;if(d!=null&&e.includes(c)){a.getBool("network_reload_mpd_json_retry",!1)?b.retry({behavior:"recover_failed_request",waitMs:d*1e3}):b.retry({waitMs:d*1e3});return}f=JSON.parse(a.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}'));e=c!=null?f[c]:null;if(e!=null){a.getBool("network_retry_intervals_json_retry",!1)?b.retry({behavior:"retry_failed_request",waitMs:e}):b.retry({waitMs:e});return}}f["default"]=a}),66);
__d("OzOneSemanticHandler",["OzOneSemanticHandlerUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=b.error;d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzManifestFetchErrorEvent")(a,b)}function b(a,b){var e=b.error;d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzStreamErrorEvent")(a,b)}g.handleManifestFetchErrorEvent=a;g.handleStreamErrorEvent=b}),98);
__d("oz-player/shims/www/ozvariantWWW",["invariant"],(function(a,b,c,d,e,f,g,h){a=h;g["default"]=a}),98);
__d("oz-player/shims/ozvariant",["oz-player/shims/www/ozvariantWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/ozvariantWWW")}),98);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}f.equalTo=h;f.greaterThan=i;f.lessThan=j;f.lessThanOrEqual=a;f.greaterThanOrEqual=b}),66);
__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=.01;function i(a,b){b=b.rangeEnd;return b==null?!1:Math.abs(a.rangeStart-b)>h&&a.rangeStart>b}function j(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a==null)return!0;return b==null?!1:Math.abs(a-b)>h&&a>b}function k(a,b,c,d){a=c.rangeEnd;return a==null?!1:b===a||Math.abs(b-a)>((c=d)!=null?c:h)&&b>a}function a(a,b,c){var d=b.rangeEnd;if(d==null)return!1;c=(c=c)!=null?c:h;return a-b.rangeStart>=c&&d-a>=c}function l(a,b){return a>b-h}function b(a){if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!j(e,c))continue;else i(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b}function c(a,b,c){return b.reduceRight(function(b,d){k(a,d.rangeStart,c)||k(a,c.rangeStart,d)?b.push(d):(c.rangeEnd!=null&&(d.rangeEnd==null||k(a,d.rangeEnd,c))&&b.push({rangeStart:c.rangeEnd,rangeEnd:d.rangeEnd}),l(c.rangeStart,d.rangeStart)&&b.push({rangeStart:d.rangeStart,rangeEnd:c.rangeStart}));return b},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()}function e(a,b,c,d){d===void 0&&(d=h);for(var e=0;e<c.length;e++){var f=c[e],g=f.rangeStart;if(l(b,g)&&!k(a,b,f,d))return e}return-1}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!l(a,d))return c}return-1}function m(a,b,c){return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)}function n(a,b){var c;c=a.length==0?(c=b[b.length-1])!=null?c:null:null;for(var e=0;e<a.length;e++){var f=a[e];for(var g=e;g<b.length;g++){var h=b[g];if(d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&f.rangeEnd!=null&&h.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd))break;else if(h.rangeEnd!=null&&f.rangeEnd!=null&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)){c={rangeStart:h.rangeStart,rangeEnd:h.rangeEnd};break}else if(h.rangeEnd!=null&&f.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd)){c={rangeStart:f.rangeEnd,rangeEnd:h.rangeEnd};break}}if(c!==null)break}return c}function o(a){var b=[];for(var c=0;c<a.length;c++)b.push({rangeStart:a[c].startTime,rangeEnd:a[c].endTime});return b}g.isAfter=k;g.isWithin=a;g.isLargerThan=l;g.mergeSortedRanges=b;g.diffSortedRanges=c;g.findCurrentRangeIndex=e;g.findNextRangeIndex=f;g.findDiffCoveredByRanges=m;g.firstAddedInSortedRanges=n;g.convertFromTimeRanges=o}),98);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1e-4;a=function(){function a(a,b,d,e,f,g){g===void 0&&(g=!1),this.$7=new(c("oz-player/shims/OzEventEmitter"))(),this.$10=null,this.$8=a,this.$2=b,this.$3=d,this.$1=f,this.$4=e,this.$5=this.$11(this.$4),this.$6=g,this.$9=this.$8.getNumber("live_numerical_error_epsilon")}var b=a.prototype;b.getSegmentByTime=function(a){a=this.$12(a);a=a*this.$3;var b=null;for(var c=this.$4.length-1;c>=0;c--){var e=this.$4[c];if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(e.t+e.d*(e.r+1),a,this.$9))break;b=e}if(b===null)return null;if(d("oz-player/utils/OzNumericalHelper").greaterThan(b.t,a,this.$9))return null;e=Math.max(0,Math.floor((a-b.t+this.$9)/b.d));return this.$13(b,e)};b.getSegment=function(a){var b=0;a=a;while(a>=0&&b<this.$4.length){var c=this.$4[b];c=c.r;c=c+1;if(a>=c){a-=c;b++;continue}break}c=this.$4[b];return!c?null:this.$13(c,a)};b.getSegmentAfter=function(a){a=a.getTimeRange().endTime;return this.getSegmentByTime(a)};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){if(!this.$4||!this.$4.length||!this.$6)return!1;var b=this.$4[this.$4.length-1],c=b.r;b=this.$13(b,c);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<h};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,646),this.$6=b.$6,this.$14(b.$4),this.$15(b.$4),this.$7.emit("segment_updated")};b.getTimeRanges=function(){return this.$10?this.$16(this.$5,this.$10):this.$5};b.blockTimeRange=function(a){this.$10=a};b.$16=function(a,b){return d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$8,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:b.startTime,rangeEnd:b.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.addUpdateListener=function(a){return this.$7.addListener("segment_updated",a)};b.$12=function(a){var b=a,c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$8,a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(c===-1){c=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));c!==-1&&(b=this.getTimeRanges()[c].startTime)}return b};b.$14=function(a){var b;(b=this.$4).splice.apply(b,[0,this.$4.length].concat(a));return};b.$15=function(a){a=this.$11(a);a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$5.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));this.$5=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.$11=function(a){var b=this;a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$4.map(function(a){var c=b.$13(a,0).getTimeRange().startTime;a=b.$13(a,a.r).getTimeRange().endTime;return{rangeStart:c,rangeEnd:a}}));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a==null?Infinity:a;return{startTime:b,endTime:a}})};b.$13=function(a,b){var d=this;b===void 0&&(b=0);var e=a.t,f=a.d,g=a.r;a=a.id;var h=e+f*b,i=this.$8.getBool("use_scf_timebased_segments"),j=a!=null?a-(g-b):null,k=new(c("oz-player/manifests/OzSegmentOptions"))();return{getData:function(){return null},getURI:function(){var a="";d.$1!=null&&j!=null?a=d.$1.replace("$Number$",j.toString()):j!=null&&d.$2.indexOf("$Number$")!==-1&&d.$8.getBool("parse_number_templated_uri")?a=d.$2.replace("$Number$",j.toString()):a=d.$2.replace("$Time$",h.toString());a=new(c("oz-player/shims/OzURI"))(a);i&&a.addQueryData("_nc_scf",1);return a},getTimeRange:function(){return{startTime:h/d.$3,endTime:(h+f)/d.$3}},getByteRange:function(){return null},getSequenceNumber:function(){return null},getOptions:function(){return k}}};b.getSegmentGroups=function(){return this.$4};b.getEndingSegment=function(){if(this.$4.length==0)return null;var a=this.$4[this.$4.length-1],b=a.r;return this.$13(a,b)};b.forceParseIfNotParsed=function(){};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;var b=a.indexOf("://"),c=a.indexOf("/",b+3);c>b&&(a=a.substring(c));return a}function g(a){a=a;var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=a;a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){a=g(a);b=b;while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}function j(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}function b(a,b){return k(b)?b:j(a,b)}function k(a){var b=/^https?:\/\//i;return b.test(a)}f.stripToPathAndQueryOnly=a;f.joinRelativeUrlPaths=j;f.joinUrlPaths=b}),66);
__d("PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){k===void 0&&(k=!1);c=a.call(this,b,c,e,f,null,k)||this;c.$PredictedSegmentTemplateSegmentsContainer$p_9=0;c.$PredictedSegmentTemplateSegmentsContainer$p_11=null;c.$PredictedSegmentTemplateSegmentsContainer$p_10=d;c.$PredictedSegmentTemplateSegmentsContainer$p_8=k;c.$PredictedSegmentTemplateSegmentsContainer$p_12=f;c.$PredictedSegmentTemplateSegmentsContainer$p_7=b;c.$PredictedSegmentTemplateSegmentsContainer$p_5=e;c.$PredictedSegmentTemplateSegmentsContainer$p_1=g;c.$PredictedSegmentTemplateSegmentsContainer$p_3=i;c.$PredictedSegmentTemplateSegmentsContainer$p_2=h;c.$PredictedSegmentTemplateSegmentsContainer$p_4=j;c.$PredictedSegmentTemplateSegmentsContainer$p_6=b.getNumber("live_numerical_error_epsilon");for(d=0;d<c.$PredictedSegmentTemplateSegmentsContainer$p_12.length;d++)c.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(c.$PredictedSegmentTemplateSegmentsContainer$p_12[d].d,c.$PredictedSegmentTemplateSegmentsContainer$p_9);return c}var e=b.prototype;e.$PredictedSegmentTemplateSegmentsContainer$p_13=function(){if(this.$PredictedSegmentTemplateSegmentsContainer$p_2!=null&&this.$PredictedSegmentTemplateSegmentsContainer$p_4!=null)return{predictedAverageDuration:this.$PredictedSegmentTemplateSegmentsContainer$p_4,predictedMediaStartNumber:this.$PredictedSegmentTemplateSegmentsContainer$p_2};else return null};e.$PredictedSegmentTemplateSegmentsContainer$p_14=function(a,b,e){var f=this;Number.isNaN(e)&&c("oz-player/shims/ozvariant")(0,54238);var g=this.$PredictedSegmentTemplateSegmentsContainer$p_1.indexOf("%24Number%24")===-1?this.$PredictedSegmentTemplateSegmentsContainer$p_1.replace("$Number$",e.toString()):this.$PredictedSegmentTemplateSegmentsContainer$p_1.replace("%24Number%24",e.toString()),h=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getString("cdn_experiment_id",""),i=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("use_dvl_with_timeout_ms",0),j=new(c("oz-player/manifests/OzSegmentOptions"))();return{getByteRange:function(){return null},getData:function(){return null},getOptions:function(){return j},getSequenceNumber:function(){return e},getTimeRange:function(){return{endTime:b,startTime:a}},getURI:function(){var a=new(c("oz-player/shims/OzURI"))(g);h.length!==0&&a.addQueryData("_nc_expid",h);var b=j.isDVLEnabled();b&&i>0&&f.$PredictedSegmentTemplateSegmentsContainer$p_10!=null&&(a.addQueryData("_nc_dinfo-manifest-url",d("oz-player/utils/OzUrlHelper").stripToPathAndQueryOnly(f.$PredictedSegmentTemplateSegmentsContainer$p_10)),a.addQueryData("_nc_dinfo-timeout",i));return a}}};e.updateWith=function(d){d instanceof b||c("oz-player/shims/ozvariant")(0,646);this.$PredictedSegmentTemplateSegmentsContainer$p_3=d.$PredictedSegmentTemplateSegmentsContainer$p_3;this.$PredictedSegmentTemplateSegmentsContainer$p_1=d.$PredictedSegmentTemplateSegmentsContainer$p_1;a.prototype.updateWith.call(this,d);this.$PredictedSegmentTemplateSegmentsContainer$p_12=d.$PredictedSegmentTemplateSegmentsContainer$p_12;this.$PredictedSegmentTemplateSegmentsContainer$p_8=d.$PredictedSegmentTemplateSegmentsContainer$p_8;for(d=0;d<this.$PredictedSegmentTemplateSegmentsContainer$p_12.length;d++)this.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(this.$PredictedSegmentTemplateSegmentsContainer$p_12[d].d,this.$PredictedSegmentTemplateSegmentsContainer$p_9)};e.getSegmentByTime=function(a){return this.canApproximateId()?this.$PredictedSegmentTemplateSegmentsContainer$p_15(a):this.$PredictedSegmentTemplateSegmentsContainer$p_16(a)};e.getPredictedSegmentAfter=function(a){a=a!=null?a.getSequenceNumber():null;return a!=null&&this.canPredict()?this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,a+1):null};e.blockTimeRange=function(b){this.$PredictedSegmentTemplateSegmentsContainer$p_11=b,a.prototype.blockTimeRange.call(this,b)};e.getTimeRanges=function(){var b=this.$PredictedSegmentTemplateSegmentsContainer$p_13();if(b){b=[{endTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,startTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-b.predictedAverageDuration-(this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2))*Number(b.predictedAverageDuration))/this.$PredictedSegmentTemplateSegmentsContainer$p_5}];var c=this.$PredictedSegmentTemplateSegmentsContainer$p_11;return c==null?b:d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$PredictedSegmentTemplateSegmentsContainer$p_7,b.map(function(a){return{rangeEnd:a.endTime,rangeStart:a.startTime}}),{rangeEnd:c.endTime,rangeStart:c.startTime}).map(function(a){return{endTime:a.rangeEnd==null?Infinity:a.rangeEnd,startTime:a.rangeStart}})}else return a.prototype.getTimeRanges.call(this)};e.canPredict=function(){return!0};e.canApproximateId=function(){var a=this.$PredictedSegmentTemplateSegmentsContainer$p_13();return a!=null};e.$PredictedSegmentTemplateSegmentsContainer$p_16=function(a){var b=null;a=a*this.$PredictedSegmentTemplateSegmentsContainer$p_5;var e=this.$PredictedSegmentTemplateSegmentsContainer$p_12.length>0?this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d:null,f=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("pdash_future_edgelatency_gops",0);if(e!=null&&e<=a&&f!==0&&a<e+this.$PredictedSegmentTemplateSegmentsContainer$p_9*f){e=a-(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d);e=this.$PredictedSegmentTemplateSegmentsContainer$p_9?0:Math.floor(e/this.$PredictedSegmentTemplateSegmentsContainer$p_9);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,this.$PredictedSegmentTemplateSegmentsContainer$p_3+1+e)}e=0;for(var g=0;this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-g>=0;g++){var h=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-g];h.r===0||c("oz-player/shims/ozvariant")(0,18769);if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(h.t+h.d*(h.r+1),a,this.$PredictedSegmentTemplateSegmentsContainer$p_6))break;b=h;e=g}if(b===null||f>0&&a<b.t)return null;else return this.$PredictedSegmentTemplateSegmentsContainer$p_14(b.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(b.t+b.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3-e)};e.$PredictedSegmentTemplateSegmentsContainer$p_15=function(a){var b=a*this.$PredictedSegmentTemplateSegmentsContainer$p_5,c=this.getTimeRanges();if(d("oz-player/utils/OzNumericalHelper").greaterThan(c[0].startTime,a))return null;else if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t,b))return this.$PredictedSegmentTemplateSegmentsContainer$p_16(a);else{c=Math.ceil((this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-b)/Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4));b=Math.max(Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2),this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length+1-c);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(a,a+Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,b)}};e.isEndingSegment=function(b){if(!this.$PredictedSegmentTemplateSegmentsContainer$p_8)return!1;var c=b.getSequenceNumber();return c!=null?c>=this.$PredictedSegmentTemplateSegmentsContainer$p_3:a.prototype.isEndingSegment.call(this,b)};e.getEndingSegment=function(){if(this.$PredictedSegmentTemplateSegmentsContainer$p_12.length===0)return null;var a=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1];return this.$PredictedSegmentTemplateSegmentsContainer$p_14(a.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(a.t+a.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3)};e.getMaxGopSec=function(){return this.$PredictedSegmentTemplateSegmentsContainer$p_9/this.$PredictedSegmentTemplateSegmentsContainer$p_5};return b}(c("oz-player/manifests/SegmentTemplateSegmentsContainer"));g["default"]=a}),98);
__d("oz-player/parsers/OzDefaultSegmentTimelineParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.parseSegments=function(a,b){a=[];b.SegmentTimeline[0].S&&(a=b.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10),r:Number.parseInt(a.$.r||"0",10),id:a.$.id?Number.parseInt(a.$.id,10):void 0}}));return a};var b=a.prototype;b.parseSegmentsContainer=function(b,e,f){return new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(b,d("oz-player/utils/OzUrlHelper").joinUrlPaths(e.baseUrl,f.$.media),Number.parseInt(f.$.timescale,10),a.parseSegments(b,f),null,e.isStaticMpd)};return a}();g["default"]=a}),98);
__d("OzPredictedSegmentTimelineParser",["PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.parseSegmentsContainer=function(a,b,e){var f;if(e.SegmentTimeline[0].$.FBPredictedMedia){f=d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.SegmentTimeline[0].$.FBPredictedMedia);var g=new(c("oz-player/shims/OzURI"))(f);g.addQueryData("_nc_sc",1);f=g.toString()}var h;e.SegmentTimeline[0].$.FBPredictedMediaStartNumber&&(h=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaStartNumber,0));var i;e.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(i=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0));var j;e.SegmentTimeline[0].$.FBAverageDuration&&(j=Number.parseInt(e.SegmentTimeline[0].$.FBAverageDuration,0));g=c("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(a,e);return(b.isTemplatedMpd&&h!=null&&j!=null||!b.isTemplatedMpd)&&f!=null&&i!=null?new(c("PredictedSegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),b.mpdUrl,Number.parseInt(e.$.timescale,10),g,f,h,i,j,b.isStaticMpd):new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),Number.parseInt(e.$.timescale,10),g,f,b.isStaticMpd)};return a}();g["default"]=a}),98);
__d("VideoPlayerOzWWWConfig",[],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a,b){return this.$1.getBool(g+a,b)};b.getNumber=function(a,b){return this.$1.getNumber(g+a,b)};b.getString=function(a,b){return this.$1.getString(g+a,b)};b.setContext=function(a,b){this.$1.setContext(a,b)};b.getAllContexts=function(){return this.$1.getAllContexts()};return a}();f["default"]=a}),66);
__d("OzSystemicRiskABRManager",["OzSystemicRiskABRUtils","OzSystemicRiskUtils","VideoPlayerOzWWWConfig","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$1=a,this.$2=c,this.$3=d,this.$4=e,this.$6=f,this.$7=g,this.$8=h,this.$9={bestRepresentation:b,hasMadeInitialDecision:!1,lastEvaluationReason:void 0},this.$10=i,this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_initialized").setResult("success").setUserInfo({codecs:c.map(function(a){return a.getCodecs()}).join("|"),displayLabels:c.map(function(a){return a.getDisplayLabel()}).join(","),representationIds:c.map(function(a){return a.getID()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzSystemicRiskABRManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$5=a};b.updateRepresentations=function(a){var b=this,c=this.$2;this.$2=a;var d=this.$9.bestRepresentation,e=this.$2.find(function(a){return a.getDisplayLabel()===b.$9.bestRepresentation.getDisplayLabel()});this.$9=babelHelpers["extends"]({},this.$9,{bestRepresentation:(e=e)!=null?e:this.$2[0]});this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_representations_updated").setResult("success").setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(d.getID()).setUserInfo({newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(","),previousRepresentationIds:c.map(function(a){return a.getID()}).join(",")}).setType("video").setInitiator("OzSystemicRiskABRManager").log()};b.getBestRepresentation=function(a){var b=this.$1.getLegacyConfig(),e="mos";if(b instanceof c("VideoPlayerOzWWWConfig")){var f=b.getAllContexts();f=String(f.quality_score_type);e=f==="csvqm"?"csvqm":"mos"}f=(f=(f=this.$5)==null?void 0:f.getSourceBufferState().getBufferedRanges())!=null?f:null;var g=this.$4.getCurrentTime(),h=this.$4.getDuration(),i=this.$9.bestRepresentation,j=b.getBool("use_bandwidth_estimate_from_headers_in_abr",!1)?c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnosticsFromHeaders(b):c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(b);this.$9=d("OzSystemicRiskABRUtils").evaluateSystemicRiskABR({abrState:this.$9,bandwidthDiagnostics:j,devicePixelRatio:this.$6,durationMode:this.$8,isDocumentHidden:document.hidden,mediaDurationSec:h,playerDimensions:this.$7(),playheadMediaTimeSec:g,qualityScoreType:e,segments:a,sourceBufferBufferedRangesSec:f,systemicRiskConfig:d("OzSystemicRiskUtils").getSystemicRiskConfigFromOzPlayerConfig(b),videoRepresentationRestrictions:this.$3,videoRepresentations:this.$2});this.$1.getBool("enable_abr_logging")&&this.$9.bestRepresentation!==i&&this.$10.getOperationLogger("abr_best_representation_selected").setResult("success").setReason(this.$9.lastEvaluationReason).setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(i==null?void 0:i.getID()).setUserInfo({bandwidthEstimate:String(j==null?void 0:j.bandwidthEstimate),qualityScoreType:e}).setType("video").setInitiator("OzSystemicRiskABRManager").log();return this.$9.bestRepresentation};b.getLastEvaluationReason=function(){return this.$9.lastEvaluationReason};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzStreamsWWW",["cr:927622","cr:927623"],(function(a,b,c,d,e,f,g){"use strict";c=Boolean(b("cr:927622"));d=Boolean(b("cr:927623"));e=b("cr:927622")?b("cr:927622").ReadableStream:a.ReadableStream;f=b("cr:927623")?b("cr:927623").WritableStream:a.WritableStream;g.OzReadableStream=e;g.OzReadableStreamIsPolyfilled=c;g.OzWritableStream=f;g.OzWritableStreamIsPolyfilled=d}),98);
__d("oz-player/shims/OzStreams",["oz-player/shims/www/OzStreamsWWW"],(function(a,b,c,d,e,f,g){"use strict";g.OzReadableStream=(a=d("oz-player/shims/www/OzStreamsWWW")).OzReadableStream;g.OzReadableStreamIsPolyfilled=a.OzReadableStreamIsPolyfilled;g.OzWritableStream=a.OzWritableStream;g.OzWritableStreamIsPolyfilled=a.OzWritableStreamIsPolyfilled}),98);
__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzStreams","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;var e=(b=b==null?void 0:b.errorTransform)!=null?b:function(a){return a},f,g;c.writable=new(d("oz-player/shims/OzStreams").OzWritableStream)({start:function(a){g=a},write:function(a){c.emit("writableWrite",a);try{c.onDataWritten(a)}catch(a){f.error(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from write handler: "+c.constructor.name,extra:{code:"OZ_S-0",originalError:a}}))}f.enqueue(a)},close:function(){c.emit("writableClose");try{c.onClose()}catch(a){f.error(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from close handler: "+c.constructor.name,extra:{code:"OZ_S-1",originalError:a}}))}f.close()},abort:function(a){a=e(a);f.error(a)}});c.readable=new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(a){f=a},cancel:function(a){c.emit("readableCancel",a),g.error(a)}});return c}var c=b.prototype;c.onDataWritten=function(a){};c.onClose=function(){};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzPerformanceWWW",["performance","performanceNow"],(function(a,b,c,d,e,f,g){var h,i;a={now:function(){return(h||(h=c("performanceNow")))()},getEntriesByName:function(a,b){return typeof (i||(i=c("performance"))).getEntriesByName==="function"?(i||(i=c("performance"))).getEntriesByName(a,b):[]}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzPerformance",["oz-player/shims/www/OzPerformanceWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/OzPerformanceWWW")}),98);
__d("oz-player/utils/OzResourceTimingUtils",["oz-player/shims/OzPerformance"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=c("oz-player/shims/OzPerformance").getEntriesByName(a,"resource");return a.reduce(function(a,b){return a==null?b:b.responseEnd<a.responseEnd?a:b},null)};g.getLatestResourceTimingEntry=a}),98);
__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=!1),this.$2=!1,this.$1=a,this.$2=b}var b=a.prototype;b.onResponse=function(a,b){var e=this,f=a.headers,g=null;if(!this.$1)return null;a=new(c("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){var a={},c=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);c&&(a.lat=Math.round(c.responseStart-c.requestStart).toString());e.$1&&f&&e.$1(f,g,a)});this.$2&&a.addListener("writableWrite",function(a){g===null?g=[a]:g.push(a)});return a};b.onError=function(a,b){return null};return a}();g["default"]=a}),98);
__d("oz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};f.base64ToUint8Array=a;f.arrayBufferToBase64=b}),66);
__d("OzWidevineDrmProvider",["ConstUriUtils","FBLogger","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g){this.$2=[];this.$4=!0;this.$5=!1;g!=null&&g!==""&&(this.$1=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(g));if(b!=null&&f!=null){b=(g=d("ConstUriUtils").getUri(b))==null?void 0:g.addQueryParam("access_token",f);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid Graph API license uri for video: %s",a);this.$3=b.toString();this.$5=!0;this.$4=!1}else{g=e["0"];if(g==null){g="/video/drm/getlicense";b=(f=d("ConstUriUtils").getUri(g))==null?void 0:f.addQueryParam("video_id",a);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid server license uri for video: %s",a);this.$3=b.toString()}else this.$3=g}}var b=a.prototype;b.getKeySystem=function(){return"com.widevine.alpha"};b.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};b.getInitDatas=function(){return this.$2};b.setInitDatas=function(a){this.$2=a};b.getRequireDistinctiveIdentifier=function(){return"optional"};b.getRequirePersistentState=function(){return"optional"};b.getInitDataTypes=function(){return};b.getDrmSessionTypes=function(){return["temporary"]};b.getAudioRobustness=function(){return""};b.getVideoRobustness=function(){return""};b.getServerCertificate=function(){return this.$1};b.getLicenseRequestInfo=function(a){var b={url:this.$3,method:"POST",body:"",headers:{},credentials:void 0};this.$4&&(b.credentials="include");a=d("oz-player/drm/OzDrmUtils").arrayBufferToBase64(a);if(this.$5){var c={request:a};b.body=JSON.stringify(c);b.headers["Content-Type"]="application/json"}else b.body=a,b.headers["Content-Type"]="application/text";return b};b.parseLicenseResponse=function(a){a=String.fromCharCode.apply(null,a);var b;try{b=JSON.parse(a)}catch(a){b=void 0}var c;if(b!==void 0&&b.data!==void 0&&b.data.length===1){b=b.data[0];b.error!=null||(c=b.license)}else c=a;if(c!=null&&c!=="")try{return d("oz-player/drm/OzDrmUtils").base64ToUint8Array(c)}catch(a){if(a.name==="InvalidCharacterError")throw new Error("Endpoint returned error: "+c);else throw a}return null};return a}();g["default"]=a}),98);
__d("TimeRanges",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.$1=[],this.$1=a}var b=a.prototype;b.start=function(a){this.$1[a]||h(0,2205);return this.$1[a].startTime};b.end=function(a){this.$1[a]||h(0,2205);return this.$1[a].endTime};b.length=function(){return this.$1.length};return a}();g["default"]=a}),98);
__d("VideoPlayerImplementationLoadSequenceManager",["setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=[]}var b=a.prototype;b.schedule=function(a,b,d){var e=this,f={load:d,maximumBlockTimeMs:a.getNumber("load_sequence_max_delay_ms",0),sequence:b},g=a.getNumber("load_sequence_only_prioritize_first_count",0);g>0?d=!this.$2.find(function(a){return a.sequence<g}):d=!this.$2.find(function(a){return a.sequence<b});d?this.$3(f):(this.$1.push(f),c("setTimeout")(function(){return e.$4(f)},f.maximumBlockTimeMs));return function(){return e.$5(f)}};b.$4=function(a){var b=this.$1.find(function(b){return b===a});b&&(this.$1=this.$1.filter(function(b){return b!==a}),this.$3(b))};b.$3=function(a){var b=this;this.$2.push(a);a.load().then(function(){return b.$6(a)})["catch"](function(c){b.$6(a);throw c});c("setTimeout")(function(){return b.$6(a)},a.maximumBlockTimeMs)};b.$7=function(){var a=this,b=Math.min.apply(Math,this.$1.map(function(a){return a.sequence})),c=this.$1.filter(function(a){return a.sequence===b});c.forEach(function(b){return a.$4(b)})};b.$5=function(a){this.$1=this.$1.filter(function(b){return b!==a})};b.$6=function(a){if(!this.$2.find(function(b){return b===a}))return;this.$2=this.$2.filter(function(b){return b!==a});var b=!!this.$2.find(function(b){return b.sequence===a.sequence});b&&this.$7()};return a}();b=new a();d=b;g["default"]=d}),98);
__d("getAvailableMimeCodecsFromDashManifest",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=/^(audio|video)\/.*$/;return b.test(a)}function a(a,b){var c=[];b=b?window.ManagedMediaSource:window.MediaSource;if(a!=null){var d=/mimeType=\"([^\"]*)\"[^\>]*codecs=\"([^\"]*)\"/g,e=/codecs=\"([^\"]*)\"[^\>]*mimeType=\"([^\"]*)\"/g,f,h=[];while(f=d.exec(a))h.push([f[1],f[2]]);while(f=e.exec(a))h.push([f[2],f[1]]);for(d of h){f=d[0];a=d[1];e=f+'; codecs="'+a+'"';h=f.startsWith("audio")?"audio":f.startsWith("video")?"video":"other";var i=!0,j=!1;g(e)&&(j=!0,i=b?b.isTypeSupported(e):!1);c.push({codecs:a,isRequiredForPlayback:j,isTypeSupported:i,mimeCodec:e,mimeType:f,representationType:h})}}return c}f["default"]=a}),66);
__d("VideoPlayerOzImplementationData",["err","getAvailableMimeCodecsFromDashManifest"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.canUseOz,d=a.dashManifestUrl,e=a.dashManifestUrlOverride_DO_NOT_USE,f=a.dashManifestXmlString,g=a.experimentationConfig,h=a.initialAudioUserPreferredLanguage;a=a.minQualityPreference;if(b!==!0){var i=c("err")("canUseOz="+String(b));i.name="GotCanUseOz/"+String(b);return i}b=e!=null?null:f==null||f===""?null:f;i=e!=null?e:d==null||d===""?null:d;if(b==null&&i==null){f=c("err")("Got no manifest XML and no URL to it");f.name="GotNoManifestOrURL";return f}e=g.getBool("enable_managed_media_source",!1);if(e){if(!window.ManagedMediaSource){d=c("err")("window.ManagedMediaSource is missing");d.name="GotMissingManagedMediaSourceAPI";return d}}else if(!window.MediaSource){f=c("err")("window.MediaSource is missing");f.name="GotMissingMediaSourceAPI";return f}if(b!=null){d=c("getAvailableMimeCodecsFromDashManifest")(b,e).filter(function(a){return a.isRequiredForPlayback});f=d.filter(function(a){return!a.isTypeSupported});if(f.length>0){e=c("err")("%s out of %s codecs in DASH manifest required for playback are unsupported: %s",String(f.length),String(d.length),d.map(function(a){return a.mimeType+"/"+a.codecs+"="+(a.isTypeSupported?"yes":"no")}).join(", "));e.name="GotManifestWithUnsupportedCodecs";return e}}return{experimentationConfig:g,initialAudioUserPreferredLanguage:(f=h)!=null?f:null,initialVideoVariant:{lang:(d=h)!=null?d:null,role:null},manifest:b,manifestUrl:i,minQualityPreference:(e=a)!=null?e:null}}g.makeOzImplementationData=a}),98);
__d("handleVideoPlayerLatencyLevelChange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){if(a&&b&&c){var e=a.getAllContexts().latency_level;c=[];try{c=JSON.parse(a.getString("seek_on_latency_level_change_allowed","[]"))}catch(a){}c=c.some(function(a){return a.length===2&&a[0]===e&&a[1]===d});a.setContext("latency_level",d);if(!c)return;c=b.getDuration();c=c!=null?c+a.getNumber("live_initial_playback_position",0):null;c!=null&&b.setPlayheadPosition(c)}}f["default"]=a}),66);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(a){return(a=a.getSelectedVideoQuality())!=null?a:""}function i(a){a=a.getCurrentPlayingAudioTrackID();return a==null?null:a}function j(a){a=a.getCurrentVideoRepresentation();return a==null?"":a.getDisplayLabel()}function k(a){a=a.getIsVideoQualityAdaptationEnabled()?"auto":(a=a.getSelectedVideoQuality())!=null?a:"auto";return a}function l(a){return a.getTargetAudioTrack()}function m(a){return(a=(a=a.getMpd())==null?void 0:a.getCustomField("fbProjection"))!=null?a:null}function n(a,b){var c=k(a);if(b==="notselected"||b===c)return!1;else if(b==="auto"){a.enableVideoQualityAdaptation();return!0}else if(b!==a.getSelectedVideoQuality()){c=b;a.switchToVideoQuality(c);return!0}else return!1}function o(a,b){b=b;a.switchToVideoVariant(b)}function a(a){var b=a.getConfig,d=a.getOzPlayer,e=a.getVideoElementAPI;a={getApproximateFBLSToPlayerDisplayLatency:function(){var a;return(a=(a=d())==null?void 0:a.getApproximateFBLSToPlayerDisplayLatency())!=null?a:null},getAvailableAudioTracks:function(){var a;a=(a=d())==null?void 0:a.getAudioTracks();if(!a)return[];a=a.map(function(a){return{displayLabel:a.displayLabel,id:a.id,lang:a.lang,mimeCodecs:a.mimeCodecs,role:a.role,variantKey:a.variantKey}});return a},getAvailableVideoQualities:function(){var a;return(a=(a=d())==null?void 0:a.getVideoQualities())!=null?a:[]},getAvailableVideoTracks:function(){var a;a=(a=d())==null?void 0:a.getVideoTracks();if(!a)return[];a=a.map(function(a){return{codec:a.codec,codecFamily:a.codecFamily,displayLabel:a.displayLabel,height:a.height,id:a.id,lang:a.lang,mimeCodecs:a.mimeCodecs,qualityLabel:a.qualityLabel,role:a.role,variantKey:a.variantKey,width:a.width}});return a},getCurrentAudioRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentAudioRepresentation())!=null?a:null},getCurrentPlayingAudioRepresentationID:function(){var a=d();return a?i(a):null},getCurrentPlayingAudioTrackID:function(){var a=d();return a?i(a):null},getCurrentPlayingVideoQuality:function(){var a=d();return a?j(a):""},getCurrentPlayingVideoRepresentationID:function(){var a;return(a=(a=d())==null?void 0:(a=a.getCurrentVideoRepresentation())==null?void 0:a.getID())!=null?a:null},getCurrentTargetVideoQuality:function(){var a=d();return a?h(a):""},getCurrentVideoRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentVideoRepresentation())!=null?a:null},getEstimatedBandwidth:function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromAccessibility"))},getManifestIdentifier:function(){var a;a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getCustomField("fbManifestIdentifier");return a!=null?String(a):null},getMpdValidationErrors:function(){var a;a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getCustomField("validationErrors");return a!=null?String(a):null},getPerfLoggerProvider:function(){var a=d();return a?a.getPerfLoggerProvider():null},getRepresentationCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasVTTRepresentationCaptions"))},getStreamType:function(){return"dash"},getTargetAudioTrack:function(){var a=d();return a?l(a):null},getUserSelectedVideoQuality:function(){var a=d();return a?k(a):""},getUserSelectedVideoVariant:function(){var a=d();return(a=a==null?void 0:a.getTargetVideoVariant())!=null?a:null},getVideoProjectionType:function(){var a=d();return a!=null?m(a):null},getVideoRepresentations:function(){var a;return(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations())!=null?a:null},isDrm:function(){var a;return Boolean((a=d())==null?void 0:a.isDrm())},isFBIsLiveTemplated:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isLiveTemplated"))},isFBMS:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBMS"))},isFBWasLive:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBWasLive"))},isLiveRewindAvailable:function(){var a;a=(a=(a=d())==null?void 0:a.getMpdUrl())!=null?a:"";try{return(a=(a=new URL(a).searchParams.get("ms"))==null?void 0:a.includes("m_CT"))!=null?a:!1}catch(a){}return!1},isMixedCodecManifest:function(){var a,b;a=(a=d())==null?void 0:a.getMpd();if(a==null)return null;a=(a=a.getVideoRepresentations())!=null?a:[];a=new Set(a.map(function(a){return/codecs=\"([^\".]+)/i.exec(a.getMimeCodecs())}));b=(b=(b=d())==null?void 0:(b=b.getMpd())==null?void 0:b.getAudioRepresentations())!=null?b:[];b=new Set(b.map(function(a){return/codecs=\"([^\".]+)/i.exec(a.getMimeCodecs())}));return a.size>1||b.size>1},isPredictiveDash:function(){var a;a=(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations()[0])!=null?a:null;return a!==null&&a.canPredict()},setDimensions:function(a){},setEnableLiveheadCatchup:function(a){var b=d();b!=null&&b.setEnableLiveheadCatchup(a)},setLatencyLevel:function(a){c("handleVideoPlayerLatencyLevelChange")(b(),e(),d(),a)},setUserSelectedVideoQuality:function(a){var b=d();b!=null&&n(b,a)},setUserSelectedVideoVariant:function(a){var b=d();b!=null&&a!=null&&o(b,a)}};return a}g.createVideoPlayerOzImplementationEngineExtrasAPI=a}),98);
__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],(function(a,b,c,d,e,f){"use strict";a=b("OzDOMEventListenerImpl");f["default"]=a}),66);
__d("oz-player/shims/OzDOMEventListener",["oz-player/shims/www/OzDOMEventListenerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDOMEventListenerWWW")}),98);
__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("SubscriptionsHandler")}),98);
__d("oz-player/shims/OzSubscriptionsHandler",["oz-player/shims/www/OzSubscriptionsHandlerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzSubscriptionsHandlerWWW")}),98);
__d("oz-player/shims/www/ozThrottleWWW",["throttle"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("throttle")}),98);
__d("oz-player/shims/ozThrottle",["oz-player/shims/www/ozThrottleWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozThrottleWWW")}),98);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);a=this.$3 instanceof j?this.$1.getInPlayBufferOverflowTarget():this.$1.getStartBufferUnderflowTarget();return d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,a,c)?new j(this.$1,this.$2):this};return a}(),i=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.handleEvent=function(a,b,c){return a.type==="play"||a.type==="playing"||!b.paused?d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getStartBufferUnderflowTarget(),c)?new j(this.$1,this.$2):new h(this.$1,this.$2,this):this};return a}(),j=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=b.getString("stream_types_eligible_for_partial_playback","").split(",")}var b=a.prototype;b.handleEvent=function(a,b,c,e){e===void 0&&(e=new Map());if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);return!d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getInPlayBufferUnderflowTarget(),c)&&!this.$4(a,b.currentTime,e)?new h(this.$1,this.$2,this):this};b.$4=function(a,b,c){return a.type==="waiting"?!1:d("oz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(b,c,this.$3,this.$2.getNumber("partial_playback_buffer_overflow",0))};return a}();g.OzVideoBufferingState=h;g.OzVideoPausedState=i;g.OzVideoPlayingState=j}),98);
__d("oz-player/strategies/OzBufferingStateThresholdManager",["oz-player/shims/OzPerformance","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!1,this.$3=-Infinity,this.$4=-Infinity,this.$1=a}var b=a.prototype;b.getInPlayBufferUnderflowTarget=function(){return this.$1.getNumber("in_play_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.getInPlayBufferOverflowTarget=function(){if(this.$5())return this.$1.getNumber("stream_interrupt_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD);return c("oz-player/shims/OzPerformance").now()-this.$4<this.$1.getNumber("recent_buffer_timeout_ms",0)?this.$1.getNumber("recent_buffer_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):this.$1.getNumber("in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD)};b.getStartBufferUnderflowTarget=function(){return this.$1.getNumber("start_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.notifyBufferingEnd=function(){this.$4=c("oz-player/shims/OzPerformance").now()};b.notifyStreamInterrupted=function(){this.$2=!0};b.notifyStreamResumed=function(){this.$2=!1,this.$3=c("oz-player/shims/OzPerformance").now()};b.$5=function(){var a=this.$1.getNumber("stream_interrupt_buffer_target_timeout_ms",0);return a===0?!1:this.$2||c("oz-player/shims/OzPerformance").now()-this.$3<a};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/strategies/OzBufferingDetectorStates","oz-player/strategies/OzBufferingStateThresholdManager","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;g=a.call(this)||this;g.$OzBufferingDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();g.$OzBufferingDetector$p_6=new Map();g.$OzBufferingDetector$p_8=null;g.$OzBufferingDetector$p_9=function(a){g.$OzBufferingDetector$p_11(a)};g.$OzBufferingDetector$p_2=b;g.$OzBufferingDetector$p_4=e;g.$OzBufferingDetector$p_5=f;g.$OzBufferingDetector$p_7=new(c("oz-player/strategies/OzBufferingStateThresholdManager"))(e);g.$OzBufferingDetector$p_2.paused?g.$OzBufferingDetector$p_1=new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4):g.$OzBufferingDetector$p_1=d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(g.$OzBufferingDetector$p_2,g.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget(),g.$OzBufferingDetector$p_5())?new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4):new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4,null);g.$OzBufferingDetector$p_3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"pause",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"play",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"progress",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector$p_9,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"timeupdate",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector$p_9,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"seeked",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"seeking",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"waiting",g.$OzBufferingDetector$p_9));g.$OzBufferingDetector$p_3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"canplay",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"canplaythrough",g.$OzBufferingDetector$p_9));return g}var e=b.prototype;e.$OzBufferingDetector$p_10=function(){var a=this,b="unavailable",c=this.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget();this.$OzBufferingDetector$p_6.forEach(function(e,f){var g=a.$OzBufferingDetector$p_2.currentTime;d("oz-player/utils/OzBufferingUtils").hasBuffer(g,c,e)||(b=b==="unavailable"?f:"audio/video")});return b};e.setSourceBufferState=function(a,b){this.$OzBufferingDetector$p_6.set(a,b)};e.$OzBufferingDetector$p_11=function(a){var b=this.$OzBufferingDetector$p_1.handleEvent(a,this.$OzBufferingDetector$p_2,this.$OzBufferingDetector$p_5(),this.$OzBufferingDetector$p_6),c=this.$OzBufferingDetector$p_1;this.$OzBufferingDetector$p_1=b;var e=b instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,f=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;if(b===c){e&&this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("buffering_handle_event").setInitiator(a.type).log();return b}if(e){e=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause";this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("enter_buffering").setState("buffering").setType(e).setReason(this.$OzBufferingDetector$p_10()).setInitiator(a.type).log();this.emit("enterBuffering",e)}else f&&(this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("leave_buffering").setInitiator(a.type).log(),this.$OzBufferingDetector$p_7.notifyBufferingEnd(),this.emit("leaveBuffering",{domEventPerfTimestamp:a.timeStamp}));return b};e.notifyStreamInterrupted=function(){this.$OzBufferingDetector$p_7.notifyStreamInterrupted()};e.notifyStreamResumed=function(){this.$OzBufferingDetector$p_7.notifyStreamResumed()};e.attachPerfLoggerProvider=function(a){this.$OzBufferingDetector$p_8=a};e.destroy=function(){this.$OzBufferingDetector$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzSystemicRiskABRManager","OzWidevineDrmProvider","cr:21294","cr:21295","gkx","justknobx","oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzBufferingDetector"],(function(a,b,c,d,e,f,g){"use strict";var h=null;h=b("cr:21294");h==null&&(h=b("cr:21295"));var i=/(livestream-)?lookaside\.(facebook|workplace)\.com$/;function a(a){return i.test(a.getDomain())}function d(a,b,d,e,f,g){if(f.current!=null)return;var h=!0,i=function(){if(h)return!1;f.current!==j;return!1},j=new(c("oz-player/strategies/OzBufferingDetector"))(a,d,function(){var a=e.getCurrentState();a=a.controlledState;return a.streamEnded?b.getDuration():Infinity});f.current=j;h=!1;a=function(a){if(i())return;e.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"});a=d.getNumber("ull_fallback_stall_count",0);if(a>0){var b=g.getLoggerState().stallCountTotal;d.getBool("fix_ull_fallback_stall_count",!1)&&(b=g.getLoggerState().inPlayStallCount200ms);e.getCurrentState().controlledState.latencyLevel==="ultra-low"&&b>a&&e.dispatch({payload:{latencyLevel:"low",ullIneligibilityReason:null},type:"implementation_set_latency_level_requested"})}};var k=function(a){if(i())return;e.dispatch({payload:{domEventPerfTimestamp:a.domEventPerfTimestamp},type:"buffering_end_requested"})};j.addListener("enterBuffering",a);j.addListener("leaveBuffering",k)}function e(a){var b=a.accessToken,d=a.graphQLVideoDRMInfo;a=a.videoFBID;var e=[];if(d&&a!=null){var f=c("justknobx")._("717")?null:d.widevineCert;e.push(new(c("OzWidevineDrmProvider"))(a,d.graphApiVideoLicenseUri,d.videoLicenseUriMap,b,(a=f)!=null?a:null))}return e}function f(a){var b=a.VideoPlayerShakaPerformanceLoggerClass,c=a.accessToken,d=a.disableLogging,e=a.getApproximateFBLSToPlayerDisplayLatency,f=a.getBandwidthEstimate,g=a.getPlayerDimensions,h=a.getPlayerFormat,i=a.playbackIsLiveStreaming,j=a.playerInstanceCount,k=a.playerInstanceKey,l=a.playerSuborigin,m=a.playerVersion,n=a.videoElement,o=a.videoFBID;a=a.videoPlayerShakaPerformanceLoggerBuilder;if(d||!a&&(!b||!b.shouldInitialize()))return[];c={accessToken:c,getApproximateFBLSToPlayerDisplayLatency:e,getBandwidthEstimate:f,getPlayerDimensions:g,getPlayerFormat:h,isLive:i,isServableViaFbms:!1,playerInstanceCount:j,playerOrigin:null,playerSuborigin:l,playerVersion:m,representationId:null,uniqueID:k,video:n,videoID:(d=o)!=null?d:""};return a!=null?[a.build(c)]:b?[new b(c)]:[]}function j(a,b){return b>0?b/1e3*-1:a.getNumber("live_initial_playback_position",0)}function k(a,b,c){return b>0&&c>0?(b+c)/1e3:a.getNumber("livehead_fall_behind_block_threshold",0)}function l(a,b){return b>0?b/2/1e3:a.getNumber("live_time_range_block_margin",0)}function m(a){return function(b,d,e,f,g,i,j,k,l){return!a&&h!=null?new h(b,d,e,f,g,i,j,k,l):b.getLegacyConfig().getBool("use_systemic_risk_abr",!1)?new(c("OzSystemicRiskABRManager"))(b,d,e,f,g,i,j,k,l):null}}function n(a,b){var d=b.experimentationConfig,e=b.getCurrentVideoRepresentation,f=b.getOzCDNSignedQueryParams,g=b.isClientTriggeredTraceEnabled,h=b.playbackIsLiveStreaming,i=b.playbackSessionId;b=b.shouldRefresh403;var j=a.getQueryData(),k;if(h){k={};if(d.getBool("server_side_abr_send_client_estimates",!1)){var l=c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(d);l&&(k=babelHelpers["extends"]({},k,{_nc_bwe:String(l.bandwidthEstimate),_nc_bwe_std:String(l.bandwidthStandardDeviation),_nc_ttfb:String(l.timeToFirstByteMsEstimate),_nc_ttfb_std:String(l.timeToFirstByteMsStandardDeviation)}));l=e();l&&(k=babelHelpers["extends"]({},k,{_nc_abr_bitrate:String(l.getBandwidth()),_nc_abr_qlabel:l.getDisplayLabel()}))}}e=d.getNumber("live_video_chunk_duration",0);l=d.getBool("use_bandwidth_estimate_from_headers_in_abr",!1);d=l?c("oz-player/networks/OzBandwidthEstimator").hasRecentBandwidthEstimateFromHeader():!1;h&&e>0&&d&&(k=babelHelpers["extends"]({},k,{chk_dur:e.toString(10)}));c("gkx")("24354")&&(j.uss!=null&&j.odm!=null&&(k=babelHelpers["extends"]({},k,{manual_redirect:"1"})));g&&(k=babelHelpers["extends"]({},k,{_nc_psid:i}));if(b){l=f();if(l!=null){h=a.getDomain()+a.getPath();d=l.get(h);if(d!=null)for(e in d){k=babelHelpers["extends"]({},k,(j={},j[e]=d[e],j))}}}return k}g.checkShouldIncludeCredentials=a;g.createOzBufferingDetector=d;g.createOzDrmProviders=e;g.createOzPerfLoggerProviders=f;g.calculateInitialPlaybackPositionForDynamicMpd=j;g.calculateLiveheadFallBehindBlockThreshold=k;g.calculateLiveheadFallBehindBlockMargin=l;g.getVideoAbrManagerFactory=m;g.getCustomRequestParametersForURI=n}),98);
__d("getOzPlaybackRestrictions",["OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=[];switch(a){case"HD":d.push(new(c("OzMinimumSmallestDimensionRestriction"))(720));break;case"UHD":c("gkx")("24263")&&d.push(new(c("OzMinimumSmallestDimensionRestriction"))(1080));break;default:break}a=b.getNumber("mos_upper_threshold",0);var e=b.getNumber("mos_lower_threshold",0);(a>0||e>0)&&d.push(new(c("OzMosThresholdRestriction"))(b));return d}g["default"]=a}),98);
__d("oz-player/configs/OzPlayerConfigDefaults",[],(function(a,b,c,d,e,f){a={bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,catchup_use_timeline_range_end_time_as_end:!1,clear_on_seek:!0,debug_live_replay:!1,do_not_end_stream:!1,enable_abr_logging:!1,enable_alternative_audio_tracks:!1,enable_lip_sync_abr_select_quality:!1,enable_managed_media_source:!1,enable_revoke_object_url_on_destroy:!1,fix_live_rewind_user_selected_playback_speed:!0,ignore_reset_after_seek_if_bufferahead:!1,latencymanager_stalled_edgelatency_sec_on:!1,msm_refactor_wait_for_sourceopen:!1,ms_promise_for_null:!1,no_rep_to_switch_fallback_progressive:!1,normalize_mpd_fetch_errors:!0,parse_number_templated_uri:!0,pdash_use_pdash_segmentlocator:!1,playback_speed_latency_adjustment_disabled:!1,player_emit_mpdparsed_early:!1,playhead_manager_buffered_timerange_update_on_timeupdate:!0,playhead_manager_clamp_initial_playback_position:!1,reset_catchup_timeout_after_play_sec_on_overwrite:!0,retry_video_element_error:!0,sidx_parser_memory_optimization:!0,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!0,use_live_latency_manager:!1,use_scf_timebased_segments:!1,video_cdn_url_refresh:!1,vtt_caption_representation:!0};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:6,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_header_expire_threshold:0,bandwidth_response_time_handicap:0,bandwidth_ttfb_samples_to_save:5,buffer_ahead_target:22,buffer_target_constraint_append_succeeded_reward:.2,buffer_target_constraint_minimum_sec:2,buffer_target_constraint_quota_exceeded_penalty:.3,byte_count_per_sample:2e5,catchup_timeout_after_buffering_sec:0,catchup_timeout_after_play_sec:0,clear_buffer_around_playhead_boundary_ms:5e3,clear_buffer_on_seek_epsilon_s:0,clear_buffer_on_seek_nudge_s:0,default_bandwidth_estimate:1e6,download_cursor_buffer_ahead_time_max_sec:0,download_cursor_total_buffer_max_sec:0,dvl_initial_segment_ignore_count:1,dvl_update_interval_ms:0,dynamic_mpd_initial_playback_position_offset_modifier:4,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,latencymanager_stalled_edgelatency_sec:0,live_audio_ibr_bandwidth_percentage:.05,live_numerical_error_epsilon:1e-4,loop_body_handle_error_interval_ms:1,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,manifest_initial_update_delay_ms:0,manifest_update_frequency_ms:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:1e8,max_start_eme_attempts:3,min_eval_interval:100,minimum_bandwidth_sample_duration:10,minimum_bytes_to_sample_on_close:25e3,min_switch_interval:100,mpd_updater_network_request_timeout_ms:2e4,ms_promise_for_null_ms:0,network_seg_timeout_ms:0,overwrite_livehead_fall_behind_block_threshold:0,overwrite_live_time_range_block_margin:0,partial_playback_buffer_overflow:.75,paused_stream_segments_count:2,pdash_download_cursor_between_catchups_seg:0,pdash_download_cursor_catchup_threshold_gop_multiplier:0,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playback_speed_enabled_delay_sec:4,playback_speed_latency_adjustment_rate:0,playback_speed_latency_slowdown_adjustment_rate:0,playback_speed_latency_speedup_adjustment_rate:0,playback_speed_min_buffer_sec:1,playback_speed_min_duration_sec:2,playback_speed_min_sharpness_factor:3,playback_speed_restore_min_duration_sec:1,playhead_manager_buffered_auto_seek_playhead_slack:.5,playhead_manager_buffered_is_near_gap_threshold:1.5,playhead_manager_buffered_numerical_error:.01,playhead_manager_timeupdate_throttle_ms:1e3,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,recent_buffer_in_play_buffer_overflow_target:3,recent_buffer_timeout_ms:1e4,resolution_constraint_factor:2,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,sidx_segment_retry_attempts:9999,sidx_segment_retry_interval_ms:100,skip_videobuffer_gaps_max_gap_size_sec:0,stale_mpd_buffer_ahead_target:0,start_buffer_underflow_target:.1,steadystate_minbuffer_buckets:0,steadystate_minbuffer_buckets_sec:1,steadystate_minbuffer_sec:0,stream_interrupt_buffer_target_timeout_ms:1e4,stream_interrupt_check_mpd_stale_count_threshold:6,stream_interrupt_in_play_buffer_overflow_target:1,stream_reader_max_buffer_len:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500,time_to_first_byte_ignore_above_threshold_ms:0};c={bandwidth_estimate_header_key:"",bandwidth_estimate_key:"",block_representation_status_codes_json:"[500, 503]",block_representation_status_codes_temporarily_json:"{}",cdn_experiment_id:"",stream_types_eligible_for_partial_playback:""};e.exports={defaultBools:a,defaultNumbers:b,defaultStrings:c}}),null);
__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a){return typeof this.$1[a]==="boolean"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[a]};b.getNumber=function(a){return typeof this.$1[a]==="number"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a]};b.getString=function(a){return typeof this.$1[a]==="string"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[a]};b.getLegacyConfig=function(){var a=this;return{getBool:function(b,c){return typeof a.$1[b]==="boolean"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[b])!=null?b:c},getNumber:function(b,c){return typeof a.$1[b]==="number"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[b])!=null?b:c},getString:function(b,c){return typeof a.$1[b]==="string"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[b])!=null?b:c}}};return a}();g["default"]=a}),98);
__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/configs/OzPlayerConfig"))();a=function(a){return{getBool:function(b){return a.getBool(b,h.getBool(b))},getNumber:function(b){return a.getNumber(b,h.getNumber(b))},getString:function(b){return a.getString(b,h.getString(b))},getLegacyConfig:function(){return a}}};g.provideConfigWithDefaults=a}),98);
__d("oz-player/networks/OzClientClock",["oz-player/shims/OzPerformance","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a!==null){a=parseInt(a,10);if(!isNaN(a))return a}return null}a=function(){function a(){this.$1=null,this.$2=0,this.$2=Date.now()-c("oz-player/shims/OzPerformance").now()}var b=a.prototype;b.updateOffsetFromHeaderResponse=function(a,b){var c=h(b.get("x-fb-dynamic-server-wallclock-ms"));b=h(b.get("x-fb-dynamic-rtt-ms"));a=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(a);if(c!==null&&b!==null&&a!=null&&(a.responseStart>0&&a.duration>10)){a=a.requestStart+this.$2;c=c-a-b/2;this.$1=c}};b.now=function(){var a;return c("oz-player/shims/OzPerformance").now()+this.$2+((a=this.$1)!=null?a:0)};b.getClientClockOffsetMs=function(){return this.$1};return a}();b=new a();g["default"]=b}),98);
__d("oz-player/networks/OzClockSyncNetworkRequestStreamHandler",["oz-player/networks/OzClientClock","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.onResponse=function(a,b){var d=a.headers;if(!d)return null;a=new(c("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){c("oz-player/networks/OzClientClock").updateOffsetFromHeaderResponse(b,d)});return a};b.onError=function(a,b){return null};return a}();g["default"]=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplFunction",["CometThrottle","ConstUriUtils","Deferred","FBLogger","JSResourceForInteraction","NetworkStatus","OzActiveActiveFailoverNetworkRequestStreamHandler","OzBufferVTTCaptionsVisibleStrategy","OzCDNSignedQueryParams","OzCustomParsers","OzCustomRepresentationParsers","OzOneSemanticHandler","OzOneSemanticHandlerUtils","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","Promise","QE2Logger","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerOzImplementationEnginePartsImplUtils","clearTimeout","cr:1836099","cr:1871597","cr:1947728","cr:1993377","getErrorSafe","getOzPlaybackRestrictions","gkx","md5","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClockSyncNetworkRequestStreamHandler","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("JSResourceForInteraction")("VideoPlayerEmsg").__setRef("VideoPlayerOzImplementationEnginePartsImplFunction"),j=1e4,k=null,l=null;b("cr:1836099")&&(k=b("cr:1836099").getHiveConfig(),l=b("cr:1836099").HiveOz);function a(a){var e,f=a.OzPlayerClass,g=a.callChain,m=a.destroyOzPlayerPartsRef,n=a.engineDebugAPI,o=a.engineExtrasAPI,p=a.getCaptionsInfo,aa=a.getLatencyLevelManager,q=a.getVideoLiveTrace,r=a.handleCaptionsInfoChange,ba=a.handleFatalImplementationError,s=a.hivePluginRef,t=a.initialProps,u=a.loggerToVPL,v=a.machine,w=a.overrideOzRequestImplementationRef,x=a.ozBufferingDetectorRef,y=a.ozPlayerRef,z=a.p2pSessionLoggerRef,ca=a.playerFormatForDPLRef,A=a.playerVersion,B=a.resolvedVideoInfo,C=a.videoElement,D=a.videoElementAPI,E={current:!1},F={current:null},G={current:null};m.current=function(a){var b=x.current;b&&(x.current=null,b.destroy());b=y.current;if(b){n&&n.handleOzPlayerChanged(null,D);y.current=null;try{b.destroy([].concat(a,["destroyOzPlayerParts"]).join(":"))}catch(a){c("FBLogger")("comet_video_player").catching(a).mustfix("Error in ozPlayer.destroy: %s",String(a))}}b=F.current;b&&(F.current=null,b());G.current&&(G.current=null);Z();s.current&&(s.current=null);z.current&&(z.current=null);w.current&&(w.current=null)};a=B.accessToken;m=B.audioOnly;var H=B.experimentationConfig,I=B.graphQLVideoDRMInfo,J=B.graphQLVideoP2PSettings,K=B.manifestUrl,da=B.manifestXmlStringResolved,ea=B.minQualityPreference,fa=B.ozPrefetchCache,L=B.videoFBID,M=t.loggingConfig.disableLogging===!0?null:B.VideoPlayerShakaPerformanceLoggerClass,N=Boolean(t.loggingMetaData.coreVideoPlayerMetaData.isLiveStreaming),O=Boolean((e=t.isClientTriggeredTraceEnabled)!=null?e:!1),P=function(a){return o.getEstimatedBandwidth()};e=function(){return o.getApproximateFBLSToPlayerDisplayLatency()};var ga=function(){H.setContext("connection_quality",d("VideoPlayerConnectionQuality").evaluate(function(){return P(N)}))},Q=function(){var a=H.getNumber("connection_quality_context_throttle_frequency",0);if(a===0)return null;var b=c("CometThrottle")(ga,a),d=c("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",b);return function(){d.remove(),b.cancel()}};F.current=Q();Q=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:a,graphQLVideoDRMInfo:I,videoFBID:L});I=function(){return v.getCurrentState().controlledState.captionsVisible};var R=[];H.getBool("use_vtt_captions_visible_buffer_strategy",!0)&&R.push(new(c("OzBufferVTTCaptionsVisibleStrategy"))(I));I=function(){return v.getCurrentState().controlledState.dimensions};var S=function(){var a;return(a=ca.current)!=null?a:"unknown"};a=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:M,accessToken:a,disableLogging:t.loggingConfig.disableLogging===!0,getApproximateFBLSToPlayerDisplayLatency:e,getBandwidthEstimate:P,getPlayerDimensions:I,getPlayerFormat:S,playbackIsLiveStreaming:N,playerInstanceCount:t.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:t.loggingMetaData.instanceKey,playerSuborigin:t.loggingMetaData.coreVideoPlayerMetaData.subOrigin,playerVersion:A,videoElement:C,videoFBID:L,videoPlayerShakaPerformanceLoggerBuilder:B.videoPlayerShakaPerformanceLoggerBuilder});G.current==null&&(G.current=new(c("OzCDNSignedQueryParams"))());if(J&&L!=null){e=J.community_info;S=J.config;A=J.hive_initialization_options;B=z.current=(B=z.current)!=null?B:b("cr:1871597")?new(b("cr:1871597"))(L,e):null;try{if(!s.current){B&&B.logEnableP2P();e=function(a){z.current&&z.current.logHiveError(a)};var T=function(b){var a=y.current;a&&a.injectExternalDebugEvent("P2PTech",b.tech);z.current&&z.current.logSessionActive(b.tech)},U=function(b){var a=y.current;a&&a.injectExternalDebugEvent("P2PStats",b);z.current&&z.current.setCurrentHiveStats(b)},V=function(a){a=a.state;var b=v.getCurrentState();b=b.controlledState;b=b.playbackState;if(s.current&&a==="CLOSED"){Z();a=y.current;a&&b!=="ended"&&(E.current&&K!=null?a.updatePlayerRunTimeConfig({manifestUrl:K}):a.load(K))}};U={HiveJava:{},HiveJS:{maximumTrimming:{dash:void 0,hls:void 0},renderStatsCallback:U},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS","HiveJava"],onActiveSession:T,onError:e,onSessionStateChange:V,telemetryId:B?B.getSessionID():0};T=H.getNumber("hive_maximum_trimming_seconds",0);T>0&&(U.HiveJS.maximumTrimming={dash:T,hls:T});if(A){e=A.HiveJava;V=A.debugLevel;T=A.hiveTechOrder;U.hiveTechOrder=T.slice();U.HiveJava=e?{minVersion:e.minVersion}:{};U.debugLevel=(A=V)!=null?A:U.debugLevel}if(S.disable_hivejava_for_livevc===!0&&K!=null&&K.startsWith("https://livestream-lookaside")){T=U.hiveTechOrder.indexOf("HiveJava");T>=0&&U.hiveTechOrder.splice(T,1)}if(k)k.SensitiveInfo.restrictedConnectivityInfo=!0;else throw c("unrecoverableViolation")("HiveConfig does not exist","comet_video_player");if(l)s.current=new l(U);else throw c("unrecoverableViolation")("HiveOz does not exist","comet_video_player");if(s.current){if(!b("cr:1947728"))throw c("unrecoverableViolation")("OzConfigurableRequestImplementation does not exist","comet_video_player");w.current=b("cr:1947728")(s.current.getRequestImplementation(),{inferResponseStatusIsOK:!0,inferResponseStatusIsOk2xx:!1})}}}catch(a){B&&B.logError(a),Z()}}e=[new(c("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b,c){var d=q();d!=null&&d.handleHeadersAndBody(a,b,c)},H.getBool("live_trace_parse_emsg",!1)),new(c("oz-player/networks/OzClockSyncNetworkRequestStreamHandler"))()];c("OzActiveActiveFailoverNetworkRequestStreamHandler")&&e.push(new(c("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(b,c){var a=y.current,e=b.headers;if(a&&e){e=parseInt(e.get("x-fb-video-replica"),10);u.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:b.status.toString(),error_user_info:JSON.stringify({failover_response_code:b.status.toString(),replica:e,url:c})},state:v.getCurrentState()});b=a.getMpdUrl();if(b!=null){c=d("ConstUriUtils").getUri(b);if(c){b=c.addQueryParam("replica",e);b&&(Z(),a.updatePlayerRunTimeConfig({manifestUrl:b.toString(),resetStreamAnchor:!0}))}}}}));var ha=t.expiredVideoUrlRefreshHandler,ia=t.loggingMetaData.instanceKey;V=c("gkx")("24353");A=c("gkx")("24354")||c("gkx")("24355");var ja=N?V:A;S=c("gkx")("4927");H.getBool("log_exposure_on_oz_initialization",!1)&&d("QE2Logger").logExposureForUser("www_videos_html5_mpeg_dash");U={audioOnly:(T=m)!=null?T:!1,bufferEndLimit:t.bufferEndLimit!=null?t.bufferEndLimit:null,bufferingDetector:(U=x.current)!=null?U:void 0,config:d("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(H),configureCustomRequestParametersForSegment:function(a){var b=null;if(N&&O){var d=a.getByteRange();d=d?d.startByte+", "+(d.endByte!=null?d.endByte:"null"):"null";a=c("md5")(a.getURI().toString()+d);b=(d=b)!=null?d:{};a!=null&&(b=babelHelpers["extends"]({},b,{_nc_tsid:a}));b=babelHelpers["extends"]({},b,{_nc_e2e:"live"})}return b},customParsers:d("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:d("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:H}),customSegmentTimelineParser:H.getBool("enable_predictive_dash",!1)?new(c("OzPredictedSegmentTimelineParser"))():void 0,customVTTBufferTargetStrategies:R,debugCreateInitiator:[].concat(g,["proceedWithOzPlayerCreation"]).join(":"),drmProviders:Q,getCustomRequestParametersForURI:function(a){return d("VideoPlayerOzImplementationEnginePartsImplUtils").getCustomRequestParametersForURI(a,{experimentationConfig:H,getCurrentVideoRepresentation:function(){var a=y.current;return a==null?void 0:a.getCurrentVideoRepresentation()},getOzCDNSignedQueryParams:function(){return G.current},isClientTriggeredTraceEnabled:O,playbackIsLiveStreaming:N,playbackSessionId:ia,shouldRefresh403:ja})},getOverrideOzRequestImplementation:function(){return w.current},getShouldIncludeCredentials:H.getBool("use_oz_credentials_provider",!1)?d("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getUserSelectedPlaybackRate:function(){return v.getCurrentState().controlledState.targetPlaybackRate},getVideoDimensions:I,initialPlaybackPositionForDynamicMpd:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(H,(B=t.initialDesiredLatencyMs)!=null?B:0),initialRepresentationIDs:(V=t.initialRepresentationIds)!=null?V:[],isClientTriggeredTraceEnabled:O,liveheadFallBehindBlockMargin:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(H,(A=t.initialDesiredLatencyMs)!=null?A:0),liveheadFallBehindBlockThreshold:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(H,(m=t.initialDesiredLatencyMs)!=null?m:0,(T=t.initialLatencyToleranceMs)!=null?T:0),loggerConfig:{isOzDevConsoleEnabled:c("gkx")("24356"),observedOperationLoggers:[],perfLoggerProviders:a},mpdUrl:K,networkRequestFetchPriority:c("gkx")("10971")||c("gkx")("11761")?"high":"auto",networkRequestStreamHandlers:e,networkRequestStreamRetryHandler:ja?function(a,d,e){var f=a.headers,g=f==null?void 0:f.get("x-fb-url-refresh"),i=G.current;if(a.status===403&&i!=null){u.logVPLEvent({eventType:"video_cdn_url_expired",logDataOverrides:{error_user_info:JSON.stringify({expired_url:e})},state:v.getCurrentState()});var j=g!=null&&b("cr:1993377")!=null?{name:"refreshShortExpiryVideoUrl",promise:b("cr:1993377")(g)}:ha!=null?{name:"expiredVideoUrlRefreshHandler",promise:ha(e)}:null;if(j!=null)return j.promise.then(function(a){var b;b=(b=a.refreshedUrl)!=null?b:null;a=(a=a.reason)!=null?a:null;if(b!=null&&b!==""){u.logVPLEvent({eventType:"video_cdn_url_refreshed",logDataOverrides:{error_user_info:JSON.stringify({refresh_handler:j.name,refreshed_url:b})},state:v.getCurrentState()});i.update(b);return d(b)}else{throw c("unrecoverableViolation")(j.name+" refreshedUrl is "+(b===""?"an empty string":"null")+", reason: "+((b=a)!=null?b:"null"),"comet_video_player")}})["catch"](function(a){a=c("getErrorSafe")(a);u.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:a.message,error_user_info:JSON.stringify({expired_url:e,refresh_handler:j.name,refresh_url:g})},state:v.getCurrentState()});throw a})}return(h||(h=b("Promise"))).resolve(a)}:null,networkRequestUrlRefreshHandler:S?t.expiredVideoUrlRefreshHandler:null,prefetchCache:H.getBool("use_prefetch_cache",!1)?fa:null,rawMpdXml:s.current?void 0:da,seekHandler:null,setCustomFetchStreamLoggingAttributes:function(a,b,e){a.setIsOnline(c("NetworkStatus").isOnline());var f=e==null?void 0:e.headers;if(f)try{a.setProxyStatusHeader(f.get("proxy-status")),a.setDynamicStatusHeader(f.get("x-fb-dynamic-status"))}catch(a){}d("OzOneSemanticHandlerUtils").setOneSemanticFetchStreamLoggingAttributes(a,b,e)},shouldBlockStatusCode5xx:!N&&(c("gkx")("10769")||c("gkx")("10592")),startTimeStamp:H.getBool("fix_start_timestamp",!1)?t.startTimestamp:0,userPreferenceLang:t.initialAudioUserPreferredLanguage,videoAbrManagerFactory:d("VideoPlayerOzImplementationEnginePartsImplUtils").getVideoAbrManagerFactory(N),videoNode:C,videoPlaybackRestrictions:c("getOzPlaybackRestrictions")(ea,H)};var W=new f(U);y.current=W;x.current&&x.current.attachPerfLoggerProvider(W.getPerfLoggerProvider());R=t.loggingMetaData.playerImplementationInstanceCountRef;R.current++;W.onError(function(a){M&&M.flushQueuedLogs(),ba(a,"oz_player_error")});c("gkx")("24360")&&W.onWarning(function(a){M&&M.flushQueuedLogs();a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(a,"oz_player_warning");v.dispatch({payload:{warningError:a},type:"implementation_warning"})});W.addListener("switchVideoRepresentation",function(){v.dispatch({payload:{},type:"representation_changed"})});var ka=function(a){if(H.getBool("enable_error_recovery_attempt_logging",!1)){a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(a,"oz_player_stream_error_retry");v.dispatch({payload:{recoverableError:a},type:"error_recovery_attempt"})}};W.addListener("manifestFetchError",function(a){d("OzOneSemanticHandler").handleManifestFetchErrorEvent(H,a)});W.addListener("manifestFetchErrorRetry",function(a){ka(a)});W.addListener("streamError",function(a){return d("OzOneSemanticHandler").handleStreamErrorEvent(H,a)});W.addListener("streamErrorRetry",function(a){var b;(((b=a.getExtra())==null?void 0:b.mimeType)!=="application"||H.getBool("enable_era_logging_for_application_stream",!0))&&ka(a)});W.addListener("streamInterruptAt",function(){v.dispatch({type:"stream_interrupted"})});W.addListener("streamResumedAt",function(){v.dispatch({type:"stream_resumed"})});W.addListener("streamGoneBeforeStart",function(){Z(),v.dispatch({type:"stream_gone_before_start"})});W.addListener("streamEnd",function(){Z(),v.dispatch({type:"stream_ended"})});W.addListener("videoNodeErrorRetry",function(a){if(H.getBool("enable_error_recovery_attempt_logging",!1)){a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationVideoNodeError(a,"oz_player_stream_error_retry");v.dispatch({payload:{recoverableError:a},type:"error_recovery_attempt"})}});W.addListener("enterBuffering",function(a){v.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"})});W.addListener("leaveBuffering",function(a){v.dispatch({payload:{domEventPerfTimestamp:a.domEventPerfTimestamp},type:"buffering_end_requested"})});n&&n.handleOzPlayerChanged(W,D);var la=function(){var a=p();a={inbandCaptionsAutogeneratedFromManifest:o.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:o.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:o.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps};var b=v.getCurrentState();b=b.controlledState;(a.inbandCaptionsExpectedFromManifest!==b.captionsLoaded||a.inbandCaptionsAutogeneratedFromManifest!==b.inbandCaptionsAutogenerated)&&r(a)},ma=function(a,b){a=a.getCustomField("timescale");a=typeof a==="number"?a:0;v.dispatch({payload:{timescale:a,videoBytes:b},type:"cea608_bytes_received"})},na=function(){var a=o.getVideoRepresentations();if(a!=null&&a.length>0){a=a[0].getTimeRanges();if(a!=null&&a.length>0){var b=a[0].startTime;a=Math.max(a[a.length-1].endTime-H.getNumber("live_rewind_seek_to_live_delta",8),b);v.dispatch({payload:{seekableRanges:new(c("TimeRanges"))([{endTime:a,startTime:b}])},type:"seekable_ranges_changed"})}}},oa=function(){var a=W.getMpd();if(!a)return;a=a.getCustomField("loapStreamType");var b=q();typeof a==="number"&&b!=null&&b.setStreamType(a)},X=function(a){if(a!=null){a=d("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("lvp");return a==="1"}}return!1},pa=function(a){var b=function(){na(),la(),oa()};a.addListener("updated",b);b();var e=[],f=function(a){u.logVPLEvent({eventType:"imf",logDataOverrides:a,state:v.getCurrentState()})},g=function(a,b,c){a=a.parseEmsgBoxesFromMP4Segment;a=a(c,L,b.getID(),C.currentTime,f);a.length>0&&v.dispatch({payload:{emsgBoxes:a},type:"emsg_boxes_parsed"})},h=function(a){var b=e.shift();while(b)g.apply(void 0,[a].concat(b)),b=e.shift()};W.updatePlayerRunTimeConfig({audioStreamDataHandler:function(){var a=v.getCurrentState();if(a.controlledState.emsgObserverTokens.size>0){var b=i.getModuleIfRequireable();for(var d=arguments.length,f=new Array(d),j=0;j<d;j++)f[j]=arguments[j];b!=null?(h(b),g.apply(void 0,[b].concat(f))):(e.push(f),i.load().then(function(a){h(a)})["catch"](function(a){c("FBLogger")("comet_video_player").catching(c("getErrorSafe")(a)).warn("Failed to load VideoPlayerEmsg"),e.length=0}))}},videoStreamDataHandler:ma});if(o.isPredictiveDash()){H.setContext("streaming_implementation","pdash");a=aa();a&&a.maybeUpdateLatencyLevel()}b="mos";a=H.getBool("is_csvqm_enabled",!1);if(a&&!N){a=o.getVideoRepresentations();a=a==null?void 0:a.every(function(a){return a.getQualityScoreCurveString("csvqm")!=null});a===!0&&(b="csvqm")}H.setContext("quality_score_type",b);d("VideoPlayerODS").bumpEntityKey("comet_video_player",b==="csvqm"?"OzImplementation.quality_score_type_csvqm":"OzImplementation.quality_score_type_mos",14);a=p();r({inbandCaptionsAutogeneratedFromManifest:o.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:o.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:o.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps})};W.addListener("vttCaptionsUpdated",function(a,b){var c="webvtt",d=v.getCurrentState().controlledState.captionFormat;c!==d&&v.dispatch({payload:{captionFormat:c},type:"controller_set_caption_format_requested"});v.dispatch({payload:{activeCaptions:a,captionsLocale:b},type:"controller_set_active_captions_requested"})});W.addListener("mpdParsed",function(a){o.isPredictiveDash()&&H.setContext("streaming_implementation","pdash")});W.addListener("mpdReady",function(a){E.current=!0,pa(a),v.dispatch({payload:{selectedVideoQuality:o.getUserSelectedVideoQuality()},type:"implementation_engine_initialized"})});W.addListener("representationBlocked",function(a){v.dispatch({payload:{blockedRepresentationID:a},type:"implementation_engine_representation_blocked"})});var Y=null;function Z(){c("clearTimeout")(Y);var a=s.current,b=z.current;if(a!=null){s.current=null;z.current=null;w.current=null;try{a&&a.closeHiveSession(),b&&b.logEndSession()}catch(a){b&&b.logHiveError(a)}}}g=s.current;Q=J==null?void 0:J.ticket;if(K!=null&&J&&g&&Q!=null){I=W.getPerfLoggerProvider();I&&I.setIsP2pPlayback(!0);B=K.substring(K.indexOf("?"));V=g.initSession(Q+B,W,C);var $=new(c("Deferred"))();j>0&&(Y=c("setTimeout")(function(){$.reject(new Error("Hive initialization timed out after "+j+"ms"))},j));V.then(function(a){$.resolve(a)})["catch"](function(a){$.reject(a)});$.getPromise().then(function(a){c("clearTimeout")(Y);var b=a.manifest;a=a.tech;var d=z.current;b!==K&&d&&d.logManifestMismatch(b,K);d&&d.logSessionInit(a,b);u.setLoggingToVPLAdditionalData("is_p2p_playback",!0);u.setLoggingToVPLAdditionalData("is_live_preview",X(b));W.load(b)})["catch"](function(a){c("clearTimeout")(Y);var b=z.current;b&&b.logError(a);Z();u.setLoggingToVPLAdditionalData("is_live_preview",X(K));W.load(K)})}else u.setLoggingToVPLAdditionalData("is_p2p_playback",!1),u.setLoggingToVPLAdditionalData("is_live_preview",X(K)),W.load(K)}g.proceedWithOzPlayerCreation=a}),98);
__d("VideoPlayerOzImplementationLatencyLevelManager",[],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2="normal",this.$4=null,this.$1=a,this.$3=b,this.$6=c}var b=a.prototype;b.updatePlayerFormat=function(a){this.$4!==a&&(this.$4=a,this.maybeUpdateLatencyLevel())};b.updateBroadcastLatencySensitivity=function(a){this.$5!==a&&(this.$5=a,this.maybeUpdateLatencyLevel())};b.maybeUpdateLatencyLevel=function(){var a=this.$7(this.$5);a!==this.$2&&(this.$2=a,this.$1.getBool("set_latency_context_immediately",!1)&&this.$1.setContext("latency_level",a),this.$3.dispatch({payload:{latencyLevel:a,ullIneligibilityReason:this.$8()},type:"implementation_set_latency_level_requested"}))};b.$8=function(){var a=this.$1.getNumber("ultra_low_latency_bandwidth_threshold",0),b=this.$6.getEstimatedBandwidth();return b!==null&&a>0&&b<a?"low_bandwidth_estimate":null};b.$7=function(a){if(a==null)return"normal";switch(a){case 1:return"low";case 2:return this.$8()!==null?this.$1.getBool("fall_back_to_low_latency_in_ull",!1)?"low":"normal":"ultra-low";case 0:return"normal"}};return a}();g["default"]=a}),98);
__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferredForDisplay")("oz-player").__setRef("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay");function a(){return{getModuleIfRequireable:function(){return h.getModuleIfRequireable()||null},load:function(){return h.load()}}}g["default"]=a}),98);
__d("VideoPlayerOzImplementationEngine",["CometDASHPrefetchCacheManager","ErrorMetadata","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerImplementationLoadSequenceManager","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzImplementationLatencyLevelManager","VideoPlayerOzPlayerModuleLoaderDeferredForDisplay","cr:1473549","emptyFunction","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";e=!1;var h=c("emptyFunction");function a(a){var e=a.checkInDOM,f=a.debugLogId,g=a.handleFatalError,i=a.initialProps;a=a.setExposedStateInReact;var j={current:null},k={current:null},l={current:null},m={current:null},n={current:null},o={current:null},p={current:null},q={current:null},r={current:null},s={current:null},t={current:null},u={current:null},v={current:null},w={current:null};function x(){var a;return(a=p.current)!=null?a:null}function y(){var a;return(a=o.current)!=null?a:null}function z(){var a;return(a=(a=k.current)==null?void 0:a.experimentationConfig)!=null?a:null}function A(){var a;return(a=Y.current)!=null?a:null}function B(){var a;return(a=v.current)!=null?a:null}var C;b("cr:1473549")&&(C=new(b("cr:1473549"))());var D="comet_oz",E=function(a,b){return b.manifestXmlStringInitial!==null?a.manifestXmlStringInitial!==b.manifestXmlStringInitial:a.manifestUrl!==b.manifestUrl},F=function(a,b){return a.videoFBID!==b.videoFBID},G=function(a){return a.getBool("use_full_player_if_cached",!1)&&c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().getModuleIfRequireable():null},H=function(a,b,c){b!=null?k.current=babelHelpers["extends"]({},a,{manifestXmlStringResolved:b}):k.current=a,X.dispatch({type:"implementation_engine_oz_manifest_downloading"}),n.current=G(a.experimentationConfig),L(n.current,[].concat(c,["proceedWithOzManifestDownloading"]))},I=function(a){var b,e,f,g=a.manifestUrl,h=a.manifest,i=null;c("CometDASHPrefetchCacheManager")&&(a.videoFBID!=null&&(i=c("CometDASHPrefetchCacheManager").get(a.videoFBID)));b={VideoPlayerShakaPerformanceLoggerClass:a.VideoPlayerShakaPerformanceLoggerClass,accessToken:a.loggingMetaData.accessToken,audioOnly:a.audioOnly,experimentationConfig:a.experimentationConfig,graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,graphQLVideoP2PSettings:a.graphQLVideoP2PSettings,initialAudioUserPreferredLanguage:a.initialAudioUserPreferredLanguage,manifestUrl:(b=g)!=null?b:null,manifestXmlStringInitial:(b=h)!=null?b:null,minQualityPreference:a.minQualityPreference,ozPrefetchCache:i,videoFBID:a.videoFBID,videoPlayerShakaPerformanceLoggerBuilder:a.videoPlayerShakaPerformanceLoggerBuilder};i=j.current;e=(e=v.current)!=null?e:new(c("VideoPlayerOzImplementationLatencyLevelManager"))(a.experimentationConfig,X,Q);v.current=e;w.current=(f=a.loggingMetaData.coreVideoPlayerMetaData.playerFormat)!=null?f:null;e.updatePlayerFormat((f=a.loggingMetaData.coreVideoPlayerMetaData.playerFormat)!=null?f:null);e.updateBroadcastLatencySensitivity(a.broadcastLatencySensitivity);f=!1;if(i==null)f=!0;else if(i!=null&&!F(b,i)&&E(b,i)){e=14;d("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",e);f=!1}else if(i!=null&&F(b,i)){var k;e=c("err")("videoFBID changed after player initialization: %s",JSON.stringify({subOrigin:a.loggingMetaData.coreVideoPlayerMetaData.subOrigin,toVideoFBID:b.videoFBID}));e.name="VideoPlayerOzImplementationVideoFBIDChanged";k=(k=e.metadata)!=null?k:new(c("ErrorMetadata"))();i.videoFBID!=null&&k.addEntry("COMET_VIDEO","VIDEO_ID",i.videoFBID);e.metadata=k;e.project="comet_video_player";throw e}if(!f)return!1;g=b.manifestUrl;h=b.manifestXmlStringInitial;if(h==null&&g==null){i=c("err")("Empty manifestXmlStringInitial and manifestUrl: %s",JSON.stringify({manifestUrl:g,manifestXmlStringInitial:h,subOrigin:a.loggingMetaData.coreVideoPlayerMetaData.subOrigin}));i.name="VideoPlayerOzImplementationManifestEmpty";e=(k=i.metadata)!=null?k:new(c("ErrorMetadata"))();b.videoFBID!=null&&e.addEntry("COMET_VIDEO","VIDEO_ID",b.videoFBID);i.metadata=e;i.project="comet_video_player";throw i}j.current=b;H(b,h,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz"]);return!0},J=function(a,b){var d=function(c){if(m.current!==a)return;n.current=c;L(c,[].concat(b,["handleOzPlayerModuleLoadSuccess"]))},e=function(b){if(m.current!==a)return;V(b,"oz_player_module_load_failed")};m.current=a;c("promiseDone")(a,d,e)},K=function(a){a=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);Y.current=a;return a},L=function(a,b){var e=S(),f=k.current;if(e==null||f==null)return;var g=K(e),h=f.experimentationConfig;a?M(a,e,g,f,[].concat(b,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?(h.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(e,g,f.experimentationConfig,X,p,W),J(c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().load(),[].concat(b,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):V(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")},M=function(a,b,e,f,g){try{var h={OzPlayerClass:a,callChain:[].concat(g,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:u,engineDebugAPI:C,engineExtrasAPI:Q,getCaptionsInfo:R,getLatencyLevelManager:B,getVideoLiveTrace:T,handleCaptionsInfoChange:U,handleFatalImplementationError:V,initialProps:i,loggerToVPL:W,machine:X,ozBufferingDetectorRef:p,playerFormatForDPLRef:w,playerVersion:D,resolvedVideoInfo:f,videoElement:b};a=z();g=i.loadSequence;a&&a.getNumber("load_sequence_max_delay_ms",0)>0&&g!=null?t.current=c("VideoPlayerImplementationLoadSequenceManager").schedule(a,g,function(){d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},h,{hivePluginRef:q,overrideOzRequestImplementationRef:s,ozPlayerRef:o,p2pSessionLoggerRef:r,videoElementAPI:e}));return e.getCanPlayPromise()}):d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},h,{hivePluginRef:q,overrideOzRequestImplementationRef:s,ozPlayerRef:o,p2pSessionLoggerRef:r,videoElementAPI:e}));l.current=f}catch(a){V(a,"oz_player_create_exception")}};function N(a){var b=u.current;b!=null&&(u.current=null,b(a));t.current!=null&&(t.current(),t.current=null)}function O(){return}function P(){m.current=null,n.current=null}var Q=d("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:z,getOzPlayer:y,getVideoElementAPI:A});A=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({checkInDOM:e,createDebugAPI:function(b){var a=b.getVideoElementAPI;b=b.loggerToVPL;return C?C.createDebugAPI({engineExtrasAPI:Q,getConfig:function(){var a;return(a=(a=l.current)==null?void 0:a.experimentationConfig)!=null?a:null},getManifest:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestXmlStringResolved)!=null?a:null},getManifestUrl:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestUrl)!=null?a:null},getOzBufferingDetector:x,getOzPlayer:y,getVideoElementAPI:a,loggerToVPL:b}):null},createVideoPlayerError:d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError,debugLog:h,debugLogId:f,destroyEngineParts:function(a){N([].concat(a,["destroyEngineParts"])),O(),P()},engineExtrasAPI:Q,engineMetadata:{isAbrEnabled:!0,playerVersion:D,streamingFormat:"dash"},handleFatalError:g,handleVideoElementChanged:function(a,b){a!=null&&L(n.current,[].concat(b,["handleVideoElementMounted"]))},handleVideoInfoChange:I,initialProps:i,setExposedStateInReact:a});e=A.engine;var R=A.getCaptionsInfo,S=A.getVideoElement,T=A.getVideoLiveTrace,U=A.handleCaptionsInfoChange,V=A.handleFatalImplementationError,W=A.loggerToVPL,X=A.machine,Y=A.videoElementAPIRef;return e}g.createVideoPlayerOzImplementationEngine=a}),98);
__d("VideoPlayerOzImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerOzImplementationEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9450060145042784"}),null);
__d("VideoPlayerRelayFragmentRefetchQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},c={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},e=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:[{kind:"Variable",name:"VideoPlayerRelay_video$playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"VideoPlayerRelay_video$playerSuborigin",variableName:"playerSuborigin"}],fragment:b("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"),metadata:{},name:"VideoPlayerRelayFragmentRefetchQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VideoPlayerRelay_video.graphql",["VideoPlayerRelayFragmentRefetchQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:b("VideoPlayerRelayFragmentRefetchQuery.graphql"),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_podcast_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LatencySensitiveConfig",kind:"LinkedField",name:"latency_sensitive_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_latency_sensitivity",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LivePlaybackInstrumentationConfigParams",kind:"LinkedField",name:"live_playback_instrumentation_configs",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_client_triggered_trace_enabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seo_web_crawler_lookaside_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementationsParamsRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerBuilder_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{args:null,documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"InstreamVideoAdBreaksPlayer_video"}]},{args:null,kind:"FragmentSpread",name:"VideoPlayerVideoIsCastingCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerIMFFromVideoMetadataRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerUnsupportedBrowserMessageFallback.react",["ErrorMetadata","FBLogger","VideoPlayerFallbackCover.react","err","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect;b.useMemo;var k=b.useRef;function a(a,b){var e=d("react-compiler-runtime").c(11);bb0:{if(a!=null){var f;if(e[0]!==a||e[1]!==b){var g;f=c("err")("Cannot play video: Unsupported browser message from server: %s",a);f.name="VideoPlayerUnsupportedBrowserMessageFromServer";g=(g=f.metadata)!=null?g:new(c("ErrorMetadata"))();f.metadata=g;g.addEntry("COMET_VIDEO","VIDEO_ID",b);e[0]=a;e[1]=b;e[2]=f}else f=e[2];g=f;break bb0}g=null}var h=g,l=k(!1);e[3]!==h?(f=function(){if(h!=null&&!l.current){var a;l.current=!0;(a=c("FBLogger")("comet_video_player").catching(h)).warn.apply(a,[(a=h.messageFormat)!=null?a:""].concat((a=h.messageParams)!=null?a:[]))}},e[3]=h,e[4]=f):f=e[4];e[5]!==h||e[6]!==b?(g=[h,b],e[5]=h,e[6]=b,e[7]=g):g=e[7];j(f,g);if(a!=null){e[8]!==a||e[9]!==h?(b=i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:h,message:a}),e[8]=a,e[9]=h,e[10]=b):b=e[10];return b}return null}g.useVideoPlayerUnsupportedBrowserMessageFallback=a}),98);
__d("VideoPlayerXImplRelayWrapper.react",["VideoPlayerXImpl.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("VideoPlayerXImpl.react")}),98);
__d("XFBLatencySensitiveTypeUtils.facebook",["$InternalEnumUtils","LatencySensitiveType"],(function(a,b,c,d,e,f,g){a=d("$InternalEnumUtils").createToJSEnum(c("LatencySensitiveType"));b=d("$InternalEnumUtils").createFromJSEnum(c("LatencySensitiveType"));g.toJSEnum=a;g.fromJSEnum=b}),98);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","react-compiler-runtime","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("react-compiler-runtime").c(4);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoAutoplayGatingResult_video.graphql"),a);var e;c[0]!==a.autoplay_gating_result||c[1]!==a.can_autoplay||c[2]!==a.viewer_autoplay_setting?(e=d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay),c[0]=a.autoplay_gating_result,c[1]=a.can_autoplay,c[2]=a.viewer_autoplay_setting,c[3]=e):e=c[3];return e}g["default"]=a}),98);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","react","useGraphQLVideoDRMInfo_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useRef;function l(a){if(a!=null){a=m(a);return d("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(a)}return null}function m(a){a=JSON.parse(a)||{};var b=a.fairplay_cert,c=a.graph_api_video_license_uri,d=a.video_license_uri_map;a=a.widevine_cert;return{fairplay_cert:b,graph_api_video_license_uri:c,video_license_uri_map:d,widevine_cert:a}}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoDRMInfo_video.graphql"),a);var e=k(null),f=l(a.drm_info),g=(i||(i=c("useUnsafeRef_DEPRECATED")))(null);e.current!==a.drm_info&&(e.current=a.drm_info,g.current=f);return g.current}g["default"]=a}),98);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveCommunityInfo",kind:"LinkedField",name:"community_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"community_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoP2PSettings",["CometRelay","GraphQLVideoP2PSettings","recoverableViolation","useGraphQLVideoP2PSettings_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=null;if(a){var e,f,g,h,i;e={delay_p2p_until_play:(e=(e=a.config)==null?void 0:e.delay_p2p_until_play)!=null?e:!1,disable_hivejava_for_livevc:(e=(e=a.config)==null?void 0:e.disable_hivejava_for_livevc)!=null?e:!1};var j=a.ticket,k=a.community_info;f=(f=a.hive_initialization_options)==null?void 0:f.debug_level;g=(g=(g=a.hive_initialization_options)==null?void 0:g.hive_tech_order.map(function(a){var b=d("GraphQLVideoP2PSettings").hiveTechOrderOrNull(a);b==null&&a!=null&&c("recoverableViolation")("Invalid hive tech order: '"+a+"'","comet_video_player");return b}).filter(Boolean))!=null?g:[];h=(h=a.hive_initialization_options)==null?void 0:(h=h.hive_java)==null?void 0:h.min_version;i=((i=a.hive_initialization_options)==null?void 0:i.hive_java)?{minVersion:h}:null;h=a.hive_initialization_options?{HiveJava:i,debugLevel:f,hiveTechOrder:g}:null;f={communityId:(a=k==null?void 0:k.community_id)!=null?a:"unknowncustomer",communityName:(i=k==null?void 0:k.community_name)!=null?i:"Unknown Customer"};b={community_info:f,config:e,hive_initialization_options:h,ticket:j}}return b}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoP2PSettings_video.graphql"),a);var e=(i||(i=c("useUnsafeRef_DEPRECATED")))(null),f=i(null);a=j((a=a.p2p_settings)!=null?a:null);var g=JSON.stringify(a);if(e.current!==g){e.current=(e=g)!=null?e:null;f.current=(g=a)!=null?g:null}return f.current}g["default"]=a}),98);
__d("useVideoImplementationsParamsRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],b=[{}],c={alias:null,args:null,concreteType:"XFBVideoDeliveryFailureReason",kind:"LinkedField",name:"failure_reason",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_params",storageKey:null}],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementationsParamsRelayImpl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_nextgendash_availability",storageKey:null},{alias:"videoDeliveryLegacyFields",args:[{kind:"Literal",name:"negate",value:!0}],concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{alias:"dash_manifest_xml_string",args:a,kind:"ScalarField",name:"playlist",storageKey:'playlist(scrubbing_preference:"MPEG_DASH")'},{alias:"dash_manifest_url",args:a,kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:"browser_native_sd_url",args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"browser_native_hd_url",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'}],storageKey:"if_viewer_should_use_video_delivery_response(negate:true)"},{alias:"videoDeliveryResponseFragment",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{kind:"CatchField",field:{alias:"videoDeliveryResponseResult",args:[{kind:"Literal",name:"video_delivery_request",value:{dash_manifest_requests:b,dash_manifest_url_requests:b,hls_playlist_url_requests:b,progressive_url_requests:[{quality:"SD"},{quality:"HD"}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBDashManifestResponse",kind:"LinkedField",name:"dash_manifests",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_xml",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBDashManifestUrlResponse",kind:"LinkedField",name:"dash_manifest_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_url",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBProgressiveUrlResponse",kind:"LinkedField",name:"progressive_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"progressive_url",storageKey:null},c,{alias:null,args:null,concreteType:"XFBProgressiveUrlMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"quality",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBHlsPlaylistUrlResponse",kind:"LinkedField",name:"hls_playlist_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"hls_playlist_url",storageKey:null},c],storageKey:null}],storageKey:'video_delivery_response(video_delivery_request:{"dash_manifest_requests":[{}],"dash_manifest_url_requests":[{}],"hls_playlist_url_requests":[{}],"progressive_url_requests":[{"quality":"SD"},{"quality":"HD"}]})'},to:"RESULT"}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useVideoImplementationsParamsRelayImpl",["CometRelay","CometVideoPlayerNextgendashAvailability","getJSEnumSafe","react","react-compiler-runtime","useVideoImplementationsParamsRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a,e){var f,g,i,j,k,l,m,n=d("react-compiler-runtime").c(20);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoImplementationsParamsRelayImpl_video.graphql"),a);(f=a.spherical_video_fallback_urls)==null?void 0:f.hd;(f=a.spherical_video_fallback_urls)==null?void 0:f.sd;(f=a.videoDeliveryLegacyFields)==null?void 0:f.dash_manifest_xml_string;(f=a.videoDeliveryLegacyFields)==null?void 0:f.dash_manifest_url;(f=a.videoDeliveryLegacyFields)==null?void 0:f.browser_native_hd_url;(f=a.videoDeliveryLegacyFields)==null?void 0:f.browser_native_sd_url;f=(f=a.videoDeliveryLegacyFields)==null?void 0:f.browser_native_hd_url;g=(g=a.videoDeliveryLegacyFields)==null?void 0:g.browser_native_sd_url;i=(i=a.videoDeliveryLegacyFields)==null?void 0:i.dash_manifest_url;j=(j=a.videoDeliveryLegacyFields)==null?void 0:j.dash_manifest_xml_string;if(n[0]!==a.comet_video_player_nextgendash_availability){var o;o=(o=c("getJSEnumSafe")(c("CometVideoPlayerNextgendashAvailability"),a.comet_video_player_nextgendash_availability))!=null?o:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER";n[0]=a.comet_video_player_nextgendash_availability;n[1]=o}else o=n[1];k=(k=a.spherical_video_fallback_urls)==null?void 0:k.hd;l=(l=a.spherical_video_fallback_urls)==null?void 0:l.sd;m=(m=a.videoDeliveryResponseFragment)==null?void 0:m.videoDeliveryResponseResult;var p;n[2]!==e.dashManifestUrlOverride_DO_NOT_USE||n[3]!==e.minQualityPreferenceOverrideFromProductSurface||n[4]!==e.preferBrowserNativeImplementation||n[5]!==e.videoPlayerShakaConfig||n[6]!==f||n[7]!==g||n[8]!==i||n[9]!==j||n[10]!==o||n[11]!==k||n[12]!==l||n[13]!==m||n[14]!==a.audio_user_preferred_language||n[15]!==a.can_use_oz||n[16]!==a.id||n[17]!==a.is_spherical||n[18]!==a.min_quality_preference?(p={browserNativeHdUrl:f,browserNativeSdUrl:g,canUseOz:a.can_use_oz,dashManifestUrl:i,dashManifestUrlOverride_DO_NOT_USE:e.dashManifestUrlOverride_DO_NOT_USE,dashManifestXmlString:j,initialAudioUserPreferredLanguage:a.audio_user_preferred_language,isSpherical:a.is_spherical,minQualityPreference:a.min_quality_preference,minQualityPreferenceOverrideFromProductSurface:e.minQualityPreferenceOverrideFromProductSurface,nextgendashAvailability:o,preferBrowserNativeImplementation:e.preferBrowserNativeImplementation,sphericalVideoFallbackHdUrl:k,sphericalVideoFallbackSdUrl:l,videoDeliveryResponseResult:m,videoFBID:a.id,videoPlayerShakaConfig:e.videoPlayerShakaConfig},n[2]=e.dashManifestUrlOverride_DO_NOT_USE,n[3]=e.minQualityPreferenceOverrideFromProductSurface,n[4]=e.preferBrowserNativeImplementation,n[5]=e.videoPlayerShakaConfig,n[6]=f,n[7]=g,n[8]=i,n[9]=j,n[10]=o,n[11]=k,n[12]=l,n[13]=m,n[14]=a.audio_user_preferred_language,n[15]=a.can_use_oz,n[16]=a.id,n[17]=a.is_spherical,n[18]=a.min_quality_preference,n[19]=p):p=n[19];e=p;return e}g["default"]=a}),98);
__d("VideoPlayerShakaConfigContextProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.setContext=function(a,b){if(this.$1[a]!==b){var c;this.$1=babelHelpers["extends"]({},this.$1,(c={},c[a]=b,c))}};b.setAllContexts=function(a){this.$1=a};b.getAllContexts=function(){return this.$1};return a}();f["default"]=a}),66);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(a,b,c,d,e,f,g){var h={};a=function(){function a(a,b,d){this.$1=new(c("VideoPlayerShakaConfigContextProvider"))(),this.$2=b||null,this.$3=new(c("VideoPlayerContextSensitiveConfigResolver"))(d),this.$3.setContexts(a||{}),a&&this.$1.setAllContexts(a)}a.setGlobalOverrideConfig=function(a){h=a};var b=a.prototype;b.setContext=function(a,b){var c=this.$1.getAllContexts();this.$1.setContext(a,b);a=this.$1.getAllContexts();c!==a&&this.$3.setContexts(a)};b.setOverrideConfig=function(a){this.$2=a};b.getBool=function(a,b){a=this.$4(a,b);return typeof a==="boolean"?a:b};b.getNumber=function(a,b){a=this.$4(a,b);return typeof a==="number"?a:b};b.getString=function(a,b){a=this.$4(a,b);return typeof a==="string"?a:b};b.getAllContexts=function(){return this.$1.getAllContexts()};b.$4=function(a,b){if(!!h&&typeof h[a]===typeof b)return h[a];if(typeof this.$3.getValue(a)===typeof b)return this.$3.getValue(a);return!!this.$2&&typeof this.$2[a]===typeof b?this.$2[a]:null};return a}();g["default"]=a}),98);
__d("prepareVideoPlayerImplementations",["ErrorMetadata","VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerShakaConfig","cr:5646","cr:8921","cr:8922","emptyFunction","err","getErrorSafe","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=(e=b("cr:8922"))==null?void 0:e.makeNextgendashEngineData;function a(a){var e=a.browserNativeHdUrl,f=a.browserNativeSdUrl,g=a.canUseOz,j=a.dashManifestUrl,k=a.dashManifestUrlOverride_DO_NOT_USE,l=a.dashManifestXmlString,m=a.initialAudioUserPreferredLanguage,n=a.isBroadcast,o=a.isLiveStreaming,p=a.isSpherical,q=a.minQualityPreference,r=a.minQualityPreferenceOverrideFromProductSurface,s=a.nextgendashAvailability,t=a.preferBrowserNativeImplementation,u=a.sphericalVideoFallbackHdUrl,v=a.sphericalVideoFallbackSdUrl,w=a.videoDeliveryResponseResult,x=a.videoFBID;a=a.videoPlayerShakaConfig;var y=[],z=[],A=null,B=null,C=null,D=null,E=[],F=[],G=[],H=[],I=[];if(w!=null)if(w.ok!==!0){var J=c("err")("VideoDeliveryResponse API failed: %s",JSON.stringify(w.errors.map(function(a){try{JSON.stringify(a);return a}catch(b){return String(a)}})));J.name="VideoDeliveryResponseAPIFailed";E.push(J)}else{J=w.value;w=i(F,"dash_manifests","DashManifest",J.dash_manifests,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_xml!=null&&a.manifest_xml!==""?a:null})[0];var K=i(G,"dash_manifest_urls","DashManifestURL",J.dash_manifest_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_url!=null&&a.manifest_url!==""?a:null})[0],L=i(H,"progressive_urls","ProgressiveURLHD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="HD"},function(a){return a.progressive_url!=null?a:null})[0],M=i(H,"progressive_urls","ProgressiveURLSD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="SD"},function(a){return a.progressive_url!=null?a:null})[0];A=(w=w==null?void 0:w.manifest_xml)!=null?w:null;B=(w=K==null?void 0:K.manifest_url)!=null?w:null;C=(K=L==null?void 0:L.progressive_url)!=null?K:null;D=(w=M==null?void 0:M.progressive_url)!=null?w:null;if(C==null&&D==null&&c("gkx")("8034")){L=i(I,"hls_playlist_urls","HLSPlaylistURL",J.hls_playlist_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.hls_playlist_url!=null?a:null})[0];C=null;D=(K=L==null?void 0:L.hls_playlist_url)!=null?K:null}}else{A=(M=l)!=null?M:null;B=(w=j)!=null?w:null;C=(J=e)!=null?J:null;D=(L=f)!=null?L:null}if(p===!0){C=(K=u)!=null?K:C;D=(l=v)!=null?l:D}if(t!==!0){if(h&&b("cr:8921")&&(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null))){M=h({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerShakaConfig"))(),initialAudioUserPreferredLanguage:m,minQualityPreference:q,nextgendashAvailability:s});M instanceof Error?z.push(["VideoPlayerNextgendashImplementation",M]):y.push({Component:b("cr:8921"),data:M,typename:"VideoPlayerNextgendashImplementation"})}if(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null)){w=d("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerOzWWWConfig"))((j=a)!=null?j:new(c("VideoPlayerShakaConfig"))()),initialAudioUserPreferredLanguage:m,minQualityPreference:q});w instanceof Error?z.push(["VideoPlayerOzImplementation",w]):y.push({Component:b("cr:5646"),data:w,typename:"VideoPlayerOzImplementation"})}}else{e=c("err")("preferBrowserNativeImplementation="+String(t));e.name="VideoImplementationsPreferBrowserNative";h&&b("cr:8921")&&z.push(["VideoPlayerNextgendashImplementation",e]);z.push(["VideoPlayerOzImplementation",e])}if(E.length===0&&(H.length===0||C!=null||D!=null)){f=(J=r)!=null?J:q;L=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:C,hdSrcPreferred:c("gkx")("24369")||f==="HD"||f==="UHD",sdSrc:D});L instanceof Error?z.push(["VideoPlayerProgressiveImplementation",L]):y.push({Component:c("VideoPlayerProgressiveImplementationV2.react"),data:L,typename:"VideoPlayerProgressiveImplementation"})}u=y.length===0;K=[];K.push.apply(K,E);K.push.apply(K,F);K.push.apply(K,G);K.push.apply(K,H);K.push.apply(K,I);K.push.apply(K,z.map(function(a){var b,d=a[0];a=a[1];a=c("getErrorSafe")(a);d=d.replace(/^VideoPlayer/,"").replace(/(Implementation)|(Engine)$/,"")+"Engine";b=c("err").apply(void 0,["Cannot use "+d+" / "+((b=a.messageFormat)!=null?b:a.message)].concat(a.messageFormat!=null?(b=a.messageParams)!=null?b:[]:[]));b.name="VideoPlayerCannotUse"+d+"/"+a.name;return b}));v=null;if(u||c("gkx")("24370")&&K.length>0){l=new Map();for(s=0;s<K.length;++s){M=K[s];B=M.name+": "+((g=M.messageFormat)!=null?g:M.message);l.has(B)||l.set(B,M)}k=Array.from(l.values());A=[];a=[];j=[];for(m=0;m<k.length;++m){w=k[m];A.push(w.name);a.push((t=w.messageFormat)!=null?t:w.message);w.messageFormat!=null&&w.messageParams!=null&&j.push.apply(j,w.messageParams)}v=c("err").apply(void 0,[(u?p===!0?"Cannot play 360 video: ":"Cannot play video: ":p===!0?"Warning for 360 video: ":"Warning: ")+a.join(" ++ ")].concat(j));v.name=A.join("++");v.type=u?"fatal":"warn";v.project="comet_video_player";r=(e=v.metadata)!=null?e:new(c("ErrorMetadata"))();v.metadata=r;x!=null&&r.addEntry("COMET_VIDEO","VIDEO_ID",String(x));r.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({isBroadcast:n,isLiveStreaming:o,isSpherical:p}));if(u)throw v}return{implementations:y,warning:v}}function i(a,b,c,d,e,f){e=d.filter(e);var g=e.map(function(a){return a.failure_reason==null?f(a):null}).filter(Boolean);if(e.length===0)a.push(k(b,c,d));else if(g.length===0){e=e.filter(function(a){return a.failure_reason!=null});e.length===0?a.push(l(b,c,d)):a.push.apply(a,e.map(function(a){return a.failure_reason!=null?j(b,c,a.failure_reason,a.metadata):null}).filter(Boolean))}return g}function j(a,b,d,e){try{var f;f=(f=JSON.stringify(e))!=null?f:String(e)}catch(a){f=String(e)}e=c("err").apply(void 0,["VideoDeliveryResponse "+a+" failure for "+b+": "+d.type+"; metadata=%s"+(d.message_format!=null&&d.message_format!==""?"; "+d.message_format:""),f].concat(d.message_params));e.name="VideoDeliveryResponseFailureReason/"+a+"("+b+")/"+d.type;return e}function k(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no matching items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_matching";return d}function l(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no succeeded or failed items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_success_and_failure";return d}g["default"]=a}),98);
__d("useVideoPlayerImplementations",["FBLogger","gkx","prepareVideoPlayerImplementations","react","react-compiler-runtime","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useEffect;e.useMemo;function a(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){if(a){var b,d,e;b=(b=a.messageFormat)!=null?b:a.message;d=a.messageFormat!=null?(d=a.messageParams)!=null?d:[]:[];(e=c("FBLogger")("comet_video_player").catching(a)).warn.apply(e,[b].concat(d))}},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);i(e,f)}var j=c("gkx")("24370")?a:c("useEmptyFunction");function b(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=c("prepareVideoPlayerImplementations")(a),b[0]=a,b[1]=e):e=b[1];a=e;b=a;j(b.warning);return b}g["default"]=b}),98);
__d("useVideoImplementationsRelayImpl",["react","react-compiler-runtime","useVideoImplementationsParamsRelayImpl","useVideoPlayerImplementations"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useDebugValue;function a(a,b){var e=d("react-compiler-runtime").c(4);a=c("useVideoImplementationsParamsRelayImpl")(a,b);b=c("useVideoPlayerImplementations")(a);var f=b.implementations;b=b.warning;var g;e[0]!==f||e[1]!==a||e[2]!==b?(g={implementations:f,params:a,warning:b},e[0]=f,e[1]=a,e[2]=b,e[3]=g):g=e[3];i(g);return f}g["default"]=a}),98);
__d("useVideoImplementationsRelay",["useVideoImplementationsRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoImplementationsRelayImpl")}),98);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","react","react-compiler-runtime","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var c=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),a);var e;c[0]!==a.audio_availability||c[1]!==a.muted_segments?(e=d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:a.audio_availability,mutedSegmentsUnsanitized:a.muted_segments==null?[]:a.muted_segments.map(j)}),c[0]=a.audio_availability,c[1]=a.muted_segments,c[2]=e):e=c[2];a=e;return a}function j(a){return{muteEndTimeInSec:a.mute_end_time_in_sec,muteStartTimeInSec:a.mute_start_time_in_sec}}g["default"]=a}),98);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometRelay","react","react-compiler-runtime","useVideoPlayerAudioSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;var j=1;e=.5;var k=null,l=new Map([["default",j],["quiet",e]]);function a(a){var e,f=d("react-compiler-runtime").c(5);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioSettings_video.graphql"),a);e=(e=a.audio_settings)==null?void 0:e.video_volume_setting;var g="DEFAULT";bb0:switch(e){case"DEFAULT":case"QUIET":g=e;break bb0;default:}e=c("AudioSettingsVolumeSetting")[g];if(f[0]!==e){g=(g=l.get(e))!=null?g:j;f[0]=e;f[1]=g}else g=f[1];e=g;a=(g=a.audio_user_preferred_language)!=null?g:k;f[2]!==a||f[3]!==e?(g={audioUserPreferredLanguage:a,preferredVolumeSetting:e},f[2]=a,f[3]=e,f[4]=g):g=f[4];a=g;return a}g["default"]=a}),98);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_opacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_size",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerCaptionsSettings",["CometRelay","react-compiler-runtime","useVideoPlayerCaptionsSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i="DEFAULT",j="BLACK",k="WHITE",l="DEFAULT";function a(a){var c,e,f,g,m=d("react-compiler-runtime").c(8);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerCaptionsSettings_video.graphql"),a);c=(c=(c=a.captions_settings)==null?void 0:c.always_show_captions)!=null?c:!1;e=(e=(e=a.captions_settings)==null?void 0:e.captions_background_color)!=null?e:j;f=(f=(f=a.captions_settings)==null?void 0:f.captions_background_opacity)!=null?f:i;g=(g=(g=a.captions_settings)==null?void 0:g.captions_text_color)!=null?g:k;a=(a=(a=a.captions_settings)==null?void 0:a.captions_text_size)!=null?a:l;var n;m[0]!==e||m[1]!==f||m[2]!==g||m[3]!==a?(n={captionsBackgroundColor:e,captionsBackgroundOpacity:f,captionsTextColor:g,captionsTextSize:a},m[0]=e,m[1]=f,m[2]=g,m[3]=a,m[4]=n):n=m[4];m[5]!==c||m[6]!==n?(e={alwaysShowCaptions:c,captionDisplayStyle:n},m[5]=c,m[6]=n,m[7]=e):e=m[7];return e}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadata",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useDebugValue;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),c=a.isVideoBroadcast;a=a.specInlineJson;c=c===!0;var e;b[0]!==c||b[1]!==a?(e={imfExpectedFromEmsg:c,specInlineJson:a},b[0]=c,b[1]=a,b[2]=e):e=b[2];c=e;a=c;b[3]!==a?(e={useVideoPlayerIMFFromVideoMetadata:a},b[3]=a,b[4]=e):e=b[4];i(e);return a}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,concreteType:"VideoIMFData",kind:"LinkedField",name:"video_imf_data",plural:!1,selections:[{args:null,documentName:"useVideoPlayerIMFFromVideoMetadataRelay_video",fragmentName:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",fragmentPropName:"video_imf_data",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"spec_inline_json",storageKey:null}],type:"VideoIMFData",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay",["CometRelay","react-compiler-runtime","useVideoPlayerIMFFromVideoMetadata","useVideoPlayerIMFFromVideoMetadataRelay_video.graphql","useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=d("react-compiler-runtime").c(4);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql"),a);var f=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"),a.video_imf_data);f=f==null?void 0:f.spec_inline_json;var g;e[0]!==f||e[1]!==a.id||e[2]!==a.is_video_broadcast?(g={isVideoBroadcast:a.is_video_broadcast,specInlineJson:f,videoID:a.id},e[0]=f,e[1]=a.id,e[2]=a.is_video_broadcast,e[3]=g):g=e[3];return c("useVideoPlayerIMFFromVideoMetadata")(g)}g["default"]=a}),98);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","react-compiler-runtime","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c,e=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),a);c=(c=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_desired_latency_ms)!=null?c:0;a=(a=(a=a.broadcast_low_latency_config)==null?void 0:a.ll_latency_tolerance_ms)!=null?a:0;var f;e[0]!==c||e[1]!==a?(f={desiredLatencyMs:c,latencyToleranceMs:a},e[0]=c,e[1]=a,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaConfig",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useEffect,k=e.useState;function a(a,e){var f=d("react-compiler-runtime").c(17);e=e.adClientToken;var g=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerShakaConfig_video.graphql"),a),i=e!=null,m=g.is_spherical===!0,n=g.is_gaming_video===!0;e=c("useSelectedLatencySetting")((a=g.id)!=null?a:"null",g.selected_latency_setting);var o=e[0];f[0]!==i||f[1]!==n||f[2]!==m||f[3]!==o||f[4]!==g.fbls_tier||f[5]!==g.is_latency_menu_enabled||f[6]!==g.is_latency_sensitive_broadcast||f[7]!==g.is_live_streaming?(a=function(){var a;return new(c("VideoPlayerShakaConfig"))({connection_quality:d("VideoPlayerConnectionQuality").evaluate(l),content_category:n?"gaming":"general",fbls_tier:((a=g.fbls_tier)==null?void 0:a.startsWith("user"))?"user":"general",is_ad:i,is_latency_sensitive_broadcast:g.is_latency_sensitive_broadcast===!0,is_live:g.is_live_streaming===!0,is_spherical:m,latency_level:g.is_latency_menu_enabled===!0?o:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})},f[0]=i,f[1]=n,f[2]=m,f[3]=o,f[4]=g.fbls_tier,f[5]=g.is_latency_menu_enabled,f[6]=g.is_latency_sensitive_broadcast,f[7]=g.is_live_streaming,f[8]=a):a=f[8];e=k(a);var p=e[0];f[9]!==i||f[10]!==p?(a=function(){p.setContext("is_ad",i)},e=[p,i],f[9]=i,f[10]=p,f[11]=a,f[12]=e):(a=f[11],e=f[12]);j(a,e);f[13]!==m||f[14]!==p?(a=function(){p.setContext("is_spherical",m)},e=[p,m],f[13]=m,f[14]=p,f[15]=a,f[16]=e):(a=f[15],e=f[16]);j(a,e);return p}function l(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_video",selections:[{alias:"video_player_shaka_performance_logger_init2",args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerBuilder_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerBuilder_init",fragmentPropName:"init",kind:"ModuleImport"},{alias:null,args:null,kind:"ScalarField",name:"per_session_sampling_rate",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql","useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql");function a(a){var c=d("react-compiler-runtime").c(5);a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"),a);var e;c[0]!==a.video_player_shaka_performance_logger_init2?(e=a.video_player_shaka_performance_logger_init2?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init2):null,c[0]=a.video_player_shaka_performance_logger_init2,c[1]=e):e=c[1];e=e;a=(a=a.video_player_shaka_performance_logger_init2)==null?void 0:a.per_session_sampling_rate;if(e!=null&&a!=null){var f;c[2]!==e||c[3]!==a?(f=new e({perSessionSampleRate:a}),c[2]=e,c[3]=a,c[4]=f):f=c[4];return f}return null}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl",["CometRelay","react-compiler-runtime","useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql","useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql");function a(a){var c=d("react-compiler-runtime").c(3);a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"),a);var e;c[0]!==a.video_player_shaka_performance_logger_init||c[1]!==a.video_player_shaka_performance_logger_should_sample?(e=a.video_player_shaka_performance_logger_init?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init):null,e!=null&&a.video_player_shaka_performance_logger_should_sample===!0&&e.forceShouldSample(),c[0]=a.video_player_shaka_performance_logger_init,c[1]=a.video_player_shaka_performance_logger_should_sample,c[2]=e):e=c[2];return e}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["useVideoPlayerShakaPerformanceLoggerRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoPlayerShakaPerformanceLoggerRelayImpl")}),98);
__d("VideoStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({ENCODING:1,DELETED:2,ENCODED:3,UPLOADING:5,OK:6,TOO_LONG:7,ENCODE_FAILED:8,UNPUBLISHED:9,SOFT_DELETED:10,UNDISCOVERABLE:11,UPLOAD_FAILED:13,UPLOADED:14,ORIGINAL_VIDEO_DELETED:15});f["default"]=a}),66);
__d("evaluateVideoPlayerVideoStatusFallbackCover",["fbt","ErrorMetadata","VideoPlayerFallbackCover.react","VideoStatusType","err","getGraphQLEnumSafe","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.disableVideoStatusFallbackIf,d=a.overrideGkForVideoStatusFallback_EXPERIMENTAL,e=a.videoFBID;a=a.videoStatusTypeFromGraphQL;e=k({videoFBID:e,videoStatusTypeFromGraphQL:a});a=null;var f;if(d==null&&!c("gkx")("24384"))a=null,f="disabled_by_gk";else if(d===!1)a=null,f="disabled_by_gk_override";else if((b==null?void 0:b(e))===!0){a=null;f="disable_if:"+e.videoAvailabilityStatus+":"+((d=e.videoStatusTypeFromGraphQL)!=null?d:"null")}else{switch(e.videoAvailabilityStatus){case"unknown":a=null;break;case"ok":a=null;break;case"undiscoverable":a=null;break;case"unpublished":a=null;break;case"processing":b=c("gkx")("24385");a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:b?e.debugError:null,message:h._(/*BTDS*/"\u0110ang x\u1eed l\u00fd video n\u00e0y..."),showDebugWithoutError:b,showLearnMoreLink:!1});break;case"processing_failed":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"Kh\u00f4ng x\u1eed l\u00fd \u0111\u01b0\u1ee3c video n\u00e0y.")});break;case"deleted":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"Hi\u1ec7n kh\u00f4ng xem \u0111\u01b0\u1ee3c video n\u00e0y.")});break;default:e.videoAvailabilityStatus}f=(a==null?"not_needed_for_status:":"fallback_for_status:")+e.videoAvailabilityStatus+":"+String(e.videoStatusTypeFromGraphQL)}return{fallback:a,fallbackDebug:f,videoStatus:e}}function k(a){var b=a.videoFBID;a=a.videoStatusTypeFromGraphQL;var d=[c("getGraphQLEnumSafe")(c("VideoStatusType"),6)].includes(a)?"ok":[c("getGraphQLEnumSafe")(c("VideoStatusType"),9)].includes(a)?"unpublished":[c("getGraphQLEnumSafe")(c("VideoStatusType"),11)].includes(a)?"undiscoverable":[c("getGraphQLEnumSafe")(c("VideoStatusType"),5),c("getGraphQLEnumSafe")(c("VideoStatusType"),14),c("getGraphQLEnumSafe")(c("VideoStatusType"),1),c("getGraphQLEnumSafe")(c("VideoStatusType"),3)].includes(a)?"processing":[c("getGraphQLEnumSafe")(c("VideoStatusType"),13),c("getGraphQLEnumSafe")(c("VideoStatusType"),8),c("getGraphQLEnumSafe")(c("VideoStatusType"),7)].includes(a)?"processing_failed":[c("getGraphQLEnumSafe")(c("VideoStatusType"),10),c("getGraphQLEnumSafe")(c("VideoStatusType"),2)].includes(a)?"deleted":"unknown",e=d==="ok"||d==="unpublished"||d==="undiscoverable"||d==="processing_failed"||d==="deleted"||d==="unknown",f=null;if(d!=="ok"){var g;f=c("err")("Video is now %s due to video_status_type=%s",d,a);g=(g=f.metadata)!=null?g:new(c("ErrorMetadata"))();g.addEntry("COMET_VIDEO","VIDEO_ID",(b=b)!=null?b:"");f.metadata=g;f.name="VideoPlayerVideoStatusInfo"}b={debugError:f,isTerminalStatus:e,videoAvailabilityStatus:d,videoStatusTypeFromGraphQL:a};return b}g["default"]=a}),226);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover",["CometRelay","evaluateVideoPlayerVideoStatusFallbackCover","react","react-compiler-runtime","useInterval","useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDebugValue;function a(a,e,f,g){var i=d("react-compiler-runtime").c(5);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"),a);var k;i[0]!==f||i[1]!==g||i[2]!==a.id||i[3]!==a.video_status_type?(k=c("evaluateVideoPlayerVideoStatusFallbackCover")({disableVideoStatusFallbackIf:f,overrideGkForVideoStatusFallback_EXPERIMENTAL:g,videoFBID:a.id,videoStatusTypeFromGraphQL:a.video_status_type}),i[0]=f,i[1]=g,i[2]=a.id,i[3]=a.video_status_type,i[4]=k):k=i[4];f=k;c("useInterval")(e,f.videoStatus.isTerminalStatus||f.fallback==null?0:1e4);j(f);return f}g["default"]=a}),98);
__d("VideoPlayerRelay.react",["CastingStateHooks","CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","ErrorMetadata","FBLogger","InstreamVideoAdBreaksPlayer.react","JSResourceForInteraction","VideoPlayerErrorBoundary.react","VideoPlayerRelay_video.graphql","VideoPlayerUnsupportedBrowserMessageFallback.react","VideoPlayerXImplRelayWrapper.react","XFBLatencySensitiveTypeUtils.facebook","computeAspectRatio","cr:759","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","lazyLoadComponent","normalizeVideoPlayerLoopCount","react","react-compiler-runtime","requireDeferredForDisplay","useEmptyFunction","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useVideoImplementationsRelay","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerAvailableCaptionsLocalesFromRelay","useVideoPlayerCaptionsSettings","useVideoPlayerIMFFromVideoMetadataRelay","useVideoPlayerLiveLatencyKnobSettings","useVideoPlayerShakaConfig","useVideoPlayerShakaPerformanceLoggerBuilder","useVideoPlayerShakaPerformanceLoggerRelay","useVideoPlayerVideoStatusRelayWithFallbackCover"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useEffect,l=e.useRef,m=e.useTransition,n=(f=b("cr:759"))!=null?f:c("useEmptyFunction"),o=c("gkx")("24325"),p=c("gkx")("24326"),q=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react").__setRef("VideoPlayerRelay.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("VideoPlayerVideoIsCastingCover.react").__setRef("VideoPlayerRelay.react"));function s(a){var e=d("react-compiler-runtime").c(13),f,g;e[0]!==a?(g=a.video,f=babelHelpers.objectWithoutPropertiesLoose(a,["video"]),e[0]=a,e[1]=f,e[2]=g):(f=e[1],g=e[2]);a=d("CometRelay").useRefetchableFragment(h!==void 0?h:h=b("VideoPlayerRelay_video.graphql"),g);var i=a[0],n=a[1];g=m();var o=g[1];e[3]!==n?(a=function(){o(function(){n({},{fetchPolicy:"network-only"})})},e[3]=n,e[4]=a):a=e[4];g=a;a=c("useVideoPlayerVideoStatusRelayWithFallbackCover")(i,g,f.disableVideoStatusFallbackIf,f.overrideGkForVideoStatusFallback_EXPERIMENTAL);var p=a.fallback,q=a.fallbackDebug,r=a.videoStatus,s=l(null);e[5]!==q||e[6]!==i||e[7]!==r||e[8]!==p?(g=function(){var a=r,b=s.current;if(p!=null&&(a.videoAvailabilityStatus!==(b==null?void 0:b.videoAvailabilityStatus)||a.videoStatusTypeFromGraphQL!==(b==null?void 0:b.videoStatusTypeFromGraphQL))){s.current=r;c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",(a=i.id)!=null?a:"").warn("VideoPlayerRelay rendered the video status fallback: %s",q)}},e[5]=q,e[6]=i,e[7]=r,e[8]=p,e[9]=g):g=e[9];k(g,void 0);if(p!=null)return p;e[10]!==f||e[11]!==i?(a=j.jsx(t,babelHelpers["extends"]({},f,{video:i})),e[10]=f,e[11]=i,e[12]=a):a=e[12];return a}function t(a){var b,e=d("react-compiler-runtime").c(100),f=a.accessToken,g=a.adClientToken,h=a.audioOnly,i=a.autoplayGatingResult,k=a.bufferEndLimit,l=a.bypassUseCometSizeError,m=a.canAutoplay,s=a.children,t=a.disableLoadingIndicator,u=a.externalLogID,v=a.externalLogType,w=a.forceProgressive_EXPERIMENTAL,x=a.graphQLVideoDRMInfo,y=a.initialForceHD,z=a.initialTracePolicy,A=a.loadSequence,B=a.loggingConfig,C=a.loggingToSNAPLAdditionalData,D=a.loggingToVPLAdditionalData,E=a.loopCount,F=a.manifestURL_DO_NOT_USE,G=a.playerFormat,H=a.playerOriginOverride,I=a.portalingEnabled,ba=a.portalingFromVideoID,ca=a.portalingPlaceMetaData,da=a.portalingRenderPlaceholder,ea=a.poster,fa=a.productAttribution,ga=a.renderVideoPixelsFit,J=a.seoWebCrawlerLookasideUrl,ha=a.seoWebCrawlerVideoTracks,ia=a.source_VPL_LOGGING_HACK,ja=a.startTimestamp,K=a.subOrigin,L=a.video,M=a.volumeSetting;a=a.wrapVideoPixels_EXPERIMENTAL;t=t===void 0?!1:t;w=w===void 0?!1:w;y=y===void 0?!1:y;G=G===void 0?"inline":G;var N=L.id;if(N==null||N===""){var O=c("err")("Cannot play video: Invalid video ID: %s",N===""?"an empty string":String(N));O.name="VideoPlayerInvalidVideoID";O.project="comet_video_player";throw O}O=L.dash_prefetch_experimental;var P=c("useVideoPlayerAvailableCaptionsLocalesFromRelay")(L),ka=(P==null?void 0:P.find(aa))!=null;if(e[0]!==((b=L.latency_sensitive_config)==null?void 0:b.broadcast_latency_sensitivity)){var Q;b=d("XFBLatencySensitiveTypeUtils.facebook").toJSEnum((b=L.latency_sensitive_config)==null?void 0:b.broadcast_latency_sensitivity);e[0]=(Q=L.latency_sensitive_config)==null?void 0:Q.broadcast_latency_sensitivity;e[1]=b}else b=e[1];Q=b;e[2]!==g?(b={adClientToken:g},e[2]=g,e[3]=b):b=e[3];b=c("useVideoPlayerShakaConfig")(L,b);var la=n(N),ma=c("useGraphQLVideoP2PSettings")(L),R=c("useGraphQLVideoDRMInfo")(L);R=(x=x)!=null?x:R;x=!!(R&&R.fairplayCert!==null);w=w===!0||x||o&&!!L.is_live_streaming||p&&typeof MediaSource==="undefined";x=y?"HD":null;e[4]!==F||e[5]!==w||e[6]!==x||e[7]!==b?(y={dashManifestUrlOverride_DO_NOT_USE:F,minQualityPreferenceOverrideFromProductSurface:x,preferBrowserNativeImplementation:w,videoPlayerShakaConfig:b},e[4]=F,e[5]=w,e[6]=x,e[7]=b,e[8]=y):y=e[8];F=c("useVideoImplementationsRelay")(L,y);w=c("useVideoPlayerCaptionsSettings")(L);x=c("useVideoPlayerAudioSettings")(L);b=c("useVideoPlayerLiveLatencyKnobSettings")(L);y=b.desiredLatencyMs;b=b.latencyToleranceMs;var na=c("useVideoPlayerAudioAvailabilityInfoRelay")(L),S=c("useGraphQLVideoAutoplayGatingResult")(L),T;e[9]!==i||e[10]!==m||e[11]!==S?(T=c("getVideoPlayerAutoplayProps")(S,m,i),e[9]=i,e[10]=m,e[11]=S,e[12]=T):T=e[12];i=T;m=c("useVideoPlayerShakaPerformanceLoggerRelay")(L);S=c("useVideoPlayerShakaPerformanceLoggerBuilder")(L);T=c("useVideoPlayerIMFFromVideoMetadataRelay")(L);var U;e[13]!==G||e[14]!==K||e[15]!==L?(U=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(c("InstreamVideoAdBreaksPlayer.react"),{playerFormat:G,subOrigin:K,video:L})}),e[13]=G,e[14]=K,e[15]=L,e[16]=U):U=e[16];U=U;var V=d("CastingStateHooks").useCastingVideoID(),W=d("VideoPlayerUnsupportedBrowserMessageFallback.react").useVideoPlayerUnsupportedBrowserMessageFallback(L.unsupported_browser_message,N);if(W!=null)return W;W=L.permalink_url;var X=L.spherical_video_renderer,Y;e[17]!==G||e[18]!==X||e[19]!==K||e[20]!==W?(Y=X?j.jsx(d("CometRelay").MatchContainer,{match:X,props:{playerFormat:G,sphericalVideoRenderer:X,subOrigin:K,videoTahoeUrl:W}}):null,e[17]=G,e[18]=X,e[19]=K,e[20]=W,e[21]=Y):Y=e[21];X=Y;W=L.is_spherical;Y=L.is_spherical_enabled;var Z=L.permalink_url;if(W===!0&&Y!==!0){if(Z==null||Z===""){W=c("err")("Cannot play video: Empty permalink URL for a spherical video");W.name="VideoPlayerSphericalEmptyPermalinkURL";W.project="comet_video_player";Y=(Y=W.metadata)!=null?Y:new(c("ErrorMetadata"))();Y.addEntry("COMET_VIDEO","VIDEO_ID",N);W.metadata=Y;throw W}e[22]!==Z?(Y=j.jsx(q,{videoTahoeUrl:Z}),e[22]=Z,e[23]=Y):Y=e[23];return Y}if(V!=null&&V===N){e[24]!==L?(W=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(r,{video:L})}),e[24]=L,e[25]=W):W=e[25];return W}V=(Y=(Z=L.live_playback_instrumentation_configs)==null?void 0:Z.is_client_triggered_trace_enabled)!=null?Y:!1;e[26]!==E||e[27]!==L.is_looping||e[28]!==L.loop_count?(W=c("normalizeVideoPlayerLoopCount")(E,L.is_looping,L.loop_count),e[26]=E,e[27]=L.is_looping,e[28]=L.loop_count,e[29]=W):W=e[29];Z=W;e[30]!==L.height||e[31]!==L.width?(Y=c("computeAspectRatio")(L.width,L.height),e[30]=L.height,e[31]=L.width,e[32]=Y):Y=e[32];E=Y;W=c("gkx")("23009")?L.animated_image_caption:void 0;Y=L.is_podcast_video===!0||h;h=L.pmv_metadata!=null;J=(J=J)!=null?J:L.seo_web_crawler_lookaside_url;P=((P=P==null?void 0:P.length)!=null?P:0)>0;M=M!==void 0?M:x.preferredVolumeSetting;var $;e[33]!==m||e[34]!==f||e[35]!==g||e[36]!==ka||e[37]!==na||e[38]!==x.audioUserPreferredLanguage||e[39]!==Q||e[40]!==k||e[41]!==l||e[42]!==w.alwaysShowCaptions||e[43]!==w.captionDisplayStyle||e[44]!==s||e[45]!==y||e[46]!==t||e[47]!==la||e[48]!==u||e[49]!==v||e[50]!==R||e[51]!==ma||e[52]!==F||e[53]!==O||e[54]!==z||e[55]!==U||e[56]!==V||e[57]!==b||e[58]!==A||e[59]!==B||e[60]!==C||e[61]!==D||e[62]!==Z||e[63]!==G||e[64]!==H||e[65]!==I||e[66]!==ba||e[67]!==ca||e[68]!==da||e[69]!==ea||e[70]!==fa||e[71]!==ga||e[72]!==ha||e[73]!==ia||e[74]!==ja||e[75]!==K||e[76]!==W||e[77]!==Y||e[78]!==h||e[79]!==J||e[80]!==P||e[81]!==M||e[82]!==L.broadcast_id||e[83]!==L.broadcast_status||e[84]!==L.broadcaster_origin||e[85]!==L.captions_url||e[86]!==L.is_live_streaming||e[87]!==L.is_live_trace_enabled||e[88]!==L.is_ncsr||e[89]!==L.is_video_broadcast||e[90]!==N||e[91]!==E||e[92]!==i.autoplayGatingResult||e[93]!==i.autoplaySetting||e[94]!==i.canAutoplay||e[95]!==T||e[96]!==S||e[97]!==X||e[98]!==a?($=j.jsx(c("VideoPlayerXImplRelayWrapper.react"),{VideoPlayerShakaPerformanceLoggerClass:m,accessToken:f,adClientToken:g,alt:W,alwaysShowCaptions:w.alwaysShowCaptions,areCaptionsAutogenerated:ka,audioAvailabilityInfo:na,audioOnly:Y,autoplayGatingResult:i.autoplayGatingResult,autoplaySetting:i.autoplaySetting,broadcastId:L.broadcast_id,broadcastLatencySensitivity:Q,broadcastStatus:L.broadcast_status,broadcasterOrigin:L.broadcaster_origin,bufferEndLimit:k,bypassUseCometSizeError:l,canAutoplay:i.canAutoplay,captionDisplayStyle:w.captionDisplayStyle,children:s,desiredLatencyMs:y,disableLoadingIndicator:t,expiredVideoUrlRefreshHandler:la,externalLogID:u,externalLogType:v,graphQLVideoDRMInfo:R,graphQLVideoP2PSettings:ma,implementations:F,initialRepresentationIds:O,initialTracePolicy:z,instreamVideoAdBreaksPlayer:U,isClientTriggeredTraceEnabled:V,isLiveStreaming:L.is_live_streaming,isLiveTraceEnabled:L.is_live_trace_enabled,isNCSR:L.is_ncsr,isPremiumMusicVideo:h,isVideoBroadcast:L.is_video_broadcast,latencyToleranceMs:b,loadSequence:A,loggingConfig:B,loggingToSNAPLAdditionalData:C,loggingToVPLAdditionalData:D,loopCount:Z,playerFormat:G,playerOriginOverride:H,portalingEnabled:I,portalingFromVideoID:ba,portalingPlaceMetaData:ca,portalingRenderPlaceholder:da,poster:ea,productAttribution:fa,renderVideoPixelsFit:ga,seoWebCrawlerLookasideUrl:J,seoWebCrawlerVideoTracks:ha,sideLoadCaptionsExpected:P,sideLoadCaptionsUrl:L.captions_url,source_VPL_LOGGING_HACK:ia,startTimestamp:ja,subOrigin:K,userPreferenceLang:x.audioUserPreferredLanguage,videoFBID:N,videoPixelsAspectRatio:E,videoPlayerIMFFromVideoMetadata:T,videoPlayerShakaPerformanceLoggerBuilder:S,videoPlayerSpherical:X,volumeSetting:M,wrapVideoPixels_EXPERIMENTAL:a},N),e[33]=m,e[34]=f,e[35]=g,e[36]=ka,e[37]=na,e[38]=x.audioUserPreferredLanguage,e[39]=Q,e[40]=k,e[41]=l,e[42]=w.alwaysShowCaptions,e[43]=w.captionDisplayStyle,e[44]=s,e[45]=y,e[46]=t,e[47]=la,e[48]=u,e[49]=v,e[50]=R,e[51]=ma,e[52]=F,e[53]=O,e[54]=z,e[55]=U,e[56]=V,e[57]=b,e[58]=A,e[59]=B,e[60]=C,e[61]=D,e[62]=Z,e[63]=G,e[64]=H,e[65]=I,e[66]=ba,e[67]=ca,e[68]=da,e[69]=ea,e[70]=fa,e[71]=ga,e[72]=ha,e[73]=ia,e[74]=ja,e[75]=K,e[76]=W,e[77]=Y,e[78]=h,e[79]=J,e[80]=P,e[81]=M,e[82]=L.broadcast_id,e[83]=L.broadcast_status,e[84]=L.broadcaster_origin,e[85]=L.captions_url,e[86]=L.is_live_streaming,e[87]=L.is_live_trace_enabled,e[88]=L.is_ncsr,e[89]=L.is_video_broadcast,e[90]=N,e[91]=E,e[92]=i.autoplayGatingResult,e[93]=i.autoplaySetting,e[94]=i.canAutoplay,e[95]=T,e[96]=S,e[97]=X,e[98]=a,e[99]=$):$=e[99];return $}function aa(a){return a.localizedCreationMethod!=null}function a(a){var b=d("react-compiler-runtime").c(9),e,f,g;b[0]!==a?(g=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn,e=a.errorBoundaryFallback,f=babelHelpers.objectWithoutPropertiesLoose(a,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=g===void 0?!1:g;b[4]!==f?(g=j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:13,children:j.jsx(s,babelHelpers["extends"]({},f))}),b[4]=f,b[5]=g):g=b[5];f=g;if(a)return f;a=(g=e)!=null?g:c("defaultErrorBoundaryFallback");b[6]!==f||b[7]!==a?(e=j.jsx(c("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:a,children:f}),b[6]=f,b[7]=a,b[8]=e):e=b[8];return e}g["default"]=a}),98);
__d("useInstreamAdsStoryPlaybackControl",["InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(a){var b=a.freezeTokenRef,c=a.organicController,e=a.previousPlaceDescription,f=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),g=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),h=(i||(i=d("VideoPlayerHooks"))).useEnded(),l=i.useController(),m=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext();j(function(){switch(f){case"START":c.pause("commercial_break");k(b,c);break;case"START_AD":var a=c.getCurrentState(),d=a.muted;a=a.volume;l.setMuted(d,"commercial_break");l.setVolume(a);c.pause("commercial_break");k(b,c);break;case"PLAY_NI_VIDEO":c.pause("commercial_break");d=c.getCurrentState();a=d.muted;d=d.volume;l.setMuted(a,"commercial_break");l.setVolume(d);k(b,c);break;case"PLAY_LONGER_AD":c.pause("commercial_break");a=c.getCurrentState();d=a.muted;a=a.volume;l.setMuted(d,"commercial_break");l.setVolume(a);k(b,c);break}switch(e){case"tahoe":k(b,c,function(){c.setMuted(!0,"tahoe_transition_phase_initiated")});l.setMuted(!0,"tahoe_transition_phase_initiated");return;case"watch_and_scroll":k(b,c,function(){c.setMuted(!0,"watch_and_scroll_transition_phase_initiated")});l.setMuted(!0,"watch_and_scroll_transition_phase_initiated");return}},[f,c,l,b,e]);j(function(){if(h){var a;((a=m==null?void 0:m.isAdPod)!=null?a:!1)&&(m==null?void 0:m.adPodIndex)===0?(g.setExtraFields(Object.assign(m||{},{adPodIndex:1})),g.setState("START")):g.setState("END");g.setExtraFields(Object.assign(m||{},{adPlaytime:0,watchTillEnd:h}))}},[h,m,g]);j(function(){var a=function(){l.pause("user_initiated")},b=function(){g.setState("END")};g.setHideAdBehavior({onClose:b,onOpen:a})},[l,g])}function k(a,b,c){if(c)a.current&&(b.unfreeze(a.current),a.current=null),c(),k(a,b);else{a.current=(c=a.current)!=null?c:b.freeze()}}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("core-util-is-1.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){function a(a){return Array.isArray?Array.isArray(a):p(a)==="[object Array]"}g.isArray=a;function b(a){return typeof a==="boolean"}g.isBoolean=b;function c(a){return a===null}g.isNull=c;function d(a){return a==null}g.isNullOrUndefined=d;function e(a){return typeof a==="number"}g.isNumber=e;function f(a){return typeof a==="string"}g.isString=f;function h(a){return typeof a==="symbol"}g.isSymbol=h;function i(a){return a===void 0}g.isUndefined=i;function j(a){return p(a)==="[object RegExp]"}g.isRegExp=j;function k(a){return typeof a==="object"&&a!==null}g.isObject=k;function l(a){return p(a)==="[object Date]"}g.isDate=l;function m(a){return p(a)==="[object Error]"||a instanceof Error}g.isError=m;function n(a){return typeof a==="function"}g.isFunction=n;function o(a){return a===null||typeof a==="boolean"||typeof a==="number"||typeof a==="string"||typeof a==="symbol"||typeof a==="undefined"}g.isPrimitive=o;g.isBuffer=Buffer.isBuffer;function p(a){return Object.prototype.toString.call(a)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("immediate-3.0.6",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c};function h(){var b=a.MutationObserver||a.WebKitMutationObserver,c;if(process.browser)if(b){var d=0;b=new b(j);var e=a.document.createTextNode("");b.observe(e,{characterData:!0});c=function(){e.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel!=="undefined"){var f=new a.MessageChannel();f.port1.onmessage=j;c=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){j(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null};a.document.documentElement.appendChild(b)}:c=function(){setTimeout(j,0)};else c=function(){process.nextTick(j)};var h,i=[];function j(){h=!0;var a,b,c=i.length;while(c){b=i;i=[];a=-1;while(++a<c)b[a]();c=i.length}h=!1}g.exports=k;function k(a){i.push(a)===1&&!h&&c()}}var i=!1;function j(){i||(i=!0,h());return g.exports}function b(a){switch(a){case void 0:return j()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/Hnt8PzozZpk/
 */
__d("inherits-2.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){typeof Object.create==="function"?g.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:g.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c();a.prototype.constructor=a}}var i=!1;function j(){i||(i=!0,h());return g.exports}c={};var k={exports:c};function l(){try{var a={};if(typeof a.inherits!=="function")throw"";k.exports=a.inherits}catch(a){k.exports=j()}}var m=!1;function n(){m||(m=!0,l());return k.exports}function a(a){switch(a){case void 0:return n()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("isarray-1.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={}.toString;g.exports=Array.isArray||function(b){return a.call(b)=="[object Array]"}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("lie-3.3.0",["immediate-3.0.6"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("immediate-3.0.6"));d={};var h={exports:d};function i(){var a=g();function b(){}var c={},d=["REJECTED"],e=["FULFILLED"],f=["PENDING"];if(!process.browser)var i=["UNHANDLED"];h.exports=j;function j(a){if(typeof a!=="function")throw new TypeError("resolver must be a function");this.state=f;this.queue=[];this.outcome=void 0;process.browser||(this.handled=i);a!==b&&n(this,a)}j.prototype["finally"]=function(c){if(typeof c!=="function")return this;var d=this.constructor;return this.then(a,b);function a(a){function b(){return a}return d.resolve(c()).then(b)}function b(a){function b(){throw a}return d.resolve(c()).then(b)}};j.prototype["catch"]=function(a){return this.then(null,a)};j.prototype.then=function(a,c){if(typeof a!=="function"&&this.state===e||typeof c!=="function"&&this.state===d)return this;var g=new this.constructor(b);process.browser||this.handled===i&&(this.handled=null);if(this.state!==f){var h=this.state===e?a:c;l(g,h,this.outcome)}else this.queue.push(new k(g,a,c));return g};function k(a,b,c){this.promise=a,typeof b==="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof c==="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(a){c.resolve(this.promise,a)};k.prototype.otherCallFulfilled=function(a){l(this.promise,this.onFulfilled,a)};k.prototype.callRejected=function(a){c.reject(this.promise,a)};k.prototype.otherCallRejected=function(a){l(this.promise,this.onRejected,a)};function l(b,d,e){a(function(){var a;try{a=d(e)}catch(a){return c.reject(b,a)}a===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,a)})}c.resolve=function(a,b){var d=o(m,b);if(d.status==="error")return c.reject(a,d.value);d=d.value;if(d)n(a,d);else{a.state=e;a.outcome=b;d=-1;var f=a.queue.length;while(++d<f)a.queue[d].callFulfilled(b)}return a};c.reject=function(b,c){b.state=d;b.outcome=c;process.browser||b.handled===i&&a(function(){b.handled===i&&process.emit("unhandledRejection",c,b)});var e=-1,f=b.queue.length;while(++e<f)b.queue[e].callRejected(c);return b};function m(a){var b=a&&a.then;if(a&&(typeof a==="object"||typeof a==="function")&&typeof b==="function")return function(){b.apply(a,arguments)}}function n(a,b){var d=!1;function e(b){if(d)return;d=!0;c.reject(a,b)}function f(b){if(d)return;d=!0;c.resolve(a,b)}function g(){b(f,e)}g=o(g);g.status==="error"&&e(g.value)}function o(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}j.resolve=p;function p(a){return a instanceof this?a:c.resolve(new this(b),a)}j.reject=q;function q(a){var d=new this(b);return c.reject(d,a)}j.all=r;function r(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=new Array(e),h=0,i=-1,j=new this(b);while(++i<e)k(a[i],i);return j;function k(b,a){d.resolve(b).then(i,function(a){f||(f=!0,c.reject(j,a))});function i(b){g[a]=b,++h===e&&!f&&(f=!0,c.resolve(j,g))}}}j.race=s;function s(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=-1,h=new this(b);while(++g<e)i(a[g]);return h;function i(a){d.resolve(a).then(function(a){f||(f=!0,c.resolve(h,a))},function(a){f||(f=!0,c.reject(h,a))})}}}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("pako-1.0.8",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.assign=function(a){var c=Array.prototype.slice.call(arguments,1);while(c.length){var d=c.shift();if(!d)continue;if(typeof d!=="object")throw new TypeError(d+"must be non-object");for(var e in d)b(d,e)&&(a[e]=d[e])}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray){a.set(b.subarray(c,c+d),e);return}for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f;d=0;for(b=0,c=a.length;b<c;b++)d+=a[b].length;d=new Uint8Array(d);e=0;for(b=0,c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},d={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,c)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,d))};g.setTyped(a)}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=4,c=0,d=1,e=2;function f(a){var b=a.length;while(--b>=0)a[b]=0}var g=0,h=1,i=2,j=3,m=258,n=29,o=256,p=o+1+n,q=30,r=19,aa=2*p+1,s=15,t=16,u=7,v=256,w=16,x=17,y=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ca=512,C=new Array((p+2)*2);f(C);var da=new Array(q*2);f(da);var D=new Array(ca);f(D);var ea=new Array(m-j+1);f(ea);var fa=new Array(n);f(fa);var E=new Array(q);f(E);function ga(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}var ha,F,G;function H(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function ia(a){return a<256?D[a]:D[256+(a>>>7)]}function ja(a,b){a.pending_buf[a.pending++]=b&255,a.pending_buf[a.pending++]=b>>>8&255}function I(a,b,c){a.bi_valid>t-c?(a.bi_buf|=b<<a.bi_valid&65535,ja(a,a.bi_buf),a.bi_buf=b>>t-a.bi_valid,a.bi_valid+=c-t):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function J(a,b,c){I(a,c[b*2],c[b*2+1])}function ka(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(--b>0);return c>>>1}function la(a){a.bi_valid===16?(ja(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function ma(a,b){var c=b.dyn_tree,d=b.max_code,e=b.stat_desc.static_tree,f=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,h=b.stat_desc.extra_base;b=b.stat_desc.max_length;var i,j,k,l,m,n=0;for(k=0;k<=s;k++)a.bl_count[k]=0;c[a.heap[a.heap_max]*2+1]=0;for(i=a.heap_max+1;i<aa;i++){j=a.heap[i];k=c[c[j*2+1]*2+1]+1;k>b&&(k=b,n++);c[j*2+1]=k;if(j>d)continue;a.bl_count[k]++;l=0;j>=h&&(l=g[j-h]);m=c[j*2];a.opt_len+=m*(k+l);f&&(a.static_len+=m*(e[j*2+1]+l))}if(n===0)return;do{k=b-1;while(a.bl_count[k]===0)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[b]--;n-=2}while(n>0);for(k=b;k!==0;k--){j=a.bl_count[k];while(j!==0){m=a.heap[--i];if(m>d)continue;c[m*2+1]!==k&&(a.opt_len+=(k-c[m*2+1])*c[m*2],c[m*2+1]=k);j--}}}function na(a,b,c){var d=new Array(s+1),e=0,f;for(f=1;f<=s;f++)d[f]=e=e+c[f-1]<<1;for(f=0;f<=b;f++){c=a[f*2+1];if(c===0)continue;a[f*2]=ka(d[c]++,c)}}function K(){var a,b,c,d=new Array(s+1);b=0;for(c=0;c<n-1;c++){fa[c]=b;for(a=0;a<1<<z[c];a++)ea[b++]=c}ea[b-1]=c;b=0;for(c=0;c<16;c++){E[c]=b;for(a=0;a<1<<A[c];a++)D[b++]=c}b>>=7;for(;c<q;c++){E[c]=b<<7;for(a=0;a<1<<A[c]-7;a++)D[256+b++]=c}for(c=0;c<=s;c++)d[c]=0;a=0;while(a<=143)C[a*2+1]=8,a++,d[8]++;while(a<=255)C[a*2+1]=9,a++,d[9]++;while(a<=279)C[a*2+1]=7,a++,d[7]++;while(a<=287)C[a*2+1]=8,a++,d[8]++;na(C,p+1,d);for(a=0;a<q;a++)da[a*2+1]=5,da[a*2]=ka(a,5);ha=new ga(C,z,o+1,p,s);F=new ga(da,A,0,q,s);G=new ga(new Array(0),B,0,r,u)}function oa(a){var b;for(b=0;b<p;b++)a.dyn_ltree[b*2]=0;for(b=0;b<q;b++)a.dyn_dtree[b*2]=0;for(b=0;b<r;b++)a.bl_tree[b*2]=0;a.dyn_ltree[v*2]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function L(a){a.bi_valid>8?ja(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function pa(b,c,d,e){L(b),e&&(ja(b,d),ja(b,~d)),a.arraySet(b.pending_buf,b.window,c,d,b.pending),b.pending+=d}function qa(a,b,c,d){var e=b*2,f=c*2;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function M(a,b,c){var d=a.heap[c],e=c<<1;while(e<=a.heap_len){e<a.heap_len&&qa(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(qa(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ra(a,b,c){var d,e,f=0,g,h;if(a.last_lit!==0)do d=a.pending_buf[a.d_buf+f*2]<<8|a.pending_buf[a.d_buf+f*2+1],e=a.pending_buf[a.l_buf+f],f++,d===0?J(a,e,b):(g=ea[e],J(a,g+o+1,b),h=z[g],h!==0&&(e-=fa[g],I(a,e,h)),d--,g=ia(d),J(a,g,c),h=A[g],h!==0&&(d-=E[g],I(a,d,h)));while(f<a.last_lit);J(a,v,b)}function N(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,i;a.heap_len=0;a.heap_max=aa;for(g=0;g<f;g++)c[g*2]!==0?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[g*2+1]=0;while(a.heap_len<2)i=a.heap[++a.heap_len]=h<2?++h:0,c[i*2]=1,a.depth[i]=0,a.opt_len--,e&&(a.static_len-=d[i*2+1]);b.max_code=h;for(g=a.heap_len>>1;g>=1;g--)M(a,c,g);i=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],M(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[i*2]=c[g*2]+c[e*2],a.depth[i]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[g*2+1]=c[e*2+1]=i,a.heap[1]=i++,M(a,c,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1];ma(a,b);na(c,h,a.bl_count)}function O(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);b[(c+1)*2+1]=65535;for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else h<j?a.bl_tree[f*2]+=h:f!==0?(f!==e&&a.bl_tree[f*2]++,a.bl_tree[w*2]++):h<=10?a.bl_tree[x*2]++:a.bl_tree[y*2]++;h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function P(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else if(h<j)do J(a,f,a.bl_tree);while(--h!==0);else f!==0?(f!==e&&(J(a,f,a.bl_tree),h--),J(a,w,a.bl_tree),I(a,h-3,2)):h<=10?(J(a,x,a.bl_tree),I(a,h-3,3)):(J(a,y,a.bl_tree),I(a,h-11,7));h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function Q(a){var b;O(a,a.dyn_ltree,a.l_desc.max_code);O(a,a.dyn_dtree,a.d_desc.max_code);N(a,a.bl_desc);for(b=r-1;b>=3;b--)if(a.bl_tree[ba[b]*2+1]!==0)break;a.opt_len+=3*(b+1)+5+5+4;return b}function sa(a,b,c,d){var e;I(a,b-257,5);I(a,c-1,5);I(a,d-4,4);for(e=0;e<d;e++)I(a,a.bl_tree[ba[e]*2+1],3);P(a,a.dyn_ltree,b-1);P(a,a.dyn_dtree,c-1)}function R(a){var b=4093624447,e;for(e=0;e<=31;e++,b>>>=1)if(b&1&&a.dyn_ltree[e*2]!==0)return c;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return d;for(e=32;e<o;e++)if(a.dyn_ltree[e*2]!==0)return d;return c}var ta=!1;function S(a){ta||(K(),ta=!0),a.l_desc=new H(a.dyn_ltree,ha),a.d_desc=new H(a.dyn_dtree,F),a.bl_desc=new H(a.bl_tree,G),a.bi_buf=0,a.bi_valid=0,oa(a)}function T(a,b,c,d){I(a,(g<<1)+(d?1:0),3),pa(a,b,c,!0)}function U(a){I(a,h<<1,3),J(a,v,C),la(a)}function V(a,c,d,f){var g,j,k=0;a.level>0?(a.strm.data_type===e&&(a.strm.data_type=R(a)),N(a,a.l_desc),N(a,a.d_desc),k=Q(a),g=a.opt_len+3+7>>>3,j=a.static_len+3+7>>>3,j<=g&&(g=j)):g=j=d+5;d+4<=g&&c!==-1?T(a,c,d,f):a.strategy===b||j===g?(I(a,(h<<1)+(f?1:0),3),ra(a,C,da)):(I(a,(i<<1)+(f?1:0),3),sa(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),ra(a,a.dyn_ltree,a.dyn_dtree));oa(a);f&&L(a)}function W(a,b,c){a.pending_buf[a.d_buf+a.last_lit*2]=b>>>8&255;a.pending_buf[a.d_buf+a.last_lit*2+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;b===0?a.dyn_ltree[c*2]++:(a.matches++,b--,a.dyn_ltree[(ea[c]+o+1)*2]++,a.dyn_dtree[ia(b)*2]++);return a.last_lit===a.lit_bufsize-1}l._tr_init=S;l._tr_stored_block=T;l._tr_flush_block=V;l._tr_tally=W;l._tr_align=U}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;var f;while(c!==0){f=c>2e3?2e3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0}q.exports=a}var aa=!1;function s(){aa||(aa=!0,r());return q.exports}c={};var t={exports:c};function u(){function a(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var b=a();function c(a,c,d,e){var f=b;d=e+d;a^=-1;for(e=e;e<d;e++)a=a>>>8^f[(a^c[e])&255];return a^-1}t.exports=c}var v=!1;function w(){v||(v=!0,u());return t.exports}d={};var x={exports:d};function y(){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var z=!1;function A(){z||(z=!0,y());return x.exports}var B={},ba={exports:B};function ca(){var a=k(),b=p(),c=s(),d=w(),e=A(),f=0,g=1,h=3,i=4,j=5,l=0,m=1,n=-2,o=-3,q=-5,r=-1,aa=1,t=2,u=3,v=4,x=0,y=2,z=8,ba=9,ca=15,C=8,da=29,D=256,ea=D+1+da,fa=30,E=19,ga=2*ea+1,ha=15,F=3,G=258,H=G+F+1,ia=32,ja=42,I=69,J=73,ka=91,la=103,ma=113,na=666,K=1,oa=2,L=3,pa=4,qa=3;function M(a,b){a.msg=e[b];return b}function ra(a){return(a<<1)-(a>4?9:0)}function N(a){var b=a.length;while(--b>=0)a[b]=0}function O(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);if(d===0)return;a.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out);b.next_out+=d;c.pending_out+=d;b.total_out+=d;b.avail_out-=d;c.pending-=d;c.pending===0&&(c.pending_out=0)}function P(a,c){b._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,c),a.block_start=a.strstart,O(a.strm)}function Q(a,b){a.pending_buf[a.pending++]=b}function sa(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=b&255}function R(b,e,f,g){var h=b.avail_in;h>g&&(h=g);if(h===0)return 0;b.avail_in-=h;a.arraySet(e,b.input,b.next_in,h,f);b.state.wrap===1?b.adler=c(b.adler,e,h,f):b.state.wrap===2&&(b.adler=d(b.adler,e,h,f));b.next_in+=h;b.total_in+=h;return h}function ta(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-H?a.strstart-(a.w_size-H):0,i=a.window,j=a.w_mask,k=a.prev,l=a.strstart+G,m=i[d+f-1],n=i[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{e=b;if(i[e+f]!==n||i[e+f-1]!==m||i[e]!==i[d]||i[++e]!==i[d+1])continue;d+=2;e++;do;while(i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&d<l);e=G-(l-d);d=l-G;if(e>f){a.match_start=b;f=e;if(e>=g)break;m=i[d+f-1];n=i[d+f]}}while((b=k[b&j])>h&&--c!==0);return f<=a.lookahead?f:a.lookahead}function S(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-H)){a.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;e=b.hash_size;d=e;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);e=c;d=e;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(b.strm.avail_in===0)break;e=R(b.strm,b.window,b.strstart+b.lookahead,g);b.lookahead+=e;if(b.lookahead+b.insert>=F){f=b.strstart-b.insert;b.ins_h=b.window[f];b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+1])&b.hash_mask;while(b.insert){b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+F-1])&b.hash_mask;b.prev[f&b.w_mask]=b.head[b.ins_h];b.head[b.ins_h]=f;f++;b.insert--;if(b.lookahead+b.insert<F)break}}}while(b.lookahead<H&&b.strm.avail_in!==0)}function T(a,b){var c=65535;c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);for(;;){if(a.lookahead<=1){S(a);if(a.lookahead===0&&b===f)return K;if(a.lookahead===0)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(a.strstart===0||a.strstart>=d){a.lookahead=a.strstart-d;a.strstart=d;P(a,!1);if(a.strm.avail_out===0)return K}if(a.strstart-a.block_start>=a.w_size-H){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(b===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.strstart>a.block_start){P(a,!1);if(a.strm.avail_out===0)return K}return K}function U(a,c){var d;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);d!==0&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d));if(a.match_length>=F){d=b._tr_tally(a,a.strstart-a.match_start,a.match_length-F);a.lookahead-=a.match_length;if(a.match_length<=a.max_lazy_match&&a.lookahead>=F){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask}else d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function V(a,c){var d,e;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=F-1;d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d),a.match_length<=5&&(a.strategy===aa||a.match_length===F&&a.strstart-a.match_start>4096)&&(a.match_length=F-1));if(a.prev_length>=F&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-F;e=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-F);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);a.match_available=0;a.match_length=F-1;a.strstart++;if(e){P(a,!1);if(a.strm.avail_out===0)return K}}else if(a.match_available){e=b._tr_tally(a,0,a.window[a.strstart-1]);e&&P(a,!1);a.strstart++;a.lookahead--;if(a.strm.avail_out===0)return K}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function W(a,c){var d,e,g,h=a.window;for(;;){if(a.lookahead<=G){S(a);if(a.lookahead<=G&&c===f)return K;if(a.lookahead===0)break}a.match_length=0;if(a.lookahead>=F&&a.strstart>0){e=a.strstart-1;d=h[e];if(d===h[++e]&&d===h[++e]&&d===h[++e]){g=a.strstart+G;do;while(d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<g);a.match_length=G-(g-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}}a.match_length>=F?(d=b._tr_tally(a,1,a.match_length-F),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function X(a,c){var d;for(;;){if(a.lookahead===0){S(a);if(a.lookahead===0){if(c===f)return K;break}}a.match_length=0;d=b._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function ua(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}var va;va=[new ua(0,0,0,0,T),new ua(4,4,8,4,U),new ua(4,5,16,8,U),new ua(4,6,32,32,U),new ua(4,4,16,16,V),new ua(8,16,32,32,V),new ua(8,16,128,128,V),new ua(8,32,128,256,V),new ua(32,128,258,1024,V),new ua(32,258,258,4096,V)];function wa(a){a.window_size=2*a.w_size,N(a.head),a.max_lazy_match=va[a.level].max_lazy,a.good_match=va[a.level].good_length,a.nice_match=va[a.level].nice_length,a.max_chain_length=va[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=F-1,a.match_available=0,a.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ga*2),this.dyn_dtree=new a.Buf16((2*fa+1)*2),this.bl_tree=new a.Buf16((2*E+1)*2),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(ha+1),this.heap=new a.Buf16(2*ea+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ea+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(a){var c;if(!a||!a.state)return M(a,n);a.total_in=a.total_out=0;a.data_type=y;c=a.state;c.pending=0;c.pending_out=0;c.wrap<0&&(c.wrap=-c.wrap);c.status=c.wrap?ja:ma;a.adler=c.wrap===2?0:1;c.last_flush=f;b._tr_init(c);return l}function Z(a){var b=xa(a);b===l&&wa(a.state);return b}function $(a,b){if(!a||!a.state)return n;if(a.state.wrap!==2)return n;a.state.gzhead=b;return l}function ya(b,c,d,e,f,g){if(!b)return n;var h=1;c===r&&(c=6);e<0?(h=0,e=-e):e>15&&(h=2,e-=16);if(f<1||f>ba||d!==z||e<8||e>15||c<0||c>9||g<0||g>v)return M(b,n);e===8&&(e=9);var i=new Y();b.state=i;i.strm=b;i.wrap=h;i.gzhead=null;i.w_bits=e;i.w_size=1<<i.w_bits;i.w_mask=i.w_size-1;i.hash_bits=f+7;i.hash_size=1<<i.hash_bits;i.hash_mask=i.hash_size-1;i.hash_shift=~~((i.hash_bits+F-1)/F);i.window=new a.Buf8(i.w_size*2);i.head=new a.Buf16(i.hash_size);i.prev=new a.Buf16(i.w_size);i.lit_bufsize=1<<f+6;i.pending_buf_size=i.lit_bufsize*4;i.pending_buf=new a.Buf8(i.pending_buf_size);i.d_buf=1*i.lit_bufsize;i.l_buf=(1+2)*i.lit_bufsize;i.level=c;i.strategy=g;i.method=d;return Z(b)}function za(a,b){return ya(a,b,z,ca,C,x)}function Aa(a,c){var e,k;if(!a||!a.state||c>j||c<0)return a?M(a,n):n;k=a.state;if(!a.output||!a.input&&a.avail_in!==0||k.status===na&&c!==i)return M(a,a.avail_out===0?q:n);k.strm=a;e=k.last_flush;k.last_flush=c;if(k.status===ja)if(k.wrap===2)a.adler=0,Q(k,31),Q(k,139),Q(k,8),!k.gzhead?(Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,qa),k.status=ma):(Q(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),Q(k,k.gzhead.time&255),Q(k,k.gzhead.time>>8&255),Q(k,k.gzhead.time>>16&255),Q(k,k.gzhead.time>>24&255),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(Q(k,k.gzhead.extra.length&255),Q(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(a.adler=d(a.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=I);else{var o=z+(k.w_bits-8<<4)<<8,p;k.strategy>=t||k.level<2?p=0:k.level<6?p=1:k.level===6?p=2:p=3;o|=p<<6;k.strstart!==0&&(o|=ia);o+=31-o%31;k.status=ma;sa(k,o);k.strstart!==0&&(sa(k,a.adler>>>16),sa(k,a.adler&65535));a.adler=1}if(k.status===I)if(k.gzhead.extra){p=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size)break}Q(k,k.gzhead.extra[k.gzindex]&255);k.gzindex++}k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=J)}else k.status=J;if(k.status===J)if(k.gzhead.name){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.name.length?o=k.gzhead.name.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.gzindex=0,k.status=ka)}else k.status=ka;if(k.status===ka)if(k.gzhead.comment){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.comment.length?o=k.gzhead.comment.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.status=la)}else k.status=la;k.status===la&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&O(a),k.pending+2<=k.pending_buf_size&&(Q(k,a.adler&255),Q(k,a.adler>>8&255),a.adler=0,k.status=ma)):k.status=ma);if(k.pending!==0){O(a);if(a.avail_out===0){k.last_flush=-1;return l}}else if(a.avail_in===0&&ra(c)<=ra(e)&&c!==i)return M(a,q);if(k.status===na&&a.avail_in!==0)return M(a,q);if(a.avail_in!==0||k.lookahead!==0||c!==f&&k.status!==na){p=k.strategy===t?X(k,c):k.strategy===u?W(k,c):va[k.level].func(k,c);(p===L||p===pa)&&(k.status=na);if(p===K||p===L){a.avail_out===0&&(k.last_flush=-1);return l}if(p===oa){c===g?b._tr_align(k):c!==j&&(b._tr_stored_block(k,0,0,!1),c===h&&(N(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0)));O(a);if(a.avail_out===0){k.last_flush=-1;return l}}}if(c!==i)return l;if(k.wrap<=0)return m;k.wrap===2?(Q(k,a.adler&255),Q(k,a.adler>>8&255),Q(k,a.adler>>16&255),Q(k,a.adler>>24&255),Q(k,a.total_in&255),Q(k,a.total_in>>8&255),Q(k,a.total_in>>16&255),Q(k,a.total_in>>24&255)):(sa(k,a.adler>>>16),sa(k,a.adler&65535));O(a);k.wrap>0&&(k.wrap=-k.wrap);return k.pending!==0?l:m}function Ba(a){var b;if(!a||!a.state)return n;b=a.state.status;if(b!==ja&&b!==I&&b!==J&&b!==ka&&b!==la&&b!==ma&&b!==na)return M(a,n);a.state=null;return b===ma?M(a,o):l}function Ca(b,d){var e=d.length,f,g,h,i,j;if(!b||!b.state)return n;f=b.state;g=f.wrap;if(g===2||g===1&&f.status!==ja||f.lookahead)return n;g===1&&(b.adler=c(b.adler,d,e,0));f.wrap=0;e>=f.w_size&&(g===0&&(N(f.head),f.strstart=0,f.block_start=0,f.insert=0),j=new a.Buf8(f.w_size),a.arraySet(j,d,e-f.w_size,f.w_size,0),d=j,e=f.w_size);j=b.avail_in;h=b.next_in;i=b.input;b.avail_in=e;b.next_in=0;b.input=d;S(f);while(f.lookahead>=F){e=f.strstart;d=f.lookahead-(F-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[e+F-1])&f.hash_mask,f.prev[e&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=e,e++;while(--d);f.strstart=e;f.lookahead=F-1;S(f)}f.strstart+=f.lookahead;f.block_start=f.strstart;f.insert=f.lookahead;f.lookahead=0;f.match_length=f.prev_length=F-1;f.match_available=0;b.next_in=h;b.input=i;b.avail_in=j;f.wrap=g;return l}B.deflateInit=za;B.deflateInit2=ya;B.deflateReset=Z;B.deflateResetKeep=xa;B.deflateSetHeader=$;B.deflate=Aa;B.deflateEnd=Ba;B.deflateSetDictionary=Ca;B.deflateInfo="pako deflate (from Nodeca project)"}var C=!1;function da(){C||(C=!0,ca());return ba.exports}var D={},ea={exports:D};function fa(){var a=k(),b=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(a){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){c=!1}var d=new a.Buf8(256);for(var e=0;e<256;e++)d[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;d[254]=d[254]=1;D.string2buf=function(b){var c,d,e,f,g,h=b.length,i=0;for(f=0;f<h;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),i+=d<128?1:d<2048?2:d<65536?3:4;c=new a.Buf8(i);for(g=0,f=0;g<i;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),d<128?c[g++]=d:d<2048?(c[g++]=192|d>>>6,c[g++]=128|d&63):d<65536?(c[g++]=224|d>>>12,c[g++]=128|d>>>6&63,c[g++]=128|d&63):(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63,c[g++]=128|d>>>6&63,c[g++]=128|d&63);return c};function f(d,e){if(e<65534&&(d.subarray&&c||!d.subarray&&b))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));var f="";for(var g=0;g<e;g++)f+=String.fromCharCode(d[g]);return f}D.buf2binstring=function(a){return f(a,a.length)};D.binstring2buf=function(b){var c=new a.Buf8(b.length);for(var d=0,e=c.length;d<e;d++)c[d]=b.charCodeAt(d);return c};D.buf2string=function(a,b){var c,e,g,h;b=b||a.length;var i=new Array(b*2);for(e=0,c=0;c<b;){g=a[c++];if(g<128){i[e++]=g;continue}h=d[g];if(h>4){i[e++]=65533;c+=h-1;continue}g&=h===2?31:h===3?15:7;while(h>1&&c<b)g=g<<6|a[c++]&63,h--;if(h>1){i[e++]=65533;continue}g<65536?i[e++]=g:(g-=65536,i[e++]=55296|g>>10&1023,i[e++]=56320|g&1023)}return f(i,e)};D.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+d[a[c]]>b?c:b}}var E=!1;function ga(){E||(E=!0,fa());return ea.exports}f={};var ha={exports:f};function F(){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ha.exports=a}var G=!1;function H(){G||(G=!0,F());return ha.exports}var ia={},ja={exports:ia};function I(){var a=da(),b=k(),c=ga(),d=A(),e=H(),f=Object.prototype.toString,g=0,h=4,i=0,j=1,l=2,m=-1,n=0,o=8;function p(g){if(!(this instanceof p))return new p(g);this.options=b.assign({level:m,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new e();this.strm.avail_out=0;var h=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(h!==i)throw new Error(d[h]);g.header&&a.deflateSetHeader(this.strm,g.header);if(g.dictionary){var j;typeof g.dictionary==="string"?j=c.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(g.dictionary):j=g.dictionary;h=a.deflateSetDictionary(this.strm,j);if(h!==i)throw new Error(d[h]);this._dict_set=!0}}p.prototype.push=function(d,e){var k=this.strm,m=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:e===!0?h:g;typeof d==="string"?k.input=c.string2buf(d):f.call(d)==="[object ArrayBuffer]"?k.input=new Uint8Array(d):k.input=d;k.next_in=0;k.avail_in=k.input.length;do{k.avail_out===0&&(k.output=new b.Buf8(m),k.next_out=0,k.avail_out=m);d=a.deflate(k,e);if(d!==j&&d!==i){this.onEnd(d);this.ended=!0;return!1}(k.avail_out===0||k.avail_in===0&&(e===h||e===l))&&(this.options.to==="string"?this.onData(c.buf2binstring(b.shrinkBuf(k.output,k.next_out))):this.onData(b.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&d!==j);if(e===h){d=a.deflateEnd(this.strm);this.onEnd(d);this.ended=!0;return d===i}if(e===l){this.onEnd(i);k.avail_out=0;return!0}return!0};p.prototype.onData=function(a){this.chunks.push(a)};p.prototype.onEnd=function(a){a===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function q(a,b){b=new p(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}function r(a,b){b=b||{};b.raw=!0;return q(a,b)}function aa(a,b){b=b||{};b.gzip=!0;return q(a,b)}ia.Deflate=p;ia.deflate=q;ia.deflateRaw=r;ia.gzip=aa}var J=!1;function ka(){J||(J=!0,I());return ja.exports}b={};var la={exports:b};function ma(){var a=30,b=12;la.exports=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,aa,s,t,u,v,w,x,y,z,A;e=c.state;f=c.next_in;z=c.input;g=f+(c.avail_in-5);h=c.next_out;A=c.output;d=h-(d-c.avail_out);i=h+(c.avail_out-257);j=e.dmax;k=e.wsize;l=e.whave;m=e.wnext;n=e.window;o=e.hold;p=e.bits;q=e.lencode;r=e.distcode;aa=(1<<e.lenbits)-1;s=(1<<e.distbits)-1;top:do{p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=q[o&aa];dolen:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u===0)A[h++]=t&65535;else if(u&16){v=t&65535;u&=15;u&&(p<u&&(o+=z[f++]<<p,p+=8),v+=o&(1<<u)-1,o>>>=u,p-=u);p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=r[o&s];dodist:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u&16){w=t&65535;u&=15;p<u&&(o+=z[f++]<<p,p+=8,p<u&&(o+=z[f++]<<p,p+=8));w+=o&(1<<u)-1;if(w>j){c.msg="invalid distance too far back";e.mode=a;break top}o>>>=u;p-=u;u=h-d;if(w>u){u=w-u;if(u>l&&e.sane){c.msg="invalid distance too far back";e.mode=a;break top}x=0;y=n;if(m===0){x+=k-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}else if(m<u){x+=k+m-u;u-=m;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=0;if(m<v){u=m;v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}}else{x+=m-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}while(v>2)A[h++]=y[x++],A[h++]=y[x++],A[h++]=y[x++],v-=3;v&&(A[h++]=y[x++],v>1&&(A[h++]=y[x++]))}else{x=h-w;do A[h++]=A[x++],A[h++]=A[x++],A[h++]=A[x++],v-=3;while(v>2);v&&(A[h++]=A[x++],v>1&&(A[h++]=A[x++]))}}else if((u&64)===0){t=r[(t&65535)+(o&(1<<u)-1)];continue dodist}else{c.msg="invalid distance code";e.mode=a;break top}break}}else if((u&64)===0){t=q[(t&65535)+(o&(1<<u)-1)];continue dolen}else if(u&32){e.mode=b;break top}else{c.msg="invalid literal/length code";e.mode=a;break top}break}}while(f<g&&h<i);v=p>>3;f-=v;p-=v<<3;o&=(1<<p)-1;c.next_in=f;c.next_out=h;c.avail_in=f<g?5+(g-f):5-(f-g);c.avail_out=h<i?257+(i-h):257-(h-i);e.hold=o;e.bits=p;return}}var na=!1;function K(){na||(na=!0,ma());return la.exports}c={};var oa={exports:c};function L(){var a=k(),b=15,c=852,d=592,e=0,f=1,g=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oa.exports=function(k,m,n,o,p,q,r,aa){var s=aa.bits,t,u,v,w,x,y,z,A,B,ba,ca,C,da,D,ea=0,fa,E=new a.Buf16(b+1),ga=new a.Buf16(b+1),ha=0,F,G,H;for(t=0;t<=b;t++)E[t]=0;for(u=0;u<o;u++)E[m[n+u]]++;s=s;for(w=b;w>=1;w--)if(E[w]!==0)break;s>w&&(s=w);if(w===0){p[q++]=1<<24|64<<16|0;p[q++]=1<<24|64<<16|0;aa.bits=1;return 0}for(v=1;v<w;v++)if(E[v]!==0)break;s<v&&(s=v);z=1;for(t=1;t<=b;t++){z<<=1;z-=E[t];if(z<0)return-1}if(z>0&&(k===e||w!==1))return-1;ga[1]=0;for(t=1;t<b;t++)ga[t+1]=ga[t]+E[t];for(u=0;u<o;u++)m[n+u]!==0&&(r[ga[m[n+u]]++]=u);k===e?(ga=o=r,fa=19):k===f?(ga=h,ea-=257,o=i,ha-=257,fa=256):(ga=j,o=l,fa=-1);B=0;u=0;t=v;D=q;x=s;y=0;C=-1;A=1<<s;da=A-1;if(k===f&&A>c||k===g&&A>d)return 1;for(;;){F=t-y;r[u]<fa?(G=0,H=r[u]):r[u]>fa?(G=o[ha+r[u]],H=ga[ea+r[u]]):(G=32+64,H=0);ba=1<<t-y;ca=1<<x;v=ca;do ca-=ba,p[D+(B>>y)+ca]=F<<24|G<<16|H|0;while(ca!==0);ba=1<<t-1;while(B&ba)ba>>=1;ba!==0?(B&=ba-1,B+=ba):B=0;u++;if(--E[t]===0){if(t===w)break;t=m[n+r[u]]}if(t>s&&(B&da)!==C){y===0&&(y=s);D+=v;x=t-y;z=1<<x;while(x+y<w){z-=E[x+y];if(z<=0)break;x++;z<<=1}A+=1<<x;if(k===f&&A>c||k===g&&A>d)return 1;C=B&da;p[C]=s<<24|x<<16|D-q|0}}B!==0&&(p[D+B]=t-y<<24|64<<16|0);aa.bits=s;return 0}}var pa=!1;function qa(){pa||(pa=!0,L());return oa.exports}var M={},ra={exports:M};function N(){var a=k(),b=s(),c=w(),d=K(),e=qa(),f=0,g=1,h=2,i=4,j=5,l=6,m=0,n=1,o=2,p=-2,q=-3,r=-4,aa=-5,t=8,u=1,v=2,x=3,y=4,z=5,A=6,B=7,ba=8,ca=9,C=10,da=11,D=12,ea=13,fa=14,E=15,ga=16,ha=17,F=18,G=19,H=20,ia=21,ja=22,I=23,J=24,ka=25,la=26,ma=27,na=28,oa=29,L=30,pa=31,ra=32,N=852,O=592,P=15,Q=P;function sa(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ta(b){var c;if(!b||!b.state)return p;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=u;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new a.Buf32(N);c.distcode=c.distdyn=new a.Buf32(O);c.sane=1;c.back=-1;return m}function S(a){var b;if(!a||!a.state)return p;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return ta(a)}function T(a,b){var c,d;if(!a||!a.state)return p;d=a.state;b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15));if(b&&(b<8||b>15))return p;d.window!==null&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return S(a)}function U(a,b){var c;if(!a)return p;c=new R();a.state=c;c.window=null;c=T(a,b);c!==m&&(a.state=null);return c}function V(a){return U(a,Q)}var W=!0,X,ua;function va(b){if(W){var c;X=new a.Buf32(512);ua=new a.Buf32(32);c=0;while(c<144)b.lens[c++]=8;while(c<256)b.lens[c++]=9;while(c<280)b.lens[c++]=7;while(c<288)b.lens[c++]=8;e(g,b.lens,0,288,X,0,b.work,{bits:9});c=0;while(c<32)b.lens[c++]=5;e(h,b.lens,0,32,ua,0,b.work,{bits:5});W=!1}b.lencode=X;b.lenbits=9;b.distcode=ua;b.distbits=5}function wa(b,c,d,e){var f;b=b.state;b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new a.Buf8(b.wsize));e>=b.wsize?(a.arraySet(b.window,c,d-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(f=b.wsize-b.wnext,f>e&&(f=e),a.arraySet(b.window,c,d-e,f,b.wnext),e-=f,e?(a.arraySet(b.window,c,d-e,e,0),b.wnext=e,b.whave=b.wsize):(b.wnext+=f,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=f)));return 0}function Y(k,s){var w,K,qa,M,N,O,P,Q,R,ta,S,T,U,V,W,X,ua,Y,xa,Z=new a.Buf8(4),$,ya,za=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;w=k.state;w.mode===D&&(w.mode=ea);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;ta=O;S=P;xa=m;inf_leave:for(;;)switch(w.mode){case u:if(w.wrap===0){w.mode=ea;break}while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(w.wrap&2&&Q===35615){w.check=0;Z[0]=Q&255;Z[1]=Q>>>8&255;w.check=c(w.check,Z,2,0);Q=0;R=0;w.mode=v;break}w.flags=0;w.head&&(w.head.done=!1);if(!(w.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){k.msg="incorrect header check";w.mode=L;break}if((Q&15)!==t){k.msg="unknown compression method";w.mode=L;break}Q>>>=4;R-=4;Y=(Q&15)+8;if(w.wbits===0)w.wbits=Y;else if(Y>w.wbits){k.msg="invalid window size";w.mode=L;break}w.dmax=1<<Y;k.adler=w.check=1;w.mode=Q&512?C:D;Q=0;R=0;break;case v:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.flags=Q;if((w.flags&255)!==t){k.msg="unknown compression method";w.mode=L;break}if(w.flags&57344){k.msg="unknown header flags set";w.mode=L;break}w.head&&(w.head.text=Q>>8&1);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=x;case x:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.time=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,Z[2]=Q>>>16&255,Z[3]=Q>>>24&255,w.check=c(w.check,Z,4,0));Q=0;R=0;w.mode=y;case y:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.xflags=Q&255,w.head.os=Q>>8);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=z;case z:if(w.flags&1024){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length=Q;w.head&&(w.head.extra_len=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0}else w.head&&(w.head.extra=null);w.mode=A;case A:if(w.flags&1024){T=w.length;T>O&&(T=O);T&&(w.head&&(Y=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),a.arraySet(w.head.extra,K,M,T,Y)),w.flags&512&&(w.check=c(w.check,K,T,M)),O-=T,M+=T,w.length-=T);if(w.length)break inf_leave}w.length=0;w.mode=B;case B:if(w.flags&2048){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.name+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.name=null);w.length=0;w.mode=ba;case ba:if(w.flags&4096){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.comment+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.comment=null);w.mode=ca;case ca:if(w.flags&512){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.check&65535)){k.msg="header crc mismatch";w.mode=L;break}Q=0;R=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);k.adler=w.check=0;w.mode=D;break;case C:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}k.adler=w.check=sa(Q);Q=0;R=0;w.mode=da;case da:if(w.havedict===0){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;return o}k.adler=w.check=1;w.mode=D;case D:if(s===j||s===l)break inf_leave;case ea:if(w.last){Q>>>=R&7;R-=R&7;w.mode=ma;break}while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.last=Q&1;Q>>>=1;R-=1;switch(Q&3){case 0:w.mode=fa;break;case 1:va(w);w.mode=H;if(s===l){Q>>>=2;R-=2;break inf_leave}break;case 2:w.mode=ha;break;case 3:k.msg="invalid block type",w.mode=L}Q>>>=2;R-=2;break;case fa:Q>>>=R&7;R-=R&7;while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((Q&65535)!==(Q>>>16^65535)){k.msg="invalid stored block lengths";w.mode=L;break}w.length=Q&65535;Q=0;R=0;w.mode=E;if(s===l)break inf_leave;case E:w.mode=ga;case ga:T=w.length;if(T){T>O&&(T=O);T>P&&(T=P);if(T===0)break inf_leave;a.arraySet(qa,K,M,T,N);O-=T;M+=T;P-=T;N+=T;w.length-=T;break}w.mode=D;break;case ha:while(R<14){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.nlen=(Q&31)+257;Q>>>=5;R-=5;w.ndist=(Q&31)+1;Q>>>=5;R-=5;w.ncode=(Q&15)+4;Q>>>=4;R-=4;if(w.nlen>286||w.ndist>30){k.msg="too many length or distance symbols";w.mode=L;break}w.have=0;w.mode=F;case F:while(w.have<w.ncode){while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.lens[za[w.have++]]=Q&7;Q>>>=3;R-=3}while(w.have<19)w.lens[za[w.have++]]=0;w.lencode=w.lendyn;w.lenbits=7;$={bits:w.lenbits};xa=e(f,w.lens,0,19,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid code lengths set";w.mode=L;break}w.have=0;w.mode=G;case G:while(w.have<w.nlen+w.ndist){for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(X<16)Q>>>=V,R-=V,w.lens[w.have++]=X;else{if(X===16){ya=V+2;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;if(w.have===0){k.msg="invalid bit length repeat";w.mode=L;break}Y=w.lens[w.have-1];T=3+(Q&3);Q>>>=2;R-=2}else if(X===17){ya=V+3;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=3+(Q&7);Q>>>=3;R-=3}else{ya=V+7;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=11+(Q&127);Q>>>=7;R-=7}if(w.have+T>w.nlen+w.ndist){k.msg="invalid bit length repeat";w.mode=L;break}while(T--)w.lens[w.have++]=Y}}if(w.mode===L)break;if(w.lens[256]===0){k.msg="invalid code -- missing end-of-block";w.mode=L;break}w.lenbits=9;$={bits:w.lenbits};xa=e(g,w.lens,0,w.nlen,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid literal/lengths set";w.mode=L;break}w.distbits=6;w.distcode=w.distdyn;$={bits:w.distbits};xa=e(h,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,$);w.distbits=$.bits;if(xa){k.msg="invalid distances set";w.mode=L;break}w.mode=H;if(s===l)break inf_leave;case H:w.mode=ia;case ia:if(O>=6&&P>=258){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;d(k,S);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;w.mode===D&&(w.back=-1);break}w.back=0;for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(W&&(W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.lencode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;w.length=X;if(W===0){w.mode=la;break}if(W&32){w.back=-1;w.mode=D;break}if(W&64){k.msg="invalid literal/length code";w.mode=L;break}w.extra=W&15;w.mode=ja;case ja:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=I;case I:for(;;){U=w.distcode[Q&(1<<w.distbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.distcode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;if(W&64){k.msg="invalid distance code";w.mode=L;break}w.offset=X;w.extra=W&15;w.mode=J;case J:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.offset+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){k.msg="invalid distance too far back";w.mode=L;break}w.mode=ka;case ka:if(P===0)break inf_leave;T=S-P;if(w.offset>T){T=w.offset-T;if(T>w.whave&&w.sane){k.msg="invalid distance too far back";w.mode=L;break}T>w.wnext?(T-=w.wnext,U=w.wsize-T):U=w.wnext-T;T>w.length&&(T=w.length);$=w.window}else $=qa,U=N-w.offset,T=w.length;T>P&&(T=P);P-=T;w.length-=T;do qa[N++]=$[U++];while(--T);w.length===0&&(w.mode=ia);break;case la:if(P===0)break inf_leave;qa[N++]=w.length;P--;w.mode=ia;break;case ma:if(w.wrap){while(R<32){if(O===0)break inf_leave;O--;Q|=K[M++]<<R;R+=8}S-=P;k.total_out+=S;w.total+=S;S&&(k.adler=w.check=w.flags?c(w.check,qa,S,N-S):b(w.check,qa,S,N-S));S=P;if((w.flags?Q:sa(Q))!==w.check){k.msg="incorrect data check";w.mode=L;break}Q=0;R=0}w.mode=na;case na:if(w.wrap&&w.flags){while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.total&4294967295)){k.msg="incorrect length check";w.mode=L;break}Q=0;R=0}w.mode=oa;case oa:xa=n;break inf_leave;case L:xa=q;break inf_leave;case pa:return r;case ra:default:return p}k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;if((w.wsize||S!==k.avail_out&&w.mode<L&&(w.mode<ma||s!==i))&&wa(k,k.output,k.next_out,S-k.avail_out)){w.mode=pa;return r}ta-=k.avail_in;S-=k.avail_out;k.total_in+=ta;k.total_out+=S;w.total+=S;w.wrap&&S&&(k.adler=w.check=w.flags?c(w.check,qa,S,k.next_out-S):b(w.check,qa,S,k.next_out-S));k.data_type=w.bits+(w.last?64:0)+(w.mode===D?128:0)+(w.mode===H||w.mode===E?256:0);(ta===0&&S===0||s===i)&&xa===m&&(xa=aa);return xa}function xa(a){if(!a||!a.state)return p;var b=a.state;b.window&&(b.window=null);a.state=null;return m}function Z(a,b){if(!a||!a.state)return p;a=a.state;if((a.wrap&2)===0)return p;a.head=b;b.done=!1;return m}function $(a,c){var d=c.length,e,f;if(!a||!a.state)return p;e=a.state;if(e.wrap!==0&&e.mode!==da)return p;if(e.mode===da){f=1;f=b(f,c,d,0);if(f!==e.check)return q}f=wa(a,c,d,d);if(f){e.mode=pa;return r}e.havedict=1;return m}M.inflateReset=S;M.inflateReset2=T;M.inflateResetKeep=ta;M.inflateInit=V;M.inflateInit2=U;M.inflate=Y;M.inflateEnd=xa;M.inflateGetHeader=Z;M.inflateSetDictionary=$;M.inflateInfo="pako inflate (from Nodeca project)"}var O=!1;function P(){O||(O=!0,N());return ra.exports}d={};var Q={exports:d};function sa(){Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var R=!1;function ta(){R||(R=!0,sa());return Q.exports}f={};var S={exports:f};function T(){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}S.exports=a}var U=!1;function V(){U||(U=!0,T());return S.exports}var W={},X={exports:W};function ua(){var a=P(),b=k(),c=ga(),d=ta(),e=A(),f=H(),g=V(),h=Object.prototype.toString;function i(j){if(!(this instanceof i))return new i(j);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},j||{});var k=this.options;k.raw&&k.windowBits>=0&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15));k.windowBits>=0&&k.windowBits<16&&!(j&&j.windowBits)&&(k.windowBits+=32);k.windowBits>15&&k.windowBits<48&&((k.windowBits&15)===0&&(k.windowBits|=15));this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f();this.strm.avail_out=0;j=a.inflateInit2(this.strm,k.windowBits);if(j!==d.Z_OK)throw new Error(e[j]);this.header=new g();a.inflateGetHeader(this.strm,this.header);if(k.dictionary){typeof k.dictionary==="string"?k.dictionary=c.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"&&(k.dictionary=new Uint8Array(k.dictionary));if(k.raw){j=a.inflateSetDictionary(this.strm,k.dictionary);if(j!==d.Z_OK)throw new Error(e[j])}}}i.prototype.push=function(e,f){var g=this.strm,i=this.options.chunkSize,j=this.options.dictionary,k,l,m,n=!1;if(this.ended)return!1;f=f===~~f?f:f===!0?d.Z_FINISH:d.Z_NO_FLUSH;typeof e==="string"?g.input=c.binstring2buf(e):h.call(e)==="[object ArrayBuffer]"?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{g.avail_out===0&&(g.output=new b.Buf8(i),g.next_out=0,g.avail_out=i);e=a.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&j&&(e=a.inflateSetDictionary(this.strm,j));e===d.Z_BUF_ERROR&&n===!0&&(e=d.Z_OK,n=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK){this.onEnd(e);this.ended=!0;return!1}g.next_out&&((g.avail_out===0||e===d.Z_STREAM_END||g.avail_in===0&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=c.utf8border(g.output,g.next_out),l=g.next_out-k,m=c.buf2string(g.output,k),g.next_out=l,g.avail_out=i-l,l&&b.arraySet(g.output,g.output,k,l,0),this.onData(m)):this.onData(b.shrinkBuf(g.output,g.next_out))));g.avail_in===0&&g.avail_out===0&&(n=!0)}while((g.avail_in>0||g.avail_out===0)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH){e=a.inflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===d.Z_OK}if(f===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);g.avail_out=0;return!0}return!0};i.prototype.onData=function(a){this.chunks.push(a)};i.prototype.onEnd=function(a){a===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function j(a,b){b=new i(b);b.push(a,!0);if(b.err)throw b.msg||e[b.err];return b.result}function l(a,b){b=b||{};b.raw=!0;return j(a,b)}W.Inflate=i;W.inflate=j;W.inflateRaw=l;W.ungzip=j}var va=!1;function wa(){va||(va=!0,ua());return X.exports}b={};var Y={exports:b};function xa(){var a=k().assign,b=ka(),c=wa(),d=ta(),e={};a(e,b,c,d);Y.exports=e}var Z=!1;function $(){Z||(Z=!0,xa());return Y.exports}function a(a){switch(a){case void 0:return $()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("process-nextick-args-2.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?g.exports={nextTick:a}:g.exports=process;function a(a,b,c,d){if(typeof a!=="function")throw new TypeError('"callback" argument must be a function');var e=arguments.length,f,g;switch(e){case 0:case 1:return process.nextTick(a);case 2:return process.nextTick(function(){a.call(null,b)});case 3:return process.nextTick(function(){a.call(null,b,c)});case 4:return process.nextTick(function(){a.call(null,b,c,d)});default:f=new Array(e-1);g=0;while(g<f.length)f[g++]=arguments[g];return process.nextTick(function(){a.apply(null,f)})}}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("safe-buffer-5.1.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a={},b=a.Buffer;function c(a,b){for(var c in a)b[c]=a[c]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?h.exports=a:(c(a,g),g.Buffer=d);function d(a,c,d){return b(a,c,d)}c(b,d);d.from=function(a,c,d){if(typeof a==="number")throw new TypeError("Argument must not be a number");return b(a,c,d)};d.alloc=function(a,c,d){if(typeof a!=="number")throw new TypeError("Argument must be a number");a=b(a);c!==void 0?typeof d==="string"?a.fill(c,d):a.fill(c):a.fill(0);return a};d.allocUnsafe=function(a){if(typeof a!=="number")throw new TypeError("Argument must be a number");return b(a)};d.allocUnsafeSlow=function(b){if(typeof b!=="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(b)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("util-deprecate-1.0.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports={}.deprecate}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("readable-stream-2.3.6",["safe-buffer-5.1.2","process-nextick-args-2.0.0","core-util-is-1.0.2","inherits-2.0.3","util-deprecate-1.0.2","isarray-1.0.0"],(function(a,b,c,d,e,f){"use strict";function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("safe-buffer-5.1.2")),h=c(b("process-nextick-args-2.0.0")),i=c(b("core-util-is-1.0.2")),j=c(b("inherits-2.0.3")),k=c(b("util-deprecate-1.0.2")),l=c(b("isarray-1.0.0"));c={};var m={exports:c};function n(){m.exports={}}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=g().Buffer,c={};function d(a,b,c){a.copy(b,c)}q.exports=function(){function c(){a(this,c),this.head=null,this.tail=null,this.length=0}c.prototype.push=function(a){a={data:a,next:null};this.length>0?this.tail.next=a:this.head=a;this.tail=a;++this.length};c.prototype.unshift=function(a){a={data:a,next:this.head};this.length===0&&(this.tail=a);this.head=a;++this.length};c.prototype.shift=function(){if(this.length===0)return;var a=this.head.data;this.length===1?this.head=this.tail=null:this.head=this.head.next;--this.length;return a};c.prototype.clear=function(){this.head=this.tail=null,this.length=0};c.prototype.join=function(a){if(this.length===0)return"";var b=this.head,c=""+b.data;while(b=b.next)c+=a+b.data;return c};c.prototype.concat=function(a){if(this.length===0)return b.alloc(0);if(this.length===1)return this.head.data;a=b.allocUnsafe(a>>>0);var c=this.head,e=0;while(c)d(c.data,a,e),e+=c.data.length,c=c.next;return a};return c}();c&&c.inspect&&c.inspect.custom&&(q.exports.prototype[c.inspect.custom]=function(){var a=c.inspect({length:this.length});return this.constructor.name+" "+a})}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){var a=h();function b(b,c){var e=this,f=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;if(f||g){c?c(b):b&&(!this._writableState||!this._writableState.errorEmitted)&&a.nextTick(d,this,b);return this}this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(b||null,function(b){!c&&b?(a.nextTick(d,e,b),e._writableState&&(e._writableState.errorEmitted=!0)):c&&c(b)});return this}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(a,b){a.emit("error",b)}u.exports={destroy:b,undestroy:c}}var w=!1;function x(){w||(w=!0,v());return u.exports}b={};var y={exports:b};function z(){var b=h();y.exports=w;function c(a){var b=this;this.next=null;this.entry=null;this.finish=function(){Q(b,a)}}var d=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:b.nextTick,e;w.WritableState=u;var f=i();f.inherits=j();var l={deprecate:k()},m=p(),n=g().Buffer,o=a.Uint8Array||function(){};function q(a){return n.from(a)}function r(a){return n.isBuffer(a)||a instanceof o}var s=x();f.inherits(w,m);function t(){}function u(a,b){e=e||F();a=a||{};var d=b instanceof e;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var f=a.highWaterMark,g=a.writableHighWaterMark,h=this.objectMode?16:16*1024;f||f===0?this.highWaterMark=f:d&&(g||g===0)?this.highWaterMark=g:this.highWaterMark=h;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=!1;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;this.destroyed=!1;f=a.decodeStrings===!1;this.decodeStrings=!f;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){H(b,a)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=!1;this.errorEmitted=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new c(this)}u.prototype.getBuffer=function(){var a=this.bufferedRequest,b=[];while(a)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(u.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}})();var v;typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(a){if(v.call(this,a))return!0;return this!==w?!1:a&&a._writableState instanceof u}})):v=function(a){return a instanceof this};function w(a){e=e||F();if(!v.call(w,this)&&!(this instanceof e))return new w(a);this._writableState=new u(a,this);this.writable=!0;a&&(typeof a.write==="function"&&(this._write=a.write),typeof a.writev==="function"&&(this._writev=a.writev),typeof a.destroy==="function"&&(this._destroy=a.destroy),typeof a["final"]==="function"&&(this._final=a["final"]));m.call(this)}w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function z(a,c){var d=new Error("write after end");a.emit("error",d);b.nextTick(c,d)}function A(a,c,d,e){var f=!0,g=!1;d===null?g=new TypeError("May not write null values to stream"):typeof d!=="string"&&d!==void 0&&!c.objectMode&&(g=new TypeError("Invalid non-string/buffer chunk"));g&&(a.emit("error",g),b.nextTick(e,g),f=!1);return f}w.prototype.write=function(a,b,c){var d=this._writableState,e=!1,f=!d.objectMode&&r(a);f&&!n.isBuffer(a)&&(a=q(a));typeof b==="function"&&(c=b,b=null);f?b="buffer":b||(b=d.defaultEncoding);typeof c!=="function"&&(c=t);d.ended?z(this,c):(f||A(this,d,a,c))&&(d.pendingcb++,e=C(this,d,f,a,b,c));return e};w.prototype.cork=function(){var a=this._writableState;a.corked++};w.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.finished&&!a.bufferProcessing&&a.bufferedRequest&&K(this,a))};w.prototype.setDefaultEncoding=function(a){typeof a==="string"&&(a=a.toLowerCase());if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};function B(a,b,c){!a.objectMode&&a.decodeStrings!==!1&&typeof b==="string"&&(b=n.from(b,c));return b}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(a,b,c,d,e,f){if(!c){var g=B(b,d,e);d!==g&&(c=!0,e="buffer",d=g)}g=b.objectMode?1:d.length;b.length+=g;var h=b.length<b.highWaterMark;h||(b.needDrain=!0);if(b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null};i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest;b.bufferedRequestCount+=1}else D(a,b,!1,g,d,e,f);return h}function D(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function E(a,c,d,e,f){--c.pendingcb,d?(b.nextTick(f,e),b.nextTick(O,a,c),a._writableState.errorEmitted=!0,a.emit("error",e)):(f(e),a._writableState.errorEmitted=!0,a.emit("error",e),O(a,c))}function G(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function H(a,b){var c=a._writableState,e=c.sync,f=c.writecb;G(c);if(b)E(a,c,e,b,f);else{b=L(c);!b&&!c.corked&&!c.bufferProcessing&&c.bufferedRequest&&K(a,c);e?d(I,a,c,b,f):I(a,c,b,f)}}function I(a,b,c,d){c||J(a,b),b.pendingcb--,d(),O(a,b)}function J(a,b){b.length===0&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function K(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;if(a._writev&&d&&d.next){var e=b.bufferedRequestCount;e=new Array(e);var f=b.corkedRequestsFree;f.entry=d;var g=0,h=!0;while(d)e[g]=d,d.isBuf||(h=!1),d=d.next,g+=1;e.allBuffers=h;D(a,b,!0,b.length,e,"",f.finish);b.pendingcb++;b.lastBufferedRequest=null;f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new c(b);b.bufferedRequestCount=0}else{while(d){g=d.chunk;h=d.encoding;e=d.callback;f=b.objectMode?1:g.length;D(a,b,!1,f,g,h,e);d=d.next;b.bufferedRequestCount--;if(b.writing)break}d===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=d;b.bufferProcessing=!1}w.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))};w.prototype._writev=null;w.prototype.end=function(a,b,c){var d=this._writableState;typeof a==="function"?(c=a,a=null,b=null):typeof b==="function"&&(c=b,b=null);a!==null&&a!==void 0&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());!d.ending&&!d.finished&&P(this,d,c)};function L(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function M(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),O(a,b)})}function N(a,c){!c.prefinished&&!c.finalCalled&&(typeof a._final==="function"?(c.pendingcb++,c.finalCalled=!0,b.nextTick(M,a,c)):(c.prefinished=!0,a.emit("prefinish")))}function O(a,b){var c=L(b);c&&(N(a,b),b.pendingcb===0&&(b.finished=!0,a.emit("finish")));return c}function P(a,c,d){c.ending=!0,O(a,c),d&&(c.finished?b.nextTick(d):a.once("finish",d)),c.ended=!0,a.writable=!1}function Q(a,b,c){var d=a.entry;a.entry=null;while(d){var e=d.callback;b.pendingcb--;e(c);d=d.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(a){if(!this._writableState)return;this._writableState.destroyed=a}});w.prototype.destroy=s.destroy;w.prototype._undestroy=s.undestroy;w.prototype._destroy=function(a,b){this.end(),b(a)}}var A=!1;function B(){A||(A=!0,z());return y.exports}c={};var C={exports:c};function D(){var a=h(),b=Object.keys||function(a){var b=[];for(a in a)b.push(a);return b};C.exports=g;var c=i();c.inherits=j();var d=O(),e=B();c.inherits(g,d);c=b(e.prototype);for(b=0;b<c.length;b++){var f=c[b];g.prototype[f]||(g.prototype[f]=e.prototype[f])}function g(a){if(!(this instanceof g))return new g(a);d.call(this,a);e.call(this,a);a&&a.readable===!1&&(this.readable=!1);a&&a.writable===!1&&(this.writable=!1);this.allowHalfOpen=!0;a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1);this.once("end",k)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(){if(this.allowHalfOpen||this._writableState.ended)return;a.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){if(this._readableState===void 0||this._writableState===void 0)return;this._readableState.destroyed=a;this._writableState.destroyed=a}});g.prototype._destroy=function(b,c){this.push(null),this.end(),a.nextTick(c,b)}}var E=!1;function F(){E||(E=!0,D());return C.exports}var G={},H={exports:G};function I(){var a=g().Buffer,b=a.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(a){if(!a)return"utf8";var b;while(!0)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function d(d){var e=c(d);if(typeof e!=="string"&&(a.isEncoding===b||!b(d)))throw new Error("Unknown encoding: "+d);return e||d}G.StringDecoder=e;function e(b){this.encoding=d(b);var c;switch(this.encoding){case"utf16le":this.text=m;this.end=n;c=4;break;case"utf8":this.fillLast=j;c=4;break;case"base64":this.text=o;this.end=p;c=3;break;default:this.write=q;this.end=r;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=a.allocUnsafe(c)}e.prototype.write=function(a){if(a.length===0)return"";var b,c;if(this.lastNeed){b=this.fillLast(a);if(b===void 0)return"";c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};e.prototype.end=l;e.prototype.text=k;e.prototype.fillLast=function(a){if(this.lastNeed<=a.length){a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};function f(a){if(a<=127)return 0;else if(a>>5===6)return 2;else if(a>>4===14)return 3;else if(a>>3===30)return 4;return a>>6===2?-1:-2}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-1);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-2);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(e===2?e=0:a.lastNeed=e-3);return e}return 0}function i(a,b,c){if((b[0]&192)!==128){a.lastNeed=0;return"\ufffd"}if(a.lastNeed>1&&b.length>1){if((b[1]&192)!==128){a.lastNeed=1;return"\ufffd"}if(a.lastNeed>2&&b.length>2&&(b[2]&192)!==128){a.lastNeed=2;return"\ufffd"}}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);if(c!==void 0)return c;if(this.lastNeed<=a.length){a.copy(this.lastChar,b,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)}function l(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a}function m(a,b){if((a.length-b)%2===0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=a[a.length-2];this.lastChar[1]=a[a.length-1];return c.slice(0,-1)}}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function n(a){a=a&&a.length?this.write(a):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,b)}return a}function o(a,b){var c=(a.length-b)%3;if(c===0)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function p(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}}var J=!1;function K(){J||(J=!0,I());return H.exports}b={};var L={exports:b};function M(){var b=h();L.exports=A;var c=l(),d;A.ReadableState=z;var e=function(a,b){return a.listeners(b).length},f=p(),k=g().Buffer,m=a.Uint8Array||function(){};function n(a){return k.from(a)}function o(a){return k.isBuffer(a)||a instanceof m}var q=i();q.inherits=j();var r={},s=void 0;r&&r.debuglog?s=r.debuglog("stream"):s=function(){};var u=t();r=x();var v;q.inherits(A,f);var w=["error","close","destroy","pause","resume"];function y(a,b,d){if(typeof a.prependListener==="function")return a.prependListener(b,d);!a._events||!a._events[b]?a.on(b,d):c(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]]}function z(a,b){d=d||F();a=a||{};b=b instanceof d;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,e=a.readableHighWaterMark,f=this.objectMode?16:16*1024;c||c===0?this.highWaterMark=c:b&&(e||e===0)?this.highWaterMark=e:this.highWaterMark=f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new u();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.resumeScheduled=!1;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;a.encoding&&(v||(v=K("/").StringDecoder),this.decoder=new v(a.encoding),this.encoding=a.encoding)}function A(a){d=d||F();if(!(this instanceof A))return new A(a);this._readableState=new z(a,this);this.readable=!0;a&&(typeof a.read==="function"&&(this._read=a.read),typeof a.destroy==="function"&&(this._destroy=a.destroy));f.call(this)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){if(!this._readableState)return;this._readableState.destroyed=a}});A.prototype.destroy=r.destroy;A.prototype._undestroy=r.undestroy;A.prototype._destroy=function(a,b){this.push(null),b(a)};A.prototype.push=function(a,b){var c=this._readableState,d;!c.objectMode?typeof a==="string"&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=k.from(a,b),b=""),d=!0):d=!0;return B(this,a,b,!1,d)};A.prototype.unshift=function(a){return B(this,a,null,!0,!1)};function B(a,b,c,d,e){var f=a._readableState;if(b===null)f.reading=!1,J(a,f);else{var g;e||(g=D(f,b));g?a.emit("error",g):f.objectMode||b&&b.length>0?(typeof b!=="string"&&!f.objectMode&&Object.getPrototypeOf(b)!==k.prototype&&(b=n(b)),d?f.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):C(a,f,b,!0):f.ended?a.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!c?(b=f.decoder.write(b),f.objectMode||b.length!==0?C(a,f,b,!1):O(a,f)):C(a,f,b,!1))):d||(f.reading=!1)}return E(f)}function C(a,b,c,d){b.flowing&&b.length===0&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&M(a)),O(a,b)}function D(a,b){var c;!o(b)&&typeof b!=="string"&&b!==void 0&&!a.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk"));return c}function E(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(a){v||(v=K("/").StringDecoder);this._readableState.decoder=new v(a);this._readableState.encoding=a;return this};var G=8388608;function H(a){a>=G?a=G:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++);return a}function I(a,b){if(a<=0||b.length===0&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;a>b.highWaterMark&&(b.highWaterMark=H(a));if(a<=b.length)return a;if(!b.ended){b.needReadable=!0;return 0}return b.length}A.prototype.read=function(a){s("read",a);a=parseInt(a,10);var b=this._readableState,c=a;a!==0&&(b.emittedReadable=!1);if(a===0&&b.needReadable&&(b.length>=b.highWaterMark||b.ended)){s("read: emitReadable",b.length,b.ended);b.length===0&&b.ended?Z(this):M(this);return null}a=I(a,b);if(a===0&&b.ended){b.length===0&&Z(this);return null}var d=b.needReadable;s("need readable",d);(b.length===0||b.length-a<b.highWaterMark)&&(d=!0,s("length less than watermark",d));b.ended||b.reading?(d=!1,s("reading or ended",d)):d&&(s("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=I(c,b)));a>0?d=V(a,b):d=null;d===null?(b.needReadable=!0,a=0):b.length-=a;b.length===0&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Z(this));d!==null&&this.emit("data",d);return d};function J(a,b){if(b.ended)return;if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0;M(a)}function M(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||(s("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?b.nextTick(N,a):N(a))}function N(a){s("emit readable"),a.emit("readable"),U(a)}function O(a,c){c.readingMore||(c.readingMore=!0,b.nextTick(P,a,c))}function P(a,b){var c=b.length;while(!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark){s("maybeReadMore read 0");a.read(0);if(c===b.length)break;else c=b.length}b.readingMore=!1}A.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))};A.prototype.pipe=function(a,c){var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a);break}f.pipesCount+=1;s("pipe count=%d opts=%j",f.pipesCount,c);c=(!c||c.end!==!1)&&a!==process.stdout&&a!==process.stderr;c=c?h:q;f.endEmitted?b.nextTick(c):d.once("end",c);a.on("unpipe",g);function g(a,b){s("onunpipe"),a===d&&(b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,k()))}function h(){s("onend"),a.end()}var i=Q(d);a.on("drain",i);var j=!1;function k(){s("cleanup"),a.removeListener("close",o),a.removeListener("finish",p),a.removeListener("drain",i),a.removeListener("error",n),a.removeListener("unpipe",g),d.removeListener("end",h),d.removeListener("end",q),d.removeListener("data",m),j=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&i()}var l=!1;d.on("data",m);function m(b){s("ondata");l=!1;b=a.write(b);!1===b&&!l&&((f.pipesCount===1&&f.pipes===a||f.pipesCount>1&&aa(f.pipes,a)!==-1)&&!j&&(s("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,l=!0),d.pause())}function n(b){s("onerror",b),q(),a.removeListener("error",n),e(a,"error")===0&&a.emit("error",b)}y(a,"error",n);function o(){a.removeListener("finish",p),q()}a.once("close",o);function p(){s("onfinish"),a.removeListener("close",o),q()}a.once("finish",p);function q(){s("unpipe"),d.unpipe(a)}a.emit("pipe",d);f.flowing||(s("pipe resume"),d.resume());return a};function Q(a){return function(){var b=a._readableState;s("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;b.awaitDrain===0&&e(a,"data")&&(b.flowing=!0,U(a))}}A.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(b.pipesCount===0)return this;if(b.pipesCount===1){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,c);return this}d=aa(b.pipes,a);if(d===-1)return this;b.pipes.splice(d,1);b.pipesCount-=1;b.pipesCount===1&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,c);return this};A.prototype.on=function(a,c){c=f.prototype.on.call(this,a,c);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,!a.reading?b.nextTick(R,this):a.length&&M(this))}return c};A.prototype.addListener=A.prototype.on;function R(a){s("readable nexttick read 0"),a.read(0)}A.prototype.resume=function(){var a=this._readableState;a.flowing||(s("resume"),a.flowing=!0,S(this,a));return this};function S(a,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(T,a,c))}function T(a,b){b.reading||(s("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),U(a),b.flowing&&!b.reading&&a.read(0)}A.prototype.pause=function(){s("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};function U(a){var b=a._readableState;s("flow",b.flowing);while(b.flowing&&a.read()!==null);}A.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;a.on("end",function(){s("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(e){s("wrapped data");c.decoder&&(e=c.decoder.write(e));if(c.objectMode&&(e===null||e===void 0))return;else if(!c.objectMode&&(!e||!e.length))return;e=b.push(e);e||(d=!0,a.pause())});for(var e in a)this[e]===void 0&&typeof a[e]==="function"&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(e=0;e<w.length;e++)a.on(w[e],this.emit.bind(this,w[e]));this._read=function(b){s("wrapped _read",b),d&&(d=!1,a.resume())};return this};Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});A._fromList=V;function V(a,b){if(b.length===0)return null;var c;b.objectMode?c=b.buffer.shift():!a||a>=b.length?(b.decoder?c=b.buffer.join(""):b.buffer.length===1?c=b.buffer.head.data:c=b.buffer.concat(b.length),b.buffer.clear()):c=W(a,b.buffer,b.decoder);return c}function W(a,b,c){var d;a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):a===b.head.data.length?d=b.shift():d=c?X(a,b):Y(a,b);return d}function X(a,b){var c=b.head,d=1,e=c.data;a-=e.length;while(c=c.next){var f=c.data,g=a>f.length?f.length:a;g===f.length?e+=f:e+=f.slice(0,a);a-=g;if(a===0){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}b.length-=d;return e}function Y(a,b){var c=k.allocUnsafe(a),d=b.head,e=1;d.data.copy(c);a-=d.data.length;while(d=d.next){var f=d.data,g=a>f.length?f.length:a;f.copy(c,c.length-a,0,g);a-=g;if(a===0){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}b.length-=e;return c}function Z(a){var c=a._readableState;if(c.length>0)throw new Error('"endReadable()" called on non-empty stream');c.endEmitted||(c.ended=!0,b.nextTick($,c,a))}function $(a,b){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function aa(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}}var N=!1;function O(){N||(N=!0,M());return L.exports}c={};var P={exports:c};function Q(){P.exports=d;var a=F(),b=i();b.inherits=j();b.inherits(d,a);function c(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;b!=null&&this.push(b);d(a);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);a.call(this,b);this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&(typeof b.transform==="function"&&(this._transform=b.transform),typeof b.flush==="function"&&(this._flush=b.flush));this.on("prefinish",e)}function e(){var a=this;typeof this._flush==="function"?this._flush(function(b,c){f(a,b,c)}):f(this,null,null)}d.prototype.push=function(b,c){this._transformState.needTransform=!1;return a.prototype.push.call(this,b,c)};d.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")};d.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;if(!d.transforming){c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};d.prototype._read=function(a){a=this._transformState;a.writechunk!==null&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};d.prototype._destroy=function(b,c){var d=this;a.prototype._destroy.call(this,b,function(a){c(a),d.emit("close")})};function f(a,b,c){if(b)return a.emit("error",b);c!=null&&a.push(c);if(a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}}var R=!1;function S(){R||(R=!0,Q());return P.exports}b={};var T={exports:b};function U(){T.exports=c;var a=S(),b=i();b.inherits=j();b.inherits(c,a);function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}c.prototype._transform=function(a,b,c){c(null,a)}}var V=!1;function W(){V||(V=!0,U());return T.exports}d={};var X={exports:d};function Y(){var a={};process.env.READABLE_STREAM==="disable"&&a?(X.exports=a,d=X.exports=a.Readable,d.Readable=a.Readable,d.Writable=a.Writable,d.Duplex=a.Duplex,d.Transform=a.Transform,d.PassThrough=a.PassThrough,d.Stream=a):(d=X.exports=O(),d.Stream=a||d,d.Readable=d,d.Writable=B(),d.Duplex=F(),d.Transform=S(),d.PassThrough=W())}var Z=!1;function $(){Z||(Z=!0,Y());return X.exports}function f(a){switch(a){case void 0:return $()}}e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("set-immediate-shim-1.0.1",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports=typeof setImmediate==="function"?setImmediate:function(){var a=[].slice.apply(arguments);a.splice(1,0,0);setTimeout.apply(null,a)}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("jszip-3.2.0",["readable-stream-2.3.6","set-immediate-shim-1.0.1","lie-3.3.0","pako-1.0.8"],(function(a,b,c,d,e,f){"use strict";var g=b("readable-stream-2.3.6"),h=b("set-immediate-shim-1.0.1"),i=b("lie-3.3.0"),j=b("pako-1.0.8"),k={},l={exports:k};function m(){k.base64=!0;k.array=!0;k.string=!0;k.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";k.nodebuffer=typeof Buffer!=="undefined";k.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined")k.blob=!1;else{var a=new ArrayBuffer(0);try{k.blob=new Blob([a],{type:"application/zip"}).size===0}catch(c){try{var b=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;b=new b();b.append(a);k.blob=b.getBlob("application/zip").size===0}catch(a){k.blob=!1}}}try{k.nodestream=!!g().Readable}catch(a){k.nodestream=!1}}var n=!1;function o(){n||(n=!0,m());return l.exports}var p={},q={exports:p};function r(){var a=E(),b=o(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(b){var d=[],e,f,g,h,i=0,j=b.length,k=j,l=a.getTypeOf(b)!=="string";while(i<b.length)k=j-i,!l?(e=b.charCodeAt(i++),f=i<j?b.charCodeAt(i++):0,g=i<j?b.charCodeAt(i++):0):(e=b[i++],f=i<j?b[i++]:0,g=i<j?b[i++]:0),h=e>>2,e=(e&3)<<4|f>>4,f=k>1?(f&15)<<2|g>>6:64,g=k>2?g&63:64,d.push(c.charAt(h)+c.charAt(e)+c.charAt(f)+c.charAt(g));return d.join("")};p.decode=function(a){var d,e,f,g,h=0,i=0,j="data:";if(a.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j=a.length*3/4;a.charAt(a.length-1)===c.charAt(64)&&j--;a.charAt(a.length-2)===c.charAt(64)&&j--;if(j%1!==0)throw new Error("Invalid base64 input, bad content length.");var k;b.uint8array?k=new Uint8Array(j|0):k=new Array(j|0);while(h<a.length)j=c.indexOf(a.charAt(h++)),e=c.indexOf(a.charAt(h++)),f=c.indexOf(a.charAt(h++)),g=c.indexOf(a.charAt(h++)),j=j<<2|e>>4,e=(e&15)<<4|f>>2,d=(f&3)<<6|g,k[i++]=j,f!==64&&(k[i++]=e),g!==64&&(k[i++]=d);return k}}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){u.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(a,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,b);else{if(typeof a==="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,b)}},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);else{a=new Buffer(a);a.fill(0);return a}},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on==="function"&&typeof a.pause==="function"&&typeof a.resume==="function"}}}var w=!1;function x(){w||(w=!0,v());return u.exports}d={};var y={exports:d};function z(){var a;typeof Promise!=="undefined"?a=Promise:a=i();y.exports={Promise:a}}var A=!1;function B(){A||(A=!0,z());return y.exports}var C={},aa={exports:C};function ba(){var a=o(),b=t(),c=x(),d=h(),e=B();function f(b){var c;a.uint8array?c=new Uint8Array(b.length):c=new Array(b.length);return i(b,c)}C.newBlob=function(a,b){C.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var c=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;c=new c();c.append(a);return c.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};function g(a){return a}function i(a,b){for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c)&255;return b}var j={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);while(e<f)b==="array"||b==="nodebuffer"?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){var b="";for(var c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(a){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch(a){return!1}}()}};function k(a){var b=65536,c=C.getTypeOf(a),d=!0;c==="uint8array"?d=j.applyCanBeUsed.uint8array:c==="nodebuffer"&&(d=j.applyCanBeUsed.nodebuffer);if(d)while(b>1)try{return j.stringifyByChunk(a,c,b)}catch(a){b=Math.floor(b/2)}return j.stringifyByChar(a)}C.applyFromCharCode=k;function l(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var m={};m.string={string:g,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return m.string.uint8array(a).buffer},uint8array:function(a){return i(a,new Uint8Array(a.length))},nodebuffer:function(a){return i(a,c.allocBuffer(a.length))}};m.array={string:k,array:g,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(a)}};m.arraybuffer={string:function(a){return k(new Uint8Array(a))},array:function(a){return l(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:g,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(new Uint8Array(a))}};m.uint8array={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:g,nodebuffer:function(a){return c.newBufferFrom(a)}};m.nodebuffer={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return m.nodebuffer.uint8array(a).buffer},uint8array:function(a){return l(a,new Uint8Array(a.length))},nodebuffer:g};C.transformTo=function(a,b){b||(b="");if(!a)return b;C.checkSupport(a);var c=C.getTypeOf(b);c=m[c][a](b);return c};C.getTypeOf=function(b){if(typeof b==="string")return"string";if(Object.prototype.toString.call(b)==="[object Array]")return"array";if(a.nodebuffer&&c.isBuffer(b))return"nodebuffer";if(a.uint8array&&b instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&b instanceof ArrayBuffer)return"arraybuffer"};C.checkSupport=function(b){var c=a[b.toLowerCase()];if(!c)throw new Error(b+" is not supported by this platform")};C.MAX_VALUE_16BITS=65535;C.MAX_VALUE_32BITS=-1;C.pretty=function(a){var b="",c,d;for(d=0;d<(a||"").length;d++)c=a.charCodeAt(d),b+="\\x"+(c<16?"0":"")+c.toString(16).toUpperCase();return b};C.delay=function(a,b,c){d(function(){a.apply(c||null,b||[])})};C.inherits=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c()};C.extend=function(){var a={},b,c;for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&typeof a[c]==="undefined"&&(a[c]=arguments[b][c]);return a};C.prepareContent=function(c,d,g,h,i){d=e.Promise.resolve(d).then(function(b){var c=a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1);if(c&&typeof FileReader!=="undefined")return new e.Promise(function(a,c){var d=new FileReader();d.onload=function(b){a(b.target.result)};d.onerror=function(a){c(a.target.error)};d.readAsArrayBuffer(b)});else return b});return d.then(function(a){var d=C.getTypeOf(a);if(!d)return e.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));d==="arraybuffer"?a=C.transformTo("uint8array",a):d==="string"&&(i?a=b.decode(a):g&&(h!==!0&&(a=f(a))));return a})}}var D=!1;function E(){D||(D=!0,ba());return aa.exports}f={};var F={exports:f};function ca(){function a(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){if(this.isFinished)return!1;this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp());return!0},on:function(a,b){this._listeners[a].push(b);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo;this.mergeStreamInfo();this.previous=a;var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.end()});a.on("error",function(a){b.error(a)});return this},pause:function(){if(this.isPaused||this.isFinished)return!1;this.isPaused=!0;this.previous&&this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;this.generatedError&&(this.error(this.generatedError),a=!0);this.previous&&this.previous.resume();return!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){this.extraStreamInfo[a]=b;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(a))continue;this.streamInfo[a]=this.extraStreamInfo[a]}},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;if(this.previous)return this.previous+" -> "+a;else return a}};F.exports=a}var G=!1;function H(){G||(G=!0,ca());return F.exports}var I={},da={exports:I};function ea(){var a=E(),b=o(),c=x(),d=H(),e=new Array(256);for(var f=0;f<256;f++)e[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;e[254]=e[254]=1;var g=function(c){var d,e,f,g,a,h=c.length,i=0;for(g=0;g<h;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),i+=e<128?1:e<2048?2:e<65536?3:4;b.uint8array?d=new Uint8Array(i):d=new Array(i);for(a=0,g=0;a<i;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),e<128?d[a++]=e:e<2048?(d[a++]=192|e>>>6,d[a++]=128|e&63):e<65536?(d[a++]=224|e>>>12,d[a++]=128|e>>>6&63,d[a++]=128|e&63):(d[a++]=240|e>>>18,d[a++]=128|e>>>12&63,d[a++]=128|e>>>6&63,d[a++]=128|e&63);return d},h=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+e[a[c]]>b?c:b},i=function(c){var b,d,f,g,h=c.length,i=new Array(h*2);for(d=0,b=0;b<h;){f=c[b++];if(f<128){i[d++]=f;continue}g=e[f];if(g>4){i[d++]=65533;b+=g-1;continue}f&=g===2?31:g===3?15:7;while(g>1&&b<h)f=f<<6|c[b++]&63,g--;if(g>1){i[d++]=65533;continue}f<65536?i[d++]=f:(f-=65536,i[d++]=55296|f>>10&1023,i[d++]=56320|f&1023)}i.length!==d&&(i.subarray?i=i.subarray(0,d):i.length=d);return a.applyFromCharCode(i)};I.utf8encode=function(a){return b.nodebuffer?c.newBufferFrom(a,"utf-8"):g(a)};I.utf8decode=function(c){if(b.nodebuffer)return a.transformTo("nodebuffer",c).toString("utf-8");c=a.transformTo(b.uint8array?"uint8array":"array",c);return i(c)};function j(){d.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(j,d);j.prototype.processChunk=function(c){var d=a.transformTo(b.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var e=d;d=new Uint8Array(e.length+this.leftOver.length);d.set(this.leftOver,0);d.set(e,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}e=h(d);var f=d;e!==d.length&&(b.uint8array?(f=d.subarray(0,e),this.leftOver=d.subarray(e,d.length)):(f=d.slice(0,e),this.leftOver=d.slice(e,d.length)));this.push({data:I.utf8decode(f),meta:c.meta})};j.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:I.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};I.Utf8DecodeWorker=j;function k(){d.call(this,"utf-8 encode")}a.inherits(k,d);k.prototype.processChunk=function(a){this.push({data:I.utf8encode(a.data),meta:a.meta})};I.Utf8EncodeWorker=k}var J=!1;function K(){J||(J=!0,ea());return da.exports}b={};var L={exports:b};function fa(){var a=H(),b=E();function c(b){a.call(this,"ConvertWorker to "+b),this.destType=b}b.inherits(c,a);c.prototype.processChunk=function(a){this.push({data:b.transformTo(this.destType,a.data),meta:a.meta})};L.exports=c}var M=!1;function ga(){M||(M=!0,fa());return L.exports}c={};var N={exports:c};function ha(){var a=g().Readable,b=E();b.inherits(c,a);function c(b,c,d){a.call(this,c);this._helper=b;var e=this;b.on("data",function(a,b){e.push(a)||e._helper.pause(),d&&d(b)}).on("error",function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}c.prototype._read=function(){this._helper.resume()};N.exports=c}var O=!1;function ia(){O||(O=!0,ha());return N.exports}d={};var P={exports:d};function ja(){var a=E(),b=ga(),c=H(),d=t(),e=o(),f=B(),g=null;if(e.nodestream)try{g=ia()}catch(a){}function h(b,c,e){switch(b){case"blob":return a.newBlob(a.transformTo("arraybuffer",c),e);case"base64":return d.encode(c);default:return a.transformTo(b,c)}}function i(a,b){var c,d=0,e=null,f=0;for(c=0;c<b.length;c++)f+=b[c].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":e=new Uint8Array(f);for(c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function j(a,b){return new f.Promise(function(c,d){var e=[],f=a._internalType,g=a._outputType,j=a._mimeType;a.on("data",function(a,c){e.push(a),b&&b(c)}).on("error",function(a){e=[],d(a)}).on("end",function(){try{var a=h(g,i(f,e),j);c(a)}catch(a){d(a)}e=[]}).resume()})}function k(d,e,f){var g=e;switch(e){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string";break}try{this._internalType=g,this._outputType=e,this._mimeType=f,a.checkSupport(g),this._worker=d.pipe(new b(g)),d.lock()}catch(a){this._worker=new c("error"),this._worker.error(a)}}k.prototype={accumulate:function(a){return j(this,a)},on:function(b,c){var d=this;b==="data"?this._worker.on(b,function(a){c.call(d,a.data,a.meta)}):this._worker.on(b,function(){a.delay(c,arguments,d)});return this},resume:function(){a.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(b){a.checkSupport("nodestream");if(this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},b)}};P.exports=k}var Q=!1;function R(){Q||(Q=!0,ja());return P.exports}var S={},ka={exports:S};function la(){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null}var T=!1;function U(){T||(T=!0,la());return ka.exports}f={};var V={exports:f};function ma(){var a=E(),b=H(),c=16*1024;function d(c){b.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=!1;c.then(function(b){d.dataIsReady=!0,d.data=b,d.max=b&&b.length||0,d.type=a.getTypeOf(b),d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}a.inherits(d,b);d.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null};d.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this));return!0};d.prototype._tickAndRepeat=function(){this._tickScheduled=!1;if(this.isPaused||this.isFinished)return;this._tick();this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)};d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=c,b=null;a=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":b=this.data.substring(this.index,a);break;case"uint8array":b=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":b=this.data.slice(this.index,a);break}this.index=a;return this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})}};V.exports=d}var na=!1;function oa(){na||(na=!0,ma());return V.exports}b={};var pa={exports:b};function qa(){var a=E(),b=H();function c(a){b.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}a.inherits(c,b);c.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}b.prototype.processChunk.call(this,a)};pa.exports=c}var ra=!1;function sa(){ra||(ra=!0,qa());return pa.exports}c={};var ta={exports:c};function ua(){var a=E();function b(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var c=b();function d(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b[e])&255];return a^-1}function e(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b.charCodeAt(e))&255];return a^-1}ta.exports=function(b,c){if(typeof b==="undefined"||!b.length)return 0;var f=a.getTypeOf(b)!=="string";if(f)return d(c|0,b,b.length,0);else return e(c|0,b,b.length,0)}}var va=!1;function W(){va||(va=!0,ua());return ta.exports}d={};var wa={exports:d};function xa(){var a=H(),b=W(),c=E();function d(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c.inherits(d,a);d.prototype.processChunk=function(a){this.streamInfo.crc32=b(a.data,this.streamInfo.crc32||0),this.push(a)};wa.exports=d}var ya=!1;function za(){ya||(ya=!0,xa());return wa.exports}f={};var Aa={exports:f};function Ba(){var a=B(),b=oa(),c=sa(),d=za(),c=sa();function e(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}e.prototype={getContentWorker:function(){var d=new b(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),e=this;d.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")});return d},getCompressedWorker:function(){return new b(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};e.createWorkerFrom=function(a,b,e){return a.pipe(new d()).pipe(new c("uncompressedSize")).pipe(b.compressWorker(e)).pipe(new c("compressedSize")).withStreamInfo("compression",b)};Aa.exports=e}var Ca=!1;function X(){Ca||(Ca=!0,Ba());return Aa.exports}b={};var Da={exports:b};function Ea(){var a=R(),b=oa(),c=K(),d=X(),e=H(),f=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};f.prototype={internalStream:function(b){var d=null,f="string";try{if(!b)throw new Error("No output type specified.");f=b.toLowerCase();b=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string");d=this._decompressWorker();var g=!this._dataBinary;g&&!b&&(d=d.pipe(new c.Utf8EncodeWorker()));!g&&b&&(d=d.pipe(new c.Utf8DecodeWorker()))}catch(a){d=new e("error"),d.error(a)}return new a(d,f,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof d&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();else{var e=this._decompressWorker();this._dataBinary||(e=e.pipe(new c.Utf8EncodeWorker()));return d.createWorkerFrom(e,a,b)}},_decompressWorker:function(){if(this._data instanceof d)return this._data.getContentWorker();else if(this._data instanceof e)return this._data;else return new b(this._data)}};var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var i=0;i<g.length;i++)f.prototype[g[i]]=h;Da.exports=f}var Fa=!1;function Ga(){Fa||(Fa=!0,Ea());return Da.exports}var Y={},Ha={exports:Y};function Ia(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined",b=j(),c=E(),d=H(),e=a?"uint8array":"array";Y.magic="\b\0";function f(a,b){d.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=b,this.meta={}}c.inherits(f,d);f.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(e,a.data),!1)};f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null};f.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(b){a.push({data:b,meta:a.meta})}};Y.compressWorker=function(a){return new f("Deflate",a)};Y.uncompressWorker=function(){return new f("Inflate",{})}}var Ja=!1;function Ka(){Ja||(Ja=!0,Ia());return Ha.exports}var Z={},La={exports:Z};function Ma(){var a=H();Z.STORE={magic:"\0\0",compressWorker:function(b){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}};Z.DEFLATE=Ka()}var Na=!1;function Oa(){Na||(Na=!0,Ma());return La.exports}var $={},Pa={exports:$};function Qa(){$.LOCAL_FILE_HEADER="PK\x03\x04",$.CENTRAL_FILE_HEADER="PK\x01\x02",$.CENTRAL_DIRECTORY_END="PK\x05\x06",$.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",$.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",$.DATA_DESCRIPTOR="PK\x07\b"}var Ra=!1;function Sa(){Ra||(Ra=!0,Qa());return Pa.exports}c={};var Ta={exports:c};function Ua(){var a=E(),b=H(),c=K(),d=W(),e=Sa(),f=function(a,b){var c="",d;for(d=0;d<b;d++)c+=String.fromCharCode(a&255),a=a>>>8;return c},g=function(a,b){var c=a;a||(c=b?16893:33204);return(c&65535)<<16},h=function(a,b){return(a||0)&63},i=function(b,i,j,k,l,m){var n=b.file,o=b.compression,p=m!==c.utf8encode,q=a.transformTo("string",m(n.name)),r=a.transformTo("string",c.utf8encode(n.name)),s=n.comment;m=a.transformTo("string",m(s));var t=a.transformTo("string",c.utf8encode(s)),u=r.length!==n.name.length;s=t.length!==s.length;var v="",w="",x="",y=n.dir,z=n.date,A={crc32:0,compressedSize:0,uncompressedSize:0};(!i||j)&&(A.crc32=b.crc32,A.compressedSize=b.compressedSize,A.uncompressedSize=b.uncompressedSize);j=0;i&&(j|=8);!p&&(u||s)&&(j|=2048);b=0;i=0;y&&(b|=16);l==="UNIX"?(i=798,b|=g(n.unixPermissions,y)):(i=20,b|=h(n.dosPermissions));p=z.getUTCHours();p=p<<6;p=p|z.getUTCMinutes();p=p<<5;p=p|z.getUTCSeconds()/2;l=z.getUTCFullYear()-1980;l=l<<4;l=l|z.getUTCMonth()+1;l=l<<5;l=l|z.getUTCDate();u&&(w=f(1,1)+f(d(q),4)+r,v+="up"+f(w.length,2)+w);s&&(x=f(1,1)+f(d(m),4)+t,v+="uc"+f(x.length,2)+x);y="";y+="\n\0";y+=f(j,2);y+=o.magic;y+=f(p,2);y+=f(l,2);y+=f(A.crc32,4);y+=f(A.compressedSize,4);y+=f(A.uncompressedSize,4);y+=f(q.length,2);y+=f(v.length,2);n=e.LOCAL_FILE_HEADER+y+q+v;z=e.CENTRAL_FILE_HEADER+f(i,2)+y+f(m.length,2)+"\0\0\0\0"+f(b,4)+f(k,4)+q+v+m;return{fileRecord:n,dirRecord:z}},j=function(b,c,d,g,h){h=a.transformTo("string",h(g));g=e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(b,2)+f(b,2)+f(c,4)+f(d,4)+f(h.length,2)+h;return g},k=function(a){a=e.DATA_DESCRIPTOR+f(a.crc32,4)+f(a.compressedSize,4)+f(a.uncompressedSize,4);return a};function l(a,c,d,e){b.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=d,this.encodeFileName=e,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,b);l.prototype.push=function(a){var c=a.meta.percent||0,d=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,b.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:d?(c+100*(d-e-1))/d:100}}))};l.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){a=i(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0};l.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=i(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(c.dirRecord);if(b)this.push({data:k(a),meta:{percent:100}});else{this.push({data:c.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};l.prototype.flush=function(){var a=this.bytesWritten;for(var b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});b=this.bytesWritten-a;b=j(this.dirRecords.length,b,a,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})};l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};l.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()});a.on("error",function(a){b.error(a)});return this};l.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length){this.prepareNextSource();return!0}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return!0}};l.prototype.error=function(a){var c=this._sources;if(!b.prototype.error.call(this,a))return!1;for(var d=0;d<c.length;d++)try{c[d].error(a)}catch(a){}return!0};l.prototype.lock=function(){b.prototype.lock.call(this);var a=this._sources;for(var c=0;c<a.length;c++)a[c].lock()};Ta.exports=l}var Va=!1;function Wa(){Va||(Va=!0,Ua());return Ta.exports}var Xa={},Ya={exports:Xa};function Za(){var a=Oa(),b=Wa(),c=function(b,c){b=b||c;c=a[b];if(!c)throw new Error(b+" is not a valid compression method !");return c};Xa.generateWorker=function(a,d,e){var f=new b(d.streamFiles,e,d.platform,d.encodeFileName),g=0;try{a.forEach(function(a,b){g++;var e=c(b.options.compression,d.compression),h=b.options.compressionOptions||d.compressionOptions||{},i=b.dir,j=b.date;b._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(a){f.error(a)}return f}}var $a=!1;function ab(){$a||($a=!0,Za());return Ya.exports}d={};var bb={exports:d};function cb(){var a=E(),b=H();function c(a,c){b.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(c,b);c.prototype._bindStream=function(a){var b=this;this._stream=a;a.pause();a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})};c.prototype.pause=function(){if(!b.prototype.pause.call(this))return!1;this._stream.pause();return!0};c.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;this._upstreamEnded?this.end():this._stream.resume();return!0};bb.exports=c}var db=!1;function eb(){db||(db=!0,cb());return bb.exports}f={};var fb={exports:f};function gb(){var a=K(),b=E(),c=H(),d=R(),e=U(),f=X(),g=Ga(),h=ab(),i=x(),j=eb(),k=function(a,d,h){var k=b.getTypeOf(d),o,p=b.extend(h||{},e);p.date=p.date||new Date();p.compression!==null&&(p.compression=p.compression.toUpperCase());typeof p.unixPermissions==="string"&&(p.unixPermissions=parseInt(p.unixPermissions,8));p.unixPermissions&&p.unixPermissions&16384&&(p.dir=!0);p.dosPermissions&&p.dosPermissions&16&&(p.dir=!0);p.dir&&(a=m(a));p.createFolders&&(o=l(a))&&n.call(this,o,!0);var q=k==="string"&&p.binary===!1&&p.base64===!1;(!h||typeof h.binary==="undefined")&&(p.binary=!q);h=d instanceof f&&d.uncompressedSize===0;(h||p.dir||!d||d.length===0)&&(p.base64=!1,p.binary=!0,d="",p.compression="STORE",k="string");d instanceof f||d instanceof c?q=d:i.isNode&&i.isStream(d)?q=new j(a,d):q=b.prepareContent(a,d,p.binary,p.optimizedBinaryString,p.base64);h=new g(a,q,p);this.files[a]=h},l=function(a){a.slice(-1)==="/"&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},m=function(a){a.slice(-1)!=="/"&&(a+="/");return a},n=function(a,b){b=typeof b!=="undefined"?b:e.createFolders;a=m(a);this.files[a]||k.call(this,a,null,{dir:!0,createFolders:b});return this.files[a]};function o(a){return Object.prototype.toString.call(a)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files){if(!this.files.hasOwnProperty(b))continue;d=this.files[b];c=b.slice(this.root.length,b.length);c&&b.slice(0,this.root.length)===this.root&&a(c,d)}},filter:function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(d)});return b},file:function(a,b,c){if(arguments.length===1)if(o(a)){var d=a;return this.filter(function(a,b){return!b.dir&&d.test(a)})}else{var e=this.files[this.root+a];if(e&&!e.dir)return e;else return null}else a=this.root+a,k.call(this,a,b,c);return this},folder:function(a){if(!a)return this;if(o(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a;b=n.call(this,b);var c=this.clone();c.root=b.name;return c},remove:function(a){a=this.root+a;var b=this.files[a];b||(a.slice(-1)!=="/"&&(a+="/"),b=this.files[a]);if(b&&!b.dir)delete this.files[a];else{b=this.filter(function(c,b){return b.name.slice(0,a.length)===a});for(var c=0;c<b.length;c++)delete this.files[b[c].name]}return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var f,g={};try{g=b.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode});g.type=g.type.toLowerCase();g.compression=g.compression.toUpperCase();g.type==="binarystring"&&(g.type="string");if(!g.type)throw new Error("No output type specified.");b.checkSupport(g.type);(g.platform==="darwin"||g.platform==="freebsd"||g.platform==="linux"||g.platform==="sunos")&&(g.platform="UNIX");g.platform==="win32"&&(g.platform="DOS");e=g.comment||this.comment||"";f=h.generateWorker(this,g,e)}catch(a){f=new c("error"),f.error(a)}return new d(f,g.type||"string",g.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){a=a||{};a.type||(a.type="nodebuffer");return this.generateInternalStream(a).toNodejsStream(b)}};fb.exports=p}var hb=!1;function ib(){hb||(hb=!0,gb());return fb.exports}b={};var jb={exports:b};function kb(){var a=E();function b(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b=0,c;this.checkOffset(a);for(c=this.index+a-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);this.index+=a;return b},readString:function(b){return a.transformTo("string",this.readData(b))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}};jb.exports=b}var lb=!1;function mb(){lb||(lb=!0,kb());return jb.exports}c={};var nb={exports:c};function ob(){var a=mb(),b=E();function c(b){a.call(this,b);for(var c=0;c<this.data.length;c++)b[c]=b[c]&255}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data[this.zero+a]};c.prototype.lastIndexOfSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);for(var e=this.length-4;e>=0;--e)if(this.data[e]===b&&this.data[e+1]===c&&this.data[e+2]===d&&this.data[e+3]===a)return e-this.zero;return-1};c.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);var e=this.readData(4);return b===e[0]&&c===e[1]&&d===e[2]&&a===e[3]};c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};nb.exports=c}var pb=!1;function qb(){pb||(pb=!0,ob());return nb.exports}d={};var rb={exports:d};function sb(){var a=mb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};c.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b};c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};rb.exports=c}var tb=!1;function ub(){tb||(tb=!0,sb());return rb.exports}f={};var vb={exports:f};function wb(){var a=qb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};vb.exports=c}var xb=!1;function yb(){xb||(xb=!0,wb());return vb.exports}b={};var zb={exports:b};function Ab(){var a=yb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};zb.exports=c}var Bb=!1;function Cb(){Bb||(Bb=!0,Ab());return zb.exports}c={};var Db={exports:c};function Eb(){var a=E(),b=o(),c=qb(),d=ub(),e=Cb(),f=yb();Db.exports=function(g){var h=a.getTypeOf(g);a.checkSupport(h);if(h==="string"&&!b.uint8array)return new d(g);if(h==="nodebuffer")return new e(g);return b.uint8array?new f(a.transformTo("uint8array",g)):new c(a.transformTo("array",g))}}var Fb=!1;function Gb(){Fb||(Fb=!0,Eb());return Db.exports}d={};var Hb={exports:d};function Ib(){var a=Gb(),b=E(),c=X(),d=W(),e=K(),f=Oa(),g=o(),h=0,i=3,j=function(a){for(var b in f){if(!f.hasOwnProperty(b))continue;if(f[b].magic===a)return f[b]}return null};function k(a,b){this.options=a,this.loadOptions=b}k.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(a){var d;a.skip(22);this.fileNameLength=a.readInt(2);d=a.readInt(2);this.fileName=a.readData(this.fileNameLength);a.skip(d);if(this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");d=j(this.compressionMethod);if(d===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,d,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var b=a.readInt(2);this.extraFieldsLength=a.readInt(2);this.fileCommentLength=a.readInt(2);this.diskNumberStart=a.readInt(2);this.internalFileAttributes=a.readInt(2);this.externalFileAttributes=a.readInt(4);this.localHeaderOffset=a.readInt(4);if(this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?!0:!1;a===h&&(this.dosPermissions=this.externalFileAttributes&63);a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535);!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(c){if(!this.extraFields[1])return;c=a(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8));this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8));this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8));this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))},readExtraFields:function(a){var b=a.index+this.extraFieldsLength,c,d,e;this.extraFields||(this.extraFields={});while(a.index<b)c=a.readInt(2),d=a.readInt(2),e=a.readData(d),this.extraFields[c]={id:c,length:d,value:e}},handleUTF8:function(){var a=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=e.utf8decode(this.fileName),this.fileCommentStr=e.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{c=b.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{c=b.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileName)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileComment)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null}};Hb.exports=k}var Jb=!1;function Kb(){Jb||(Jb=!0,Ib());return Hb.exports}f={};var Lb={exports:f};function Mb(){var a=Gb(),b=E(),c=Sa(),d=Kb();K();var e=o();function f(a){this.files=[],this.loadOptions=a}f.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(c)+", expected "+b.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);a=this.reader.readString(4);a=a===b;this.reader.setIndex(c);return a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),c=e.uint8array?"uint8array":"array";c=b.transformTo(c,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var a=this.zip64EndOfCentralSize-44,b=0,c,d,e;while(b<a)c=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER))a=new d({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&(this.centralDirRecords!==0&&this.files.length===0))throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(a<0){var d=!this.isSignature(0,c.LOCAL_FILE_HEADER);if(d)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);d=a;this.checkSignature(c.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){this.zip64=!0;a=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");this.reader.setIndex(a);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);a=d-a;if(a>0)this.isSignature(d,c.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(b){this.reader=a(b)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};Lb.exports=f}var Nb=!1;function Ob(){Nb||(Nb=!0,Mb());return Lb.exports}b={};var Pb={exports:b};function Qb(){var a=E(),b=B(),c=K(),a=E(),d=Ob(),e=za(),f=x();function g(a){return new b.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new e());d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}Pb.exports=function(e,h){var i=this;h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode});return f.isNode&&f.isStream(e)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",e,!0,h.optimizedBinaryString,h.base64).then(function(a){var b=new d(h);b.load(a);return b}).then(function(a){var c=[b.Promise.resolve(a)];a=a.files;if(h.checkCRC32)for(var d=0;d<a.length;d++)c.push(g(a[d]));return b.Promise.all(c)}).then(function(a){a=a.shift();var b=a.files;for(var c=0;c<b.length;c++){var d=b[c];i.file(d.fileNameStr,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:h.createFolders})}a.zipComment.length&&(i.comment=a.zipComment);return i})}}var Rb=!1;function Sb(){Rb||(Rb=!0,Qb());return Pb.exports}c={};var Tb={exports:c};function Ub(){function a(){if(!(this instanceof a))return new a();if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var b=new a();for(var c in this)typeof this[c]!=="function"&&(b[c]=this[c]);return b}}a.prototype=ib();a.prototype.loadAsync=Sb();a.support=o();a.defaults=U();a.version="3.2.0";a.loadAsync=function(b,c){return new a().loadAsync(b,c)};a.external=B();Tb.exports=a}var Vb=!1;function Wb(){Vb||(Vb=!0,Ub());return Tb.exports}function a(a){switch(a){case void 0:return Wb()}}e.exports=a}),null);
__d("jszip",["jszip-3.2.0"],(function(a,b,c,d,e,f){e.exports=b("jszip-3.2.0")()}),null);
/**
 * License: https://www.facebook.com/legal/license/CCT5pM3qiNk/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";var g=b("tweetnacl-1.0.3");c={};var h={exports:c};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);/*FB_PKG_DELIM*/
__d("BroadcastChat.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"5 5 25 25",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",d:"M18 28.07c6.393 0 11-4.467 11-10.57v-.002C29 11.396 24.393 7 18 7S7 11.396 7 17.498v.002c0 2.091.414 3.98 1.383 5.562.458.747.564 1.664.29 2.5l-.727 2.411c-.2.614.373 1.188.964.986l3.668-1.126a4.261 4.261 0 0 1 2.39-.09c.952.233 1.966.328 3.032.328zm0-8.27a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.31-5.888a.75.75 0 0 1 1.06.008l.176.179a5.293 5.293 0 0 1 0 7.402l-.175.178a.75.75 0 0 1-1.061.01l-.357-.351a.75.75 0 0 1-.008-1.061l.175-.178a3.293 3.293 0 0 0 0-4.598l-.175-.178a.75.75 0 0 1 .008-1.06l.357-.351zm-8.255 1.411a.75.75 0 0 0-.008-1.06l-.357-.351a.75.75 0 0 0-1.06.008l-.176.179a5.293 5.293 0 0 0 0 7.402l.175.178a.75.75 0 0 0 1.061.01l.357-.351a.75.75 0 0 0 .008-1.061l-.175-.178a3.293 3.293 0 0 1 0-4.598l.175-.178z",clipRule:"evenodd"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBGroupChatInviteState",[],(function(a,b,c,d,e,f){a=Object.freeze({ACCEPTED:1,ACTIVE:2,DECLINED_BY_RECEIVER:3,IGNORED_BY_RECEIVER:4,DELETED_BY_SENDER:5,DISCARDED:6});f["default"]=a}),66);
__d("FBIconCheckmarkFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M451.78 1079.098a.75.75 0 0 0-1.06 1.06l3.08 3.082a.75.75 0 0 0 1.061 0l6.42-6.42a.75.75 0 0 0-1.061-1.06l-5.889 5.889-2.55-2.55z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconPauseCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{d:"M459 1081.875c0 .344-.28.625-.625.625h-.75a.626.626 0 0 1-.625-.625v-4.75c0-.344.28-.625.625-.625h.75c.344 0 .625.28.625.625v4.75zm-4 0c0 .344-.28.625-.625.625h-.75a.626.626 0 0 1-.625-.625v-4.75c0-.344.28-.625.625-.625h.75c.344 0 .625.28.625.625v4.75zm1-8.375c-3.308 0-6 2.691-6 6s2.692 6 6 6 6-2.691 6-6-2.692-6-6-6z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9578991145469240"}),null);
__d("GroupsCometGlobalChatCreationDialogQuery$Parameters",["GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometGlobalChatCreationDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometGlobalChatCreationDialog.entrypoint",["GroupsCometGlobalChatCreationDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("GroupsCometGlobalChatCreationDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("GroupsCometGlobalChatCreationDialog.react").__setRef("GroupsCometGlobalChatCreationDialog.entrypoint")};g["default"]=a}),98);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),66);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("limit",a[0]),d[1]=c.createArray(),d[5]=(d[1].push("search_contacts"),d[1]),d[2]=c.i64.of_float(Date.now()),d[5]=(d[1].push(c.i64.to_string(d[2])),d[1]),d[3]=c.toJSON(d[1]),d[4]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),d[3],c.i64.cast([0,452]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertRankingContacts"),e.limit);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUpdateHasPendingJoinRequest",["LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.forEach(c.filter(c.db.table(9).fetch(),function(b){return b.needsAdminApprovalForNewParticipant===!0&&c.i64.eq(b.threadKey,a[0])}),function(e){var f=e.item;return c.sequence([function(e){return a[1]?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3199643703]),void 0).then(function(a){return d[2]=a})},function(a){return d[0]=d[2]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1531706844]),void 0).then(function(a){return d[2]=a})},function(a){return d[0]=d[2]}])},function(b){return d[1]=f.lastReadWatermarkTimestampMs,c.forEach(c.db.table(9).fetch([[[f.threadKey]]]),function(b){var c=b.update;b.item;return c({hasPendingJoinRequest:a[1],snippet:d[0],lastReadWatermarkTimestampMs:d[1]})})}])})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateHasPendingJoinRequestStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSSetCommunityChannelJoiningErrorCodeForTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxSetCommunityChannelJoiningErrorCodeForTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateCommunityChannelJoiningTaskID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(162).fetch([[[a[0]]],"byFbGroupId"],[[[a[0]]]]),function(c){return b.i64.eq(c.fbGroupId,a[0])||b.i64.eq(c.communityType,b.i64.cast([0,1]))&&b.i64.eq(c.folderId,a[0])}),function(b){var c=b.update;b.item;return c({joiningChannelTaskId:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateCommunityChannelJoiningTaskIDStoredProcedure";a.__tables__=["community_folders"];e.exports=a}),null);
__d("LSJoinCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSSetCommunityChannelJoiningErrorCodeForTask","LSUpdateCommunityChannelJoiningTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([-1,4294967295]):(b=a.item,d[0]=b.parentThreadKey)})},function(a){return c.db.table(162).fetch([[[d[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([-1,4294967295]):(b=a.item,c.i64.eq(b.communityType,c.i64.cast([0,1]))?d[13]=b.folderId:d[13]=b.fbGroupId,d[2]=d[13])})},function(a){return c.storedProcedure(b("LSSetCommunityChannelJoiningErrorCodeForTask"),d[2],void 0)},function(d){return a[2]?c.storedProcedure(b("LSOptimisticUpdateHasPendingJoinRequest"),a[0],!0):c.resolve()},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=c.i64.cast([0,1]):(b=a.item,d[14]=b.syncGroup,c.i64.neq(d[14],void 0)?d[13]=d[14]:d[13]=c.i64.cast([0,1]),d[4]=d[13])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[6]=!1:(b=a.item,d[6]=b.errorShouldBeShown)})},function(a){return d[6]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[13]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[14]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[13],d[14],void 0,void 0)}]):c.resolve()},function(e){return d[8]=new c.Map(),d[8].set("thread_key",a[0]),d[8].set("community_id",d[2]),d[8].set("sync_group",d[4]),d[8].set("entry_point",a[1]),d[8].set("is_request_to_join",a[2]),d[8].set("request_source",void 0),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[13]=c.i64.of_float(Date.now()),d[9]=c.i64.add(d[13],c.i64.cast([0,0]))):d[9]=c.i64.cast([0,0]),d[10]=d[8].get("thread_key"),d[11]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(d[10]),c.i64.cast([0,337]),d[11],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],a})},function(a){return c.storedProcedure(b("LSUpdateCommunityChannelJoiningTaskID"),d[2],d[12])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxJoinCommunityChannelStoredProcedure";a.__tables__=["threads","community_folders","user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSJoinCommunityChannelStoredProcedure",["LSJoinCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSJoinCommunityChannel"),e.threadKey,e.entryPoint,e.isRequestToJoin);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateCommunityChannelDirectInvite",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSUpdateCommunityChannelJoiningTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.i64.eq(a[1],c.i64.cast([0,1]))&&!1!==void 0&&!1?c.storedProcedure(b("LSOptimisticUpdateHasPendingJoinRequest"),a[0],!0):c.resolve()},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[11]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[12]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[11],d[12],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("channel_id",a[0]),d[2].set("state",a[1]),d[2].set("is_request_to_join",!1!==void 0&&!1),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[11]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[11],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("channel_id"),d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["community_channel_invitation","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,463]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[7]=c.i64.cast([-1,4294967295]):(b=a.item,d[7]=b.parentThreadKey)})},function(a){return c.db.table(162).fetch([[[d[7]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.fbGroupId)})},function(e){return c.i64.eq(a[1],c.i64.cast([0,1]))?c.storedProcedure(b("LSUpdateCommunityChannelJoiningTaskID"),d[9],d[6]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateCommunityChannelDirectInviteStoredProcedure";a.__tables__=["user_visible_network_connectivity_error","threads","community_folders"];e.exports=a}),null);
__d("LSUpdateCommunityChannelDirectInviteStoredProcedure",["LSSynchronousPromise","LSUpdateCommunityChannelDirectInvite","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateCommunityChannelDirectInvite"),e.channelId,e.state);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2});c=a;f["default"]=c}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2});c=a;f["default"]=c}),66);
__d("MAWGroupInvitesForThread",["LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),c=d("LSMessagingThreadTypeUtil").isGroup(a.threadType);a=d("LSThreadBitOffset").has(105,a);if(b&&c)return a;else return!1}g.isGroupInviteThread=a}),98);
__d("MDSPressable.react",["CometPressable.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={hover:{backgroundColor:"x1yjz2vk",$$css:!0}};function k(a){switch(a){case"normal":return 6;case"50%":return"50%";case"compact":return 4;case"inherit":default:return void 0}}function a(a){var b=d("react-compiler-runtime").c(10),e,f,g;b[0]!==a?(f=a.overlayRadius,g=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,["overlayRadius","ref"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);b[4]!==f?(a=k(f),b[4]=f,b[5]=a):a=b[5];b[6]!==e||b[7]!==g||b[8]!==a?(f=i.jsx(c("CometPressable.react"),babelHelpers["extends"]({overlayFocusVisibleStyle:j.hover,overlayHoveredStyle:j.hover,overlayRadius:a,ref:g},e)),b[6]=e,b[7]=g,b[8]=a,b[9]=f):f=b[9];return f}g["default"]=a}),98);
__d("MWChatSearchTypeheadActionButtonViewItem.react",["CometTypeaheadViewItem.react","FDSSkittleIcon.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.entry,f=a.icon,g=a.onHighlightEntry,h=a.onPressEntry;a=a.title;var j;b[0]!==f?(j=i.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:f,size:36}),b[0]=f,b[1]=j):j=b[1];f=j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j={className:"xe8uvvx xexx8yu x1icxu4v x18d9i69 x25sj25"},b[2]=j):j=b[2];var k;b[3]!==a?(k=i.jsx(c("MWXText.react"),{type:"body3",children:a}),b[3]=a,b[4]=k):k=b[4];b[5]!==e||b[6]!==f||b[7]!==g||b[8]!==h||b[9]!==k?(a=i.jsx("div",babelHelpers["extends"]({},j,{role:"listbox",children:i.jsx(c("CometTypeaheadViewItem.react"),{entry:e,isActive:!1,itemStartContent:f,onHighlightEntry:g,onPressEntry:h,role:"option",children:k})})),b[5]=e,b[6]=f,b[7]=g,b[8]=h,b[9]=k,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10056616957724259"}),null);
__d("MWCreateBroadcastChannelDialogQuery$Parameters",["MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCreateBroadcastChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23896442089962141"}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters",["MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionCreateBroadcastChannelNuxQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWQuickPromotionCreateBroadcastChannelNux.entrypoint",["JSResourceForInteraction","MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:c("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWQuickPromotionCreateBroadcastChannelNux.react").__setRef("MWQuickPromotionCreateBroadcastChannelNux.entrypoint")};b=a;g["default"]=b}),98);
__d("MWCreateBroadcastChannelDialog.entrypoint",["JSResourceForInteraction","MWCreateBroadcastChannelDialogQuery$Parameters","MWQuickPromotionCreateBroadcastChannelNux.entrypoint","NestedRelayEntryPointBuilderUtils"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{entryPoints:{nuxEntryPoint:d("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:c("MWQuickPromotionCreateBroadcastChannelNux.entrypoint"),entryPointParams:{}})},queries:{queryReference:{parameters:c("MWCreateBroadcastChannelDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWCreateBroadcastChannelDialog.react").__setRef("MWCreateBroadcastChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react",["fbt","BroadcastChannelQPL","BroadcastChat.svg.react","MWChatSearchTypeheadActionButtonViewItem.react","MWCreateBroadcastChannelDialog.entrypoint","MWLogBroadcastChannelFalcoEvent","emptyFunction","react","react-compiler-runtime","useBroadcastChannelImpressionLogger","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(9),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"T\u1ea1o k\u00eanh"),a[0]=b):b=a[0];b=b;var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e={},a[1]=e):e=a[1];e=c("useMWXEntryPointDialog")(c("MWCreateBroadcastChannelDialog.entrypoint"),e);var f=e[0];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e={clientExtras:{entry_point:"public_chats:omnipicker"},event:161,parentSurface:7,source:20,surface:4},a[2]=e):e=a[2];e=c("useBroadcastChannelImpressionLogger")(e);var g;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(g={key:"newBroadcastChannel",label:"New Broadcast Channel",type:"entry"},a[3]=g):g=a[3];a[4]!==f?(g=j.jsx(c("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:g,icon:c("BroadcastChat.svg.react"),onHighlightEntry:c("emptyFunction"),onPressEntry:function(){d("BroadcastChannelQPL").logCreateBroadcastChannelQPLStart("public_chats:omnipicker"),d("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({clientExtras:{entry_point:"public_chats:omnipicker"},event:95,parentSurface:7,source:20,surface:4}),f({},k)},title:b}),a[4]=f,a[5]=g):g=a[5];a[6]!==e||a[7]!==g?(b=j.jsx("div",{ref:e,children:g}),a[6]=e,a[7]=g,a[8]=b):b=a[8];return b}function k(){}g["default"]=a}),226);
__d("MessengerGroup.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 26 19",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{d:"M13 10c-2.13 0-3.96-1.5-3.96-4.75C9.04 2.6 10.71.83 13 .83c2.3 0 3.96 1.77 3.96 4.42C16.96 8.51 15.13 10 13 10zm6.62 8.33c.57 0 .88-.5.88-1.1 0-3.08-3.47-5.56-7.5-5.56-4.03 0-7.5 2.48-7.5 5.55 0 .62.3 1.11.88 1.11h13.24zm2.55-7.5c-1.57 0-2.92-1.08-2.92-3.45 0-1.93 1.23-3.21 2.92-3.21s2.91 1.28 2.91 3.21c0 2.37-1.34 3.45-2.91 3.45zm.81 6.67a.83.83 0 0 1-.83-.72l-.01-.11a6.3 6.3 0 0 0-1.7-3.65c-.2-.22-.14-.57.14-.67a4.95 4.95 0 0 1 1.59-.27c1.66 0 3.33.84 3.33 2.5 0 2.92-2.08 2.92-2.08 2.92h-.44zM.92 7.38c0 2.37 1.34 3.45 2.91 3.45s2.92-1.08 2.92-3.45c0-1.93-1.23-3.21-2.92-3.21S.92 5.45.92 7.38zm2.1 10.12h-.44S.5 17.5.5 14.58c0-1.66 1.67-2.5 3.33-2.5.54 0 1.08.1 1.6.27.27.1.33.45.13.67a6.3 6.3 0 0 0-1.7 3.65l-.01.1a.83.83 0 0 1-.83.73z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("useMWLoggerEntrypoint",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("gkx")("23433"),d=null;a!==void 0&&(a==="Inbox"?d=b?"messengerdotcom":"fb_groups:comet_www_inbox":a==="ChatTab"?d="fb_groups:comet_www_chat":a==="FullscreenChat"&&(d="fb_groups:comet_www_fullscreen_chat"));return d}g["default"]=a}),98);
__d("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react",["fbt","$InternalEnum","GroupsCometChatsEngagementLogger","GroupsCometGlobalChatCreationDialog.entrypoint","LSThreadAttributionStore","MWChatSearchTypeheadActionButtonViewItem.react","MWLSThreadDisplayContext","MessengerGroup.svg.react","emptyFunction","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useMWLoggerEntrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=b("$InternalEnum")({CHAT_HEAD:"bottom_chat_create",JEWEL:"top_chat_create"});function a(){var a=d("react-compiler-runtime").c(14),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[0]=b):b=a[0];b=c("useMWXEntryPointDialog")(c("GroupsCometGlobalChatCreationDialog.entrypoint"),b);var e=b[0],f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),g=c("useMWLoggerEntrypoint")(f);b=d("LSThreadAttributionStore").getSourceForNewThread();var i=b==="chatheadsNewMessage"?k.CHAT_HEAD:b==="jewelNewMessage"?k.JEWEL:null;b=(b=g)!=null?b:"";if(a[1]!==b){var m;m={client_extras:{entry_point:b,origin:(m=i)!=null?m:""},event:"community_chat_button_impression",surface:"chat_creation_template_list"};a[1]=b;a[2]=m}else m=a[2];b=c("useGroupsCometChatsEngagementImpressionLogger")(m);a[3]===Symbol["for"]("react.memo_cache_sentinel")?(m={key:"newCommunityChat",label:"New Community Chat",type:"entry"},a[3]=m):m=a[3];var n;a[4]!==f||a[5]!==g||a[6]!==e?(n=function(){var a;e({entrypoint:g!=null?g:void 0,shouldCloseComposeTab:f==="ChatTab",shouldGoToMessenger:f==="Inbox"},l);d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:(a=g)!=null?a:"",origin:(a=i)!=null?a:""},event:"create_cc_button_clicked",source:"create_cc_button",surface:"chat_creation_template_list"})},a[4]=f,a[5]=g,a[6]=e,a[7]=n):n=a[7];var o;a[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"T\u1ea1o \u0111o\u1ea1n chat c\u1ed9ng \u0111\u1ed3ng"),a[8]=o):o=a[8];a[9]!==n?(m=j.jsx(c("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:m,icon:c("MessengerGroup.svg.react"),onHighlightEntry:c("emptyFunction"),onPressEntry:n,title:o}),a[9]=n,a[10]=m):m=a[10];a[11]!==b||a[12]!==m?(o=j.jsx("div",{ref:b,children:m}),a[11]=b,a[12]=m,a[13]=o):o=a[13];return o}function l(){}g["default"]=a}),226);
__d("MWCMLightSpeedChatTabActionViewItems.react",["BaseDivider.react","CurrentEnvironment","MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react","MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react","MWPActor.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={divider:{marginTop:"x1xmf6yo",marginInlineEnd:"x1ys307a",marginBottom:"x1e56ztr",marginInlineStart:"xyqm7xq",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(2),b=c("gkx")("24047")&&!c("CurrentEnvironment").messengerdotcom,e=c("gkx")("24048"),f;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("MWPActor.react").isPromode(),a[0]=f):f=a[0];f=f;var g=e||f;g=b||g;f=f||e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=g?i.jsxs(i.Fragment,{children:[b&&i.jsx(c("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react"),{}),f&&i.jsx(c("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react"),{}),i.jsx(c("BaseDivider.react"),{xstyle:j.divider})]}):null,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=3;async function a(a,b){return(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(15))?[]:m(await l(a,k))}async function l(a,b){a=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.cm_search_nullstate_metadata).filter(function(a){return(i||(i=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(18))}));return a.sort(function(a,b){a=a.score;b=b.score;return a===b?0:a>b?1:-1}).slice(0,b)}function m(a){return a.map(function(a,b){var e=a.communityId,f=a.contextLine,g=a.score,k=a.scoreType,l=a.secondaryThreadPictureUrl,m=a.secondaryThreadPictureUrlFallback,n=a.threadKey,o=a.threadName,p=a.threadPictureUrl;a.threadPictureUrlFallback;var q=a.threadType;babelHelpers.objectWithoutPropertiesLoose(a,["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"]);a={contactId:n,contactType:(j||(j=d("LSIntEnum"))).ofNumber(c("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:g,scoreIndex:(i||(i=d("I64"))).of_int32(b),scoreType:k};return{communityId:e!=null?(i||(i=d("I64"))).to_string(e):"",displayName:o,id:i.to_string(n),imageUrl:(b=(g=p)!=null?g:l)!=null?b:"",isAiBot:i.equal(q,j.ofNumber(201)),isContact:d("LSMessagingThreadTypeUtil").isOneToOne(q),isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(q),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:a,resultType:d("MWChatTemporarySearchResult").getResultType(j.ofNumber(13)),searchSource:"server",secondaryImageUrl:(e=(k=l)!=null?k:m)!=null?e:"",section:h._(/*BTDS*/"K\u00eanh c\u1ee7a b\u1ea1n").toString(),subtext:(o=f)!=null?o:"",threadKey:n,threadType:q}})}g.fetchCCs=a;g.mapToSearchResults=m}),226);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=3;async function a(a,b){return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(15))?[]:l(await k(a,j))}async function k(a,b){a=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.ai_bot_search_metadata));return a.sort(function(a,b){a=a.score;b=b.score;return a===b?0:a>b?1:-1}).slice(0,b)}function l(a){return a.map(function(a,b){var e=a.botId,f=a.contactViewerRelationship,g=a.contextLine,j=a.displayName,k=a.displayPictureUrl;a=a.score;a={contactId:e,contactType:(i||(i=d("LSIntEnum"))).ofNumber(c("MNetContactItemType").BOT),score:a,scoreIndex:(h||(h=d("I64"))).of_int32(b),scoreType:i.ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:j,id:h.to_string(e),imageUrl:(b=k)!=null?b:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(e),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:h.equal(f,i.ofNumber(c("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:a,resultType:c("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:d("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:(j=g)!=null?j:"",threadKey:e,threadType:h.of_int32(201)}})}g.fetchGenAIBots=a;g.mapToSearchResults=l}),98);
__d("MWChatSearchFetchRecommendations",["LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e,f,g,j){var l=e.includes((i||(i=d("LSIntEnum"))).ofNumber(13));e=e.includes(i.ofNumber(16));c("promiseDone")((h||(h=b("Promise"))).all([d("MWChatSearchFetchContactRecommendations").fetchContacts(a,f,g),l?d("MWChatSearchFetchCCRecommendations").fetchCCs(a,g):[],e?d("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(a,g):[]]).then(function(a){var b=a[0],c=a[1];a=a[2];b=k(b,c,a);return j(b)}))}function a(a,b,e,f,g,h){c("promiseDone")(d("MWChatSearchIssueLightspeedQuery").makeSearchQuery(b,f,g));c("gkx")("15587")?c("promiseDone")(d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(a,(i||(i=d("LSIntEnum"))).ofNumber(7)),function(){j(a,b,e,f,h)}):j(a,b,e,f,h);return c("emptyFunction")}function k(a,b,c){return[].concat(c,b,a)}g.requestRecommendations=a;g.blendSearchResults=k}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i={contents:!1},j={contents:!1},k=(h||(h=d("I64"))).of_string("100");function a(a){if(!i.contents&&(h||(h=d("I64"))).gt(k,(h||(h=d("I64"))).zero)){i.contents=!0;c("promiseDone")(a.runInTransaction(function(a){return c("LSInsertRankingContactsStoredProcedure")(c("LSFactory")(a),{limit:k})},"readwrite",void 0,void 0,f.id+":39"),function(){j.contents=!0});return}}function b(){return j.contents}g.insertRankingContacts=a;g.isDone=b}),98);
__d("MWChatSearchResultTypeMapping",["MWChatSearchResultType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case c("MWChatSearchResultType").GROUP:return 3;case c("MWChatSearchResultType").MESSAGE:return 5;case c("MWChatSearchResultType").PAGE:return 4;case c("MWChatSearchResultType").USER:return 1;case c("MWChatSearchResultType").AI_BOT:return 16}}g.mapMWChatSearchResultTypeToLSSearchType=a}),98);
__d("MWChatSearchIssueMAWFTSQuery",["I64","LSContactBitOffset","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MNetRankType","MWChatSearchResultTypeMapping","MWChatTemporarySearchResult","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchStandardResultTypeMappings","MWSearchThreadUtils","ReQL","cr:20302"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,e,f){return d("MAWChatJid").toThreadKeyMaybe(a.tables,b).then(function(b){if(b!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b)).then(function(a){var g;return{displayName:(g=e)!=null?g:"",id:c,imageUrl:"",isAiBot:a!=null&&(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:a!=null?d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType):!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:a!=null&&d("LSThreadBitOffset").has(214,a),isTTLCClipEnabled:a!=null&&d("LSThreadBitOffset").has(226,a),isTTLCGenericXMAShareEnabled:a!=null&&d("LSThreadBitOffset").has(231,a),isTTLCMediaShareEnabled:a!=null&&d("LSThreadBitOffset").has(228,a),isTTLCStoryShareEnabled:a!=null&&d("LSThreadBitOffset").has(229,a),isVerified:!1,matchedTerms:f,resultType:d("MWChatTemporarySearchResult").getResultType((i||(i=d("LSIntEnum"))).ofNumber(5)),searchResultType:14,searchSource:"secure",section:"",subtext:"",threadKey:b}})})}function l(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a)).then(function(a){if(a!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.cutover_threads).filter(function(b){return(h||(h=d("I64"))).equal(b.armadilloThreadId,a.jid)})).then(function(b){if(b!=null)return b.openThreadId;else return a.jid});else return Promise.resolve()})}function m(a){var b=a.score-1e-6;return{contactId:a.contactId,contactType:a.contactType,score:b,scoreIndex:a.scoreIndex,scoreType:a.scoreType}}function n(a,b){return l(a,b).then(function(e){var f=e!=null?e:a,g=e!=null;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.ranking_scores).getKeyRange(f,(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH))).then(function(a){if(a!=null)if(g)return m(a);else return a})})}function o(a,b,c,e){var f;f=(f=b.threadDescription)!=null?f:"";(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(15))&&(f=d("MWLSThreadTitle").getThreadTitleWithSecondaryNames(b.threadDescription,c,e,b.threadType).toString());return f}async function p(a,b,c,e){b=await Promise.all([d("MAWChatJid").toThreadKeyMaybe(a.tables,b),d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId}))]);var f=b[0];b=b[1];if(f==null)return;f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(f));if(f==null||f.folderName!=="inbox")return;var g=await Promise.all([d("MWSearchThreadUtils").getThreadPics(f,b,a),d("MWSearchThreadUtils").getThreadParticipants(f,a),n(f.threadKey,a)]),j=g[0],k=g[1];g=g[2];var l=j[0];j=j[1];var m=d("LSMessagingThreadTypeUtil").isOneToOne(f.threadType),p=d("LSMessagingThreadTypeUtil").isGroup(f.threadType)?(i||(i=d("LSIntEnum"))).ofNumber(3):(i||(i=d("LSIntEnum"))).ofNumber(1),q=null;m===!0&&(q=await d("MWGetOtherContactOrSelf").getOtherContactOrSelf(f.threadKey,b,a));return{displayName:d("MWLSThreadTitle").getDefaultThreadTitle(f.threadName,b,k,f.threadType).toString(),id:(h||(h=d("I64"))).to_string(f.threadKey),imageUrl:l,isAiBot:h.equal(f.threadType,(i||(i=d("LSIntEnum"))).ofNumber(201)),isContact:m,isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:d("LSThreadBitOffset").has(214,f),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,f),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,f),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,f),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,f),isVerified:q!=null?d("LSContactBitOffset").has(23,q):!1,matchedTerms:e,otherUserId:q?(h||(h=d("I64"))).to_string(q.id):void 0,rankingScore:g,resultType:d("MWChatTemporarySearchResult").getResultType(p),searchResultType:d("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(f.threadType),searchSource:"secure",secondaryImageUrl:j,section:"",subtext:o(c,f,b,k),threadKey:f.threadKey,threadType:f.threadType}}async function q(a,b,c){var e,f=await d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId}));b=await d("MAWChatJid").toThreadKeyMaybe(a.tables,b);if(b==null)return null;var g=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b));if(g==null)return null;f=await d("MWSearchThreadUtils").getThreadPics(g,f,a);a=f[0];f=f[1];var j={contactId:(h||(h=d("I64"))).zero,contactType:h.zero,score:h.to_float(g.lastActivityTimestampMs),scoreIndex:h.zero,scoreType:h.zero};return{displayName:(e=g.threadName)!=null?e:"",id:h.to_string(b),imageUrl:a,isAiBot:h.equal(g.threadType,(i||(i=d("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:d("LSThreadBitOffset").has(214,g),isTTLCClipEnabled:d("LSThreadBitOffset").has(226,g),isTTLCGenericXMAShareEnabled:d("LSThreadBitOffset").has(231,g),isTTLCMediaShareEnabled:d("LSThreadBitOffset").has(228,g),isTTLCStoryShareEnabled:d("LSThreadBitOffset").has(229,g),isVerified:!1,matchedTerms:c,rankingScore:j,resultType:d("MWChatTemporarySearchResult").getResultType(i.ofNumber(3)),searchResultType:3,searchSource:"secure",secondaryImageUrl:f,section:"",subtext:(e=g.threadDescription)!=null?e:"",threadKey:b}}async function r(a,b){var c=await (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton;a=await Promise.all(a.map(function(a){switch(a.recordType){case"msg":var d=a.msg,e=d==null?void 0:d.msgId;return d==null||e==null?null:k(c,a.chatJid,e,d.content,a.matchedTerms);case"groupInfo":return q(c,a.groupJid,a.matchedTerms);case"participant":return p(c,a.threadJid,b,a.matchedTerms)}}));return a.filter(Boolean)}function s(a,b,c){return a.filter(function(a){a=(i||(i=d("LSIntEnum"))).ofNumber(d("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(a.resultType));var e=b.includes(a);if(!e)return!1;e=(h||(h=d("I64"))).equal(a,i.ofNumber(3));return!e||c})}function a(a,c,e,f){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"mawdb_query_start"});return d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:f.query,searchMode:d("MAWBridgeSearchMsg").NON_MESSAGE_CONTENT_SEARCH},{timeoutMs:1e4}).then(function(a){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"mawdb_query_end"});return r(a,c)}).then(function(b){return s(b,a,e)})}g.filterSearchResults=s;g.fetchResults=a}),98);
__d("mwGroupEntriesForDisplay",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=new Map();for(a of a){var c,d;c=(c=a.rawData.section)!=null?c:"";d=(d=b.get(c))!=null?d:[];d.push(a);b.set(c,d)}return b}f.mwGroupEntriesForDisplay=a}),66);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["MWCMLightSpeedChatTabActionViewItems.react","MWXText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function k(a){var b=d("react-compiler-runtime").c(19),e=a.activeEntryKey,f=a.children,g=a.entries,h=a.itemRole;a=a.title;var j="chatSearchListHeading-"+a.toString().replace(/\s/g,"-");if(g!=null&&g.length>0){var k;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"xexx8yu x1icxu4v x18d9i69 x25sj25"},b[0]=k):k=b[0];var l;b[1]!==a||b[2]!==j?(l=a?i.jsx("div",babelHelpers["extends"]({className:"x1y1aw1k xf159sx xwib8y2 xmzvs34"},{children:i.jsx(c("MWXText.react"),{id:j,isSemanticHeading:!0,type:"entityHeaderMeta1",children:a})})):null,b[1]=a,b[2]=j,b[3]=l):l=b[3];if(b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==h){b[9]!==e||b[10]!==f||b[11]!==h?(a=function(a,b){var c=e===a.key;return f({entry:a,index:b,isActive:c,itemRole:h})},b[9]=e,b[10]=f,b[11]=h,b[12]=a):a=b[12];a=g.map(a);b[4]=e;b[5]=f;b[6]=g;b[7]=h;b[8]=a}else a=b[8];b[13]!==a||b[14]!==j?(g=i.jsx("ul",{"aria-labelledby":j,children:a}),b[13]=a,b[14]=j,b[15]=g):g=b[15];b[16]!==l||b[17]!==g?(a=i.jsxs("li",babelHelpers["extends"]({},k,{children:[l,g]})),b[16]=l,b[17]=g,b[18]=a):a=b[18];return a}return null}function a(a){var b=a.showActionItems,e=a.ariaProps,f=a.children,g=a.entries,h=a.highlightedEntry;a=babelHelpers.objectWithoutPropertiesLoose(a,["showActionItems","ariaProps","children","entries","highlightedEntry"]);var l=h!=null?h.key:null;a=j(function(){return d("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(g)},[g]);var m=c("getItemRoleFromCompositeRole")(e.role);return i.jsxs("ul",babelHelpers["extends"]({className:"x1yrsyyn xyri2b x10b6aqq x1c1uobl"},{"data-testid":void 0,role:"listbox",children:[b&&i.jsx(c("MWCMLightSpeedChatTabActionViewItems.react"),{}),Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return i.jsx(k,{activeEntryKey:l,children:f,entries:a,itemRole:m,title:b},b)})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=[(h||(h=d("LSIntEnum"))).ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9),h.ofNumber(13)].concat(c("gkx")("24112")?[(h||(h=d("LSIntEnum"))).ofNumber(14)]:[]);b=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2)];e=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9),h.ofNumber(5)];f=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)];c=[h.ofNumber(1)];d=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(4),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)].concat([h.ofNumber(13)]);var i=[h.ofNumber(1),h.ofNumber(2)],j=[h.ofNumber(1),h.ofNumber(2),h.ofNumber(6),h.ofNumber(7),h.ofNumber(8),h.ofNumber(9)],k=[h.ofNumber(1),h.ofNumber(3),h.ofNumber(2)],l=[h.ofNumber(1),h.ofNumber(2)];g.allSupportedTypes=a;g.supportedTypesForMSplitUser=b;g.allSupportedTypesWithMessageSearch=e;g.armadilloSupportedTypes=f;g.onlyContacts=c;g.broadcastFlowSupportedTypes=d;g.addParticipantBase=i;g.addParticipantXac=j;g.socialChannelsSupportedTypes=k;g.communityDirectInviteSupportedTypes=l}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}});b=a;g["default"]=b}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("MWPOfllineOpenMiniSearchSingleton").getInstance().search(a)}function b(a){c("MWPOfllineOpenMiniSearchSingleton").getInstance().add(a)}function d(a){c("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(a)}g.search=a;g.add=b;g.remove=d}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(a,b,c,d,e,f){"use strict";a="Contact";b="ThreadName";c="ThreadParticipant";d={Contact:a,ThreadName:b,ThreadParticipant:c};f.MWPSearchType=d}),66);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchThreadUtils","ReQL","cr:20302","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return"p__"+(h||(h=d("I64"))).to_string(a)+"__"+h.to_string(b)}function e(a,e){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"offline_search_start"});if(l.contents==null){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"});return Promise.resolve([])}var f=l.contents,g=d("MWPSearchOfflineOpenConversations").search(a).filter(function(a){return m(a,e)!==!0});return c("gkx")("6792")===!0?j(f,g,a):d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(f,(i||(i=d("LSIntEnum"))).ofNumber(7)).then(function(){return j(f,g,a)})}async function j(a,c,e){c=await Promise.all(c.map(function(b){var c=b.category.type;if(c==null)return Promise.resolve();switch(c){case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:c=n(b.id);if(c!=null){c=c[0];return r(a,(h||(h=d("I64"))).to_string(c),b.terms)}else return Promise.resolve();case d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return r(a,b.id,b.terms);case d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return o(a,b.id,b.terms,e)}}));c=k(c.filter(Boolean));b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"offline_search_end"});return c}function k(a){var b=a.filter(function(a){return a.resultType!==c("MWChatSearchResultType").GROUP}).sort(t);a=a.filter(function(a){return a.resultType===c("MWChatSearchResultType").GROUP}).sort(t);b=b.concat(a);return b}var l={contents:void 0};function m(a,b){if(b)return!1;b=a.category;return(b==null?void 0:b.type)==="Contact"?!1:!0}function n(a){a=a.split("__");if(a.length!==3)return;else return[(h||(h=d("I64"))).of_string(a[1]),h.of_string(a[2])]}async function o(a,b,e,f){var g;g=await Promise.all([(g=d("ReQL")).firstAsync(g.fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.ig_contact_info).getKeyRange(h.of_string(b))),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.ranking_scores).getKeyRange(h.of_string(b),(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH)))]);a=g[0];b=g[1];g=g[2];if(a==null||p(a,f))return;return d("MWChatTemporarySearchResult").fromContact((g=g)!=null?g:void 0,void 0,a,(g=b)!=null?g:void 0,"offline",e,f)}function p(a,b){var e=d("LSContactBitOffset").hasWithDefault(66,a,!1);return a.isMemorialized===!0||(h||(h=d("I64"))).equal(a.contactViewerRelationship,(h||(h=d("I64"))).one)||!(h||(h=d("I64"))).equal(a.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))||e&&q(a.name,b)}function q(a,b,c){c===void 0&&(c=.7);a=a.trim().toLowerCase();b=b.trim().toLowerCase();b=!a.startsWith(b)||b.length/a.length<c;return b}async function r(a,b,c){var e;e=await Promise.all([(e=d("ReQL")).firstExnAsync(e.fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId})),e.firstAsync(e.leftJoin(e.fromTableAscending(a.tables.threads).getKeyRange((h||(h=d("I64"))).of_string(b)).filter(function(a){return!s(a)}),d("ReQL").fromTableAscending(a.tables.ig_thread_info).getKeyRange(h.of_string(b))))]);b=e[0];e=e[1];if(e==null)return Promise.resolve();var f=e[0];e=e[1];a=await Promise.all([d("MWSearchThreadUtils").getThreadPics(f,b,a),d("MWSearchThreadUtils").getThreadParticipants(f,a)]);var g=a[0];a=a[1];var i={contactId:h.zero,contactType:h.zero,score:h.to_float(f.lastActivityTimestampMs),scoreIndex:h.zero,scoreType:h.zero};return d("MWChatTemporarySearchResult").fromThread(f,"offline",b,g[0],g[1],a,i,c,e)}function s(a){return a.folderName!=="inbox"||d("LSMessagingThreadTypeUtil").isChannelPreview(a.threadType)||d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))}function t(a,b){a=a.rankingScore;a=a!=null?a.score:0;b=b.rankingScore;b=b!=null?b.score:0;if(b>a)return 1;return b<a?-1:0}g.getGroupParticipantKey=a;g.search=e;g.searchHelper=j;g.db=l}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i={contents:!1},j={contents:!1};function a(a){if(!i.contents){i.contents=!0;c("promiseDone")(d("MWLSDatabaseLazySync").sync(a,(h||(h=d("LSIntEnum"))).ofNumber(7)),function(){j.contents=!0});return}}function b(){return j.contents}g.sync=a;g.isDone=b}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.contacts))}function b(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.threads).filter(function(a){return(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(2))}))}function c(a,b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.participants).filter(function(b){return!(h||(h=d("I64"))).equal(b.contactId,a)}).map(function(a){a=[a,d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a.contactId),f.id+":49")];return a}))}g.fetchContacts=a;g.fetchGroupThreads=b;g.fetchGroupParticipants=c}),98);
__d("MWPSearchOpenIndexer",["I64","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map(),k=new Map();function l(a){var b=a.id;a=a.name;b=(h||(h=d("I64"))).to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);i.set(b,a)}function m(a){var b=i.get(a);if(b!=null){i.delete(a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function n(a){var b=a.threadKey;a=a.threadName;if(a==null)return;b=(h||(h=d("I64"))).to_string(b);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:a,id:b};d("MWPSearchOfflineOpenConversations").add(a);j.set(b,a)}function o(a){var b=j.get(a);if(b!=null){j.delete(a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function p(a,b){if(b==null)return;var c=d("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(a.threadKey,a.contactId);b=b.name;a.nickname!=null&&(b+=" "+a.nickname);a={category:{type:d("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:b.trim(),id:c};d("MWPSearchOfflineOpenConversations").add(a);k.set(c,a)}async function q(a,b){a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b.contactId));return p(b,a)}function r(a,b){a=d("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(a,b);b=k.get(a);if(b!=null){k.delete(a);d("MWPSearchOfflineOpenConversations").remove(b);return}}function a(a,b){switch(b.operation){case"add":return l(b.value);case"put":m((h||(h=d("I64"))).to_string(a));return l(b.value);case"delete":return m((h||(h=d("I64"))).to_string(a))}}function b(a,b){switch(b.operation){case"add":return n(b.value);case"put":o((h||(h=d("I64"))).to_string(a));return n(b.value);case"delete":return o((h||(h=d("I64"))).to_string(a))}}function c(a,b,c,d){switch(d.operation){case"add":return q(a,d.value);case"put":r(b,c);return q(a,d.value);case"delete":return Promise.resolve(r(b,c))}}function e(a,b,c,e){d("MWPSearchOfflineOpenConversationsUtils").db.contents=a,b.forEach(l),c.forEach(n),e.forEach(function(a){var b=a[0];a=a[1];return p(b,a)})}g.onContactChanged=a;g.onGroupThreadChanged=b;g.onGroupParticipantChanged=c;g.startInitialIndex=e}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l={contents:!1},m={contents:!1},n={contents:!1},o=c("gkx")("6648");function a(a){if(!n.contents){n.contents=!0;(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){d("MWChatSearchInsertRankingContacts").insertRankingContacts(a);d("MWLSSyncRankings").sync(a);var e=(k||(k=d("I64"))).of_string(c("CurrentUser").getID());l.contents||(l.contents=!0,c("promiseDone")((h||(h=b("Promise"))).all([d("MWPSearchIndexingSource").fetchContacts(a),o?d("MWPSearchIndexingSource").fetchGroupThreads(a):(h||(h=b("Promise"))).resolve([]),o?d("MWPSearchIndexingSource").fetchGroupParticipants(e,a):(h||(h=b("Promise"))).resolve([])]).then(function(b){var c=b[0],e=b[1];b=b[2];d("MWPSearchOpenIndexer").startInitialIndex(a,c,e,b)}),function(){m.contents=!0},function(a){c("FBLogger")("messenger_web_search").catching(a).mustfix("Error indexing contacts for search")}),d("ReQL").fromTableAscending(a.tables.contacts).subscribe(function(a,b){a=a[0];d("MWPSearchOpenIndexer").onContactChanged(a,b)}),o&&(d("ReQL").fromTableAscending(a.tables.threads).filter(function(a){return(k||(k=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(2))}).subscribe(function(a,b){a=a[0];d("MWPSearchOpenIndexer").onGroupThreadChanged(a,b)}),d("ReQL").fromTableAscending(a.tables.participants,["contactId","threadKey","nickname"]).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,e)}).subscribe(function(b,e){var f=b[0];b=b[1];c("promiseDone")(d("MWPSearchOpenIndexer").onGroupParticipantChanged(a,f,b,e))})))});return}}function e(a){return a.runInTransaction(function(a){return c("LSClearTablesStoredProcedure")(c("LSFactory")(a),{clearMessageResults:!1})},"readwrite",void 0,void 0,f.id+":123")}function p(){if(d("MWLSSyncRankings").isDone()&&d("MWChatSearchInsertRankingContacts").isDone())return m.contents;else return!1}g.makeAll=a;g.clearAll=e;g.isDone=p}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=h._(/*BTDS*/"T\u00ecm ki\u1ebfm tin nh\u1eafn cho {param}",[h._param("param",a)]).toString();return{key:a,label:b,rawData:{displayName:b,id:a,imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:c("MWChatSearchResultType").MESSAGE,secondaryImageUrl:"",subtext:""},type:"entry"}}g.createMessageSearchHeaderEntry=a}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{key:a.id,label:a.displayName,rawData:{canViewerMessage:a.canViewerMessage,communityId:a.communityId,defaultE2eeThreadOneToOne:a.defaultE2eeThreadOneToOne,defaultE2eeThreads:a.defaultE2eeThreads,displayName:a.displayName,hasCutoverThread:a.hasCutoverThread,id:a.id,igid:a.resultIgid,imageUrl:a.imageUrl,isAiBot:a.isAiBot,isContact:a.isContact,isDisappearingModeSettingOn:a.isDisappearingModeSettingOn,isE2EE:a.isE2EE,isEPD:a.isEPD,isGroupsXacEligible:Boolean(a.isGroupsXacEligible),isInstagramAccount:Boolean(a.isInstagramAccount),isInstamadilloCutover:a.isInstamadilloCutover,isInteropEligible:a.isInteropEligible!==!1,isRestrictedByViewer:a.isRestrictedByViewer,isTTLCClipEnabled:Boolean(a.isTTLCClipEnabled),isTTLCGenericXMAShareEnabled:Boolean(a.isTTLCGenericXMAShareEnabled),isTTLCMediaShareEnabled:Boolean(a.isTTLCMediaShareEnabled),isTTLCStoryShareEnabled:Boolean(a.isTTLCStoryShareEnabled),isViewerUnconnected:a.isViewerUnconnected,isWAEligible:a.isWAEligible,otherUserId:a.otherUserId,rankingScore:a.rankingScore,reachabilityStatus:a.reachabilityStatus,renderIndex:b,resultType:a.resultType,searchResultType:a.searchResultType,searchSource:a.searchSource,secondaryImageUrl:(b=a.secondaryImageUrl)!=null?b:"",section:a.section,serverSearchResult:a.serverSearchResult,subtext:a.subtext,subtextAdditional:a.subtextAdditional,supportsE2eeSpamdStorage:a.supportsE2eeSpamdStorage,threadType:a.threadType,verificationStatus:a.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:a.waAddressable,waEligibility:a.waEligibility},type:"entry"}}f["default"]=a}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return b===c("MWChatSearchSurfaces").instagramAll?a:a.filter(function(a){return!a.isInstagramAccount})}g["default"]=a}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){var c=b.entries;b=babelHelpers.objectWithoutPropertiesLoose(b,["entries"]);return babelHelpers["extends"]({entries:c.filter(function(b){return!a.includes(b.key)})},b)}}f["default"]=a}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.entries,c=babelHelpers.objectWithoutPropertiesLoose(a,["entries"]),d=(a=a.params)==null?void 0:a.query,e=b.reduce(function(a,b,c){b=b.rawData.section;if(b==null)return a;b===""&&a.set(b,0);var d=a.get(b);d=d==null?c:Math.min(d,c);a.set(b,d);return a},new Map());a=b.map(function(a,b){var c=a.key,f=a.label;a=a.rawData;var g=a.section;return{key:c,label:f,rawData:babelHelpers["extends"]({},a,{query:d,renderIndex:b,sectionRenderIndex:g==null?-1:e.get(g)}),type:"entry"}});return babelHelpers["extends"]({entries:a},c)}f["default"]=a}),66);
__d("sortMWChatSearchLocalResults",["MWChatSearchResultType","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h={group:1,message:2,messages:3,page:4,user:0},i=c("gkx")("23913");function a(a,b){var d,e={};for(var f of a){var g;e[f.id]=(g=f.rankingScore)==null?void 0:g.score}g=a.reduce(function(b,a){var d=a.rankingScore,e=a.resultType;e=e===c("MWChatSearchResultType").USER&&(d==null||d.score==null||d.score===0);e?b[0].push(a):b[1].push(a);return b},[[],[]]);f=g[0];g=g[1];d=(d=c("qex")._("3207"))!=null?d:!1;g=d?g:a;a=g.sort(function(a,c){var d=h[a.resultType],f=h[c.resultType];if(d!==f)return d-f;if(i&&b.length>1){d=(f=(d=a.matchedTerms)==null?void 0:d.length)!=null?f:0;f=(f=(f=c.matchedTerms)==null?void 0:f.length)!=null?f:0;if(f!==d)return f-d}d=(f=e[a.id])!=null?f:0;f=(a=e[c.id])!=null?a:0;return f-d});return d?a.concat(f):a}g["default"]=a}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWStaticSearchEntries","cr:20302","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","isArmadillo","isSearchQualityEnabled","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=10,k=10,l=c("isArmadillo")();a=function(){function a(a){var b=a.database,e=a.excludedIDs;e=e===void 0?[]:e;var f=a.lightspeedSupportedTypes;f=f===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:f;var g=a.source;g=g===void 0?c("MWChatSearchSurfaces").universal:g;var i=a.includeRecommendations;i=i===void 0?!0:i;var j=a.includeGroupSearch;j=j===void 0?!1:j;var k=a.includeMessageSearchEntry;k=k===void 0?!0:k;var l=a.nullstateRankType;l=l===void 0?c("isSearchQualityEnabled")()?(h||(h=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_BLENDED_NULLSTATE):(h||(h=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):l;a=a.includeAiBots;a=a===void 0?!0:a;this.$1=[];this.$5=function(){};this.$1=e;this.$2=g===c("MWChatSearchSurfaces").omnipickerArmadillo?d("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:f;this.$3=g;this.$4=b;this.$6=i;this.$7=j;this.$8=k;this.$9=l;this.$10=a;d("MWPSearchSystem").makeAll(b)}var e=a.prototype;e.resolveData=async function(a,b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=[].concat(this.$8&&a.query.length>1?[d("MWStaticSearchEntries").createMessageSearchHeaderEntry(a.query)]:[],b);b=d("MWChatSearchFilteringUtils").dedupeByThreadKey(b);b=await d("MWChatSearchFilteringUtils").filterSearchResults(b,this.$4,!1,l,!this.$10);var e=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return c("mwChatSearchPayloadEnumerate")(e({entries:b,params:a}))};e.fetchNetwork=function(a){var e=this;b("cr:20302")==null?void 0:b("cr:20302").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},int:{source:(i||(i=d("I64"))).to_int32(this.$3)}}});this.$5();return c("relay-runtime/network/RelayObservable").create(function(f){if(a.query.length===0){e.$5=e.fetchNullstateResults(a,f);return}var g=[],h=[],i=!1;b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{int:{query_length:a.query.length}},point:"local_query_start"});var j=Promise.allSettled(e.issueLocalSearchQuery(a)).then(async function(d){var j=d[0];d=d[1];j=j.status==="fulfilled"?j.value:[];d=d.status==="fulfilled"?d.value:[];b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{int:{offline_search_results_count:d.length,secure_search_results_count:j.length}},point:"local_query_end"});g=e.transformLocalSearchResults(j,d);g=c("sortMWChatSearchLocalResults")(g,a.query);b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"resolve_data_start"});j=await e.resolveData(a,g.concat(h));b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"resolve_data_end"});i||f.next(j)}).catch(function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),k=d("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;c("justknobx")._("2003")&&(k=d("MWChatSearchIssueLightspeedQuery").requestResults);b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"server_query_start"});var l=k(e.$4,e.$2,e.$3,e.$7,a,function(i){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{int:{server_search_results_count:i.length}},point:"server_query_end"});h=i;i=a.query.length>0&&d("MWPSearchSystem").isDone();var k=i?j:Promise.resolve();b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{bool:{wait_for_local_search:i}},point:"wait_for_local_search_start"});c("promiseDone")(k.finally(async function(){b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"wait_for_local_search_end"});b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"resolve_data_start"});var c=await e.resolveData(a,g.concat(h));b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{int:{total_results_count:c.entries.length}},point:"resolve_data_end"});f.next(c);b("cr:20302")==null?void 0:b("cr:20302").qplSuccess();f.complete()}))});e.$5=function(){l(),i=!0}})};e.issueLocalSearchQuery=function(a){return[b("cr:3752")!=null?b("cr:3752").fetchResults(this.$2,this.$3,this.$7,a):Promise.resolve([]),this.$3!==c("MWChatSearchSurfaces").broadcast?d("MWPSearchOfflineOpenConversationsUtils").search(a.query,this.$7):Promise.resolve([])]};e.transformLocalSearchResults=function(a,b){b=j<=0?b:b.slice(0,j);a=k<=0?a:a.slice(0,k);return b.concat(a)};e.fetchNullstateResults=function(a,e){var f=this;if(!this.$6){e.next({entries:[],params:a});e.complete();return function(){}}b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((h||(h=d("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((h||(h=d("LSIntEnum"))).ofNumber(16))},int:{null_state_rank_type:(i||(i=d("I64"))).to_int32(this.$9)}},point:"null_state_query_start"});return d("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,a,async function(d){d=c("filterInstagramContactsMWChatSearchLocalEntries")(d,f.$3);b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"null_state_query_end"});b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({point:"resolve_data_start"});d=await f.resolveData(a,d);b("cr:20302")==null?void 0:b("cr:20302").qplAddPoint({annotations:{int:{null_state_results_count:d.entries.length}},point:"resolve_data_end"});e.next(d);b("cr:20302")==null?void 0:b("cr:20302").qplSuccess();e.complete()})};e.setExcludedIds=function(a){this.$1=a};return a}();g.default=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferredWithEBCheck.react",["cr:9938"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:9938")}),98);
__d("SearchTransportType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6});c=a;f["default"]=c}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("844");b=d("FalcoLoggerInternal").create("universal_search_end",a);e=b;g["default"]=e}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("846");b=d("FalcoLoggerInternal").create("universal_search_result_selected",a);e=b;g["default"]=e}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52});c=a;f["default"]=c}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"non_contacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups"}),j=function(a){switch(a){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function k(a){return a===!0?1:3}function a(a){return a===!0?0:2}function l(a,b){var c=b.searchSource,d=b.section;b=b.sectionAnalyticsName;if(a==="")return 3;if(c!=="server"||d==="")return 5;a=i.cast(b);if(a==null)return 11;switch(a){case i.CM_THREADS:return 13;case i.CONTACTS_GROUPS:return 5;case i.NON_CONTACTS:return 6;case i.PAGES:return 9;default:return 11}}function m(a){return((a=a)!=null?a:-1).toString()}function e(a,b,e,f){var g=e.rawData,i=g.id,n=g.isE2EE,o=g.isEPD,p=g.renderIndex,q=g.searchResultType,r=g.searchSource,s=g.serverSearchResult,t=m(p),u=i,v=k(n);if(s!=null){u=(p=s.resultId)!=null?p:u;v=d("LSMessagingThreadTypeUtil").isArmadilloSecure(s==null?void 0:s.threadType)?1:3;t=(h||(h=d("I64"))).to_string(s.globalIndex)}c("UniversalSearchResultSelectedFalcoEvent").log(function(){var d;return{data_sources:j(r),is_epd:c("gkx")("23390")||o,search_result:{query_string:b,result_fbid:u,result_index:t,result_type:(d=q)!=null?d:7},session_id:a,transport_type:v,ui_section:l(b,g)}});if(!f.current){var w=7;c("gkx")("12505")&&e.rawData.resultType===c("MWChatSearchResultType").MESSAGE&&(w=23);c("UniversalSearchEndFalcoEvent").log(function(){return{end_action:w,is_epd:c("gkx")("24110")||o,session_id:a,transport_type:v}});f.current=!0}}g.SectionAnalyticsNameType=i;g.getLoggingDataSources=j;g.getTransportType=k;g.getLsTransportType=a;g.mapSectionToSearchUISection=l;g.logResultSelected=e}),98);
__d("MWJewelSearchTypeaheadViewItemUtils",["fbt","ConstUriUtils","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","MWSearchLogging","QPLUserFlow","UniversalSearchResultSelectedFalcoEvent","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","gkx","isTlcSearchEnabled","justknobx","qpl"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=function(a){if(a==null)return null;a=a.loggingSessionId;return a};function k(a){a=(a=a)!=null?a:{};var b=a.threadType;a=a.type_;if(b==null||a==null)return!1;if(!d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(b))return!1;if((i||(i=d("I64"))).to_int32(a)!==14)return!1;return!c("gkx")("24052")?!1:!0}function a(a){if(c("CurrentEnvironment").messengerdotcom===!0)return!1;if(c("justknobx")._("1406"))return!1;a=a===c("MWChatSearchResultType").USER||a===c("MWChatSearchResultType").GROUP;return c("isTlcSearchEnabled")()===!0&&a}function b(a){var b;b=(b=a)!=null?b:{};var c=b.threadJoinLinkHash;b=b.threadType;if(b==null||c==null)return void 0;a=k(a)||d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(b);a=a?(b=d("ConstUriUtils").getUri(c))==null?void 0:b.getPath().split("/").reverse()[1]:void 0;return a}function e(a){return a==null?!1:d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a)}function f(a){return a==null?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a)}function l(){return h._(/*BTDS*/"Cu\u1ed9c tr\u00f2 chuy\u1ec7n b\u00ed m\u1eadt")}function m(a,b){c("CurrentEnvironment").facebookdotcom?c("XCometMessengerControllerRouteBuilder").buildURL({link_hash:a,thread_key:b}):c("XMessengerDotComCometMainControllerRouteBuilder").buildURL({link_hash:a,thread_key:b})}function n(a,b,e){if(a==null)return;var f=e.rawData,g=f.id,h=f.isE2EE,i=f.isEPD,j=f.renderIndex,k=f.searchResultType,l=f.searchSource;c("UniversalSearchResultSelectedFalcoEvent").log(function(){var e;return{data_sources:d("MWSearchLogging").getLoggingDataSources(l),is_epd:c("gkx")("23390")||i,search_result:{query_string:b,result_fbid:g,result_index:((e=j)!=null?e:-1).toString(),result_type:(e=k)!=null?e:7},session_id:a,transport_type:d("MWSearchLogging").getTransportType(h),ui_section:d("MWSearchLogging").mapSectionToSearchUISection(b,f)}})}function o(a,b,d,e){a===!0?c("QPLUserFlow").endSuccess(c("qpl")._(25312244,"1683")):c("QPLUserFlow").endCancel(c("qpl")._(25312244,"1683")),n(b,d,e)}g.getSessionId=j;g.isUnjoinedPublicChat=k;g.shouldUpdateThreadKey=a;g.genLinkHash=b;g.isUnjoinedBroadcastChannel=e;g.isBroadcastChannel=f;g.gete2eeAttributionSubtext=l;g.getChatNavigationUrl=m;g.logSearchResultClickHepler=n;g.logSearchResultClick=o}),226);
__d("UniversalSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("845");b=d("FalcoLoggerInternal").create("universal_search_impression",a);e=b;g["default"]=e}),98);
__d("useUniversalSearchImpressionFalcoEvent",["MWSearchLogging","UniversalSearchImpressionFalcoEvent","cr:20302","react","react-compiler-runtime","usePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var e=d("react-compiler-runtime").c(17),f=a.cmGroupId,g=a.entry,h=a.instanceId,i=a.queryString,j=g.rawData;a=j.id;var k=j.isE2EE,l=j.isEPD,m=j.renderIndex,n=j.searchResultType,o=j.searchSource;a=a;var p=a;a=(a=m)!=null?a:-1;var q;e[0]!==a?(q=a.toString(),e[0]=a,e[1]=q):q=e[1];var r=q;if(e[2]!==f||e[3]!==((a=g.rawData)==null?void 0:a.query)||e[4]!==h||e[5]!==k||e[6]!==l||e[7]!==i||e[8]!==j||e[9]!==m||e[10]!==p||e[11]!==r||e[12]!==n||e[13]!==o){q=function(){var a;if(h==null)return;c("UniversalSearchImpressionFalcoEvent").log(function(){var a;return{cm_group_id:f,data_sources:d("MWSearchLogging").getLoggingDataSources(o),impression_selected:!1,is_epd:l,search_result:{query_string:i,result_fbid:p,result_index:r,result_type:(a=n)!=null?a:7},session_id:h,transport_type:d("MWSearchLogging").getTransportType(k),ui_section:d("MWSearchLogging").mapSectionToSearchUISection(i,j)}});b("cr:20302")==null?void 0:b("cr:20302").renderSearchResult({queryString:(a=g.rawData)==null?void 0:a.query,renderIndex:(a=m)!=null?a:-1,sessionInstanceId:h,source:o})};e[2]=f;e[3]=(a=g.rawData)==null?void 0:a.query;e[4]=h;e[5]=k;e[6]=l;e[7]=i;e[8]=j;e[9]=m;e[10]=p;e[11]=r;e[12]=n;e[13]=o;e[14]=q}else q=e[14];a=q;e[15]!==a?(q={onImpressionStart:a},e[15]=a,e[16]=q):q=e[16];return c("usePartialViewImpression")(q)}g["default"]=a}),98);
__d("MWJewelSearchTypeaheadViewItem.react",["BaseMiddot.react","CometTypeaheadViewItem.react","FBLogger","I64","LSIntEnum","LSMessagingThreadTypeUtil","MAWThreadCutover","MWChatFacepile.react","MWChatProfile.react","MWChatSearchResultType","MWJewelSearchTypeaheadViewItemUtils","MWXIconMagnifyingGlass","MWXIconStrict.react","MWXPageVerificationIcon.react","MWXText.react","MWXTextPairing.react","cr:393","cr:4538","cr:4539","deferredLoadComponent","isStringNullOrEmpty","mwCMIsAnyCMThread","react","requireDeferred","useMWNavigation","useMergeRefs","useUniversalSearchImpressionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useEffect,m=e.useRef,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),p={contentRoot:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",":hover_backgroundColor":"x8du52y",$$css:!0}};function a(a){var e=a.entry,f=a.extraViewItemProps,g=a.onPressEntry,h=a.queryString,q=babelHelpers.objectWithoutPropertiesLoose(a,["entry","extraViewItemProps","onPressEntry","queryString"]);a=e.rawData;var r=a.id,s=a.imageUrl,t=a.isE2EE,u=a.isInstagramAccount,v=a.isInteropEligible,w=a.otherUserId,x=a.resultType,y=a.secondaryImageUrl,z=a.section,A=a.serverSearchResult,B=a.subtext,C=a.subtextAdditional,D=a.threadType,E=a.verificationStatus,F=b("cr:4538")==null?void 0:b("cr:4538")(),G=b("cr:4539")==null?void 0:b("cr:4539")({onSuccess:function(a){return F==null?void 0:F(a)}}),H=d("MAWThreadCutover").useShouldHideE2eeAttribution((i||(i=d("I64"))).of_string_opt(r),D),I=c("useMWNavigation")(),J=D!=null&&c("mwCMIsAnyCMThread")(D),K=d("MWJewelSearchTypeaheadViewItemUtils").getSessionId(f);f=c("useUniversalSearchImpressionFalcoEvent")({entry:e,instanceId:K,isCommunityChat:J,queryString:h});var L=m(null);f=c("useMergeRefs")(L,f);var M=n(),N=M[0];M=M[1];w=w;t=t&&!H?d("MWJewelSearchTypeaheadViewItemUtils").gete2eeAttributionSubtext():B;l(function(){if(q.isActive){var a;(a=L.current)==null?void 0:a.scrollIntoView({block:"nearest"})}},[q.isActive]);H=x===c("MWChatSearchResultType").MESSAGE?k.jsx("div",babelHelpers["extends"]({className:"x1qhmfi1 x14yjl9h xudhj91 x18nykt9 xww2gxu x1y1aw1k xf159sx xwib8y2 xmzvs34"},{children:k.jsx(c("MWXIconStrict.react"),{color:"primary",icon:c("MWXIconMagnifyingGlass"),size:20})})):y!==""?(D!=null?d("LSMessagingThreadTypeUtil").isOneToOne(D):!1)?k.jsx(c("MWChatProfile.react"),{size:36,src:y}):k.jsx(c("MWChatFacepile.react"),{firstParticipantURI:s,secondParticipantURI:y,size:36}):k.jsx(c("MWChatProfile.react"),{size:36,src:s});var O=(B=N)!=null?B:r,P=d("MWJewelSearchTypeaheadViewItemUtils").genLinkHash(A);y=babelHelpers["extends"]({},e,{key:O,rawData:babelHelpers["extends"]({},a,{id:O},w==null&&r!==O?{otherUserId:r}:{})});s=E==="BLUE_VERIFIED"||E==="GRAY_VERIFIED";if(c("isStringNullOrEmpty")(e.label)){c("FBLogger")("search").warn("Empty search result label for entry: %s",e.rawData.id);return null}return k.jsx("div",{ref:f,children:k.jsxs(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},q,{entry:y,isDisabled:u===!0&&v===!1,itemStartContent:H,linkProps:{preventLocalNavigation:!0,url:d("MWJewelSearchTypeaheadViewItemUtils").getChatNavigationUrl(P,O)},onPressEntry:d("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedPublicChat(A)?function(){var a;a=(a=A)!=null?a:{};a=a.threadJoinLinkHash;a!=null&&(G==null?void 0:G(a))}:d("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedBroadcastChannel(D)?function(){I.openInbox({threadKey:(i||(i=d("I64"))).of_string(O),threadLinkHash:P,threadType:(j||(j=d("LSIntEnum"))).ofNumber(153)},"jewelSearch")}:function(a,b){g(a,b),d("MWJewelSearchTypeaheadViewItemUtils").logSearchResultClick(J,K,h,e)},testid:void 0,xstyle:p.contentRoot,children:[d("MWJewelSearchTypeaheadViewItemUtils").shouldUpdateThreadKey(x)?k.jsx(o,{id:r.toString(),updateThreadKey:M}):null,k.jsx(c("MWXTextPairing.react"),{body:k.jsxs(c("MWXText.react"),{numberOfLines:1,type:"body3",children:[e.label,E!=null&&s&&!d("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(D)?k.jsx("span",babelHelpers["extends"]({className:"xmzvs34"},{children:k.jsx(c("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:E})})):null]}),level:3,meta:t&&t!==""?k.jsxs(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:[t,d("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(D)&&Boolean(C)&&k.jsxs(k.Fragment,{children:[E!=null&&s&&k.jsx("span",babelHelpers["extends"]({className:"x135b78x xxymvpz"},{children:k.jsx(c("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:E})})),k.jsx(c("BaseMiddot.react"),{}),C]}),(z==null||z==="")&&Boolean(e.rawData.isInstagramAccount)?k.jsxs(k.Fragment,{children:[k.jsx(c("BaseMiddot.react"),{}),"Instagram"]}):null]}):null}),b("cr:393")!=null&&k.jsx(b("cr:393"),{rawData:y.rawData})]}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconCheckmark",["MWXSvgIcon","SVGIcon","cr:12362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWPThreadListItemInviteAddOn.react",["fbt","MWPBumpEntityKey","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXRow.react","MWXRowItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Ch\u1ea5p nh\u1eadn l\u1eddi m\u1eddi"),l=h._(/*BTDS*/"T\u1eeb ch\u1ed1i l\u1eddi m\u1eddi");function a(a){var b=d("react-compiler-runtime").c(7),e=a.onAccept,f=a.onDecline;b[0]!==e?(a=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCheckmark"),label:k,onPress:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.accept"),e(a)},size:32})}),b[0]=e,b[1]=a):a=b[1];var g;b[2]!==f?(g=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:l,onPress:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.decline"),f(a)},size:32})}),b[2]=f,b[3]=g):g=b[3];var h;b[4]!==a||b[5]!==g?(h=j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[a,g]}),b[4]=a,b[5]=g,b[6]=h):h=b[6];return h}g["default"]=a}),226);
__d("MWPThreadsForThreadList",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){if(c!=null){a=d("ReQL").fromTableDescending(a.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),e).getKeyRange(b).bounds({gt:d("ReQL").key((h||(h=d("I64"))).zero)});e=c.minLastActivityTimestampMs;b=c.maxLastActivityTimestampMs;c=!(h||(h=d("I64"))).equal(e,(h||(h=d("I64"))).zero)&&!(h||(h=d("I64"))).equal(e,(h||(h=d("I64"))).one)?e:void 0;e=!(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).zero)&&!(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).one)?b:void 0;if(c!=null)if(e!=null)return a.bounds({gte:d("ReQL").key(c),lte:d("ReQL").key(e)});else return a.bounds({gte:d("ReQL").key(c)});else if(e!=null)return a.bounds({lte:d("ReQL").key(e)});return a}return d("ReQL").empty()}g.createIterable=a}),98);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:d("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},i=c("qpl")._(25301700,"2966");function j(){h.hasStarted=!1,h.query=null}function a(a){var b,e=a.queryString,f=a.sessionInstanceId;a=a.surface;if(h.query!=null&&e==="")return h.instanceKey;h.hasStarted&&k();h.instanceKey=d("MAWLoggerUtils").getInstanceKey();h.hasStarted=!0;h.query=(b=e)!=null?b:"";h.sessionInstanceId=f;c("QPLUserFlow").start(i,{instanceKey:h.instanceKey});l({annotations:{"int":{query_length:(b=e==null?void 0:e.length)!=null?b:0},string:{surface:a}}});return h.instanceKey}function k(a){if(!h.hasStarted)return;c("QPLUserFlow").endCancel(i,{annotations:{string:{end_action:(a=a)!=null?a:"unknown"}},instanceKey:h.instanceKey});j()}function b(a){var b=a.annotations;a=a.point;if(!h.hasStarted)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function l(a){a=a.annotations;if(!h.hasStarted)return;c("QPLUserFlow").addAnnotations(i,a,{instanceKey:h.instanceKey})}function e(a){var b=a.queryString,d=a.renderIndex,e=a.sessionInstanceId;a=a.source;if(!h.hasStarted)return;if(e===h.sessionInstanceId&&b===h.query){c("QPLUserFlow").addPoint(i,"render_search_result_"+d,{data:{"int":{render_index:d},string:{source:(e=a)!=null?e:"unknown"}},instanceKey:h.instanceKey})}}function f(){if(!h.hasStarted)return;c("QPLUserFlow").endSuccess(i,{instanceKey:h.instanceKey});j()}g.qplStart=a;g.qplCancel=k;g.qplAddPoint=b;g.qplAddAnnotations=l;g.renderSearchResult=e;g.qplSuccess=f}),98);
__d("MWXIconPauseChat",["MWXSvgIcon","SVGIcon","cr:12515","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12515")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWThreadAddOnSecondary.react",["fbt","CometOverlappingFacepile_DEPRECATED.react","CurrentEnvironment","FDSBadge.react","I64","MWPActor.react","MWXIconBellCross","MWXIconPauseChat","MWXIconPushpin","MWXIconStrict.react","MWXPressable.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","isArmadillo","react","react-compiler-runtime","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k.memo;function m(a){var b=d("react-compiler-runtime").c(19),e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),h;b[0]!==e.tables.threads||b[1]!==a?(h=function(){return d("ReQL").fromTableAscending(e.tables.threads,["threadKey","lastActivityTimestampMs"]).getKeyRange(a)},b[0]=e.tables.threads,b[1]=a,b[2]=h):h=b[2];var k;b[3]!==e||b[4]!==a?(k=[e,a],b[3]=e,b[4]=a,b[5]=k):k=b[5];var l=d("ReQLSuspense").useFirst(h,k,f.id+":54"),m=c("useMWIsReadReceiptsDisabledForThread")(a);b[6]!==g||b[7]!==e.tables.contacts||b[8]!==e.tables.participants||b[9]!==m||b[10]!==l?(h=function(){if(m||l==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(e.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(l.threadKey).bounds({gte:d("ReQL").key(l.lastActivityTimestampMs)}).filter(function(a){a=a.contactId;return!(j||(j=d("I64"))).equal(a,g)}).take(3).map(function(a){a=a.contactId;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.contacts,["name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(a),f.id+":84");return a!=null?{alt:a.name,source:{uri:c("getLSMediaContactProfilePictureUrl")(a)}}:null})},b[6]=g,b[7]=e.tables.contacts,b[8]=e.tables.participants,b[9]=m,b[10]=l,b[11]=h):h=b[11];b[12]!==g||b[13]!==e||b[14]!==m||b[15]!==l?(k=[e,g,l,m],b[12]=g,b[13]=e,b[14]=m,b[15]=l,b[16]=k):k=b[16];h=d("ReQLSuspense").useArray(h,k,f.id+":65");b[17]!==h?(k=h.filter(Boolean),b[17]=h,b[18]=k):k=b[18];return k}function a(a){var b=d("react-compiler-runtime").c(10),e=a.entryPoint,f=a.isMuted,g=a.isPaused,i=a.isPinnedThread,j=a.isUnread,k=a.isViewerSender,o=a.lastMessageDeliveryStatusIcon;a=a.thread;var p=c("useMWLSMarkThreadAsRead")(e);e=m(a.threadKey);if(b[0]!==f||b[1]!==g||b[2]!==i||b[3]!==j||b[4]!==k||b[5]!==o||b[6]!==p||b[7]!==e){a=[];g&&a.push(l.jsx(c("MWXIconStrict.react"),{color:"disabled",icon:c("MWXIconPauseChat"),size:16}));f&&a.push(l.jsx(c("MWXIconStrict.react"),{color:"disabled",icon:c("MWXIconBellCross"),size:16}));i&&a.push(l.jsx(c("MWXIconStrict.react"),{alt:h._(/*BTDS*/"Cu\u1ed9c tr\u00f2 chuy\u1ec7n \u0111\u00e3 ghim"),color:"disabled",icon:c("MWXIconPushpin"),size:16}));j?a.push(l.jsx(c("MWXPressable.react"),{"aria-hidden":!0,expanding:!0,focusable:!1,onPress:function(a){return p()},testid:void 0,children:l.jsx(c("FDSBadge.react"),{color:"blue",isProfileBadge:!0,size:c("isArmadillo")()&&c("CurrentEnvironment").messengerdotcom?10:12})})):k&&(e.length===0?o&&a.push(o):a.push(l.jsx(c("CometOverlappingFacepile_DEPRECATED.react"),{count:e.length,isTextInline:!0,items:e,screenReaderLabel:e.length===1?h._(/*BTDS*/"{=personName} \u0111\u00e3 xem",[h._param("=personName",e[0].alt)]):h._(/*BTDS*/"_j{\"*\":\"{=numPeople} ng\\u01b0\\u1eddi \\u0111\\u00e3 xem\"}",[h._param("=numPeople",e.length,[0])]),size:16})));var q;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(q={className:"x6s0dn4 x78zum5 xozqiw3"},b[9]=q):q=b[9];q=l.jsx("div",babelHelpers["extends"]({},q,{children:a.map(n)}));b[0]=f;b[1]=g;b[2]=i;b[3]=j;b[4]=k;b[5]=o;b[6]=p;b[7]=e;b[8]=q}else q=b[8];return q}function n(a,b){return l.jsxs(l.Fragment,{children:[b!==0?l.jsx("div",{className:"x1fsd2vl"}):null,a]},"item_"+b.toString(10))}n.displayName=n.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),226);
__d("useMWLogLongSuspense",["MWPBumpEntityKey","clearTimeout","react","react-compiler-runtime","setTimeout","useMergeRefs","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef;function a(a,b){var d=l(a,5,b),e=l(a,15,b),f=l(a,60,b);a=l(a,300,b);return c("useMergeRefs")(d,e,f,a)}var k=/\W/g;function l(a,b,e){var f=d("react-compiler-runtime").c(11),g;f[0]!==a?(g=a.replace(k,"_"),f[0]=a,f[1]=g):g=f[1];var h=g,l=j();f[2]!==e||f[3]!==h||f[4]!==b?(a=function(){l.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mwp","long_suspension."+h+".suspended_"+b+"_sec"),e==null?void 0:e(b)},b*1e3)},f[2]=e,f[3]=h,f[4]=b,f[5]=a):a=f[5];g=a;f[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){c("clearTimeout")(l.current)},f[6]=a):a=f[6];var m=a,n;f[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return m},n=[m],f[7]=a,f[8]=n):(a=f[7],n=f[8]);i(a,n);f[9]!==g?(a={onHidden:m,onVisible:g},f[9]=g,f[10]=a):a=f[10];return c("useVisibilityObserver")(a)}g["default"]=a}),98);
__d("MWThreadListGlimmer.react",["CometVisualCompletionAttributes","MWXGlimmer.react","gkx","react","react-compiler-runtime","react-strict-dom","useMWLogLongSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={glimmerBody:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto:{flexShrink:"x2lah0s",$$css:!0},glimmerPhoto48:{borderTopStartRadius:"xzolkzo",borderTopEndRadius:"x12go9s9",borderBottomEndRadius:"x1rnf11y",borderBottomStartRadius:"xprq8jg",height:"xsdox4t",marginInlineEnd:"x1sa5p1d",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderTopStartRadius:"xzolkzo",borderTopEndRadius:"x12go9s9",borderBottomEndRadius:"x1rnf11y",borderBottomStartRadius:"xprq8jg",height:"xnnlda6",marginInlineEnd:"x1sa5p1d",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"x1a8lsjc",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}},k=c("gkx")("23219");function l(a){var b=d("react-compiler-runtime").c(7),e=a.ref,f=a.role;a=a.vcIgnore;var g;b[0]!==a?(g=a===!0?c("CometVisualCompletionAttributes").IGNORE:{},b[0]=a,b[1]=g):g=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:[k?j.glimmerPhoto48:j.glimmerPhoto56,j.glimmerPhoto]}),b[2]=a):a=b[2];var h;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=i.jsxs(d("react-strict-dom").html.div,{style:j.glimmerText,children:[i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:j.glimmerHeadline}),i.jsx(c("MWXGlimmer.react"),{index:2,xstyle:j.glimmerBody})]}),b[3]=h):h=b[3];b[4]!==f||b[5]!==g?(e=i.jsxs(d("react-strict-dom").html.div,babelHelpers["extends"]({ref:e,role:f,style:j.glimmerRoot},g,{children:[a,h]})),b[4]=f,b[5]=g,b[6]=e):e=b[6];return e}function a(a){var b=d("react-compiler-runtime").c(11),e=a.numberOfItems,f=a.parentComponentForDebug,g=a.role,h=a.vcIgnore;a=e===void 0?1:e;var j=c("useMWLogLongSuspense")(f+".MWThreadListGlimmer");if(b[0]!==a||b[1]!==j||b[2]!==g||b[3]!==h){b[5]!==j||b[6]!==g||b[7]!==h?(e=function(a,b){return i.jsx(l,{ref:b===0?j:void 0,role:g,vcIgnore:h},"mw_list_glimmer_"+b)},b[5]=j,b[6]=g,b[7]=h,b[8]=e):e=b[8];f=Array(a).fill(!0).map(e);b[0]=a;b[1]=j;b[2]=g;b[3]=h;b[4]=f}else f=b[4];b[9]!==f?(e=i.jsx(i.Fragment,{children:f}),b[9]=f,b[10]=e):e=b[10];return e}g["default"]=a}),98);
__d("MWThreadListItemAddOnEnd.react",["fbt","FBGroupChatInviteState","I64","Int64Hooks","LSFactory","LSIntEnum","LSUpdateCommunityChannelDirectInviteStoredProcedure","MWCMGetValidId","MWJewelPopoverDialogContext.react","MWPActor.react","MWPIsThreadUnread","MWPThreadListItemInviteAddOn.react","MWThreadAddOnSecondary.react","ReQL","ReQLSuspense","ThreadStatus","cometPushToast","cr:21160","promiseDone","react","react-compiler-runtime","requireDeferred","useEmptyFunction","useMWChatCalculateIsMutedFromExpireTime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react")),n=j.useContext,o=c("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWThreadListItemAddOnEnd.react"),p=(b=(b=b("cr:21160"))==null?void 0:b.useIsPinnedThread)!=null?b:c("useEmptyFunction");function q(a){var b=a.clientExtras,c=a.communityId,e=a.event,f=a.groupId,g=a.parentSurface,h=g===void 0?"channel_list":g,i=a.source,j=a.threadId;o.onReady(function(a){return a.log(function(){return{action:"tap",client_extras:b,community_id:c==null?null:(l||(l=d("I64"))).to_string(c),event:e,group_id:d("MWCMGetValidId").MWCMHasValidFbGroupId(f)?(l||(l=d("I64"))).to_string(f):null,parent_surface:h,source:i,surface:"chat_row",thread_id:(l||(l=d("I64"))).to_string(j)}})})}function a(a){var b,e=d("react-compiler-runtime").c(32),g=a.communityId,j=a.fbGroupId,o=a.isMaximized,r=a.messagingEntrypoint,s=a.mutedUntilMs,t=a.parentSurface,u=a.showGroupsJoinChatDialog,v=a.thread,w=(i||(i=c("useReStore")))();a=d("MWPActor.react").useActor();var x=v.snippetSenderContactId,y;e[0]!==a||e[1]!==x?(y=x!=null?(l||(l=d("I64"))).equal(x,a):!1,e[0]=a,e[1]=x,e[2]=y):y=e[2];a=y;x=(l||(l=d("I64"))).equal(v.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(0));y=n(c("MWJewelPopoverDialogContext.react"));var z=y.setIsOpenForDialog;y=v.hasPendingInvitation||!1;s=c("useMWChatCalculateIsMutedFromExpireTime")(s);b=(b=p(v.threadTags))!=null?b:!1;var A=d("MWPIsThreadUnread").useIsThreadUnread(v.threadKey),B;e[3]!==v.threadStatus?(B=v.threadStatus!=null&&((l||(l=d("I64"))).equal(v.threadStatus,(l||(l=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(l||(l=d("I64"))).equal(v.threadStatus,(l||(l=d("I64"))).of_int32(c("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),e[3]=v.threadStatus,e[4]=B):B=e[4];B=B;var C;e[5]!==g||e[6]!==w||e[7]!==j||e[8]!==t||e[9]!==v.needsAdminApprovalForNewParticipant||e[10]!==v.threadKey?(C=function(){var a;c("promiseDone")(w.runInTransaction(function(a){return c("LSUpdateCommunityChannelDirectInviteStoredProcedure")(c("LSFactory")(a),{channelId:v.threadKey,state:(k||(k=d("LSIntEnum"))).ofNumber(c("FBGroupChatInviteState").DECLINED_BY_RECEIVER)})},"readwrite",void 0,void 0,f.id+":158"));q({clientExtras:{member_join_request_enabled:((a=v.needsAdminApprovalForNewParticipant)!=null?a:!1)?"1":"0"},communityId:g,event:"invite_declined",groupId:j,parentSurface:t,source:"direct_invite_decline_button",threadId:v.threadKey});d("cometPushToast").cometPushSimpleToast(h._(/*BTDS*/"B\u1ea1n \u0111\u00e3 t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi tham gia").toString())},e[5]=g,e[6]=w,e[7]=j,e[8]=t,e[9]=v.needsAdminApprovalForNewParticipant,e[10]=v.threadKey,e[11]=C):C=e[11];C=C;if(y){e[12]!==g||e[13]!==j||e[14]!==r||e[15]!==t||e[16]!==z||e[17]!==u||e[18]!==v.needsAdminApprovalForNewParticipant||e[19]!==v.threadKey?(y=function(a){var b;q({clientExtras:{member_join_request_enabled:((b=v.needsAdminApprovalForNewParticipant)!=null?b:!1)?"1":"0"},communityId:g,event:"invite_accepted",groupId:j,parentSurface:t,source:"direct_invite_join_button",threadId:v.threadKey});z(r==="jewel");return u(a)},e[12]=g,e[13]=j,e[14]=r,e[15]=t,e[16]=z,e[17]=u,e[18]=v.needsAdminApprovalForNewParticipant,e[19]=v.threadKey,e[20]=y):y=e[20];var D;e[21]!==C||e[22]!==y?(D=m.jsx(c("MWPThreadListItemInviteAddOn.react"),{onAccept:y,onDecline:C}),e[21]=C,e[22]=y,e[23]=D):D=e[23];return D}if(o||!x){e[24]!==s||e[25]!==B||e[26]!==b||e[27]!==A||e[28]!==a||e[29]!==r||e[30]!==v?(C=m.jsx(c("MWThreadAddOnSecondary.react"),{entryPoint:r,isMuted:s,isPaused:B,isPinnedThread:b,isUnread:A,isViewerSender:a,lastMessageDeliveryStatusIcon:null,thread:v}),e[24]=s,e[25]=B,e[26]=b,e[27]=A,e[28]=a,e[29]=r,e[30]=v,e[31]=C):C=e[31];return C}return null}var r=m.memo(a);function e(a){var b=d("react-compiler-runtime").c(25),e,g,h,j,k;b[0]!==a?(k=a.threadKey,e=a.communityId,g=a.fbGroupId,h=a.renderAddOnEnd,j=babelHelpers.objectWithoutPropertiesLoose(a,["threadKey","communityId","fbGroupId","renderAddOnEnd"]),b[0]=a,b[1]=e,b[2]=g,b[3]=h,b[4]=j,b[5]=k):(e=b[1],g=b[2],h=b[3],j=b[4],k=b[5]);var l;b[6]!==g?(a=function(){return g},l=[g],b[6]=g,b[7]=a,b[8]=l):(a=b[7],l=b[8]);a=d("Int64Hooks").useMemoInt64(a,l);var n;b[9]!==e?(l=function(){return e},n=[e],b[9]=e,b[10]=l,b[11]=n):(l=b[10],n=b[11]);l=d("Int64Hooks").useMemoInt64(l,n);var o=(i||(i=c("useReStore")))();b[12]!==o.tables.threads||b[13]!==k?(n=function(){return d("ReQL").fromTableAscending(o.tables.threads,["threadType","threadStatus","threadKey","snippetSenderContactId","parentThreadKey","hasPendingInvitation","takedownState","needsAdminApprovalForNewParticipant","threadTags"]).getKeyRange(k)},b[12]=o.tables.threads,b[13]=k,b[14]=n):n=b[14];var p;b[15]!==o||b[16]!==k?(p=[o,k],b[15]=o,b[16]=k,b[17]=p):p=b[17];n=d("ReQLSuspense").useFirst(n,p,f.id+":246");if(h!=null){b[18]!==h?(p=h(),b[18]=h,b[19]=p):p=b[19];return p}if(n==null)return null;b[20]!==l||b[21]!==a||b[22]!==j||b[23]!==n?(h=m.jsx(r,babelHelpers["extends"]({communityId:l,fbGroupId:a,thread:n},j)),b[20]=l,b[21]=a,b[22]=j,b[23]=n,b[24]=h):h=b[24];return h}g["default"]=e}),226);
__d("useMWAriaLabelForThread",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){var b=d("react-compiler-runtime").c(13),e=a.threadKey,g=a.threadName,j=a.threadType,k=d("MWPActor.react").useActor(),l=(i||(i=c("useReStore")))();b[0]!==l.tables.contacts||b[1]!==l.tables.participants||b[2]!==e?(a=function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(l.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(e),d("ReQL").fromTableAscending(l.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},b[0]=l.tables.contacts,b[1]=l.tables.participants,b[2]=e,b[3]=a):a=b[3];var m;b[4]!==l||b[5]!==e?(m=[l,e],b[4]=l,b[5]=e,b[6]=m):m=b[6];var n=d("ReQLSuspense").useArray(a,m,f.id+":37");b[7]!==k||b[8]!==n||b[9]!==g||b[10]!==j?(a=function(){var a=g;if(a!=null)return h._(/*BTDS*/"Cu\u1ed9c tr\u00f2 chuy\u1ec7n c\u00f3 ti\u00eau \u0111\u1ec1 {name of conversation}",[h._param("name of conversation",a)]);a=(a=d("MWPGetThreadTitle").computeThreadTitle(void 0,j,n,k))!=null?a:"";return h._(/*BTDS*/"Cu\u1ed9c tr\u00f2 chuy\u1ec7n v\u1edbi {participant list}",[h._param("participant list",a)])},m=[g,j,n,k],b[7]=k,b[8]=n,b[9]=g,b[10]=j,b[11]=a,b[12]=m):(a=b[11],m=b[12]);return d("Int64Hooks").useMemoInt64(a,m)}g["default"]=a}),226);
__d("MessageRequestsBulkActionsThreadListItem",["ix","CometPressable.react","I64","JSSet.bs","MWPIsThreadUnread","MWXIcon.react","MessageRequestsBulkActionsContext.react","fbicon","react","react-compiler-runtime","useMWAriaLabelForThread"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;b.useCallback;var l=b.useContext,m=b.useEffect,n={pressableContent:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",display:"x1lliihq",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(33),e=a.thread;a=a.threadListCell;var f=l(c("MessageRequestsBulkActionsContext.react")),g=f.setBulkActionsUnreadSelectedThreads,i=f.setBulkActionsSelectedThreads,n=f.bulkActionsSelectedThreads;b[0]!==e.threadKey?(f=(j||(j=d("I64"))).to_string(e.threadKey),b[0]=e.threadKey,b[1]=f):f=b[1];var p=f;b[2]!==i||b[3]!==p?(f=function(){return i(function(a){a=new Set(d("JSSet.bs").values(a));if(a["delete"](p))return a;else return a.add(p)})},b[2]=i,b[3]=p,b[4]=f):f=b[4];f=f;var q;b[5]!==n||b[6]!==g||b[7]!==e||b[8]!==p?(q=function(){g(function(a){a=new Set(d("JSSet.bs").values(a));if(d("MWPIsThreadUnread").isThreadUnread(e)&&n.has(p))return a.add(p);else if(d("MWPIsThreadUnread").isThreadUnread(e)){a["delete"](p);return a}else return a})},b[5]=n,b[6]=g,b[7]=e,b[8]=p,b[9]=q):q=b[9];var r;b[10]!==n?(r=[n],b[10]=n,b[11]=r):r=b[11];m(q,r);b[12]!==n||b[13]!==p?(q=n.has(p),b[12]=n,b[13]=p,b[14]=q):q=b[14];r=q;q=c("useMWAriaLabelForThread")(e);var s,t;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(s={className:"x6s0dn4 x78zum5 xexx8yu x2vl965 x18d9i69 xe2zdcy"},t={className:"xf159sx"},b[15]=s,b[16]=t):(s=b[15],t=b[16]);var u=r?"highlight":"disabled",v;b[17]!==r?(v=r?d("fbicon")._(h("484757"),20):d("fbicon")._(h("659288"),20),b[17]=r,b[18]=v):v=b[18];b[19]!==u||b[20]!==v?(t=k.jsx("div",babelHelpers["extends"]({},t,{children:k.jsx(c("MWXIcon.react"),{color:u,hideHoverOverlay:!0,icon:v})})),b[19]=u,b[20]=v,b[21]=t):t=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(u={className:"x1iyjqo2 xeuugli x47corl"},b[22]=u):u=b[22];b[23]!==a?(v=k.jsx("div",babelHelpers["extends"]({},u,{children:a})),b[23]=a,b[24]=v):v=b[24];b[25]!==v||b[26]!==t?(u=k.jsxs("div",babelHelpers["extends"]({"aria-hidden":!0},s,{children:[t,v]})),b[25]=v,b[26]=t,b[27]=u):u=b[27];b[28]!==q||b[29]!==r||b[30]!==f||b[31]!==u?(a=k.jsx(c("CometPressable.react"),{"aria-checked":r,"aria-label":q,onPress:f,role:"checkbox",xstyle:o,children:u}),b[28]=q,b[29]=r,b[30]=f,b[31]=u,b[32]=a):a=b[32];return a}function o(){return[n.pressableContent]}g["default"]=a}),98);
__d("useGroupsCometJoinChatDialog",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWXCardedDialogLoadingState.react","react","react-compiler-runtime","useMWCMShouldGoToFullScreenChatHook","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;function k(){return j.jsx(c("MWXCardedDialogLoadingState.react"),{})}k.displayName=k.name+" [from "+f.id+"]";function a(a,b,e,f,g,h){var j=d("react-compiler-runtime").c(12),l,m;j[0]!==b||j[1]!==a.threadKey?(l=function(){var c;return{groupID:(i||(i=d("I64"))).to_string((c=b)!=null?c:(i||(i=d("I64"))).zero),threadID:i.to_string(a.threadKey)}},m=[b,a.threadKey],j[0]=b,j[1]=a.threadKey,j[2]=l,j[3]=m):(l=j[2],m=j[3]);l=d("Int64Hooks").useMemoInt64(l,m);m=c("useMWXEntryPointDialog")(c("GroupsCometJoinChatDialog.entrypoint"),l,void 0,k);var n=m[0],o=c("useMWCMShouldGoToFullScreenChatHook")(),p=a.hasPendingInvitation||!1;j[4]!==p||j[5]!==h||j[6]!==g||j[7]!==e||j[8]!==o||j[9]!==n||j[10]!==f?(l=function(){var a={invited:p,isSMC:h,onSuccess:g,parentSurface:e,shouldGoToMessenger:o,surface:f};n(a)},j[4]=p,j[5]=h,j[6]=g,j[7]=e,j[8]=o,j[9]=n,j[10]=f,j[11]=l):l=j[11];return l}g["default"]=a}),98);
__d("getValidMediaURL",["I64","ServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()/1e3)}function j(a){if((h||(h=d("I64"))).gt(a,(h||(h=d("I64"))).zero))return(h||(h=d("I64"))).lt(a,i());else return!1}function a(a,b,c){return a!=null?j(a)?c:b:c}g["default"]=a}),98);
__d("useMWCMJoinCMThread",["C4GFalcoLoggerDeferred","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSCommunityBitOffset","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadViewStoredProcedure","ReQL","ThreadStatus","emptyFunction","mwCMisStandAloneCommunity","promiseDone","react","react-compiler-runtime","useGroupsCometCMOffboardingEntryPointDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useState,m=function(a){return(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(18))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(21))};function a(a,b){var e=d("react-compiler-runtime").c(32),g=(h||(h=c("useReStore")))(),i;e[0]!==b?(i=b?d("LSCommunityBitOffset").has(1,b):!1,e[0]=b,e[1]=i):i=e[1];var n=i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=c("JSResourceForInteraction")("MWCMPausedChatMemberDialog.react").__setRef("useMWCMJoinCMThread"),e[2]=i):i=e[2];i=c("useMWXLazyDialog")(i);var o=i[0],p=c("useMWNavigation")();i=l(!1);var q=i[0],r=i[1];e[3]!==(b==null?void 0:b.fbGroupId)?(i=function(){var a;return{groupID:(j||(j=d("I64"))).to_string((a=b==null?void 0:b.fbGroupId)!=null?a:(j||(j=d("I64"))).zero)}},e[3]=b==null?void 0:b.fbGroupId,e[4]=i):i=e[4];var s=b==null?void 0:b.fbGroupId,t;e[5]!==s?(t=[s],e[5]=s,e[6]=t):t=e[6];s=c("useGroupsCometCMOffboardingEntryPointDialog")(d("Int64Hooks").useMemoInt64(i,t));var u=s[0],v=a.clientThreadKey,w=a.threadKey,x=a.threadType;e[7]!==v||e[8]!==p||e[9]!==q||e[10]!==w||e[11]!==x?(i=function(){if(!q)return;m(x)&&(p.openTabOrInbox({clientThreadKey:v,threadKey:w,threadType:x},"inboxThreadList"),r(!1))},t=[x,v,w,q,p],e[7]=v,e[8]=p,e[9]=q,e[10]=w,e[11]=x,e[12]=i,e[13]=t):(i=e[12],t=e[13]);d("Int64Hooks").useEffectInt64(i,t);e[14]!==g||e[15]!==(b==null?void 0:b.communityType)||e[16]!==(b==null?void 0:b.enableState)||e[17]!==(b==null?void 0:b.fbGroupId)||e[18]!==n||e[19]!==u||e[20]!==o||e[21]!==w?(s=function(a,e,h,i){c("promiseDone")(async function(){var l,m=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(w));if(m==null)return;var p=function(){c("promiseDone")(g.runInTransaction(function(a){return c("LSVerifyThreadViewStoredProcedure")(c("LSFactory")(a),{contacts:c("LSVec").ofArray([]),mailboxType:(k||(k=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),threadKey:m.threadKey,threadType:m.threadType})},"readwrite",void 0,void 0,f.id+":148"))},q=m.hasPendingInvitation||!1,s=m.threadStatus!=null&&(j||(j=d("I64"))).equal(m.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED));l=(j||(j=d("I64"))).equal((l=b==null?void 0:b.enableState)!=null?l:(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").ENABLED),(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED));s=!l&&s&&!d("LSThreadBitOffset").has(154,m)&&!q;if(s)return o({thread:m},c("emptyFunction"));if(!l&&d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,b==null?void 0:b.communityType)&&h){q=e?e.metaKey||e.ctrlKey||e.shiftKey:!1;p();return h(q)}if(c("mwCMisStandAloneCommunity")(b==null?void 0:b.communityType)){!d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,b==null?void 0:b.communityType)?(a(),r(!0)):c("promiseDone")(g.runInTransaction(function(a){r(!0);return c("LSJoinCommunityChannelStoredProcedure")(c("LSFactory")(a),{entryPoint:"",isRequestToJoin:!1,threadKey:m.threadKey})},"readwrite","ui",void 0,f.id+":213"));return}if(m.needsAdminApprovalForNewParticipant===!0&&n&&i){d("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",client_extras:{member_join_request_enabled:"1"},community_id:(j||(j=d("I64"))).to_string(m.parentThreadKey),event:"thread_join",parent_surface:"thread_list",source:m.hasPendingInvitation===!0?"direct_invite_join_button":"join_button",surface:"messenger_inbox",thread_id:j.to_string(m.threadKey)});return i()}if(!l)return a();if((b==null?void 0:b.fbGroupId)==null)return;return u({},c("emptyFunction"))}())},e[14]=g,e[15]=b==null?void 0:b.communityType,e[16]=b==null?void 0:b.enableState,e[17]=b==null?void 0:b.fbGroupId,e[18]=n,e[19]=u,e[20]=o,e[21]=w,e[22]=s):s=e[22];a=b==null?void 0:b.communityType;i=b==null?void 0:b.enableState;t=b==null?void 0:b.fbGroupId;var y;e[23]!==g||e[24]!==n||e[25]!==u||e[26]!==o||e[27]!==t||e[28]!==a||e[29]!==i||e[30]!==w?(y=[g,a,i,t,n,u,o,w],e[23]=g,e[24]=n,e[25]=u,e[26]=o,e[27]=t,e[28]=a,e[29]=i,e[30]=w,e[31]=y):y=e[31];return d("Int64Hooks").useCallbackInt64(s,y)}g.default=a}),98);
__d("useMWResponsiveLogExtraData",["gkx","react-compiler-runtime","useMatchViewport"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("react-compiler-runtime").c(2),b=c("gkx")("24056"),e=c("useMatchViewport")("min","width",900);b="mw_responsive_layout: "+b.toString()+", is900px: "+e.toString();a[0]!==b?(e={responsive:b},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useOnPressMWThreadListItem",["fbt","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MAWGroupInvitesForThread","MWCMThreadTypes.react","MWPIsThreadUnread","MessengerThreadTakedownState","MessengerWebUXLogger","ReQL","ThreadStatus","emptyFunction","getValidMediaURL","promiseDone","react-compiler-runtime","useCommunityFolder","useGroupsCometCMDisabledChatEntryPointDialog","useMWCMJoinCMThread","useMWNavigation","useMWResponsiveLogExtraData","useMWXLazyDialog","useMWXPushErrorToast","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function l(a){var b=d("react-compiler-runtime").c(9),e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useOnPressMWThreadListItem"),b[0]=e):e=b[0];e=c("useMWXLazyDialog")(e);var f=e[0],g=(k||(k=c("useReStore")))();b[1]!==g.tables.threads||b[2]!==f||b[3]!==a?(e=function(){return function(){c("promiseDone")(async function(){var b;b=(b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a)))!=null?b:{};var e=b.threadName,h=b.threadPictureUrl,i=b.threadPictureUrlExpirationTimestampMs;b=b.threadPictureUrlFallback;if(i==null||h==null||b==null||e==null)return;i=c("getValidMediaURL")(i,h,b);f({threadImageUrl:i,threadTitle:e},c("emptyFunction"))}())}},b[1]=g.tables.threads,b[2]=f,b[3]=a,b[4]=e):e=b[4];var h;b[5]!==g||b[6]!==f||b[7]!==a?(h=[g,f,a],b[5]=g,b[6]=f,b[7]=a,b[8]=h):h=b[8];return d("Int64Hooks").useMemoInt64(e,h)}function a(a,b,e,f,g,m){var n=d("react-compiler-runtime").c(47),o=g===void 0?!0:g,p=(k||(k=c("useReStore")))(),q=c("useMWNavigation")();n[0]===Symbol.for("react.memo_cache_sentinel")?(g=c("JSResourceForInteraction")("MAWGroupInviteDialog.react").__setRef("useOnPressMWThreadListItem"),n[0]=g):g=n[0];g=c("useMWXLazyDialog")(g);var r=g[0],s=c("useCommunityFolder")(e),t=c("MessengerWebUXLogger").useInteractionLogger();n[1]!==e.takedownState?(g=e.takedownState!=null&&(i||(i=d("I64"))).equal(e.takedownState,(j||(j=d("LSIntEnum"))).ofNumber(c("MessengerThreadTakedownState").GEO_BLOCKED)),n[1]=e.takedownState,n[2]=g):g=n[2];var u=g;n[3]!==e.threadKey?(g=(i||(i=d("I64"))).to_string(e.threadKey),n[3]=e.threadKey,n[4]=g):g=n[4];var v;n[5]!==u||n[6]!==g?(v={isGeoBlocked:u,threadID:g},n[5]=u,n[6]=g,n[7]=v):v=n[7];g=c("useGroupsCometCMDisabledChatEntryPointDialog")(v);var w=g[0];n[8]!==e.threadType?(v=d("LSMessagingThreadTypeUtil").isPublicCMThread(e.threadType),n[8]=e.threadType,n[9]=v):v=n[9];var x=v;g=l(e.threadKey);var y=g[0],z=c("useMWCMJoinCMThread")(e,s),A=c("useMWXPushErrorToast")(),B=c("useMWResponsiveLogExtraData")();n[10]!==p||n[11]!==B||n[12]!==a||n[13]!==u||n[14]!==o||n[15]!==x||n[16]!==z||n[17]!==t||n[18]!==b||n[19]!==m||n[20]!==(s==null?void 0:s.takedownState)||n[21]!==q||n[22]!==A||n[23]!==f||n[24]!==w||n[25]!==r||n[26]!==y||n[27]!==e.threadKey?(v=function(g,k,l,n){c("promiseDone")(async function(){var v,C=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(p.tables.threads).getKeyRange(e.threadKey));if(C==null)return;var D=d("MAWGroupInvitesForThread").isGroupInviteThread(C),E=d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(C.threadType),F=d("MWCMThreadTypes.react").isUnjoinedCMThread(C.threadType),G=d("LSMessagingThreadTypeUtil").isCMSubthread(C.threadType),H=C.threadStatus!=null&&((i||(i=d("I64"))).equal(C.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(i||(i=d("I64"))).equal(C.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),I=(s==null?void 0:s.takedownState)!=null&&(i||(i=d("I64"))).equal(s==null?void 0:s.takedownState,(i||(i=d("I64"))).of_int32(1)),J=C.takedownState!=null&&(i||(i=d("I64"))).equal(C.takedownState,(j||(j=d("LSIntEnum"))).ofNumber(c("MessengerThreadTakedownState").TAKEN_DOWN)),K=C.needsAdminApprovalForNewParticipant===!0;v=(i||(i=d("I64"))).equal((v=a)!=null?v:(j||(j=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").ENABLED),(j||(j=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED));var L=C.folderName==="inbox"?(j||(j=d("LSIntEnum"))).ofNumber(12):C.folderName==="pending"?(j||(j=d("LSIntEnum"))).ofNumber(29):(j||(j=d("LSIntEnum"))).ofNumber(30),M=d("MWPIsThreadUnread").isThreadUnread(C),N=function(a){var c={clientThreadKey:C.clientThreadKey,isUnread:M,threadKey:C.threadKey,threadType:C.threadType};if(a)return q.openInbox(c,b,L);q.openTabOrInbox(c,b,n,L,{subEntrypoint:m});l&&l()},O=function(){f==null?void 0:f(!0),c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(p,function(a){return c("LSJoinCommunityChannelStoredProcedure")(c("LSFactory")(a),{entryPoint:"messengerdotcom",isRequestToJoin:K,threadKey:e.threadKey})},"joinCommunityChannel"),function(){N(!1),f==null?void 0:f(!1)},function(){A({title:h._(/*BTDS*/"Kh\u00f4ng th\u1ec3 tham gia chat. H\u00e3y th\u1eed l\u1ea1i sau.")})})},P=C.hasPendingInvitation||!1;v=!v&&H&&!d("LSThreadBitOffset").has(154,C)&&!P;t==null?void 0:t({eventName:"open_thread",extraData:B,threadKey:C.threadKey,threadType:C.threadType});o||(t==null?void 0:t({eventName:"open_thread_from_mini_list",extraData:B,threadKey:C.threadKey,threadType:C.threadType}));if(x&&(J||I||u))return w({threadID:(i||(i=d("I64"))).to_string(C.threadKey)});if(F)return z(k,g,N,O);if(E&&v)return y();D?r({thread:C},c("emptyFunction")):G||N(g.metaKey||g.ctrlKey||g.shiftKey)}())},n[10]=p,n[11]=B,n[12]=a,n[13]=u,n[14]=o,n[15]=x,n[16]=z,n[17]=t,n[18]=b,n[19]=m,n[20]=s==null?void 0:s.takedownState,n[21]=q,n[22]=A,n[23]=f,n[24]=w,n[25]=r,n[26]=y,n[27]=e.threadKey,n[28]=v):v=n[28];g=s==null?void 0:s.takedownState;var C;n[29]!==p||n[30]!==B||n[31]!==a||n[32]!==u||n[33]!==o||n[34]!==z||n[35]!==t||n[36]!==b||n[37]!==m||n[38]!==q||n[39]!==A||n[40]!==f||n[41]!==w||n[42]!==r||n[43]!==y||n[44]!==g||n[45]!==e.threadKey?(C=[p,e.threadKey,g,a,t,o,u,q,b,m,f,A,w,z,y,r,B],n[29]=p,n[30]=B,n[31]=a,n[32]=u,n[33]=o,n[34]=z,n[35]=t,n[36]=b,n[37]=m,n[38]=q,n[39]=A,n[40]=f,n[41]=w,n[42]=r,n[43]=y,n[44]=g,n[45]=e.threadKey,n[46]=C):C=n[46];return d("Int64Hooks").useCallbackInt64(v,C)}g.default=a}),226);
__d("usePreloadRoute",["JSScheduler","react","react-compiler-runtime","useCometRouterDispatcher","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(a,b){var e=d("react-compiler-runtime").c(6),f=c("useMWNavigation")(),g=c("useCometRouterDispatcher")(),h,k;e[0]!==g||e[1]!==f||e[2]!==a||e[3]!==b?(h=function(){(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){g!=null&&g.prefetchRouteDefinition(f.getUrlFromThreadKey(a,b))})},k=[g,f,a,b],e[0]=g,e[1]=f,e[2]=a,e[3]=b,e[4]=h,e[5]=k):(h=e[4],k=e[5]);j(h,k)}g["default"]=a}),98);
__d("MWThreadListItem.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometTextWithEntities.react","CurrentEnvironment","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSRtcCallState","LSThreadRangeFilter","LSThreadTitle.react","MWCMJewelContext","MWCMThreadTypes.react","MWChatTextTransform","MWLogInboxFiltersInteraction","MWLogInteraction","MWPIsThreadUnread","MWThreadListConsts","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListLastMessage.react","MWThreadPicture.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXGlimmer.react","MWXListCellPressable.react","MWXSpinner.react","MWXText.react","MessageRequestsBulkActionsContext.react","MessageRequestsBulkActionsThreadListItem","MessagingCommunityChatsPauseStatus","MessengerMuteUtils","MessengerWebEntryPointsUtil","MessengerWebUXLogger","MetaConfig","ReQL","ReQLSuspense","deferredLoadComponent","emptyFunction","gkx","interaction-tracing-metrics","justknobx","mwCMIsAnyCMThread","mwCMIsThreadBumped","mwCMisStandAloneCommunity","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","requireDeferred","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useGroupsCometJoinChatDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWPreloadThread","useMWThreadSnippetForDisplay","useMatchViewport","useMenuButtonVisibilityState","useMergeRefs","useOnPressMWThreadListItem","usePreloadRoute","useReStore","useSimpleImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;e=b.memo;b.useCallback;var n=b.useContext;b.useMemo;var o=b.useState,p=c("deferredLoadComponent")(c("requireDeferred")("MWThreadListItemMoreActions.react").__setRef("MWThreadListItem.react")),q={communityGlimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x170jfvy",width:"x3hqpx7",$$css:!0},listItemContainer:{overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0},listItemContainerDisabled:{opacity:"xbyyjgo",$$css:!0},listItemContainerForMessengerDotCom:{paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0},listItemContainerHiddenContent:{display:"x1lliihq",height:"xqtp20y",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xnalus7",$$css:!0},threadBodyGlimmer:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},threadSnippetGlimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xktia5q",$$css:!0},threadTitleGlimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x1qx5ct2",marginBottom:"x1e56ztr",marginTop:"x1k70j0n",width:"x3hqpx7",$$css:!0}};function aa(a){var b=d("react-compiler-runtime").c(10),e=a.isUnread,g=a.threadKey,h=(i||(i=c("useReStore")))();b[0]!==h.tables.threads||b[1]!==g?(a=function(){return d("ReQL").fromTableAscending(h.tables.threads,["threadName","threadType","threadKey","takedownState","lastMessageCtaType","ongoingCallState","eventEndTimestampMs","eventStartTimestampMs","snippet","snippetText","threadStatus","lastActivityTimestampMs","hasPendingInvitation","disappearingSettingTtl","ongoingCallTimestampMs","nullstateDescriptionText1"]).getKeyRange(g)},b[0]=h.tables.threads,b[1]=g,b[2]=a):a=b[2];var j;b[3]!==h||b[4]!==g?(j=[h,g],b[3]=h,b[4]=g,b[5]=j):j=b[5];a=d("ReQLSuspense").useFirst(a,j,f.id+":150");if(a==null)return null;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=m.jsx(d("react-strict-dom").html.div,{style:q.threadBodyGlimmer,children:m.jsx(c("MWXGlimmer.react"),{index:2,xstyle:q.threadSnippetGlimmer})}),b[6]=j):j=b[6];b[7]!==e||b[8]!==a?(j=m.jsx(c("CometPlaceholder.react"),{fallback:j,name:"MWThreadListItem.DefaultSubtitle",children:m.jsx(r,{isUnread:e,thread:a})}),b[7]=e,b[8]=a,b[9]=j):j=b[9];return j}function r(a){var b,e=d("react-compiler-runtime").c(20),f=a.isUnread;a=a.thread;var g=c("useMWThreadSnippetForDisplay")(a),h=g.lastMessageCtaType,i=g.shouldHideTimestamp;g=g.snippet;var l;e[0]!==a.threadType?(l=d("MWCMThreadTypes.react").isUnjoinedCMThread(a.threadType),e[0]=a.threadType,e[1]=l):l=e[1];l=l;b=(b=c("gkx")("26362"))!=null?b:!1;var n;e[2]!==a.disappearingSettingTtl?(n=c("MetaConfig")._("112")&&a.disappearingSettingTtl!=null&&(j||(j=d("I64"))).gt(a.disappearingSettingTtl,(j||(j=d("I64"))).zero),e[2]=a.disappearingSettingTtl,e[3]=n):n=e[3];n=n;if(a.threadName==null&&c("mwCMIsAnyCMThread")(a.threadType)){var o;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=m.jsxs(d("react-strict-dom").html.div,{style:q.threadBodyGlimmer,children:[m.jsx(c("MWXGlimmer.react"),{index:2,xstyle:q.threadSnippetGlimmer}),m.jsx(c("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultSubtitleWithThread",hold:!0})]}),e[4]=o):o=e[4];return o}if(d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)&&g==null)return null;o=!(j||(j=d("I64"))).equal(a.ongoingCallState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").NO_ONGOING_CALL));var p;e[5]!==a.lastActivityTimestampMs?(p=(j||(j=d("I64"))).to_float(a.lastActivityTimestampMs),e[5]=a.lastActivityTimestampMs,e[6]=p):p=e[6];b=l&&(a==null?void 0:a.hasPendingInvitation)!==!0&&b;l=!l&&!i;e[7]!==g||e[8]!==a?(i=m.jsx(c("MWThreadSnippetForDisplay.react"),{snippetRaw:g,thread:a}),e[7]=g,e[8]=a,e[9]=i):i=e[9];e[10]!==n||e[11]!==f||e[12]!==h||e[13]!==o||e[14]!==p||e[15]!==b||e[16]!==l||e[17]!==i||e[18]!==a?(g=m.jsx(c("MWThreadListLastMessage.react"),{hasOngoingCall:o,isUnread:f,lastMessageCtaType:h,lastMessageTimestamp:p,showDisappearingMessageVisualIndicator:n,showSnippetText:b,showTimestamp:l,snippet:i,thread:a}),e[10]=n,e[11]=f,e[12]=h,e[13]=o,e[14]=p,e[15]=b,e[16]=l,e[17]=i,e[18]=a,e[19]=g):g=e[19];return g}function ba(a){var b=d("react-compiler-runtime").c(8),e=a.threadKey,g=(i||(i=c("useReStore")))();b[0]!==g.tables.threads||b[1]!==e?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadName","threadType","threadKey"]).getKeyRange(e)},b[0]=g.tables.threads,b[1]=e,b[2]=a):a=b[2];var h;b[3]!==g||b[4]!==e?(h=[g,e],b[3]=g,b[4]=e,b[5]=h):h=b[5];a=d("ReQLSuspense").useFirst(a,h,f.id+":277");if(a==null)return null;b[6]!==a?(h=a.threadName==null&&c("mwCMIsAnyCMThread")(a.threadType)?m.jsxs(d("react-strict-dom").html.div,{style:q.threadBodyGlimmer,children:[m.jsx(c("MWXGlimmer.react"),{index:1,xstyle:q.threadTitleGlimmer}),m.jsx(c("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultThreadTitle",hold:!0})]}):m.jsx(c("LSThreadTitle.react"),{thread:a}),b[6]=a,b[7]=h):h=b[7];return h}function a(a){var b=d("react-compiler-runtime").c(140),e=a.hideMoreActions,f=a.lsEntryPoint,g=a.lsSubEntryPoint,i=a.messagingEntrypoint,l=a.onClose,r=a.onPress,s=a.onPressOverride,t=a.onThreadJoined,u=a.onThreadSelected,v=a.parentSurface,w=a.renderAddOnEnd,x=a.renderThreadPhoto,y=a.renderThreadSubtitle,z=a.renderThreadTitle,A=a.responsive,B=a.selected,C=a.thread;a=e===void 0?!1:e;var D=l===void 0?c("emptyFunction"):l;e=t===void 0?c("emptyFunction"):t;var E=u===void 0?c("emptyFunction"):u,F=v===void 0?"channel_list":v;l=n(c("MWCMJewelContext"));t=l.selectedFilterTab;b[0]!==C.threadType?(u={eventName:"threadlist_item_impression",threadType:C.threadType},b[0]=C.threadType,b[1]=u):u=b[1];v=c("MessengerWebUXLogger").useImpressionLoggerRef(u);bb0:{if(!c("mwCMIsThreadBumped")(C)){l=!1;break bb0}if(c("CurrentEnvironment").messengerdotcom){l=F==="channel_list";break bb0}if(f==="jewel"){b[2]!==t?(u=(j||(j=d("I64"))).equal(t,j.of_int32(c("LSThreadRangeFilter").NONE)),b[2]=t,b[3]=u):u=b[3];l=u;break bb0}l=f!=="inboxThreadList"}var G=l;b[4]!==G||b[5]!==x||b[6]!==C.threadKey?(t=function(){var a;return(a=x)!=null?a:function(){return m.jsx(c("MWThreadPicture.react"),{badgeSize:c("gkx")("23219")?10:14,photoSize:c("gkx")("23219")?48:56,threadKey:C.threadKey,withAltText:!1,withCommunityPicture:G})}},u=[G,x,C.threadKey],b[4]=G,b[5]=x,b[6]=C.threadKey,b[7]=t,b[8]=u):(t=b[7],u=b[8]);var H=d("Int64Hooks").useMemoInt64(t,u);b[9]!==z||b[10]!==C.threadKey?(l=function(){var a;return(a=z)!=null?a:function(){return m.jsx(ba,{threadKey:C.threadKey})}},t=[z,C.threadKey],b[9]=z,b[10]=C.threadKey,b[11]=l,b[12]=t):(l=b[11],t=b[12]);var I=d("Int64Hooks").useMemoInt64(l,t),J=c("useCommunityFolder")(C);u=J==null?void 0:J.takedownState;b[13]!==u||b[14]!==C.takedownState?(l=c("mwIsThreadDisabled")(C.takedownState,u),b[13]=u,b[14]=C.takedownState,b[15]=l):l=b[15];var K=l,L=d("MWPIsThreadUnread").useIsThreadUnread(C.threadKey)&&!K;b[16]!==L||b[17]!==y||b[18]!==C.threadKey?(t=function(){var a;return(a=y)!=null?a:function(){return m.jsx(aa,{isUnread:L,threadKey:C.threadKey})}},u=[L,y,C.threadKey],b[16]=L,b[17]=y,b[18]=C.threadKey,b[19]=t,b[20]=u):(t=b[19],u=b[20]);var M=d("Int64Hooks").useMemoInt64(t,u);b[21]!==(J==null?void 0:J.name)||b[22]!==C.threadType?(l=function(){if(!c("mwCMIsAnyCMThread")(C.threadType)||c("CurrentEnvironment").messengerdotcom)return null;return(J==null?void 0:J.name)==null?m.jsxs(m.Fragment,{children:[m.jsx(c("MWXGlimmer.react"),{index:1,xstyle:q.communityGlimmer}),m.jsx(c("MWVerticalRhythm"),{height:8}),m.jsx(c("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.Folder",hold:!0})]}):m.jsxs(m.Fragment,{children:[m.jsx(c("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta3",children:J==null?void 0:J.name}),m.jsx(c("MWVerticalRhythm"),{height:8})]})},b[21]=J==null?void 0:J.name,b[22]=C.threadType,b[23]=l):l=b[23];t=J==null?void 0:J.name;b[24]!==t||b[25]!==C.threadType?(u=[t,C.threadType],b[24]=t,b[25]=C.threadType,b[26]=u):u=b[26];var N=d("Int64Hooks").useCallbackInt64(l,u);b[27]!==C.threadType?(t=function(){var a=d("LSMessagingThreadTypeUtil").isArmadilloSecure(C.threadType),b=d("interaction-tracing-metrics").InteractionTracingMetricsCore.currentInteractionLogger(),c;c=Number(a);b.forEach(function(a){c=((a=a.annotations["int"])==null?void 0:a.hasSecureThread)||0||c});return b.addMetadata("hasSecureThread",c?1:0)},b[27]=C.threadType,b[28]=t):t=b[28];c("useSimpleImpression")(t);b[29]!==C.parentThreadKey?(l=(j||(j=d("I64"))).to_string(C.parentThreadKey),b[29]=C.parentThreadKey,b[30]=l):l=b[30];b[31]!==J?(u=J?(j||(j=d("I64"))).to_string(J.fbGroupId):void 0,b[31]=J,b[32]=u):u=b[32];t=f==="jewel"?"jewel_inbox":"chats_inbox";var O;b[33]!==C.threadKey?(O=(j||(j=d("I64"))).to_string(C.threadKey),b[33]=C.threadKey,b[34]=O):O=b[34];var P;b[35]!==l||b[36]!==u||b[37]!==t||b[38]!==O?(P={community_id:l,event:"bumped_chat_rendered",group_id:u,parent_surface:t,source:"unknown",surface:"messenger_inbox",thread_id:O},b[35]=l,b[36]=u,b[37]=t,b[38]=O,b[39]=P):P=b[39];l=c("useGroupsCometChatsEngagementImpressionLogger")(P);b[40]!==C.threadType?(u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(C.threadType),b[40]=C.threadType,b[41]=u):u=b[41];t=u;var Q=c("useMWNavigation")();O=c("gkx")("24056")?!1:A;var R=c("useMatchViewport")("min","width",d("MWThreadListConsts").minimumPixelsNeededForMaxDisplay)||!O;P=d("MWCMThreadTypes.react").isUnjoinedCMThread(C.threadType);b[42]!==(J==null?void 0:J.communityType)||b[43]!==C?(u=C.hasPendingInvitation===!0&&d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(C,J==null?void 0:J.communityType),b[42]=J==null?void 0:J.communityType,b[43]=C,b[44]=u):u=b[44];var S=u;b[45]!==C?(A=d("MessengerMuteUtils").calcMuteUntilMs(C),b[45]=C,b[46]=A):A=b[46];O=A;var T=O,U=c("useMenuButtonVisibilityState")(!0);u=U[1];var ca=u.setListItemFocused,V=u.setListItemHovered;A=c("mwCMIsAnyCMThread")(C.threadType);b[47]!==C.parentThreadKey?(O=(j||(j=d("I64"))).equal(C.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(0)),b[47]=C.parentThreadKey,b[48]=O):O=b[48];var W=O,da=K?!1:W?R:!(P||a);b[49]!==V?(u=function(){return V(!1)},b[49]=V,b[50]=u):u=b[50];O=u;b[51]!==V?(P=function(){return V(!0)},b[51]=V,b[52]=P):P=b[52];a=P;u=c("useMWPreloadThread")(C,t);var ea=u.onHoverInPreloader,fa=u.onHoverOutPreloader,ga=u.onPressInPreloader;if(J!=null&&A){b[53]!==J.enableState||b[54]!==J.fbGroupId||b[55]!==J.folderId?(P=[J.fbGroupId,J.folderId,J.enableState],b[53]=J.enableState,b[54]=J.fbGroupId,b[55]=J.folderId,b[56]=P):P=b[56];u=P}else{b[57]===Symbol["for"]("react.memo_cache_sentinel")?(A=[void 0,void 0,void 0],b[57]=A):A=b[57];u=A}P=u;var X=P[0],ha=P[1];A=P[2];u=n(c("MessageRequestsBulkActionsContext.react"));P=u.isBulkActionsEditMode;c("usePreloadRoute")(C.threadKey,C.threadType);b[58]!==J?(u=(J==null?void 0:J.pauseStatus)!=null&&(j||(j=d("I64"))).equal(J.pauseStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION))&&c("gkx")("4215"),b[58]=J,b[59]=u):u=b[59];var ia=u;b[60]!==G||b[61]!==ia||b[62]!==K||b[63]!==f||b[64]!==C.threadType?(u=function(){return d("MessengerWebEntryPointsUtil").getEntryPointShouldOverrideThreadSnippetRemoval(f)?!1:ia||!K&&!G&&d("MWCMThreadTypes.react").isJoinedCMThread(C.threadType)},b[60]=G,b[61]=ia,b[62]=K,b[63]=f,b[64]=C.threadType,b[65]=u):u=b[65];var ja=u;u=o(!1);var Y=u[0];u=u[1];var Z=c("useOnPressMWThreadListItem")(A,f,C,u,R,g);A=J==null?void 0:J.communityType;b[66]!==A?(u=c("mwCMisStandAloneCommunity")(A),b[66]=A,b[67]=u):u=b[67];g=u;var $=c("useGroupsCometJoinChatDialog")(C,X,F,"messenger_inbox",e,g);b[68]!==ha||b[69]!==S||b[70]!==X||b[71]!==R||b[72]!==K||b[73]!==i||b[74]!==T||b[75]!==D||b[76]!==Z||b[77]!==F||b[78]!==w||b[79]!==$||b[80]!==C.threadKey?(A=function(){return K||S?void 0:m.jsx(c("MWThreadListItemAddOnEnd.react"),{communityId:ha,fbGroupId:X,isMaximized:R,messagingEntrypoint:i,mutedUntilMs:T,parentSurface:F,renderAddOnEnd:w,showGroupsJoinChatDialog:function(a){return Z(a,$,D)},threadKey:C.threadKey})},u=[ha,S,X,R,K,i,T,D,Z,F,w,$,C.threadKey],b[68]=ha,b[69]=S,b[70]=X,b[71]=R,b[72]=K,b[73]=i,b[74]=T,b[75]=D,b[76]=Z,b[77]=F,b[78]=w,b[79]=$,b[80]=C.threadKey,b[81]=A,b[82]=u):(A=b[81],u=b[82]);var ka=d("Int64Hooks").useMemoInt64(A,u);b[83]!==ka||b[84]!==W||b[85]!==Y||b[86]!==R||b[87]!==K||b[88]!==ja||b[89]!==L||b[90]!==Q||b[91]!==D||b[92]!==ea||b[93]!==fa||b[94]!==r||b[95]!==ga||b[96]!==Z||b[97]!==s||b[98]!==E||b[99]!==N||b[100]!==H||b[101]!==M||b[102]!==I||b[103]!==B||b[104]!==ca||b[105]!==$||b[106]!==C?(e=function(){var a=C.additionalThreadContext!=null?m.jsxs(m.Fragment,{children:[m.jsx(c("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta4",children:m.jsx(c("CometTextWithEntities.react"),{text:C.additionalThreadContext,transforms:d("MWChatTextTransform").textTransforms})}),m.jsx(c("MWVerticalRhythm"),{height:8})]}):null,b=h._(/*BTDS*/"\u0110ang tham gia \u0111o\u1ea1n chat..."),e=m.jsxs(m.Fragment,{children:[m.jsx(c("MWXSpinner.react"),{color:"disabled",size:24}),m.jsx(c("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.AddOnEndLoadingSpinner",hold:!0})]});return m.jsx(c("MWXListCellPressable.react"),{addOnEnd:Y?e:ka,addOnStart:H(),"aria-current":B?"page":!1,content:m.jsxs(d("react-strict-dom").html.div,{style:R||!W?void 0:q.listItemContainerHiddenContent,children:[a,N(),m.jsx(c("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:L?"headlineEmphasized4":"headline4",children:I()}),ja()?null:m.jsxs(m.Fragment,{children:[m.jsx(c("MWVerticalRhythm"),{height:8}),Y?m.jsx(c("MWXText.react"),{type:"entityHeaderMeta3",children:b}):M()]})]}),disabled:Y,linkProps:K?void 0:{preventLocalNavigation:!0,url:Q.getUrlFromThreadKey(C.threadKey,C.threadType)},onFocusChange:ca,onHoverIn:ea,onHoverOut:fa,onPress:function(a){c("justknobx")._("4052")?(d("MWLogInteraction").logPopoverOpenComplete(),d("MWLogInboxFiltersInteraction").logInboxFiltersNavigationComplete()):(d("MWLogInteraction").logPopoverOpenCancel("thread_click"),d("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("thread_click")),s!=null?s==null?void 0:s(a):(r==null?void 0:r(a,C),Z(a,$,D)),E()},onPressIn:ga,selected:B,size:"large"})},g=[C,Y,ka,H,B,R,W,N,L,I,ja,M,K,Q,ca,ea,fa,ga,s,E,r,Z,$,D],b[83]=ka,b[84]=W,b[85]=Y,b[86]=R,b[87]=K,b[88]=ja,b[89]=L,b[90]=Q,b[91]=D,b[92]=ea,b[93]=fa,b[94]=r,b[95]=ga,b[96]=Z,b[97]=s,b[98]=E,b[99]=N,b[100]=H,b[101]=M,b[102]=I,b[103]=B,b[104]=ca,b[105]=$,b[106]=C,b[107]=e,b[108]=g):(e=b[107],g=b[108]);A=d("Int64Hooks").useMemoInt64(e,g);b[109]!==X||b[110]!==U||b[111]!==i||b[112]!==D||b[113]!==B||b[114]!==da||b[115]!==C.threadKey||b[116]!==C.threadName||b[117]!==C.threadType?(u=function(){return da?m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWThreadListItem.MoreActions",children:m.jsx(p,{fbGroupId:X,menuButtonVisibilityState:U,messagingEntrypoint:i,onClose:D,selected:B,thread:{threadKey:C.threadKey,threadName:C.threadName,threadType:C.threadType}})}):null},e=[X,U,i,D,B,da,C.threadName,C.threadKey,C.threadType],b[109]=X,b[110]=U,b[111]=i,b[112]=D,b[113]=B,b[114]=da,b[115]=C.threadKey,b[116]=C.threadName,b[117]=C.threadType,b[118]=u,b[119]=e):(u=b[118],e=b[119]);g=d("Int64Hooks").useMemoInt64(u,e);u=c("useMergeRefs")(v,G?l:null);e=t?"mwthreadlist-item-secure":"mwthreadlist-item-open";v=K?q.listItemContainerDisabled:!1;b[120]!==v?(l=[q.listItemContainer,v,c("gkx")("23219")?q.listItemContainerForMessengerDotCom:!1],b[120]=v,b[121]=l):l=b[121];b[122]!==P||b[123]!==C||b[124]!==A?(t=P?m.jsx(c("MessageRequestsBulkActionsThreadListItem"),{thread:C,threadListCell:A}):A,b[122]=P,b[123]=C,b[124]=A,b[125]=t):t=b[125];b[126]!==t?(v=m.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:m.jsx(d("react-strict-dom").html.div,{role:"gridcell",children:t})}),b[126]=t,b[127]=v):v=b[127];b[128]!==g||b[129]!==v?(P=m.jsxs(d("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[v,g]}),b[128]=g,b[129]=v,b[130]=P):P=b[130];b[131]!==a||b[132]!==O||b[133]!==l||b[134]!==P?(A=m.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,onMouseEnter:a,onMouseLeave:O,role:"row",style:l,children:P}),b[131]=a,b[132]=O,b[133]=l,b[134]=P,b[135]=A):A=b[135];b[136]!==u||b[137]!==e||b[138]!==A?(t=m.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,ref:u,children:A}),b[136]=u,b[137]=e,b[138]=A,b[139]=t):t=b[139];return t}b=e(a);g["default"]=b}),226);
__d("MWXSpacing.stylex",[],(function(a,b,c,d,e,f,g){"use strict";a={spacing4:"var(--x1e4hm47)",spacing8:"var(--x15qbgmd)",spacing10:"var(--x19nwfu8)",spacing12:"var(--xxjzes5)",spacing16:"var(--xsyyfky)",spacing20:"var(--x44p0ev)",spacing24:"var(--x1npqni6)",__themeName__:"x1g5acrz"};g.MWXSpacing=a}),98);
__d("useMWChatSearchClearSearchResults",["LSClearTablesStoredProcedure","LSFactory","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(){c("promiseDone")(b.runInTransaction(j,"readwrite",void 0,void 0,f.id+":22"))},a[0]=b,a[1]=e):e=a[1];return e}function j(a){return c("LSClearTablesStoredProcedure")(c("LSFactory")(a),{clearMessageResults:!1})}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1885117")}),98);
__d("CastingChromecastSession",["Promise","err","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d){var e=this;this.$3=null;this.$4=[];this.$5=[];this.$6=[];this.$7=[];this.$8=[];this.$9=[];this.$10=[];this.$11=[];this.$12=function(a,b){if(a===e.$2){var d=e.$4.slice();d.forEach(function(a){a(b)})}else e.$6.slice().forEach(function(b){b(c("err")("Namespace does not match. Expected "+e.$2+" but received "+a),"CastingChromecastSession._onMessageReceived")})};this.$1=a;this.$2=b;this.$3=d;d.addMessageListener(this.$2,this.$12)}var d=a.prototype;d.destroy=function(){var a=this.$3;a!=null&&(a.status!=null&&a.status!=="disconnected"&&c("recoverableViolation")("Destroying receiver session that is not disconnected. Status, "+a.status,"comet_cast_sender"),a.removeMessageListener(this.$2,this.$12));this.$3=null};d.isCasting=function(){return this.$3!=null};d.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"};d.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"};d.disconnect=function(){var a=this;this.$5.slice().forEach(function(a){a()});return new(h||(h=b("Promise")))(function(b,c){a.$3!=null?a.$3.stop(b,c):b()})["catch"](function(b){if(a.$3!=null&&a.$3.status!=="stopped"){a.$6.slice().forEach(function(a){a(b,"CastingChromecastSession.disconnect")});throw b}})["finally"](function(){var b=a.$3;a.$3=null;b&&b.removeMessageListener(a.$2,a.$12);a.$7.slice().forEach(function(a){a()})})};d.getVolume=function(){var a=this.$13();return a?a.level:null};d.getFriendlyName=function(){return this.$14()};d.setVolume=function(a){var d=this,e=this.$3;return new(h||(h=b("Promise")))(function(b,d){if(e==null){d(c("err")("Cannot set volume without a session"));return}e.setReceiverVolumeLevel(a,b,d)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.setVolume")});throw a})};d.isMuted=function(){var a=this.$13();return a?a.muted:null};d.mute=function(){return this.$15(!0)};d.unmute=function(){return this.$15(!1)};d.sendMessage=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){var f=d.$3;if(f==null){e(c("err")("The message can not be sent without a session"));return}f.sendMessage(d.$2,a,b,e)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.sendMessage")});throw a})};d.$13=function(){var a;a=(a=this.$3)==null?void 0:(a=a.receiver)==null?void 0:a.volume;return a==null?null:a};d.$14=function(){var a;return((a=this.$3)==null?void 0:a.receiver.friendlyName)||null};d.$15=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){var f=d.$3;if(f==null){e(c("err")("The muted state can not be set without a session"));return}f.setReceiverMuted(a,b,e)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession._setIsMuted")});throw a})};d.onMessage=function(a){var b=this.$4;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onDisconnecting=function(a){var b=this.$5;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onError=function(a){var b=this.$6;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onDisconnected=function(a){var b=this.$7;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoLoading=function(a){var b=this.$8;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoLoaded=function(a){var b=this.$9;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoPlaying=function(a){var b=this.$10;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoPaused=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a!=null&&typeof a==="object"&&typeof a.code==="string"&&a.code===b}function b(a){return a!=null&&typeof a==="object"&&typeof a.code==="string"?c("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:a.code})):c("getErrorSafe")(a)}function d(a,b){a.metadata==null&&(a.metadata=new(c("ErrorMetadata"))());var d=a.metadata;b=b==null?void 0:b.videoID;b!=null&&d.addEntries(["COMET_VIDEO","VIDEO_ID",b]);return a}g.isChromecastError=a;g.getCastingErrorSafe=b;g.appendCastingMetadataToExpandedError=d}),98);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1843753");b=d("FalcoLoggerInternal").create("connected_tv_logging",a);e=b;g["default"]=e}),98);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=a,this.$2=b,this.$4=!1,this.$3=!1,this.$5=new Set()}var e=a.prototype;e.init=function(){if(this.$6!=null)return(i||(i=b("Promise"))).reject(c("err")("Scanner can only be initialized once."));this.$6=this.$16();return this.$6};e.ready=function(){return this.$6==null?(i||(i=b("Promise"))).reject(c("err")("Scanner should be initialized.")):this.$6};e.hasSupport=function(){return this.$3};e.hasFoundReceiver=function(){return this.$4};e.getSession=function(){var a=this;if(!this.$4)return(i||(i=b("Promise"))).reject(c("err")("No receivers found"));this.$13.slice().forEach(function(a){a()});return this.$17().then(function(b){var c=a.$18(b);a.$5.add(c);a.$14.slice().forEach(function(a){a(c)});return c})["catch"](function(b){a.$10.slice().forEach(function(a){a()});a.$11.slice().forEach(function(a){a()});throw b})};e.$16=function(){var a=this;this.$3=!0;return this.$19().then(function(b){return a.$20()}).then(function(b){a.$9.slice().forEach(function(a){a()})}).then(function(b){return a.$21()})["catch"](function(b){!d("CastingErrorUtils").isChromecastError(b,"not_supported")&&!d("CastingErrorUtils").isChromecastError(b,"extension_not_available")&&!d("CastingErrorUtils").isChromecastError(b,"extension_no_casting_script")&&a.$8.slice().forEach(function(a){a(b,"CastingChromecastScanner._init")});throw b})};e.$21=function(){var a=this,d=this.$1;if(d==null)return(i||(i=b("Promise"))).reject(c("err")("App ID is not defined"));var e=function(b){var c=a.$18(b);a.$14.slice().forEach(function(a){a(c)})},f=function(b){c("promiseDone")(c("CastingChromecastAPIWrapper").getIsAvailable(b).then(function(b){a.$4=b,a.$15.slice().forEach(function(b){b({foundReceiver:a.$4})})}))};return c("CastingChromecastAPIWrapper").initialize({appID:d,receiverListener:f,sessionListener:e}).then(function(){})["catch"](function(b){a.$8.slice().forEach(function(a){a(b,"CastingChromecastScanner._initializeApi")});throw b})};e.$19=function(){var a=this;return this.$1!=null?(i||(i=b("Promise"))).resolve():c("CastingChromecastAPIWrapper").getDefaultAppID().then(function(b){a.$1=b})};e.$17=function(){var a=this.$1;if(a==null)return(i||(i=b("Promise"))).reject(c("err")("App ID is not defined"));var d=(h||(h=c("performanceAbsoluteNow")))();c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}});return c("CastingChromecastAPIWrapper").getSession(a).then(function(a){c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((h||(h=c("performanceAbsoluteNow")))()-d)}});return a})["catch"](function(a){c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((h||(h=c("performanceAbsoluteNow")))()-d),session_failure_code:typeof a.code==="string"?a.code:null,session_failure_description:a.description}});throw a})};e.$18=function(a){var b=this,d=new(c("CastingChromecastSession"))(this.$1||"",this.$2||"",a),e=d.onDisconnecting(function(){b.$12.slice().forEach(function(a){a()})}),f=d.onError(function(a,c){b.$8.slice().forEach(function(b){b(a,c)})}),g=d.onDisconnected(function(){b.$11.slice().forEach(function(a){a()}),b.$5["delete"](d),e.remove(),f.remove(),g.remove()});return d};e.$20=function(){var a=this;return c("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(b){a.$7.slice().forEach(function(a){a(b)})},onStop:function(){a.$5.forEach(function(a){return a.disconnect()})}})};e.onCast=function(a){var b=this.$7;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onError=function(a){var b=this.$8;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onInit=function(a){var b=this.$9;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionCancelled=function(a){var b=this.$10;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnected=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnecting=function(a){var b=this.$12;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionRequested=function(a){var b=this.$13;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionStarted=function(a){var b=this.$14;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onStatusChanged=function(a){var b=this.$15;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingState",[],(function(a,b,c,d,e,f){"use strict";function a(){return{isCastPending:!1,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}function b(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,type:"video_channel"}}function c(){return{type:"photo"}}function d(){return{currentAssetID:null,currentPlaybackState:null,type:"photo_album"}}f.initialCastingState=a;f.initialVideoChannelExperienceState=b;f.initialPhotoExperienceState=c;f.initialPhotoAlbumExperienceState=d}),66);
__d("TV2PhotoAlbumReportedState",[],(function(a,b,c,d,e,f){"use strict";function a(a){return k(JSON.parse(a),m("TV2PhotoAlbumReportedState"))}function b(a){return JSON.stringify(l(a,m("TV2PhotoAlbumReportedState")),null,2)}function g(a,b,c){c===void 0&&(c="");if(c)throw Error('Invalid value for key "'+c+'". Expected type '+JSON.stringify(a)+" but got "+JSON.stringify(b));throw Error("Invalid value "+JSON.stringify(b)+" for type "+JSON.stringify(a))}function h(a){if(a.jsonToJS===void 0){var b={};a.props.forEach(function(a){return b[a.json]={key:a.js,typ:a.typ}});a.jsonToJS=b}return a.jsonToJS}function i(a){if(a.jsToJSON===void 0){var b={};a.props.forEach(function(a){return b[a.js]={key:a.json,typ:a.typ}});a.jsToJSON=b}return a.jsToJSON}function j(a,b,c,d){d===void 0&&(d="");function e(b,a){return typeof b===typeof a?a:g(b,a,d)}function f(b,a){var d=b.length;for(var e=0;e<d;e++){var f=b[e];try{return j(a,f,c)}catch(a){}}return g(b,a)}function h(b,a){return b.indexOf(a)!==-1?a:g(b,a)}function i(b,a){return!Array.isArray(a)?g("array",a):a.map(function(a){return j(a,b,c)})}function k(a){if(a===null)return null;var b=new Date(a);return isNaN(b.valueOf())?g("Date",a):b}function l(b,d,a){if(a===null||typeof a!=="object"||Array.isArray(a))return g("object",a);var e={};Object.getOwnPropertyNames(b).forEach(function(d){var f=b[d];d=Object.prototype.hasOwnProperty.call(a,d)?a[d]:void 0;e[f.key]=j(d,f.typ,c,f.key)});Object.getOwnPropertyNames(a).forEach(function(f){Object.prototype.hasOwnProperty.call(b,f)||(e[f]=j(a[f],d,c,f))});return e}if(b==="any")return a;if(b===null)return a===null?a:g(b,a);if(b===!1)return g(b,a);while(typeof b==="object"&&b.ref!==void 0)b=n[b.ref];if(Array.isArray(b))return h(b,a);if(typeof b==="object")return Object.prototype.hasOwnProperty.call(b,"unionMembers")?f(b.unionMembers,a):Object.prototype.hasOwnProperty.call(b,"arrayItems")?i(b.arrayItems,a):Object.prototype.hasOwnProperty.call(b,"props")?l(c(b),b.additional,a):g(b,a);return b===Date&&typeof a!=="number"?k(a):e(b,a)}function k(a,b){return j(a,b,h)}function l(a,b){return j(a,b,i)}function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return{unionMembers:b}}function d(a,b){return{props:a,additional:b}}function m(a){return{ref:a}}var n={TV2PhotoAlbumReportedState:d([{json:"media_parameters",js:"media_parameters",typ:m("MediaParameters")},{json:"media_state",js:"media_state",typ:m("MediaState")}],"any"),MediaParameters:d([{json:"album_id",js:"album_id",typ:""}],"any"),MediaState:d([{json:"photo_state",js:"photo_state",typ:c(void 0,m("PhotoMediaState"))},{json:"video_state",js:"video_state",typ:c(void 0,m("VideoMediaState"))}],"any"),PhotoMediaState:d([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"photo_id",js:"photo_id",typ:""},{json:"photo_playback_state",js:"photo_playback_state",typ:m("PhotoPlaybackState")},{json:"position_ms",js:"position_ms",typ:3.14}],"any"),VideoMediaState:d([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"position_ms",js:"position_ms",typ:3.14},{json:"video_id",js:"video_id",typ:""},{json:"video_playback_state",js:"video_playback_state",typ:m("VideoPlaybackState")}],"any"),PhotoPlaybackState:["paused","play"],VideoPlaybackState:["ended","paused","play","seeking","unknown"]};e.exports={TV2PhotoAlbumReportedStateToJson:b,toTV2PhotoAlbumReportedState:a}}),null);
__d("TV2UniqueIDs",["guid"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function i(a){var b;b=(b=h.get(a))!=null?b:0;h.set(a,b+1);return""+a+b.toString(36)}function a(){return i("id_tv2_vcr_")}function b(){return i("id_tv2_veqe_")}function d(){return i("id_tv2_toast_")}function e(){return i("id_tv2_rvr_")}function f(){return c("guid")()}g.makeTV2VideoCastRequestID=a;g.makeTV2VideoExperienceQueueEntryID=b;g.makeTV2ToastID=d;g.makeTV2RelatedVideosRequestID=e;g.makeTV2ChainingSessionID=f}),98);
__d("getTV2QueryStringCheatcodeValue",[],(function(a,b,c,d,e,f){"use strict";function b(b){try{b=new RegExp("\\b"+b+"=([^&]*)");b=b.exec(a.location.search);return!b||b[1]==null?null:b[1]}catch(a){return null}}f["default"]=b}),66);
__d("getTV2QueryStringCheatcode",["getTV2QueryStringCheatcodeValue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){try{return c("getTV2QueryStringCheatcodeValue")(a)==="1"}catch(a){return!1}}g["default"]=a}),98);
__d("getTV2DebuggingEnabled",["getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("getTV2QueryStringCheatcode")("debugging")}g["default"]=a}),98);
__d("TV2CommsParseUtils",["TV2PhotoAlbumReportedState","TV2UniqueIDs","err","getTV2DebuggingEnabled"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===null?"null":a===""?"empty string":Array.isArray(a)?"array":typeof a==="object"?"object with keys: "+JSON.stringify(Object.keys(a).sort()):typeof a}function i(a,b,d){if(typeof a!=="string"||a===""){var e=c("err")("Message parse error: %s expected JSON string, got %s",d,h(a));throw e}try{e=JSON.parse(a);return b(e,d)}catch(b){if("messageFormat"in b&&typeof b.messageFormat==="string"&&"messageParams"in b&&Array.isArray(b.messageParams))throw b;else{a=c("err")("Message parse error: %s expected JSON string, got error: %s",d,b.message);throw a}}}function j(a,b){if(typeof a!=="object"||a==null){b=c("err")("Message parse error: %s expected object, got %s",b,h(a));throw b}return a}function b(a,b){if(a==null)return null;if(typeof a!=="object"||a==null){b=c("err")("Message parse error: %s expected object, got %s",b,h(a));throw b}return a}function k(a,b){if(!Array.isArray(a)){b=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw b}return a}function e(a,b){if(!Array.isArray(a)){var d=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw d}return a.map(function(a){return m(a,b)})}function l(a,b){if(!Array.isArray(a)){var d=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw d}return a.filter(Boolean).map(function(a){return m(a,b)})}function m(a,b){if(typeof a!=="string"||a===""){b=c("err")("Message parse error: %s expected non-empty string, got %s",b,h(a));throw b}return a}function n(a,b){if(a==null)return null;if(typeof a!=="string"||a===""){b=c("err")("Message parse error: %s expected optional non-empty string, got %s",b,h(a));throw b}return a}function o(a,b){if(a==null)return null;if(typeof a!=="string"){b=c("err")("Message parse error: %s expected optional string, got %s",b,h(a));throw b}return a}function p(a,b){if(a==null)return null;if(!(typeof a==="number"&&Number.isFinite(a)||typeof a==="string"&&a!=="")){b=c("err")("Message parse error: %s expected optional non-empty string or number, got %s",b,h(a));throw b}return a}function q(a,b){if(typeof a!=="number"||!Number.isFinite(a)){b=c("err")("Message parse error: %s expected finite number, got %s",b,h(a));throw b}return a}function f(a,b){if(a==null)return null;if(typeof a!=="number"||!Number.isFinite(a)){b=c("err")("Message parse error: %s expected optional finite number, got %s",b,h(a));throw b}return a}function r(a,b){return a==="true"||a===!0}function s(a,b,c){c===void 0&&(c=!1);return a==null?c:a===!0}function t(a,b){if(typeof a!=="boolean"){b=c("err")("Parse error: %s expected boolean, got %s",b,h(a));throw b}return a}function u(a,b){a=a!=null?j(a,b):null;if(a==null)return null;var c=m(a.uri,b+".uri"),d=q(a.width,b+".width");a=q(a.height,b+".height");return{height:a,uri:c,width:d}}function v(a,b){a=a!=null?j(a,b):null;if(a==null)return null;a=j(a.image,b+".image");a=m(a.uri,b+".image.uri");return{uri:a}}function w(a,b){if(a==null)return null;a=k(a,b);return a.map(function(a,b){return m(a,"["+b+"]")})}function x(a,b){return i(a,function(b,a){b=k(b,a);return b.map(function(b,c){c=a+"."+c;return z(j(b,c),c)})},b)}function y(a,b){return i(a,function(b,a){return z(j(b,a),a)},b)}function z(b,e){var f=m(b.access_token,e+".access_token"),g=String(p(b.app_id,e+".app_id")),h=o(b.app_version,e+".app_version"),i=u(b.background_image,e+".background_image"),j=n(b.channel_token,e+".channel_token"),k=n(b.channel_session_id,e+".channel_session_id"),q=o(b.end_cursor,e+".end_cursor")||null,r=s(b.from_next_video_query,e+".from_next_video_query"),t=s(b.is_ad,e+".is_ad"),x=w(b.dash_prefetched_representation_ids,e+".dash_prefetched_representation_ids"),y=n(b.entry_point,e+".entry_point"),z=n(b.player_origin===""?null:b.player_origin,e+".player_origin"),A=n(b.player_suborigin===""?null:b.player_suborigin,e+".player_suborigin"),B=v(b.preferred_thumbnail,e+".preferred_thumbnail"),C=n(b.video_channel_id,e+".video_channel_id"),D=m(b.root_video_id,e+".root_video_id"),E=c("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(a.location.search):null;E=E&&E[1]?E[1]:m(b.video_id,e+".video_id");b=b.tracking_codes!=null?l(b.tracking_codes,e+".tracking_codes"):null;return{accessToken:f,appID:g,appVersion:h,backgroundImage:i,chainingEnabled:!1,channelSessionID:k,channelToken:j,dashPrefetchedRepresentationIDs:x,endCursor:q,entryPoint:y,fromNextVideoQuery:r,isAd:t,playerOrigin:z,playerSuborigin:A,preferredThumbnail:B,rootVideoID:D,startTimestamp:0,trackingCodes:b,videoCastRequestID:d("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:C,videoID:E}}function A(a,b){a=j(a,b);b=m(a.type,b+".type");switch(b){case"version_response":return a;case"version_launch_response":return a;case"experience_state":return a;case"command_result":return a;case"duration_change":return a;case"status_update":return a;case"experience_status_update":return a}b=c("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",h(a));throw b}function B(a){return i(a,A,".")}function C(a){a=B(a);switch(a.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return a}a=c("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",h(a));throw a}function D(a){return d("TV2PhotoAlbumReportedState").toTV2PhotoAlbumReportedState(a)}g.parseJSONString=i;g.parseObject=j;g.parseOptionalObject=b;g.parseArray=k;g.parseStringArray=e;g.parseTrackingCodes=l;g.parseNonEmptyString=m;g.parseOptionalNonEmptyString=n;g.parseOptionalString=o;g.parseNumber=q;g.parseOptionalNumber=f;g.parseOptionalStringishBoolean=r;g.parseOptionalBoolean=s;g.parseBoolean=t;g.parseVideoCastingPayloadBackgroundImage=u;g.parseVideoCastingPayloadPreferredThumbnail=v;g.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=x;g.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=y;g.parseVideoCastingPayloadAsTV2VideoCastRequest=z;g.parseTV2CommsFBAppOutboundMessageFromJSON=B;g.parseCastingReceiverResponseMessageFromJSON=C;g.parseCastingReceiverPhotoAlbumReportedState=D}),98);
__d("fetchCtvCastPayloadQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29808457688745543"}),null);
__d("fetchCtvCastPayloadQuery.graphql",["fetchCtvCastPayloadQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},c={defaultValue:null,kind:"LocalArgument",name:"mediaParameters"},d={defaultValue:null,kind:"LocalArgument",name:"requestID"},e=[{alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Literal",name:"caster_id",value:0},{kind:"Variable",name:"media_parameters_json",variableName:"mediaParameters"},{kind:"Literal",name:"receiver_app_id",value:1614120985559993},{kind:"Variable",name:"request_id",variableName:"requestID"},{kind:"Literal",name:"uses_secure_connection",value:!0}],kind:"ScalarField",name:"ctv_cast_payload",storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"fetchCtvCastPayloadQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c],kind:"Operation",name:"fetchCtvCastPayloadQuery",selections:e},params:{id:b("fetchCtvCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchCtvCastPayloadQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("fetchCtvCastPayload",["CometRelay","err","fetchCtvCastPayloadQuery.graphql","getErrorSafe","guid"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("fetchCtvCastPayloadQuery.graphql");function a(a){var b=a.castSessionID;a=a.environment;return d("CometRelay").fetchQuery(a,i,{castSessionID:b,mediaParameters:"{}",requestID:c("guid")()}).toPromise().then(function(a){if(a!=null&&a.ctv_cast_payload!=null&&typeof a.ctv_cast_payload==="string")return{payload:a.ctv_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}function e(a){var b=a.albumID,e=a.castSessionID;a=a.environment;return d("CometRelay").fetchQuery(a,i,{castSessionID:e,mediaParameters:JSON.stringify({album_id:b}),requestID:c("guid")()}).toPromise().then(function(a){if(typeof (a==null?void 0:a.ctv_cast_payload)==="string")return{payload:a.ctv_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}g.fetchPhotoCastPayload=a;g.fetchAlbumCastPayload=e}),98);
__d("fetchVideoCastPayloadQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9544699068932467"}),null);
__d("fetchVideoCastPayloadQuery.graphql",["fetchVideoCastPayloadQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},c={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},e={defaultValue:null,kind:"LocalArgument",name:"videoID"},f=[{kind:"Variable",name:"id",variableName:"videoID"}],g={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:f,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[g],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,c,d,a],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:f,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("fetchVideoCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("fetchVideoCastPayload",["CometRelay","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("fetchVideoCastPayloadQuery.graphql");function a(a){var b=a.castSessionID,e=a.environment,f=a.playerOrigin,g=a.playerSubOrigin;a=a.videoID;return d("CometRelay").fetchQuery(e,i,{castSessionID:b,playerOrigin:f,playerSubOrigin:g,videoID:a}).toPromise().then(function(a){if(a==null||a.video==null||a.video.video_cast_payload==null)return{type:"video_cannot_be_casted"};else if(typeof a.video.video_cast_payload==="string")return{payload:a.video.video_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}g["default"]=a}),98);
__d("CastingController",["CastingErrorUtils","CastingState","FBLogger","Promise","SubscriptionsHandler","TV2CommsParseUtils","err","fetchCtvCastPayload","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","recoverableViolation","removeFromArray","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("FBLogger")("fbtv"),k="PhotoAlbum",l="ChannelVideo",m="Photo";a=function(){function a(a,b){var e=this;this.$5=[];this.$6=[];this.$7=[];this.$9=function(){var a=d("CastingState").initialCastingState();e.$12(a);e.$13(null)};this.$10=function(a){switch(a.type){case"status_update":e.$16(a);break;case"experience_status_update":e.$17(a);break;default:break}};this.$11=function(a,b){var f;if(d("CastingErrorUtils").isChromecastError(a,"cancel"))j.warn("ChromecastError while casting. Received ChromecastError with cancel code.");else if(((f=e.$2)==null?void 0:f.type)==="video_channel"){f=(f=e.$2)==null?void 0:f.currentVideoID;f=d("CastingErrorUtils").appendCastingMetadataToExpandedError(d("CastingErrorUtils").getCastingErrorSafe(a),babelHelpers["extends"]({},f!=null?{videoID:f}:{}));c("recoverableViolation")("Receiver error at "+b+" while playing video channel","comet_cast_sender",{error:f});c("promiseDone")(e.$4.stopCasting())}else{f=d("CastingErrorUtils").appendCastingMetadataToExpandedError(d("CastingErrorUtils").getCastingErrorSafe(a),{});a=((a=e.$2)==null?void 0:a.type)||"";c("recoverableViolation")("Receiver error at "+b+" while playing in experience "+a,"comet_cast_sender",{error:f});c("promiseDone")(e.$4.stopCasting())}};this.$1=d("CastingState").initialCastingState();this.$2=null;this.$3=b;this.$4=a;this.$8=new(c("SubscriptionsHandler"))();this.$8.addSubscriptions(this.$4.onReceiverDisconnected(this.$9),this.$4.onSessionDisconnected(this.$9),this.$4.onSessionMessage(this.$10),this.$4.onError(this.$11))}var e=a.prototype;e.destroy=function(){this.$8.release()};e.getCastingState=function(){return this.$1};e.getCastingExperienceState=function(){return this.$2};e.setCastingState=function(a){this.$1=a};e.setCastingExperienceState=function(a){this.$2=a};e.subscribeToCastingStateChange=function(a){var b=this;this.$5.push(a);return function(){c("removeFromArray")(b.$5,a)}};e.subscribeToCastingExperienceStateChange=function(a){var b=this;this.$6.push(a);return function(){c("removeFromArray")(b.$6,a)}};e.subscribeToCastingEvent=function(a){var b=this;this.$7.push(a);return function(){c("removeFromArray")(b.$7,a)}};e.startPlayVideoNow=function(a){var e=this,f=a.environment,g=a.origin,j=a.position,k=a.subOrigin,m=a.videoID;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);this.$14({data:{type:"cast_requested",videoID:m},timestamp:(i||(i=c("performanceAbsoluteNow")))()});c("promiseDone")((h||(h=b("Promise"))).all([c("fetchVideoCastPayload")({castSessionID:this.$3,environment:f,playerOrigin:g,playerSubOrigin:k,videoID:m}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="video_cannot_be_casted"){c("recoverableViolation")("The video is not eligible to be casted. The cast request is ignored.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("err")("video_cannot_be_casted"),{videoID:m})});return(h||(h=b("Promise"))).resolve()}else if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving video cast payload. Video failed to play.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{videoID:m})});return(h||(h=b("Promise"))).resolve()}a=e.$4.isCasting(l);a?a=e.$4.playVideoNow({position:j},f.payload):a=e.$4.startCasting(l,{position:j},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);a=d("CastingState").initialVideoChannelExperienceState();e.$13(a)})})["catch"](function(a){e.$14({data:{type:"cast_failed",videoID:m},timestamp:(i||(i=c("performanceAbsoluteNow")))()}),d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to cast video.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{videoID:m})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.startPhotoCasting=function(a){var e=this;a=a.environment;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);this.$14({data:{type:"photo_cast_requested"},timestamp:(i||(i=c("performanceAbsoluteNow")))()});c("promiseDone")((h||(h=b("Promise"))).all([d("fetchCtvCastPayload").fetchPhotoCastPayload({castSessionID:this.$3,environment:a}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving photo cast payload.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{})});return(h||(h=b("Promise"))).resolve()}a=e.$4.startCasting(m,{},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);e.$13(d("CastingState").initialPhotoExperienceState())})})["catch"](function(a){d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to start photo casting session.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.startAlbumSlideshow=function(a){var e=this,f=a.albumID;a=a.environment;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);c("promiseDone")((h||(h=b("Promise"))).all([d("fetchCtvCastPayload").fetchAlbumCastPayload({albumID:f,castSessionID:this.$3,environment:a}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="album_cannot_be_casted"){c("recoverableViolation")("The album is not eligible to be casted.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("err")("album_cannot_be_casted"),{})});return(h||(h=b("Promise"))).resolve()}else if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving album cast payload.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{})});return(h||(h=b("Promise"))).resolve()}a=e.$4.startCasting(k,{},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);a=d("CastingState").initialPhotoAlbumExperienceState();e.$13(a)})})["catch"](function(a){d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to cast album.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.disconnect=function(){c("promiseDone")(this.$4.stopCasting())};e.play=function(){c("promiseDone")(this.$4.playVideo())};e.pause=function(){c("promiseDone")(this.$4.pauseVideo())};e.setVolume=function(a){c("promiseDone")(this.$4.setVolume(a))};e.mute=function(){c("promiseDone")(this.$4.mute())};e.unmute=function(){c("promiseDone")(this.$4.unmute())};e.seek=function(a){c("promiseDone")(this.$4.seekVideo(a))};e.showSingleMedia=function(a){var b=null;switch(a.type){case"photo":b={photo_id:a.photoID};break;case"video":b={video_id:a.videoID};break;default:a.type;return}c("promiseDone")(this.$4.showPhoto({media_parameters:b,request_id:c("uuidv4")()}))};e.playAlbumSlideshow=function(){c("promiseDone")(this.$4.playAlbumSlideshow())};e.pauseAlbumSlideshow=function(){c("promiseDone")(this.$4.pauseAlbumSlideshow())};e.nextPhotoAlbumSlideshow=function(){c("promiseDone")(this.$4.nextPhotoAlbumSlideshow())};e.previousPhotoAlbumSlideshow=function(){c("promiseDone")(this.$4.previousPhotoAlbumSlideshow())};e.$12=function(a){a!==this.$1&&(this.$1=a,this.$5.slice().forEach(function(b){b(a)}))};e.$13=function(a){a!==this.$2&&(this.$2=a,this.$6.slice().forEach(function(b){b(a)}))};e.$14=function(a){this.$7.slice().forEach(function(b){b(a)})};e.$16=function(a){var b=this.$1,d=this.$2;if(d!=null&&d.type==="video_channel"){var e=a.data.video_id,f=this.$4.getVolume()||0,g=this.$4.isMuted()||!1;e!=null&&this.$14({data:{playbackState:a.data.state,playerInfo:(a==null?void 0:a.player_info)||null,receiverInfo:(a==null?void 0:a.receiver_info)||null,type:"video_status_update",videoID:e},timestamp:(i||(i=c("performanceAbsoluteNow")))()});g={receiverIsConnected:!0,receiverIsMuted:g,receiverVolume:f};if(e==null)this.$12(babelHelpers["extends"]({},b,g)),this.$13(babelHelpers["extends"]({},d,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null}));else{f=babelHelpers["extends"]({},b,g);this.$12(f);this.$13(babelHelpers["extends"]({},d,{currentDuration:a.data.duration!=null?a.data.duration:d.currentDuration,currentPlaybackState:a.data.state,currentPosition:a.data.position,currentVideoID:e}))}}};e.$17=function(a){var b=this.$2;if(b!=null&&b.type==="photo_album"&&a.data.name==="PhotoAlbum"){var c;a=d("TV2CommsParseUtils").parseCastingReceiverPhotoAlbumReportedState(a.data.payload);a=a.media_state;c=((c=(c=a.photo_state)==null?void 0:c.photo_id)!=null?c:(c=a.video_state)==null?void 0:c.video_id)||null;a=this.$18(a);this.$13(babelHelpers["extends"]({},b,{currentAssetID:c,currentPlaybackState:a}))}};e.$15=function(){return{receiverFriendlyName:this.$4.getFriendlyName()||null,receiverIsMuted:this.$4.isMuted()||null,receiverVolume:this.$4.getVolume()||0}};e.$18=function(a){if(a.photo_state!=null)return a.photo_state.photo_playback_state==="play"?"play":"paused";else if(a.video_state!=null)return["play","seeking"].includes(a.video_state.video_playback_state)?"play":"paused";else return null};return a}();g["default"]=a}),98);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=function(a){switch(a.data.type){case"cast_requested":b.logWithAvailableContext({event:"cast_requested",video_id_override:a.data.videoID});b.$5(a);break;case"photo_cast_requested":b.logWithAvailableContext({event:"photo_cast_requested"});b.$5(a);break;case"cast_failed":b.$5(a);break;case"video_status_update":b.$6(a.data.receiverInfo,a.data.playerInfo);b.$5(a);break;default:break}};this.$1=null;this.$2=null;this.$3={cast_session_id:a,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var b=a.prototype;b.destroy=function(){this.$1!=null&&this.$1(),this.$1=null};b.bindToCastingController=function(a){this.$1=a.subscribeToCastingEvent(this.$4)};b.logWithAvailableContext=function(a){var b=this;c("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers["extends"]({},b.$3,a)})};b.$5=function(a){var b=a.data;switch(b.type){case"cast_requested":this.$2={data:b,timestamp:a.timestamp};break;case"cast_failed":var c=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(c!=null?a.timestamp-c.timestamp:0),video_id_override:b.videoID});this.$2=null;break;case"video_status_update":c=this.$2;if(c==null)break;var d=c.data.videoID;b.videoID===d&&b.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(a.timestamp-c.timestamp)}),this.$2=null):b.videoID!==d&&(this.$2=null);break}};b.$6=function(a,b){var c=(a==null?void 0:a.third_party_app_id)||null,d=(a==null?void 0:a.cast_receiver_logger_session_id)||null,e=(a==null?void 0:a.is_google_cast_bg)||null,f=(a==null?void 0:a.os_version)||null;a=(a==null?void 0:a.web_client_revision)||null;var g=(b==null?void 0:b.player_instance_key)||null;b=(b==null?void 0:b.player_version)||null;this.$3=babelHelpers["extends"]({},this.$3,{is_google_cast_bg:e,third_party_app_id:c,tv_os_version:f,tv_player_instance_key:g,tv_player_version:b,tv_session_id:d,tv_web_client_revision:a})};return a}();g["default"]=a}),98);
__d("TV2MessageTypes",[],(function(a,b,c,d,e,f){"use strict";a="urn:x-cast:com.facebook.fb";b="urn:x-cast:com.google.cast.media";f.FBAPP_CAST_PROTOCOL_NAMESPACE=a;f.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=b}),66);
__d("TV2PhotoShowRequest",[],(function(a,b,c,d,e,f){"use strict";function a(a){return k(JSON.parse(a),m("TV2PhotoShowRequest"))}function b(a){return JSON.stringify(l(a,m("TV2PhotoShowRequest")),null,2)}function g(a,b,c){c===void 0&&(c="");if(c)throw Error('Invalid value for key "'+c+'". Expected type '+JSON.stringify(a)+" but got "+JSON.stringify(b));throw Error("Invalid value "+JSON.stringify(b)+" for type "+JSON.stringify(a))}function h(a){if(a.jsonToJS===void 0){var b={};a.props.forEach(function(a){return b[a.json]={key:a.js,typ:a.typ}});a.jsonToJS=b}return a.jsonToJS}function i(a){if(a.jsToJSON===void 0){var b={};a.props.forEach(function(a){return b[a.js]={key:a.json,typ:a.typ}});a.jsToJSON=b}return a.jsToJSON}function j(a,b,c,d){d===void 0&&(d="");function e(b,a){return typeof b===typeof a?a:g(b,a,d)}function f(b,a){var d=b.length;for(var e=0;e<d;e++){var f=b[e];try{return j(a,f,c)}catch(a){}}return g(b,a)}function h(b,a){return b.indexOf(a)!==-1?a:g(b,a)}function i(b,a){return!Array.isArray(a)?g("array",a):a.map(function(a){return j(a,b,c)})}function k(a){if(a===null)return null;var b=new Date(a);return isNaN(b.valueOf())?g("Date",a):b}function l(b,d,a){if(a===null||typeof a!=="object"||Array.isArray(a))return g("object",a);var e={};Object.getOwnPropertyNames(b).forEach(function(d){var f=b[d];d=Object.prototype.hasOwnProperty.call(a,d)?a[d]:void 0;e[f.key]=j(d,f.typ,c,f.key)});Object.getOwnPropertyNames(a).forEach(function(f){Object.prototype.hasOwnProperty.call(b,f)||(e[f]=j(a[f],d,c,f))});return e}if(b==="any")return a;if(b===null)return a===null?a:g(b,a);if(b===!1)return g(b,a);while(typeof b==="object"&&b.ref!==void 0)b=n[b.ref];if(Array.isArray(b))return h(b,a);if(typeof b==="object")return Object.prototype.hasOwnProperty.call(b,"unionMembers")?f(b.unionMembers,a):Object.prototype.hasOwnProperty.call(b,"arrayItems")?i(b.arrayItems,a):Object.prototype.hasOwnProperty.call(b,"props")?l(c(b),b.additional,a):g(b,a);return b===Date&&typeof a!=="number"?k(a):e(b,a)}function k(a,b){return j(a,b,h)}function l(a,b){return j(a,b,i)}function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return{unionMembers:b}}function d(a,b){return{props:a,additional:b}}function m(a){return{ref:a}}var n={TV2PhotoShowRequest:d([{json:"media_parameters",js:"media_parameters",typ:m("MediaParameters")},{json:"request_id",js:"request_id",typ:""}],"any"),MediaParameters:d([{json:"photo_id",js:"photo_id",typ:c(void 0,"")},{json:"video_id",js:"video_id",typ:c(void 0,"")}],"any")};e.exports={TV2PhotoShowRequestToJson:b,toTV2PhotoShowRequest:a}}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","TV2PhotoShowRequest","promiseDone","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i="1.2.0";a=function(){function a(a){var b=this;this.$5=null;this.$6=null;this.$10=null;this.$11=[];this.$12=[];this.$13=[];this.$14=[];this.$15=[];this.$16=[];this.$17=[];this.$18=[];this.$19=[];this.$4=new(c("CastingChromecastScanner"))(a,d("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE);this.$2=null;this.$1=!1;this.$3=0;this.$6=null;this.$9=new Map();this.$20=new(c("SubscriptionsHandler"))();this.$20.addSubscriptions(this.$4.onStatusChanged(function(a){var c=a.foundReceiver;b.$15.slice().forEach(function(a){a(!!c)})}),this.$4.onSessionDisconnected(function(){b.$21(),b.$14.slice().forEach(function(a){a()})}),this.$4.onSessionStarted(function(a){b.$22(a)}),this.$4.onError(function(a,c){b.$11.slice().forEach(function(b){b(a,c)})}));this.$7=this.$4.init();c("promiseDone")(this.$7.then(function(){b.$2=!0,b.$1=!0,b.$13.slice().forEach(function(a){a()})},function(a){b.$2=!1,b.$12.slice().forEach(function(b){b(a)})}))}var e=a.prototype;e.ready=function(){return this.$7};e.hasSupport=function(){return this.$2};e.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()};e.isCasting=function(a){var b=!!this.$5&&this.$5.isCasting();b&&a!=null&&(b=this.$6!=null&&this.$6.indexOf(a)>=0);return b};e.getSession=function(){var a=this;return this.ready().then(function(){var b=a.$5;b!=null&&!b.isConnected()&&a.$21()}).then(function(){if(a.$5)return a.$5;a.$8||(a.$8=a.$23());return a.$8})["catch"](function(b){a.$11.slice().forEach(function(a){a(b,"CastingReceiverManager.getSession")});throw b})["finally"](function(){a.$8=null})};e.startCasting=function(a,b,c){var d=this;return this.$24(a,b,c).then(function(a){a.success?d.$6=a.target:d.$6=null})};e.stopCasting=function(){var a=this;return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.ready().then(function(){var b=a.$5;b!=null&&b.isDisconnected()&&a.$21();return a.$5}).then(function(a){return a==null?(h||(h=b("Promise"))).resolve(null):a.disconnect()}).then(function(){a.$21()})};e.playVideoNow=function(a,c){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("next_video",babelHelpers["extends"]({},a,{auto_advance:!0}),c).then(function(){})};e.skipToNextVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("skip_video").then(function(){})};e.playVideo=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("play_video",{position:a||0}).then(function(){})};e.pauseVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("pause_video").then(function(){})};e.seekVideo=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("seek_video",{position:a}).then(function(){})};e.showPhoto=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("show_photo",void 0,d("TV2PhotoShowRequest").TV2PhotoShowRequestToJson(a),"Photo").then(function(){})};e.stopVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("stop_video").then(function(){})};e.playAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("play_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.pauseAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("pause_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.nextPhotoAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("next_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.previousPhotoAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("previous_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()};e.getVolume=function(){return this.$5==null?null:this.$5.getVolume()};e.setVolume=function(a){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.setVolume(a)};e.isMuted=function(){if(!this.isCasting())return null;return this.$5==null?null:this.$5.isMuted()};e.mute=function(){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.mute()};e.unmute=function(){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.unmute()};e.$26=function(){var a=this,b=this.$27();return this.$28(function(a){return{data:{client_cast_session:b,version:i},num:a,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(b){var c=b.messageNum;return a.$29(function(a){return a.response_num===c})}).then(function(a){if(a.type!=="version_response")throw c("unrecoverableViolation")('Response message was not a "version_response"',"comet_cast_sender");if(a.data==null)throw c("unrecoverableViolation")("Version response is missing data","comet_cast_sender");return a.data})};e.$24=function(a,b,d){var e=this,f=this.$27();return this.$28(function(c){return{data:{client_cast_session:f,name:a,params:b,payload:d,version:i},num:c,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(a){var b=a.messageNum;return e.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="version_launch_response")throw c("unrecoverableViolation")('Response message was not a "version_launch_response"',"comet_cast_sender");if(a.data==null)throw c("unrecoverableViolation")("Version launch response is missing data","comet_cast_sender");return a.data})};e.$30=function(){var a=this;return this.$6!=null?(h||(h=b("Promise"))).resolve(this.$6):this.getSession().then(function(b){return a.$26()}).then(function(b){var d=null;typeof b.currently_running_experience==="object"&&(d=b.currently_running_experience);if(d==null)throw c("unrecoverableViolation")("Session has no target","comet_cast_sender");a.$6=d;return a.$6})};e.$27=function(){var a=null;localStorage&&(a=localStorage.getItem("CastingSessionKey"));a==null&&(a=c("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",a));return a};e.$28=function(a){var b=this.$3+=2;return this.getSession().then(function(d){if(d==null)throw c("unrecoverableViolation")("The message can not be sent without a session","comet_cast_sender");var e=a(b);return d.sendMessage(e)}).then(function(){return{messageNum:b}})};e.$29=function(a){return this.getSession().then(function(e){if(e==null)throw c("unrecoverableViolation")("The message cannot be received without a session","comet_cast_sender");return new(h||(h=b("Promise")))(function(b,c){var f=e.onMessage(function(e){try{e=d("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(e);if(e.type==="version_response"||e.type==="version_launch_response"||e.type==="experience_state"||e.type==="command_result"){var g=!a||a(e);g&&(f.remove(),b(e))}}catch(a){f.remove(),c(a)}})})})};e.$25=function(a,b,d,e){var f=this;return this.$30().then(function(c){return f.$28(function(f){return{data:{cmd:a,name:e,params:b,payload:d},num:f,target:c,timestamp:Date.now(),type:"experience_command"}})}).then(function(a){var b=a.messageNum;return f.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="command_result")throw c("unrecoverableViolation")('Response message was not a "command_result"',"comet_cast_sender");return a.data})};e.$23=function(){var a=this;return this.$4.getSession().then(function(b){a.$5==null&&(a.$5=b);return a.$5})};e.$22=function(a){var b=this;this.$5=a;var e="extension";this.$8&&(e="site");c("promiseDone")(this.$26().then(function(c){var f=c.success;if(!f)return;var g=null;typeof c.currently_running_experience==="object"&&(g=c.currently_running_experience);g!=null&&(b.$6=g);b.$18.slice().forEach(function(c){c(a,{session:a,source:e,success:f,target:b.$6})});b.$10=a.onMessage(function(a){try{var c=d("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(a);b.$17.slice().forEach(function(a){a(c)})}catch(a){b.$11.slice().forEach(function(b){b(a,"CastingReceiverManager._onSessionStartedHandler")})}})}))};e.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var a=this.$5;a!=null&&a.destroy();this.$5=null;this.$6=null};e.onError=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onExperienceNotSupported=function(a){var b=this.$12;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onExperienceReady=function(a){var b=this.$13;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onReceiverDisconnected=function(a){var b=this.$14;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onReceiverStatusChanged=function(a){var b=this.$15;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnected=function(a){var b=this.$16;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionMessage=function(a){var b=this.$17;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionStarted=function(a){var b=this.$18;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onStopView=function(a){var b=this.$19;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","CurrentUser","ExecutionEnvironment","Promise","guid","qex","react","react-compiler-runtime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;f=j||d("react");var k=f.useContext,l=f.useEffect,m=f.useState,n=null,o=c("qex")._("1648");function p(){if(n!=null)return n;if(o==null)throw c("unrecoverableViolation")("Use useIsCastAvailable first to check if casting feature is available in this browser.","comet_cast_sender");var a=new(c("CastingReceiverManager"))(o),b=c("guid")(),d=new(c("CastingController"))(a,b);b=new(c("CastingEventReporter"))(b);b.bindToCastingController(d);n={castingController:d,castingEventReporter:b,castingReceiverManager:a};return n}function q(){var a=r();a=a.castingReceiverManager;return a}function r(){var a=d("react-compiler-runtime").c(1);if((i||(i=c("ExecutionEnvironment"))).canUseDOM&&c("CurrentUser").isLoggedIn()){var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=p(),a[0]=e):e=a[0];return e}throw new(h||(h=b("Promise")))(s)}function s(){}function t(){var a=r();a=a.castingController;return a}function a(){var a=d("react-compiler-runtime").c(6),b=q(),c=k(d("CastingContext").SetCastingControllerContext),e=m(!1),f=e[0],g=e[1];e=m(!1);var h=e[0],i=e[1],j;a[0]!==b?(e=function(){var a=b.onExperienceReady(function(){g(b.hasSupport()||!1)});g(b.hasSupport()||!1);return function(){return a.remove()}},j=[b],a[0]=b,a[1]=e,a[2]=j):(e=a[1],j=a[2]);l(e,j);a[3]!==b?(e=function(){var a=b.onReceiverStatusChanged(function(){i(b.hasFoundReceiver()||!1)});i(b.hasFoundReceiver()||!1);return function(){return a.remove()}},j=[b],a[3]=b,a[4]=e,a[5]=j):(e=a[4],j=a[5]);l(e,j);if(o==null)return!1;if(c==null)return!1;if(!f)return!1;return!h?!1:!0}function e(){var a=d("react-compiler-runtime").c(4),b=t(),e=k(d("CastingContext").SetCastingControllerContext);if(e==null)throw c("unrecoverableViolation")("Casting has to be initialized inside CastingProvider.","comet_cast_sender");var f,g;a[0]!==b||a[1]!==e?(f=function(){e(b)},g=[e,b],a[0]=b,a[1]=e,a[2]=f,a[3]=g):(f=a[2],g=a[3]);l(f,g)}g.useCastingController=t;g.useIsCastAvailable=a;g.useCastingInitializeIfNecessary=e}),98);
__d("CometVideoPictureInPictureManager.react",["CometSetWatchAndScrollVideoContext","CometVideoPictureInPictureManagerContext","CometWatchAndScrollVideoContext","XCometWatchControllerRouteBuilder","clearTimeout","gkx","react","requireDeferred","setTimeout","useCometRouterDispatcher","useMinifiedProductAttribution","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState,p=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("CometVideoPictureInPictureManager.react"),q=c("gkx")("22889"),r=50;e=["286211568997787","214604021960500","108677131037"];var s=window.document.pictureInPictureEnabled;function a(a){var b=a.children;a=a.isPipEnabled;c("vulture")("Zuzv2MXXsjs9_SDewEp_okVjtT8=");var e=c("useCometRouterDispatcher")(),f=a;a=o(null);var g=a[0],h=a[1];a=o(!1);var t=a[0],u=a[1];a=o(!1);var v=a[0],w=a[1],x=n(!1);a=j(function(a){x.current=a},[]);var y=m(function(){return{hasNextChainedVideo:v,isPipEnabled:f,setHasNextChainedVideo:w,setSkippedFromPipPlayer:u,skippedFromPipPlayer:t}},[t,u,v,w,f]),z=o(null),A=z[0],B=z[1],C=k(c("CometWatchAndScrollVideoContext")),D=k(c("CometSetWatchAndScrollVideoContext")),E=n(null),F=n(null),G=c("useMinifiedProductAttribution")(),H=j(function(a){a===void 0&&(a=null),p.onReady(function(b){b.log({attribution_id_v2:G,click_point:a,event:"click"})})},[]),I=j(function(){var a=C==null?void 0:C.videoID,b=C==null?void 0:C.videoUrl;if(a!=null&&b!=null){var d=C==null?void 0:C.routeTracePolicy,f=C==null?void 0:C.subOrigin;b=q?b:c("XCometWatchControllerRouteBuilder").buildURL({v:a});e&&(e.go(b,{passthroughProps:{portableVideoID:A,portalingRouteTracePolicy:d,portalingSubOrigin:f}}),D(null))}},[e,C,A,D]),J=j(function(){g!=null&&(E.current=c("setTimeout")(function(){var a=g.getCurrentState(),b=a.lastPauseReason;a=a.paused;x.current||(f&&(a===!1||a===!0&&b==="product_initiated")?(I(),H("control_pip_player_return_to_tab")):window.document.pictureInPictureElement===null&&(D(null),H("control_pip_player_close")))},r))},[g,f,I,D,H]),K=j(function(){g!=null&&(x.current||(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("pause",function(){g.pause("product_initiated")})),v||window.navigator.mediaSession.setActionHandler("nexttrack",null))},[g,v,H,a]),L=j(function(a){a.requestPictureInPicture();R(!1);a=a.internal_getVideoElement();F.current=a==null?void 0:a.currentSrc},[]),M=j(function(){if(g!=null){var a=g.getIsDesktopPictureInPicture();if(a){g.exitPictureInPicture();return}L(g)}},[L,g]),N=j(function(a){h(a)},[h]),O=j(function(a){a!=null&&B(a)},[B]);z=m(function(){return{openPipPlayer:M,setController:N,setPipPortableVideoID:O}},[M,N,O]);var P=n(!1);a=o(!1);var Q=a[0],R=a[1];l(function(){var a=null;if(s&&g!=null&&window.document.pictureInPictureElement){var b=g.internal_getVideoElement();b=b==null?void 0:b.currentSrc;var c=!1,d=!1;a=g.subscribe(function(){var a=g.getCurrentState(),b=a.playing;a=a.isDesktopPictureInPicture;!c&&b&&P.current&&!x.current&&(P.current=!1,R(!0));d&&!a&&J();!d&&a&&K();c=b;d=a});b!==F.current?!Q?(g.play("user_initiated"),P.current=!0):L(g):f&&(K(),F.current=b)}return function(){a!=null&&a.remove()}},[L,g,M,v,K,J,f,Q]);l(function(){return function(){E.current!=null&&(c("clearTimeout")(E.current),E.current=null)}},[]);return i.jsx(d("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerContext.Provider,{value:y,children:i.jsx(d("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerAPIContext.Provider,{value:z,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g.EXCLUDED_PROVIDERS=e;g.CometVideoPictureInPictureManager=a}),98);
__d("useLiveCostreamerTagSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9770086849717179"}),null);
__d("useLiveCostreamerTagSubscription.graphql",["VideoPlayerRelay_video$normalization.graphql","useLiveCostreamerTagSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e=[d],f={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"tagged_page",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:e,storageKey:null}],storageKey:null},g={args:null,documentName:"useLiveCostreamerTagSubscription",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"};e={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:e,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null};var h={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:c,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[g],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoPlayerCostreamingThumbnailRowInner_video"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},e],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:c,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[g,d],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_channel",plural:!1,selections:[h,d],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:i,storageKey:null},d],storageKey:null},{args:null,fragment:b("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null},d],storageKey:null}],storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null},e],storageKey:null}]},params:{id:b("useLiveCostreamerTagSubscription_facebookRelayOperation"),metadata:{subscriptionName:"live_video_tag_subscribe"},name:"useLiveCostreamerTagSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("useLiveCostreamerTagSubscription.react",["CometRelay","react","react-compiler-runtime","useLiveCostreamerTagSubscription.graphql","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a,e,f){var g=d("react-compiler-runtime").c(8),i;g[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=h!==void 0?h:h=b("useLiveCostreamerTagSubscription.graphql"),g[0]=i):i=g[0];i=i;var k;g[1]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("uuidv4")(),g[1]=k):k=g[1];g[2]!==a||g[3]!==e?(k={input:{client_subscription_id:k,tagged_page_id:a,tagged_video_id:e}},g[2]=a,g[3]=e,g[4]=k):k=g[4];g[5]!==f||g[6]!==k?(a={onNext:f,subscription:i,updater:j,variables:k},g[5]=f,g[6]=k,g[7]=a):a=g[7];e=a;i=e;d("CometRelay").useSubscription(i)}function j(a){var b;a=a.getRootField("live_video_tag_subscribe");b=a==null?void 0:(b=a.getLinkedRecord("tagged_page"))==null?void 0:b.getLinkedRecord("currently_live_video");a=a==null?void 0:a.getLinkedRecord("tagged_video");b==null&&a!=null&&a.setValue(null,"if_viewer_can_see_costreaming_tools")}g["default"]=a}),98);
__d("LiveCostreamerTagSubscription.react",["useLiveCostreamerTagSubscription.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onNext,d=a.pageID;a=a.videoID;c("useLiveCostreamerTagSubscription.react")(d,a,b);return null}g["default"]=a}),98);
__d("LiveVideoLatencyMenuContextProvider_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveVideoLatencyMenuContextProvider_video",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu",fragmentName:"VideoPlayerSettingsMenuLatencyPane_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu"},{kind:"RequiredField",field:{alias:"if_viewer_can_use_latency_menu_toggle",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu_toggle",fragmentName:"VideoPlayerSettingsMenuLatencyPaneToggle_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu_toggle"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("LiveVideoLatencyMenu.react",["fbt","CometRelay","LiveVideoLatencyMenuContextProvider_video.graphql","VideoPlayerHooks","react","react-compiler-runtime","recoverableViolation","useSelectedLatencySetting"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));j.useMemo;f=h._(/*BTDS*/"\u0110\u1ed9 tr\u1ec5");var m=[o("low"),o("normal")],n=l.createContext({liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null});function o(a){switch(a){case"low":return{description:h._(/*BTDS*/"Tr\u1ea3i nghi\u1ec7m g\u1ea7n s\u00e1t th\u1eddi gian th\u1ef1c."),title:h._(/*BTDS*/"\u0110\u1ed9 tr\u1ec5 th\u1ea5p"),value:a};case"normal":return{description:h._(/*BTDS*/"L\u1ef1a ch\u1ecdn t\u1ed1t nh\u1ea5t \u0111\u1ec3 \u0111\u1ea1t hi\u1ec7u qu\u1ea3 v\u00e0 d\u00e0nh cho c\u00e1c k\u1ebft n\u1ed1i ch\u1eadm h\u01a1n."),title:h._(/*BTDS*/"B\u00ecnh th\u01b0\u1eddng"),value:a};case"ultra-low":return{description:h._(/*BTDS*/"Ph\u00f9 h\u1ee3p nh\u1ea5t v\u1edbi bu\u1ed5i ph\u00e1t mang t\u00ednh t\u01b0\u01a1ng t\u00e1c."),title:h._(/*BTDS*/"Si\u00eau th\u1ea5p"),value:a};default:a;c("recoverableViolation")("Setting "+a+" is not valid","gaming_video");return{description:h._(/*BTDS*/"L\u1ed7i"),title:h._(/*BTDS*/"L\u1ed7i"),value:a}}}function a(a,b){var e=d("react-compiler-runtime").c(10),f=(k||(k=d("VideoPlayerHooks"))).useController(),g=k.useLatencyLevel();a=c("useSelectedLatencySetting")(a,b);var h=a[1];e[0]!==g?(b=o(g),e[0]=g,e[1]=b):b=e[1];a=b;b=a.title;e[2]!==f||e[3]!==g||e[4]!==h?(a=function(a){g!==a&&(h(a),f.setLatencyLevel(a))},e[2]=f,e[3]=g,e[4]=h,e[5]=a):a=e[5];a=a;var i;e[6]!==g||e[7]!==a||e[8]!==b?(i={selectedLatencySetting:g,selectedLatencySettingTitle:b,setSelectedLatencySetting:a},e[6]=g,e[7]=a,e[8]=b,e[9]=i):i=e[9];return i}var p=i!==void 0?i:i=b("LiveVideoLatencyMenuContextProvider_video.graphql");function e(a){var b=d("react-compiler-runtime").c(7),c=a.children;a=a.video;a=d("CometRelay").useFragment(p,a);bb0:{if(a==null){var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null},b[0]=e):e=b[0];e=e;break bb0}var f;b[1]!==a.if_viewer_can_use_latency_menu||b[2]!==a.if_viewer_can_use_latency_menu_toggle?(f={liveVideoLatencyMenuPaneMatchPointer:a.if_viewer_can_use_latency_menu,liveVideoLatencyMenuPaneToggleMatchPointer:a.if_viewer_can_use_latency_menu_toggle},b[1]=a.if_viewer_can_use_latency_menu,b[2]=a.if_viewer_can_use_latency_menu_toggle,b[3]=f):f=b[3];e=f}a=e;b[4]!==c||b[5]!==a?(f=l.jsx(n.Provider,{value:a,children:c}),b[4]=c,b[5]=a,b[6]=f):f=b[6];return f}g.LATENCY_MENU_TITLE=f;g.LATENCY_SETTING_OPTIONS=m;g.LiveVideoLatencyMenuContext=n;g.getLiveVideoLatencySettingToInfoMapping=o;g.useLatencySettingState=a;g.LiveVideoLatencyMenuContextProvider=e}),226);
__d("VideoPlayerAudioTrackUtils",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,b){if(b==null)return void 0;a=String(a).substring(0,2);try{return new Intl.DisplayNames([a],{type:"language"}).of(b)}catch(a){return void 0}};a=function(a,b){if(a==null)return h._(/*BTDS*/"M\u1eb7c \u0111\u1ecbnh");b=i(b,a.lang);b=(b=b)!=null?b:h._(/*BTDS*/"M\u1eb7c \u0111\u1ecbnh");var c=null;a.role==="dub"?c=h._(/*BTDS*/"L\u1ed3ng ti\u1ebfng"):(a==null?void 0:a.role)==="description"&&(c=h._(/*BTDS*/"M\u00f4 t\u1ea3"));return c!=null?b.toString()+" - "+c.toString():b};g.getAudioTrackLabelLocalized=a}),226);
__d("VideoPlayerCaptionsControl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsControl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerCaptionsMenu.react",["fbt","$InternalEnum","CometKeys","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsMenuCaptionsDisplayPane.react","VideoPlayerCaptionsMenuMainPane.react","VideoPlayerHooks","react","react-compiler-runtime","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.useEffect;e.useMemo;var m=e.useRef,n=e.useState,o=b("$InternalEnum")({CAPTIONS_BG_COLOR:"captionsBackgroundColor",CAPTIONS_BG_OPACITY:"captionsBackgroundOpacity",CAPTIONS_DISPLAY_MAIN:"captionsDisplayMain",CAPTIONS_TEXT_COLOR:"captionsTextColor",CAPTIONS_TEXT_SIZE:"captionsTextSize",CAPTIONS_MAIN:"captionsMain"});function a(a){var b=d("react-compiler-runtime").c(36),e=a.availableCaptionsLocales,f=a.captionsListExpanded,g=a.children,i=a.onClose,p=a.onPressLog,q=a.selectedCaptionsLocale,r=a.setCaptionsListExpanded;a=a.setSelectedCaptionsLocale;g=g===void 0?null:g;var s=(j||(j=d("VideoPlayerHooks"))).useCaptionDisplayStyle(),t=n(o.CAPTIONS_MAIN),u=t[0];t=t[1];var v=m(null),w=m(null),x;b[0]!==i?(x=function(a){v.current&&w.current&&a.target instanceof HTMLElement&&document.contains(a.target)&&!v.current.contains(a.target)&&w.current.contains(a.target)&&i()},b[0]=i,b[1]=x):x=b[1];var y=x,z;b[2]!==y?(x=function(){document.addEventListener("click",y);return function(){document.removeEventListener("click",y)}},z=[y],b[2]=y,b[3]=x,b[4]=z):(x=b[3],z=b[4]);l(x,z);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(x={key:c("CometKeys").ESCAPE},z=h._(/*BTDS*/"\u0110\u00f3ng menu ch\u00fa th\u00edch"),b[5]=x,b[6]=z):(x=b[5],z=b[6]);b[7]!==i?(x=[{command:x,description:z,handler:function(){i()}}],b[7]=i,b[8]=x):x=b[8];z=x;x=z;c("useLayerKeyCommands")(x);b[9]!==e||b[10]!==f||b[11]!==g||b[12]!==p||b[13]!==q||b[14]!==r||b[15]!==a?(z=k.jsx(d("VideoPlayerCaptionsMenuMainPane.react").VideoPlayerCaptionsMenuMainPane,{availableCaptionsLocales:e,captionsListExpanded:f,onPressLog:p,selectedCaptionsLocale:q,setCaptionsListExpanded:r,setPane:t,setSelectedCaptionsLocale:a,children:g}),b[9]=e,b[10]=f,b[11]=g,b[12]=p,b[13]=q,b[14]=r,b[15]=a,b[16]=z):z=b[16];x=z;bb0:switch(u){case o.CAPTIONS_MAIN:break bb0;case o.CAPTIONS_DISPLAY_MAIN:b[17]!==s||b[18]!==p?(e=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").VideoPlayerCaptionsMenuCaptionsDisplayMainPane,{currentCaptionsDisplay:s,onPressLog:p,setPane:t}),b[17]=s,b[18]=p,b[19]=e):e=b[19];x=e;break bb0;case o.CAPTIONS_BG_COLOR:b[20]!==s||b[21]!==p?(f=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundColor",currentCaptionsDisplay:s,onPressLog:p,setPane:t}),b[20]=s,b[21]=p,b[22]=f):f=b[22];x=f;break bb0;case o.CAPTIONS_BG_OPACITY:b[23]!==s||b[24]!==p?(g=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundOpacity",currentCaptionsDisplay:s,onPressLog:p,setPane:t}),b[23]=s,b[24]=p,b[25]=g):g=b[25];x=g;break bb0;case o.CAPTIONS_TEXT_SIZE:b[26]!==s?(q=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextSize",currentCaptionsDisplay:s,setPane:t}),b[26]=s,b[27]=q):q=b[27];x=q;break bb0;case o.CAPTIONS_TEXT_COLOR:b[28]!==s||b[29]!==p?(r=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextColor",currentCaptionsDisplay:s,onPressLog:p,setPane:t}),b[28]=s,b[29]=p,b[30]=r):r=b[30];x=r}b[31]!==x?(a=k.jsx("div",{ref:v,children:x}),b[31]=x,b[32]=a):a=b[32];b[33]===Symbol["for"]("react.memo_cache_sentinel")?(z=k.jsx("div",babelHelpers["extends"]({className:"x5yr21d x17qophe xixxii4 x13vifvy xh8yej3 x8knxv4"},{"data-testid":void 0,ref:w})),b[33]=z):z=b[33];b[34]!==a?(u=k.jsxs(k.Fragment,{children:[a,z]}),b[34]=a,b[35]=u):u=b[35];return u}g.VideoPlayerCaptionsMenuPaneType=o;g.VideoPlayerCaptionsMenu=a}),226);
__d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));j.useCallback;var l={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",width:"xafpxmx",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},m={captionsBackgroundColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsBackgroundOpacity:{"0%":"TRANSPARENT","25%":"LIGHT","45%":"DEFAULT","75%":"DARK","100%":"OPAQUE"},captionsTextColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsTextSize:{"(50%)":"SMALLEST","(75%)":"SMALL","(100%)":"DEFAULT","(125%)":"MEDIUM","(150%)":"BIG","(175%)":"BIGGER","(200%)":"BIGGEST"}},n={"Background Color":{ftbLabel:h._(/*BTDS*/"M\u00e0u n\u1ec1n"),name:"captionsBackgroundColor"},"Background Opacity":{ftbLabel:h._(/*BTDS*/"\u0110\u1ed9 m\u1edd n\u1ec1n"),name:"captionsBackgroundOpacity"},"Text Color":{ftbLabel:h._(/*BTDS*/"M\u00e0u ch\u1eef"),name:"captionsTextColor"},"Text Size":{ftbLabel:h._(/*BTDS*/"C\u1ee1 ch\u1eef"),name:"captionsTextSize"}},o={Black:h._(/*BTDS*/"\u0110en"),Blue:h._(/*BTDS*/"Xanh da tr\u1eddi"),Cyan:h._(/*BTDS*/"Xanh l\u01a1"),Green:h._(/*BTDS*/"Xanh l\u00e1 c\u00e2y"),Magenta:h._(/*BTDS*/"H\u1ed3ng c\u00e1nh sen"),Red:h._(/*BTDS*/"\u0110\u1ecf"),White:h._(/*BTDS*/"Tr\u1eafng"),Yellow:h._(/*BTDS*/"V\u00e0ng")};function p(a){var b=null,c=null;switch(a){case"(50%)":b=h._(/*BTDS*/"Nh\u1ecf");c="X-";break;case"(75%)":b=h._(/*BTDS*/"Nh\u1ecf");break;case"(125%)":b=h._(/*BTDS*/"L\u1edbn");break;case"(150%)":b=h._(/*BTDS*/"L\u1edbn");c="X-";break;case"(175%)":b=h._(/*BTDS*/"L\u1edbn");c="XX-";break;case"(200%)":b=h._(/*BTDS*/"L\u1edbn");c="XXX-";break;case"(100%)":b=h._(/*BTDS*/"Trung b\u00ecnh")}return k.jsxs("span",{children:[c!=null&&c,b,a]})}p.displayName=p.name+" [from "+f.id+"]";var q={captionsBackgroundColor:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_COLOR,captionsBackgroundOpacity:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_OPACITY,captionsTextColor:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_COLOR,captionsTextSize:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_SIZE};function r(a){var b=d("react-compiler-runtime").c(24),e=a.onPressLog,f=a.option,g=a.optionVal,h=a.setPane,j=n[f].name;b[0]!==j||b[1]!==e||b[2]!==f||b[3]!==h?(a=function(){h(q[j]),e&&e("captions_display_main_menu",f)},b[0]=j,b[1]=e,b[2]=f,b[3]=h,b[4]=a):a=b[4];a=a;var m;bb0:switch(j){case"captionsTextColor":case"captionsBackgroundColor":m=o[g];break bb0;default:m=g}var r=f.replace(" ","");r="video-player-captions-menu-captions-display-main-"+r;var s;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(s={className:"x1ypdohk x1rg5ohu x1nxh6w3 x1s688f x1uncgzr"},b[5]=s):s=b[5];var t=n[f],u;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(u={className:"x1nxh6w3 xo1l8bm"},b[6]=u):u=b[6];var v;b[7]!==j||b[8]!==g||b[9]!==m?(v=j==="captionsTextSize"?p(g):m,b[7]=j,b[8]=g,b[9]=m,b[10]=v):v=b[10];b[11]!==v||b[12]!==r?(g=k.jsx("div",babelHelpers["extends"]({},u,{"data-testid":void 0,children:v})),b[11]=v,b[12]=r,b[13]=g):g=b[13];b[14]!==t.ftbLabel||b[15]!==g?(u=k.jsxs("div",babelHelpers["extends"]({},s,{children:[t.ftbLabel,g]})),b[14]=t.ftbLabel,b[15]=g,b[16]=u):u=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v={className:"x1rg5ohu"},r={className:"x1lliihq"},s={display:"table-cell"},b[17]=s,b[18]=v,b[19]=r):(s=b[17],v=b[18],r=b[19]);b[20]===Symbol["for"]("react.memo_cache_sentinel")?(t=k.jsx("div",babelHelpers["extends"]({},v,{children:k.jsx("div",babelHelpers["extends"]({},r,{children:k.jsx("div",{style:s,children:k.jsx(c("CometImage.react"),{src:i("480588")})})}))})),b[20]=t):t=b[20];b[21]!==a||b[22]!==u?(g=k.jsxs(c("CometPressable.react"),{onPress:a,xstyle:l.menuOptionRow,children:[u,t]}),b[21]=a,b[22]=u,b[23]=g):g=b[23];return g}function a(a){var b=d("react-compiler-runtime").c(17),e=a.currentCaptionsDisplay,f=a.onPressLog,g=a.setPane;b[0]!==g?(a=function(){g(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_MAIN)},b[0]=g,b[1]=a):a=b[1];a=a;var j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},b[2]=j):j=b[2];var o;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x6s0dn4 x3nfvp2"},b[3]=o):o=b[3];var p;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=k.jsx("span",babelHelpers["extends"]({},o,{children:k.jsx(c("CometImage.react"),{src:i("480580")})})),p=k.jsx("span",babelHelpers["extends"]({className:"x1nxh6w3 x1s688f x1diwwjn"},{children:h._(/*BTDS*/"T\u00f9y ch\u1ecdn ph\u1ee5 \u0111\u1ec1")})),b[4]=o,b[5]=p):(o=b[4],p=b[5]);b[6]!==a?(j=k.jsx("div",babelHelpers["extends"]({},j,{children:k.jsxs(c("CometPressable.react"),{onPress:a,xstyle:l.pressableOption,children:[o,p]})})),b[6]=a,b[7]=j):j=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x1anpbxc"},b[8]=o):o=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(p=Object.keys(n),b[9]=p):p=b[9];b[10]!==e||b[11]!==f||b[12]!==g?(a=k.jsx("div",babelHelpers["extends"]({},o,{"data-testid":void 0,children:p.map(function(a){var b=n[a].name,c=m[b];c=Object.fromEntries(Object.entries(c).map(s));c=e!=null?c[e[b]]:"";return k.jsx(r,{onPressLog:f,option:a,optionVal:c,setPane:g},a)})})),b[10]=e,b[11]=f,b[12]=g,b[13]=a):a=b[13];b[14]!==j||b[15]!==a?(o=k.jsxs(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[j,a]}),b[14]=j,b[15]=a,b[16]=o):o=b[16];return o}function s(a){var b=a[0];a=a[1];return[a,b]}g.captionsDisplayOptionsMap=m;g.colorsFBTMap=o;g.getFontSizeDivWithFBTLabel=p;g.VideoPlayerCaptionsMenuCaptionsDisplayMainPane=a}),226);
__d("VideoPlayerCaptionsSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8917695971664599"}),null);
__d("VideoPlayerCaptionsSettingMutation.graphql",["VideoPlayerCaptionsSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPlayerCaptionsSettingResponsePayload",kind:"LinkedField",name:"video_player_captions_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VideoPlayerCaptionsSettingMutation",selections:c},params:{id:b("VideoPlayerCaptionsSettingMutation_facebookRelayOperation"),metadata:{},name:"VideoPlayerCaptionsSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VideoPlayerCaptionsSettingMutation",["CometRelay","VideoPlayerCaptionsSettingMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("VideoPlayerCaptionsSettingMutation.graphql");function a(a,b,c){return d("CometRelay").commitMutation(a,{mutation:i,onCompleted:c&&c.onCompleted,onError:c&&c.onError,optimisticResponse:{video_captions_setting:{success:!0}},variables:{input:{captions_background_color:b.captions_background_color,captions_background_opacity:b.captions_background_opacity,captions_text_color:b.captions_text_color,captions_text_size:b.captions_text_size,client_mutation_id:"www_captions_settings"}}})}g.commit=a}),98);
__d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react",["fbt","ix","CometImage.react","CometPressable.react","CometRelay","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsSettingMutation","VideoPlayerHooks","fbicon","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react")),m=j.useCallback,n={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},o={captionsBackgroundColor:h._(/*BTDS*/"M\u00e0u n\u1ec1n"),captionsBackgroundOpacity:h._(/*BTDS*/"\u0110\u1ed9 m\u1edd n\u1ec1n"),captionsTextColor:h._(/*BTDS*/"M\u00e0u ch\u1eef"),captionsTextSize:h._(/*BTDS*/"C\u1ee1 ch\u1eef")},p=function(a){return{captions_background_color:a.captionsBackgroundColor,captions_background_opacity:a.captionsBackgroundOpacity,captions_text_color:a.captionsTextColor,captions_text_size:a.captionsTextSize}};function q(a){var b=a.captionsDisplayOption,e=a.currentCaptionsDisplay,f=a.onPressLog,g=a.option,h=a.selected,j=a.setPane,o=(k||(k=d("VideoPlayerHooks"))).useController();a=h;var q=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[b];h=null;switch(b){case"captionsTextColor":case"captionsBackgroundColor":h=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").colorsFBTMap[g];break;default:h=g}var r="video-player-captions-menu-captions-display-pane-"+b+"-"+g;r=m(function(){a=!0;if(e!=null){e[b]=q[g];o.setCaptionsDisplayStyle(babelHelpers["extends"]({},e));var c=p(e);d("VideoPlayerCaptionsSettingMutation").commit(s,c)}j(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN);f&&f(b)},[e,q,b,o,g]);var s=d("CometRelay").useRelayEnvironment();return l.jsxs(c("CometPressable.react"),{"aria-pressed":a,onPress:r,testid:void 0,xstyle:n.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu x1849jeq"},{children:a&&l.jsx("div",{"data-testid":void 0,children:l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)})})})),b==="captionsTextSize"?d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").getFontSizeDivWithFBTLabel(g):l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu"},{children:h}))]})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(26),e=a.captionsDisplayOption,f=a.currentCaptionsDisplay,g=a.onPressLog,h=a.setPane;a=o[e];var j=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[e],k=f!=null?f[e]:null,m;b[0]!==h?(m=function(){h(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN)},b[0]=h,b[1]=m):m=b[1];m=m;var p="video-player-captions-menu-captions-display-pane-"+e,r;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1nxh6w3 x1s688f x1lku1pv"},b[2]=r):r=b[2];var s=p+"-topBar",t;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(t={className:"x6s0dn4 x3nfvp2 x1849jeq"},b[3]=t):t=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(t=l.jsx("span",babelHelpers["extends"]({},t,{children:l.jsx(c("CometImage.react"),{src:i("480580")})})),b[4]=t):t=b[4];b[5]!==m||b[6]!==a||b[7]!==s?(r=l.jsx("div",babelHelpers["extends"]({},r,{children:l.jsxs(c("CometPressable.react"),{onPress:m,testid:void 0,xstyle:n.pressableOption,children:[t,a]})})),b[5]=m,b[6]=a,b[7]=s,b[8]=r):r=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(t={className:"x1nxh6w3 xo1l8bm x1anpbxc"},b[9]=t):t=b[9];b[10]!==j?(m=Object.keys(j),b[10]=j,b[11]=m):m=b[11];b[12]!==j||b[13]!==k||b[14]!==e||b[15]!==f||b[16]!==g||b[17]!==h||b[18]!==m?(a=m.map(function(a){var b=k===j[a];return l.jsx(q,{captionsDisplayOption:e,currentCaptionsDisplay:f,onPressLog:g,option:a,selected:b,setPane:h},a)}),b[12]=j,b[13]=k,b[14]=e,b[15]=f,b[16]=g,b[17]=h,b[18]=m,b[19]=a):a=b[19];b[20]!==a||b[21]!==p?(s=l.jsx("div",babelHelpers["extends"]({},t,{"data-testid":void 0,children:a})),b[20]=a,b[21]=p,b[22]=s):s=b[22];b[23]!==s||b[24]!==r?(m=l.jsxs(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[r,s]}),b[23]=s,b[24]=r,b[25]=m):m=b[25];return m}g.VideoPlayerCaptionsMenuCaptionsDisplayPane=a}),226);
__d("VideoPlayerCaptionsMenuMainPane.react",["fbt","ix","CometPressable.react","CometScrollableArea.react","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenuTopBar.react","VideoPlayerHooks","fbicon","focusScopeQueries","isTruthy","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react")),m=j.useEffect,n={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",fontSize:"x1nxh6w3",fontWeight:"xo1l8bm",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",":hover_backgroundColor":"xx8nu07",$$css:!0}},o=5;function p(a){var b,e=d("react-compiler-runtime").c(27),f=a.captions,g=a.captionsVisible,j=a.controller,m=a.focused,o=a.onPressLog,p=a.setSelectedCaptionsLocale;a=(k||(k=d("VideoPlayerHooks"))).useIsVideoBroadcast();a=f.localizedCreationMethod!=null||a;b="video-player-captions-menu-language-list-item-"+((b=f.localizedLanguage)!=null?b:"");var q;e[0]!==f.captionsUrl||e[1]!==f.locale||e[2]!==f.localizedLanguage||e[3]!==g||e[4]!==j||e[5]!==o||e[6]!==p?(q=function(){var a;f.locale!=null&&p(f.locale);g||j.setCaptionsVisible(!0);f.captionsUrl!=null&&j.setCaptionsUrl(f.captionsUrl);o&&o("captions_language_selector",(a=f.localizedLanguage)!=null?a:"")},e[0]=f.captionsUrl,e[1]=f.locale,e[2]=f.localizedLanguage,e[3]=g,e[4]=j,e[5]=o,e[6]=p,e[7]=q):q=e[7];var r;e[8]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"x1rg5ohu xw4jnvo"},e[8]=r):r=e[8];var s;e[9]!==m||e[10]!==b?(s=m&&l.jsx("div",{"data-testid":void 0,children:l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)})}),e[9]=m,e[10]=b,e[11]=s):s=e[11];e[12]!==s?(r=l.jsx("div",babelHelpers["extends"]({},r,{children:s})),e[12]=s,e[13]=r):r=e[13];e[14]===Symbol["for"]("react.memo_cache_sentinel")?(s={className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf"},e[14]=s):s=e[14];var t=c("isTruthy")(f.localizedCountry)?" "+f.localizedCountry:null,u;e[15]!==a?(u=!a&&l.jsxs(l.Fragment,{children:[" ",h._(/*BTDS*/"(Do t\u00e1c gi\u1ea3 cung c\u1ea5p)")]}),e[15]=a,e[16]=u):u=e[16];e[17]!==f.localizedLanguage||e[18]!==t||e[19]!==u?(a=l.jsxs("div",babelHelpers["extends"]({},s,{children:[f.localizedLanguage,t,u]})),e[17]=f.localizedLanguage,e[18]=t,e[19]=u,e[20]=a):a=e[20];e[21]!==m||e[22]!==q||e[23]!==r||e[24]!==a||e[25]!==b?(s=l.jsxs(c("CometPressable.react"),{"aria-pressed":m,onPress:q,testid:void 0,xstyle:n.menuOptionRow,children:[r,a]}),e[21]=m,e[22]=q,e[23]=r,e[24]=a,e[25]=b,e[26]=s):s=e[26];return s}function a(a){var b=d("react-compiler-runtime").c(59),e=a.availableCaptionsLocales,f=a.captionsListExpanded,g=a.children,j=a.onPressLog,q=a.selectedCaptionsLocale,r=a.setCaptionsListExpanded,s=a.setPane,t=a.setSelectedCaptionsLocale,u=(k||(k=d("VideoPlayerHooks"))).useController(),v=k.useCaptionsVisible();a=e!=null?e.length:0;var w,x;b[0]!==v||b[1]!==t?(w=function(){v||t("")},x=[v,t],b[0]=v,b[1]=t,b[2]=w,b[3]=x):(w=b[2],x=b[3]);m(w,x);if(e==null)return null;b[4]!==e||b[5]!==j||b[6]!==s?(w=l.jsx(c("VideoPlayerCaptionsMenuTopBar.react"),{availableCaptionsLocales:e,onPressLog:j,setPane:s}),b[4]=e,b[5]=j,b[6]=s,b[7]=w):w=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(x={className:"x1anpbxc x15eivr9"},b[8]=x):x=b[8];s=q==="";var y;b[9]!==u||b[10]!==t?(y=function(){t(""),u.setCaptionsVisible(!1)},b[9]=u,b[10]=t,b[11]=y):y=b[11];var z;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(z={className:"x1rg5ohu xw4jnvo"},b[12]=z):z=b[12];var A;b[13]!==q?(A=q===""&&l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)}),b[13]=q,b[14]=A):A=b[14];b[15]!==A?(z=l.jsx("div",babelHelpers["extends"]({},z,{children:A})),b[15]=A,b[16]=z):z=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(A=l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf"},{children:h._(/*BTDS*/"T\u1eaft")})),b[17]=A):A=b[17];b[18]!==s||b[19]!==y||b[20]!==z?(A=l.jsxs(c("CometPressable.react"),{"aria-pressed":s,onPress:y,xstyle:n.menuOptionRow,children:[z,A]}),b[18]=s,b[19]=y,b[20]=z,b[21]=A):A=b[21];if(b[22]!==e||b[23]!==v||b[24]!==u||b[25]!==j||b[26]!==q||b[27]!==t){b[29]!==v||b[30]!==u||b[31]!==j||b[32]!==q||b[33]!==t?(s=function(a){var b=a.locale===q;return a.localizedLanguage!=null?l.jsx(p,{captions:a,captionsVisible:v,controller:u,focused:b,onPressLog:j,setSelectedCaptionsLocale:t},a.locale):null},b[29]=v,b[30]=u,b[31]=j,b[32]=q,b[33]=t,b[34]=s):s=b[34];y=e.slice(0,4).map(s);b[22]=e;b[23]=v;b[24]=u;b[25]=j;b[26]=q;b[27]=t;b[28]=y}else y=b[28];b[35]!==a||b[36]!==f||b[37]!==r?(z=a>=o&&!f&&l.jsx(c("CometPressable.react"),{onPress:function(){r(!0)},xstyle:n.menuOptionRow,children:l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x9pbi5e"},{children:h._(/*BTDS*/"Xem th\u00eam")}))}),b[35]=a,b[36]=f,b[37]=r,b[38]=z):z=b[38];b[39]!==e||b[40]!==f||b[41]!==v||b[42]!==u||b[43]!==q||b[44]!==t?(s=f&&e.slice(4).map(function(a){var b=a.locale===q;return a.localizedLanguage!=null?l.jsx(p,{captions:a,captionsVisible:v,controller:u,focused:b,setSelectedCaptionsLocale:t},a.locale):null}),b[39]=e,b[40]=f,b[41]=v,b[42]=u,b[43]=q,b[44]=t,b[45]=s):s=b[45];b[46]!==f||b[47]!==r?(a=f&&l.jsx(c("CometPressable.react"),{onPress:function(){r(!1)},xstyle:n.menuOptionRow,children:l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x9pbi5e"},{children:h._(/*BTDS*/"\u1ea8n b\u1edbt")}))}),b[46]=f,b[47]=r,b[48]=a):a=b[48];b[49]!==A||b[50]!==y||b[51]!==z||b[52]!==s||b[53]!==a?(e=l.jsx(c("CometScrollableArea.react"),{hideScrollbar:!0,children:l.jsxs("div",babelHelpers["extends"]({},x,{"data-testid":void 0,children:[A,y,z,s,a]}))}),b[49]=A,b[50]=y,b[51]=z,b[52]=s,b[53]=a,b[54]=e):e=b[54];b[55]!==g||b[56]!==e||b[57]!==w?(f=l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:l.jsxs("div",{"data-testid":void 0,children:[w,g,e]})}),b[55]=g,b[56]=e,b[57]=w,b[58]=f):f=b[58];return f}g.VideoPlayerCaptionsMenuMainPane=a}),226);
__d("VideoPlayerCaptionsMenuTopBar.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerCaptionsMenu.react","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react"));j.useCallback;var m={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(18),e=a.availableCaptionsLocales,f=a.onPressLog,g=a.setPane;b[0]!==f||b[1]!==g?(a=function(){g(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),f&&f("captions_main_menu_top_bar")},b[0]=f,b[1]=g,b[2]=a):a=b[2];a=a;var j=(k||(k=d("VideoPlayerHooks"))).useIsLive(),o=k.useIsVideoBroadcast();o=o&&!j;b[3]!==e||b[4]!==o?(j=(e==null?void 0:e.some(n))||o,b[3]=e,b[4]=o,b[5]=j):j=b[5];e=j;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x14ctfv x78zum5 x1jzhcrs"},b[6]=o):o=b[6];var p,q;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(j=l.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 x1s688f"},{children:h._(/*BTDS*/"Ph\u1ee5 \u0111\u1ec1")})),p={className:"x6s0dn4 x14ctfv x1ypdohk x3nfvp2 x1bhwmg6 x13a6bvl xymharo"},q={className:"x3nfvp2"},b[7]=j,b[8]=p,b[9]=q):(j=b[7],p=b[8],q=b[9]);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(p=l.jsxs("div",babelHelpers["extends"]({},p,{children:[l.jsx("span",babelHelpers["extends"]({},q,{children:l.jsx(c("CometImage.react"),{src:i("492300")})})),l.jsx("div",babelHelpers["extends"]({className:"x3nfvp2 xo1l8bm xdzw4kq"},{children:h._(/*BTDS*/"T\u00f9y ch\u1ecdn")}))]})),b[10]=p):p=b[10];b[11]!==a?(q=l.jsx("div",babelHelpers["extends"]({},o,{children:l.jsxs(c("CometPressable.react"),{onPress:a,testid:void 0,xstyle:m.pressableOption,children:[j,p]})})),b[11]=a,b[12]=q):q=b[12];b[13]!==e?(o=e!=null&&e&&l.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 x1k4tb9n"},{children:h._(/*BTDS*/"T\u1ea1o t\u1ef1 \u0111\u1ed9ng")})),b[13]=e,b[14]=o):o=b[14];b[15]!==q||b[16]!==o?(j=l.jsxs("div",{children:[q,o]}),b[15]=q,b[16]=o,b[17]=j):j=b[17];return j}function n(a){return a.localizedCreationMethod!=null}g["default"]=a}),226);
__d("VideoPlayerCaptionsControl.react",["fbt","ix","CometRelay","IntlCurrentLocale","VideoPlayerCaptionsControl_video.graphql","VideoPlayerCaptionsMenu.react","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerHooks","VideoPlayerLoggingSuboriginContext","VideoPlayerUserInteractionCounter","fbicon","react","requireDeferred","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||(k=d("react"));e=k;var n=e.useCallback,o=e.useContext,p=e.useEffect,q=e.useMemo,r=e.useRef,s=e.useState,t=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerCaptionsControl.react"),u="asr",v=function(a){return a.length<2?null:a.substr(0,2)};function a(a){var e=a.alignMenuToIcon;e=e===void 0?!1:e;var f=a.availableCaptionsLocales,g=a.captionsVisible,k=a.children;k=k===void 0?null:k;var w=a.compactMenu,x=a.icon,y=a.initialCaptionsUrl,z=a.menuOpened,A=a.onMenuOpen,B=a.onUserInteraction,C=a.setMenuOpened;a=a.video;var D=h._(/*BTDS*/"Ch\u00fa th\u00edch");d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_captions_menu",z===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,B);B=d("CometRelay").useFragment(j!==void 0?j:j=b("VideoPlayerCaptionsControl_video.graphql"),a);var E=(l||(l=d("VideoPlayerHooks"))).useMuted(),F=l.useController(),G=c("usePlayerOriginRouteTracePolicy")(),H=c("useVideoPlayerAvailableCaptionsLocalesFromRelay")(B),I=q(function(){var a;return((a=(a=f)!=null?a:H)!=null?a:[]).slice().sort(function(a,b){return((a=a.localizedLanguage)!=null?a:"")>((a=b.localizedLanguage)!=null?a:"")?1:-1})},[f,H]),J=(a=y)!=null?a:B==null?void 0:B.captions_url;y=s("");a=y[0];var K=y[1],L=r(null),M=r(null);p(function(){I.forEach(function(a){a.captionsUrl===J&&a.locale!=null&&(L.current==null&&(L.current=a.locale),K(a.locale))})},[I,J]);var N=c("IntlCurrentLocale").code;p(function(){var a;L.current!==u&&v((a=L.current)!=null?a:"")!==v(N)&&M.current===null?(F.setCaptionsVisible(!1),M.current=!1):E&&!g&&M.current===null?(M.current=!0,F.setCaptionsVisible(!0)):!E&&M.current===!0&&(F.setCaptionsVisible(!1),M.current=!1)},[g,F,E,N]);var O=z===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU;B=s(!1);y=B[0];z=B[1];var P=o(c("VideoPlayerLoggingSuboriginContext")),Q=c("useMinifiedProductAttribution")(),R=n(function(a,b){a===void 0&&(a=null),b===void 0&&(b=null),t.onReady(function(c){c.log({attribution_id_v2:Q,click_point:a,event:"click",event_target_info:G,event_target_sub_type:b,player_suborigin:P})})},[Q,G,P]);return m.jsxs("div",babelHelpers["extends"]({},{0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[!!(e===!0)<<0],{"data-testid":void 0,children:[O&&m.jsx("div",babelHelpers["extends"]({role:"dialog"},{0:{className:"x1av4zun x1lcm9me x1yr5g0i xrt01vj x10y3i5r xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk xk6ci0l x1602a87"},2:{className:"x1av4zun x1lcm9me x1yr5g0i xrt01vj x10y3i5r xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 xwjie4w"},1:{className:"x1av4zun x1lcm9me x1yr5g0i xrt01vj x10y3i5r xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"},3:{className:"x1av4zun x1lcm9me x1yr5g0i xrt01vj x10y3i5r xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"}}[!!(w===!0)<<1|!!(e===!0)<<0],{children:m.jsx(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenu,{availableCaptionsLocales:I,captionsListExpanded:y,onClose:function(){C!=null&&C(null)},onPressLog:R,selectedCaptionsLocale:a,setCaptionsListExpanded:z,setSelectedCaptionsLocale:K,children:k})})),m.jsx(c("VideoPlayerControlIcon.react"),{icon:x==null?g?d("fbicon")._(i("662652"),20):d("fbicon")._(i("662655"),20):x,label:D,onPress:function(){C!=null&&C(O?null:d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU),!O&&A!=null&&A(),R("closed_captions_button")},tooltip:D})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerCastControlIcon.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","react-compiler-runtime","recoverableViolation","useCometLazyDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react"));b=j;b.useCallback;var m=b.useContext,n=c("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControlIcon.react");function a(a){var b=d("react-compiler-runtime").c(14),e=a.subOrigin;d("CastingControllerHooks").useCastingInitializeIfNecessary();var f=(a=(k||(k=d("VideoPlayerHooks"))).useVideoFbid())!=null?a:"",g=(k||(k=d("VideoPlayerHooks"))).useController(),j=d("CometRelay").useRelayEnvironment(),o=d("CastingControllerHooks").useCastingController();a=m(c("CometWatchAndScrollVideoContext"));var p=c("useCometLazyDialog")(n),q=p[0],r=a==null?void 0:a.videoID;b[0]!==o||b[1]!==j||b[2]!==e||b[3]!==g||b[4]!==f?(p=function(){if(f!=null){var a=g.getPlayheadPosition();o.startPlayVideoNow({environment:j,origin:"video_home",position:a,subOrigin:e,videoID:f})}else c("recoverableViolation")("Could not transition to Cast player because videoID was null","comet_video_player")},b[0]=o,b[1]=j,b[2]=e,b[3]=g,b[4]=f,b[5]=p):p=b[5];var s=p;b[6]!==s||b[7]!==q||b[8]!==r?(a=function(){r!=null?q({onClose:c("emptyFunction"),onContinue:s,startingVideoType:"cast"},c("emptyFunction")):s()},b[6]=s,b[7]=q,b[8]=r,b[9]=a):a=b[9];p=a;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Truy\u1ec1n video l\u00ean TV"),b[10]=a):a=b[10];a=a;var t;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(t=d("fbicon")._(i("788899"),20),b[11]=t):t=b[11];b[12]!==p?(t=l.jsx(c("VideoPlayerControlIcon.react"),{color:"white",icon:t,label:a,onPress:p,tooltip:a}),b[12]=p,b[13]=t):t=b[13];return t}g["default"]=a}),226);
__d("VideoPlayerCastControl.react",["CastingControllerHooks","VideoPlayerCastControlIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2);a=a.subOrigin;var e=d("CastingControllerHooks").useIsCastAvailable();if(!e)return null;b[0]!==a?(e=i.jsx(c("VideoPlayerCastControlIcon.react"),{subOrigin:a}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("VideoPlayerCastControlShimImpl.modern.react",["deferredLoadComponent","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerCastControl.react").__setRef("VideoPlayerCastControlShimImpl.modern.react"));g["default"]=a}),98);
__d("VideoPlayerCastControlShim.react",["CometPlaceholder.react","VideoPlayerCastControlShimImpl.modern.react","VideoPlayerControlsGroups.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e,f;b[0]!==a?(e=a.isVisible,f=babelHelpers.objectWithoutPropertiesLoose(a,["isVisible"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("VideoPlayerCastControlShimImpl.modern.react"),babelHelpers["extends"]({},f))}),b[3]=f,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(f=i.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:e,noPaddingEnd:!0,noPaddingStart:!0,children:a}),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}g["default"]=a}),98);
__d("VideoPlayerExpandSidePanelControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(){var a=d("react-compiler-runtime").c(12),b=l(c("CometTahoeSidePaneContext")),e=b.rightRailExpanded,f=b.setRightRailExpanded;a[0]!==e?(b=e?h._(/*BTDS*/"Thu g\u1ecdn ph\u1ea7n b\u00ecnh lu\u1eadn"):h._(/*BTDS*/"M\u1edf r\u1ed9ng ph\u1ea7n b\u00ecnh lu\u1eadn"),a[0]=e,a[1]=b):b=a[1];b=b;var g;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},a[2]=g):g=a[2];var j;a[3]!==e?(j=e?d("fbicon")._(i("557039"),20):d("fbicon")._(i("557052"),20),a[3]=e,a[4]=j):j=a[4];var m;a[5]!==e||a[6]!==f?(m=function(){f(!e)},a[5]=e,a[6]=f,a[7]=m):m=a[7];a[8]!==b||a[9]!==j||a[10]!==m?(g=k.jsx("div",babelHelpers["extends"]({},g,{children:k.jsx(c("VideoPlayerControlIcon.react"),{icon:j,label:b,onPress:m,tooltip:b})})),a[8]=b,a[9]=j,a[10]=m,a[11]=g):g=a[11];return g}g["default"]=a}),226);
__d("VideoPlayerLiveVideoControls_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerLiveVideoControls_video",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"is_clipping_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_rewind_enabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a],storageKey:null},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"LiveVideoLatencyMenuContextProvider_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_community_moderation_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video",fragmentName:"VideoPlayerModeratorControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_live_rewind",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_live_rewind",fragmentName:"VideoPlayerLiveRewindControlsGroup_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_see_costreaming_tools",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("VideoPlayerQuietModeControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(){var a=d("react-compiler-runtime").c(12),b=l(c("CometTahoeSidePaneContext")),e=b.rightRailHidden,f=b.setRightRailHidden;a[0]!==e?(b=e?h._(/*BTDS*/"Hi\u1ec3n th\u1ecb b\u00ecnh lu\u1eadn v\u00e0 c\u1ea3m x\u00fac"):h._(/*BTDS*/"\u1ea8n b\u00ecnh lu\u1eadn v\u00e0 c\u1ea3m x\u00fac"),a[0]=e,a[1]=b):b=a[1];b=b;var g;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},a[2]=g):g=a[2];var j;a[3]!==e?(j=e?d("fbicon")._(i("942218"),20):d("fbicon")._(i("942221"),20),a[3]=e,a[4]=j):j=a[4];var m;a[5]!==e||a[6]!==f?(m=function(){f(!e)},a[5]=e,a[6]=f,a[7]=m):m=a[7];a[8]!==b||a[9]!==j||a[10]!==m?(g=k.jsx("div",babelHelpers["extends"]({},g,{children:k.jsx(c("VideoPlayerControlIcon.react"),{icon:j,label:b,onPress:m,tooltip:b})})),a[8]=b,a[9]=j,a[10]=m,a[11]=g):g=a[11];return g}g["default"]=a}),226);
__d("VideoPlayerSettingsMenuQualityPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.selectedVideoQuality,f=a.setPane;a=a.targetVideoQuality;var g;b[0]!==f?(g=function(){f(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.QUALITY)},b[0]=f,b[1]=g):g=b[1];var j,m;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j=k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"Ch\u1ea5t l\u01b0\u1ee3ng")})),m={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},b[2]=j,b[3]=m):(j=b[2],m=b[3]);var n;b[4]!==e||b[5]!==a?(n=e==="notselected"?k.jsx("span",{"data-testid":void 0,children:"\xa0"}):e==="auto"?k.jsxs(k.Fragment,{children:[k.jsx("span",{"data-testid":void 0,children:h._(/*BTDS*/"T\u1ef1 \u0111\u1ed9ng")}),a!=null?k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"\xa0"}),k.jsx("span",{"data-testid":void 0,children:a})]}):null]}):k.jsx("span",{"data-testid":void 0,children:e}),b[4]=e,b[5]=a,b[6]=n):n=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x3nfvp2 xmgb6t1 xwklpps"},b[7]=e):e=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("span",babelHelpers["extends"]({},e,{children:k.jsx(c("CometImage.react"),{src:i("480587")})})),b[8]=a):a=b[8];b[9]!==n?(e=k.jsxs("div",babelHelpers["extends"]({},m,{children:[n,a]})),b[9]=n,b[10]=e):e=b[10];b[11]!==g||b[12]!==e?(m=k.jsxs(c("CometPressable.react"),{onPress:g,testid:void 0,xstyle:l.pressableOption,children:[j,e]}),b[11]=g,b[12]=e,b[13]=m):m=b[13];return m}g["default"]=a}),226);
__d("VideoPlayerSettingsMenu.react",["fbt","$InternalEnum","CometErrorBoundary.react","CometKeys","CometPlaceholder.react","CometRelay","LiveVideoLatencyMenu.react","PlaybackSpeedExperiments","VideoPlayerHooks","VideoPlayerSettingsMenuAudioTrackPane.react","VideoPlayerSettingsMenuMainPane.react","VideoPlayerSettingsMenuPlaybackSpeedPane.react","VideoPlayerSettingsMenuQualityPane.react","react","react-compiler-runtime","recoverableViolation","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.useContext,m=e.useEffect;e.useMemo;var n=e.useRef,o=e.useState,p=b("$InternalEnum")({LATENCY:"latency",MAIN:"main",PLAYBACK_SPEED:"playbackSpeed",QUALITY:"quality",AUDIO:"audio"});function a(a){var b=d("react-compiler-runtime").c(51),e=a.children,f=a.forceShowPlaybackRateControl,g=a.onClose;a=e===void 0?null:e;e=(j||(j=d("VideoPlayerHooks"))).useCaptionsLoaded();var i=j.useCaptionsVisible(),q=j.useSelectedVideoQuality(),r=j.useTargetAudioTrack(),s=j.useAvailableAudioTracks(),t=j.useInbandCaptionsAutogenerated(),u=j.useTargetVideoQuality(),v=o(p.MAIN),w=v[0],x=v[1];v=o(i);i=v[0];v=v[1];var y=j.usePlaybackRate(),z=j.useIsLive(),A=j.useIsLiveRewindActive(),B=l(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext);B=B.liveVideoLatencyMenuPaneMatchPointer;var C=j.useShouldShowPlaybackRateControl(),D;b[0]!==f||b[1]!==C?(D=f===!0||d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&C,b[0]=f,b[1]=C,b[2]=D):D=b[2];f=D;b[3]!==z||b[4]!==A||b[5]!==w?(C=function(){z&&!A&&w===p.PLAYBACK_SPEED&&x(p.MAIN)},D=[A,x,z,w],b[3]=z,b[4]=A,b[5]=w,b[6]=C,b[7]=D):(C=b[6],D=b[7]);m(C,D);b[8]!==s.length||b[9]!==w?(C=function(){s.length<=1&&w===p.AUDIO&&x(p.MAIN)},b[8]=s.length,b[9]=w,b[10]=C):C=b[10];b[11]!==s||b[12]!==w?(D=[s,w],b[11]=s,b[12]=w,b[13]=D):D=b[13];m(C,D);var E=n(null),F=n(null);b[14]!==g?(C=function(a){E.current&&F.current&&a.target instanceof HTMLElement&&document.contains(a.target)&&!E.current.contains(a.target)&&F.current.contains(a.target)&&g()},b[14]=g,b[15]=C):C=b[15];var G=C;b[16]!==G?(D=function(){document.addEventListener("click",G);return function(){document.removeEventListener("click",G)}},C=[G],b[16]=G,b[17]=D,b[18]=C):(D=b[17],C=b[18]);m(D,C);b[19]===Symbol["for"]("react.memo_cache_sentinel")?(D={key:c("CometKeys").ESCAPE},C=h._(/*BTDS*/"\u0110\u00f3ng menu c\u00e0i \u0111\u1eb7t video"),b[19]=D,b[20]=C):(D=b[19],C=b[20]);b[21]!==g?(D=[{command:D,description:C,handler:function(){g()}}],b[21]=g,b[22]=D):D=b[22];C=D;D=C;c("useLayerKeyCommands")(D);b[23]!==s||b[24]!==e||b[25]!==i||b[26]!==a||b[27]!==t||b[28]!==z||b[29]!==y||b[30]!==q||b[31]!==f||b[32]!==r||b[33]!==u?(C=k.jsx(c("VideoPlayerSettingsMenuMainPane.react"),{availableAudioTracks:s,captionsLoaded:e,captionsVisibleOptimistic:i,inbandCaptionsAutogenerated:t,isLive:z,playbackRate:y,selectedVideoQuality:q,setIsCaptionsVisible:v,setPane:x,shouldEnablePlaybackRateSupport:f,targetAudioTrack:r,targetVideoQuality:u,children:a}),b[23]=s,b[24]=e,b[25]=i,b[26]=a,b[27]=t,b[28]=z,b[29]=y,b[30]=q,b[31]=f,b[32]=r,b[33]=u,b[34]=C):C=b[34];D=C;bb0:switch(w){case p.LATENCY:if(B==null){c("recoverableViolation")("Latency components should not be null","gaming_video");break bb0}b[35]===Symbol["for"]("react.memo_cache_sentinel")?(v={setPane:x},b[35]=v):v=b[35];b[36]!==B?(e=k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:B,props:v})})}),b[36]=B,b[37]=e):e=b[37];D=e;break bb0;case p.MAIN:break bb0;case p.PLAYBACK_SPEED:b[38]!==y?(i=k.jsx(c("VideoPlayerSettingsMenuPlaybackSpeedPane.react"),{playbackRate:y,setPane:x}),b[38]=y,b[39]=i):i=b[39];D=i;break bb0;case p.QUALITY:b[40]!==q?(a=k.jsx(c("VideoPlayerSettingsMenuQualityPane.react"),{selectedVideoQuality:q,setPane:x}),b[40]=q,b[41]=a):a=b[41];D=a;break bb0;case p.AUDIO:b[42]!==s||b[43]!==z||b[44]!==r?(t=!z&&s.length>1?k.jsx(c("VideoPlayerSettingsMenuAudioTrackPane.react"),{availableAudioTracks:s,setPane:x,targetAudioTrack:r}):null,b[42]=s,b[43]=z,b[44]=r,b[45]=t):t=b[45];D=t}b[46]!==D?(f=k.jsx("div",{ref:E,children:D}),b[46]=D,b[47]=f):f=b[47];b[48]===Symbol["for"]("react.memo_cache_sentinel")?(u=k.jsx("div",babelHelpers["extends"]({className:"xjbqb8w x5yr21d x17qophe xg6iff7 x1g81zrj xixxii4 x13vifvy xh8yej3 x8knxv4"},{"data-testid":void 0,ref:F})),b[48]=u):u=b[48];b[49]!==f?(C=k.jsxs(k.Fragment,{children:[f,u]}),b[49]=f,b[50]=C):C=b[50];return C}g.VideoPlayerSettingsMenuPaneType=p;g.VideoPlayerSettingsMenu=a}),226);
__d("VideoPlayerSettingsMenuAudioTrackPane.react",["fbt","ix","CometImage.react","CometPressable.react","CurrentLocale","FocusRegion.react","VideoPlayerAudioTrackUtils","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react"),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(21),e=a.availableAudioTracks,f=a.setPane,g=a.targetAudioTrack,j=(k||(k=d("VideoPlayerHooks"))).useController();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},b[0]=a):a=b[0];var n;b[1]!==f?(n=function(){return f(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},b[1]=f,b[2]=n):n=b[2];var o;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},b[3]=o):o=b[3];var p;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=l.jsx("span",babelHelpers["extends"]({},o,{children:l.jsx(c("CometImage.react"),{src:i("480579")})})),p=h._(/*BTDS*/"\u00c2m thanh"),b[4]=o,b[5]=p):(o=b[4],p=b[5]);b[6]!==n?(a=l.jsx("div",babelHelpers["extends"]({},a,{children:l.jsxs(c("CometPressable.react"),{onPress:n,testid:void 0,xstyle:m.pressableOption,children:[o,p]})})),b[6]=n,b[7]=a):a=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x1hm9lzh x1anpbxc xn80e1m"},b[8]=o):o=b[8];if(b[9]!==e||b[10]!==j||b[11]!==(g==null?void 0:g.id)){b[13]!==j||b[14]!==(g==null?void 0:g.id)?(p=function(a){var b=(g==null?void 0:g.id)===a.id,e=d("VideoPlayerAudioTrackUtils").getAudioTrackLabelLocalized(a,c("CurrentLocale").get());return l.jsx("div",{children:l.jsxs(c("CometPressable.react"),{onPress:function(){j.selectVideoVariant({lang:a.lang,role:a.role})},testid:void 0,xstyle:m.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25"},{children:b&&l.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),l.jsx("div",babelHelpers["extends"]({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!b<<0],{"data-testid":void 0,children:e}))]})},a.id)},b[13]=j,b[14]=g==null?void 0:g.id,b[15]=p):p=b[15];n=e.map(p);b[9]=e;b[10]=j;b[11]=g==null?void 0:g.id;b[12]=n}else n=b[12];b[16]!==n?(p=l.jsx("div",babelHelpers["extends"]({},o,{"data-testid":void 0,children:n})),b[16]=n,b[17]=p):p=b[17];b[18]!==a||b[19]!==p?(e=l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:l.jsxs("div",{"data-testid":void 0,children:[a,p]})}),b[18]=a,b[19]=p,b[20]=e):e=b[20];return e}g["default"]=a}),226);
__d("VideoPlayerSettingsMenuAudioTrackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","CurrentLocale","VideoPlayerAudioTrackUtils","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(15),e=a.setPane;a=a.targetAudioTrack;var f;b[0]!==a?(f=d("VideoPlayerAudioTrackUtils").getAudioTrackLabelLocalized(a,c("CurrentLocale").get()),b[0]=a,b[1]=f):f=b[1];a=f;b[2]!==e?(f=function(){e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.AUDIO)},b[2]=e,b[3]=f):f=b[3];var g,j;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"\u00c2m thanh")})),j={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j xn80e1m"},b[4]=g,b[5]=j):(g=b[4],j=b[5]);var m;b[6]!==a?(m=k.jsx("span",{"data-testid":void 0,children:a}),b[6]=a,b[7]=m):m=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x3nfvp2 xmgb6t1 xwklpps"},b[8]=a):a=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("span",babelHelpers["extends"]({},a,{children:k.jsx(c("CometImage.react"),{src:i("480587")})})),b[9]=a):a=b[9];b[10]!==m?(j=k.jsxs("div",babelHelpers["extends"]({},j,{children:[m,a]})),b[10]=m,b[11]=j):j=b[11];b[12]!==f||b[13]!==j?(a=k.jsxs(c("CometPressable.react"),{onPress:f,testid:void 0,xstyle:l.pressableOption,children:[g,j]}),b[12]=f,b[13]=j,b[14]=a):a=b[14];return a}g["default"]=a}),226);
__d("VideoPlayerSettingsMenuMainPane.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","FocusRegion.react","LiveVideoLatencyMenu.react","VideoPlayerSettingsMenuAudioTrackPaneToggle.react","VideoPlayerSettingsMenuPlaybackPaneToggle.react","VideoPlayerSettingsMenuQualityPaneToggle.react","focusScopeQueries","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(23),e=a.availableAudioTracks,f=a.children,g=a.isLive,h=a.playbackRate,k=a.selectedVideoQuality,l=a.setPane,m=a.shouldEnablePlaybackRateSupport,n=a.targetAudioTrack;a=a.targetVideoQuality;var o=j(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext);o=o.liveVideoLatencyMenuPaneToggleMatchPointer;g=!g&&e.length>1?c("gkx")("24336"):!1;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},b[0]=e):e=b[0];b[1]!==k||b[2]!==l||b[3]!==a?(e=i.jsx("div",babelHelpers["extends"]({},e,{children:i.jsx(c("VideoPlayerSettingsMenuQualityPaneToggle.react"),{selectedVideoQuality:k,setPane:l,targetVideoQuality:a})})),b[1]=k,b[2]=l,b[3]=a,b[4]=e):e=b[4];b[5]!==l||b[6]!==g||b[7]!==n?(k=g&&i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("VideoPlayerSettingsMenuAudioTrackPaneToggle.react"),{setPane:l,targetAudioTrack:n})})),b[5]=l,b[6]=g,b[7]=n,b[8]=k):k=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},b[9]=a):a=b[9];b[10]!==h||b[11]!==l||b[12]!==m?(g=i.jsx("div",babelHelpers["extends"]({},a,{children:i.jsx(c("VideoPlayerSettingsMenuPlaybackPaneToggle.react"),{playbackRate:h,setPane:l,shouldEnablePlaybackRateSupport:m})})),b[10]=h,b[11]=l,b[12]=m,b[13]=g):g=b[13];b[14]!==o||b[15]!==l?(n=o!=null&&i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").MatchContainer,{match:o,props:{setPane:l}})})})})),b[14]=o,b[15]=l,b[16]=n):n=b[16];b[17]!==f||b[18]!==e||b[19]!==k||b[20]!==g||b[21]!==n?(a=i.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:i.jsxs("div",{"data-testid":void 0,children:[e,k,g,n,f]})}),b[17]=f,b[18]=e,b[19]=k,b[20]=g,b[21]=n,b[22]=a):a=b[22];return a}g["default"]=a}),98);
__d("VideoPlayerSettingsMenuPlaybackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(13),e=a.playbackRate,f=a.setPane;a=a.shouldEnablePlaybackRateSupport;if(!a)return null;b[0]!==f?(a=function(){f(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.PLAYBACK_SPEED)},b[0]=f,b[1]=a):a=b[1];var g,j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"T\u1ed1c \u0111\u1ed9 ph\u00e1t l\u1ea1i")})),j={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},b[2]=g,b[3]=j):(g=b[2],j=b[3]);var m;b[4]!==e?(m=k.jsx("span",{"data-testid":void 0,children:e}),b[4]=e,b[5]=m):m=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x3nfvp2 xmgb6t1 xwklpps"},b[6]=e):e=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx("span",babelHelpers["extends"]({},e,{children:k.jsx(c("CometImage.react"),{src:i("480587")})})),b[7]=e):e=b[7];b[8]!==m?(j=k.jsxs("div",babelHelpers["extends"]({},j,{children:[m,e]})),b[8]=m,b[9]=j):j=b[9];b[10]!==a||b[11]!==j?(e=k.jsxs(c("CometPressable.react"),{onPress:a,testid:void 0,xstyle:l.pressableOption,children:[g,j]}),b[10]=a,b[11]=j,b[12]=e):e=b[12];return e}g["default"]=a}),226);
__d("VideoPlayerSettingsMenuPlaybackSpeedPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react"),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(15),e=a.playbackRate,f=a.setPane,g=(k||(k=d("VideoPlayerHooks"))).useController();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},b[0]=a):a=b[0];var j;b[1]!==f?(j=function(){return f(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},b[1]=f,b[2]=j):j=b[2];var n;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x3nfvp2 xmgb6t1 x165d6jo"},b[3]=n):n=b[3];var o;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(n=l.jsx("span",babelHelpers["extends"]({},n,{children:l.jsx(c("CometImage.react"),{src:i("480579")})})),o=h._(/*BTDS*/"T\u1ed1c \u0111\u1ed9 ph\u00e1t l\u1ea1i"),b[4]=n,b[5]=o):(n=b[4],o=b[5]);b[6]!==j?(a=l.jsx("div",babelHelpers["extends"]({},a,{children:l.jsxs(c("CometPressable.react"),{onPress:j,testid:void 0,xstyle:m.pressableOption,children:[" ",n,o]})})),b[6]=j,b[7]=a):a=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x1hm9lzh x1anpbxc"},b[8]=n):n=b[8];b[9]!==g||b[10]!==e?(o=l.jsx("div",babelHelpers["extends"]({},n,{"data-testid":void 0,children:[.5,.75,1,1.25,1.5,1.75,2].map(function(a){var b=e===a,d=h._(/*BTDS*/"\u0110\u1eb7t t\u1ed1c \u0111\u1ed9 ph\u00e1t l\u1ea1i \u1edf m\u1ee9c {playback_rate_option}{is_playback_rate_option_selected}",[h._param("playback_rate_option",a),h._param("is_playback_rate_option_selected",b?", selected":"")]);return l.jsx("div",{children:l.jsxs(c("CometPressable.react"),{"aria-checked":b,"aria-label":d,onPress:function(){g.setPlaybackRate(a)},testid:void 0,xstyle:m.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"x17j41np x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25"},{children:b&&l.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),l.jsx("div",babelHelpers["extends"]({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!b<<0],{"data-testid":void 0,children:a}))]})},a)})})),b[9]=g,b[10]=e,b[11]=o):o=b[11];b[12]!==a||b[13]!==o?(j=l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:l.jsxs("div",{"data-testid":void 0,children:[a,o]})}),b[12]=a,b[13]=o,b[14]=j):j=b[14];return j}g["default"]=a}),226);
__d("VideoPlayerSettingsMenuQualityPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react"),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(26),e=a.selectedVideoQuality,f=a.setPane;a=(k||(k=d("VideoPlayerHooks"))).useAvailableVideoQualities();var g=k.useIsAbrEnabled(),j=k.useController(),n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},b[0]=n):n=b[0];var o;b[1]!==f?(o=function(){return f(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},b[1]=f,b[2]=o):o=b[2];var p;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},b[3]=p):p=b[3];var q;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=l.jsx("span",babelHelpers["extends"]({},p,{children:l.jsx(c("CometImage.react"),{src:i("480579")})})),q=h._(/*BTDS*/"Ch\u1ea5t l\u01b0\u1ee3ng"),b[4]=p,b[5]=q):(p=b[4],q=b[5]);b[6]!==o?(n=l.jsx("div",babelHelpers["extends"]({},n,{children:l.jsxs(c("CometPressable.react"),{onPress:o,testid:void 0,xstyle:m.pressableOption,children:[p,q]})})),b[6]=o,b[7]=n):n=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"x1hm9lzh x1anpbxc"},b[8]=p):p=b[8];b[9]!==j||b[10]!==g||b[11]!==e?(q=g?l.jsx("div",{children:l.jsxs(c("CometPressable.react"),{onPress:function(){j.selectVideoQuality("auto")},testid:void 0,xstyle:m.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25"},{children:e==="auto"&&l.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),l.jsx("div",babelHelpers["extends"]({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!(e==="auto")<<0],{"data-testid":void 0,children:h._(/*BTDS*/"T\u1ef1 \u0111\u1ed9ng")}))]})},"auto"):null,b[9]=j,b[10]=g,b[11]=e,b[12]=q):q=b[12];if(b[13]!==a||b[14]!==j||b[15]!==e){b[17]!==j||b[18]!==e?(o=function(a){var b=e===a;return l.jsx("div",{children:l.jsxs(c("CometPressable.react"),{onPress:function(){j.selectVideoQuality(a)},testid:void 0,xstyle:m.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25"},{children:b&&l.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),l.jsx("div",babelHelpers["extends"]({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!b<<0],{"data-testid":void 0,children:a}))]})},a)},b[17]=j,b[18]=e,b[19]=o):o=b[19];g=a.map(o).reverse();b[13]=a;b[14]=j;b[15]=e;b[16]=g}else g=b[16];b[20]!==q||b[21]!==g?(o=l.jsxs("div",babelHelpers["extends"]({},p,{"data-testid":void 0,children:[q,g]})),b[20]=q,b[21]=g,b[22]=o):o=b[22];b[23]!==o||b[24]!==n?(a=l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:l.jsxs("div",{"data-testid":void 0,children:[n,o]})}),b[23]=o,b[24]=n,b[25]=a):a=b[25];return a}g["default"]=a}),226);
__d("VideoPlayerSettingsControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerSettingsMenu.react","VideoPlayerUserInteractionCounter","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useState;function a(a){var b=d("react-compiler-runtime").c(26),e=a.alignMenuToIcon,f=a.children,g=a.compactMenu,j=a.forceShowPlaybackRateControl,m=a.icon,n=a.menuOpened,o=a.onMenuOpen,p=a.onUserInteraction,q=a.ref,r=a.setMenuOpened;a=e===void 0?!1:e;e=f===void 0?null:f;f=l(!1);var s=f[0],t=f[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"C\u00e0i \u0111\u1eb7t"),b[0]=f):f=b[0];f=f;var u=r!=null;d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_settings_menu",u?n===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:s,p);var v=u?n===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:s;b[1]!==a?(p={0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[!!(a===!0)<<0],b[1]=a,b[2]=p):p=b[2];b[3]!==a||b[4]!==e||b[5]!==g||b[6]!==j||b[7]!==u||b[8]!==v||b[9]!==r?(n=v&&k.jsx("div",babelHelpers["extends"]({},{0:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x1fwd5yv"},2:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk xwjie4w"},1:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"},3:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"}}[!!(g===!0)<<1|!!(a===!0)<<0],{children:k.jsx(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenu,{forceShowPlaybackRateControl:j,onClose:function(){u?r!=null&&r(null):t(!1)},children:e})})),b[3]=a,b[4]=e,b[5]=g,b[6]=j,b[7]=u,b[8]=v,b[9]=r,b[10]=n):n=b[10];b[11]!==m?(a=m==null?d("fbicon")._(i("497567"),20):m,b[11]=m,b[12]=a):a=b[12];b[13]!==u||b[14]!==v||b[15]!==s||b[16]!==o||b[17]!==r?(e=function(){u?r!=null&&r(v?null:d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU):t(!s),!v&&o!=null&&o()},b[13]=u,b[14]=v,b[15]=s,b[16]=o,b[17]=r,b[18]=e):e=b[18];b[19]!==a||b[20]!==e?(g=k.jsx(c("VideoPlayerControlIcon.react"),{icon:a,label:f,onPress:e,tooltip:f}),b[19]=a,b[20]=e,b[21]=g):g=b[21];b[22]!==p||b[23]!==n||b[24]!==g?(j=k.jsxs("div",babelHelpers["extends"]({},p,{ref:q,children:[n,g]})),b[22]=p,b[23]=n,b[24]=g,b[25]=j):j=b[25];return j}a.displayName="VideoPlayerSettingsControl";g["default"]=a}),226);
__d("VideoPlayerWatchAndScrollControl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWatchAndScrollControl_video",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null}],type:"VideoOwner",abstractKey:"__isVideoOwner"},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_huddle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29450006731309811"}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery.graphql",["useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"nux_id",value:9347}],c={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:"nux(nux_id:9347)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:"nux(nux_id:9347)"}]},params:{id:b("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"),metadata:{},name:"useVideoPlayerWatchAndScrollControlNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useVideoPlayerWatchAndScrollControlNUX",["fbt","CometRelay","CometWatchAndScrollTriggerContext","react","react-compiler-runtime","recoverableViolation","requireDeferred","useFDSCallout","useVideoPlayerWatchAndScrollControlNUXQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");e.useCallback;var k=e.useContext,l=e.useEffect,m=e.useState,n=c("requireDeferred")("CometDismissFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),o=c("requireDeferred")("CometLogImpressionFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),p={nux:{maxWidth:"xw5ewwj",$$css:!0}},q=9347,r=i!==void 0?i:i=b("useVideoPlayerWatchAndScrollControlNUXQuery.graphql");function a(a){var b=d("react-compiler-runtime").c(19),e=k(c("CometWatchAndScrollTriggerContext")),f=e.setIsTriggerDisabled;e=m(null);var g=e[0],i=e[1],j=d("CometRelay").useRelayEnvironment();b[0]!==j||b[1]!==f?(e=function(){f!=null&&f(!0),i(!1),n.onReady(function(a){a.commit(j,q)})},b[0]=j,b[1]=f,b[2]=e):e=b[2];var u=e,v;b[3]!==a||b[4]!==j||b[5]!==g?(e=function(){if(a&&g===null){var b=d("CometRelay").fetchQuery(j,r,{fetchPolicy:"store-or-network"}).subscribe({next:function(b){b=(b==null?void 0:(b=b.nux)==null?void 0:b.should_show)||!1;i(b);b&&a&&o.onReady(function(a){a.commit(j,q,t,s)})}});return function(){b.unsubscribe()}}},v=[j,a,g],b[3]=a,b[4]=j,b[5]=g,b[6]=e,b[7]=v):(e=b[6],v=b[7]);l(e,v);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Watch and scroll feature tooltip"),b[8]=e):e=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"Xem ti\u1ebfp khi l\u01b0\u1edbt xem Facebook"),b[9]=v):v=b[9];var w;b[10]!==u?(w=function(){u()},b[10]=u,b[11]=w):w=b[11];var x;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(){i(!1)},b[12]=x):x=b[12];b[13]!==w?(e={align:"end","aria-label":e,arrowStyle:"inset",content:v,disableAutoFlip:!0,hasCloseButton:!0,onClose:w,onHide:x,position:"below",type:"accent",xstyle:p.nux},b[13]=w,b[14]=e):e=b[14];v=c("useFDSCallout")(e,g===!0&&a||!1);x=v.anchorRef;b[15]!==x||b[16]!==u||b[17]!==g?(w={handleDismissNUX:u,nuxRef:x,shouldShowNUX:g},b[15]=x,b[16]=u,b[17]=g,b[18]=w):w=b[18];return w}function s(){c("recoverableViolation")("logimpression fb nux mutation failed for video player watch and scroll control.","watch_www_and_off_platform")}function t(){}g["default"]=a}),226);
__d("VideoPlayerWatchAndScrollControl.react",["fbt","ix","CastingStateHooks","CometPictureInPictureExpContext","CometRelay","CometRouteRenderType","CometVideoPictureInPictureManager.react","CometVideoPictureInPictureManagerContext","CometWatchAndScrollControlNUXContext","CometWatchAndScrollTriggerContext","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerWatchAndScrollControl_video.graphql","VideoPlayerWithWatchAndScrollTrigger.react","emptyFunction","fbicon","gkx","react","react-compiler-runtime","requireDeferred","useCometLazyDialog","useCometRouterDispatcher","useCometRouterState","useIsVideoHomePlayerOriginFromTracePolicy","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerWatchAndScrollControlNUX","useWatchAndScrollTrigger"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||(k=d("react"));e=k;e.useCallback;var n=e.useContext,o=e.useEffect,p=e.useState,q=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerWatchAndScrollControl.react"),r=c("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerWatchAndScrollControl.react"),s=6e4,t=window.document.pictureInPictureEnabled;function a(a){var e=d("react-compiler-runtime").c(56),f=a.subOrigin;a=a.video;var g=n(c("CometWatchAndScrollTriggerContext")),k=g.isControlShown,u=g.setIsControlShown;g=d("CometRouteRenderType").useIsPushView();var v=(l||(l=d("VideoPlayerHooks"))).useIsFullscreen(),w=c("useCometRouterDispatcher")(),x=c("useCometRouterState")(),y=(x=x==null?void 0:x.main.route.tabKey)!=null?x:"undefined";x=d("CometRelay").useFragment(j!==void 0?j:j=b("VideoPlayerWatchAndScrollControl_video.graphql"),a);var z=x==null?void 0:x.id;a=(a=x==null?void 0:x.playable_duration_in_ms)!=null?a:0;var A=x==null?void 0:x.is_huddle,B=x==null?void 0:x.url,C,D;e[0]!==u?(C=function(){u!=null&&u(!0)},D=[u],e[0]=u,e[1]=C,e[2]=D):(C=e[1],D=e[2]);o(C,D);var E=c("usePlayerOriginRouteTracePolicy")();C=c("useIsVideoHomePlayerOriginFromTracePolicy")(E);D=(x==null?void 0:(D=x.owner)==null?void 0:D.has_professional_features_for_watch)===!0&&a>=s&&k&&!C;var F=l.usePlaying(),G=l.useController();a=G.getPlayheadPosition();var H=a>=10;k=p(!1);C=k[0];var I=k[1];a=p(!1);var J=a[0],K=a[1];k=p(!1);a=k[0];var L=k[1];k=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsStateValue();k=k==="STARTING_INDICATOR"||k==="PLAY_NI_VIDEO"||k==="START_AD"||k==="PLAY_LONGER_AD";var M=c("useMinifiedProductAttribution")(),N,O;e[3]!==H||e[4]!==F?(N=function(){F&&H&&I(!0)},O=[H,F],e[3]=H,e[4]=F,e[5]=N,e[6]=O):(N=e[5],O=e[6]);o(N,O);var P=d("CastingStateHooks").useIsCastingAnyVideo();N=c("useCometLazyDialog")(r);var Q=N[0];O=!k&&C&&D;N=c("useVideoPlayerWatchAndScrollControlNUX")(O);var R=N.handleDismissNUX;k=N.nuxRef;C=N.shouldShowNUX;var S=C===!0&&O;D=n(c("CometWatchAndScrollControlNUXContext"));var T=D.setIsVideoPlayerWatchAndScrollControlNUXVisible,U=n(c("CometPictureInPictureExpContext"));e[7]!==S||e[8]!==T?(N=function(){T&&T(S)},C=[S,T],e[7]=S,e[8]=T,e[9]=N,e[10]=C):(N=e[9],C=e[10]);o(N,C);var V=d("useWatchAndScrollTrigger").useWatchAndScrollTrigger(f,d("VideoPlayerWithWatchAndScrollTrigger.react").WatchAndScrollTriggerType.WNS_CONTROL,z,B),W=l.useIsPremiumMusicVideo(),X=x==null?void 0:(O=x.owner)==null?void 0:O.id;e[11]!==W||e[12]!==X||e[13]!==U?(D=function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp(),b=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExpControlGroup();U.setPictureInPictureExpConfig({isInPictureInPictureExp:a,isInPictureInPictureExpControlGroup:b,isSkipAndChainingDisabled:!1});t&&a&&K(!0);a=(a||b)&&(W||d("CometVideoPictureInPictureManager.react").EXCLUDED_PROVIDERS.includes(X));a&&L(!0)},e[11]=W,e[12]=X,e[13]=U,e[14]=D):D=e[14];N=D;var Y=E==="comet.videos.tahoe";e[15]!==P||e[16]!==V||e[17]!==Q||e[18]!==z?(C=function(){P&&z!=null?Q({onClose:c("emptyFunction"),onContinue:V,startingVideoType:"wns"},c("emptyFunction")):V()},e[15]=P,e[16]=V,e[17]=Q,e[18]=z,e[19]=C):C=e[19];var Z=C;e[20]!==G||e[21]!==w||e[22]!==R||e[23]!==J||e[24]!==S||e[25]!==Z||e[26]!==M||e[27]!==E||e[28]!==f||e[29]!==y?(B=function(){Z(),J?(q.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_picture_in_picture",event:"click",event_target_info:E,player_suborigin:f})}),G.requestPictureInPicture()):q.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_watch_and_scroll",event:"click",event_target_info:y})}),S===!0&&R(),w&&w.popPushView()},e[20]=G,e[21]=w,e[22]=R,e[23]=J,e[24]=S,e[25]=Z,e[26]=M,e[27]=E,e[28]=f,e[29]=y,e[30]=B):B=e[30];x=B;var $=f==="live_producer";e[31]!==G||e[32]!==w||e[33]!==Y||e[34]!==R||e[35]!==J||e[36]!==v||e[37]!==S||e[38]!==Z||e[39]!==M||e[40]!==$||e[41]!==E||e[42]!==f||e[43]!==y?(O=function(){Z(),J?(q.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_picture_in_picture",event:"click",event_target_info:E,player_suborigin:f})}),G.requestPictureInPicture()):q.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_watch_and_scroll",event:"click",event_target_info:y})}),S===!0&&R(),v&&G.requestSetIsFullscreen(!1),w!=null&&($||Y)&&w.go("/",{})},e[31]=G,e[32]=w,e[33]=Y,e[34]=R,e[35]=J,e[36]=v,e[37]=S,e[38]=Z,e[39]=M,e[40]=$,e[41]=E,e[42]=f,e[43]=y,e[44]=O):O=e[44];D=O;C=g?x:D;if(c("gkx")("20836")){e[45]===Symbol["for"]("react.memo_cache_sentinel")?(B=h._(/*BTDS*/"Ti\u1ebfp t\u1ee5c xem trong khi s\u1eed d\u1ee5ng Workplace"),e[45]=B):B=e[45];O=B}else if(A===!0){e[46]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Ti\u1ebfp t\u1ee5c nghe khi l\u01b0\u1edbt xem Facebook."),e[46]=g):g=e[46];O=g}else{e[47]===Symbol["for"]("react.memo_cache_sentinel")?(x=h._(/*BTDS*/"Xem ti\u1ebfp khi l\u01b0\u1edbt xem Facebook"),e[47]=x):x=e[47];O=x}if(J){e[48]===Symbol["for"]("react.memo_cache_sentinel")?(D=h._(/*BTDS*/"B\u1eadt ch\u1ebf \u0111\u1ed9 \u1ea3nh trong \u1ea3nh"),e[48]=D):D=e[48];O=D}e[49]!==a||e[50]!==S||e[51]!==O||e[52]!==k||e[53]!==N||e[54]!==C?(B=a?null:m.jsx("div",{onMouseEnter:N,ref:k,children:m.jsx(c("VideoPlayerControlIcon.react"),{color:"white",icon:d("fbicon")._(i("150489"),20),label:O,onPress:C,tooltip:S?null:O})}),e[49]=a,e[50]=S,e[51]=O,e[52]=k,e[53]=N,e[54]=C,e[55]=B):B=e[55];return B}g["default"]=a}),226);
__d("VideoPlayerLiveVideoControls.react",["CometPlaceholder.react","CometRelay","CometTahoeCustomVideoAreaContext","CometTahoeSidePaneContext","CometTrackingNodeProvider.react","LiveCostreamerTagSubscription.react","LiveVideoLatencyMenu.react","VideoPlayerCaptionsControl.react","VideoPlayerCastControlShim.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerLiveVideoControls_video.graphql","VideoPlayerPlaybackControl.react","VideoPlayerQuietModeControl.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","react-compiler-runtime","useVideoPlayerBigPlayButtonOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.useContext,m=e.useState,n=h!==void 0?h:h=b("VideoPlayerLiveVideoControls_video.graphql");function o(a){var b,e,f=d("react-compiler-runtime").c(85),g=d("CometRelay").useFragment(n,a.video),h=(j||(j=d("VideoPlayerHooks"))).useEnded(),i=j.useIsFullscreen(),o=l(d("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),p=l(c("CometTahoeSidePaneContext"));p=p.rightRailHidden;var q=c("useVideoPlayerBigPlayButtonOverlay")();q=q.bigPlayButtonIsVisible;var r=j.useCaptionsLoaded(),s=j.useCaptionsVisible(),t=m(null),u=t[0];t=t[1];var v=l(d("CometTahoeCustomVideoAreaContext").CometTahoeCustomVideoAreaContext);v=v.customVideoAreaHidden;if(h)return null;h=a.disablePlaybackControls;var w=a.expandControl,x=a.isControlsVisible,y=a.isExpandControlVisible,z=a.isVolumeControlVisible,A=a.isWatchAndScrollControlVisible,B=a.onUserInteraction,C=a.shouldRenderCaptionsControl,D=a.shouldRenderCostreamControl,E=a.shouldRenderModeratorControl,F=a.subOrigin;y=y===void 0?!1:y;A=A===void 0?!1:A;C=C===void 0?!0:C;D=D===void 0?!1:D;E=E===void 0?!1:E;var G=g==null?void 0:g.id;b=g==null?void 0:(b=g.owner)==null?void 0:b.id;var H=g==null?void 0:g.if_viewer_can_see_costreaming_tools,I=H!=null,J=g==null?void 0:g.if_viewer_can_use_clipping,K=(g==null?void 0:g.is_clipping_enabled)===!0,L=g==null?void 0:g.if_viewer_can_see_community_moderation_tools,M=L!=null,N=g==null?void 0:g.if_viewer_can_use_live_rewind;e=((e=g==null?void 0:g.live_rewind_enabled)!=null?e:!1)&&a.shouldHideRewindControls!==!0;y=y||x||h===!0&&!q;A=A||x||h===!0&&!q;f[0]!==w||f[1]!==y?(q=k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:y,noPaddingEnd:!0,noPaddingStart:!0,children:w}),f[0]=w,f[1]=y,f[2]=q):q=f[2];w=q;f[3]!==a.shouldRenderWatchAndScrollControl||f[4]!==A||f[5]!==F||f[6]!==g?(y=a.shouldRenderWatchAndScrollControl===!0&&F!=null&&g!=null?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:A,children:k.jsx(c("VideoPlayerWatchAndScrollControl.react"),{subOrigin:F,video:g})}):null,f[3]=a.shouldRenderWatchAndScrollControl,f[4]=A,f[5]=F,f[6]=g,f[7]=y):y=f[7];q=y;A=F==="watch_scroll";y=c("gkx")("24335")?C===!0:!A;f[8]!==N||f[9]!==h||f[10]!==x||f[11]!==e||f[12]!==B||f[13]!==a.shouldRenderPauseControl?(C=e?k.jsx(d("CometRelay").MatchContainer,{match:N,props:{isControlsVisible:x&&!h,onUserInteraction:B,video:N}}):k.jsxs(k.Fragment,{children:[Boolean(a.shouldRenderPauseControl)?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:x&&!h,children:k.jsx(c("VideoPlayerPlaybackControl.react"),{})}):null,k.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:k.jsx(k.Fragment,{})})]}),f[8]=N,f[9]=h,f[10]=x,f[11]=e,f[12]=B,f[13]=a.shouldRenderPauseControl,f[14]=C):C=f[14];f[15]!==b||f[16]!==G?(A=b!=null&&G!=null&&k.jsx(c("LiveCostreamerTagSubscription.react"),{pageID:b,videoID:G}),f[15]=b,f[16]=G,f[17]=A):A=f[17];f[18]!==I||f[19]!==H||f[20]!==i||f[21]!==D||f[22]!==G?(N=I&&D&&G!=null&&!i&&k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:H,props:{video:H}})}),f[18]=I,f[19]=H,f[20]=i,f[21]=D,f[22]=G,f[23]=N):N=f[23];f[24]!==i||f[25]!==a.shouldRenderQuietModeControl?(e=a.shouldRenderQuietModeControl===!0&&!i&&k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:!0,noPaddingEnd:!0,children:k.jsx(c("VideoPlayerQuietModeControl.react"),{})}),f[24]=i,f[25]=a.shouldRenderQuietModeControl,f[26]=e):e=f[26];f[27]!==i||f[28]!==a.shouldRenderExpandSidePanelControl||f[29]!==p?(b=a.shouldRenderExpandSidePanelControl===!0&&!i&&!p&&k.jsx(c("VideoPlayerExpandSidePanelControl.react"),{}),f[27]=i,f[28]=a.shouldRenderExpandSidePanelControl,f[29]=p,f[30]=b):b=f[30];f[31]!==J||f[32]!==K||f[33]!==G?(I=K&&G!=null&&k.jsx(d("CometRelay").MatchContainer,{match:J,props:{video:J,videoID:G}}),f[31]=J,f[32]=K,f[33]=G,f[34]=I):I=f[34];f[35]!==M||f[36]!==L||f[37]!==E||f[38]!==G?(H=M&&E?k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:L,props:{video:L,videoID:G}})}):null,f[35]=M,f[36]=L,f[37]=E,f[38]=G,f[39]=H):H=f[39];f[40]!==o||f[41]!==h||f[42]!==u||f[43]!==B||f[44]!==g?(D=h===!0?null:k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:257,children:k.jsx(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContextProvider,{video:g,children:k.jsx(c("VideoPlayerSettingsControl.react"),{alignMenuToIcon:(o==null?void 0:o.getBottomRowAddOn())!=null,menuOpened:u,onUserInteraction:B,setMenuOpened:t})})}),f[40]=o,f[41]=h,f[42]=u,f[43]=B,f[44]=g,f[45]=D):D=f[45];f[46]!==o||f[47]!==r||f[48]!==s||f[49]!==y||f[50]!==x||f[51]!==u||f[52]!==B||f[53]!==g?(i=r&&y?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:x,children:k.jsx(c("VideoPlayerCaptionsControl.react"),{alignMenuToIcon:(o==null?void 0:o.getBottomRowAddOn())!=null,captionsVisible:s,menuOpened:u,onUserInteraction:B,setMenuOpened:t,video:g})}):null,f[46]=o,f[47]=r,f[48]=s,f[49]=y,f[50]=x,f[51]=u,f[52]=B,f[53]=g,f[54]=i):i=f[54];f[55]!==h||f[56]!==x||f[57]!==a.shouldRenderCastControl||f[58]!==F||f[59]!==g?(p=a.shouldRenderCastControl===!0&&F!=null&&g!=null?k.jsx(c("VideoPlayerCastControlShim.react"),{isVisible:x&&!h,subOrigin:F}):null,f[55]=h,f[56]=x,f[57]=a.shouldRenderCastControl,f[58]=F,f[59]=g,f[60]=p):p=f[60];f[61]!==x||f[62]!==e||f[63]!==b||f[64]!==I||f[65]!==H||f[66]!==D||f[67]!==i||f[68]!==p||f[69]!==A||f[70]!==N?(J=k.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:x,children:[A,N,e,b,I,H,D,i,p]}),f[61]=x,f[62]=e,f[63]=b,f[64]=I,f[65]=H,f[66]=D,f[67]=i,f[68]=p,f[69]=A,f[70]=N,f[71]=J):J=f[71];f[72]!==B?(K=k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:114,children:k.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:B})}),f[72]=B,f[73]=K):K=f[73];f[74]!==z||f[75]!==K?(M=k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:z,noPaddingStart:!0,children:K}),f[74]=z,f[75]=K,f[76]=M):M=f[76];f[77]!==v||f[78]!==w||f[79]!==x||f[80]!==J||f[81]!==M||f[82]!==C||f[83]!==q?(L=k.jsxs(c("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:x,isVisible:v,children:[C,J,w,q,M]}),f[77]=v,f[78]=w,f[79]=x,f[80]=J,f[81]=M,f[82]=C,f[83]=q,f[84]=L):L=f[84];return L}function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(o,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("VideoPlayerScrubberWithPreview_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberWithPreview_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberRenderer_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerScrubberWithPreview.react",["CometRelay","VideoPlayerScrubber.react","VideoPlayerScrubberPreview.react","VideoPlayerScrubberRenderer.react","VideoPlayerScrubberWithPreview_video.graphql","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(7),f=a.onUserInteraction;a=a.video;c("vulture")("OuRRkMYgsBpilzvE4QTaeXNxfZk=");var g=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerScrubberWithPreview_video.graphql"),a),i;e[0]!==g?(a=function(a){return j.jsx(c("VideoPlayerScrubberRenderer.react"),{scrubberProps:a,video:g})},i=function(a){return j.jsx(c("VideoPlayerScrubberPreview.react"),{timestampSec:a,video:g})},e[0]=g,e[1]=a,e[2]=i):(a=e[1],i=e[2]);var k;e[3]!==f||e[4]!==a||e[5]!==i?(k=j.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:f,renderScrubber:a,renderTooltip:i}),e[3]=f,e[4]=a,e[5]=i,e[6]=k):k=e[6];return k}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BizInboxUnifiedThreadsQuery.graphql",["relay-runtime"],(function(aa,ba,ca,da,ea,fa){"use strict";aa=function(){var aa={defaultValue:null,kind:"LocalArgument",name:"before"},ba={defaultValue:[],kind:"LocalArgument",name:"businessAssets"},ca={defaultValue:!1,kind:"LocalArgument",name:"getShouldUnifyConfigQueries"},da={defaultValue:480,kind:"LocalArgument",name:"height"},ea={defaultValue:null,kind:"LocalArgument",name:"ig_params"},fa={defaultValue:!0,kind:"LocalArgument",name:"includeDeliveryReceipts"},ga={defaultValue:!1,kind:"LocalArgument",name:"includeSeqID"},ha={defaultValue:!1,kind:"LocalArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},ia={defaultValue:!1,kind:"LocalArgument",name:"isWorkUser"},ja={defaultValue:!1,kind:"LocalArgument",name:"is_work_teamwork_not_putting_muted_in_unreads"},ka={defaultValue:null,kind:"LocalArgument",name:"item_after"},la={defaultValue:null,kind:"LocalArgument",name:"item_limit"},ma={defaultValue:!1,kind:"LocalArgument",name:"loadThreadItems"},na={defaultValue:!0,kind:"LocalArgument",name:"loadThreads"},oa={defaultValue:!1,kind:"LocalArgument",name:"load_delivery_receipts"},pa={defaultValue:!0,kind:"LocalArgument",name:"load_items"},qa={defaultValue:!0,kind:"LocalArgument",name:"load_messages"},ra={defaultValue:!0,kind:"LocalArgument",name:"load_read_receipts"},sa={defaultValue:null,kind:"LocalArgument",name:"message_limit"},ta={defaultValue:null,kind:"LocalArgument",name:"msgr_params"},ua={defaultValue:null,kind:"LocalArgument",name:"msgr_pending_params"},va={defaultValue:null,kind:"LocalArgument",name:"page_id"},wa={defaultValue:null,kind:"LocalArgument",name:"selected_item_id"},xa={defaultValue:!1,kind:"LocalArgument",name:"should3DContextCardSections"},ya={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipMessage"},za={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipPageQuery"},Aa={defaultValue:!1,kind:"LocalArgument",name:"shouldUnifyContextCardQueries"},Ba={defaultValue:null,kind:"LocalArgument",name:"source"},Ca={defaultValue:!1,kind:"LocalArgument",name:"threadlistViewFieldsOnly"},Da={defaultValue:null,kind:"LocalArgument",name:"wa_params"},Ea={defaultValue:null,kind:"LocalArgument",name:"wa_pending_params"},Fa={defaultValue:480,kind:"LocalArgument",name:"width"},Ga={alias:"unused",args:[{kind:"Variable",name:"string",variableName:"source"}],kind:"ScalarField",name:"xfb_returns_zero_make_parameter_used",storageKey:null},Ha=[{kind:"Variable",name:"ig_params",variableName:"ig_params"},{kind:"Variable",name:"msgr_params",variableName:"msgr_params"},{kind:"Variable",name:"selected_item_id",variableName:"selected_item_id"},{kind:"Variable",name:"wa_params",variableName:"wa_params"}],Ia={alias:null,args:null,kind:"ScalarField",name:"sync_sequence_id",storageKey:null},Ja={condition:"includeSeqID",kind:"Condition",passingValue:!0,selections:[Ia]},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},Ka={alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},La={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[Ka,{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null}],storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},Ma=[{kind:"Literal",name:"last",value:1}],c={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},d=[a],Na={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},Oa={alias:null,args:null,kind:"ScalarField",name:"commerce_message_type",storageKey:null},Pa={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},f=[e],Qa={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description",plural:!1,selections:f,storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},Ra={alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},Sa={alias:null,args:null,kind:"ScalarField",name:"native_url",storageKey:null},i=[g,h,Ra,Sa,{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null}];i={alias:null,args:null,concreteType:"MessengerGenericXMATemplateExtraFields",kind:"LinkedField",name:"messenger_generic_xma_template_extra_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_pic_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url_fallback",storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"default_cta",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta1",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta2",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta3",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_id_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_expiration_timestamp_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_fallback_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_title_text_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_accessibility_text_1",storageKey:null}],storageKey:null};var j={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},k=[{kind:"Literal",name:"height",value:240},{kind:"Literal",name:"width",value:240}],l={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},m=[l],Ta=[{kind:"Literal",name:"height",value:120},{kind:"Literal",name:"width",value:120}],n={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null};k=[a,{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"pack",plural:!1,selections:d,storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"frame_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frame_rate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_row",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_column",storageKey:null},{alias:"sprite_image_2x",args:k,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:m,storageKey:"sprite_image(height:240,width:240)"},{alias:null,args:Ta,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:m,storageKey:"sprite_image(height:120,width:120)"},{alias:null,args:Ta,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:m,storageKey:"padded_sprite_image(height:120,width:120)"},{alias:"padded_sprite_image_2x",args:k,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:m,storageKey:"padded_sprite_image(height:240,width:240)"},n,o,p];var Ua={kind:"InlineFragment",selections:k,type:"Sticker",abstractKey:null},q=[l,o,p],Va={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:q,storageKey:null},Wa={kind:"Literal",name:"sizing",value:"contain-fit"},Xa=[Wa],Ya={alias:null,args:Xa,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:'image(sizing:"contain-fit")'},r={alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},Za={alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},t={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ua,Va,Ya,r,Za,s],storageKey:null},$a={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:f,storageKey:null},ab={alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null},bb={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:f,storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},cb={alias:null,args:null,concreteType:"AttachmentProperty",kind:"LinkedField",name:"properties",plural:!0,selections:[u,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"value",plural:!1,selections:f,storageKey:null}],storageKey:null},db={alias:"url",args:null,kind:"ScalarField",name:"messenger_dot_com_url",storageKey:null},eb={alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},fb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[h,n],storageKey:null},gb={alias:null,args:null,concreteType:"MessagingAttribution",kind:"LinkedField",name:"messaging_attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attribution_id",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"icon_url",storageKey:null}],storageKey:null},hb={alias:"action_link",args:null,kind:"ScalarField",name:"action_url",storageKey:null},ib={alias:null,args:null,kind:"ScalarField",name:"action_open_type",storageKey:null},jb={alias:null,args:null,kind:"ScalarField",name:"preview_title",storageKey:null},kb={alias:null,args:null,kind:"ScalarField",name:"preview_subtitle",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"target_display",storageKey:null},lb={alias:null,args:null,kind:"ScalarField",name:"image_url",storageKey:null},w={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[{kind:"InlineFragment",selections:[a,jb,kb,v,lb],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null},mb={alias:"title",args:null,kind:"ScalarField",name:"action_title",storageKey:null},nb={alias:null,args:null,concreteType:"MessengerCTAUserConfirmation",kind:"LinkedField",name:"user_confirmation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cancel_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"continue_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_title",storageKey:null}],storageKey:null},ob={alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},pb={alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},qb={alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null},rb={alias:"render_style",args:null,kind:"ScalarField",name:"cta_render_style",storageKey:null},sb={alias:null,args:null,concreteType:"MessengerPlatformWebviewMetadata",kind:"LinkedField",name:"webview_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fallback_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_extensions",storageKey:null},{alias:"webview_height_ratio",args:null,kind:"ScalarField",name:"height_ratio",storageKey:null},{alias:"webview_share_button",args:null,kind:"ScalarField",name:"hide_share_button",storageKey:null}],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},tb={alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},ub={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},vb={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"form_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_num_screens",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIFormScreenObject",kind:"LinkedField",name:"form_first_screen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_title",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIQuestionObject",kind:"LinkedField",name:"questions",plural:!0,selections:[a,g,h,y,tb,z,ub,{alias:null,args:null,kind:"ScalarField",name:"mask",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIBusinessPrivacyObject",kind:"LinkedField",name:"business_privacy",plural:!1,selections:[e,n],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_color_theme",storageKey:null}],type:"MessengerDirectSendCallToActionData",abstractKey:null};y={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"feedback_form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackFormScreenObject",kind:"LinkedField",name:"feedback_form_first_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerFeedbackQuestionObject",kind:"LinkedField",name:"feedback_questions",plural:!0,selections:[a,h,g,{alias:null,args:null,kind:"ScalarField",name:"score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"left_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"right_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score_option",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedBackQuestionFollowup",kind:"LinkedField",name:"follow_up",plural:!1,selections:[g,y],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_num_screens",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackBusinessPrivacyObject",kind:"LinkedField",name:"feedback_form_privacy_policy",plural:!1,selections:[e,j,n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_state",storageKey:null}],type:"MessengerFeedbackFormOpenCallToActionData",abstractKey:null};var A={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[vb,y],storageKey:null},wb={alias:null,args:null,kind:"ScalarField",name:"is_high_confidence",storageKey:null},xb={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[hb,ib,w,mb,nb,a,ob,pb,qb,rb,sb,x,A,wb,Sa],storageKey:null},yb={alias:null,args:null,concreteType:"XMALayoutInfo",kind:"LinkedField",name:"xma_layout_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout_type",storageKey:null}],storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},zb={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"listing_type",storageKey:null},{alias:null,args:null,concreteType:"CrisisListingCategoryWrapper",kind:"LinkedField",name:"listing_category",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"offer_image",plural:!1,selections:m,storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"request_image",plural:!1,selections:m,storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:315},{kind:"Literal",name:"width",value:851}],concreteType:"Image",kind:"LinkedField",name:"map_image",plural:!1,selections:m,storageKey:"map_image(height:315,width:851)"}],type:"CrisisListing",abstractKey:null},Ab={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},Bb={alias:null,args:null,kind:"ScalarField",name:"url_shimhash",storageKey:null},Cb={alias:null,args:null,kind:"ScalarField",name:"extension",storageKey:null},Db={alias:null,args:null,kind:"ScalarField",name:"filesize",storageKey:null},Eb={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},C={alias:"transfer_id",args:null,kind:"ScalarField",name:"id",storageKey:null},D={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:null},E=[a,{alias:"name",args:null,kind:"ScalarField",name:"short_name",storageKey:null},{alias:"full_name",args:null,kind:"ScalarField",name:"name",storageKey:null},D,n],Fb={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:E,storageKey:null};E={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"receiver",plural:!1,selections:E,storageKey:null};var Gb={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null};u={alias:"actionDatas",args:null,concreteType:"PaymentActivityActionData",kind:"LinkedField",name:"action_datas",plural:!0,selections:[B,{alias:"additionalInfo",args:null,concreteType:"PaymentActivityActionDataAdditionalInfo",kind:"LinkedField",name:"additional_info",plural:!0,selections:[u,Gb],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identifier",storageKey:null},{alias:"inputType",args:null,kind:"ScalarField",name:"input_type",storageKey:null},z,{alias:null,args:null,kind:"ScalarField",name:"optional",storageKey:null},{alias:"placeholderText",args:null,kind:"ScalarField",name:"placeholder_text",storageKey:null}],storageKey:null};var Hb={alias:"actionIdentifier",args:null,kind:"ScalarField",name:"action_identifier",storageKey:null},Ib={alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},Jb={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:f,storageKey:null},Kb={kind:"InlineFragment",selections:[{alias:"receiptView",args:null,concreteType:"PaymentReceiptView",kind:"LinkedField",name:"receipt_view",plural:!1,selections:[{alias:"additionalInstruction",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"additional_instruction",plural:!1,selections:f,storageKey:null},a,{alias:"otherParticipant",args:null,concreteType:"PaymentActivityParticipantView",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:"imageUrl",args:null,kind:"ScalarField",name:"image_url",storageKey:null},tb,h],storageKey:null},{alias:null,args:null,concreteType:"PaymentActivityViewSection",kind:"LinkedField",name:"sections",plural:!0,selections:[{alias:"preferredPosition",args:null,kind:"ScalarField",name:"preferred_position",storageKey:null}],storageKey:null},Jb],storageKey:null}],type:"P2POpenReceiptActionButton",abstractKey:null},F={alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},Lb={alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},G=[F,Lb,{alias:"formattedAmount",args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],Mb={alias:"amount",args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:G,storageKey:null},H=[B,u,Hb,Ib,h,Kb,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[C,Fb,E,Mb],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}],Nb={alias:"componentType",args:null,kind:"ScalarField",name:"component_type",storageKey:null},Ob={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null};G={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"amount",plural:!1,selections:G,storageKey:null},Ob],type:"P2PBubbleAmountComponent",abstractKey:null};var I=[{alias:"dimensionlessCacheKey",args:null,kind:"ScalarField",name:"dimensionless_cache_key",storageKey:null},o,{alias:"isSilhouette",args:null,kind:"ScalarField",name:"is_silhouette",storageKey:null},{alias:"mimeType",args:null,kind:"ScalarField",name:"mime_type",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},l,p],Pb={kind:"InlineFragment",selections:[{alias:"aspectRatio",args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:I,storageKey:null}],type:"P2PBubbleImageComponent",abstractKey:null};I={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},Ob,{alias:"facepileUsers",args:null,concreteType:"User",kind:"LinkedField",name:"facepile_users",plural:!0,selections:[a,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:I,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:I,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},e],type:"P2PBubbleTextComponent",abstractKey:null};var Qb={alias:"iconCurrencyCode",args:null,kind:"ScalarField",name:"icon_currency_code",storageKey:null};H={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:H,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[Nb,G,Pb,I],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:H,storageKey:null},Ob,Qb,e],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:H,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"};var Rb={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},Sb={kind:"InlineFragment",selections:[Rb,n],type:"User",abstractKey:null},Tb={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[F,{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],storageKey:null},Ub={alias:null,args:null,kind:"ScalarField",name:"transfer_status",storageKey:null},Vb={alias:"completedTime",args:null,kind:"ScalarField",name:"completed_time",storageKey:null},Wb={alias:"updatedTime",args:null,kind:"ScalarField",name:"updated_time",storageKey:null},Xb={alias:"creationTime",args:null,kind:"ScalarField",name:"creation_time",storageKey:null},J={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:null},Yb=[J],Zb={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"transfer_theme",plural:!1,selections:d,storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"formatted",storageKey:null},$b=[K],ac={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount_fb_discount",plural:!1,selections:$b,storageKey:null},bc={alias:null,args:null,kind:"ScalarField",name:"funds_availability",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"group_thread_fbid",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"status_description",storageKey:null},cc={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:[Lb],storageKey:null},dc={alias:null,args:null,kind:"ScalarField",name:"memo_text",storageKey:null},ec=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"P2PSenderReceiver"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[a,b,D,Sb],storageKey:null},Tb,Ub,C,Vb,Wb,Xb,{alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:Yb,storageKey:null},Zb],storageKey:null},ac,bc,L,{alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[b,M,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:Yb,storageKey:null},n],storageKey:null},a,N,cc,dc,H];K={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:[K,Lb],storageKey:null};var fc={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[F],storageKey:null},O=[b,a,D,Sb],P={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:O,storageKey:null};O={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:O,storageKey:null};var gc={alias:null,args:null,kind:"ScalarField",name:"request_status",storageKey:null},hc={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"request_theme",plural:!1,selections:d,storageKey:null},Q={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:ec,storageKey:null},ic={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},jc={alias:"message",args:null,kind:"ScalarField",name:"snippet",storageKey:null};w=[hb,ib,w,mb,nb,a,ob,pb,qb,rb,sb,x,A];A={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:w,storageKey:null};var kc={alias:null,args:null,kind:"ScalarField",name:"image_aspect_ratio",storageKey:null},lc={alias:null,args:null,kind:"ScalarField",name:"first_metaline",storageKey:null},mc={alias:null,args:null,kind:"ScalarField",name:"source_name",storageKey:null},nc={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null};w={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:w,storageKey:null};var oc=[a,{alias:"large_preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],pc={kind:"InlineFragment",selections:oc,type:"MessageImage",abstractKey:null};oc={kind:"InlineFragment",selections:oc,type:"Photo",abstractKey:null};var qc={kind:"Literal",name:"media_type",value:"image/gif"},rc={alias:null,args:[qc],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:q,storageKey:'animated_image(media_type:"image/gif")'};qc={alias:"preview_image",args:[{kind:"Literal",name:"height",value:206},qc,{kind:"Literal",name:"width",value:206}],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:q,storageKey:'animated_image(height:206,media_type:"image/gif",width:206)'};var sc={kind:"InlineFragment",selections:[rc,qc,{alias:"large_preview",args:[{kind:"Literal",name:"height",value:420},Wa,{kind:"Literal",name:"width",value:420}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:'image(height:420,sizing:"contain-fit",width:420)'}],type:"MessageAnimatedImage",abstractKey:null},tc={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"attribution_app",plural:!1,selections:[a,b,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"square_logo",plural:!1,selections:m,storageKey:null}],storageKey:null},uc={alias:null,args:null,kind:"ScalarField",name:"attribution_metadata",storageKey:null},vc=[o,p,l],wc=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],xc={alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:wc,storageKey:null};vc={kind:"InlineFragment",selections:[tc,uc,Ab,s,{alias:"chat_image",args:[{kind:"Literal",name:"height",value:200},Wa,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:vc,storageKey:'image(height:200,sizing:"contain-fit",width:168)'},Pa,{alias:null,args:null,kind:"ScalarField",name:"video_type",storageKey:null},xc,r,{alias:"large_image",args:[{kind:"Literal",name:"height",value:640},Wa,{kind:"Literal",name:"width",value:640}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:vc,storageKey:'image(height:640,sizing:"contain-fit",width:640)'},{alias:"inbox_image",args:[{kind:"Literal",name:"height",value:450},Wa,{kind:"Literal",name:"width",value:450}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:vc,storageKey:'image(height:450,sizing:"contain-fit",width:450)'}],type:"MessageVideo",abstractKey:null};var yc={kind:"InlineFragment",selections:[p,o,a,s],type:"Video",abstractKey:null},S=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,M,kc,lb,lc,b,mc,nc,w,A,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[B,pc,oc,sc,vc,yc],storageKey:null}],storageKey:null}],zc={kind:"InlineFragment",selections:[{alias:"video_id",args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null},Ac={alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null},Bc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ComponentFlowLeadGenField",kind:"LinkedField",name:"field_data_list",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field_type",storageKey:null},j,Ac],storageKey:null}],type:"PagesPlatformLeadGenInfo",abstractKey:null},Cc={alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},Dc={alias:null,args:null,kind:"ScalarField",name:"latitude",storageKey:null},Ec={alias:null,args:null,kind:"ScalarField",name:"longitude",storageKey:null},Fc=[Dc,Ec],Gc={kind:"InlineFragment",selections:[{alias:"live_location_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_expired",storageKey:null},Cc,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"Coordinate",kind:"LinkedField",name:"coordinate",plural:!1,selections:Fc,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"location_title",storageKey:null},{alias:null,args:null,concreteType:"LiveLocationDestination",kind:"LinkedField",name:"sender_destination",plural:!1,selections:[Dc,Ec,j],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stop_reason",storageKey:null}],type:"MessageLiveLocation",abstractKey:null},Hc={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"kept_by",plural:!1,selections:d,storageKey:null},Ic={alias:null,args:null,kind:"ScalarField",name:"kept_at",storageKey:null},Jc={alias:null,args:null,kind:"ScalarField",name:"is_keep_disabled",storageKey:null},Kc={alias:null,args:null,kind:"ScalarField",name:"blob_media_type",storageKey:null},Lc=[s,n,J],Mc={kind:"InlineFragment",selections:Lc,type:"MessageVideo",abstractKey:null};Lc={kind:"InlineFragment",selections:Lc,type:"MessageImage",abstractKey:null};var Nc={alias:null,args:null,kind:"ScalarField",name:"montage_container_id",storageKey:null},Oc={alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},Pc={alias:null,args:null,kind:"ScalarField",name:"calendar_sync_type",storageKey:null},Qc={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[a,Pc,{alias:null,args:null,concreteType:"ServicesVerticalPageBasedInfo",kind:"LinkedField",name:"services_vertical_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_appointment_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_mbs_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_page_sp_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_zone_name",storageKey:null}],storageKey:null}],storageKey:null},Rc={alias:null,args:null,kind:"ScalarField",name:"message_bubble_type",storageKey:null},Sc={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:d,storageKey:null},Tc={alias:null,args:null,kind:"ScalarField",name:"ls_xma_title",storageKey:null},Uc={alias:null,args:null,kind:"ScalarField",name:"ls_xma_subtitle",storageKey:null},Vc={alias:"availability",args:null,kind:"ScalarField",name:"user_availability",storageKey:null},Wc={alias:null,args:null,kind:"ScalarField",name:"request_flow_type",storageKey:null},Xc={alias:null,args:null,kind:"ScalarField",name:"service_general_info",storageKey:null},Yc={alias:null,args:null,kind:"ScalarField",name:"has_saved_to_calendar",storageKey:null},Zc=[a,b,D],$c={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:Zc,storageKey:null},ad={alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},bd={alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},cd=[ad,bd],dd={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"suggested_time_range",plural:!1,selections:cd,storageKey:null},ed={alias:"duration",args:null,kind:"ScalarField",name:"duration_in_seconds",storageKey:null},fd={alias:null,args:null,kind:"ScalarField",name:"duration_type",storageKey:null},gd=[{kind:"Literal",name:"first",value:1}],hd={alias:null,args:[{kind:"Literal",name:"sizing",value:"cover-fill-cropped"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:'image(sizing:"cover-fill-cropped")'},id={alias:"price",args:null,kind:"ScalarField",name:"display_price",storageKey:null},jd={alias:null,args:null,kind:"ScalarField",name:"requested_time",storageKey:null},kd={alias:null,args:null,kind:"ScalarField",name:"special_request",storageKey:null},ld={alias:null,args:null,kind:"ScalarField",name:"booking_status_value",storageKey:null},md={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},nd={alias:null,args:null,kind:"ScalarField",name:"archived_status",storageKey:null},od={alias:null,args:null,kind:"ScalarField",name:"reminder_bubble_text",storageKey:null},pd={alias:null,args:null,kind:"ScalarField",name:"request_admin_approval_type",storageKey:null},qd={alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"job_application",plural:!1,selections:d,storageKey:null},rd={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[a,Rb,D],storageKey:null},sd={alias:null,args:null,concreteType:"ServicesNativeBookingRequestAdditionalInfoField",kind:"LinkedField",name:"additional_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field_key",storageKey:null},Gb,j],storageKey:null},td={alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"consumer_phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},ud={alias:null,args:null,kind:"ScalarField",name:"recur_message",storageKey:null},vd={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:d,storageKey:null},wd={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"consumer",plural:!1,selections:d,storageKey:null},xd={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"formatted_available_time_ranges",plural:!0,selections:cd,storageKey:null},yd={alias:null,args:null,kind:"ScalarField",name:"has_booking_request_created",storageKey:null},zd={alias:null,args:null,kind:"ScalarField",name:"cta_click_events",storageKey:null},Ad={alias:null,args:null,kind:"ScalarField",name:"cta_texts",storageKey:null},Bd={alias:null,args:null,concreteType:"ServicesWWWURL",kind:"LinkedField",name:"www_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_async",storageKey:null},l],storageKey:null},Cd={alias:null,args:null,kind:"ScalarField",name:"render_template",storageKey:null},Dd={alias:null,args:null,kind:"ScalarField",name:"primary_text",storageKey:null},Ed={alias:null,args:null,kind:"ScalarField",name:"visible_on_platforms",storageKey:null},Fd=[a,b],Gd=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:Fd,storageKey:null}],Hd={alias:"eventID",args:null,kind:"ScalarField",name:"id",storageKey:null},Id={alias:"guestStatus",args:null,kind:"ScalarField",name:"viewer_guest_status",storageKey:null},Jd={alias:"canViewerJoin",args:null,kind:"ScalarField",name:"can_viewer_join",storageKey:null},Kd={alias:"timeString",args:null,kind:"ScalarField",name:"start_time_sentence",storageKey:null},Ld=[b],Md={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"social_context",plural:!1,selections:f,storageKey:null},Nd={alias:"watchStatus",args:null,kind:"ScalarField",name:"viewer_watch_status",storageKey:null},Od={alias:null,args:null,kind:"ScalarField",name:"connection_style",storageKey:null},Pd={alias:"canViewerWatch",args:null,kind:"ScalarField",name:"can_viewer_watch",storageKey:null},Qd={alias:null,args:[{kind:"Literal",name:"width",value:300}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:"profile_picture(width:300)"},Rd={alias:null,args:null,kind:"ScalarField",name:"start_timestamp",storageKey:null},Sd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"application_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"artist_names",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"music_title",storageKey:null}],type:"ExternalSong",abstractKey:null},Td={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"lwa_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lwa_type",storageKey:null}],type:"LightweightAction",abstractKey:null},Ud={alias:"desc",args:null,kind:"ScalarField",name:"description",storageKey:null},Vd={alias:"thumb_url",args:null,kind:"ScalarField",name:"image_url",storageKey:null},Wd={alias:"item_url",args:null,kind:"ScalarField",name:"target_url",storageKey:null},Xd={alias:"source",args:null,kind:"ScalarField",name:"source_name",storageKey:null},Yd={alias:null,args:null,kind:"ScalarField",name:"second_metaline",storageKey:null},Zd={alias:null,args:null,kind:"ScalarField",name:"third_metaline",storageKey:null},$d={alias:"total_cost",args:null,kind:"ScalarField",name:"formated_price",storageKey:null},ae={alias:"merchant_name",args:null,kind:"ScalarField",name:"seller_info",storageKey:null},be={alias:"raw_amount",args:null,kind:"ScalarField",name:"price_amount",storageKey:null},ce={alias:null,args:null,concreteType:"MessengerCommercePayment",kind:"LinkedField",name:"payment",plural:!1,selections:d,storageKey:null},de={alias:null,args:null,kind:"ScalarField",name:"price_currency",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"price_amount",storageKey:null},fe={alias:null,args:null,kind:"ScalarField",name:"can_donate",storageKey:null},ge={alias:null,args:null,kind:"ScalarField",name:"has_viewer_donated",storageKey:null},he={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_detailed_progress_text",plural:!1,selections:f,storageKey:null},ie={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_subtitle_text",plural:!1,selections:f,storageKey:null},T=[l,p,o],je={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:T,storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"recipient_name",storageKey:null},le={alias:null,args:null,kind:"ScalarField",name:"merchant_name",storageKey:null},me={alias:null,args:null,kind:"ScalarField",name:"account_holder_name",storageKey:null},ne={alias:null,args:null,kind:"ScalarField",name:"receipt_id",storageKey:null},oe={alias:null,args:null,kind:"ScalarField",name:"shipping_method",storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"order_payment_method",storageKey:null},qe={alias:null,args:null,kind:"ScalarField",name:"receipt_url",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"cancellation_url",storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"receipient_address",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"streets",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"country",storageKey:null},ve={alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},we={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},xe={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"structured_address",plural:!1,selections:[te,ue,U,ve,we],storageKey:null},ye={alias:null,args:null,kind:"ScalarField",name:"total",storageKey:null},ze={alias:null,args:null,kind:"ScalarField",name:"tax",storageKey:null},Ae={alias:null,args:null,kind:"ScalarField",name:"shipping_cost",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"subtotal",storageKey:null},Ce={alias:null,args:null,kind:"ScalarField",name:"bubble_type",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"order_time_for_display",storageKey:null},Ee={alias:null,args:null,concreteType:"RetailReceiptAdjustment",kind:"LinkedField",name:"retail_adjustments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"adjustment_amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adjustment_type",storageKey:null}],storageKey:null},Fe={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"partner_logo",plural:!1,selections:m,storageKey:null},Ge={alias:null,args:null,kind:"ScalarField",name:"payment_modules_client",storageKey:null},He={alias:null,args:null,kind:"ScalarField",name:"is_viewer_seller",storageKey:null},Ie={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"payment_snippet",plural:!1,selections:f,storageKey:null},Je={alias:null,args:null,kind:"ScalarField",name:"item_id",storageKey:null},Ke={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:f,storageKey:null};F=[F,Lb];Lb={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"unit_price",plural:!1,selections:F,storageKey:null};var Le={alias:null,args:Ta,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:m,storageKey:"images(height:120,width:120)"},Me={alias:null,args:null,kind:"ScalarField",name:"quantity",storageKey:null};Ta={alias:null,args:null,concreteType:"PaymentPlatformAttachmentComponent",kind:"LinkedField",name:"components",plural:!0,selections:[Jb,Ke,{alias:null,args:Ta,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:"image(height:120,width:120)"}],storageKey:null};var Ne=[we,{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_detail",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"label",plural:!1,selections:f,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"checkmark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"extra_data",storageKey:null}],Oe={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"payment_call_to_actions",plural:!0,selections:Ne,storageKey:null},Pe={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"click_action",plural:!1,selections:Ne,storageKey:null};Ne={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"summary_action",plural:!1,selections:Ne,storageKey:null};var Qe={alias:null,args:null,kind:"ScalarField",name:"invoicer_id",storageKey:null},Re={alias:null,args:null,kind:"ScalarField",name:"is_last_attachment",storageKey:null};F={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"payment_total",plural:!1,selections:F,storageKey:null};var Se={alias:null,args:null,kind:"ScalarField",name:"product_detail",storageKey:null},Te={alias:null,args:null,concreteType:"PaymentPlatformAttachmentIcon",kind:"LinkedField",name:"payment_status_icon",plural:!1,selections:[md],storageKey:null},Ue={alias:null,args:null,kind:"ScalarField",name:"user_facing_payment_status",storageKey:null},Ve={alias:null,args:null,kind:"ScalarField",name:"payment_sub_statuses",storageKey:null},We={alias:null,args:null,kind:"ScalarField",name:"should_show_new_xma",storageKey:null},Xe={alias:null,args:null,kind:"ScalarField",name:"buyer_name",storageKey:null},Ye={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"group_commerce_item_description",plural:!1,selections:f,storageKey:null},Ze={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"formatted_price",plural:!1,selections:f,storageKey:null},$e={alias:null,args:null,kind:"ScalarField",name:"group_commerce_item_title",storageKey:null};Xa={alias:null,args:Xa,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:'image(sizing:"contain-fit")'};var af={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[Xa],storageKey:null},bf={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"single_line_full_address",storageKey:null}],storageKey:null},cf={alias:null,args:null,kind:"ScalarField",name:"top_category_name",storageKey:null};Wa={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[a,{alias:null,args:[{kind:"Literal",name:"height",value:720},Wa,{kind:"Literal",name:"width",value:720}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:T,storageKey:'image(height:720,sizing:"contain-fit",width:720)'}],storageKey:null}],storageKey:null};var df={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:Fc,storageKey:null};Gb={alias:null,args:null,concreteType:"Rating",kind:"LinkedField",name:"overall_star_rating",plural:!1,selections:[Gb],storageKey:null};var ef={alias:null,args:null,kind:"ScalarField",name:"price_range_description",storageKey:null},ff={alias:null,args:null,kind:"ScalarField",name:"event_title",storageKey:null},gf={alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},hf={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},ff,gf],type:"MessengerEventReminder",abstractKey:null},jf={alias:null,args:null,kind:"ScalarField",name:"tracking_number",storageKey:null},kf={alias:null,args:null,kind:"ScalarField",name:"shipdate_for_display",storageKey:null},lf={alias:null,args:null,kind:"ScalarField",name:"estimated_delivery_time_for_display",storageKey:null},mf={alias:null,args:null,kind:"ScalarField",name:"timezone",storageKey:null};U=[U,ue,ve,Ec,Dc,we,te,mf];ve={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_origin",plural:!1,selections:U,storageKey:null};Ec={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_destination",plural:!1,selections:U,storageKey:null};Dc={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Ud,Vd,Wd,Xd,kc,lc,Yd,Zd,A],storageKey:null}],storageKey:null};te={alias:null,args:null,kind:"ScalarField",name:"carrier_tracking_url",storageKey:null};var nf=[p,o,l],of={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:nf,storageKey:null},pf={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[b,te,of],storageKey:null};U={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"messenger_commerce_location",plural:!1,selections:U,storageKey:null};var qf={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,U],storageKey:null}],storageKey:null},rf={alias:null,args:null,kind:"ScalarField",name:"tracking_event_time_for_display",storageKey:null},sf={alias:null,args:null,kind:"ScalarField",name:"shipment_tracking_event_type",storageKey:null},tf={alias:null,args:null,kind:"ScalarField",name:"tracking_event_description",storageKey:null};te={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[b,te,of,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"legal_terms_of_service_text",plural:!1,selections:f,storageKey:null}],storageKey:null};of={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,sf,U],storageKey:null}],storageKey:null};var uf={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"cover_image",plural:!1,selections:T,storageKey:null},vf={alias:null,args:null,kind:"ScalarField",name:"headline",storageKey:null},wf={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:Fd,storageKey:null};Ac={alias:null,args:null,concreteType:"LeadGenUserInfoField",kind:"LinkedField",name:"field_data",plural:!0,selections:[j,b,Ac],storageKey:null};var xf=[e,g];xf={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_formated",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_headline",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_has_admin_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_sticker_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_footer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_text",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"templated_message_buttons",plural:!0,selections:xf,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_has_expiration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_expiration_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_is_offer_code_personalized",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageCardShape",kind:"LinkedField",name:"templated_message_cards",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sample_handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"button",plural:!1,selections:xf,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_name",storageKey:null}],type:"WECMessage",abstractKey:null};var yf={alias:null,args:null,kind:"ScalarField",name:"is_malicious",storageKey:null},zf={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail_image",plural:!1,selections:q,storageKey:null},Af={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},Bf={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},Cf={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"ice_breaker_title",storageKey:null},{alias:null,args:null,concreteType:"IceBreakerMessage",kind:"LinkedField",name:"ice_breaker_messages",plural:!0,selections:[Af,{alias:null,args:null,kind:"ScalarField",name:"message_key",storageKey:null}],storageKey:null},Bf],type:"IceBreakerMessageAttachment",abstractKey:null},Df={kind:"Literal",name:"height",value:280},Ef={kind:"Literal",name:"width",value:280},Ff=[Df,Ef],Gf={alias:"preview",args:Ff,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:"image(height:280,width:280)"},Hf={kind:"Literal",name:"height",value:480},If={kind:"Literal",name:"width",value:480},Jf={alias:"large_preview",args:[Hf,If],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:"image(height:480,width:480)"},Kf={alias:null,args:null,kind:"ScalarField",name:"module_name",storageKey:null},Lf={alias:null,args:null,kind:"ScalarField",name:"program_name",storageKey:null},Mf={alias:null,args:null,kind:"ScalarField",name:"curriculum_message",storageKey:null},Nf={alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},Of={alias:null,args:null,kind:"ScalarField",name:"step_count",storageKey:null},Pf={alias:null,args:null,kind:"ScalarField",name:"total_steps",storageKey:null},Qf={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[a,{alias:null,args:null,concreteType:"MentorshipCurriculum",kind:"LinkedField",name:"curriculum",plural:!1,selections:d,storageKey:null}],storageKey:null},Rf={alias:null,args:null,kind:"ScalarField",name:"topics",storageKey:null},Sf=[Rb],Tf={alias:null,args:null,kind:"ScalarField",name:"xma_type",storageKey:null},Uf={alias:null,args:null,kind:"ScalarField",name:"xma_title",storageKey:null},Vf={alias:null,args:null,kind:"ScalarField",name:"xma_body",storageKey:null},Wf={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},Xf={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[e,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[z,Wf],storageKey:null}],storageKey:null},Yf={alias:null,args:null,kind:"ScalarField",name:"block_type",storageKey:null},Zf={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},$f={alias:null,args:null,kind:"ScalarField",name:"depth",storageKey:null},ag={alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null},z,Wf],storageKey:null},bg={alias:null,args:null,kind:"ScalarField",name:"comment_count_reduced",storageKey:null},cg={alias:null,args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},dg={alias:null,args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},eg={kind:"Literal",name:"first",value:3},fg=[eg,{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],gg={alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null},hg={alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},ig={alias:"description",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:f,storageKey:null},jg={kind:"InlineFragment",selections:Sf,type:"User",abstractKey:null},kg=[n],lg={kind:"InlineFragment",selections:kg,type:"Entity",abstractKey:"__isEntity"},mg={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[B,b,a,jg,lg,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null}],storageKey:null},ng={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null},og={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Za,ng],storageKey:null},pg={alias:"title",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:f,storageKey:null};eg=[eg];var qg={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},rg=[{kind:"Literal",name:"if_style",value:"file_upload"}],sg={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:Yb,storageKey:null},tg=[{kind:"Literal",name:"if_style",value:"photo"}],ug={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:f,storageKey:null},vg={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[B,b,a,jg,lg],storageKey:null},wg={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:Yb,storageKey:null},xg={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[wg],storageKey:null},yg={alias:null,args:null,kind:"ScalarField",name:"job_title",storageKey:null},zg={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[yg],storageKey:null},Ag={alias:null,args:null,kind:"ScalarField",name:"subscribe_status",storageKey:null},Bg={alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},Cg={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"visibility_sentence",plural:!1,selections:f,storageKey:null},Dg={alias:null,args:null,kind:"ScalarField",name:"viewer_join_state",storageKey:null},Eg={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:d,storageKey:null},Fg={alias:null,args:null,kind:"ScalarField",name:"attachment_type_name",storageKey:null},Gg={alias:null,args:null,kind:"ScalarField",name:"privacy_status",storageKey:null},Hg={alias:null,args:null,kind:"ScalarField",name:"file_type_category",storageKey:null},Ig={alias:null,args:null,kind:"ScalarField",name:"app_integration_type",storageKey:null},Jg={alias:null,args:[{kind:"Literal",name:"size",value:"D32"}],concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:m,storageKey:'logo(size:"D32")'},Kg={alias:null,args:null,kind:"ScalarField",name:"viewer_auth_link",storageKey:null},Lg={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"attachment_icon",plural:!1,selections:m,storageKey:null},Mg={alias:null,args:null,kind:"ScalarField",name:"content_uri",storageKey:null},Ng={alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null},Og={alias:null,args:null,kind:"ScalarField",name:"referral_offer_link",storageKey:null},Pg={alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},Qg={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"action_prefill",storageKey:null},Bf,Pg,{alias:null,args:null,kind:"ScalarField",name:"customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},x,{alias:null,args:null,kind:"ScalarField",name:"reply_image_uri",storageKey:null}],type:"InThreadMultiphotoItemCTAData",abstractKey:null},Rg={alias:null,args:null,kind:"ScalarField",name:"viewer_id",storageKey:null},Sg={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"payment_confirmation_status",storageKey:null}],type:"XFBPaymentInvoiceMediaMessageDetection",abstractKey:null};ec={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[B,zb,{kind:"InlineFragment",selections:[a,Ab,s,Bb,Cb,Db,Eb],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[C,Fb,E,H],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:ec,type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[K,fc,P,O,gc,hc,a,dc,Q,ic,L,R,N,H,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[K,fc,P,O,gc,hc,a,dc,Q,ic,L,R,N,H],storageKey:null}],type:"PeerToPeerPaymentRequest",abstractKey:null},H,{kind:"InlineFragment",selections:[jc,A,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:S,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[jc,A,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:S,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},zc,Bc,Gc,{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:d,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[Hc,Ic,Jc,Kc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[Mc,Lc],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[a,Nc,c,Oc],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[a,Qc,Rc,Sc,Tc,Uc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[{kind:"InlineFragment",selections:[Vc,Wc,Xc,a,Pc,Yc,$c,dd,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,M,ed,fd,{alias:null,args:gd,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[hd],storageKey:"images(first:1)"},id],storageKey:null}],storageKey:null},jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,Tc,Uc,ud],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[a,vd,wd,xd,yd],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[a,zd,Ad,Bd,Cd,Dd,Ed],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:Gd,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[Qa,i,t,$a,ab,bb,cb,db,eb,fb,gb,xb,yb],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Hd,Id,Jd,Kd,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:Ld,storageKey:null},Md,Nd,Od,Pd,Qd,b,Rd],type:"Event",abstractKey:null},Sd,Td,{kind:"InlineFragment",selections:[a,b,Ud,Vd,Wd,Xd,kc,lc,Yd,Zd,w,A],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[a,Ud,$d,ae,nc,Vd,be,ce,de,ee,b],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[a,fe,ge,he,ie,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[je],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[a,ke,le,me,ne,oe,pe,qe,re,se,xe,md,ye,ze,Ae,Be,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:S,storageKey:null},Ce,De,Ee,Fe],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Ge,He,Ie,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Je,b,Ke,M,Lb,Le,Me],storageKey:null},Ta,Oe,Pe,Ne,Qe,Re,F,Se,Te,Ue,Ve,We,Xe],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:d,type:"JobApplication",abstractKey:null},{kind:"InlineFragment",selections:[Ye,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:d,storageKey:null},Ze,$e,af,n],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[Ze,af],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[bf,cf,Wa,df,b,Gb,a,ef],type:"Page",abstractKey:null},hf,{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[a,jf,kf,lf,ve,Ec,Dc,pf,qf],storageKey:null},rf,sf,U,tf,Ce],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[a,jf,kf,lf,ve,Ec,Dc,te,of,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ne],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:Ld,storageKey:null},Ce],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[a,uf,vf,b,wf],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[a,Ac],type:"UserLeadGenInfo",abstractKey:null},xf,{kind:"InlineFragment",selections:[a,b,yf,l,Cb,Db],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[a,s,Bb,Cb,Db,Ab,o,zf,p],type:"WECMessageVideo",abstractKey:null},Cf,{kind:"InlineFragment",selections:[a,Cb,Gf,Jf],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[a,Kf,Lf,Mf,Nf,Of,Pf,Qf],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[a,Rf],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:Sf,storageKey:null}],storageKey:null},Tf],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[a,Tf],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[a,Tf,Uf,Vf],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[Xf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[Yf,Zf,$f,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[B],storageKey:null},z,Wf],storageKey:null},ag,e],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[bg,cg,dg,{alias:null,args:fg,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[gg],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'}],storageKey:null},hg,ic,ig,mg,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[B,b,jg,lg],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[ab,n,$a,Qa,og,pg,{alias:null,args:eg,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[qg,{alias:"files",args:rg,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[pg,sg],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:tg,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[sg],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[ug,vg,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[og],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[a,b,D,xg,zg,Ag],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[a,b,Bg,Cg,Dg,xg,Eg,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:d,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[a,Fg,Gg,Hg,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[Ig,b,Jg,Kg],storageKey:null},Lg,Mg,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[h,e,Ob,ub,Ng,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[D,b],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:d,type:"OfferItem",abstractKey:null},{kind:"InlineFragment",selections:[w],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[a,Og],type:"ApplicationReferralXMA",abstractKey:null},Qg,{kind:"InlineFragment",selections:[a,Rg],type:"XFBP2MXMA",abstractKey:null},Sg],storageKey:null};P={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[Qa,i,t,$a,ab,bb,cb,db,eb,fb,gb,xb,yb,ec,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[Qa,i,t,$a,ab,bb,cb,db,eb,fb,gb,xb,yb,ec],storageKey:null}],storageKey:null};O={kind:"InlineFragment",selections:d,type:"Node",abstractKey:"__isNode"};Q={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[Pa,P,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[O,b],storageKey:null}],storageKey:null},P],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null};H={alias:null,args:null,concreteType:"Sticker",kind:"LinkedField",name:"sticker",plural:!1,selections:k,storageKey:null};A={kind:"Literal",name:"sizing",value:"cover-fill"};S={alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null};af={kind:"InlineFragment",selections:[tc,uc,Ab,{alias:"preview",args:[Df,A,Ef],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:'image(height:280,sizing:"cover-fill",width:280)'},{alias:"large_preview",args:[Hf,A,If],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:'image(height:480,sizing:"cover-fill",width:480)'},{alias:"thumbnail",args:[{kind:"Literal",name:"height",value:38},{kind:"Literal",name:"width",value:58}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:"image(height:38,width:58)"},{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[a,p,o,S,{alias:null,args:null,kind:"ScalarField",name:"cdn_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:[{kind:"Literal",name:"thumbnail_dimensions",value:[{height:280,width:280},{height:480,width:480}]}],concreteType:"SphericalPhotoThumbnail",kind:"LinkedField",name:"thumbnails",plural:!0,selections:nf,storageKey:'thumbnails(thumbnail_dimensions:[{"height":280,"width":280},{"height":480,"width":480}])'},{alias:null,args:[{kind:"Literal",name:"tile_levels",value:[0]}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"face",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"col",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row",storageKey:null},l],storageKey:"tiles(tile_levels:[0])"},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_left_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_top_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_roll_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_roll_degrees",storageKey:null}],storageKey:null}],storageKey:null},Pa,xc,{alias:null,args:null,kind:"ScalarField",name:"original_extension",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_as_sticker",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null}],type:"MessageImage",abstractKey:null};Dc={kind:"InlineFragment",selections:[tc,uc,Ab,rc,{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},Pa,qc,xc],type:"MessageAnimatedImage",abstractKey:null};Sf={alias:null,args:null,kind:"ScalarField",name:"url_skipshim",storageKey:null};sg={kind:"InlineFragment",selections:[tc,uc,Ab,s,r,{alias:null,args:null,kind:"ScalarField",name:"is_voicemail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_type",storageKey:null},Bb,Sf],type:"MessageAudio",abstractKey:null};og={alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null};xg={kind:"InlineFragment",selections:[tc,uc,Ab,n,{alias:null,args:null,kind:"ScalarField",name:"mimetype",storageKey:null},og,yf,{alias:null,args:null,kind:"ScalarField",name:"message_file_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},Bb,Sf,{alias:"preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:null}],type:"MessageFile",abstractKey:null};w=[B,af,Dc,sg,vc,xg];t={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:w,storageKey:null};fb={alias:null,args:null,kind:"ScalarField",name:"extensible_message_admin_text_type",storageKey:null};xb={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"game",plural:!1,selections:d,storageKey:null};ec={kind:"InlineFragment",selections:[xb],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null};P={alias:null,args:null,kind:"ScalarField",name:"platform_xmd_encoded",storageKey:null};k={alias:null,args:null,kind:"ScalarField",name:"message_unsendability_status",storageKey:null};Df={alias:"last_message",args:Ma,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[c,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:d,storageKey:null}],storageKey:null},Na,Oa,{kind:"InlineFragment",selections:[Q,H,t],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[fb,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[ec],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null},P,k],storageKey:null}],storageKey:"messages(last:1)"};Ef={alias:null,args:null,concreteType:"ThreadConnectivityData",kind:"LinkedField",name:"thread_connectivity_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"connectivity_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"first_sender_id",storageKey:null}],storageKey:null};Hf={alias:null,args:null,kind:"ScalarField",name:"job_status",storageKey:null};A={alias:null,args:null,kind:"ScalarField",name:"should_show_jobs_feature",storageKey:null};If={alias:null,args:null,kind:"ScalarField",name:"should_show_schdule_interview_dialog",storageKey:null};q={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Hf,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[A,If],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};S={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thread_associated_page_admin",plural:!1,selections:Zc,storageKey:null};rc={alias:null,args:null,kind:"ScalarField",name:"unread_count",storageKey:null};qc={condition:"is_work_teamwork_not_putting_muted_in_unreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"unread_mentions_count",storageKey:null}]};tc={alias:null,args:null,kind:"ScalarField",name:"messages_count",storageKey:null};uc={alias:null,args:[{kind:"Literal",name:"size",value:60}],concreteType:"Image",kind:"LinkedField",name:"square_image",plural:!1,selections:m,storageKey:"square_image(size:60)"};Sf={alias:null,args:null,kind:"ScalarField",name:"updated_time_precise",storageKey:null};Zc={alias:null,args:null,kind:"ScalarField",name:"mute_until",storageKey:null};var Tg={alias:null,args:null,kind:"ScalarField",name:"is_pin_protected",storageKey:null},Ug={alias:null,args:null,kind:"ScalarField",name:"is_pinned",storageKey:null},Vg={alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null},Wg={alias:null,args:null,kind:"ScalarField",name:"is_other_recipient_page",storageKey:null},Xg={alias:null,args:null,kind:"ScalarField",name:"thread_queue_enabled",storageKey:null},Yg={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},Zg={alias:null,args:null,kind:"ScalarField",name:"has_viewer_archived",storageKey:null},$g={alias:null,args:null,kind:"ScalarField",name:"is_page_follow_up",storageKey:null},ah={alias:null,args:null,kind:"ScalarField",name:"is_page_unresponded_thread",storageKey:null},bh={alias:null,args:null,kind:"ScalarField",name:"cannot_reply_reason",storageKey:null},ch={alias:null,args:null,kind:"ScalarField",name:"can_viewer_report",storageKey:null},dh={alias:null,args:null,kind:"ScalarField",name:"composer_input_disabled",storageKey:null},eh={alias:null,args:null,kind:"ScalarField",name:"ephemeral_ttl_mode",storageKey:null},fh={alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},gh={alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null},hh={alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},ih={alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[gh,hh],storageKey:null},jh={alias:null,args:null,kind:"ScalarField",name:"outgoing_bubble_color",storageKey:null},kh={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[fh,ih,jh],storageKey:null},lh={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},mh={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},nh={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},oh={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},ph={alias:null,args:null,kind:"ScalarField",name:"keyframe_asset_uri",storageKey:null},qh={alias:null,args:null,kind:"ScalarField",name:"reaction_name",storageKey:null},rh={alias:null,args:null,kind:"ScalarField",name:"reaction_emoji",storageKey:null},sh={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"static_asset",plural:!1,selections:m,storageKey:null},th={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[a,lh,mh,nh,oh,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[ph,qh,rh,sh],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},uh={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:d,storageKey:null},vh={alias:"approval_mode",args:null,kind:"ScalarField",name:"group_approval_mode",storageKey:null},wh={alias:null,args:null,concreteType:"MessageThreadJoinableMode",kind:"LinkedField",name:"joinable_mode",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null}],storageKey:null},xh={alias:null,args:null,concreteType:"GroupApprovalQueueConnection",kind:"LinkedField",name:"group_approval_queue",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGroupRequesterInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"requester",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"inviter",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_timestamp",storageKey:null}],storageKey:null}],storageKey:null},yh=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:d,storageKey:null}],zh={alias:null,args:null,concreteType:"ApprovalRequestsOfThreadConnection",kind:"LinkedField",name:"approval_requests",plural:!1,selections:yh,storageKey:null},Ah={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[zh],storageKey:null},Bh={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"lightweight_event_creator",plural:!1,selections:d,storageKey:null},Ch={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_type",storageKey:null},Dh={alias:null,args:null,kind:"ScalarField",name:"location_name",storageKey:null};Fc={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location_coordinates",plural:!1,selections:Fc,storageKey:null};var Eh={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_address",storageKey:null}],storageKey:null},Fh={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_status",storageKey:null},Gh={alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},Hh={alias:null,args:null,kind:"ScalarField",name:"repeat_mode",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},Ih={alias:null,args:null,kind:"ScalarField",name:"seconds_to_notify_before",storageKey:null},Jh={alias:null,args:null,kind:"ScalarField",name:"allows_rsvp",storageKey:null},Kh={alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"related_event",plural:!1,selections:d,storageKey:null},Lh={alias:null,args:null,concreteType:"MessengerEventReminderMembersConnection",kind:"LinkedField",name:"event_reminder_members",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminderMembersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"guest_list_state",storageKey:null}],storageKey:null}],storageKey:null},Mh={alias:null,args:gd,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,Bh,gf,Ch,Dh,Fc,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[Eh],storageKey:null},Fh,Gh,Hh,ff,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[V],storageKey:null},Ih,Jh,Kh,Lh],storageKey:null}],storageKey:"event_reminders(first:1)"},Nh={alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"montage_thread",plural:!1,selections:d,storageKey:null},Oh=[Na],Ph={alias:"last_read_receipt",args:Ma,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:Oh,storageKey:null}],storageKey:"read_receipts(last:1)"},Qh={alias:"is_flagged",args:[{kind:"Literal",name:"page_message_tag",value:"FLAG"}],kind:"ScalarField",name:"has_tag",storageKey:'has_tag(page_message_tag:"FLAG")'},Rh={alias:null,args:null,kind:"ScalarField",name:"label_color",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"data_silo",storageKey:null},Sh={alias:null,args:null,kind:"ScalarField",name:"label_source",storageKey:null},Th={alias:null,args:null,kind:"ScalarField",name:"is_ad_response_label",storageKey:null},Uh={alias:null,args:null,concreteType:"PageMessageThreadCustomThreadLabelsConnection",kind:"LinkedField",name:"custom_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Rh,W,Sh,Th],storageKey:null}],storageKey:null},Vh=[a,b,Ob],Wh={alias:null,args:null,concreteType:"PageMessageThreadCustomTagsConnection",kind:"LinkedField",name:"custom_thread_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"nodes",plural:!0,selections:Vh,storageKey:null}],storageKey:null},Xh={alias:null,args:null,kind:"ScalarField",name:"is_ai_label",storageKey:null},Yh={alias:null,args:null,concreteType:"PageMessageThreadCorpThreadLabelsConnection",kind:"LinkedField",name:"corp_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Rh,Sh,W,Xh,Th],storageKey:null}],storageKey:null},Zh={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Qh,vd,Uh,Wh,Yh],storageKey:null},$h={alias:null,args:null,kind:"ScalarField",name:"call_state",storageKey:null},ai={alias:null,args:null,kind:"ScalarField",name:"server_info_data",storageKey:null},bi={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[$h,ai,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:d,storageKey:null}],storageKey:null};ue={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:[{alias:null,args:null,concreteType:"ReverseGeocodeData",kind:"LinkedField",name:"reverse_geocode",plural:!1,selections:[ue,we],storageKey:null}],storageKey:null};var ci={alias:null,args:null,kind:"ScalarField",name:"inventory_count",storageKey:null},di={alias:null,args:null,kind:"ScalarField",name:"delivery_types",storageKey:null},ei={alias:null,args:null,kind:"ScalarField",name:"c2c_shipping_eligible",storageKey:null},fi={alias:null,args:null,kind:"ScalarField",name:"is_pending",storageKey:null},gi={alias:null,args:null,kind:"ScalarField",name:"is_shipping_offered",storageKey:null},hi={alias:null,args:null,kind:"ScalarField",name:"is_sold",storageKey:null},ii={alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"is_commerce_post_item",storageKey:null}],storageKey:null},ji={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},ki={alias:null,args:null,concreteType:"MarketplaceRatingState",kind:"LinkedField",name:"rating_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_to_rate",storageKey:null}],storageKey:null},li={alias:null,args:null,kind:"ScalarField",name:"is_eligible",storageKey:null},mi={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MarketplaceC2CShippingSeller",kind:"LinkedField",name:"marketplace_c2c_shipping_seller",plural:!1,selections:[li],storageKey:null}],type:"User",abstractKey:null},ni={alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},oi={alias:null,args:null,concreteType:"MarketplaceThreadLabel",kind:"LinkedField",name:"seller_added_labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_string",storageKey:null},ni],storageKey:null},pi={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[a,Oc,$e,Ze,ue,ci,di,ei,fi,gi,hi,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:Yb,storageKey:null},ii,ji],storageKey:null},ki,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[a,mi],storageKey:null},oi],storageKey:null},qi={alias:"action_link",args:null,kind:"ScalarField",name:"url",storageKey:null},ri={alias:"room_type",args:null,kind:"ScalarField",name:"time_spent_room_type",storageKey:null},si={alias:null,args:null,kind:"ScalarField",name:"privacy_mode",storageKey:null},ti={alias:null,args:null,kind:"ScalarField",name:"approval_mode_toggleable",storageKey:null},ui={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:Fd,storageKey:null},vi=[qg],wi={alias:null,args:null,concreteType:"GroupSavesConnection",kind:"LinkedField",name:"group_saves",plural:!1,selections:vi,storageKey:null},xi={alias:null,args:[{kind:"Literal",name:"external_ref",value:"messenger"}],kind:"ScalarField",name:"verse_group_link",storageKey:'verse_group_link(external_ref:"messenger")'},yi={kind:"InlineFragment",selections:[b,bf],type:"Page",abstractKey:null};Eg={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[{kind:"InlineFragment",selections:[qi,a,b,D,Eg,ri,si,ti,ui,wi,xi],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[qi,a,b,D,ri,si,ti,Rd,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[yi],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null};var zi={alias:null,args:null,kind:"ScalarField",name:"reactions_mute_mode",storageKey:null},Ai={alias:null,args:null,kind:"ScalarField",name:"mentions_mute_mode",storageKey:null},Bi={alias:null,args:null,kind:"ScalarField",name:"customization_enabled",storageKey:null},Ci={alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},Di={alias:null,args:null,kind:"ScalarField",name:"group_thread_subtype",storageKey:null},Ei={alias:null,args:null,kind:"ScalarField",name:"participant_add_mode_as_string",storageKey:null},Fi={alias:null,args:null,kind:"ScalarField",name:"is_canonical_neo_user",storageKey:null};gh={alias:null,args:null,concreteType:"MessageThreadParticipantEventStatusInfo",kind:"LinkedField",name:"participants_event_status",plural:!0,selections:[gh,{alias:null,args:null,kind:"ScalarField",name:"event_status",storageKey:null}],storageKey:null};var Gi={alias:null,args:null,kind:"ScalarField",name:"comm_status",storageKey:null},Hi={alias:null,args:null,kind:"ScalarField",name:"comm_source_id",storageKey:null},Ii={alias:null,args:null,kind:"ScalarField",name:"is_priority",storageKey:null},Ji={alias:null,args:null,kind:"ScalarField",name:"biz_inbox_tags",storageKey:null},Ki={alias:null,args:null,kind:"ScalarField",name:"priority_score",storageKey:null},Li={alias:null,args:null,kind:"ScalarField",name:"trigger_id",storageKey:null},Mi=[{alias:null,args:null,kind:"ScalarField",name:"suggestion_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestion_content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggered_timestamp",storageKey:null},Li],Ni={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"biz_inbox_suggested_reply",plural:!1,selections:Mi,storageKey:null},Oi={alias:null,args:null,kind:"ScalarField",name:"is_thread_currently_handled_by_ai_agent",storageKey:null},Pi=[a,b,{alias:null,args:[{kind:"Literal",name:"height",value:20},{kind:"Literal",name:"width",value:20}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:"profile_picture(height:20,width:20)"}],Qi={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"admin",plural:!1,selections:Pi,storageKey:null},Ri={alias:null,args:null,kind:"ScalarField",name:"comm_icon_type",storageKey:null};Yb={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[a,Gi,Hi,Ii,Ji,Ki,Ni,Oi,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[Qi],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:Yb,storageKey:null},z,Wf],storageKey:null},ag,e],storageKey:null},Ri],storageKey:null};var Si={alias:null,args:null,kind:"ScalarField",name:"admin_model_status_string",storageKey:null},Ti={alias:null,args:null,kind:"ScalarField",name:"groups_sync_status_string",storageKey:null};kg={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:kg,storageKey:null}],storageKey:null};var Ui={alias:null,args:null,kind:"ScalarField",name:"pinning_time",storageKey:null},Vi={alias:null,args:null,concreteType:"OmniMActionLite",kind:"LinkedField",name:"m_suggestions",plural:!0,selections:[a,j,g,{alias:null,args:null,concreteType:"OmniMActionDataLite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"OmniMActionReminderDataLite",kind:"LinkedField",name:"reminder",plural:!1,selections:[Ng,{alias:null,args:null,kind:"ScalarField",name:"topic",storageKey:null}],storageKey:null}],storageKey:null},Cc],storageKey:null},Wi={alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},Xi={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},Yi={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[a,Xi],storageKey:null},Zi={alias:null,args:null,kind:"ScalarField",name:"ttl",storageKey:null},$i={alias:null,args:null,kind:"ScalarField",name:"unread",storageKey:null},aj={alias:null,args:null,kind:"ScalarField",name:"is_sponsored",storageKey:null},bj={alias:null,args:null,kind:"ScalarField",name:"ad_client_token",storageKey:null},cj={alias:null,args:null,concreteType:"MessageCustomization",kind:"LinkedField",name:"customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"customization_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"customization_value",storageKey:null}],storageKey:null},dj={alias:null,args:null,kind:"ScalarField",name:"tags_list",storageKey:null},ej={alias:null,args:null,concreteType:"MessageSourceData",kind:"LinkedField",name:"message_source_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_source",storageKey:null}],storageKey:null},fj={alias:null,args:null,concreteType:"MontageReplyData",kind:"LinkedField",name:"montage_reply_data",plural:!1,selections:[V,{alias:null,args:null,kind:"ScalarField",name:"reply_action",storageKey:null},c],storageKey:null},gj={alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null},hj={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[gj,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:d,storageKey:null}],storageKey:null},ij={alias:null,args:null,kind:"ScalarField",name:"unsent_timestamp_precise",storageKey:null},jj={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[a,b,jg],storageKey:null}],storageKey:null},kj={alias:null,args:null,kind:"ScalarField",name:"verse_group_role_xmd",storageKey:null},lj={alias:null,args:null,kind:"ScalarField",name:"secondary_language_body",storageKey:null},mj={kind:"InlineFragment",selections:d,type:"Profile",abstractKey:"__isProfile"},nj={kind:"InlineFragment",selections:d,type:"MessengerViewerGroupThread",abstractKey:null};Ka={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[Ka],storageKey:null}],type:"MessageThread",abstractKey:null};var oj={alias:null,args:null,kind:"ScalarField",name:"message_profile_range_type",storageKey:null},pj={alias:null,args:null,concreteType:"MetaAtRange",kind:"LinkedField",name:"meta_ranges",plural:!0,selections:[z,Wf,g,Zf],storageKey:null};ni={alias:null,args:null,concreteType:"MessagePageAdminSender",kind:"LinkedField",name:"page_admin_sender",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"admin_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_type",storageKey:null},b,ni,x,{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null};Q={kind:"InlineFragment",selections:[lj,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[e,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[z,Wf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[B,mj,nj,Ka],storageKey:null},oj],storageKey:null}],storageKey:null},pj,Q,H,t,ni],type:"UserMessage",abstractKey:null};t={alias:null,args:null,kind:"ScalarField",name:"answered",storageKey:null};var qj={kind:"InlineFragment",selections:[t,c],type:"VoiceCallMessage",abstractKey:null};w=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:w,storageKey:null}];var rj={kind:"InlineFragment",selections:[t,c,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[qg,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:w,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null},sj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},c],type:"ThreadNameMessage",abstractKey:null};Ff={alias:"preview",args:Ff,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:"image(height:280,width:280)"};var tj={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[Ff,Pa,xc],storageKey:null},c],type:"ThreadImageMessage",abstractKey:null},uj={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_added",plural:!0,selections:d,storageKey:null},c],type:"ParticipantsAddedMessage",abstractKey:null},vj={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_removed",plural:!0,selections:d,storageKey:null},c],type:"ParticipantLeftMessage",abstractKey:null},wj={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null};wj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:"total_count",args:null,kind:"ScalarField",name:"option_count",storageKey:null},{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[a,e,wj,{alias:null,args:[{kind:"Literal",name:"orderby",value:"creation_time"}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,e,wj,{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:yh,storageKey:null}],storageKey:null}],storageKey:'options(orderby:"creation_time")'}],storageKey:null}],type:"GroupPollExtensibleMessageAdminText",abstractKey:null};yh={alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null};mf={alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"event_reminder",plural:!1,selections:[a,gf,ff,{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},Dh,Ch,Jh,Ih,Bh,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:d,storageKey:null},Fc,{alias:null,args:null,concreteType:"TimezoneInfo",kind:"LinkedField",name:"timezone_id",plural:!1,selections:[yh,mf,{alias:null,args:null,kind:"ScalarField",name:"timezone_id",storageKey:null}],storageKey:null},Lh],storageKey:null};var X=[mf],xj={kind:"InlineFragment",selections:X,type:"LightweightEventCreateExtensibleMessageAdminText",abstractKey:null},yj={kind:"InlineFragment",selections:X,type:"LightweightEventDeleteExtensibleMessageAdminText",abstractKey:null},zj={kind:"InlineFragment",selections:X,type:"LightweightEventNotifyBeforeEventExtensibleMessageAdminText",abstractKey:null},Aj={kind:"InlineFragment",selections:X,type:"LightweightEventNotifyExtensibleMessageAdminText",abstractKey:null},Bj={kind:"InlineFragment",selections:X,type:"LightweightEventUpdateExtensibleMessageAdminText",abstractKey:null},Cj={kind:"InlineFragment",selections:X,type:"LightweightEventUpdateLocationExtensibleMessageAdminText",abstractKey:null},Dj={kind:"InlineFragment",selections:X,type:"LightweightEventUpdateTimeExtensibleMessageAdminText",abstractKey:null};X={kind:"InlineFragment",selections:X,type:"LightweightEventUpdateTitleExtensibleMessageAdminText",abstractKey:null};var Ej={alias:null,args:null,kind:"ScalarField",name:"guest_id",storageKey:null};mf={kind:"InlineFragment",selections:[Ej,{alias:null,args:null,kind:"ScalarField",name:"guest_status",storageKey:null},mf],type:"LightweightEventRSVPExtensibleMessageAdminText",abstractKey:null};var Fj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"theme_color",storageKey:null}],type:"ThemeColorExtensibleMessageAdminText",abstractKey:null},Gj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_icon",storageKey:null}],type:"ThreadIconExtensibleMessageAdminText",abstractKey:null};hh={kind:"InlineFragment",selections:[hh,{alias:"participant_id",args:null,kind:"ScalarField",name:"target_id",storageKey:null}],type:"ThreadNicknameExtensibleMessageAdminText",abstractKey:null};var Hj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accepter_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requester_id",storageKey:null}],type:"AcceptPendingThreadExtensibleMessageAdminText",abstractKey:null},Ij={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"contact_added_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contact_adder_id",storageKey:null}],type:"AddContactExtensibleMessageAdminText",abstractKey:null},Jj={alias:null,args:null,kind:"ScalarField",name:"event",storageKey:null},Kj={kind:"InlineFragment",selections:[Jj,{alias:null,args:null,kind:"ScalarField",name:"is_video_call",storageKey:null},ai],type:"RtcCallLogExtensibleMessageAdminText",abstractKey:null},Lj={alias:null,args:null,kind:"ScalarField",name:"update_type",storageKey:null},Mj={alias:null,args:null,kind:"ScalarField",name:"collapsed_text",storageKey:null},Nj={alias:null,args:null,kind:"ScalarField",name:"expanded_text",storageKey:null},Oj={alias:null,args:null,kind:"ScalarField",name:"cta_url",storageKey:null},Pj={alias:null,args:null,kind:"ScalarField",name:"template",storageKey:null},Qj={alias:null,args:null,kind:"ScalarField",name:"leaderboard_json",storageKey:null},Rj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"game_type",storageKey:null}],type:"GameScoreExtensibleMessageAdminText",abstractKey:null},Sj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"parties_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parties_invite_type",storageKey:null}],type:"PartiesInviteExtensibleMessageAdminText",abstractKey:null},Tj={alias:null,args:null,kind:"ScalarField",name:"icebreaker_type",storageKey:null},Uj={alias:null,args:null,kind:"ScalarField",name:"icebreaker_title",storageKey:null},Vj={alias:null,args:null,kind:"ScalarField",name:"icebreaker_subtitle",storageKey:null},Wj={alias:null,args:null,kind:"ScalarField",name:"vote_buttons_with_icons",storageKey:null},Xj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_request_recipient",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_sender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_subtype",storageKey:null},Tj,Uj,Vj,Wj],type:"ConfirmFriendRequestExtensibleMessageAdminText",abstractKey:null},Yj={alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},Zj={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"bump_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recipient_id",storageKey:null},Yj,h,M,{alias:null,args:null,kind:"ScalarField",name:"icon_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_ids",storageKey:null},Pg,{alias:null,args:null,kind:"ScalarField",name:"cta_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"admin_message_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"banner_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_two_way",storageKey:null}],type:"MessengerGrowthGenericExtensibleMessageAdminText",abstractKey:null},$j={kind:"InlineFragment",selections:[Dd,{alias:null,args:null,kind:"ScalarField",name:"ios_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_redesign",storageKey:null}],type:"BizInboxDetectedOutcomesActivityAdminTextExtensibleMessageAdminText",abstractKey:null},ak={alias:null,args:null,kind:"ScalarField",name:"cta_text",storageKey:null},bk={kind:"InlineFragment",selections:[Dd,ak,Oj,{alias:null,args:null,kind:"ScalarField",name:"async_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"www_is_async_url",storageKey:null}],type:"LinkCTAExtensibleMessageAdminText",abstractKey:null},ck={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"referer_uri",storageKey:null}],type:"MessengerLiveChatPluginURLUpdateAdminText",abstractKey:null},dk={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fb_user_name",storageKey:null}],type:"MessengerLiveChatPluginFBUserStartChatAdminText",abstractKey:null};Cc={kind:"InlineFragment",selections:[Cc],type:"MessengerLiveChatPluginGuestUserStartChatAdminText",abstractKey:null};ak={kind:"InlineFragment",selections:[ak,Oj,V,{alias:null,args:null,kind:"ScalarField",name:"recipient_is_the_sender",storageKey:null}],type:"WorkChatReminderLinkCTAExtensibleMessageAdminText",abstractKey:null};var ek={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_uri",storageKey:null}],type:"PostSharedFromGroupExtensibleMessageAdminText",abstractKey:null},fk={alias:null,args:null,kind:"ScalarField",name:"ad_url",storageKey:null},gk={kind:"InlineFragment",selections:[fk],type:"MessengerAdContextAdminText",abstractKey:null},hk={kind:"InlineFragment",selections:[bj,Bf,{alias:null,args:null,kind:"ScalarField",name:"ad_preferences_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ad_properties",storageKey:null}],type:"AdExtensibleMessageAdminText",abstractKey:null},ik={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"page_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_name",storageKey:null}],type:"AppointmentReminderExtensibleMessageAdminText",abstractKey:null},jk=[x],kk={kind:"InlineFragment",selections:jk,type:"GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText",abstractKey:null},lk={kind:"InlineFragment",selections:jk,type:"ServicesLeadGenSurveyExtensibleMessageAdminText",abstractKey:null};jk={kind:"InlineFragment",selections:jk,type:"ServicesLeadGenSurveyEditExtensibleMessageAdminText",abstractKey:null};var mk={alias:null,args:null,kind:"ScalarField",name:"caller_id",storageKey:null},nk={alias:null,args:null,kind:"ScalarField",name:"callee_id",storageKey:null},ok={alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null},pk={alias:null,args:null,kind:"ScalarField",name:"server_info",storageKey:null},qk={alias:null,args:null,kind:"ScalarField",name:"video",storageKey:null},rk={alias:null,args:null,kind:"ScalarField",name:"call_duration",storageKey:null},sk={alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null};Tj={kind:"InlineFragment",selections:[Tj,Uj,Vj,{alias:null,args:null,kind:"ScalarField",name:"votes_cast",storageKey:null},Wj],type:"MessengerIcebreakerVoteCastExtensibleMessageAdminText",abstractKey:null};Uj={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null};Vj={alias:null,args:null,kind:"ScalarField",name:"currency_code",storageKey:null};Wj=[x,Uj,{alias:null,args:null,kind:"ScalarField",name:"receipt_photo_id",storageKey:null},Vj,{alias:null,args:null,kind:"ScalarField",name:"detection_type",storageKey:null}];var tk={kind:"InlineFragment",selections:Wj,type:"PagesMarkAsPaidExtensibleMessageAdminText",abstractKey:null};Wj={kind:"InlineFragment",selections:Wj,type:"PagesMarkAsPaidNewExtensibleMessageAdminText",abstractKey:null};var uk={alias:null,args:null,kind:"ScalarField",name:"interaction_id",storageKey:null},vk={kind:"InlineFragment",selections:[x,Uj,{alias:null,args:null,kind:"ScalarField",name:"interaction_type",storageKey:null},uk,{alias:null,args:null,kind:"ScalarField",name:"should_show_cta",storageKey:null}],type:"PageThreadActionSystemAddDetailsXMAT",abstractKey:null},wk={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"bot_page",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_landing_page",storageKey:null}],type:"WorkBotInstalledExtensibleMessageAdminText",abstractKey:null};fk={kind:"InlineFragment",selections:[fk,{alias:null,args:null,kind:"ScalarField",name:"should_show_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"results_url",storageKey:null}],type:"AdReplyMessageAdminText",abstractKey:null};var xk={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"new_magic_word_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"magic_word",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji_effect",storageKey:null}],type:"MagicWordsExtensibleMessageAdminText",abstractKey:null},yk={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"token_ent_id_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_action_type",storageKey:null}],type:"NotificationMessagesAdminText",abstractKey:null},zk={alias:null,args:null,kind:"ScalarField",name:"admin_assigner_name",storageKey:null},Ak={kind:"InlineFragment",selections:[zk,{alias:null,args:null,kind:"ScalarField",name:"assigned_admin_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"assign_conversation",storageKey:null}],type:"BizInboxAssignAdminAdminText",abstractKey:null};zk={kind:"InlineFragment",selections:[zk,{alias:null,args:null,kind:"ScalarField",name:"note_input",storageKey:null}],type:"BizInboxAdminAssignmentNoteAdminText",abstractKey:null};var Bk={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email_thread_id",storageKey:null}],type:"BizInboxOmnichannelEmailSentAdminText",abstractKey:null},Ck={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_subscription_management_action_type",storageKey:null}],type:"InstantGameBotMessageSubscriptionManagementAdminText",abstractKey:null},Dk={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_mute_management_action_type",storageKey:null}],type:"InstantGameCustomUpdateMuteManagementAdminText",abstractKey:null};wg={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[B,wj,xj,yj,zj,Aj,Bj,Cj,Dj,X,mf,Fj,Gj,hh,Hj,Ij,Kj,{kind:"InlineFragment",selections:[xb,Lj,Mj,Nj,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[{kind:"InlineFragment",selections:[Oj,Pg,wg,Pj],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},Qj],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},Rj,Sj,Xj,Zj,$j,bk,ck,dk,Cc,ak,ek,gk,hk,ik,kk,lk,jk,{kind:"InlineFragment",selections:[mk,nk,ok,Jj,pk,qk,rk,sk,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[qg,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:w,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Tj,tk,Wj,vk,wk,fk,xk,yk,Ak,zk,Bk,Ck,Dk],storageKey:null},fb,c],type:"GenericAdminTextMessage",abstractKey:null};w=[{alias:null,args:null,kind:"ScalarField",name:"transfer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_type",storageKey:null},{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:$b,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_sender",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_receiver",plural:!1,selections:d,storageKey:null},c];$b={kind:"InlineFragment",selections:w,type:"P2PPaymentRequestMessage",abstractKey:null};w={kind:"InlineFragment",selections:w,type:"P2PPaymentMessage",abstractKey:null};hj=[Vi,B,V,Wi,Yi,Zi,Na,$i,aj,Bf,bj,Oa,cj,dj,P,ej,fj,hj,ij,jj,kj,k,Q,qj,rj,sj,tj,uj,vj,wg,$b,w,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[md,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[Vi,B,V,Wi,Yi,Zi,Na,$i,aj,Bf,bj,Oa,cj,dj,P,ej,fj,hj,ij,jj,kj,k,Q,qj,rj,sj,tj,uj,vj,wg,$b,w],storageKey:null}],storageKey:null}];jj={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[V,Ui,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:hj,storageKey:null}]}],storageKey:null};Q={alias:null,args:null,kind:"ScalarField",name:"is_default_child_group",storageKey:null};rj={alias:null,args:null,kind:"ScalarField",name:"emoji_codepoints",storageKey:null};tj={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[n,a,b,Bg,Q,D,wi,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[rj],storageKey:null}],storageKey:null}],storageKey:null};wg={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:hj,storageKey:null}]};var Ek={alias:null,args:null,kind:"ScalarField",name:"joinable_link",storageKey:null},Fk={alias:null,args:null,kind:"ScalarField",name:"is_fuss_red_page",storageKey:null},Gk={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"program_group",plural:!1,selections:[a,{alias:null,args:[{kind:"Literal",name:"height",value:24},{kind:"Literal",name:"width",value:24}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:"profile_picture(height:24,width:24)"}],storageKey:null};Fd={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"mentorship_group",plural:!1,selections:Fd,storageKey:null};var Hk={alias:null,args:null,kind:"ScalarField",name:"banner_title",storageKey:null},Ik={alias:null,args:null,kind:"ScalarField",name:"banner_subtitle",storageKey:null},Jk={alias:null,args:gd,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,Gk,Fd,{alias:null,args:gd,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[Hk,Ik],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"},Kk={alias:null,args:null,kind:"ScalarField",name:"thread_unsendability_status",storageKey:null},Lk={alias:null,args:null,kind:"ScalarField",name:"thread_pin_timestamp",storageKey:null},Mk={alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null};li={alias:null,args:null,concreteType:"ConversionDetectionData",kind:"LinkedField",name:"conversion_detection_data",plural:!1,selections:[li,{alias:null,args:null,kind:"ScalarField",name:"conversion_type",storageKey:null},Vj,{alias:null,args:null,kind:"ScalarField",name:"currency_amount",storageKey:null},{alias:"timestamp",args:null,kind:"ScalarField",name:"timestamp_graphql_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_reply",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_message",storageKey:null},Li,{alias:null,args:null,kind:"ScalarField",name:"shipping_provider",storageKey:null},jf,{alias:null,args:null,kind:"ScalarField",name:"ctx_ad_info",storageKey:null}],storageKey:null};Vj={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"suggested_reply_data",plural:!1,selections:Mi,storageKey:null};Li={alias:null,args:null,kind:"ScalarField",name:"admin_type",storageKey:null};Mi={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null};var Y={alias:"big_image_src",args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:"profile_picture(height:60,width:60)"},Nk={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},Ok={alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},Pk={alias:null,args:null,kind:"ScalarField",name:"is_messenger_user",storageKey:null},Qk={alias:null,args:null,kind:"ScalarField",name:"is_message_blocked_by_viewer",storageKey:null},Rk={alias:null,args:null,kind:"ScalarField",name:"is_viewer_coworker",storageKey:null},Sk={alias:null,args:null,kind:"ScalarField",name:"is_employee",storageKey:null},Tk={alias:null,args:null,kind:"ScalarField",name:"is_aloha_proxy_confirmed",storageKey:null},Uk={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null},Vk={alias:null,args:null,kind:"ScalarField",name:"messenger_account_status_category",storageKey:null};Ld={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:Ld,storageKey:null},yg],storageKey:null};var Wk={kind:"InlineFragment",selections:[Mi,n,Y,Rb,Ok,Pk,Qk,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_managing_parent",storageKey:null}],type:"NeoApprovedUser",abstractKey:null},Xk={kind:"InlineFragment",selections:[n,Y,Nk,{alias:null,args:null,kind:"ScalarField",name:"accepts_messenger_user_feedback",storageKey:null},Pk,{alias:null,args:null,kind:"ScalarField",name:"is_messenger_platform_bot",storageKey:null},Qk,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed_to_message_updates",storageKey:null},{alias:null,args:null,concreteType:"InstantGameChannelInfo",kind:"LinkedField",name:"instant_game_channel",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:d,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null}],type:"Page",abstractKey:null},Yk=[n,Y,Qk],Zk={kind:"InlineFragment",selections:Yk,type:"SmsMessagingParticipant",abstractKey:null},$k={kind:"InlineFragment",selections:[Y,Qk],type:"InstagramMessagingUser",abstractKey:null},al=[Y],bl={kind:"InlineFragment",selections:al,type:"LiveChatOnlyPerson",abstractKey:null};Yk={kind:"InlineFragment",selections:Yk,type:"UnavailableMessagingActor",abstractKey:null};var cl={kind:"InlineFragment",selections:al,type:"UnifiedMessagingInstagramUser",abstractKey:null},dl={alias:null,args:null,kind:"ScalarField",name:"is_blocked_by_viewer",storageKey:null},el=[n,Y,Nk],fl={kind:"InlineFragment",selections:el,type:"Group",abstractKey:null};el={kind:"InlineFragment",selections:el,type:"Event",abstractKey:null};j={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"detail",storageKey:null},j,g],storageKey:null}],type:"WorkForeignEntity",abstractKey:"__isWorkForeignEntity"};var gl=[n,Y,Rb,Qk],hl={kind:"InlineFragment",selections:gl,type:"XFBWorkroomsBaseUser",abstractKey:"__isXFBWorkroomsBaseUser"};gl={kind:"InlineFragment",selections:gl,type:"XFBWorkroomsSystemUser",abstractKey:null};var il={kind:"InlineFragment",selections:al,type:"MessengerCallGuestUser",abstractKey:null},jl={kind:"InlineFragment",selections:al,type:"WorkVCEndpointUser",abstractKey:null},kl={kind:"InlineFragment",selections:al,type:"WECMailboxAccount",abstractKey:null};al={kind:"InlineFragment",selections:al,type:"WECCustomer",abstractKey:null};var ll={alias:null,args:null,kind:"ScalarField",name:"wec_group_creation_time",storageKey:null},ml={alias:null,args:null,kind:"ScalarField",name:"wec_group_invite_link",storageKey:null};Gd={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:Gd,storageKey:null};Ld={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[Li,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[a,B,b,{kind:"InlineFragment",selections:[Mi,n,Y,Rb,Nk,Ok,Pk,Qk,Rk,Sk,Tk,Uk,Vk,Ld],type:"User",abstractKey:null},Wk,Xk,Zk,$k,bl,Yk,cl,{kind:"InlineFragment",selections:[n,Y,Nk,dl,Qk,Ld],type:"ReducedMessagingActor",abstractKey:null},fl,el,j,hl,gl,il,jl,kl,al,{kind:"InlineFragment",selections:[Y,ll,ml,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[Gd,qg],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[Gd],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};Gd={alias:"watermark",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null};var nl={alias:"action",args:null,kind:"ScalarField",name:"action_timestamp_precise",storageKey:null},ol={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[Gd,nl,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:d,storageKey:null}],storageKey:null}],storageKey:null};Oh=[{alias:null,args:null,concreteType:"MessagingDeliveryReceiptsOfThreadConnection",kind:"LinkedField",name:"delivery_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingDeliveryReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:Oh,storageKey:null}],storageKey:null}];var pl={condition:"includeDeliveryReceipts",kind:"Condition",passingValue:!0,selections:Oh},ql=[Ja,{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,La,b,Df,Ef,q,S,rc,qc,tc,uc,J,Sf,Zc,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,kh,th,uh,vh,wh,xh,Ah,Mh,Nh,Ph,Zh,bi,pi,Eg,si,zi,Ai,Bi,Ci,Di,Ei,Fi,gh,Yb,Si,Ti,kg,jj,tj,wg,M,Ek,Fk,Jk,Kk,Lk,Mk,li,Vj,Ld,ol,pl],storageKey:null}],rl={alias:null,args:null,kind:"ScalarField",name:"instagram_user_id",storageKey:null},sl=[rl,D],tl={alias:null,args:null,kind:"ScalarField",name:"unseen_count",storageKey:null},ul={alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},vl={alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},wl={alias:null,args:null,kind:"ScalarField",name:"thread_v2_id",storageKey:null},xl={alias:null,args:null,kind:"ScalarField",name:"instagram_message_thread_type",storageKey:null},yl={alias:null,args:null,kind:"ScalarField",name:"thread_title",storageKey:null},zl={alias:null,args:null,kind:"ScalarField",name:"is_group",storageKey:null},Al={alias:null,args:null,kind:"ScalarField",name:"last_activity_at",storageKey:null},Bl={alias:null,args:null,concreteType:"IGThreadLastSeenUser",kind:"LinkedField",name:"last_seen_at",plural:!0,selections:[Je,Ng,Uj],storageKey:null},Cl={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},Dl={alias:null,args:null,concreteType:"IGThreadDirectStoryData",kind:"LinkedField",name:"direct_story",plural:!1,selections:[tl,Cl],storageKey:null},El={alias:null,args:null,concreteType:"InstagramMessageThreadThreadLabelsConnection",kind:"LinkedField",name:"thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Rh,W,Sh],storageKey:null}],storageKey:null},Fl={alias:null,args:null,concreteType:"InstagramMessageThreadThreadCorpLabelsConnection",kind:"LinkedField",name:"thread_corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Rh,W],storageKey:null}],storageKey:null};Pi={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"assigned_admin",plural:!1,selections:Pi,storageKey:null};var Gl={alias:null,args:null,kind:"ScalarField",name:"is_follow_up",storageKey:null},Hl={alias:null,args:null,kind:"ScalarField",name:"is_read",storageKey:null},Il={alias:null,args:null,kind:"ScalarField",name:"business_thread_folder",storageKey:null},Jl={alias:null,args:null,concreteType:"IGThreadUserNodesData",kind:"LinkedField",name:"thread_users",plural:!1,selections:[{alias:null,args:null,concreteType:"IGThreadUserData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"eimu_id",storageKey:null},rl,Nk,b,{alias:null,args:null,concreteType:"IGThreadUserProfilePic",kind:"LinkedField",name:"profile_picture",plural:!1,selections:m,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null}],storageKey:null}],storageKey:null},Kl={alias:null,args:null,kind:"ScalarField",name:"input_mode",storageKey:null},Ll={alias:null,args:null,kind:"ScalarField",name:"is_partnership",storageKey:null},Ml={alias:null,args:null,kind:"ScalarField",name:"time_stamp",storageKey:null},Nl={alias:null,args:null,kind:"ScalarField",name:"ig_item_type",storageKey:null},Ol={alias:null,args:null,kind:"ScalarField",name:"client_context",storageKey:null},Pl={alias:null,args:null,concreteType:"IGThreadItemPlaceHolderSource",kind:"LinkedField",name:"ig_placeholder",plural:!1,selections:[h,Af],storageKey:null},Ql=[{kind:"Variable",name:"height",variableName:"height"},{kind:"Variable",name:"width",variableName:"width"}],Rl={alias:null,args:Ql,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:m,storageKey:null},Sl={alias:null,args:Ql,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"video_source",plural:!1,selections:T,storageKey:null},Tl={alias:null,args:null,kind:"ScalarField",name:"expiring_at",storageKey:null},Ul=[rl,Nk,b,D],Vl={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:Ul,storageKey:null},Wl={alias:null,args:null,concreteType:"IGMessageThreadItemRavenMedia",kind:"LinkedField",name:"raven_media",plural:!1,selections:[Cl,{alias:null,args:null,kind:"ScalarField",name:"seen_user_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"view_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_count",storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Rl,Sl,Tl],storageKey:null}],storageKey:null};Ul={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:Ul,storageKey:null};var Xl={alias:null,args:Ql,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:T,storageKey:null},Yl={kind:"InlineFragment",selections:f,type:"IGMessageThreadItemMediaShare",abstractKey:null},Zl={alias:null,args:null,kind:"ScalarField",name:"story_type",storageKey:null},$l={kind:"InlineFragment",selections:[Zl,e,g],type:"IGMessageThreadItemReelShare",abstractKey:null};Zl={kind:"InlineFragment",selections:[Zl,Af,h,e],type:"IGMessageThreadItemStoryShare",abstractKey:null};Af={kind:"InlineFragment",selections:[h,e],type:"IGMessageThreadItemFelixShare",abstractKey:null};var am={kind:"InlineFragment",selections:[h,tb,e,{alias:null,args:null,kind:"ScalarField",name:"current_price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_price",storageKey:null},l],type:"IGMessageThreadItemProductShare",abstractKey:null},bm={alias:null,args:null,kind:"ScalarField",name:"likes_count",storageKey:null},cm={alias:null,args:null,kind:"ScalarField",name:"emojis",storageKey:null},dm={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"media",plural:!0,selections:T,storageKey:null};cd={alias:null,args:null,concreteType:"IGThreadItemActionLogSource",kind:"LinkedField",name:"action_log",plural:!1,selections:[M,{alias:null,args:null,concreteType:"IGThreadItemActionLogBoldSource",kind:"LinkedField",name:"bold",plural:!0,selections:cd,storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemActionLogTextAttributesSource",kind:"LinkedField",name:"text_attributes",plural:!0,selections:[ad,bd,Ob,{alias:null,args:null,kind:"ScalarField",name:"intent",storageKey:null}],storageKey:null}],storageKey:null};ad={alias:null,args:null,concreteType:"IGThreadItemLinkSource",kind:"LinkedField",name:"link_source",plural:!1,selections:[Ol,e,{alias:null,args:null,concreteType:"IGThreadItemLinkContextSource",kind:"LinkedField",name:"link_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_summary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_image_url",storageKey:null}],storageKey:null}],storageKey:null};bd={alias:null,args:null,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"animated_media",plural:!1,selections:nf,storageKey:null};nf={alias:null,args:null,concreteType:"IGThreadItemVoiceMediaSource",kind:"LinkedField",name:"voice_media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_src",storageKey:null},Eb],storageKey:null};var Z=[Cl,Xl],em={alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!1,selections:Z,storageKey:null},fm={alias:null,args:null,concreteType:"IGMessageThreadItemHScrollShareItem",kind:"LinkedField",name:"hscroll_share",plural:!0,selections:[h,tb,l,em],storageKey:null},gm={alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},hm={alias:null,args:null,kind:"ScalarField",name:"header_subtitle",storageKey:null},im={alias:null,args:null,kind:"ScalarField",name:"header_icon_url",storageKey:null},jm={alias:null,args:null,concreteType:"IGMessageThreadItemCollectionShare",kind:"LinkedField",name:"shops_collection_share",plural:!1,selections:[gm,hm,im,h,tb,nc,em],storageKey:null};tb={alias:null,args:null,concreteType:"IGMessageThreadItemAppointmentBooking",kind:"LinkedField",name:"appointment_booking",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"max_title_num_of_lines",storageKey:null},tb,{alias:null,args:null,kind:"ScalarField",name:"max_subtitle_num_of_lines",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title_text",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"header_icon_url_info",plural:!1,selections:T,storageKey:null},em,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"preview_extra_urls_info",plural:!0,selections:T,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_layout_type",storageKey:null},nc,{alias:null,args:null,concreteType:"IGXMAMessageCTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[Ra,h],storageKey:null}],storageKey:null};em={alias:null,args:null,concreteType:"IGMessageThreadItemShopShare",kind:"LinkedField",name:"shop_share",plural:!1,selections:[gm,hm,im,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"medias",plural:!0,selections:Z,storageKey:null},nc],storageKey:null};T={alias:null,args:null,concreteType:"IGMessageThreadItemGenericXMA",kind:"LinkedField",name:"generic_xma",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"xma_template_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_layout_type",storageKey:null},h,{alias:null,args:null,kind:"ScalarField",name:"sub_title",storageKey:null},{alias:null,args:null,concreteType:"GenericXMACTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[h,Ra],storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"preview_url_info",plural:!1,selections:Z,storageKey:null}],storageKey:null};gm={alias:null,args:null,kind:"ScalarField",name:"send_attribution",storageKey:null};hm={alias:null,args:null,concreteType:"IGMessageThreadItemRepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[e,V,Ng,Uj],storageKey:null};im={alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null};Ra={alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null};Z={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[im,Ra],storageKey:null};Vl=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[ul,Je,Yj,Ml,Nl,e,Ol,Pl,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Cl,Rl,Sl,Tl,Vl],storageKey:null},Wl,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[Ul,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Cl,Xl,Sl,Tl,Vl],storageKey:null},Yl,$l,Zl,Af,am],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[bm,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:sl,storageKey:null},cm],storageKey:null},{alias:null,args:Ql,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[Ul,dm],storageKey:null},cd,ad,bd,nf,fm,jm,tb,em,T,gm,hm],storageKey:null},Z];Ul={alias:null,args:null,kind:"ScalarField",name:"selected_thread_type",storageKey:null};var km=[{kind:"Variable",name:"after",variableName:"item_after"},{kind:"Variable",name:"first",variableName:"item_limit"}],lm=[{kind:"Variable",name:"before_time_precise",variableName:"before"},{kind:"Variable",name:"last",variableName:"message_limit"}],mm={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null};Oh={condition:"load_delivery_receipts",kind:"Condition",passingValue:!0,selections:Oh};var nm={kind:"Variable",name:"page_id",variableName:"page_id"},om=[nm],pm={alias:null,args:null,kind:"ScalarField",name:"business_id",storageKey:null},qm={kind:"RootArgument",name:"page_id"},rm={kind:"Variable",name:"business_assets",variableName:"businessAssets"};nm={condition:"getShouldUnifyConfigQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:[rm,nm],concreteType:"BizInboxFeatureConfigWrapper",kind:"LinkedField",name:"selected_thread_biz_inbox_feature_config",plural:!1,selections:[{alias:null,args:null,concreteType:"BizInboxGatingConfig",kind:"LinkedField",name:"gating_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_commerce_invoice_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_product_picker_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_availability_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_create_appointment_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_customer_feedback_button_on_move_to_done",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_form_builder_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_inthread_forms_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_marketing_messages_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"marketing_messages_in_composer_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_gcash_id_share_and_copy_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_live_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_biz_ai_in_composer",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizInboxCommerceInvoiceButtonConfig",kind:"LinkedField",name:"commerce_invoice_button_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_confirm_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_payment_onboarding",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_request_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commerce_invoice_button_icon",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]};var sm=[tl];sm={alias:"xfb_unified_thread_list_pending",args:[{kind:"Variable",name:"msgr_params",variableName:"msgr_pending_params"},{kind:"Variable",name:"wa_params",variableName:"wa_pending_params"}],concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{condition:"isWorkUser",kind:"Condition",passingValue:!1,selections:[{alias:"wa_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:sm,storageKey:null},{alias:"msg_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:sm,storageKey:null}]}],storageKey:null};var tm={alias:null,args:om,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_add_activities",storageKey:null}],storageKey:null};rm=[rm];var $=[B,a],um={kind:"InlineFragment",selections:d,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},vm={kind:"InlineFragment",selections:d,type:"GenericAttachmentMedia",abstractKey:null},wm={kind:"InlineFragment",selections:d,type:"MontageImage",abstractKey:null},xm={kind:"InlineFragment",selections:d,type:"MontageVideo",abstractKey:null};Ua={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[B,Ua,Va,Ya,r,Za,s,O,um,vm,wm,xm],storageKey:null};Va={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[B,h,n],storageKey:null};Ya={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[B,a,{kind:"InlineFragment",selections:[jb,kb,v,lb],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null};r={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[B,vb,y],storageKey:null};jb={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[hb,ib,Ya,mb,nb,a,ob,pb,qb,rb,sb,x,r,wb,Sa],storageKey:null};kb=[B,{kind:"TypeDiscriminator",abstractKey:"__isPaymentActivityAction"},u,Hb,Ib,h,Kb,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[B,C,Fb,E,Mb,a],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}];v={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:kb,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[B,Nb,G,Pb,I],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:kb,storageKey:null},Ob,Qb,e],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:kb,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"};vb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[B,a,b,D,Sb],storageKey:null};y=[J,a];wb={alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:y,storageKey:null},Zb,a],storageKey:null};Sa={alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[b,M,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:y,storageKey:null},n,a],storageKey:null};u=[B,b,a,D,Sb];Hb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:u,storageKey:null};Kb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:u,storageKey:null};Mb={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:[Fb,vb,Tb,Ub,C,Vb,Wb,Xb,wb,ac,bc,L,Sa,a,N,cc,dc,v],storageKey:null};Nb=[hb,ib,Ya,mb,nb,a,ob,pb,qb,rb,sb,x,r];G={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:Nb,storageKey:null};Pb={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:Nb,storageKey:null};I=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,M,kc,lb,lc,b,mc,nc,Pb,G,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[B,pc,oc,sc,vc,yc,O,um,vm,wm,xm],storageKey:null}],storageKey:null}];Qb=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[B,a,b],storageKey:null},a];kb={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[B,Xa,a],storageKey:null};Zb={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,Ud,Vd,Wd,Xd,kc,lc,Yd,Zd,G],storageKey:null}],storageKey:null};Sb=[b,a];u={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[B,Za,ng,O,um,vm,wm,xm],storageKey:null};hb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[B,J,O,um,vm,wm,xm],storageKey:null};ib={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:y,storageKey:null};Ya={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[ib],storageKey:null};mb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:$,storageKey:null};nb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[B,a,zb,{kind:"InlineFragment",selections:[Ab,s,Bb,Cb,Db,Eb],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[C,Fb,E,v],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:[Fb,vb,Tb,Ub,C,Vb,Wb,Xb,wb,ac,bc,L,Sa,N,cc,dc,v],type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[K,fc,Hb,Kb,gc,hc,dc,Mb,ic,L,R,N,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[K,fc,Hb,Kb,gc,hc,a,dc,Mb,ic,L,R,N,v],storageKey:null},v],type:"PeerToPeerPaymentRequest",abstractKey:null},v,{kind:"InlineFragment",selections:[jc,G,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:I,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[jc,G,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:I,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},zc,Bc,Gc,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:$,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:$,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[Hc,Ic,Jc,Kc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[B,Mc,Lc,O],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[Nc,c,Oc],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[Qc,Rc,Sc,Tc,Uc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[B,a,{kind:"InlineFragment",selections:[Vc,Wc,Xc,Pc,Yc,$c,dd,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,b,M,ed,fd,{alias:null,args:gd,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[hd,a],storageKey:"images(first:1)"},id],storageKey:null}],storageKey:null},jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,Tc,Uc,ud],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[vd,wd,xd,yd],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[zd,Ad,Bd,Cd,Dd,Ed],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:Qb,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[Qa,i,Ua,$a,ab,bb,cb,db,eb,Va,gb,jb,yb],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Hd,Id,Jd,Kd,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[B,b,O],storageKey:null},Md,Nd,Od,Pd,Qd,b,Rd],type:"Event",abstractKey:null},Sd,Td,{kind:"InlineFragment",selections:[b,Ud,Vd,Wd,Xd,kc,lc,Yd,Zd,Pb,G],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[Ud,$d,ae,nc,Vd,be,ce,de,ee,b],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[fe,ge,he,ie,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[je,a],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[ke,le,me,ne,oe,pe,qe,re,se,xe,md,ye,ze,Ae,Be,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:I,storageKey:null},Ce,De,Ee,Fe],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Ge,He,Ie,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Je,b,Ke,M,Lb,Le,Me,a],storageKey:null},Ta,Oe,Pe,Ne,Qe,Re,F,Se,Te,Ue,Ve,We,Xe],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:[Ye,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:$,storageKey:null},Ze,$e,kb,n],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[Ze,kb],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[bf,cf,Wa,df,b,Gb,ef],type:"Page",abstractKey:null},hf,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[a,jf,kf,lf,ve,Ec,Zb,pf,qf],storageKey:null},rf,sf,U,tf,Ce],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[jf,kf,lf,ve,Ec,Zb,te,of,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ne,a],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:Sb,storageKey:null},Ce],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[uf,vf,b,wf],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[Ac],type:"UserLeadGenInfo",abstractKey:null},xf,{kind:"InlineFragment",selections:[b,yf,l,Cb,Db],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[s,Bb,Cb,Db,Ab,o,zf,p],type:"WECMessageVideo",abstractKey:null},Cf,{kind:"InlineFragment",selections:[Cb,Gf,Jf],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[Kf,Lf,Mf,Nf,Of,Pf,Qf],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[Rf],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:[B,Rb,a],storageKey:null}],storageKey:null},Tf],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[Tf],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[Tf,Uf,Vf],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[Xf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[B,Yf,Zf,$f,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[B,O],storageKey:null},z,Wf],storageKey:null},ag,e],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[bg,cg,dg,{alias:null,args:fg,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[gg,a],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'},a],storageKey:null},hg,ic,ig,mg,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[B,b,jg,lg,a],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[ab,n,$a,Qa,u,pg,{alias:null,args:eg,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[qg,{alias:"files",args:rg,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[pg,hb],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:tg,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[hb],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[ug,vg,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[u],storageKey:null},a],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[b,D,Ya,zg,Ag],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[b,Bg,Cg,Dg,Ya,mb,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:$,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Fg,Gg,Hg,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[Ig,b,Jg,Kg,a],storageKey:null},Lg,Mg,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[h,e,Ob,ub,Ng,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[D,b,a],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:[Pb],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[Og],type:"ApplicationReferralXMA",abstractKey:null},Qg,{kind:"InlineFragment",selections:[Rg],type:"XFBP2MXMA",abstractKey:null},Sg],storageKey:null};ob={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[Qa,i,Ua,$a,ab,bb,cb,db,eb,Va,gb,jb,yb,nb,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[Qa,i,Ua,$a,ab,bb,cb,db,eb,Va,gb,jb,yb,nb],storageKey:null}],storageKey:null};pb={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[Pa,ob,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[B,a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[B,b,a,{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null},ob],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null},a],storageKey:null};qb=[B,{kind:"TypeDiscriminator",abstractKey:"__isMessageBlobAttachment"},af,Dc,sg,vc,xg,O];rb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:qb,storageKey:null};sb={alias:"last_message",args:Ma,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[B,c,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:$,storageKey:null},a],storageKey:null},Na,Oa,P,k,a,{kind:"InlineFragment",selections:[pb,H,rb],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[fb,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[B,ec],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null}],storageKey:null}],storageKey:"messages(last:1)"};x={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Hf,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[A,If,a],storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:null};r={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[fh,ih,jh,a],storageKey:null};Nb={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[a,lh,mh,nh,oh,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[ph,qh,rh,sh,a],storageKey:null}],storageKey:null},a],storageKey:null}],storageKey:null};mc={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:$,storageKey:null};pc={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[B,zh,a],storageKey:null};oc={alias:null,args:gd,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,Bh,gf,Ch,Dh,Fc,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[Eh,a],storageKey:null},Fh,Gh,Hh,ff,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[V,a],storageKey:null},Ih,Jh,Kh,Lh],storageKey:null}],storageKey:"event_reminders(first:1)"};sc={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Qh,vd,Uh,Wh,Yh,a],storageKey:null};yc={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[$h,ai,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:$,storageKey:null}],storageKey:null};Xa={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[a,Oc,$e,Ze,ue,ci,di,ei,fi,gi,hi,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[B,J,a],storageKey:null},ii,ji],storageKey:null},ki,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:$,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[B,a,mi],storageKey:null},oi],storageKey:null};Za={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[B,a,{kind:"InlineFragment",selections:[qi,b,D,mb,ri,si,ti,ui,wi,xi],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[qi,b,D,ri,si,ti,Rd,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[B,yi,O],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null};ng={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[a,Gi,Hi,Ii,Ji,Ki,Ni,Oi,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[Qi,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[B,J,O,{kind:"InlineFragment",selections:d,type:"XFBBasicMarketplaceImage",abstractKey:null}],storageKey:null},z,Wf],storageKey:null},ag,e],storageKey:null},Ri],storageKey:null};um={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[n,a],storageKey:null}],storageKey:null};vm={kind:"TypeDiscriminator",abstractKey:"__isMessage"};wm={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[gj,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:$,storageKey:null}],storageKey:null};xm={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[B,a,b,jg],storageKey:null},a],storageKey:null};y={kind:"InlineFragment",selections:[lj,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[e,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[z,Wf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[B,mj,nj,Ka,O],storageKey:null},oj],storageKey:null}],storageKey:null},pj,pb,H,rb,ni],type:"UserMessage",abstractKey:null};zb=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:qb,storageKey:null}];Eb={kind:"InlineFragment",selections:[t,c,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[qg,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:zb,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null};E={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[Ff,Pa,xc,a],storageKey:null},c],type:"ThreadImageMessage",abstractKey:null};Fb={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[B,wj,xj,yj,zj,Aj,Bj,Cj,Dj,X,mf,Fj,Gj,hh,Hj,Ij,Kj,{kind:"InlineFragment",selections:[xb,Lj,Mj,Nj,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[B,{kind:"InlineFragment",selections:[Oj,Pg,ib,Pj],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},Qj],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},Rj,Sj,Xj,Zj,$j,bk,ck,dk,Cc,ak,ek,gk,hk,ik,kk,lk,jk,{kind:"InlineFragment",selections:[mk,nk,ok,Jj,pk,qk,rk,sk,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[qg,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:zb,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Tj,tk,Wj,vk,wk,fk,xk,yk,Ak,zk,Bk,Ck,Dk],storageKey:null},fb,c],type:"GenericAdminTextMessage",abstractKey:null};vb=[B,vm,Vi,V,Wi,Yi,Zi,Na,$i,aj,Bf,bj,Oa,cj,dj,P,ej,fj,wm,ij,xm,kj,k,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[md,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[B,vm,Vi,V,Wi,Yi,Zi,Na,$i,aj,Bf,bj,Oa,cj,dj,P,ej,fj,wm,ij,xm,kj,k,a,y,qj,Eb,sj,E,uj,vj,Fb,$b,w],storageKey:null}],storageKey:null},a,y,qj,Eb,sj,E,uj,vj,Fb,$b,w];Tb={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[V,Ui,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:vb,storageKey:null}]}],storageKey:null};Ub={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[n,a,b,Bg,Q,D,wi,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[rj,a],storageKey:null}],storageKey:null}],storageKey:null};C={alias:null,args:gd,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,Gk,Fd,{alias:null,args:gd,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[Hk,Ik,a],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"};Vb={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:Sb,storageKey:null},yg],storageKey:null};Wb={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:Qb,storageKey:null};Xb={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[Li,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[B,{kind:"TypeDiscriminator",abstractKey:"__isMessagingActor"},a,b,{kind:"InlineFragment",selections:[Mi,n,Y,Rb,Nk,Ok,Pk,Qk,Rk,Sk,Tk,Uk,Vk,Vb],type:"User",abstractKey:null},Wk,Xk,Zk,$k,bl,Yk,cl,{kind:"InlineFragment",selections:[n,Y,Nk,dl,Qk,Vb],type:"ReducedMessagingActor",abstractKey:null},fl,el,j,hl,gl,il,jl,kl,al,{kind:"InlineFragment",selections:[Y,ll,ml,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[Wb,qg],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[Wb],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:null};wb={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[Gd,nl,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:$,storageKey:null}],storageKey:null}],storageKey:null};ac={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:vb,storageKey:null}]};bc=[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,La,b,sb,Ef,x,S,rc,tc,uc,J,Sf,Zc,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,r,Nb,mc,vh,wh,xh,pc,oc,Nh,Ph,sc,yc,Xa,Za,si,zi,Ai,Bi,Ci,Di,Ei,Fi,gh,ng,Si,Ti,um,Tb,Ub,M,Ek,Fk,C,Kk,Lk,Mk,li,Vj,Xb,wb,qc,ac,pl],storageKey:null},Ja];Sa=[rl,D,a];cc=[rl,Nk,b,D,a];K={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:cc,storageKey:null};fc={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:cc,storageKey:null};Hb=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[ul,Je,Yj,Ml,Nl,e,Ol,Pl,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Cl,Rl,Sl,Tl,K],storageKey:null},Wl,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[B,fc,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Cl,Xl,Sl,Tl,K],storageKey:null},Yl,$l,Zl,Af,am],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[bm,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:Sa,storageKey:null},cm],storageKey:null},{alias:null,args:Ql,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[fc,dm],storageKey:null},cd,ad,bd,nf,fm,jm,tb,em,T,gm,hm,a],storageKey:null},Z];Kb={alias:null,args:null,kind:"ScalarField",name:"page_contact_id",storageKey:null};gc={alias:null,args:null,kind:"ScalarField",name:"ig_thread_id",storageKey:null};hc={alias:null,args:null,kind:"ScalarField",name:"unit_type",storageKey:null};dc=[{kind:"Literal",name:"first",value:4},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_AND_VIDEO"}];Mb={alias:"fbid",args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null};L={alias:"dim",args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:wc,storageKey:null};R={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};N={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[Ra,im],storageKey:null};v={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null};jc=[{kind:"Literal",name:"height",value:52},{kind:"Literal",name:"width",value:52}];zc=[{kind:"Literal",name:"first",value:20}];Bc={alias:null,args:null,kind:"ScalarField",name:"contact_count",storageKey:null};Gc={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]};Hc=[{kind:"Literal",name:"first",value:400}];Ic={alias:null,args:null,kind:"ScalarField",name:"is_custom_event_reportable",storageKey:null};Jc={alias:null,args:null,kind:"ScalarField",name:"is_synced_with_smb",storageKey:null};Kc={alias:null,args:null,kind:"ScalarField",name:"has_wa_contact",storageKey:null};Mc=[{kind:"Literal",name:"first",value:2}];Lc=[{alias:null,args:null,kind:"ScalarField",name:"nux_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_content_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_ui_type",storageKey:null}];Nc=[{alias:null,args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];Qc={alias:null,args:[{kind:"Literal",name:"tab",value:"data_sharing"}],kind:"ScalarField",name:"settings_uri_in_business_view",storageKey:'settings_uri_in_business_view(tab:"data_sharing")'};Rc={alias:null,args:null,kind:"ScalarField",name:"__token",storageKey:null};Sc=[{kind:"Literal",name:"first",value:5},{kind:"Literal",name:"types",value:["BUSINESS_ORDER"]}];Vc={alias:null,args:null,kind:"ScalarField",name:"is_auto_detected",storageKey:null};Wc={alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_redesigned_nux",storageKey:null};Xc={alias:null,args:null,kind:"ScalarField",name:"is_classic_page",storageKey:null};Pc={alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[Uj],storageKey:null};Yc={alias:null,args:null,kind:"ScalarField",name:"is_detected_outcomes_label",storageKey:null};$c={alias:null,args:Hc,concreteType:"CustomLabelsConnection",kind:"LinkedField",name:"custom_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"CustomLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,Rh,Bc,W,Sh,Th,Ic,Yc,Jc,Kc,B],storageKey:null},R],storageKey:null},Z],storageKey:"custom_labels(first:400)"};dd={alias:null,args:Hc,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_custom_labels",kind:"LinkedHandle",name:"custom_labels"};ed={alias:null,args:Hc,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_corp_labels",kind:"LinkedHandle",name:"corp_labels"};fd={alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:d,storageKey:null};hd=[{kind:"Literal",name:"gk_name",value:"mcom_kbank_integration_rollout"}];id=[{alias:"passes",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];jd=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_order_integration_gk"}];kd=[{alias:"is_order_integration_enabled",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];ld=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_timeline_actions_gk"}];nd=[{alias:"showTimelineActions",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];return{fragment:{argumentDefinitions:[aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa],kind:"Fragment",metadata:null,name:"BizInboxUnifiedThreadsQuery",selections:[Ga,{alias:null,args:Ha,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:ql,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:ql,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:sl,storageKey:null},Ia,tl,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[ul,vl,wl,xl,yl,zl,Al,Bl,Dl,El,Fl,Pi,Gl,Hl,Il,Jl,Kl,Ll,Ji,Ki,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:gd,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:Vl,storageKey:"thread_items(first:1)"}]}],storageKey:null},Z]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[Ul,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[ul,vl,wl,xl,yl,zl,Al,Bl,Dl,El,Fl,Pi,Gl,Hl,Il,Jl,Kl,Ll,Ji,Ki,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:km,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:Vl,storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[a,La,b,Df,Ef,q,S,rc,qc,tc,uc,J,Sf,Zc,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,kh,th,uh,vh,wh,xh,Ah,Mh,Nh,Ph,Zh,bi,pi,Eg,si,zi,Ai,Bi,Ci,Di,Ei,Fi,gh,Yb,Si,Ti,kg,jj,tj,wg,M,Ek,Fk,Jk,Kk,Lk,Mk,li,Vj,Ld,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:lm,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[mm,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:hj,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[ol]},Oh],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardContainerDetailsFrag_selectedContact",selections:[{alias:null,args:om,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[pm],storageKey:null},{args:null,kind:"FragmentSpread",name:"BizKitContextCardContainer_contact"}],storageKey:null},{alias:null,args:om,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCard_config"}],storageKey:null}],args:null,argumentDefinitions:[qm]}]}],storageKey:null},nm],storageKey:null},sm,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardActivitySectionFrag_activitiesquery",selections:[{alias:null,args:Ha,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:om,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivitySection_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityNuxForAutoDetected_contact"}],storageKey:null},tm],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:om,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_page"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_page"}],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:rm,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_mbsBusinessAssets"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_mbsBusinessAssets"}],storageKey:null}]}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"businessAssets"},{kind:"RootArgument",name:"ig_params"},{kind:"RootArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},{kind:"RootArgument",name:"msgr_params"},qm,{kind:"RootArgument",name:"selected_item_id"},{kind:"RootArgument",name:"wa_params"}]}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[ia,fa,ga,ja,Ca,Ba,Fa,da,na,ma,wa,ea,ta,Da,ua,Ea,sa,aa,qa,ra,oa,la,ka,pa,va,ca,za,ya,xa,Aa,ha,ba],kind:"Operation",name:"BizInboxUnifiedThreadsQuery",selections:[Ga,{alias:null,args:Ha,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:bc,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:bc,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:Sa,storageKey:null},Ia,tl,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[ul,vl,wl,xl,yl,zl,Al,Bl,Dl,El,Fl,Pi,Gl,Hl,Il,Jl,Kl,Ll,Ji,Ki,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:gd,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:Hb,storageKey:"thread_items(first:1)"}]},a],storageKey:null},Z]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[Ul,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[ul,vl,wl,xl,yl,zl,Al,Bl,Dl,El,Fl,Pi,Gl,Hl,Il,Jl,Kl,Ll,Ji,Ki,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:km,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:Hb,storageKey:null}]},a],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[a,La,b,sb,Ef,x,S,rc,tc,uc,J,Sf,Zc,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,r,Nb,mc,vh,wh,xh,pc,oc,Nh,Ph,sc,yc,Xa,Za,si,zi,Ai,Bi,Ci,Di,Ei,Fi,gh,ng,Si,Ti,um,Tb,Ub,M,Ek,Fk,C,Kk,Lk,Mk,li,Vj,Xb,qc,ac,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:lm,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[mm,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:vb,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[wb]},Oh],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:om,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[pm,g,{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sub_business_id",storageKey:null}],storageKey:null},a,{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[Kb,{alias:null,args:null,kind:"ScalarField",name:"is_guest_chat",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_consented_to_contact_card_tos",storageKey:null},{condition:"should3DContextCardSections",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"XFBBizCRMContactIGIDs",kind:"LinkedField",name:"ig_ids",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_id_v2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_eimu_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactIGAttributes",kind:"LinkedField",name:"ig_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_user_id",storageKey:null},gc,{alias:null,args:null,concreteType:"BizCRMContactIGUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[hc,e],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[Uj,{alias:null,args:null,concreteType:"BizCRMContactFBUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:[{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[B,n,O],storageKey:null},z,Wf],storageKey:null},e],storageKey:null},hc],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessengerThreadAttribute",kind:"LinkedField",name:"messenger_thread",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"one_to_one_thread",plural:!1,selections:[{alias:"sharedMedia",args:dc,concreteType:"MessageSharedMediaConnection",kind:"LinkedField",name:"message_shared_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageSharedMediaEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[B,{kind:"TypeDiscriminator",abstractKey:"__isMessageSharedMedia"},O,{kind:"InlineFragment",selections:[Mb,J,L],type:"MessageImage",abstractKey:null},{kind:"InlineFragment",selections:[Mb,J,L,s],type:"MessageVideo",abstractKey:null}],storageKey:null},R],storageKey:null},N],storageKey:'message_shared_media(first:4,message_shared_media_type:"PHOTO_AND_VIDEO")'},{alias:"sharedMedia",args:dc,filters:["message_shared_media_type"],handle:"connection",key:"BizKitContextCardSharedPhotos_sharedMedia",kind:"LinkedHandle",name:"message_shared_media"},a],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[Ej,{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},v,{alias:null,args:null,concreteType:"PageContactProfileURI",kind:"LinkedField",name:"profile_uris",plural:!0,selections:m,storageKey:null},{alias:null,args:jc,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris_prefetch",plural:!0,selections:m,storageKey:"profile_photo_uris_prefetch(height:52,width:52)"},{alias:null,args:null,kind:"ScalarField",name:"last_name",storageKey:null},{alias:"profile_photo_uri_about_section",args:[{kind:"Literal",name:"height",value:100},{kind:"Literal",name:"width",value:100}],concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:m,storageKey:"profile_photo_uris(height:100,width:100)"},{alias:null,args:null,kind:"ScalarField",name:"address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_name",storageKey:null},Xi,{alias:"phone",args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"national_number",storageKey:null},{alias:"phoneNumber",args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},we,{alias:null,args:null,kind:"ScalarField",name:"zip_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,concreteType:"PageContactBirthday",kind:"LinkedField",name:"birthday",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"formatted_birthday",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggested_email_address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fallback_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_state",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ban_action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_banned",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_blocked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_onsite_user",storageKey:null},Ii,{alias:null,args:zc,concreteType:"BizCRMContactSharedAttributesCorpLabelListConnection",kind:"LinkedField",name:"corp_label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesCorpLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,Rh,Sh,Bc,W,Xh,Th,B],storageKey:null},R],storageKey:null},Z,Gc],storageKey:"corp_label_list(first:20)"},{alias:null,args:zc,filters:null,handle:"connection",key:"BizKitContextCard_corp_label_list",kind:"LinkedHandle",name:"corp_label_list"},{alias:null,args:zc,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsConnection",kind:"LinkedField",name:"suggested_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[B,a,b,Rh,{kind:"InlineFragment",selections:[yh,og,{alias:null,args:null,kind:"ScalarField",name:"upsell",storageKey:null}],type:"BusinessPresenceDerivedLabel",abstractKey:null}],storageKey:null},R],storageKey:null},Z,Gc],storageKey:"suggested_labels(first:20)"},{alias:null,args:zc,filters:null,handle:"connection",key:"BizKitContextCard_suggested_labels",kind:"LinkedHandle",name:"suggested_labels"}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactBusinessAttributes",kind:"LinkedField",name:"business_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactCommunicationPreference",kind:"LinkedField",name:"communication_preference",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"email_subscription_status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttribute",kind:"LinkedField",name:"customer_labels",plural:!1,selections:[{alias:null,args:Hc,concreteType:"BizCRMContactMessageLabelAttributeLabelListConnection",kind:"LinkedField",name:"label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,Rh,Bc,W,Sh,Th,Ic,Jc,Kc,B],storageKey:null},R],storageKey:null},Z,Gc],storageKey:"label_list(first:400)"},{alias:null,args:Hc,filters:null,handle:"connection",key:"Contact_customer_label_list",kind:"LinkedHandle",name:"label_list"},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsConnection",kind:"LinkedField",name:"customer_custom_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"node",plural:!1,selections:Vh,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttribute",kind:"LinkedField",name:"admin_notes",plural:!1,selections:[{alias:null,args:Mc,concreteType:"BizCRMContactAdminNotesAttributeNotesListConnection",kind:"LinkedField",name:"notes_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttributeNotesListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageAdminNote",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:f,storageKey:null},Ng,{alias:null,args:null,kind:"ScalarField",name:"note_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_source_type",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"underlying_admin_creator",plural:!1,selections:[B,b,a],storageKey:null},B],storageKey:null},R],storageKey:null},N,Gc],storageKey:"notes_list(first:2)"},{alias:null,args:Mc,filters:null,handle:"connection",key:"BizKitContextCard_notes_list",kind:"LinkedHandle",name:"notes_list"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactWAAttributes",kind:"LinkedField",name:"wa_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"wa_customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_enable_ads_consent_in_ctwa",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_wa_automated_label_nux",storageKey:null},{alias:"adsDataSharingLabelsNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"LABEL_CREATION_WA"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lc,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"LABEL_CREATION_WA")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"gk_name",value:"ctm_custom_label_reporting_pages"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Nc,storageKey:'gk_check(gk_name:"ctm_custom_label_reporting_pages")'},Qc,a,{alias:null,args:null,kind:"ScalarField",name:"is_p2m_lite_payment_onboarded",storageKey:null}],storageKey:null},Rc,{alias:null,args:null,concreteType:"BizCRMContactBusinessActions",kind:"LinkedField",name:"business_actions",plural:!1,selections:[{alias:null,args:Sc,concreteType:"BizCRMContactBusinessActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactBusinessActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[B,{alias:null,args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"contact_action",plural:!1,selections:[B,Ng,Jb,g,Ke,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"descriptions",plural:!0,selections:f,storageKey:null},lb,{alias:null,args:null,kind:"ScalarField",name:"click_url",storageKey:null},Ib,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"invoice_id",storageKey:null},uk,Vc],type:"BizCRMContactAdAction",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:d,storageKey:null}],type:"BizCRMContactFacebookActionWithStory",abstractKey:null},{kind:"InlineFragment",selections:[uk,W,Vc,{alias:null,args:null,kind:"ScalarField",name:"show_ad_icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"data_silo_auto_detected_activity",storageKey:null}],type:"BizCRMContactCustomAction",abstractKey:null},{kind:"InlineFragment",selections:[W],type:"BizCRMContactBusinessOrderAction",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},R],storageKey:null},N],storageKey:'actions(first:5,types:["BUSINESS_ORDER"])'},{alias:null,args:Sc,filters:["types"],handle:"connection",key:"BizKitContextCardOrders__actions",kind:"LinkedHandle",name:"actions"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_consent_upsell_in_inbox_at_thread_entry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_event_sharing_consent_at_thread_entry",storageKey:null},{alias:null,args:null,concreteType:"XFBMBSAdsEventSharingSettings",kind:"LinkedField",name:"mbs_ads_event_sharing_settings",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_business_opt_in_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_consumer_opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY_ON_THREAD_ENTRY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lc,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY_ON_THREAD_ENTRY")'},Wc,{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[Xc],storageKey:null}]},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[Xc,a],storageKey:null}]}]},{condition:"shouldSkipMessage",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[v,{alias:null,args:jc,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:m,storageKey:"profile_photo_uris(height:52,width:52)"}],storageKey:null},{alias:null,args:null,concreteType:"PageContactCTAType",kind:"LinkedField",name:"contact_ctas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_type",storageKey:null}],storageKey:null}],storageKey:null},Pc,{alias:null,args:null,concreteType:"BizCRMContactIGAttributes",kind:"LinkedField",name:"ig_attributes",plural:!1,selections:[gc,{alias:null,args:null,concreteType:"BizCRMContactIGUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[e,hc],storageKey:null}],storageKey:null}]},{condition:"shouldSkipPageQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[a,$c,dd,{alias:null,args:Hc,concreteType:"PageCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,Rh,Sh,Bc,W,Xh,Th,Yc,B],storageKey:null},R],storageKey:null},Z],storageKey:"corp_labels(first:400)"},ed,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"if_viewer_can_manage_permissions",plural:!1,selections:$,storageKey:null},fd,{alias:"is_in_kbank_rollout",args:hd,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:id,storageKey:'gk_check(gk_name:"mcom_kbank_integration_rollout")'},{alias:"show_payment_onboarding_context_card",args:[{kind:"Literal",name:"gk_name",value:"messenger_p2m_lite_merchant_onboarding"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Nc,storageKey:'gk_check(gk_name:"messenger_p2m_lite_merchant_onboarding")'}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[a,$c,dd,{alias:null,args:Hc,concreteType:"XFBMBSBusinessAssetsCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssetsCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,Rh,Bc,W,Sh,Xh,Th,Yc,B],storageKey:null},R],storageKey:null},Z],storageKey:"corp_labels(first:400)"},ed,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page_if_viewer_can_manage_permissions",plural:!1,selections:$,storageKey:null},fd,{alias:"is_in_kbank_rollout",args:hd,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:id,storageKey:'gk_check_page(gk_name:"mcom_kbank_integration_rollout")'}],storageKey:null}]}]}],storageKey:null},{alias:null,args:om,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null},{condition:"should3DContextCardSections",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sections",storageKey:null}]},{condition:"should3DContextCardSections",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"sections_renderers",plural:!0,selections:[B,{kind:"TypeDiscriminator",abstractKey:"__isXFBBizCRMContactSectionRenderer"},{alias:null,args:null,kind:"ScalarField",name:"section_enum",storageKey:null},a,{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardProfileSection3DWrapper_profile",fragmentPropName:"profile",kind:"ModuleImport"}],type:"XFBBizKitContextCardProfileSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardAboutDetailSection3DWrapper_about",fragmentPropName:"about",kind:"ModuleImport"}],type:"XFBBizKitContextCardAboutDetailSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardAboutSectionFacebook3DWrapper_details",fragmentPropName:"details",kind:"ModuleImport"}],type:"XFBBizKitContextCardAboutSectionFacebookRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardAboutSectionInstagram3DWrapper_details",fragmentPropName:"details",kind:"ModuleImport"}],type:"XFBBizKitContextCardAboutSectionInstagramRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardNotesSection3DWrapper_notes",fragmentPropName:"notes",kind:"ModuleImport"}],type:"XFBBizKitContextCardNotesSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardMediaSection3DWrapper_media",fragmentPropName:"media",kind:"ModuleImport"}],type:"XFBBizKitContextCardMediaSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardOrdersSection3DWrapper_orders",fragmentPropName:"orders",kind:"ModuleImport"}],type:"XFBBizKitContextCardOrdersSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardMessageSection3DWrapper_details",fragmentPropName:"details",kind:"ModuleImport"}],type:"XFBBizKitContextCardMessageSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextLabels3DWrapper_contactLabels",fragmentPropName:"contactLabels",kind:"ModuleImport"}],type:"XFBBizKitContextCardLabelsSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardActivitySection3DWrapper_activities",fragmentPropName:"activities",kind:"ModuleImport"}],type:"XFBBizKitContextCardActivitySectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardPaymentSection3DWrapper_payment",fragmentPropName:"payment",kind:"ModuleImport"}],type:"XFBBizKitMessengerOrdersContextCardSectionRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"BizKitContextCardSection3DWrapper_sections",fragmentName:"BizKitContextCardReminderSection3DWrapper_reminder",fragmentPropName:"reminder",kind:"ModuleImport"}],type:"XFBBizKitContextCardReminderRenderer",abstractKey:null}],storageKey:null}]}],storageKey:null}]}],storageKey:null},nm],storageKey:null},sm,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:Ha,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:om,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActions",kind:"LinkedField",name:"all_actions",plural:!1,selections:[{alias:null,args:Mc,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[B,{alias:"codeSplitWrapper",args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{args:null,documentName:"BizKitContextCardActivityListItem3DWrapper_BizCRMContactAction3DWrapper",fragmentName:"BizKitContextCardActivityListItem_node",fragmentPropName:"node",kind:"ModuleImport"}],storageKey:null}],storageKey:null},R],storageKey:null},N,Gc],storageKey:"actions(first:2)"},{alias:null,args:Mc,filters:null,handle:"connection",key:"BizKitContextCardActivityList_actions",kind:"LinkedHandle",name:"actions"},{alias:"interaction_count",args:null,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:vi,storageKey:null}],storageKey:null},a,Rc,Pc,{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[Kb],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_nux",storageKey:null},Wc,{alias:"adsDataSharingActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lc,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"ACTIVITY")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[Qc,a,{alias:"two_step_do_nux_tour_gk",args:[{kind:"Literal",name:"gk_name",value:"two_step_do_nux_tour"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Nc,storageKey:'gk_check(gk_name:"two_step_do_nux_tour")'}],storageKey:null},{alias:"adsDataSharingDetectedActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lc,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY")'}],storageKey:null},tm],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:om,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:jd,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:kd,storageKey:'gk_check(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"translationFix",args:[{kind:"Literal",name:"qe_universe",value:"tas_bizweb_translation_fix_universe"}],concreteType:"QECheck",kind:"LinkedField",name:"qe_check",plural:!1,selections:[{alias:"is_enabled",args:[{kind:"Literal",name:"bool_default",value:!1},{kind:"Literal",name:"param_name",value:"has_string_translation"}],kind:"ScalarField",name:"bool",storageKey:'bool(bool_default:false,param_name:"has_string_translation")'}],storageKey:'qe_check(qe_universe:"tas_bizweb_translation_fix_universe")'},{alias:"timelineActionsCheck",args:ld,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:nd,storageKey:'gk_check(gk_name:"ctm_www_tas_timeline_actions_gk")'},a],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:rm,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:jd,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:kd,storageKey:'gk_check_page(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"timelineActionsCheck",args:ld,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:nd,storageKey:'gk_check_page(gk_name:"ctm_www_tas_timeline_actions_gk")'},a],storageKey:null}]}]}]},params:{id:"9993770174072372",metadata:{},name:"BizInboxUnifiedThreadsQuery",operationKind:"query",text:null}}}();ba("relay-runtime").PreloadableQueryRegistry.set(aa.params.id,aa);ea.exports=aa}),null);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/9cisb7Fe7ih/
 */
__d("d3-axis-1.0.8",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?c(g):c(b.d3=b.d3||{})})(this,function(a){var b=Array.prototype.slice,c=function(a){return a},d=1,e=2,g=3,h=4,i=1e-6;function j(a){return"translate("+(a+.5)+",0)"}function k(a){return"translate(0,"+(a+.5)+")"}function l(a){return function(b){return+a(b)}}function m(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return+a(c)+b}}function n(){return!this.__axis}function o(f,p){var q=[],r=null,s=null,t=6,u=6,v=3,w=f===d||f===h?-1:1,x=f===h||f===e?"x":"y",y=f===d||f===g?j:k;function a(a){var b=r==null?p.ticks?p.ticks.apply(p,q):p.domain():r,j=s==null?p.tickFormat?p.tickFormat.apply(p,q):c:s,k=Math.max(t,0)+v,o=p.range(),z=+o[0]+.5;o=+o[o.length-1]+.5;var A=(p.bandwidth?m:l)(p.copy()),B=a.selection?a.selection():a,C=B.selectAll(".domain").data([null]);b=B.selectAll(".tick").data(b,p).order();var D=b.exit(),E=b.enter().append("g").attr("class","tick"),F=b.select("line"),G=b.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));b=b.merge(E);F=F.merge(E.append("line").attr("stroke","#000").attr(x+"2",w*t));G=G.merge(E.append("text").attr("fill","#000").attr(x,w*k).attr("dy",f===d?"0em":f===g?"0.71em":"0.32em"));a!==B&&(C=C.transition(a),b=b.transition(a),F=F.transition(a),G=G.transition(a),D=D.transition(a).attr("opacity",i).attr("transform",function(a){return isFinite(a=A(a))?y(a):this.getAttribute("transform")}),E.attr("opacity",i).attr("transform",function(a){var b=this.parentNode.__axis;return y(b&&isFinite(b=b(a))?b:A(a))}));D.remove();C.attr("d",f===h||f==e?"M"+w*u+","+z+"H0.5V"+o+"H"+w*u:"M"+z+","+w*u+"V0.5H"+o+"V"+w*u);b.attr("opacity",1).attr("transform",function(a){return y(A(a))});F.attr(x+"2",w*t);G.attr(x,w*k).text(j);B.filter(n).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",f===e?"start":f===h?"end":"middle");B.each(function(){this.__axis=A})}a.scale=function(b){return arguments.length?(p=b,a):p};a.ticks=function(){return q=b.call(arguments),a};a.tickArguments=function(c){return arguments.length?(q=c==null?[]:b.call(c),a):q.slice()};a.tickValues=function(c){return arguments.length?(r=c==null?null:b.call(c),a):r&&r.slice()};a.tickFormat=function(b){return arguments.length?(s=b,a):s};a.tickSize=function(b){return arguments.length?(t=u=+b,a):t};a.tickSizeInner=function(b){return arguments.length?(t=+b,a):t};a.tickSizeOuter=function(b){return arguments.length?(u=+b,a):u};a.tickPadding=function(b){return arguments.length?(v=+b,a):v};return a}function p(a){return o(d,a)}function q(a){return o(e,a)}function r(a){return o(g,a)}function s(a){return o(h,a)}a.axisTop=p;a.axisRight=q;a.axisBottom=r;a.axisLeft=s;Object.defineProperty(a,"__esModule",{value:!0})})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function w(a,b){if(typeof b==="string"&&l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d==null?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ca(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function da(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var ea=[].concat;function fa(a){return ea.apply([],a)}var y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fa([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ga=new Set(y.map(function(a){return f[a]}));function ha(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ga.has(d.constructor)?d:ha(d)}return b}function ia(a){for(var b in a)if(l(a,b))return!1;return!0}var ja=null;function z(a){ja=new WeakMap();a=ka(a);ja=null;return a}function ka(a){if(!a||typeof a!=="object")return a;var b=ja.get(a);if(b)return b;if(h(a)){b=[];ja.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ka(a[c]))}else if(ga.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ja.set(a,b);for(d in a)l(a,d)&&(b[d]=ka(a[d]))}return b}var la={}.toString;function ma(a){return la.call(a).slice(8,-1)}var na=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",oa=typeof na==="symbol"?function(a){var b;return a!=null&&(b=a[na])&&b.apply(a)}:function(){return null};function A(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var pa={};function B(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===pa&&typeof a==="string")return[a];if(e=oa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var qa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1};y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function sa(a,b){this.name=a,this.message=b}p(sa).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ta(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function ua(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=ta(a,b)}p(ua).from(sa);function va(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=ta(a,this.failures)}p(va).from(sa);var wa=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),xa=sa,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this.name=d,!a?(this.message=ra[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(xa);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var ya=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function za(a,b){if(!a||a instanceof sa||a instanceof TypeError||a instanceof SyntaxError||!a.name||!ya[a.name])return a;b=new ya[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=ua;C.DexieError=sa;C.BulkError=va;function E(){}function Aa(a){return a}function Ba(a,b){return a==null||a===Aa?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ca(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Da(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ea(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Fa(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ga(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var G=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ha(a,b){G=a}var Ia={},Ja=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ka=y[0],H=y[1];y=y[2];H=H&&H.then;var La=Ka&&Ka.constructor,Ma=!!y;function Na(){queueMicrotask(db)}var Oa=function(a,b){Ua.push([a,b]),Qa&&(Na(),Qa=!1)},Pa=!0,Qa=!0,Ra=[],Sa=[],Ta=Aa,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E,pgp:!1,env:{},finalize:E},J=I,Ua=[],Va=0,Wa=[];function K(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;if(typeof a!=="function"){if(a!==Ia)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&$a(this,this._value);return}this._state=null;this._value=null;++b.ref;Za(this,a)}var Xa={get:function(){var a=J,b=ob;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==ob),g=f&&!O(),h=new K(function(b,h){bb(e,new Ya(wb(c,a,f,g),wb(d,a,f,g),b,h,a))});this._consoleTask&&(h._consoleTask=this._consoleTask);return h}c.prototype=Ia;return c},set:function(a){o(this,"then",a&&a.prototype===Ia?Xa:{get:function(){return a},set:Xa.set})}};m(K.prototype,{then:Xa,_then:function(a,b){bb(this,new Ya(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):kb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):kb(b)})},"finally":function(a){return this.then(function(b){return K.resolve(a()).then(function(){return b})},function(b){return K.resolve(a()).then(function(){return kb(b)})})},timeout:function(a,b){var c=this;return a<Infinity?new K(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(K.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=ub();function Ya(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(K,{all:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return K.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof K)return a;if(a&&typeof a.then==="function")return new K(function(b,c){a.then(b,c)});var b=new K(Ia,!0,a);return b},reject:kb,race:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.map(function(a){return K.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return ob}},newPSD:N,usePSD:vb,scheduler:{get:function(){return Oa},set:function(a){Oa=a}},rejectionMapper:{get:function(){return Ta},set:function(a){Ta=a}},follow:function(a,b){return new K(function(c,d){return N(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;hb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});La&&(La.allSettled&&o(K,"allSettled",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return K.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),La.any&&typeof AggregateError!=="undefined"&&o(K,"any",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return K.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function Za(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&eb();b&&typeof b.then==="function"?Za(a,function(a,c){b instanceof K?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,ab(a));c&&fb()},$a.bind(null,a))}catch(b){$a(a,b)}}function $a(a,b){Sa.push(b);if(a._state!==null)return;var c=a._lib&&eb();b=Ta(b);a._state=!1;a._value=b;ib(a);ab(a);c&&fb()}function ab(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)bb(a,b[c]);c=a._PSD;--c.ref||c.finalize();Va===0&&(++Va,Oa(function(){--Va===0&&gb()},[]))}function bb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++Va;Oa(cb,[c,a,b])}function cb(a,b,c){try{var d,e=b._value;!b._state&&Sa.length&&(Sa=[]);d=G&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e);!b._state&&Sa.indexOf(e)===-1&&jb(b);c.resolve(d)}catch(a){c.reject(a)}finally{--Va===0&&gb(),--c.psd.ref||c.psd.finalize()}}function db(){vb(I,function(){eb()&&fb()})}function eb(){var a=Pa;Pa=!1;Qa=!1;return a}function fb(){var a,b,c;do while(Ua.length>0){a=Ua;Ua=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(Ua.length>0);Pa=!0;Qa=!0}function gb(){var a=Ra;Ra=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=Wa.slice(0);var b=a.length;while(b)a[--b]()}function hb(a){function b(){a(),Wa.splice(Wa.indexOf(b),1)}Wa.push(b);++Va;Oa(function(){--Va===0&&gb()},[])}function ib(a){Ra.some(function(b){return b._value===a._value})||Ra.push(a)}function jb(a){var b=Ra.length;while(b)if(Ra[--b]._value===a._value){Ra.splice(b,1);return}}function kb(a){return new K(Ia,!1,a)}function L(a,b){var c=J;return function(){var d=eb(),e=J;try{P(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{P(e,!1),d&&fb()}}}var M={awaits:0,echoes:0,id:0},lb=0,mb=[],nb=0,ob=0,pb=0;function N(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++pb;I.env;f.env=Ma?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};a=vb(f,b,c,d);f.ref===0&&f.finalize();return a}function qb(){M.id||(M.id=++lb);++M.awaits;M.echoes+=Ja;return M.id}function O(){if(!M.awaits)return!1;--M.awaits===0&&(M.id=0);M.echoes=M.awaits*Ja;return!0}(""+H).indexOf("[native code]")===-1&&(qb=O=E);function rb(a){if(M.echoes&&a&&a.constructor===La){qb();return a.then(function(a){O();return a},function(a){O();return Q(a)})}return a}function sb(a){++ob,(!M.echoes||--M.echoes===0)&&(M.echoes=M.awaits=M.id=0),mb.push(J),P(a,!0)}function tb(){var a=mb[mb.length-1];mb.pop();P(a,!1)}function P(a,b){var c=J;(b?M.echoes&&(!nb++||a!==J):nb&&(!--nb||a!==J))&&queueMicrotask(b?sb.bind(null,a):tb);if(a===J)return;J=a;c===I&&(I.env=ub());if(Ma){b=I.env.Promise;var d=a.env;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function ub(){var a=f.Promise;return Ma?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function vb(a,b,c,d,e){var f=J;try{P(a,!0);return b(c,d,e)}finally{P(f,!1)}}function wb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&qb();P(b,!0);try{return a.apply(this,arguments)}finally{P(e,!1),d&&queueMicrotask(O)}}}function xb(a){Promise===La&&M.echoes===0?nb===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Q=K.reject;function yb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return Q(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Q(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return yb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return yb(a,b,c,d)})}return Q(e)}return e._promise(b,function(a,b){return N(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}Ka="4.0.1";var zb=String.fromCharCode(65535),Ab=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bb="String expected.",Cb=[],Db="__dbnames",Eb="readonly",Fb="readwrite";function Gb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Hb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ib(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function Jb(){throw D.Type()}function S(a,b){try{var c=Mb(a),d=Mb(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return Lb(Nb(a),Nb(b));case"Array":return Kb(a,b)}}catch(a){}return NaN}function Kb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=S(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function Lb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function Mb(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ma(a);return b==="ArrayBuffer"?"binary":b}function Nb(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ob=function(){function a(){}a.prototype._trans=function(b,c,d){var e=this._tx||J.trans,f=this.name,a=G&&typeof console!=="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function g(b,d,a){if(!a.schema[f])throw new D.NotFound("Table "+f+" not part of transaction");return c(a.idbtrans,a)}var h=eb();try{var i=e&&e.db._novip===this.db._novip?e===J.trans?e._promise(b,g,d):N(function(){return e._promise(b,g,d)},{trans:e,transless:J.transless||J}):yb(this.db,b,[this.name],g);a&&(i._consoleTask=a,i=i["catch"](function(a){console.trace(a);return Q(a)}));return i}finally{h&&fb()}};a.prototype.get=function(a,b){var c=this;if(a&&a.constructor===Object)return this.where(a).first(b);return a==null?Q(new D.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==zb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&G&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Gb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof Jb&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?Q(new D.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Hb})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(S(m,d)!==0)throw new D.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new va("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new va("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function Pb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=Fa);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Aa,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Qb(a,b){p(b).from({prototype:a});return b}function Rb(a){return Qb(Ob.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Pb(null,{creating:[Ca,E],reading:[Ba,Aa],updating:[Ea,E],deleting:[Da,E]})})}function Sb(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function Tb(a,b){a.filter=Gb(a.filter,b)}function Ub(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Gb(d(),b())}:b;a.justLimit=c&&!d}function Vb(a,b){a.isMatch=Gb(a.isMatch,b)}function Wb(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function Xb(a,b,c){var d=Wb(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function Yb(a,b,c,d){var e=a.replayFilter?Gb(a.filter,a.replayFilter()):a.filter;if(!a.or)return Zb(Xb(a,d,c),Gb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),Zb(Xb(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function Zb(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=L(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}y=Symbol();var $b=function(){function a(a){Object.assign(this,a)}a.prototype.execute=function(a){var b;b=(b=this.replacePrefix)===null||b===void 0?void 0:b[0];return b&&typeof a==="string"&&a.startsWith(b)?this.replacePrefix[1]+a.substring(b.length):a};return a}(),ac=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,Q.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,Q.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Gb(b.algorithm,a)};a.prototype._iterate=function(a,b){return Yb(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return Yb(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(Sb(c,!0))return d.count({trans:a,query:{index:Wb(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return Yb(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&Sb(c,!0)&&c.limit>0){var d=c.valueMapper,e=Wb(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return Yb(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;Sb(b)?Ub(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):Ub(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);Ub(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){Tb(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){Tb(this._ctx,function(b){return a(b.value)});Vb(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&Sb(b,!0)&&b.limit>0)return this._read(function(a){var c=Wb(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};Tb(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e],i=w(b,e);g instanceof $b?(x(b,e,g.execute(i)),c=!0):i!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&S(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=Sb(c)&&c.limit===Infinity&&(typeof a!=="function"||a===bc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===bc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new ua("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return Sb(a)&&(a.isPrimKey||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new ua("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(bc)};return a}(),bc=function(a,b){return b.value=null};function cc(a){return Qb(ac.prototype,function(b,c){this.db=a;var d=Hb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Aa?f:null}})}function dc(a,b){return a<b?-1:a===b?0:1}function ec(a,b){return a>b?-1:a===b?0:1}function T(a,b,c){a=a instanceof lc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function fc(a){return new a.Collection(a,function(){return kc("")}).limit(0)}function gc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function hc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function ic(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function jc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return T(a,Bb);function m(a){e=gc(a);f=hc(a);g=a==="next"?dc:ec;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return U(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=ic(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function U(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function kc(a){return{type:1,lower:a,upper:a}}var lc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?fc(this):new this.Collection(this,function(){return U(a,b,!c,!d)})}catch(a){return T(this,R)}};a.prototype.equals=function(a){return a==null?T(this,R):new this.Collection(this,function(){return kc(a)})};a.prototype.above=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!1)})};a.prototype.below=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?T(this,Bb):this.between(a,a+zb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):jc(this,function(a,b){return a.indexOf(b[0])===0},[a],zb)};a.prototype.equalsIgnoreCase=function(a){return jc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,zb)};a.prototype.anyOf=function(){var a=this,b=B.apply(pa,arguments),c=this._cmp;try{b.sort(c)}catch(a){return T(this,R)}if(b.length===0)return fc(this);var d=new this.Collection(this,function(){return U(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Ab,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=B.apply(pa,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return T(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Ab,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return fc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return T(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return T(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return U(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=B.apply(pa,arguments);if(!a.every(function(a){return typeof a==="string"}))return T(this,"startsWithAnyOf() only works with strings");return a.length===0?fc(this):this.inAnyRange(a.map(function(a){return[a,a+zb]}))};return a}();function mc(a){return Qb(lc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=S;this._descending=function(a,b){return S(b,a)};this._max=function(a,b){return S(a,b)>0?a:b};this._min=function(a,b){return S(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new D.MissingAPI()})}function V(a){return L(function(b){nc(b);a(b.target.error);return!1})}function nc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var oc="storagemutated",pc="x-storagemutated-1",W=Pb(null,oc),qc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{vb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=L(function(c){nc(c),b._reject(a.error)});a.onabort=L(function(c){nc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=L(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&W.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return Q(new D.ReadOnly("Transaction is readonly"));if(!this.active)return Q(new D.TransactionInactive());if(this._locked())return new K(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return N(function(){var a=new K(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new K(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=K.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new K(function(a,d){c.then(function(c){return b._waitingQueue.push(L(a.bind(null,c)))},function(a){return b._waitingQueue.push(L(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function rc(a){return Qb(qc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Pb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new K(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return Q(a)})})}function sc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+tc(b)}}function tc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function uc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function vc(a){return a.length===1?a[0]:a}var wc=function(a){try{a.only([[]]);wc=function(){return[[]]};return[[]]}catch(a){wc=function(){return zb};return zb}};function xc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return yc(a);else return function(b){return w(b,a)}}function yc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function zc(a){return[].slice.call(a)}var Ac=0;function Bc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Cc(a,b,c){function d(a,b){var c=zc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:xc(b)},indexes:zc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:xc(b)};f[Bc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Bc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Bc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=L(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,nc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=L(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=V(i);m.onsuccess=L(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Ac;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=L(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=L(a),m.onerror=V(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=L(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=L(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=V(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=V(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=L(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=V(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=L(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=V(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=L(function(b){return a(b.target.result)});i.onerror=V(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:wc(b),schema:c}}function Dc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Ec(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Dc(Cc(b,e,d),a.dbcore);return{dbcore:c}}function Fc(a,b){var c=b.db;c=Ec(a._middlewares,c,a._deps,b);a.core=c.dbcore;a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function Gc(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=r(b,c);(!d||"value"in d&&d.value===void 0)&&(b===a.Transaction.prototype||b instanceof a.Transaction?o(b,c,{get:function(){return this.table(c)},set:function(a){n(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function Hc(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function Ic(a,b){return a._cfg.version-b._cfg.version}function Jc(a,b,c,d){var e=a._dbSchema;c.objectStoreNames.contains("$meta")&&!e.$meta&&(e.$meta=uc("$meta",Wc("")[0],[]),a._storeNames.push("$meta"));var f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;N(function(){J.trans=f;J.transless=i;if(b===0)g(e).forEach(function(a){Oc(c,a,e[a].primKey,e[a].indexes)}),Fc(a,c),K.follow(function(){return a.on.populate.fire(f)})["catch"](h);else{Fc(a,c);return Lc(a,f,b).then(function(b){return Mc(a,b,f,c)})["catch"](h)}})}function Kc(a,b){Pc(a._dbSchema,b);b.db.version%10===0&&!b.objectStoreNames.contains("$meta")&&b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=Sc(a,a.idbdb,b);Vc(a,a._dbSchema,b);c=Nc(c,a._dbSchema);a=function(a){if(a.change.length||a.recreate)return{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(a){G&&!1,Rc(c,a)})};for(var d=0,c=c.change;d<c.length;d++){var e=c[d];e=a(e);if(typeof e==="object")return e.value}}function Lc(a,b,c){if(b.storeNames.includes("$meta"))return b.table("$meta").get("version").then(function(a){return a!=null?a:c});else return K.resolve(c)}function Mc(a,b,c,d){var e=[],f=a._versions,h=a._dbSchema=Sc(a,a.idbdb,d);f=f.filter(function(a){return a._cfg.version>=b});if(f.length===0)return K.resolve();f.forEach(function(f){e.push(function(){var e=h,i=f._cfg.dbschema;Vc(a,e,d);Vc(a,i,d);h=a._dbSchema=i;var j=Nc(e,i);j.add.forEach(function(a){Oc(d,a[0],a[1].primKey,a[1].indexes)});j.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return Rc(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),Rc(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var k=f._cfg.contentUpgrade;if(k&&f._cfg.version>b){Fc(a,d);c._memoizedTables={};var l=da(i);j.del.forEach(function(a){l[a]=e[a]});Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],g(l),l);c.schema=l;var m=qa(k);m&&qb();var n;i=K.follow(function(){n=k(c);if(n&&m){var a=O.bind(null,null);n.then(a,a)}});return n&&typeof n.then==="function"?K.resolve(n):i.then(function(){return n})}}),e.push(function(b){var d=f._cfg.dbschema;Qc(d,b);Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema);c.schema=a._dbSchema}),e.push(function(b){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===f._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return a!=="$meta"})):b.objectStore("$meta").put(f._cfg.version,"version"))})});function i(){return e.length?K.resolve(e.shift()(c.idbtrans)).then(i):K.resolve()}return i().then(function(){Pc(h,d)})}function Nc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Oc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return Rc(e,a)});return e}function Pc(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(G&&!1,Oc(b,c,a[c].primKey,a[c].indexes))})}function Qc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function Rc(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Sc(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=sc(tc(e),e||"",!0,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=sc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=uc(a,f,g)});return d}function Tc(a,b,c){a.verno=b.version/10;c=a._dbSchema=Sc(a,b,c);a._storeNames=t(b.objectStoreNames,0);Gc(a,[a._allTables],g(c),c)}function Uc(a,b){b=Sc(a,a.idbdb,b);b=Nc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function Vc(a,b,c){var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Wc(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return sc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var Xc=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=Wc(a[c]),e=d.shift();e.unique=!0;if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=uc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Hc(b,[b._allTables,b,b.Transaction.prototype]);Gc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ga(this._cfg.contentUpgrade||E,a);return this};return a}();function Yc(a){return Qb(Xc.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zc(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Y(Db,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function $c(a){return a&&typeof a.databases==="function"}function ad(a){var b=a.indexedDB;a=a.IDBKeyRange;return $c(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Db})}):Zc(b,a).toCollection().primaryKeys()}function bd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a).put({name:b})["catch"](E)}function cd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a)["delete"](b)["catch"](E)}function dd(a){return N(function(){J.letThrough=!0;return a()})}function ed(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function fd(a){return!("from"in a)}var X=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new X();a&&"d"in a&&i(c,a);return c}};m(X.prototype,(H={add:function(a){hd(this,a);return this},addKey:function(a){gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return gd(b,a,a)});return this}},H[na]=function(){return jd(this)},H));function gd(a,b,c){var d=S(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(S(c,a.from)<0){d?gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return kd(a)}if(S(b,a.to)>0){e?gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return kd(a)}S(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);S(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&hd(a,d);e&&b&&hd(a,e)}function hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;gd(a,d,e);f&&c(a,f);b&&c(a,b)}fd(b)||c(a,b)}function id(a,b){b=jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(S(f.from,d.to)<=0&&S(f.to,d.from)>=0)return!0;S(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function jd(a){var b=fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&S(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||S(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=ld(e)}a.d=ld(a)}function ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function md(a,b){g(b).forEach(function(c){a[c]?hd(a[c],b[c]):a[c]=ha(b[c])});return a}function nd(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&id(b[c],a[c])})}var od={},pd={},qd=!1;function rd(a,b){md(pd,a),qd||(qd=!0,setTimeout(function(){qd=!1;var a=pd;pd={};sd(a,!1)},0))}function sd(a,b){b===void 0&&(b=!1);var c=new Set();if(a.all)for(var d=0,e=Object.values(od);d<e.length;d++){var f=e[d];td(f,a,c,b)}else for(e in a){d=/^idb\:\/\/(.*)\/(.*)\//.exec(e);if(d){var g=d[1];d=d[2];var f=od["idb://".concat(g,"/").concat(d)];f&&td(f,a,c,b)}}c.forEach(function(a){return a()})}function td(a,b,c,d){var e=[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=[];for(var k=0,h=h;k<h.length;k++){var l=h[k];nd(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ud(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Q(b.dbOpenError):a});b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller,e=Math.round(a.verno*10),f=!1;function g(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var h=b.dbReadyResolve,i=null,j=!1,k=function(){return new K(function(d,h){g();if(!c)throw new D.MissingAPI();var l=a.name,m=b.autoSchema||!e?c.open(l):c.open(l,e);if(!m)throw new D.MissingAPI();m.onerror=V(h);m.onblocked=L(a._fireOnBlocked);m.onupgradeneeded=L(function(d){i=m.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){m.onerror=nc;i.abort();m.result.close();var e=c.deleteDatabase(l);e.onsuccess=e.onerror=L(function(){h(new D.NoSuchDatabase("Database ".concat(l," doesnt exist")))})}else{i.onerror=V(h);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;j=e<1;a.idbdb=m.result;f&&Kc(a,i);Jc(a,e/10,i,h)}},h);m.onsuccess=L(function(){i=null;var c=a.idbdb=m.result,g=t(c.objectStoreNames);if(g.length>0)try{g=c.transaction(vc(g),"readonly");if(b.autoSchema)Tc(a,c,g);else{Vc(a,a._dbSchema,g);if(!Uc(a,g)&&!f){c.close();e=c.version+1;f=!0;return d(k())}}Fc(a,g)}catch(a){}Cb.push(a);c.onversionchange=L(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=L(function(b){a.on("close").fire(b)});j&&bd(a._deps,l);d()},h)})["catch"](function(a){switch(a===null||a===void 0?void 0:a.name){case"UnknownError":if(b.PR1398_maxLoop>0){b.PR1398_maxLoop--;return k()}break;case"VersionError":if(e>0){e=0;return k()}break}return K.reject(a)})};return K.race([d,(typeof navigator==="undefined"?K.resolve():ed()).then(k)]).then(function(){g();b.onReadyBeingFired=[];return K.resolve(dd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ga,E);b.onReadyBeingFired=[];return K.resolve(dd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)})["catch"](function(c){b.dbOpenError=c;try{i&&i.abort()}catch(a){}d===b.openCanceller&&a._close();return Q(c)})["finally"](function(){b.openComplete=!0,h()}).then(function(){if(j){var b={};a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new X(-Infinity,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new X(-Infinity,[[[]]])});W(oc).fire(b);sd(b,!0)}return a})}function vd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function wd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=fa(e);return[a,f,c]}function xd(a,b,c,d,e){return K.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(d){if(d.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return xd(a,b,c,null,e)})}return Q(d)}var h=qa(e);h&&qb();var i;f=K.follow(function(){i=e.call(g,g);if(i)if(h){var a=O.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=vd(i))},f);return(i&&typeof i.then==="function"?K.resolve(i).then(function(a){return g.active?a:Q(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return Q(a)})})}function yd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function zd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Bc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:xc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Bc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:yd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:yd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](yd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(yd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var Ad={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zd};function Bd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ma(f),i=ma(g);h!==i?c[d+e]=b[e]:h==="Object"?Bd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Cd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Dd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===E&&k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Cd(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Ed(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=Bd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Ed(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Fd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(S(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Gd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Fd(a.keys,a.trans._cache,a.cache==="clone");return b?K.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Hd(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Id(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Jd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new X(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(J.subscr&&c!=="readonly")throw new D.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new X())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Cd(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);d=d==="delete"||a.length===p.length?Fd(a,q):null;d||o.addKeys(a);(d||p)&&Kd(m,i,d,p)}else if(a){q={from:a.lower,to:a.upper};o.add(q);n.add(q)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=md(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new X((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new X(a.key)]},getMany:function(a){return[j,new X().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Hd(J,f)&&Id(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new X())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];a==="query"&&s.isPrimaryKey&&!g.values?q.add(t):n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Kd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);S(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Ld(a,b,c){if(c.numFailures===0)return b;if(b.type==="deleteRange")return null;a=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;if(c.numFailures===a)return null;a=d({},b);h(a.keys)&&(a.keys=a.keys.filter(function(a,b){return!(b in c.failures)}));"values"in a&&h(a.values)&&(a.values=a.values.filter(function(a,b){return!(b in c.failures)}));return a}function Md(a,b){return b.lower===void 0?!0:b.lowerOpen?S(a,b.lower)>0:S(a,b.lower)>=0}function Nd(a,b){return b.upper===void 0?!0:b.upperOpen?S(a,b.upper)<0:S(a,b.upper)<=0}function Od(a,b){return Md(a,b)&&Nd(a,b)}function Pd(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index,i=g.multiEntry,j=b.query.range;d=d.schema.primaryKey;var k=d.extractKey,l=g.extractKey,m=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){a=l(a);return i&&h(a)?a.some(function(a){return Od(a,j)}):Od(a,j)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return k(a)}));break;case"put":var g=new X().addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),g)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var m=new X().addKeys(c.keys);d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),m)});break;case"deleteRange":var n=c.range;d=a.filter(function(a){return!Od(k(a),n)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return S(m(a),m(b))||S(k(a),k(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}function Qd(a,b){return S(a.lower,b.lower)===0&&S(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Rd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Sd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Td(a,b){return Rd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Sd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function Ud(b,c,a,d){b=od["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Qd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Td(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Qd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function Vd(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&Wd(a,b)})}function Wd(a,b){setTimeout(function(){a.subscribers.size===0&&A(b,a)},3e3)}var Xd={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=od["idb://".concat(b,"/").concat(k)];if(l){k=a.table(k);var m=l.optimisticOps.filter(function(a){return a.trans===f});if(f._explicit&&e&&f.mutatedParts)for(var n=0,o=Object.values(l.queries.query);n<o.length;n++){var p=o[n];for(var q=0,r=p.slice();q<r.length;q++){var s=r[q];nd(s.obsSet,f.mutatedParts)&&(A(p,s),s.subscribers.forEach(function(a){return h.add(a)}))}}else if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(q=0,r=Object.values(l.queries.query);q<r.length;q++){var p=r[q];for(n=0,o=p.slice();n<o.length;n++){var s=o[n];if(s.res!=null&&f.mutatedParts)if(e&&!s.dirty){l=Object.isFrozen(s.res);l=Pd(s.res,s.req,m,k,s,l);s.dirty?(A(p,s),s.subscribers.forEach(function(a){return h.add(a)})):l!==s.res&&(s.res=l,s.promise=K.resolve({result:l}))}else s.dirty&&A(p,s),s.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){var g=J.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit)return e.mutate(a);var h=od["idb://".concat(b,"/").concat(c)];if(!h)return e.mutate(a);g=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Cd(f,a).some(function(a){return a==null}))?g.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){var e;e=((e=f.keyPath)===null||e===void 0?void 0:e.includes("."))?z(a):d({},a);x(e,f.keyPath,b.results[c]);return e})});c=Ld(h,c,b);h.optimisticOps.push(c);queueMicrotask(function(){return a.mutatedParts&&rd(a.mutatedParts)})}):(h.optimisticOps.push(a),a.mutatedParts&&rd(a.mutatedParts),g.then(function(b){if(b.numFailures>0){A(h.optimisticOps,a);b=Ld(h,a,b);b&&h.optimisticOps.push(b);a.mutatedParts&&rd(a.mutatedParts)}}),g["catch"](function(){A(h.optimisticOps,a),a.mutatedParts&&rd(a.mutatedParts)}));return g},query:function(a){var d;if(!Hd(J,e)||!Id("query",a))return e.query(a);var f=((d=J.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable";d=J;var g=d.requery;d=d.signal;var h=Ud(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i&&(i.res=b);if(f){for(var c=0,d=b.length;c<d;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&A(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=od["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}Vd(i,l,g,d);return i.promise.then(function(b){return{result:Pd(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,f)}})}});return g}});return c}};function Yd(a,b){return new Proxy(a,{get:function(a,c,d){return c==="db"?b:Reflect.get(a,c,d)}})}var Y=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};g.dbReadyPromise=new K(function(a){g.dbReadyResolve=a});g.openCanceller=new K(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=Pb(this,"populate","blocked","versionchange","close",{ready:[Ga,E]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||K.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=cc(this);this.Table=Rb(this);this.Transaction=rc(this);this.Version=Yc(this);this.WhereClause=mc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close({disableAutoOpen:!1})});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=wc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Cb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Gd);this.use(Xd);this.use(Jd);this.use(Ad);this.use(Dd);var h=new Proxy(this,{get:function(a,b,c){if(b==="_vip")return!0;if(b==="table")return function(a){return Yd(e.table(a),h)};var d=Reflect.get(a,b,c);if(d instanceof Ob)return Yd(d,h);if(b==="tables")return d.map(function(a){return Yd(a,h)});return b==="_createTransaction"?function(){var a=d.apply(this,arguments);return Yd(a,h)}:d}});this.vip=h;f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Ic);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new K(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return vb(I,function(){return ud(a)})};a.prototype._close=function(){var a=this._state,b=Cb.indexOf(this);b>=0&&Cb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new K(function(b){a.dbReadyResolve=b}),a.openCanceller=new K(function(b,c){a.cancelOpen=c}))};a.prototype.close=function(a){a=a===void 0?{disableAutoOpen:!0}:a;a=a.disableAutoOpen;var b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new D.DatabaseClosed()),this._close(),b.autoOpen=!1,b.dbOpenError=new D.DatabaseClosed()):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)};a.prototype["delete"]=function(a){var b=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!=="object",d=this._state;return new K(function(e,f){var g=function(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=L(function(){cd(b._deps,b.name),e()});c.onerror=V(f);c.onblocked=b._fireOnBlocked};if(c)throw new D.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=wd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Eb)g=Eb;else if(a=="rw"||a==Fb)g=Fb;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Eb&&g===Fb)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):Q(a)}var i=xd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?vb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new D.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),Zd=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",$d=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Zd]=function(){return this};return a}(),ae;try{ae={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){ae={indexedDB:null,IDBKeyRange:null}}function be(a){var b=!1,c,d=new $d(function(d){var e=qa(a);function f(b){var c=eb();try{e&&qb();b=N(a,b);e&&(b=b["finally"](O));return b}finally{c&&fb()}}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&W.storagemutated.unsubscribe(o)}};d.start&&d.start(k);var l=!1,m=function(){return xb(p)};function n(){return nd(j,i)}var o=function(a){md(i,a),n()&&m()},p=function(){if(g||!ae.indexedDB)return;i={};var e={};h&&h.abort();h=new AbortController();var k={subscr:e,signal:h.signal,requery:m,querier:a,trans:null},n=f(k);Promise.resolve(n).then(function(a){b=!0;c=a;if(g||k.signal.aborted)return;i={};j=e;!ia(j)&&!l&&(W(oc,o),l=!0);xb(function(){return!g&&d.next&&d.next(a)})},function(a){b=!1,["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)||(g||xb(function(){if(g)return;d.error&&d.error(a)}))})};setTimeout(m,0);return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var ce=Y;m(ce,d(d({},C),{"delete":function(a){a=new ce(a,{addons:[]});return a["delete"]()},exists:function(a){return new ce(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ad(ce.dependencies).then(a)}catch(a){return Q(new D.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?vb(J.transless,a):a()},vip:dd,async:function(a){return function(){try{var b=vd(a.apply(this,arguments));return!b||typeof b.then!=="function"?K.resolve(b):b}catch(a){return Q(a)}}},spawn:function(a,b,c){try{a=vd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?K.resolve(a):a}catch(a){return Q(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=K.resolve(typeof a==="function"?ce.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:K,debug:{get:function(){return G},set:function(a){Ha(a)}},derive:p,extend:i,props:m,override:u,Events:Pb,on:W,liveQuery:be,extendObservabilitySet:md,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ca,shallowClone:da,deepClone:z,getObjectDiff:Bd,cmp:S,asap:aa,minKey:Ab,addons:[],connections:Cb,errnames:wa,dependencies:ae,cache:od,semVer:Ka,version:Ka.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));ce.maxKey=wc(ce.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(W(oc,function(a){if(!Z){a=new CustomEvent(pc,{detail:a});Z=!0;dispatchEvent(a);Z=!1}}),addEventListener(pc,function(a){a=a.detail;Z||de(a)}));function de(a){var b=Z;try{Z=!0,W.storagemutated.fire(a),sd(a,!0)}finally{Z=b}}var Z=!1,$,ee=function(){};typeof BroadcastChannel!=="undefined"&&(ee=function(){$=new BroadcastChannel(pc),$.onmessage=function(a){return a.data&&de(a.data)}},ee(),typeof $.unref==="function"&&$.unref(),W(oc,function(a){Z||$.postMessage(a)}));typeof addEventListener!=="undefined"&&(addEventListener("pagehide",function(a){if(!Y.disableBfCache&&a.persisted){G&&!1;$===null||$===void 0?void 0:$.close();for(var a=0,b=Cb;a<b.length;a++){var c=b[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Y.disableBfCache&&a.persisted&&(G&&!1,ee(),de({all:new X(-Infinity,[[]])}))}));function fe(a,b){return new $b({replacePrefix:[a,b]})}K.rejectionMapper=za;Ha(G);H=Object.freeze({__proto__:null,Dexie:Y,liveQuery:be,Entity:Jb,cmp:S,PropModSymbol:y,PropModification:$b,replacePrefix:fe,"default":Y,RangeSet:X,mergeRanges:hd,rangesOverlap:id});d(Y,H,{"default":Y});return Y})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(a,b,c,d,e,f){e.exports=b("dexie-4.0.1")()}),null);/*FB_PKG_DELIM*/
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","Dsp2BaseThemeContext.react","Dsp2BaseThemeGated.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","react-compiler-runtime","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};function a(a){var b=d("react-compiler-runtime").c(12),e=a.ariaLabelledBy,f=a.children,g=a.ref,h=a.role,l=a.testid,m=a.themeConfig,n=a.useInvertedDisplayMode;a=a.xstyle;var o=c("useCurrentDisplayMode")();o=o==="dark"?"light":"dark";var p=j(c("Dsp2BaseThemeContext.react"));b[0]!==e||b[1]!==f||b[2]!==p||b[3]!==o||b[4]!==h||b[5]!==l||b[6]!==m||b[7]!==n||b[8]!==a?(g=n?c("Dsp2BaseThemeGated.react")?i.jsx(c("Dsp2BaseThemeGated.react"),{"aria-labelledby":e,displayMode:o,ref:g,role:h,testid:void 0,themes:p,xstyle:a,children:f}):i.jsx(c("BaseTheme.react"),{"aria-labelledby":e,config:m!=null?m:k,displayMode:o,ref:g,role:h,testid:void 0,xstyle:a,children:f}):i.jsx(c("BaseView.react"),{"aria-labelledby":e,ref:g,role:h,testid:void 0,xstyle:a,children:f}),b[0]=e,b[1]=f,b[2]=p,b[3]=o,b[4]=h,b[5]=l,b[6]=m,b[7]=n,b[8]=a,b[9]=g):g=b[9];e=g;b[10]!==e?(f=d("basePushToast").passesNewToastAPIGK()?i.jsx(c("XPlatReactFocusRegion.react"),{containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:e}):e,b[10]=e,b[11]=f):f=b[11];return f}g["default"]=a}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useId;b.useMemo;var k={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingInlineStart:"xa6w9w1",paddingInlineEnd:"x7jv1k3",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderInlineEndColor:"xuc4ihs",borderBottomColor:"xm9qwu6",borderInlineStartColor:"x38i1re",borderTopStartRadius:"x1192kqh",borderTopEndRadius:"xjfsc2c",borderBottomEndRadius:"xg8fqjl",borderBottomStartRadius:"x1kdh5me",borderTopStyle:"xhf2mca",borderInlineEndStyle:"xaau5u0",borderBottomStyle:"x13y0ya8",borderInlineStartStyle:"xv6865q",borderTopWidth:"xmqxc35",borderInlineEndWidth:"x1a32di2",borderBottomWidth:"x21fg80",borderInlineStartWidth:"xyi7q43",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingInlineStart:"x1rcnc7e",paddingInlineEnd:"x1e7pf15",paddingLeft:null,paddingRight:null,$$css:!0},rootDense:{minWidth:"xktpd3l",$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(45),e=a.action,f=a.addOnStart,g=a.closeButton,h=a.density,l=a.linkWrapper,m=a.message,n=a.offsetStyles,o=a.onDismiss,p=a.size,q=a.testid,r=a.themeConfigOverride,s=a.toastRef,t=a.useInvertedDisplayMode;a=a.variant;p=p===void 0?"full-width":p;t=t===void 0?!0:t;var u=j();bb0:{if(e!=null){var v;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(v={},b[0]=v):v=b[0];v=v;break bb0}var w;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(w={"aria-atomic":!0,role:"alert"},b[1]=w):w=b[1];v=w}w=v;if(b[2]!==e||b[3]!==o||b[4]!==(a==null?void 0:(v=a.xstyleConfig)==null?void 0:v.item)){var x;v=e!=null?i.jsx(c("BaseView.react"),{xstyle:[k.item,a==null?void 0:(v=a.xstyleConfig)==null?void 0:v.item],children:e.element!=null?e.element:e.labelRenderer&&i.jsx(c("BaseInlinePressable.react"),{onPress:function(a){o(),e.onPress(a)},testid:void 0,xstyle:k.link,children:e.labelRenderer(e.label)})}):null;b[2]=e;b[3]=o;b[4]=a==null?void 0:(x=a.xstyleConfig)==null?void 0:x.item;b[5]=v}else v=b[5];x=v;if(b[6]!==f||b[7]!==(a==null?void 0:(v=a.xstyleConfig)==null?void 0:v.item)){v=f!=null&&i.jsx(c("BaseView.react"),{xstyle:[k.item,a==null?void 0:(v=a.xstyleConfig)==null?void 0:v.item],children:f});b[6]=f;b[7]=a==null?void 0:(f=a.xstyleConfig)==null?void 0:f.item;b[8]=v}else v=b[8];f=a==null?void 0:(f=a.xstyleConfig)==null?void 0:f.item;var y;b[9]!==f?(y=[k.item,k.itemText,f],b[9]=f,b[10]=y):y=b[10];b[11]!==m||b[12]!==u?(f=m({toastMessageId:u}),b[11]=m,b[12]=u,b[13]=f):f=b[13];b[14]!==w||b[15]!==y||b[16]!==f?(m=i.jsx(c("BaseView.react"),babelHelpers["extends"]({xstyle:y},w,{children:f})),b[14]=w,b[15]=y,b[16]=f,b[17]=m):m=b[17];b[18]!==x?(w=x!=null&&(d("basePushToast").passesNewToastAPIGK()?x:i.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:x})),b[18]=x,b[19]=w):w=b[19];if(b[20]!==g||b[21]!==(a==null?void 0:(y=a.xstyleConfig)==null?void 0:y.item)){x=Boolean(g)&&i.jsx(c("BaseView.react"),{xstyle:[k.item,a==null?void 0:(f=a.xstyleConfig)==null?void 0:f.item],children:g});b[20]=g;b[21]=a==null?void 0:(y=a.xstyleConfig)==null?void 0:y.item;b[22]=x}else x=b[22];b[23]!==w||b[24]!==x||b[25]!==v||b[26]!==m?(f=i.jsxs(i.Fragment,{children:[v,m,w,x]}),b[23]=w,b[24]=x,b[25]=v,b[26]=m,b[27]=f):f=b[27];y=f;b[28]!==l||b[29]!==y?(w=l!=null?l(y):y,b[28]=l,b[29]=y,b[30]=w):w=b[30];y=w;x=e!=null&&d("basePushToast").passesNewToastAPIGK?u:void 0;v=d("basePushToast").passesNewToastAPIGK()&&(e!=null||Boolean(g))?"dialog":void 0;m=p==="full-width"&&k.rootFullWidth;f=h==="dense"&&k.rootDense;w=a==null?void 0:(l=a.xstyleConfig)==null?void 0:l.container;b[31]!==n||b[32]!==m||b[33]!==f||b[34]!==w?(u=[k.root,m,f,n,w],b[31]=n,b[32]=m,b[33]=f,b[34]=w,b[35]=u):u=b[35];b[36]!==x||b[37]!==v||b[38]!==u||b[39]!==q||b[40]!==r||b[41]!==y||b[42]!==s||b[43]!==t?(g=i.jsx(c("BaseToastContentWrapper.react"),{ariaLabelledBy:x,ref:s,role:v,testid:void 0,themeConfig:r,useInvertedDisplayMode:t,xstyle:u,children:y}),b[36]=x,b[37]=v,b[38]=u,b[39]=q,b[40]=r,b[41]=y,b[42]=s,b[43]=t,b[44]=g):g=b[44];return g}g["default"]=a}),98);
__d("BlobFactory",["emptyFunction"],(function(a,b,c,d,e,f,g){var h;function i(){try{new a.Blob(),h=!0}catch(a){h=!1}}var j=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;b=a.Blob?{getBlob:function(b,c){b=b||[];c=c||{};h===void 0&&i();if(h)return new a.Blob(b,c);else{var d=new j();for(var e=0;e<b.length;e++)d.append(b[e]);return d.getBlob(c.type)}},isSupported:c("emptyFunction").thatReturnsTrue}:{getBlob:function(a,b){},isSupported:c("emptyFunction").thatReturnsFalse};d=b;g["default"]=d}),98);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(a,b,c,d,e,f,g){var h,i,j,k="_@_",l="3b",m="CacheStorageVersion",n={length:0,getItem:a=c("emptyFunction"),setItem:a,clear:a,removeItem:a,key:a};d=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getLocalStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getLocalStorage()};return b}(d);g=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getSessionStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getSessionStorage()};return b}(d);var o=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),p={memory:o,localstorage:e,sessionstorage:g};a=function(){function a(a,d){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;d&&(this._key_prefix=d);a==="AUTO"||!a?d="memory":d=a;d&&(!p[d]||!p[d].available()?((i||(i=c("ExecutionEnvironment"))).canUseDOM,this._backend=new o()):this._backend=new p[d]());a=this.useBrowserStorage();a&&b("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));d=a?this._backend.getStore().getItem(m):this._backend.getStore()[m];d!==l&&this.clearOwnKeys()}var d=a.prototype;d.useBrowserStorage=function(){return this._backend.getStore()===(h||(h=c("WebStorage"))).getLocalStorage()||this._backend.getStore()===(h||(h=c("WebStorage"))).getSessionStorage()};d.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};d._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};d.keys=function(){var a=this,b=[];(j||(j=c("ErrorGuard"))).guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};d.set=function(d,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=k+e:!f?(g={__t:Date.now(),__v:e},g=b("cr:8958").stringify(g)):g=b("cr:8958").stringify(e);f=this._backend;e=this._key_prefix+d;d=!0;var h=null;while(d)try{h=null,f.set(e,g),d=!1}catch(a){h=a;var i=f.keys().length;this._evictCacheEntries();d=f.keys().length<i}if(h!==null){this._exception=h;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};d.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};d.getLastSetException=function(){return this._exception};d.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};d._evictCacheEntries=function(){var c=[],d=this._backend;d.keys().forEach(function(e){if(e===m)return;var g=d.get(e);if(g===void 0){d.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=b("cr:8958").parse(g,f.id)}catch(a){d.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&c.push([e,g.__t])});c.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(c.length/2);e++)d.remove(c[e][0])};d.get=function(d,e){var g;if(this._backend){(j||(j=c("ErrorGuard"))).applyWithGuard(function(){g=this._backend.get(this._key_prefix+d)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(k.length);else try{g=b("cr:8958").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(d,g));return g};d.remove=function(a){this._backend&&(j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};d._setVersion=function(){var a=this;(j||(j=c("ErrorGuard"))).applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(m,l):a._backend.getStore()[m]=l},this,[],{name:"CacheStorage:setVersion"})};d.clear=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};d.clearOwnKeys=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(p)};a._hasMagicPrefix=function(a){return a.substr(0,k.length)===k};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();a._persistentWritesDisabled=!1;f.exports=a}),34);
__d("CometFeedStoriesStrategyErrorsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometFeedStoriesStrategyErrorsLoggerConfig")}),null);
__d("CometFeedUnitLoadingIndicatorMask.react",["FDSProgressIndicator.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={root:{alignItems:"x6s0dn4",backgroundColor:"x1h0vfkc",bottom:"x1ey2m1c",display:"x78zum5",flexDirection:"xdt5ytf",end:"xds687c",start:"x17qophe",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(d("react-strict-dom").html.div,{style:j.root,children:i.jsx(c("FDSProgressIndicator.react"),{})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("CometGroupsPathingFunnelLogger",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case"1635855486666999":return"REACTION_MENU_LIKE";case"1678524932434102":return"REACTION_MENU_LOVE";case"478547315650144":return"REACTION_MENU_WOW";case"115940658764963":return"REACTION_MENU_HAHA";case"908563459236466":return"REACTION_MENU_SORRY";case"444813342392137":return"REACTION_MENU_ANGER";case"613557422527858":return"REACTION_MENU_SUPPORT";default:return void 0}}function b(a,b,c){return}function c(a){return}function d(a,b){return}function e(a,b,c){return}function g(a){return}e={addEventSharedPoint:e,addPoint:c,addSharedPoint:d,endCancel:g,getReactionQPLPointFromReaction:a,start:b};f["default"]=e}),66);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));j.useMemo;var l={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(35),e,f,g,j,n,o,p,q,r,s,t;b[0]!==a?(e=a.action,f=a.href,g=a.icon,j=a.impressionLoggingRef,n=a.message,o=a.onDismiss,s=a.target,p=a.testid,q=a.truncateText,r=a.withoutCloseButton,t=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","target","testid","truncateText","withoutCloseButton"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=n,b[6]=o,b[7]=p,b[8]=q,b[9]=r,b[10]=s,b[11]=t):(e=b[1],f=b[2],g=b[3],j=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11]);a=p===void 0?"Toast":p;var u=q===void 0?!0:q;p=r===void 0?!1:r;b[12]!==f||b[13]!==s?(q=f!=null?{target:s,url:f}:void 0,b[12]=f,b[13]=s,b[14]=q):q=b[14];r=q;var v=r;b[15]!==e?(f=e!=null?{label:e.label,labelRenderer:m,onPress:e.onPress,testid:e.testid}:void 0,b[15]=e,b[16]=f):f=b[16];b[17]!==o||b[18]!==p?(s=p!==!0&&k.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._(/*BTDS*/"\u0110\u00f3ng"),onPress:o,size:24,testid:void 0}),b[17]=o,b[18]=p,b[19]=s):s=b[19];b[20]!==v||b[21]!==t?(q=t.onPress!=null||v!=null?function(a){return k.jsx(c("CometPressable.react"),babelHelpers["extends"]({},t,{expanding:!0,linkProps:v,xstyle:l.pressable,children:a}))}:void 0,b[20]=v,b[21]=t,b[22]=q):q=b[22];b[23]!==n||b[24]!==u?(r=function(a){a=a.toastMessageId;return k.jsx(c("FDSText.react"),{color:"primary",id:a,numberOfLines:u?4:void 0,type:"body3",children:n})},b[23]=n,b[24]=u,b[25]=r):r=b[25];b[26]!==g||b[27]!==j||b[28]!==o||b[29]!==f||b[30]!==s||b[31]!==q||b[32]!==r||b[33]!==a?(e=k.jsx(c("BaseToast.react"),{action:f,addOnStart:g,closeButton:s,linkWrapper:q,message:r,onDismiss:o,testid:void 0,toastRef:j}),b[26]=g,b[27]=j,b[28]=o,b[29]=f,b[30]=s,b[31]=q,b[32]=r,b[33]=a,b[34]=e):e=b[34];return e}function m(a){return k.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:a})}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("CometUFIFunnelLogger",["CometUFIFunnelLoggerConstants","QPLUserFlow","qpl","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(a){if(h[a])return;c("QPLUserFlow").start(c("qpl")._(3747131,"4389"),{instanceKey:a});h[a]=!0}function j(a){c("QPLUserFlow").endSuccess(c("qpl")._(3747131,"4389"),{instanceKey:a}),h[a]=!1}function k(a,b){h[a]||i(a),c("QPLUserFlow").addPoint(c("qpl")._(3747131,"4389"),b,{instanceKey:a})}function l(a){if(a>2||a<0){c("recoverableViolation")("Depth should be 0 to 2.","ufi2");return}switch(a){case 0:return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.LEVEL_0_PAGER_CLICK;case 1:return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.LEVEL_1_PAGER_CLICK;case 2:return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.LEVEL_2_PAGER_CLICK}}function m(a){switch(a){case"1635855486666999":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_LIKE;case"1678524932434102":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_LOVE;case"478547315650144":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_WOW;case"115940658764963":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_HAHA;case"908563459236466":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_SORRY;case"444813342392137":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_ANGER;case"613557422527858":return d("CometUFIFunnelLoggerConstants").CometUFIFunnelLoggerEvents.REACTION_MENU_SUPPORT}}a={addPoint:function(a,b){k(a,b)},endSuccess:function(a){j(a)},getPagerEventFromDepth:function(a){l(a)},getReactionMenuEventFromReaction:function(a){m(a)},start:function(a){i(a)}};b=a;g["default"]=b}),98);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(d,a);function d(d){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter$p_2=d;e.$CrossWindowEventEmitter$p_1=new(c("CacheStorage"))("localstorage",d+":");e.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(c,d,f){d=c.split(":")[1];try{c=b("cr:8958").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(e),d].concat(c.__v))}});return e}var e=d.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter$p_1.set(a,c)};return d}(c("EventEmitter"));g["default"]=a}),98);
__d("DelightsTextTriggerPostTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1497");b=d("FalcoLoggerInternal").create("delights_text_trigger_post_tapped",a);e=b;g["default"]=e}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(a,b,c,d,e,f){"use strict";f["default"]=b("CometEventListener")}),66);
__d("IrisSubscribeCheckerUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){if(typeof window!=="undefined"){var a;a=(a=window.location)==null?void 0:a.hostname;if(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")return!1}return!0}f.getIrisSubscribeCheckerInitialRunningState=a}),66);
__d("MqttEnvWebSocket",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new WebSocket(a)}f.createWebSocket=a}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});e=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.setIsUserLoggedInNow=function(a){this.$2=a};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}c("clearTimeout")(a)};a.setTimeout=function(a,b){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return this.$4!=null?this.$4.apply(null,arguments):c("setTimeout").apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):d("MqttEnvWebSocket").createWebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new e();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=d("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=a}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();g["default"]=a}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuidv4")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt==null?void 0:a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure==null?void 0:a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected==null?void 0:a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess==null?void 0:a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost==null?void 0:a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect==null?void 0:a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe==null?void 0:b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe==null?void 0:b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish==null?void 0:b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage==null?void 0:b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal==null?void 0:a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{offset:b,value:c}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,"sid",b.toString())}function b(a,b){var c=a;b.forEach(function(a,b){c=h(c,b,a)});return c}function h(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c}function c(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function i(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})}function e(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);i(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}g.endpointWithSessionId=a;g.endpointWithExtraParameters=b;g.endpointWithExtraParameter=h;g.generateSessionId=c;g.promiseDone=i;g.promiseDoneWithTimeout=e;g.sprintf=f}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{position:e,wireMessage:null};b=i.offset;i=b+i.value;if(i>a.length)return{position:e,wireMessage:null};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{position:i,wireMessage:j}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(b);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return a}(b);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a,b=(this.messageType&15)<<4,c=i.length+3;c+=(a=d("MqttProtocolUtils")).UTF8Length(this.clientId)+2;c+=a.UTF8Length(this.connectOptions.userName)+2;var e=a.encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=b;b=1;f.set(e,1);b+=e.length;f.set(i,b);b+=i.length;e=2|128;f[b++]=e;b=a.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),f,b);b=a.writeString(this.clientId,a.UTF8Length(this.clientId),f,b);b=a.writeString(this.connectOptions.userName,a.UTF8Length(this.connectOptions.userName),f,b);return c};return b}(b);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;g=b.call(this,a)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,a));g.qos=e;g.messageIdentifier=f;return g}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return a}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return a}(b),r=p.createWithString,s=p.createWithBytes;b={Base:b,ConnAck:m,Connect:f,Disconnect:e,Ping:k,PubAckUnsubAck:n,Publish:q,Subscription:o};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.createMessageWithBytes=s;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectFailure,i=g.onConnectionLost;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){i(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){h(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onConnectSuccess:function(a){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a){},userName:""};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$7=d("MqttEnv").Env.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},h*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),b.$11=b.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket");b.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");a=typeof a==="object"&&a!=null&&"error"in a&&!("message"in a)?a.error:a;b.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR,c("ErrorSerializer").toReadableMessage(c("getErrorSafe")(a)))};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),a.wasClean||b.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),b.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,c){return b.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,c)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithString(b),c)};b.publishBinary=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithBytes(b),c)};b.$16=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,b,c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered(g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserNameUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null?a:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus()}function b(){return navigator.userAgent}f.getMqttForegroundStatus=a;f.getUserAgent=b}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h,i,j,k,l,m){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),l===void 0&&(l=null),m===void 0&&(m=null),this.$1=a,this.$2=b,this.$3=c,this.$4=e,this.$5=f,this.$6=g,this.$7=d("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k,this.$12=l,this.$13=m}var b=a.prototype;b.gen=function(a,b,c,e){e===void 0&&(e=[]);var f=d("MqttUserNameUtils").getMqttForegroundStatus(this.$7);c=c.map(function(a){a={isBase64Publish:!1,messageId:a.messageId,payload:a.payload,qos:a.qos,topic:a.topic};typeof a.payload!=="string"&&(a.payload=btoa(String.fromCharCode.apply(null,a.payload)),a.isBase64Publish=!0);return a});f={a:d("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:f,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:e,php_override:this.$9,pm:c,s:a,st:b,u:this.$1};return JSON.stringify(f)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15,j=15,k=1,l=1,m=64,n="publish",o="subscribe",p="unsubscribe",q=function(a){},r=18e4,s=5*1e3,t=15,u=21;a=function(){function a(){var a=this;this.$38=function(){return a.$20};this.$39=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=i;this.$21=j;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=f||q;a&&a.forEach(function(a){return b.$17.add(a)});this.$4=d;this.$20=i;this.$21=j;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(o)&&this.$31(a);return!0};e.publish=function(a,b,c,d){return this.$32(a,b,c,d)};e.publishBinary=function(a,b,c,d){return this.$32(a,b,c,d)};e.$32=function(a,e,f,g){var i={reject:function(a){},resolve:function(){}};g!=null&&(i.listener=g);var j=new(h||(h=b("Promise")))(function(a,b){i.resolve=a,i.reject=b}),k=this.ensureConnected(n);!k?(g==null?void 0:g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),i.reject(c("err")("Client disconnected"))):this.$33(a,e,f,i);return j};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(p)&&this.$34(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$36=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$35=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$36(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$35("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=d("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=d("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=d("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$37(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(c,d,g){return a.$40(d,b,a.$18,f,i,e,c,g)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onConnectSuccess:function(c){return a.$43(b,a.$18,f,i,e,c)},onMessageArrived:function(b,c,d){return a.$44(b,c,d)},onMessageDelivered:function(b){return a.$45(b)},userName:g}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$37=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("#doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$34=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$33=function(a,b,c,e){if(this.$7!=null)try{var f;typeof b==="string"?f=this.$7.publish(a,b,c):f=this.$7.publishBinary(a,b,c);this.$10.bumpCounter("protocol.publish");b=f!=null?f:"null";this.$10.debugTrace("#doPublish","publish "+a+" with messageId:"+b+" qos:"+c);this.$27.onPublish(a);(b=e.listener)==null?void 0:b.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);f!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(f,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$48=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$49();this.$9=-1;this.$16=0;a=a;a==null&&(a=k*Math.pow(2,this.$12));a=Math.max(a,l);a=Math.min(a,m);a=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+a+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},a);this.$12+=1};e.$49=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>s,c=this.$12>t;(b||c)&&(this.$12=0);this.$16!==0&&a<=s&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$46=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({ackReceived:b,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:a,disconnectCount:this.$23,duration:k-c,errorCode:i,errorMessage:j,failTotal:this.$15,hostname:this.$5,messageSizeBytes:h,osConnectivity:g,publishes:f,sessionID:this.$9,subscribedTopics:e,successTotal:this.$14,total_duration:k-d});a&&(this.$13=0)};e.$40=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$46(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===u){this.$48(r);return}}this.$48()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$35("TransportConnected")};e.$43=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,a,b,c,d,e,f),this.$50(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:a.errorCode,errorMessage:b,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$48()};e.$44=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$45=function(a){this.$10.bumpCounter("protocol.onmessagedelivered");var b=a!=null?a:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+b+"}");if(a==null)return;b=this.$24.get(a);if(b==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](a);(a=b.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);b.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null?void 0:e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$50=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$47=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};e.setRunning_OnlyForTests=function(a){this.$8=a};return a}();g["default"]=a}),98);
__d("MqttWebSocketUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype}f.hasWSSupport=b}),66);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=29125;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;var q=a.pageId;q=q===void 0?null:q;var r=a.assetIds;r=r===void 0?null:r;a=a.appSpecificInfo;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,q,r,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!d("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return b.$20()},mqttUserName:this.$12,onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},onStateChange:function(a){b.$23(a)},subscribedTopics:a});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.publishBinary=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.$26=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});var e;c.qos===0?e=this.$27(a,b,c.listener):e=this.$28(a,b,c);d("MqttUtils").promiseDone(e,function(){},function(a){(a=c.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return e};e.$27=function(a,b,c){return this.$29(a,b,0,c,1,null)};e.$28=function(a,c,e){var f={reject:function(a){},resolve:function(){}},g=new(h||(h=b("Promise")))(function(a,b){f.resolve=a,f.reject=b}),i=d("MqttEnv").Env.random();c={ack:f,attempt:0,options:e,payload:c,publishToken:i,startTime:Date.now(),timeoutId:null,topic:a};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(c);else{c.timeoutId=this.$31(i);this.$15.set(i,c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$32(c)}return g};e.$30=function(a){a.attempt+=1,d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$32=function(a){var b=this;a.attempt+=1;d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$33(a)},function(a){})};e.$29=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof b==="string"?j=this.$13.publish(a,b,e):j=this.$13.publishBinary(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof b==="string"?j=this.$10.publish(a,b,e,f):j=this.$10.publishBinary(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:a})},function(c){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:c!=null?c.toString():null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:a})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){var b=this;this.$3.push(a);return function(){b.unsubscribeChannelEvents(a)}};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){typeof a.payload==="string"?b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0}):b.publishBinary(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$34=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$31=function(a){var b=this;return d("MqttEnv").Env.setTimeout(function(a){var d=b.$15.get(a);if(!d)return;var e=d.topic;b.$11.bumpCounter("publish_timeout."+e);b.$11.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$34(a);d.ack.reject(c("err")("Publish Timed Out"))},i,a)};e.$33=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$34(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadString.length*2,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(d of d)try{d(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}d=this.$9.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadBytes.length,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(c of d)try{c(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$35(a)};e.$36=function(a){this.$35(a)};e.$35=function(a){for(var b of this.$3)b.onJSError&&b.onJSError(a)};e.$37=function(){var a=this;this.$14.forEach(function(b){a.$30(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$32(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$23=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+a),this.$38(a,this.$7)};e.$39=function(a,b){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$38(this.$6,a)};e.$38=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$40(c))};e.$40=function(a){for(var b of this.$3)b.onMQTTStateChanged(a)};e.$20=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$20()},function(b){a.$36(b)},function(b,c){a.$39(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};e.getConnection_OnlyForTests=function(){return this.$10};return a}();g["default"]=a}),98);
__d("MqttConfig",["MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MqttWebConfig")}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(a,b,c,d,e,f,g){var h,i="mqtt:";function a(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();if(d){d=d.getItem(i+a);if(d!=null)return d}return b}function b(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();d&&(b==null?d.removeItem(i+a):(h||(h=c("WebStorage"))).setItemGuarded(d,i+a,b))}g.configRead=a;g.configWrite=b}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744057");b=d("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744058");b=d("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744059");b=d("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744060");b=d("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e=b;g["default"]=e}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("MetaConfig")._("99"),j="mqtt_client",k=100,l="WEBSOCKET",m=typeof window!=="undefined"?window:self,n=null,o={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},p={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"};a=function(){a.getInstance=function(b){n||(n=new a(b));return n};function a(a){this.$1=d("LogHistory").getInstance(j),this.$2=0,this.$3=Date.now(),this.$4=c("ChannelClientID").getID(),this.$7(),this.$5=d("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=a}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.ackReceived,d=a.attemptNumber,e=a.connectionState,f=a.connectionStatus,g=a.disconnectCount,h=a.duration,i=a.errorMessage,j=a.failTotal,k=a.hostname,m=a.messageSizeBytes,n=a.osConnectivity,q=a.sessionID,r=a.successTotal;a=a.total_duration;var s=f?"success":"failed";this.bumpCounter(o.CONNECT+"."+s);s=r/(r+j);r=n&&this.getBrowserConnectivity();var t={acked:b,attempt_number:d.toString(),client_type:l,connection_state:e,disconnect_count:g.toString(),duration:h.toString(),error:i,event_type:p.CONNECT,extra_data:{connect_success_rate:s.toString(),device_id:this.$4,hostname:k,connectionStatus:f.toString(),exposure:(j=this.$6)!=null?j:""},os_connectivity:r,payload_size:m==null?void 0:m.toString(),session_id:q.toString(),total_duration:a.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return t})})};b.eventLogPull=function(a){var b=a.duration,c=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;a={connection_status:a,device_id:this.$4,duration:b,error_message:c,hostname:e,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),session_id:g};this.$9(f,a)};b.eventLogPullFinish=function(a){var b=a.duration,c=a.errorMessage,e=a.publishReceived,f=a.publishSent,g=a.pullEventName;a=a.sessionID;b={device_id:this.$4,duration:b,error_message:c,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),publish_received:e,publish_sent:f,session_id:a};this.$9(g,b)};b.eventLogDisconnect=function(a){var b=a.disconnectCount,d=a.duration,e=a.errorMessage;a=a.sessionID;this.bumpCounter(o.DISCONNECT);var f={client_type:l,connection_state:"Disconnected",disconnect_count:b.toString(),duration:d.toString(),error:e,event_type:p.DISCONNECT,extra_data:{device_id:this.$4,exposure:(b=this.$6)!=null?b:""},os_connectivity:this.getBrowserConnectivity(),session_id:a.toString(),ws_count:(d=this.$5)==null?void 0:d.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.attempt,d=a.connectionState,e=a.disconnectCount,f=a.errorMessage,g=a.firstAttemptStartTime,h=a.payloadSizeBytes,i=a.protocol,j=a.qos,k=a.sessionID,m=a.success,n=a.thisAttemptStartTime;a=a.topic;this.bumpCounter(o.PUBLISH+"."+a);var q=Date.now(),r={acked:j===1?m:null,attempt_number:b.toString(),client_type:l,connection_state:d,disconnect_count:e.toString(),duration:(q-n).toString(),error:f,event_type:p.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:i},os_connectivity:this.getBrowserConnectivity(),payload_size:h.toString(),qos:j.toString(),session_id:k.toString(),topic:a,total_duration:g!=null?(q-g).toString():null};this.$8(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.connectionState,d=a.disconnectCount,e=a.payloadSizeBytes,f=a.qos,g=a.sessionID;a=a.topic;var h={client_type:l,connection_state:b,disconnect_count:d.toString(),event_type:p.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:e.toString(),qos:f.toString(),session_id:g.toString(),topic:a};b=a=="/webrtc"||a=="/rtc_multi";this.$10(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(k))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,k),(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",a,k)})};b.$9=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$11();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==o.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$10=function(a,b,c){i&&b!==0?c=c||d("Random").coinflip(b):c=!0;c&&d("MqttEnv").Env.scheduleCallback(a)};b.$8=function(a){this.$10(a,0,!1)};b.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$7=function(){var a=this;if(m.navigator&&m.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("21119");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("21120");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("21121");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("21122");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("21123");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("21124");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}}g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("MqttEnv").Env.initialize(c("Random").random,d("CurrentMessengerUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},c("MqttEnvGk"),(a=a)!=null?a:null,null,null,d("MqttEnvConfigStorage").configRead,d("MqttEnvConfigStorage").configWrite)}b={genGk:c("MqttEnvGk"),initialize:a};g["default"]=b}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();b=new(c("MqttChannel"))({appId:(a=c("MqttConfig")).appID,capabilities:a.capabilities,chatVisibility:!1,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid});g["default"]=b}),98);
__d("FbSharingEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4274");b=d("FalcoLoggerInternal").create("fb_sharing_event",a);e=b;g["default"]=e}),98);
__d("KeyframesPluginLogger",["BanzaiLogger","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";var h="KeyframesFramePerfLoggerConfig",i={appid:256281040558,isemployee:c("CurrentUser").isEmployee()?1:0},j={LOAD_ATTEMPT:"plugin_load_attempt",LOAD_ATTEMPT_KF3:"plugin_load_attempt_compat"};function k(a,b){if(a==null)return;a.forEach(function(a){c("BanzaiLogger").log(h,babelHelpers["extends"]({},i,{name:b,extras:a}))})}a={log:function(a){k(a,j.LOAD_ATTEMPT)},logCompat:function(a){k(a,j.LOAD_ATTEMPT_KF3)}};g.KeyframesPluginLogger=a}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("PromiseResult",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(){var a=this;this.promise=new(g||(g=b("Promise")))(function(b,c){a.$1=b,a.$2=c})}var c=a.prototype;c.resolve=function(a){this.$1(a)};c.reject=function(a){this.$2(a)};return a}();f["default"]=a}),66);
__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUserName","MqttUtils","Promise","PromiseResult"],(function(a,b,c,d,e,f,g){"use strict";var h,i="fetch_pull",j="fetch_pull_finish",k="fetch_",l=6e4,m="action",n="chunked",o="send",p="true",q=5,r=20,s=10,t=5e3,u=typeof window!=="undefined"?window:self;a=function(){function a(){this.$1="",this.$2=d("MqttEnv").Env.getLoggerInstance(),this.$3=0,this.$4="",this.$5=new(c("MqttUserName"))("",0,1,"",0,!0),this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}a.isSupported=function(){return typeof u.fetch==="function"};var e=a.prototype;e.run=function(a,b,c,e,f,g,h,i){this.$1=d("MqttUtils").endpointWithSessionId(a,b),this.$3=b,this.$4=c,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$20()};e.isTopicSupported=function(a){return!0};e.publish=function(a,b){return this.$21(a,b)};e.publishBinary=function(a,b){return this.$21(a,b)};e.$21=function(a,d){if(this.$14!=="ReceivingData"){this.$2.bumpCounter(k+"publish."+a+".invalidstate");return(h||(h=b("Promise"))).reject("not connected")}else{this.$2.bumpCounter(k+"publish."+a+".publish");var e=new(c("PromiseResult"))();a={topic:a,payload:d,promiseResult:e};this.$15.push(a);this.$22();return e.promise}};e.abort=function(){this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){}};e.$23=function(a){var b=this;a.forEach(function(a){b.$2.bumpCounter(k+"publish."+a.topic+".resolved"),a.promiseResult.resolve()});this.$12+=a.length};e.$24=function(a,b){var c=this;a.forEach(function(a){c.$2.bumpCounter(k+"publish."+a.topic+".rejected"),a.promiseResult.reject(b)})};e.$25=function(a,b,c,d){var e=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+c);this.$2.bumpCounter(k+"publish_request_failed");this.$14!=="ReceivingData"||c===q?(this.$24(a,d),this.$18=!1,this.$2.bumpCounter(k+"publish_request_failed_final"),this.$22()):this.$26(a,b,c+1)};e.$27=function(a,b,c,d){if(!d.ok){this.$2.bumpCounter(k+"publish_request_failed.http."+d.status);if(d.status===409){this.$19++;if(this.$19>=s){this.$2.bumpCounter(k+"409_reset");this.$28(new Error("Too many 409 errors"));return}}this.$25(a,b,c,this.$29(d));return}this.$2.bumpCounter(k+"publish_request_success");b=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+b+", retry:"+c);this.$23(a);this.$18=!1;this.$22()};e.$22=function(){if(this.$14!=="ReceivingData")return;if(this.$18)return;if(this.$15.length===0&&this.$16.length===0)return;this.$18=!0;var a=this.$15.slice(0,r);this.$15=this.$15.slice(r,this.$15.length);this.$17!=null&&d("MqttEnv").Env.clearTimeout(this.$17);this.$17=null;var b=this.$16.slice(0,r);this.$16=this.$16.slice(r,this.$16.length);this.$26(a,b,0)};e.$26=function(a,b,c){var e=this,f=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+f+", retry:"+c);f=d("MqttUtils").endpointWithExtraParameter(this.$1,m,o);var g=a.map(function(a){return{topic:a.topic,payload:a.payload,qos:0,messageId:d("MqttEnv").Env.random()}});g=this.$5.gen(this.$3,[],g,b);this.$2.bumpCounter(k+"publish_request");d("MqttUtils").promiseDoneWithTimeout(u.fetch(f,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:g,keepalive:!1}),function(d){return e.$27(a,b,c,d)},function(d){return e.$25(a,b,c,d)},l)};e.$30=function(a){a=a.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+a);this.$9(a);this.$31(!1,a);this.$2.bumpCounter(k+"error");this.$14="Error"};e.$32=function(a){var b=this;this.$2.debugTrace("FetchClient","Fetch response data received");a=d("MqttProtocolCodec").decodeByteMessages(new Uint8Array(a));a=a.messages;var c=a.filter(function(a){return a.messageType===d("MqttProtocolCodec").MESSAGE_TYPE.PINGREQ});a=a.filter(function(a){return a.messageType===d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH}).map(function(a){if(!(a instanceof d("MqttProtocolCodec").WireMessage.Publish))return{};a=a;a.qos===1&&a.messageIdentifier!=null&&(b.$16.push(a.messageIdentifier),b.$17==null&&(b.$17=d("MqttEnv").Env.setTimeout(function(){b.$22()},t)));return{topic:a.topic,payload:a.payloadMessage,qos:a.qos}});for(var e of a){var f;this.$2.bumpCounter(k+"response_"+((f=e.topic)!=null?f:"void"))}a&&a.length>0&&(this.$13+=a.length,this.$7(a));c&&c.length>0&&this.$33()};e.$33=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(k+"ping")};e.$28=function(a){this.$2.debugTrace("FetchClient","Fetch request ended: "+a.toString()),this.$2.bumpCounter(k+"done"),this.$34(a.message),this.$8(),this.$14="Done"};e.$35=function(a,b,c){var e=this;if(c!=null)try{this.$32(c)}catch(a){this.$28(a);this.$2.bumpCounter(k+"dataDecodeException");return}if(b){this.$28(new Error("EOF"));return}d("MqttUtils").promiseDone(a.read(),function(c){var b=c.done;c=c.value;return e.$35(a,b,c)},function(a){return e.$28(a)})};e.$36=function(a){if(!a.ok){this.$2.bumpCounter(k+"error.http."+a.status);this.$30(this.$29(a));return}a=a.body;if(!a){this.$30(new Error("Empty body"));return}a=a.getReader();this.$6();this.$2.bumpCounter(k+"success");this.$31(!0,null);this.$11=Date.now();this.$14="ReceivingData";this.$2.debugTrace("FetchClient","Fetch request success");this.$35(a,!1,null)};e.$34=function(a){this.$2.eventLogPullFinish({pullEventName:j,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:a,publishReceived:this.$13,publishSent:this.$12})};e.$31=function(a,b){this.$2.eventLogPull({pullEventName:i,sessionID:this.$3,status:a,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:b})};e.$20=function(){var a=this;if(this.$14!=="Ready")return;this.$2.debugTrace("FetchClient","Sending fetch request");this.$2.bumpCounter(k+"request");this.$10=Date.now();var b=d("MqttUtils").endpointWithExtraParameter(this.$1,n,p);d("MqttUtils").promiseDoneWithTimeout(u.fetch(b,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(b){return a.$36(b)},function(b){return a.$30(b)},l)};e.$29=function(a){return new Error("Http error, status="+a.status)};return a}();g["default"]=a}),98);
__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","MqttUserName","Promise","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i=120*1e3,j="simple_pull",k="longpolling_";a=function(){function a(){this.$3="",this.$4=0,this.$2=d("MqttEnv").Env.getLoggerInstance(),this.$1="Ready",this.$5="",this.$6=new(c("MqttUserName"))("",0,1,"",0,!0),this.$7=function(){},this.$8=function(a){},this.$9=function(){},this.$10=function(a){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var e=a.prototype;e.run=function(a,b,c,d,e,f,g,h){this.$3=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$9=g,this.$10=h,this.$14(this.$5)};e.isTopicSupported=function(a){return this.$13.has(a)};e.publish=function(a,c){return(h||(h=b("Promise"))).reject("not supported")};e.publishBinary=function(a,c){return(h||(h=b("Promise"))).reject("not supported")};e.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")};e.$15=function(a,b){if(this.$1===a)return;this.$1=a;a==="Error"&&b!=null&&this.$10(b);this.$2.debugTrace("LongPollingClient","_changeStatus : "+a)};e.$16=function(a){if(this.$1!=="RequestSend")return;if(!a){this.$17("EmptyResponse",null);return}this.$7();this.$2.bumpCounter(k+"success");this.$18(!0,null);this.$15("ResponseReceived");a=d("MqttProtocolCodec").decodeByteMessages(new Uint8Array(a));a=a.messages.filter(function(a){return a instanceof d("MqttProtocolCodec").WireMessage.Publish}).map(function(a){if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){a=a;return{topic:a.topic,payload:a.payloadMessage,qos:a.qos}}else return{}});this.$8(a);this.$9()};e.$17=function(a,b){b=b!=null?b.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$18(!1,a+":"+b);this.$2.bumpCounter(k+"error."+a);this.$15("Error",a)};e.$18=function(a,b){this.$2.eventLogPull({pullEventName:j,sessionID:this.$4,status:a,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:b})};e.$14=function(a){var b=this;if(this.$1!=="Ready"||this.$12)return;this.$2.bumpCounter(k+"request");try{this.$11=Date.now(),this.$12=new(c("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(c("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return b.$16(a)}).setNetworkFailureHandler(function(a){b.$17("Network",a)}).setErrorHandler(function(a){b.$17("Error",a)}).setAbortHandler(function(a){b.$17("Abort",null)}).setTimeoutHandler(function(){b.$17("Timeout",null)}).setTimeout(i).send(),this.$15("RequestSend")}catch(a){this.$17("Error",a)}};return a}();g["default"]=a}),98);
__d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};b.onPollShutdownAbort=function(){this.$1.forEach(function(a){a.onPollShutdownAbort()})};return a}();f["default"]=a}),66);
__d("exponentialBackoff",["MqttEnv"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b=null);var c=null,e=0;function f(){for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=function(){a.apply(b,g)};if(c===null){var j=Math.max(0,Math.pow(2,Math.min(e,6))*(1e3+d("MqttEnv").Env.random()*100)-2e3);c=d("MqttEnv").Env.setTimeout(function(){i(),c=null},j)}e++}f.reset=function(){e=0,c!=null&&(d("MqttEnv").Env.clearTimeout(c),c=null)};f.isPending=function(){return c!=null};return f}g["default"]=a}),98);
__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","MqttWebSocketUtils","Promise","exponentialBackoff"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4,j=1e3,k=3e3,l="mqtt_should_longpoll",m="last_lp",n="yes",o="no";a=function(){function a(a,b,e,f,g,h,i,j,k){var l=this;this.$23=function(){try{if(!l.$30())return;l.$5.debugTrace("LongPollingRunner","_startPollingIfNecessary called");var a=l.$31();l.$14=a;var b=l.$9(),c=l.$10();b=b.filter(function(b){return a.isTopicSupported(b)});c=c.filter(function(b){return a.isTopicSupported(b.topic)});if(b.length===0&&c.length===0){l.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");l.$14=null;d("MqttEnv").Env.setTimeout(function(){l.$23()},1e3);return}var e=d("MqttUtils").generateSessionId();a.run(l.$6,e,l.$7.gen(e,b,c),l.$7,function(){return l.$32()},function(a){return l.$33(a)},function(){return l.$34()},function(a){return l.$35(a)});l.$19.onPollRequestSent();e=b.join(",");b=c.map(function(a){return a.topic}).join(",");l.$5.debugTrace("LongPollingRunner","Making a poll request to "+l.$6+". SubscribedTopics:"+e+". Publishes:"+b)}catch(a){a&&l.$5.logErrorWarn(a,"lp_js_error"),l.$11(new(d("MqttTypes").MqttChannelError)(!1,"js error lp",a)),l.$35("lp_js_error")}};this.$6=a;this.$7=b;this.$1=f;this.$2=0;this.$3=e;this.$4=d("MqttWebSocketUtils").hasWSSupport();this.$5=d("MqttEnv").Env.getLoggerInstance();this.$8=g;this.$9=h;this.$10=i;this.$11=j;this.$12=k;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16="NotSent";this.$17=0;this.$19=new(c("MqttLongPollingHookCollection"))();this.$18=c("exponentialBackoff")(this.$23,this);this.$20=0;this.$21=o;a=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch);b=c("MqttFetchClient").isSupported();a?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail");b?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported");this.$22=a&&b}var e=a.prototype;e.addHook=function(a){this.$19.addHook(a)};e.start=function(){var a=this;this.$21=d("MqttEnv").Env.configRead(m,o);this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21);this.$20=Date.now();this.$23();d("MqttEnv").Env.setTimeout(function(){a.$23()},j+100);d("MqttEnv").Env.setTimeout(function(){a.$23()},k+100)};e.shutdown=function(){this.$5.debugTrace("LongPollingRunner","Shutdown called"),this.$14&&this.$14.abort(),this.$19.onPollShutdownAbort(),this.$14=null};e.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"};e.publish=function(a,b,c){return this.$24(a,b)};e.publishBinary=function(a,b,c){return this.$24(a,b)};e.$24=function(a,c){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling)&&(this.$14&&this.$14.isTopicSupported(a)))if(typeof c==="string")return this.$14.publish(a,c);else return this.$14.publishBinary(a,c);return(h||(h=b("Promise"))).reject()};e.onConnectAttempt=function(){};e.onConnectFailure=function(){this.$2++,this.$23()};e.onConnected=function(){};e.onConnectSuccess=function(){this.$1=!0,d("MqttEnv").Env.configWrite(m,null)};e.onConnectionLost=function(){};e.onConnectionDisconnect=function(){};e.onSubscribe=function(a){};e.onUnsubscribe=function(a){};e.onPublish=function(a){};e.onMessage=function(a){};e.onWSFatal=function(){this.$3=!0,this.$23()};e.getStatus=function(){return this.$15};e.getRequestStatus=function(){return this.$16};e.$25=function(a){a!==this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15,this.$16))};e.$26=function(a){if(!this.$22)return;a!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+a+" from "+this.$16),this.$16=a,this.$12(this.$15,this.$16))};e.$27=function(){this.$17=0};e.$28=function(){this.$17++,this.$17>=i&&this.$25("LPError")};e.$29=function(){var a,b=(a=d("MqttEnv")).Env.genGk(a.MqttGkNames.mqtt_lp_no_delay),c=a.Env.genGk(a.MqttGkNames.mqtt_ws_polling_enabled);a=a.Env.genGk(a.MqttGkNames.mqtt_fast_lp);this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(b)+" enabled:"+String(c)+" fastPoll:"+String(a)+" hasWSSupport:"+String(this.$4)+" hasWsSuccessBefore:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(!c)return!1;if(b){this.$5.bumpCounter(l+".nd");return!0}if(!this.$4){this.$5.bumpCounter(l+".na");return!0}if(this.$3){this.$5.bumpCounter(l+".fatal");return!0}if(this.$1)return!1;if(a){c=Date.now()-this.$20;if(this.$21===n){if(this.$2>=1)return!0;if(c>j){this.$5.bumpCounter(l+".fastdelay");return!0}}else if(c>k){this.$5.bumpCounter(l+".regulardelay");return!0}}if(this.$2>=3){this.$5.bumpCounter(l+".failure");return!0}return!1};e.$30=function(){if(this.$14!=null)return!1;var a=this.$29();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$25("LPActive"),this.$27());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$25("LPInactive"),this.$27());return a};e.$31=function(){if(this.$22){this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API");return new(c("MqttFetchClient"))()}else{this.$5.debugTrace("LongPollingRunner","Creating regular Polling client");return new(c("MqttLongPollingClient"))()}};e.$32=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$25("LPActive"),this.$27(),d("MqttEnv").Env.configWrite(m,n),this.$26("ReceivingData")};e.$33=function(a){var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(b of a)this.$19.onPollResponse(b.topic),this.$8(b.topic,b.payload,b.qos)};e.$34=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$26("NotSent")};e.$35=function(a){this.$19.onPollRequestFailed(a),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$28(),this.$26("NotSent")};return a}();g["default"]=a}),98);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();a.DEFAULT_BYTE_BUFFER_SIZE=16;f["default"]=a}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(c("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)b.writeByte(d);else if(d<2048)b.writeByte(d>>6|192),b.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);b.writeByte(d>>18|240);b.writeByte(d>>12&63|128);b.writeByte(d>>6&63|128);b.writeByte(d&63|128)}else b.writeByte(d>>12|224),b.writeByte(d>>6&63|128),b.writeByte(d&63|128)}return b.toByteArray()};g.StringToUtf8=a}),98);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;f["default"]=b}),66);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),66);
__d("WhatsappDeeplinkClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2");b=d("FalcoLoggerInternal").create("whatsapp_deeplink_clicked",a);e=b;g["default"]=e}),98);
__d("WhatsappDeeplinkRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("20");b=d("FalcoLoggerInternal").create("whatsapp_deeplink_rendered",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("AutoplayRulesEngine",[],(function(a,b,c,d,e,f){"use strict";var g=-2,h=-1;a=function(){function a(a){this.$1=g,this.$2=a}var b=a.prototype;b.evaluateAutoplay=function(a,b){b=b();var c=h;if(a)for(var d=0;d<this.$2.length;d++){var e=this.$2[d](a);if(e!=="SKIP"){b=e;c=d;break}}this.$1=c;return b};b.getIndexOfLastWinningRule=function(){return this.$1};b.getRules=function(){return this.$2};return a}();f["default"]=a}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});f["default"]=a}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});f["default"]=a}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1856513");b=d("FalcoLoggerInternal").create("cvc_v3_http_event",a);e=b;g["default"]=e}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a;this.$2=c("guid")();this.$3=((a=b)!=null?a:"null")+"::"+((b=d)!=null?b:"null");this.$4=null;this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return babelHelpers["extends"]({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpRequestFailure=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logHttpRequestTimeout=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpResponseBad=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logDebugInfo=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:a,countable_id:b.$1}})};return a}();g["default"]=a}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("CometAudioManagerContexts").AudioApiContext);return a}g.useAudioApi=a}),98);
__d("CometFullScreen",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;return typeof c==="function"?c.call(a):(g||(g=b("Promise"))).reject()}function c(){var a=document.exitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitExitFullscreen;return typeof a==="function"?a.call(document):(g||(g=b("Promise"))).reject()}function d(){return(document.webkitFullscreenEnabled===!0||document.mozFullScreenEnabled===!0||document.msFullscreenEnabled===!0||document.fullscreenEnabled===!0)&&(typeof document.webkitExitFullscreen==="function"||typeof document.mozCancelFullScreen==="function"||typeof document.msExitFullscreen==="function"||typeof document.exitFullscreen==="function")}function h(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||null}function e(){return h()!=null}function i(){return["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"]}function j(a){var b=window.document,c=!1,d=!0;i().forEach(function(e){b.addEventListener(e,a,{capture:c,passive:d})});return function(){i().forEach(function(d){b.removeEventListener(d,a,c)})}}f.requestFullScreen=a;f.exitFullScreen=c;f.isSupported=d;f.getFullScreenElement=h;f.isFullScreen=e;f.getFullScreenChangeEventNames=i;f.subscribeToFullScreenChangeEvent=j}),66);
__d("CometVideoPlayerLoggingConfigForFBWeb",["CometVideoPlayerLoggingConfigForDisabledLogging","FBVideoMetadataProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return(a==null?void 0:a.disableLogging)===!0?d("CometVideoPlayerLoggingConfigForDisabledLogging").createCometVideoPlayerLoggingConfigForDisabledLogging():{loggingToSNAPLCreateMetadataProvider:d("FBVideoMetadataProvider").createFBVideoMetadataProvider,loggingToSNAPLEnabled:(a==null?void 0:a.withFBWebSNAPLGK)===!0?c("gkx")("1460"):void 0}}g.createCometVideoPlayerLoggingConfigForFBWeb=a}),98);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","makeAudioSymbol","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useContext,k=b.useEffect,l=b.useId,m=b.useMemo,n=b.useRef,o=b.useState;e=d("createVideoStateHook").createVideoStateHook();var p=e.valueHook;function a(){var a=p({isVolumeInitialized:!1}),b=l(),e=(i||(i=d("VideoPlayerHooks"))).useInstanceKey(),f=m(function(){return c("makeAudioSymbol")(b,e)},[b,e]),g=d("CometAudioManagerHooks").useAudioApi(),h=n(g);k(function(){h.current=g},[g]);var q=i.useController(),r=200,s=i.useLastPlayReason(),t=i.useLastMuteReason(),u=i.useMuted();r=c("CometThrottle")(i.useVolume,r,{trailing:!0});var v=r(),w=c("usePrevious")(v),x=i.usePaused(),y=j(d("CometAudioManagerContexts").CometAudioLocalScopeContext),z=j(d("CometAudioManagerContexts").CometAudioGroupContext),A=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),B=i.useVolumeSetting(),C=m(function(){return(z==null?void 0:z.groupID)||d("CometAudioManagerContexts").makeAudioGroupID()},[z==null?void 0:z.groupID]);r=o(!0);var D=r[0];r=r[1];var E=m(function(){return{audioLocalScope:y,controller:q,groupID:C,instanceKey:e,lastMuteReason:t,lastPlayReason:s,muted:u,paused:x,previousVolume:w,symbol:f,videoPlayerPortalingPlaceInfo:A,volume:v}},[y,q,C,e,t,s,u,x,w,f,A,v]);k(function(){B!=null&&a.isVolumeInitialized!==!0&&(q.setVolume(B),a.isVolumeInitialized=!0)},[q,a,!0,B]);r=z||{allowSound:D,groupID:C,setAllowSound:r};var F=n(r);k(function(){g&&g.register(E,F.current);return function(){g&&g.unregister(f,C)}},[g,E,C,f]);k(function(){g&&g.update(E)},[g,E]);k(function(){!D&&h.current&&q.setMuted(!0,"audio_manager_initiated")},[D,h,q]);return null}g["default"]=a}),98);
__d("VideoPlayerAutoplayHooks",["VideoPlayerAutoplayContexts","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("VideoPlayerAutoplayContexts").AutoplayApiContext);if(a==null)throw c("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return a}function b(){return i(d("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}g.useAutoplayApi=a;g.useVideoAutoplayLocalScope=b}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(a,b,c,d,e,f){"use strict";function a(){return"ALLOW"}a.displayName="evaluateVideoAutoplayDefaultRule";f["default"]=a}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(8),e=j(a),f;b[0]!==a?(f=function(){return new(c("AutoplayRulesEngine"))(a)},b[0]=a,b[1]=f):f=b[1];f=k(f);var g=f[0],h=f[1],l;b[2]!==a?(f=function(){e.current!==a&&h(function(){return new(c("AutoplayRulesEngine"))(a)})},l=[a],b[2]=a,b[3]=f,b[4]=l):(f=b[3],l=b[4]);i(f,l);b[5]!==g?(f=function(){e.current=g.getRules()},l=[g],b[5]=g,b[6]=f,b[7]=l):(f=b[6],l=b[7]);i(f,l);return g}g["default"]=a}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;g.useVideoPlayerExtendedPassiveViewabilityInfo=(h||(h=d("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo;g.useVideoPlayerPassiveViewabilityInfo=h.useVideoPlayerPassiveViewabilityInfo;g.useVideoPlayerViewabilityInfo=h.useVideoPlayerViewabilityInfo}),98);
__d("useEventCallbackOn",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,c){var e=d("react-compiler-runtime").c(5),f,g;e[0]!==c||e[1]!==b||e[2]!==a?(f=function(){a.addEventListener(b,c);return function(){a.removeEventListener(b,c)}},g=[a,b,c],e[0]=c,e[1]=b,e[2]=a,e[3]=f,e[4]=g):(f=e[3],g=e[4]);i(f,g)}g["default"]=a}),98);
__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useCallback,j=f.useState;function b(){var b=a.document;if(typeof b.hidden!=="undefined")return"visibilitychange";else if(typeof b.mozHidden!=="undefined")return"mozvisibilitychange";else if(typeof b.msHidden!=="undefined")return"msvisibilitychange";else if(typeof b.webkitHidden!=="undefined")return"webkitvisibilitychange";return"visibilitychange"}function k(){var b=a.document;if(typeof b.hidden!=="undefined")return b.hidden;else if(typeof b.mozHidden!=="undefined")return b.mozHidden;else if(typeof b.msHidden!=="undefined")return b.msHidden;else if(typeof b.webkitHidden!=="undefined")return b.webkitHidden;return!1}var l=b();function m(b){var c=a.document.hasFocus?a.document.hasFocus():!0,d=k();return d||(b?!1:!c)}function n(){return k()}function e(b){var d=(b==null?void 0:b.noPauseOnBlurOrFocus)===!0,e=j(function(){return m(d)}),f=e[0],g=e[1];e=j(function(){return n()});var h=e[0],k=e[1],o=!!b&&b.scrollTerminatesHiddenOrBlurred===!0;e=i(function(){g(m(d)),k(n())},[g,d]);b=e;var p=i(function(){var a=m(d);a&&o&&f&&g(!1)},[f,d,o]);d&&(b=c("emptyFunction"));c("useEventCallbackOn")(a.window,"blur",b);c("useEventCallbackOn")(a.window,"focus",b);c("useEventCallbackOn")(a.document,l,e);c("useEventCallbackOn")(a.window,"scroll",p);return{isDocumentHidden:h,isDocumentHiddenOrBlurred:f}}g["default"]=e}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=5e3;function a(){var a=d("react-compiler-runtime").c(2),b=k,e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=b(),a[0]=e):e=a[0];e=i(e);var f=e[0],g=e[1];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){return g(b())},a[1]=e):e=a[1];c("useInterval")(e,j);return f}function k(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}g["default"]=a}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.startTransition,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState;function a(a){var b=(i||(i=d("VideoPlayerHooks"))).useAdClientToken(),e=i.useAutoplayGatingResult(),f=i.useBroadcastStatus(),g=i.useEnded(),h=i.useIsFrozenPassive(),p=i.useLastPauseReason(),q=i.useLastPlayReason(),r=i.useMuted(),s=i.usePaused(),t=k(c("HiddenSubtreePassiveContext")),u=!b;a=(a==null?void 0:a.noPauseOnBlurOrFocus)===!0||d("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);a=c("useIsBackgrounded")({noPauseOnBlurOrFocus:a,scrollTerminatesHiddenOrBlurred:u});var v=a.isDocumentHidden,w=a.isDocumentHiddenOrBlurred,x=c("useVideoPlayerBandwidthEstimate")(),y=d("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),z=d("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo();u=o(t.getCurrentState().backgrounded);var A=u[0],B=u[1];a=o(t.getCurrentState().hidden);var C=a[0],D=a[1];l(function(){var a=function(){j(function(){var a=t.getCurrentState();D(a.hidden);B(a.backgrounded)})},b=t.subscribeToChanges(a);a();return function(){b.remove()}},[t,B,D]);u=o(function(){return h.getCurrentState()});var E=u[0],F=u[1];l(function(){var a=h.subscribeToChanges(function(a){F(a)}),b=h.getCurrentState();F(b);return function(){a.remove()}},[h,F]);var G=m(function(){return{adClientToken:b,autoplayGatingResult:e,bandwidthEstimate:x,broadcastStatus:f,controllerIsFrozen:E,currentSubtreeIsBackgrounded:A,currentSubtreeIsHidden:C,ended:g,hiddenSubtreePassive:t,isDocumentHidden:v,isDocumentHiddenOrBlurred:w,isFrozenPassive:h,lastPauseReason:p,lastPlayReason:q,muted:r,paused:s,videoPlayerExtendedPassiveViewabilityInfo:z,videoPlayerPassiveViewabilityInfo:y}},[b,e,x,f,E,A,C,g,t,v,w,h,p,q,r,s,z,y]);a=o(G);var H=a[0],I=a[1],J=n(H);l(function(){J.current=H},[H]);l(function(){var a=!1;for(var b in G)if(Object.prototype.hasOwnProperty.call(G,b)&&G[b]!==J.current[b]){a=!0;break}a&&I(G)},[G,I]);return H}g["default"]=a}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","react-compiler-runtime","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useContext,k=b.useEffect,l=b.useId;b.useMemo;var m=b.useRef,n=b.useState;function a(){var a=d("react-compiler-runtime").c(72),b=l(),e=(i||(i=d("VideoPlayerHooks"))).useCanAutoplay(),f=i.useInstanceKey(),g;a[0]!==b||a[1]!==f?(g=c("makeSelectedAutoplayVideoSymbol")(b,f),a[0]=b,a[1]=f,a[2]=g):g=a[2];b=g;var h=b,o=m(h);a[3]!==h?(g=function(){o.current=h},b=[h],a[3]=h,a[4]=g,a[5]=b):(g=a[4],b=a[5]);k(g,b);var p=j(c("HiddenSubtreePassiveContext")),q=i.useController(),r=m(!1),s=d("useConcurrentAutoplayManagementAPI").useAutoplayControlID();a[6]!==s||a[7]!==q?(g=function(){d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[ASSUME CONTROL] "+s),q.registerControllingComponent(s)},b=[q,s],a[6]=s,a[7]=q,a[8]=g,a[9]=b):(g=a[8],b=a[9]);k(g,b);var t=i.useVideoPlayerPassiveViewabilityInfo();a[10]!==q?(g=q.getCurrentState(),a[10]=q,a[11]=g):g=a[11];b=g;g=b.paused;var u=m(g),v=d("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),w=m(v);a[12]!==v?(b=function(){w.current=v},g=[v],a[12]=v,a[13]=b,a[14]=g):(b=a[13],g=a[14]);k(b,g);a[15]!==q||a[16]!==t?(b=function(){var a=q.getCurrentState(),b=a.lastPlayReason;a=a.paused;var d=u.current;u.current=a;var e=t==null?void 0:t.getCurrent();if(e){e=e.visiblePercentage;a=!a&&a!==d;d=e<c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&e>0;w.current.disableScrollBeforePlayWhenOffscreen!==!0&&a&&b==="user_initiated"&&d&&(r.current=!0)}},a[15]=q,a[16]=t,a[17]=b):b=a[17];var x=b,y=m(x);a[18]!==x?(g=function(){y.current=x},b=[x],a[18]=x,a[19]=g,a[20]=b):(g=a[19],b=a[20]);k(g,b);a[21]!==q||a[22]!==x?(g=function(){var a=q.subscribe(function(){x()});return function(){a.remove()}},b=[q,x],a[21]=q,a[22]=x,a[23]=g,a[24]=b):(g=a[23],b=a[24]);k(g,b);a[25]!==v.noPauseOnBlurOrFocus?(g={noPauseOnBlurOrFocus:v.noPauseOnBlurOrFocus},a[25]=v.noPauseOnBlurOrFocus,a[26]=g):g=a[26];var z=c("useVideoAutoplayState")(g),A=c("useAutoplayRulesEngine")(v.autoplayLocalRules),B=e==="allow"?c("evaluateVideoAutoplayDefaultAllowRule"):c("evaluateVideoAutoplayDefaultIgnoreRule");a[27]!==B?(b=function(){return B},a[27]=B,a[28]=b):b=a[28];g=n(b);b=g[0];var C=g[1];g=n(null);var D=g[0],E=g[1];a[29]!==A||a[30]!==B||a[31]!==z?(g=function(){return A.evaluateAutoplay(z,B)},a[29]=A,a[30]=B,a[31]=z,a[32]=g):g=a[32];g=n(g);var F=g[0],G=g[1];g=n(null);var H=g[0],I=g[1],J=m(F),K=d("VideoPlayerAutoplayHooks").useAutoplayApi(),L=m(K),M;a[33]!==K?(g=function(){L.current=K},M=[K],a[33]=K,a[34]=g,a[35]=M):(g=a[34],M=a[35]);k(g,M);var N=e!=="dangerously_disable_autoplay_management";a[36]!==K||a[37]!==v||a[38]!==q||a[39]!==p||a[40]!==f||a[41]!==N||a[42]!==h?(g=function(){K.register(h,f,v,q,p,N);c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:J.current}});return function(){K.unregister(h),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:J.current}})}},M=[K,v,q,p,f,N,h],a[36]=K,a[37]=v,a[38]=q,a[39]=p,a[40]=f,a[41]=N,a[42]=h,a[43]=g,a[44]=M):(g=a[43],M=a[44]);k(g,M);a[45]!==K||a[46]!==s||a[47]!==A||a[48]!==q||a[49]!==B||a[50]!==p||a[51]!==D||a[52]!==H||a[53]!==h||a[54]!==z||a[55]!==t?(e=function(){var a=function(){var a=A.evaluateAutoplay(z,B);J.current=a;var b=A.getRules(),e=A.getIndexOfLastWinningRule(),f=e>=0?b[e]:B;b=t&&t.getCurrent();e=q.getCurrentState();e=e.paused;(H===null||H!==a)&&(G(a),I(a));if(a==="PAUSE"&&!e&&q.isControllingComponent(s)){e=!0;y.current();if(r.current){r.current=!1;var g=b==null?void 0:b.positionToViewport;g&&q.scrollIntoView(g.top<0);e=!1}if(e){g="[PAUSE] via short-circuit on "+f.name+".";d("CoreVideoPlayerAutoplayClientUtils").log(o.current,g);q.pause("autoplay_initiated");c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:a}})}}(D===null||D!==f)&&(C(function(){return f}),E(function(){return f}),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:K.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:a}}));d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[DECISION: "+a+"] from "+f.name);b&&K.update(h,a,b)},b=p.subscribeToChanges(function(a){p.getCurrentState().hidden||p.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s)}),e=t?t.subscribe(function(){p.getCurrentState().hidden||p.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s),a()}):null;a();return function(){b.remove(),e&&e.remove()}},g=[K,s,A,q,B,p,D,H,C,G,E,I,h,z,t],a[45]=K,a[46]=s,a[47]=A,a[48]=q,a[49]=B,a[50]=p,a[51]=D,a[52]=H,a[53]=h,a[54]=z,a[55]=t,a[56]=e,a[57]=g):(e=a[56],g=a[57]);k(e,g);a[58]!==s||a[59]!==F||a[60]!==q?(M=function(){var a=q.isControllingComponent(s),b=q.getCurrentState();b=b.paused;d("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(F,J.current,b,a)&&(d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[PAUSE] the video for "+F),q.pause("autoplay_initiated"),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:w.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:L.current.getAutoplayManagerDebugInfo(w.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:F}}))},e=[F,q,s],a[58]=s,a[59]=F,a[60]=q,a[61]=M,a[62]=e):(M=a[61],e=a[62]);k(M,e);a[63]!==s||a[64]!==q?(g=function(){return function(){d("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[RELEASE CONTROL] "+s),q.unregisterControllingComponent(s)}},M=[q,s],a[63]=s,a[64]=q,a[65]=g,a[66]=M):(g=a[65],M=a[66]);k(g,M);a[67]!==b||a[68]!==F||a[69]!==v||a[70]!==h?(e={applicableRule:b,autoplayApiRef:L,autoplayDecision:F,autoplayLocalScope:v,symbol:h},a[67]=b,a[68]=F,a[69]=v,a[70]=h,a[71]=e):e=a[71];c("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition(e);return null}g["default"]=a}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),c=a.children,e=a.isDesktopPictureInPicture,f=a.isFullscreen;a=a.videoPlayerPassiveViewabilityInfo;var g;b[0]!==c||b[1]!==f?(g=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:f,children:c}),b[0]=c,b[1]=f,b[2]=g):g=b[2];b[3]!==e||b[4]!==g?(c=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:e,children:g}),b[3]=e,b[4]=g,b[5]=c):c=b[5];b[6]!==c||b[7]!==a?(f=i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:a,children:c}),b[6]=c,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var e;b=d("react-compiler-runtime").c(4);var f=(e=i(c("CappedListItemContext")))==null?void 0:e.registerBlocker,g;b[0]!==a||b[1]!==f?(e=function(){if(!f)return;var b;b=null;var c;c=null;var d=function(){var d=a.getCurrentState().playing;if(d!==b){b=d;c&&(c(),c=null);if(d){var e;c=f({reason:"playing_video",source:e})}}};d();var e=a.subscribe(d);return function(){e.remove(),c&&(c(),c=null)}},g=[a,f],b[0]=a,b[1]=f,b[2]=e,b[3]=g):(e=b[2],g=b[3]);j(e,g)}g["default"]=a}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var e=d("react-compiler-runtime").c(5),f=i(c("VirtualizationContext")),g,h;e[0]!==f||e[1]!==a||e[2]!==b?(g=function(){if(f==null)return;var c=f.createFlag,d=f.createPin,e;e=null;var g;g=null;var h=function(){g==null&&(g=c("HAS_PLAYER","playerInstanceKey: "+b));var f=a.getCurrentState();f.playing||f.stalling?e||(e=d("player "+b+" is playing")):f.isFullscreen?e||(e=d("player "+b+" is fullscreen")):(e==null?void 0:e(),e=null)};h();var i=a.subscribe(h);return function(){i.remove(),g==null?void 0:g(),g=null,e==null?void 0:e(),e=null}},h=[a,b,f],e[0]=f,e[1]=a,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);j(g,h)}g["default"]=a}),98);
__d("wrapWithContextProviders",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return function(c){return i.jsx(a.Provider,{value:b,children:c})}}g.wrapWithContextProviders=a;g.makeRenderProviderFn=b}),98);
__d("VideoPlayerComponentContainer.react",["CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","react-compiler-runtime","setTimeout","stylex","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;e.useCallback;var m=e.useEffect,n=e.useRef,o=e.useState,p={"default":{height:"x5yr21d",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},hiddenCursor:{cursor:"xjfk50j",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(10),e=n(a),f,g;b[0]!==a?(f=function(){e.current=a},g=[a],b[0]=a,b[1]=f,b[2]=g):(f=b[1],g=b[2]);m(f,g);f=o(!1);g=f[0];var h=f[1];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){var a;a=null;return{cleanup:function(){a&&a()},pingNotIdle:function(){a&&a();h(!1);var b=c("setTimeout")(function(){h(!0)},e.current);a=function(){c("clearTimeout")(b),a=null}}}},b[3]=f):f=b[3];f=o(f);f=f[0];var i=f.cleanup;f=f.pingNotIdle;var j,k;b[4]!==i?(j=function(){return i},k=[i],b[4]=i,b[5]=j,b[6]=k):(j=b[5],k=b[6]);m(j,k);b[7]!==g||b[8]!==f?(j={isIdle:g,pingNotIdle:f},b[7]=g,b[8]=f,b[9]=j):j=b[9];return j}function r(){var a=d("react-compiler-runtime").c(18),b=o(!1),c=b[0],e=b[1];b=q(3e3);var f=b.isIdle,g=b.pingNotIdle;a[0]!==g?(b=function(){e(!0),g()},a[0]=g,a[1]=b):b=a[1];b=b;var h;a[2]!==g?(h=function(){e(!1),g()},a[2]=g,a[3]=h):h=a[3];h=h;var i;a[4]!==g?(i=function(){e(!0),g()},a[4]=g,a[5]=i):i=a[5];i=i;var j;a[6]!==g?(j=function(){g()},a[6]=g,a[7]=j):j=a[7];j=j;var k;a[8]!==g?(k=function(){g()},a[8]=g,a[9]=k):k=a[9];k=k;var l;a[10]!==c||a[11]!==f||a[12]!==j||a[13]!==b||a[14]!==h||a[15]!==i||a[16]!==k?(l={isHovering:c,isIdle:f,onMouseDown:j,onMouseEnter:b,onMouseLeave:h,onMouseMove:i,onMouseUp:k},a[10]=c,a[11]=f,a[12]=j,a[13]=b,a[14]=h,a[15]=i,a[16]=k,a[17]=l):l=a[17];return l}function s(a){var b=d("react-compiler-runtime").c(16);a=a.children;var e=r(),f=e.isHovering,g=e.isIdle,i=e.onMouseDown,m=e.onMouseEnter,n=e.onMouseLeave,o=e.onMouseMove;e=e.onMouseUp;var q=(k||(k=d("VideoPlayerHooks"))).useIsFullscreen();q=q&&g&&p.hiddenCursor;var s;b[0]!==q?(s=(h||(h=c("stylex")))(p["default"],q),b[0]=q,b[1]=s):s=b[1];b[2]!==a||b[3]!==g?(q=l.jsx((j||(j=d("VideoPlayerContexts"))).VideoPlayerMouseIdleContext.Provider,{value:g,children:a}),b[2]=a,b[3]=g,b[4]=q):q=b[4];b[5]!==f||b[6]!==q?(a=l.jsx((j||(j=d("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:f,children:q}),b[5]=f,b[6]=q,b[7]=a):a=b[7];b[8]!==i||b[9]!==m||b[10]!==n||b[11]!==o||b[12]!==e||b[13]!==s||b[14]!==a?(g=l.jsx("div",babelHelpers["extends"]({className:s},c("CometVisualCompletionAttributes").IGNORE,{onMouseDown:i,onMouseEnter:m,onMouseLeave:n,onMouseMove:o,onMouseUp:e,children:a})),b[8]=i,b[9]=m,b[10]=n,b[11]=o,b[12]=e,b[13]=s,b[14]=a,b[15]=g):g=b[15];return g}function a(a){var e=d("react-compiler-runtime").c(76),f,g;e[0]!==a?(f=a.children,g=babelHelpers.objectWithoutPropertiesLoose(a,["children"]),e[0]=a,e[1]=f,e[2]=g):(f=e[1],g=e[2]);a=g;var h=a.adClientToken,i=a.audioAvailabilityInfo,k=a.autoplayGatingResult,m=a.broadcastStatus,n=a.canAutoplay,o=a.controller,p=a.dimensions,q=a.initialTracePolicy,r=a.instanceKey,t=a.isDesktopPictureInPicture,u=a.isFullscreen,v=a.isNCSR,w=a.isPremiumMusicVideo,x=a.lastMuteReason,y=a.lastPauseReason,z=a.lastPlayReason,A=a.videoFBID,B=a.videoPixelsAspectRatio,C=a.videoPlayerPassiveViewabilityInfo,D=a.videoState;a=a.volumeSetting;var E=D.activeCaptions,F=D.activeEmsgBoxes,G=D.availableAudioTracks,H=D.availableVideoQualities,I=D.availableVideoTracks,J=D.bufferEnd,K=D.captionDisplayStyle,L=D.captionsLoaded,M=D.captionsVisible,N=D.currentAudioTrackID,O=D.currentVideoQuality,P=D.currentVideoTrackID,Q=D.duration,R=D.ended,S=D.error,T=D.inbandCaptionsAutogenerated,U=D.inPlayStalling,V=D.isAbrEnabled,W=D.isLiveRewindActive,X=D.isLiveRewindAvailable,Y=D.lastPlayedTimeMs,Z=D.latencyLevel,aa=D.loopCount,ba=D.loopCurrent,ca=D.muted,da=D.paused,ea=D.playerVersion,fa=D.playing,ga=D.seekableRanges,ha=D.seeking,ia=D.selectedVideoQuality,ja=D.stalling,ka=D.streamInterrupted,la=D.targetAudioTrack,ma=D.targetPlaybackRate,na=D.targetVideoQuality,oa=D.volume;D=D.watchTimeMs;var $;e[3]!==f?($=l.jsx(s,{children:f}),e[3]=f,e[4]=$):$=e[4];f=$;e[5]!==o||e[6]!==g||e[7]!==C?($={controller:o,coreVideoStates:g,videoPlayerPassiveViewabilityInfo:C},e[5]=o,e[6]=g,e[7]=C,e[8]=$):$=e[8];b("cr:6094")(r,$);if(e[9]!==E||e[10]!==F||e[11]!==h||e[12]!==i||e[13]!==k||e[14]!==G||e[15]!==H||e[16]!==I||e[17]!==m||e[18]!==J||e[19]!==n||e[20]!==K||e[21]!==L||e[22]!==M||e[23]!==o||e[24]!==N||e[25]!==O||e[26]!==P||e[27]!==p||e[28]!==Q||e[29]!==R||e[30]!==S||e[31]!==U||e[32]!==T||e[33]!==q||e[34]!==r||e[35]!==V||e[36]!==t||e[37]!==u||e[38]!==W||e[39]!==X||e[40]!==v||e[41]!==w||e[42]!==x||e[43]!==y||e[44]!==z||e[45]!==Y||e[46]!==Z||e[47]!==aa||e[48]!==ba||e[49]!==ca||e[50]!==da||e[51]!==ea||e[52]!==fa||e[53]!==ga||e[54]!==ha||e[55]!==ia||e[56]!==ja||e[57]!==ka||e[58]!==la||e[59]!==ma||e[60]!==na||e[61]!==A||e[62]!==B||e[63]!==C||e[64]!==oa||e[65]!==a||e[66]!==D||e[67]!==f){e[69]!==t||e[70]!==u||e[71]!==C?(g=function(a){return l.jsx(c("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:t,isFullscreen:u,videoPlayerPassiveViewabilityInfo:C,children:a})},e[69]=t,e[70]=u,e[71]=C,e[72]=g):g=e[72];$=d("wrapWithContextProviders").wrapWithContextProviders(f,[d("wrapWithContextProviders").makeRenderProviderFn((j||(j=d("VideoPlayerContexts"))).VideoFBIDContext,A),d("wrapWithContextProviders").makeRenderProviderFn(j.StallingContext,ja),d("wrapWithContextProviders").makeRenderProviderFn(j.PlayingContext,fa),d("wrapWithContextProviders").makeRenderProviderFn(j.InPlayStallingContext,U),d("wrapWithContextProviders").makeRenderProviderFn(j.BufferEndContext,J),d("wrapWithContextProviders").makeRenderProviderFn(j.LastMuteReasonContext,x),d("wrapWithContextProviders").makeRenderProviderFn(j.LastPlayReasonContext,z),d("wrapWithContextProviders").makeRenderProviderFn(j.LastPauseReasonContext,y),d("wrapWithContextProviders").makeRenderProviderFn(j.PausedContext,da),d("wrapWithContextProviders").makeRenderProviderFn(j.CurrentAudioTrackIDContext,N),d("wrapWithContextProviders").makeRenderProviderFn(j.CurrentVideoTrackIDContext,P),d("wrapWithContextProviders").makeRenderProviderFn(j.CurrentVideoQualityContext,O),d("wrapWithContextProviders").makeRenderProviderFn(j.MutedContext,ca),d("wrapWithContextProviders").makeRenderProviderFn(j.TargetAudioTrackContext,la),d("wrapWithContextProviders").makeRenderProviderFn(j.VolumeContext,oa),d("wrapWithContextProviders").makeRenderProviderFn(j.SelectedVideoQualityContext,ia),d("wrapWithContextProviders").makeRenderProviderFn(j.SeekingContext,ha),d("wrapWithContextProviders").makeRenderProviderFn(j.DurationContext,Q),d("wrapWithContextProviders").makeRenderProviderFn(j.EndedContext,R),d("wrapWithContextProviders").makeRenderProviderFn(j.ErrorContext,S),d("wrapWithContextProviders").makeRenderProviderFn(j.DimensionsContext,p||null),d("wrapWithContextProviders").makeRenderProviderFn(j.InstanceKeyContext,r),d("wrapWithContextProviders").makeRenderProviderFn(j.ControllerContext,o),d("wrapWithContextProviders").makeRenderProviderFn(j.AvailableAudioTracksContext,G),d("wrapWithContextProviders").makeRenderProviderFn(j.AvailableVideoQualitiesContext,H),d("wrapWithContextProviders").makeRenderProviderFn(j.AvailableVideoTracksContext,I),d("wrapWithContextProviders").makeRenderProviderFn(j.PlayerVersionContext,ea),d("wrapWithContextProviders").makeRenderProviderFn(j.IsAbrEnabledContext,V),d("wrapWithContextProviders").makeRenderProviderFn(j.TargetVideoQualityContext,na),d("wrapWithContextProviders").makeRenderProviderFn(j.PlaybackRateContext,ma),d("wrapWithContextProviders").makeRenderProviderFn(j.CanAutoplayContext,n),d("wrapWithContextProviders").makeRenderProviderFn(j.VolumeSettingContext,a),d("wrapWithContextProviders").makeRenderProviderFn(j.AutoplayGatingResultContext,k),d("wrapWithContextProviders").makeRenderProviderFn(j.BroadcastStatusContext,m),d("wrapWithContextProviders").makeRenderProviderFn(j.LoopCountContext,aa),d("wrapWithContextProviders").makeRenderProviderFn(j.LoopCurrentContext,ba),d("wrapWithContextProviders").makeRenderProviderFn(j.AdClientTokenContext,h),d("wrapWithContextProviders").makeRenderProviderFn(j.ActiveCaptionsContext,E),d("wrapWithContextProviders").makeRenderProviderFn(j.CaptionsVisibleContext,M),d("wrapWithContextProviders").makeRenderProviderFn(j.CaptionDisplayStyleContext,K),d("wrapWithContextProviders").makeRenderProviderFn(j.CaptionsLoadedContext,L),d("wrapWithContextProviders").makeRenderProviderFn(j.InbandCaptionsAutogeneratedContext,T),d("wrapWithContextProviders").makeRenderProviderFn(j.StreamInterruptedContext,ka),d("wrapWithContextProviders").makeRenderProviderFn(j.WatchTimeContext,D),d("wrapWithContextProviders").makeRenderProviderFn(j.LastPlayedTimeContext,Y),d("wrapWithContextProviders").makeRenderProviderFn(j.SeekableRangesContext,ga),d("wrapWithContextProviders").makeRenderProviderFn(j.LatencyLevelContext,Z),d("wrapWithContextProviders").makeRenderProviderFn(j.IsLiveRewindActiveContext,W),d("wrapWithContextProviders").makeRenderProviderFn(j.IsLiveRewindAvailableContext,X),d("wrapWithContextProviders").makeRenderProviderFn(j.AudioAvailabilityInfoContext,i),d("wrapWithContextProviders").makeRenderProviderFn(j.IsNCSRContext,v),d("wrapWithContextProviders").makeRenderProviderFn(j.IsPremiumMusicVideoContext,w),d("wrapWithContextProviders").makeRenderProviderFn(j.InitialTracePolicyContext,q),d("wrapWithContextProviders").makeRenderProviderFn(j.ActiveEmsgBoxesContext,F),d("wrapWithContextProviders").makeRenderProviderFn(j.VideoPixelsAspectRatioContext,($=B)!=null?$:null),g]);e[9]=E;e[10]=F;e[11]=h;e[12]=i;e[13]=k;e[14]=G;e[15]=H;e[16]=I;e[17]=m;e[18]=J;e[19]=n;e[20]=K;e[21]=L;e[22]=M;e[23]=o;e[24]=N;e[25]=O;e[26]=P;e[27]=p;e[28]=Q;e[29]=R;e[30]=S;e[31]=U;e[32]=T;e[33]=q;e[34]=r;e[35]=V;e[36]=t;e[37]=u;e[38]=W;e[39]=X;e[40]=v;e[41]=w;e[42]=x;e[43]=y;e[44]=z;e[45]=Y;e[46]=Z;e[47]=aa;e[48]=ba;e[49]=ca;e[50]=da;e[51]=ea;e[52]=fa;e[53]=ga;e[54]=ha;e[55]=ia;e[56]=ja;e[57]=ka;e[58]=la;e[59]=ma;e[60]=na;e[61]=A;e[62]=B;e[63]=C;e[64]=oa;e[65]=a;e[66]=D;e[67]=f;e[68]=$}else $=e[68];g=$;c("useBlockCappedListItemWhenPlayingVideo")(o,r);c("useDisableVirtualizationWhenPlayingVideo")(o,r);e[73]!==g||e[74]!==r?(E=l.jsx("div",{"data-instancekey":r,"data-testid":void 0,children:g}),e[73]=g,e[74]=r,e[75]=E):E=e[75];return E}f=l.memo(a);g["default"]=f}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.current!=null&&d("CometFullScreen").getFullScreenElement()===a.current}function a(a){var b=[];function e(){b.forEach(function(a){a()})}var f=null;return{getIsFullscreen:function(){return h(a)},requestSetIsFullscreen:function(b,e){var f=a.current;if(f==null)throw c("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");d("CometFullScreen").isSupported()?b!==h(a)&&(b===!0?d("CometFullScreen").requestFullScreen(f):b===!1&&d("CometFullScreen").exitFullScreen()):b&&e!=null&&typeof e.webkitEnterFullScreen==="function"?e.webkitEnterFullScreen():!b&&e!=null&&typeof e.webkitExitFullScreen==="function"&&e.webkitExitFullscreen()},subscribe:function(a){b.length===0&&f==null&&(f=d("CometFullScreen").subscribeToFullScreenChangeEvent(e));b.push(a);return{remove:function(){c("removeFromArray")(b,a),b.length===0&&f!=null&&(f(),f=null)}}}}}g.createFullscreenController=a}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","react-compiler-runtime","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useEffect,j=f.useState;function a(a,b){var e=d("react-compiler-runtime").c(5),f=c("usePrevious")(a),g,h;e[0]!==a||e[1]!==f||e[2]!==b?(g=function(){a!==f&&(f!==null&&f&&!a&&b(d("GlobalVideoPortsID").makeVideoID()))},h=[a,f,b],e[0]=a,e[1]=f,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);i(g,h)}function b(a,b){var c=j(null),e=c[0];c=c[1];a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()),c(a))}var k=c("gkx")("24382")?b:a;function e(a){var b=d("react-compiler-runtime").c(11),c=a.portalingEnabled;a=a.portalingFromVideoID;var e=d("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),f=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),g=d("GlobalVideoPortsContexts").useGlobalVideoPortsState(),h=f!=null&&g!=null,n=(h||e!=null)&&(c||a!=null),o=j(m);o=o[0];var p=j(l),q=p[0];p=p[1];c=n&&c&&a!=null;a=c&&a!=null?a:q;k(c,p);b[0]!==h||b[1]!==n||b[2]!==e?(q=function(){n&&!h&&e&&e()},c=[h,n,e],b[0]=h,b[1]=n,b[2]=e,b[3]=q,b[4]=c):(q=b[3],c=b[4]);i(q,c);b[5]!==n||b[6]!==a||b[7]!==f||b[8]!==g||b[9]!==o?(p={canBecomePortableLater:n,currentVideoID:a,globalVideoPortsManager:f,globalVideoPortsState:g,thisPlaceID:o},b[5]=n,b[6]=a,b[7]=f,b[8]=g,b[9]=o,b[10]=p):p=b[10];return p}function l(){return d("GlobalVideoPortsID").makeVideoID()}function m(){return d("GlobalVideoPortsID").makePlaceID()}g.useRegenerateUniqueVideoID_exportedForTest=k;g.useVideoPlayerPortalingPlaceState=e}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","getOwnObjectValues","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=a.coreVideoPlayerMetaData,e=a.currentPlaceID,f=a.currentVideoID,g=a.fullscreenController,h=a.globalVideoPortsManager,n=a.globalVideoPortsState_DEPRECATED,o=a.implementations,p=a.isFullscreen,q=a.portablePlaceMetaData,r=a.previousPlaceMetaData,s=a.renderComponents,t=a.renderPlaceholder,u=a.thisPlaceID,v=a.trackingDataEncrypted,w=a.trackingNodes,x=a.viewportMarginsForViewability;a=m(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var y=a[0],z=l(null);k(function(){h.addOrUpdatePlace({coreVideoPlayerMetaData:b,fullscreenController:g,implementations:o,injectCoreVideoStatesRef:z,isFullscreen:p,portablePlaceContainer:y,portablePlaceID:u,portablePlaceMetaData:q,portableVideoID:f,renderComponents:s,renderPlaceholder:t,trackingDataEncrypted:v,trackingNodes:w,viewportMarginsForViewability:x})},[].concat(c("getOwnObjectValues")(b),[f,g,p,h,y],c("getOwnObjectValues")(q||{}),[s,t,u,v,w,x]));k(function(){return function(){h.removePlace({portablePlaceID:u})}},[h,u]);a=j(c("BaseContextualLayerAnchorRootContext"));var A=l(null);return i.jsxs(c("BaseContextualLayerAnchorRootContext").Provider,{value:p?A:a,children:[i.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:y},u),i.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:n!=null?(a=(a=h.getCurrentPlaceStateForVideo(n,f))==null?void 0:a.portablePlaceID)!=null?a:null:e,currentVideoID:f,injectCoreVideoStatesRef:z,previousPlaceMetaData:n!=null?(e=(a=h.getPortableVideoState(n,f))==null?void 0:a.previousPlaceMetaData)!=null?e:null:r,renderComponents:s,thisPlaceID:u}),i.jsx("div",{ref:A})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","react-compiler-runtime","recoverableViolation","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=b.useState,n={bottom:0,left:0,right:0,top:0};function o(a){var b=d("react-compiler-runtime").c(4),c=a.ref,e=a.children,f=a.debugRole;a=a.testid;b[0]!==e||b[1]!==f||b[2]!==a?(c=j.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:f,ref:c,testid:void 0,children:e}),b[0]=e,b[1]=f,b[2]=a,b[3]=c):c=b[3];return c}function a(a){var b=d("react-compiler-runtime").c(77),e,f,g,i,q,r,s;b[0]!==a?(f=a.implementations,g=a.portalingEnabled,i=a.portalingFromVideoID,q=a.portalingPlaceMetaData,r=a.renderComponents,s=a.renderPlaceholder,e=babelHelpers.objectWithoutPropertiesLoose(a,["implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","renderComponents","renderPlaceholder"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=q,b[6]=r,b[7]=s):(e=b[1],f=b[2],g=b[3],i=b[4],q=b[5],r=b[6],s=b[7]);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[8]=a):a=b[8];l(p,a);b[9]!==i?(a=i!=null?d("GlobalVideoPortsID").ensureVideoID(i):null,b[9]=i,b[10]=a):a=b[10];a=a;i!=null&&a==null&&c("recoverableViolation")("The provided portalingFromVideoID ("+String(i)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player");b[11]!==g||b[12]!==a?(i={portalingEnabled:g,portalingFromVideoID:a},b[11]=g,b[12]=a,b[13]=i):i=b[13];g=d("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState(i);a=g.canBecomePortableLater;i=g.currentVideoID;var t=g.globalVideoPortsManager,u=g.globalVideoPortsState;g=g.thisPlaceID;var v=k(c("BaseViewportMarginsContext")),w=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),x;b[14]!==w?(x=function(){return d("VideoPlayerFullscreenController").createFullscreenController(w)},b[14]=w,b[15]=x):x=b[15];var y=c("useStable")(x);b[16]!==y?(x=y.getIsFullscreen(),b[16]=y,b[17]=x):x=b[17];x=m(x);var z=x[0],A=x[1],B;b[18]!==y?(x=function(){var a=y.subscribe(function(){var a=y.getIsFullscreen();A(a)});A(y.getIsFullscreen());return function(){a.remove()}},B=[y,A],b[18]=y,b[19]=x,b[20]=B):(x=b[19],B=b[20]);l(x,B);x=k(c("CometTrackingNodesContext"));b[21]!==x?(B=x.join(""),b[21]=x,b[22]=B):B=b[22];x=B;B=k(c("CometTrackingCodeContext"));B=(B=B.encrypted_tracking[0])!=null?B:"";v=z?n:v;var C="comet-video-player-place"+(e.videoFBID!=null?"-vid-"+e.videoFBID:"");if(!a){b[23]!==e||b[24]!==v||b[25]!==y||b[26]!==f||b[27]!==z||b[28]!==r||b[29]!==B||b[30]!==x?(a=j.jsx(c("CoreVideoPlayer.react"),babelHelpers["extends"]({},e,{fullscreenController:y,implementations:f,isFullscreen:z,renderWithCoreVideoStates:r,trackingDataEncrypted:B,trackingNodes:x,viewportMarginsForViewability:v})),b[23]=e,b[24]=v,b[25]=y,b[26]=f,b[27]=z,b[28]=r,b[29]=B,b[30]=x,b[31]=a):a=b[31];var D;b[32]!==i||b[33]!==a||b[34]!==g?(D=j.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:g,currentVideoID:i,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:g,children:a}),b[32]=i,b[33]=a,b[34]=g,b[35]=D):D=b[35];b[36]!==D||b[37]!==C||b[38]!==w?(a=j.jsx(o,{debugRole:null,ref:w,testid:void 0,children:D}),b[36]=D,b[37]=C,b[38]=w,b[39]=a):a=b[39];return a}if(t&&u){if(b[40]!==i||b[41]!==t||b[42]!==u){D=(a=(D=t.getCurrentPlaceStateForVideo(u,i))==null?void 0:D.portablePlaceID)!=null?a:null;b[40]=i;b[41]=t;b[42]=u;b[43]=D}else D=b[43];if(b[44]!==i||b[45]!==t||b[46]!==u){a=(a=(a=t.getPortableVideoState(u,i))==null?void 0:a.previousPlaceMetaData)!=null?a:null;b[44]=i;b[45]=t;b[46]=u;b[47]=a}else a=b[47];b[48]!==e||b[49]!==i||b[50]!==v||b[51]!==y||b[52]!==t||b[53]!==f||b[54]!==z||b[55]!==q||b[56]!==r||b[57]!==s||b[58]!==a||b[59]!==D||b[60]!==g||b[61]!==B||b[62]!==x?(u=j.jsx(c("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:e,currentPlaceID:D,currentVideoID:i,fullscreenController:y,globalVideoPortsManager:t,globalVideoPortsState_DEPRECATED:null,implementations:f,isFullscreen:z,portablePlaceMetaData:q,previousPlaceMetaData:a,renderComponents:r,renderPlaceholder:s,thisPlaceID:g,trackingDataEncrypted:B,trackingNodes:x,viewportMarginsForViewability:v}),b[48]=e,b[49]=i,b[50]=v,b[51]=y,b[52]=t,b[53]=f,b[54]=z,b[55]=q,b[56]=r,b[57]=s,b[58]=a,b[59]=D,b[60]=g,b[61]=B,b[62]=x,b[63]=u):u=b[63];b[64]!==u||b[65]!==C||b[66]!==w?(v=j.jsx(o,{debugRole:null,ref:w,testid:void 0,children:u}),b[64]=u,b[65]=C,b[66]=w,b[67]=v):v=b[67];return v}else{f=(t=e.videoPixelsAspectRatio)!=null?t:null;b[68]!==i||b[69]!==s||b[70]!==f||b[71]!==g?(z=j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:i,previousPlaceMetaData:null,renderPlaceholder:s,thisPlaceID:g,videoPixelsAspectRatio:f}),b[68]=i,b[69]=s,b[70]=f,b[71]=g,b[72]=z):z=b[72];b[73]!==z||b[74]!==C||b[75]!==w?(q=j.jsx(o,{debugRole:null,ref:w,testid:void 0,children:z}),b[73]=z,b[74]=C,b[75]=w,b[76]=q):q=b[76];return q}}function p(){return q}function q(){}g["default"]=a}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext;c={initialTracePolicy:null,routeTracePolicy:null};var j=b.createContext(c);function a(){return i(j)}g.VideoPlayerTracePolicyContext=j;g.useVideoPlayerTracePolicy=a}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(12),c=a.children,e=a.initialTracePolicy,f=a.routeTracePolicy;a=k(e);var g=a[0],h=a[1];a=k(f);var l=a[0],m=a[1],n;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==l?(a=function(){g!==e&&h(e),l!==f&&m(f)},n=[e,f,g,l],b[0]=e,b[1]=f,b[2]=g,b[3]=l,b[4]=a,b[5]=n):(a=b[4],n=b[5]);j(a,n);b[6]!==g||b[7]!==l?(a={initialTracePolicy:g,routeTracePolicy:l},b[6]=g,b[7]=l,b[8]=a):a=b[8];b[9]!==c||b[10]!==a?(n=i.jsx(d("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:a,children:c}),b[9]=c,b[10]=a,b[11]=n):n=b[11];return n}g["default"]=a}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e,f,g,h,j,k,l;b[0]!==a?(e=a.children,g=a.implementations,h=a.portalingEnabled,j=a.portalingFromVideoID,k=a.portalingPlaceMetaData,l=a.portalingRenderPlaceholder,f=babelHelpers.objectWithoutPropertiesLoose(a,["children","implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=k,b[7]=l):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],k=b[6],l=b[7]);b[8]!==e?(a=function(a){return i.jsx(c("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},a,{children:e}))},b[8]=e,b[9]=a):a=b[9];a=a;var m;b[10]!==f||b[11]!==g||b[12]!==h||b[13]!==j||b[14]!==k||b[15]!==l||b[16]!==a?(m=i.jsx(c("VideoPlayerPortalingPlace.react"),babelHelpers["extends"]({},f,{implementations:g,portalingEnabled:h,portalingFromVideoID:j,portalingPlaceMetaData:k,renderComponents:a,renderPlaceholder:l})),b[10]=f,b[11]=g,b[12]=h,b[13]=j,b[14]=k,b[15]=l,b[16]=a,b[17]=m):m=b[17];b[18]!==f.initialTracePolicy||b[19]!==f.routeTracePolicy||b[20]!==m?(g=i.jsx(c("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:f.initialTracePolicy,routeTracePolicy:f.routeTracePolicy,children:m}),b[18]=f.initialTracePolicy,b[19]=f.routeTracePolicy,b[20]=m,b[21]=g):g=b[21];return g}g["default"]=a}),98);
__d("GraphQLVideoAutoplayGatingResult",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=a!=null?a:"unknown";b=b?b:null;return{autoplayGatingResult:a,autoplaySetting:b,canAutoplay:c!=null?c:!1}}f.makeGraphQLVideoAutoplayGatingResult=a}),66);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.values(c("CVCv3DisabledPlayerOrigins")),i=Object.values(c("CVCv3DisabledPlayerSubOrigins")),j=10;a=function(){function a(a,b,d,e,f,g){var j=this;this.$1=new(c("CVCv3SubscriptionHelper"))(a,b,d);this.$5=f;this.$6=null;this.$9=null;this.$10=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=b!=null?h.includes(b):!1;f=d!=null?i.includes(d):!1;!a&&!f&&(this.$3=e,this.$11=g,this.$4=e.subscribe(function(){if(j.$3==null){j.$1.logDebugInfo("empty_video_controller");return}var a=j.$3.getCurrentState();a.playing?j.$12(a):j.$13()}))}var b=a.prototype;b.$12=function(a){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(a.playing){if(this.$2==null){a=this.$3.getPlayheadPosition();a>=0&&(this.$2=a)}}else this.$2=null;this.$14(0)};b.stopUnifiedCVC=function(){this.$13()};b.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};b.$13=function(){c("clearTimeout")(this.$8),c("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.$15=function(){c("clearTimeout")(this.$7),this.$7=null};b.$16=function(){this.$9=null,this.$15(),this.$14(0)};b.$14=function(a){var b=this;if(this.$3==null||this.$8!=null||this.$9!=null||this.$10)return;this.$8=c("setTimeout")(function(){b.$8=null;var a=b.$17();if(a==null){b.$1.logDebugInfo("empty_request");return}b.$9=a;var e=Date.now(),f=!1;c("promiseDone")(a,function(c){if(a!==b.$9)return;b.$9=null;if(c!=null){c=b.$1.processUnifiedResponse(c);b.$18(c,e)}else b.$1.logHttpResponseBad("null payload",Date.now()-e)},function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?JSON.stringify(a):null,Date.now()-e)});b.$7=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$16()},j*d("DateConsts").MS_PER_SEC)},a)};b.$18=function(a,b){this.$15();b=Date.now()-b;a.d!=null?(this.$1.logHttpRequestSuccess(b),this.$11!=null&&this.$11(a.d)):this.$1.logHttpResponseBad("no data field",b);if(a.a!=null){b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=j);this.$14(b*d("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}};b.$17=function(){var a=this.$19();if(a==null)return null;a={d:JSON.stringify(a)};return c("cometAsyncFetch")(c("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};b.$19=function(){if(this.$3==null)return null;var a={};this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$20(d),d.muted,a);return b};b.$20=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};b.testing_setLastStartPosition=function(a){this.$2=a};b.testing_makeUnifiedStateUpdate=function(){return this.$19()};b.testing_handleUnifiedResponse=function(a){return this.$18(a,Date.now())};return a}();g["default"]=a}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});g["default"]=b}),98);
__d("VideoPlayerCaptionsDisplay.react",["VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","react-compiler-runtime","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useContext,m={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},n={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},o={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},p={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function q(a){switch(a){case"center":return m.captionsCenterAlign;case"left":return m.captionsLeftAlign;case"right":return m.captionsRightAlign;default:c("recoverableViolation")("Unsupported captions text alignment: "+a,"comet_video_player")}}function r(a,b,c){var d={},e=a.captionsBackgroundColor,f=a.captionsBackgroundOpacity,g=a.captionsTextColor;a=a.captionsTextSize;if(e!==null){f=f!==null?o[f]:1;d.backgroundColor="rgba("+p[e]+","+f+")"}g!==null&&(d.color="rgba("+p[g]+")");a!==null&&(d.fontSize=b!=null?babelHelpers["extends"]({},n,b)[a]:n[a]);c&&(d.marginBottom=35);return d}function a(a){var b=d("react-compiler-runtime").c(12),e=a.activeCaptions,f=a.adjustments;a=a.captionDisplayStyle;var g=e==null?void 0:e.rows,i=l(c("VideoPlayerCaptionsDisplayConfigContext")),n=i.liveCaptionsTextAlignment;i=i.textSizeMapping;var o=l(d("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext);o=(o==null?void 0:o.getBottomRowAddOn())!=null;var p;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(p={},b[0]=p):p=b[0];p=p;if(a){var v;b[1]!==a||b[2]!==o||b[3]!==i?(v=r(a,i,o),b[1]=a,b[2]=o,b[3]=i,b[4]=v):v=b[4];p=v}a=(j||(j=d("VideoPlayerHooks"))).useIsLive();v=(i=e==null?void 0:(o=e.styles)==null?void 0:o.textAlignment)!=null?i:"center";if(g!=null&&g.length>0){if(b[5]!==f||b[6]!==p||b[7]!==v||b[8]!==a||b[9]!==n||b[10]!==g){e=g.map(u).filter(t);i=e.length>0?k.jsx("div",{className:(h||(h=c("stylex")))(m.captionsContainer,q(a?(o=n)!=null?o:v:v)),style:{paddingLeft:f.left,paddingRight:f.right,transform:"translateY("+-f.bottom+"px)"},children:k.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r x32vodv xat24cr x1v6o4qg xulzisn xoge9qh x1uwfbks xytt9sc",style:p,children:e.map(s)})}):null;b[5]=f;b[6]=p;b[7]=v;b[8]=a;b[9]=n;b[10]=g;b[11]=i}else i=b[11];return i}return null}function s(a,b){return k.jsxs("span",{children:[a,k.jsx("br",{})]},b)}s.displayName=s.name+" [from "+f.id+"]";function t(a){return!!a}function u(a){return a.trim()}b=k.memo(a);e=b;g["default"]=e}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useMemo;function a(){var a=d("react-compiler-runtime").c(2),b=(i||(i=d("VideoPlayerHooks"))).useVideoPlayerCaptionsReservations(),c;a[0]!==b?(c={bottom:0,left:0,right:0,top:0},b.length>0&&b.forEach(function(a){c[a.location]=c[a.location]+a.size}),a[0]=b,a[1]=c):c=a[1];b=c;return b}g["default"]=a}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerCaptionsDisplayAdjustments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(){var a=d("react-compiler-runtime").c(4),b=(i||(i=d("VideoPlayerHooks"))).useActiveCaptions(),e=c("useVideoPlayerCaptionsDisplayAdjustments")(),f=i.useCaptionDisplayStyle(),g;a[0]!==b||a[1]!==e||a[2]!==f?(g=j.jsx(c("VideoPlayerCaptionsDisplay.react"),{activeCaptions:b,adjustments:e,captionDisplayStyle:f}),a[0]=b,a[1]=e,a[2]=f,a[3]=g):g=a[3];return g}g["default"]=a}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useReducer,m=b.useState;function n(a,b){switch(b.type){case"reserve":return a.concat(b.reservation);case"release":return a.filter(function(a){return a!==b.reservation});default:return a}}function a(a){var b=d("react-compiler-runtime").c(11);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0];e=l(n,e);var f=e[0],g=e[1];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e={release:function(a){g({reservation:a,type:"release"})},reserve:function(a){g({reservation:a,type:"reserve"});return a}},b[1]=e):e=b[1];e=m(e);e=e[0];var h=(i||(i=d("VideoPlayerHooks"))).useCaptionsVisible(),o;b[2]!==h?(o=h?k.jsx(c("VideoPlayerCaptions.react"),{}):null,b[2]=h,b[3]=o):o=b[3];b[4]!==a||b[5]!==f||b[6]!==o?(h=k.jsxs((j||(j=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationsContext.Provider,{value:f,children:[o,a]}),b[4]=a,b[5]=f,b[6]=o,b[7]=h):h=b[7];b[8]!==e||b[9]!==h?(a=k.jsx((j||(j=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext.Provider,{value:e,children:h}),b[8]=e,b[9]=h,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));g["default"]=a}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={error:null},c.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromError=function(a){return{error:c("getErrorSafe")(a)}};var e=b.prototype;e.componentDidCatch=function(a,b){b=b.componentStack;var e=c("getErrorSafe")(a);e.componentStack=b;b=this.props;var f=b.description,g=b.onError;b=b.project;a=d("oz-player/utils/OzErrorUtils").isOzError(a)?a.getType():a!=null&&typeof a.name==="string"?a.name:e.name;e.name=a;a="VideoPlayerErrorBoundary caught an "+a;f!=null&&(a=a+" ("+f+")");f=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"];var h=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"];f=f.every(function(a){return e.name!==a})&&h.every(function(a){return!e.message.startsWith(a)});h=c("FBLogger")(b==null?"comet_video_player":b).catching(e);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(e.name)&&(h=h.addToCategoryKey(e.message));f?h.fatal(a):h.warn(a);g!=null&&g(e)};e.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.error;return c?typeof a==="function"?a(c):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometLink.react","FDSText.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b=c("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list";a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:j.jsx(c("CometLink.react"),{href:b,target:"_blank",children:h._(/*BTDS*/"T\u00ecm hi\u1ec3u th\u00eam")})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:1672302","cr:4149","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(21),f=a.background,g=a.debugError,h=a.message,j=a.showDebugWithoutError;a=a.showLearnMoreLink;j=j===void 0?!0:j;a=a===void 0?!0:a;var k;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3"},e[0]=k):k=e[0];var l;e[1]!==f?(l={0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[!!(f!=null)<<0],e[1]=f,e[2]=l):l=e[2];var m;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(m={className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w"},e[3]=m):m=e[3];e[4]!==h?(m=i.jsx("div",babelHelpers["extends"]({},m,{children:i.jsx(c("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:h})})),e[4]=h,e[5]=m):m=e[5];e[6]!==a?(h=a&&i.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w"},{children:i.jsx(c("VideoPlayerFallbackLearnMoreLink.react"),{})})),e[6]=a,e[7]=h):h=e[7];e[8]!==g||e[9]!==j?(a=(g!=null||j)&&i.jsxs(i.Fragment,{children:[b("cr:4149")?i.jsx(b("cr:4149"),{error:g}):null,b("cr:1672302")?i.jsx(b("cr:1672302"),{error:g}):null]}),e[8]=g,e[9]=j,e[10]=a):a=e[10];e[11]!==l||e[12]!==m||e[13]!==h||e[14]!==a?(g=i.jsxs("div",babelHelpers["extends"]({},l,{children:[m,h,a]})),e[11]=l,e[12]=m,e[13]=h,e[14]=a,e[15]=g):g=e[15];e[16]!==f?(j=f!=null&&i.jsx("div",babelHelpers["extends"]({className:"x1ey2m1c xds687c x17qophe x10l6tqk x13vifvy"},{children:f})),e[16]=f,e[17]=j):j=e[17];e[18]!==j||e[19]!==g?(l=i.jsxs("div",babelHelpers["extends"]({},k,{children:[g,j]})),e[18]=j,e[19]=g,e[20]=l):l=e[20];return l}g["default"]=a}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.background,f=a.debugError,g=a.message,i=a.showDebugWithoutError;a=a.showLearnMoreLink;if(b[0]!==g){var k;k=(k=g)!=null?k:h._(/*BTDS*/"R\u1ea5t ti\u1ebfc, \u0111\u00e3 x\u1ea3y ra l\u1ed7i khi ph\u00e1t video n\u00e0y.");b[0]=g;b[1]=k}else k=b[1];g=k;b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==i||b[6]!==a?(k=j.jsx(c("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:e,debugError:f,message:g,showDebugWithoutError:i,showLearnMoreLink:a}),b[2]=e,b[3]=f,b[4]=g,b[5]=i,b[6]=a,b[7]=k):k=b[7];return k}g["default"]=a}),226);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react");function a(a){var b=d("react-compiler-runtime").c(18),e=a.onPress,f=a.onUserInteraction,g=a.shouldUnmute,j=a.showTooltip;a=a.useOutlineIcons;j=j===void 0?!0:j;a=a===void 0?!1:a;var m=(k||(k=d("VideoPlayerHooks"))).useController(),n=k.useIsFullscreen(),o=k.useLastMuteReason(),p;b[0]!==n?(p=n?h._(/*BTDS*/"Tho\u00e1t to\u00e0n m\u00e0n h\u00ecnh"):h._(/*BTDS*/"Chuy\u1ec3n sang to\u00e0n m\u00e0n h\u00ecnh"),b[0]=n,b[1]=p):p=b[1];p=p;var q;b[2]!==m||b[3]!==n||b[4]!==o||b[5]!==e||b[6]!==f||b[7]!==g?(q=function(){e&&e(),m.requestSetIsFullscreen(!n),g===!0&&o!=="user_initiated"&&m.setMuted(!1,"product_initiated"),f&&f({name:"video_fullscreen_button",type:"happened"})},b[2]=m,b[3]=n,b[4]=o,b[5]=e,b[6]=f,b[7]=g,b[8]=q):q=b[8];q=q;var r;b[9]!==a?(r=a?d("fbicon")._(i("528442"),20):d("fbicon")._(i("517758"),20),b[9]=a,b[10]=r):r=b[10];r=r;var s;b[11]!==a?(s=a?d("fbicon")._(i("595830"),20):d("fbicon")._(i("517763"),20),b[11]=a,b[12]=s):s=b[12];a=s;s=n?r:a;r=j?p:null;b[13]!==p||b[14]!==q||b[15]!==s||b[16]!==r?(a=l.jsx(c("VideoPlayerControlIcon.react"),{icon:s,label:p,onPress:q,tooltip:r}),b[13]=p,b[14]=q,b[15]=s,b[16]=r,b[17]=a):a=b[17];return a}g["default"]=a}),226);
__d("VideoPlayerIMFMetadataContext",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j={imfExpectedFromEmsg:!1,specInlineJson:null},k=b.createContext(j);k.displayName="VideoPlayerIMFMetadataContext";e=k.Provider;function a(){var a=i(k);if(a===j)throw c("unrecoverableViolation")("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.","comet_video_player");return a}g.VideoPlayerIMFMetadataContextProvider=e;g.useVideoPlayerIMFMetadataFromContext=a}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return/\.mpd(\?|$)/.test(a)}function a(a){var b=a.hdSrc,d=a.hdSrcPreferred;a=a.sdSrc;if(b==null&&a==null){var e=c("err")("Both HD and SD browser-native URLs are not available");e.name="GotNoBrowserNativeURLs";return e}if(a==null){e=c("err")("Browser-native SD URL is not available");e.name="GotNoBrowserNativeSDURL";return e}e=h(a);var f=b!=null&&h(b);if(e||f){e=c("err")("HD or SD browser-native URL points to a DASH manifest");e.name="GotBrowserNativeURLsPointToDASH";return e}return{hdSrc:b,hdSrcPreferred:d,sdSrc:a}}g.makeProgressiveImplementationData=a}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!==null&&a.indexOf(".m3u8")!==-1}function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;function d(){var a=b(),c="progressive_SD",d="progressive_HD";return a==null?null:h(a.hdSrc)||h(a.sdSrc)?null:a.hdSrc!=null&&a.playingSrc===a.hdSrc?d:a.sdSrc!=null&&a.playingSrc===a.sdSrc?c:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableAudioTracks)!=null?a:[]},getAvailableVideoQualities:function(){var a;return(a=(a=b())==null?void 0:a.availableQualities)!=null?a:[]},getAvailableVideoTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableVideoTracks)!=null?a:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){if(c("gkx")("440"))return d();else return null},getCurrentPlayingAudioTrackID:function(){var a;return(a=(a=b())==null?void 0:a.playingAudioTrackID)!=null?a:null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentPlayingVideoRepresentationID:function(){if(c("gkx")("440"))return d();else return"oep_hd"},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var a=b();return a==null?"progressive":h(a.hdSrc)||h(a.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:a,setUserSelectedVideoVariant:function(a){}}}g.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(a,b,c,d,e,f){"use strict";var g="hd",h="sd";function a(a){var b=[];a.sdSrc!=null&&b.push(h);a.hdSrc!=null&&b.push(g);var c=[],d=[],e=a.hdSrcPreferred&&a.hdSrc!=null?g:h;return babelHelpers["extends"]({},a,{availableAudioTracks:c,availableQualities:b,availableVideoTracks:d,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:e,targetQuality:e,targetSrc:null})}function b(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function c(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=b;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=c}),66);
__d("videoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";b=1<<31;var g=~b,h=b+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=b;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isCdnUrlExpired=a}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1473550","cr:1680308","emptyFunction","err","getErrorNameFromMediaErrorCode","getErrorSafe","gkx","promiseDone","unrecoverableViolation","videoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("emptyFunction");function j(a,b,c){var e=typeof a==="object"&&a!=null&&typeof a.name==="string"?a.name:null;return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",e].filter(Boolean).join("/"),a,b,c)}function a(a){var e=a.checkInDOM,f=a.debugLogId,g=a.handleFatalError,m=a.initialProps;a=a.setExposedStateInReact;var n={current:null},o={current:null},p={current:null},q={current:null},r=function(){var a=x(),e=o.current;if(a==null||e==null)return;a.addEventListener("error",function(){var e=a.error,f=e==null?void 0:e.code,g=c("getErrorNameFromMediaErrorCode")(f);f=e==null?void 0:e.message;var i=f==null||f===""?"Unknown media error":f,j=[],k=f!=null?d("VideoPlayerImplementationErrors").getMoreGranularErrorNameFromHTMLVideoElementErrorMessage(f):null,l=a.src;!e&&a.poster!=null&&a.poster!==""&&(i+="(possible_poster_load_failure)");if(l!==""){var m=null;(h||(h=b("Promise"))).resolve().then(function(){return window.fetch(l)}).then(function(a){var b,c=a.status;b=(b=a.headers.get("Content-Type"))!=null?b:"unknown";i=i+". Fetched video content with Status:"+c+" Content-Type:"+b;m="URL_RESPONSE_HTTP_"+c;if(c<200||c>=300)return a.text().then(function(a){j.push(a.length.toString()),i+=" Body:%s:"+a.substr(0,200)+(a.length>200?"...":"")},function(){})})["catch"](function(a){if(typeof a==="object"&&a!=null&&typeof a.name==="string"&&typeof a.message==="string"){var b;m=(b=m)!=null?b:"URL_RESPONSE_FETCH_FAILED/"+a.name;i=i+". Failed fetching video content with error: "+a.name+" "+a.message}else{m=(b=m)!=null?b:"URL_RESPONSE_FETCH_FAILED";i=i+". Failed fetching video content with unknown error"}})["finally"](function(){var a=c("err").apply(void 0,[i].concat(j));a.name=[g,k,m].filter(Boolean).join("/");z(a,"progressive_implementation_error_with_more_info")})}else{f=c("err").apply(void 0,[i].concat(j));f.name=[g,k,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/");z(f,"progressive_implementation_error_with_empty_src")}});try{var f=e.audioOnly,g=e.graphQLVideoDRMInfo,i=e.videoFBID;f===!0&&(a.style.display="none");f=g?(f=g.fairplayCert)!=null?f:null:null;if(b("cr:1680308")&&g&&f!=null&&i!=null){q.current=b("cr:1680308").newIfSupported(f,a,i,g.videoLicenseUriMap);if(q.current==null){f=c("err")("Fairplay not supported");z(f,"progressive_player_fairplay_handler_missing")}else q.current.addListener("error",function(a){a=c("err")(a.error);z(a,"progressive_player_fairplay_handler_error")})}var j=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);B.current=j;p.current=e;i=w();y({inbandCaptionsAutogeneratedFromManifest:u.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:u.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:i==null?void 0:i.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:u.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:i==null?void 0:i.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:i==null?void 0:i.sideLoadCaptionsUrlFromProps});A.dispatch({payload:{selectedVideoQuality:u.getUserSelectedVideoQuality(),streamingFormat:u.getStreamType()},type:"implementation_engine_initialized"});g=function(){j.setPlayheadPosition(m.startTimestamp)};c("UserAgent").isBrowser("IE11")?c("promiseDone")(j.getDOMLoadedMetadataPromise().then(g)):g()}catch(a){z(a,"progressive_player_create_exception")}},s=function(a,b){if(b==null)return!0;else if(a.videoFBID!==b.videoFBID){var c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",c);return!1}else if(a.hdSrc!==b.hdSrc||a.sdSrc!==b.sdSrc){c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",c);return!1}else return!1},t=function(a){var b;b={audioOnly:a.audioOnly,graphQLVideoDRMInfo:(b=a.graphQLVideoDRMInfo)!=null?b:null,hdSrc:a.hdSrc===""?null:(b=a.hdSrc)!=null?b:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(b=a.sdSrc)!=null?b:null,videoFBID:a.videoFBID};if(!s(b,n.current))return!1;if(b.hdSrc==null&&b.sdSrc==null)throw c("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");n.current=b;o.current=d("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(b);r();return!0},u=d("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(c("gkx")("440")){var a,b=p.current;if(!b)return null;a=(a=B.current)==null?void 0:a.getUnderlyingVideoElement().currentSrc;return babelHelpers["extends"]({},b,{playingSrc:a!=null&&a!==""?a:null})}else return p.current},setUserSelectedVideoQuality:function(a){var b=p.current;if(!b)throw c("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var e=B.current;if(!e)throw c("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");p.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(b,a);var f=p.current.targetSrc;if(f===null){c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",m.videoFBID==null?"":String(m.videoFBID)).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(a));return}k(f,m.expiredVideoUrlRefreshHandler).then(function(a){var b;if(((b=p.current)==null?void 0:b.targetSrc)!==f)return;l(e.getUnderlyingVideoElement(),{crossOrigin:m.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING},a);a=(b=A.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?b:0;a>0&&e.setPlayheadPosition(a);A.getCurrentState().controlledState.playbackState==="playing"&&e.play();A.dispatch({payload:{},type:"representation_changed"})})["catch"](function(a){var b;if(((b=p.current)==null?void 0:b.targetSrc)!==f)return;b=c("getErrorSafe")(a);c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",m.videoFBID==null?"":String(m.videoFBID)).catching(b).warn("Failed refreshing video URL with original error: %s",String(b))})}}),v=function(){q.current&&(q.current.destroy(),q.current=null)};e=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({checkInDOM:e,createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.loggerToVPL;return b("cr:1473550")?b("cr:1473550").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:u,getVideoElementAPI:c,loggerToVPL:a}):null},createVideoPlayerError:function(a,b){return j(a,b,(a=p.current)==null?void 0:a.targetSrc)},debugLog:i,debugLogId:f,destroyEngineParts:function(){v()},engineExtrasAPI:u,engineMetadata:{isAbrEnabled:!1,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:g,handleVideoElementChanged:function(a){a!=null&&r()},handleVideoInfoChange:t,initialProps:m,setExposedStateInReact:a});f=e.engine;var w=e.getCaptionsInfo,x=e.getVideoElement,y=e.handleCaptionsInfoChange,z=e.handleFatalImplementationError,A=e.machine,B=e.videoElementAPIRef;return f}function k(a,e){if(e&&d("videoUrlUtils").isCdnUrlExpired(a))return e(a).then(function(a){var d;return(d=a.refreshedUrl)!=null?d:(h||(h=b("Promise"))).reject(c("err")("Failed refreshing URL"+(a.reason!==null?" with reason: "+a.reason:"")))});else return(h||(h=b("Promise"))).resolve(a)}function l(a,b,c){b=b.crossOrigin;if(c==null||c==="")a.removeAttribute("src");else{var d=a.playbackRate;a.setAttribute("src",c);var e=null;if(b!=null){try{e=new URL(c).origin}catch(a){}if(e!=null&&location.origin!==e)switch(b){case"anonymous":case"use-credentials":a.setAttribute("crossOrigin",b);break;default:a.removeAttribute("crossOrigin");break}}a.playbackRate=d}}g.createVideoPlayerProgressiveImplementationEngine=a;g.internal_setHTMLVideoElementSrc=l}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("VideoPlayerSpinner.react",["FDSLoadingAnimation.react","gkx","react","react-compiler-runtime","stylex","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=36,l={spinner:{height:"xc9qbxq",start:"xtzzx4i",opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transitionDelay:"x5w5eug",transitionDuration:"x13dflua",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x14qfxbe",$$css:!0},spinnerHidden:{opacity:"xg01cxk",transitionDelay:"x2p8vrm",transitionDuration:"x13dflua",transitionProperty:"x1jl3cmp",transitionTimingFunction:"xl405pv",visibility:"xlshs6z",$$css:!0},spinnerSnappier:{transitionDelay:"x2p8vrm",$$css:!0},spinnerSnappierHidden:{transitionDelay:"x1ahifba",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(7);a=a.isVisible;var e=c("useDebouncedValue")(a,a?200:500),f;b[0]!==a?(f=(h||(h=c("stylex"))).props(l.spinner,c("gkx")("24333")?[l.spinnerSnappier,!a&&l.spinnerHidden,!a&&l.spinnerSnappierHidden]:[!a&&l.spinnerHidden]),b[0]=a,b[1]=f):f=b[1];a=!e;b[2]!==a?(e=j.jsx(c("FDSLoadingAnimation.react"),{animationPaused:a,size:k}),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=j.jsx("div",babelHelpers["extends"]({},f,{children:e})),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("VideoPlayerSurface.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");function a(a){a=a.children;return a!=null?a:null}c=b.memo(a);g["default"]=c}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null?void 0:b("cr:13141").extend(),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null?void 0:b("cr:13141").extend(),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useId;function a(){var a=d("react-compiler-runtime").c(4),b=(i||(i=d("VideoPlayerHooks"))).usePlaying(),c=k(),e,f;a[0]!==b||a[1]!==c?(e=function(){if(b){d("WebSessionExtender").subscribe(c,"video");return function(){d("WebSessionExtender").unsubscribe(c)}}},f=[b,c],a[0]=b,a[1]=c,a[2]=e,a[3]=f):(e=a[2],f=a[3]);j(e,f);return null}g["default"]=a}),98);
__d("VideoPlayerWithThumbnail.react",["CometImage.react","CometVisualCompletionAttributes","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useEffect,l=b.useState,m={thumbnail:{height:"x5yr21d",width:"x14atkfc",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(10),e=a.onLoad,f=a.src;a=a.thumbnailStyle;var g=(i||(i=d("VideoPlayerHooks"))).useVideoPlaybackEnded(),h=i.usePaused(),n=l(!1),o=n[0],p=n[1],q;b[0]!==h?(n=function(){h||p(!0)},q=[h],b[0]=h,b[1]=n,b[2]=q):(n=b[1],q=b[2]);k(n,q);if(!g&&o)return null;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(n="x6s0dn4 x1ey2m1c x9f619 x78zum5 xds687c x17qophe xl56j7k x10l6tqk x13vifvy",b[3]=n):n=b[3];b[4]!==a?(q=[m.thumbnail,a],b[4]=a,b[5]=q):q=b[5];b[6]!==e||b[7]!==f||b[8]!==q?(g=j.jsx("div",babelHelpers["extends"]({className:n},c("CometVisualCompletionAttributes").IGNORE,{children:j.jsx(c("CometImage.react"),{onLoad:e,src:f,xstyle:q})})),b[6]=e,b[7]=f,b[8]=q,b[9]=g):g=b[9];return g}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=d("VideoPlayerHooks"))).useStalling(),c=h.useStreamInterrupted(),e=h.useIsLiveRewindActive();c=c&&!e;e=b;b=c?"live_video_interrupted_overlay":e?"spinner":"none";var f;a[0]!==c||a[1]!==b||a[2]!==e?(f={liveVideoInterruptedOverlayVisible:c,loadingIndicatorType:b,spinnerVisible:e},a[0]=c,a[1]=b,a[2]=e,a[3]=f):f=a[3];return f}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),k=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),l=c("once")(function(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(k,{})})});function a(){var a=d("react-compiler-runtime").c(6),b=c("useVideoPlayerDefaultLoadingIndicatorsLogic")(),e=b.loadingIndicatorType;b=b.spinnerVisible;var f;a[0]!==b?(f=i.jsx(j,{isVisible:b}),a[0]=b,a[1]=f):f=a[1];b=f;var g;bb0:switch(e){case"spinner":g=b;break bb0;case"live_video_interrupted_overlay":a[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=l(),a[2]=f):f=a[2];g=f;break bb0;case"none":default:g=b}a[3]!==g||a[4]!==e?(f={loadingIndicatorElement:g,loadingIndicatorType:e},a[3]=g,a[4]=e,a[5]=f):f=a[5];return f}g["default"]=a}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.setterHook;e=d("createVideoStateHook").createVideoStateHook(null);var l=e.setterHook;f=e.valueHook;function a(a){var b=d("react-compiler-runtime").c(12),e=a.disableSubscription,f=a.playerFormat,g=a.subOrigin,h=a.videoFBID,m=(i||(i=d("VideoPlayerHooks"))).useIsLive(),n=i.useIsFullscreen(),o=i.useIsDesktopPictureInPicture(),p=i.useController(),q=k(),r=l(),s;b[0]!==e||b[1]!==o||b[2]!==n||b[3]!==m||b[4]!==f||b[5]!==r||b[6]!==q||b[7]!==g||b[8]!==p||b[9]!==h?(a=function(){if(e===!0){c("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:h,name:"disable_subscription"}});return}var a=new(c("UnifiedVideoCVCSubscription"))(h,c("getPlayerFormatForLogData")({isDesktopPictureInPicture:o,isFullscreen:n},f),g,p,m,function(a){r(a)});q(a);return function(){a.destroy()}},s=[o,n,m,e,f,r,q,g,p,h],b[0]=e,b[1]=o,b[2]=n,b[3]=m,b[4]=f,b[5]=r,b[6]=q,b[7]=g,b[8]=p,b[9]=h,b[10]=a,b[11]=s):(a=b[10],s=b[11]);j(a,s)}b=f;g.useVideoPlayerUnifiedCVCProvider=a;g.useVideoPlayerUnifiedCVCData=b}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","react-compiler-runtime","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(21),f=a.children,g=a.disableCVCSubscription,h=a.disableLoadingIndicator,j=a.disableLogging,k=a.instreamVideoAdBreaksPlayer,l=a.playerFormat,m=a.subOrigin,n=a.videoFBID,o=a.videoPlayerIMFFromVideoMetadata;a=a.videoPlayerSpherical;h=h===void 0?!1:h;j=j===!0||g===!0;e[0]!==l||e[1]!==m||e[2]!==j||e[3]!==n?(g={disableSubscription:j,playerFormat:l,subOrigin:m,videoFBID:n},e[0]=l,e[1]=m,e[2]=j,e[3]=n,e[4]=g):g=e[4];d("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider(g);l=c("useVideoPlayerDefaultLoadingIndicators")();j=l.loadingIndicatorElement;g=(n=o)!=null?n:null;l=h?null:j;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(o=c("gkx")("24328")?i.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,e[5]=o):o=e[5];e[6]!==f||e[7]!==k?(n=i.jsxs(c("VideoPlayerCaptionsAreaDeferred.react"),{children:[f,k]}),e[6]=f,e[7]=k,e[8]=n):n=e[8];e[9]===Symbol["for"]("react.memo_cache_sentinel")?(h=i.jsx(c("CoreVideoPlayerAutoplayClient.react"),{}),j=i.jsx(c("CoreVideoPlayerAudioClient.react"),{}),f=b("cr:1954434")?i.jsx(b("cr:1954434"),{}):null,e[9]=f,e[10]=h,e[11]=j):(f=e[9],h=e[10],j=e[11]);e[12]!==m?(k=b("cr:99")?i.jsx(b("cr:99"),{subOrigin:m}):null,e[12]=m,e[13]=k):k=e[13];e[14]===Symbol["for"]("react.memo_cache_sentinel")?(m=i.jsx(c("VideoPlayerWebSessionExtender.react"),{}),e[14]=m):m=e[14];e[15]!==k||e[16]!==g||e[17]!==l||e[18]!==n||e[19]!==a?(o=i.jsxs(d("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:g,children:[a,l,o,n,h,j,f,k,m]}),e[15]=k,e[16]=g,e[17]=l,e[18]=n,e[19]=a,e[20]=o):o=e[20];return o}g["default"]=a}),98);
__d("normalizeVideoPlayerLoopCount",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b===void 0&&(b=null);d===void 0&&(d=null);if(a==null){var e;d=((e=b)!=null?e:!1)?(e=d)!=null?e:0:0;d===-1?e=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?e=0:d===0&&b===!0?e=-1:e=d}else if(a===-1||a===Number.POSITIVE_INFINITY)e=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw c("unrecoverableViolation")("Invalid loopingCount: "+a,"comet_video_player");else e=a;return e}g["default"]=a}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","normalizeVideoPlayerLoopCount","react","react-compiler-runtime","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(36),e,f,g,h,j,k,l,m,n,o,p;b[0]!==a?(e=a.children,g=a.disableLoadingIndicator,h=a.implementations,j=a.instreamVideoAdBreaksPlayer,k=a.portalingEnabled,l=a.portalingFromVideoID,m=a.portalingPlaceMetaData,n=a.portalingRenderPlaceholder,o=a.videoPlayerIMFFromVideoMetadata,p=a.videoPlayerSpherical,f=babelHelpers.objectWithoutPropertiesLoose(a,["children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=k,b[7]=l,b[8]=m,b[9]=n,b[10]=o,b[11]=p):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],k=b[6],l=b[7],m=b[8],n=b[9],o=b[10],p=b[11]);a=c("usePlayerOriginRouteTracePolicy")();var q=c("useRouteProductAttribution")();q||(q=f.productAttribution);var r=f,s=r.loopCount,t=r.playerFormat,u=r.subOrigin;r=r.videoFBID;var v;b[12]!==s?(v=c("normalizeVideoPlayerLoopCount")(s),b[12]=s,b[13]=v):v=b[13];s=v;b[14]!==e||b[15]!==f.loggingConfig.disableCVCSubscription||b[16]!==f.loggingConfig.disableLogging||b[17]!==g||b[18]!==j||b[19]!==t||b[20]!==u||b[21]!==r||b[22]!==o||b[23]!==p?(v=i.jsx(c("VideoPlayerXImplSurface.react"),{children:e,disableCVCSubscription:f.loggingConfig.disableCVCSubscription,disableLoadingIndicator:g,disableLogging:f.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:j,playerFormat:t,subOrigin:u,videoFBID:r,videoPlayerIMFFromVideoMetadata:o,videoPlayerSpherical:p}),b[14]=e,b[15]=f.loggingConfig.disableCVCSubscription,b[16]=f.loggingConfig.disableLogging,b[17]=g,b[18]=j,b[19]=t,b[20]=u,b[21]=r,b[22]=o,b[23]=p,b[24]=v):v=b[24];b[25]!==f||b[26]!==h||b[27]!==s||b[28]!==k||b[29]!==l||b[30]!==m||b[31]!==n||b[32]!==q||b[33]!==a||b[34]!==v?(e=i.jsx(c("CoreVideoPlayerWithComponents.react"),babelHelpers["extends"]({},f,{implementations:h,loopCount:s,portalingEnabled:k,portalingFromVideoID:l,portalingPlaceMetaData:m,portalingRenderPlaceholder:n,productAttribution:q,routeTracePolicy:a,children:v})),b[25]=f,b[26]=h,b[27]=s,b[28]=k,b[29]=l,b[30]=m,b[31]=n,b[32]=q,b[33]=a,b[34]=v,b[35]=e):e=b[35];return e}g["default"]=a}),98);
__d("computeAspectRatio",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a!=null&&b!=null&&a!==0&&b!==0?a/b:null}f["default"]=a}),66);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return c("gkx")("24345")&&a.message.toLowerCase().indexOf("audio_renderer_error")>=0}function j(a){return a.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function k(a){return a.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||a.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function l(a){return a.name==="OZ_NETWORK"&&a.message.includes("CDN URL expired")}function a(a){var b=null;i(a)?b=h._(/*BTDS*/"L\u1ed7i v\u1ec1 c\u00f4ng c\u1ee5 t\u1ea1o \u00e2m thanh: Vui l\u00f2ng kh\u1edfi \u0111\u1ed9ng l\u1ea1i m\u00e1y t\u00ednh."):j(a)?b=h._(/*BTDS*/"Video n\u00e0y \u0111\u01b0\u1ee3c DRM b\u1ea3o v\u1ec7 nh\u01b0ng c\u00f3 v\u1ebb nh\u01b0 ch\u1ee9ng ch\u1ec9 thi\u1ebft b\u1ecb c\u1ee7a b\u1ea1n \u0111\u00e3 b\u1ecb thu h\u1ed3i. H\u00e3y \u0111\u1ea3m b\u1ea3o r\u1eb1ng b\u1ea1n \u0111ang d\u00f9ng tr\u00ecnh duy\u1ec7t phi\u00ean b\u1ea3n m\u1edbi r\u1ed3i th\u1eed l\u1ea1i."):k(a)?b=h._(/*BTDS*/"Kh\u00f4ng th\u1ec3 ph\u00e1t video n\u00e0y tr\u00ean tr\u00ecnh duy\u1ec7t, h\u1ec7 \u0111i\u1ec1u h\u00e0nh ho\u1eb7c ph\u1ea7n c\u1ee9ng m\u00e0 b\u1ea1n \u0111ang d\u00f9ng."):l(a)&&(b=h._(/*BTDS*/"Hi\u1ec7n kh\u00f4ng xem \u0111\u01b0\u1ee3c n\u1ed9i dung video n\u00e0y."));return b}g["default"]=a}),226);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=c("getVideoPlayerUserFacingErrorMessageFromError")(a);return i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getVideoPlayerAutoplayProps",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b!=null?b:"respect_user_settings";var d=b==="dangerously_always_autoplay";c=c!=null?c:"unknown";var e=a.autoplaySetting||"default_autoplay",f=e==="off";d=d||b==="respect_user_settings"&&!f&&a.canAutoplay;f=b==="do_not_autoplay"?c:a.autoplayGatingResult;c=d?"allow":b==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:f,autoplaySetting:e,canAutoplay:c}}f["default"]=a}),66);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"};b=a;f["default"]=b}),66);
__d("useVideoPlayerClickToPauseInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(5),b=(j||(j=d("VideoPlayerHooks"))).usePlaying(),c=j.useController(),e=j.useIsLive(),f;a[0]!==c?(f=function(){c.pause("user_initiated")},a[0]=c,a[1]=f):f=a[1];f=f;b=b&&!e;a[2]!==b||a[3]!==f?(e=b?{ariaLabel:h._(/*BTDS*/"T\u1ea1m d\u1eebng video"),handler:f,overlayLabel:""}:null,a[2]=b,a[3]=f,a[4]=e):e=a[4];return e}g["default"]=a}),226);
__d("useVideoPlayerClickToPlayInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime","useFeedClickEventHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(i||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;var f=a.shouldUnmute;e=(j||(j=d("VideoPlayerHooks"))).usePaused();var g=j.useController(),i=j.useLastMuteReason();b[2]!==g||b[3]!==i||b[4]!==f?(a=function(){g.play("user_initiated"),f===!0&&i!=="user_initiated"&&g.setMuted(!1,"product_initiated")},b[2]=g,b[3]=i,b[4]=f,b[5]=a):a=b[5];a=a;a=c("useFeedClickEventHandler")(a);e=e;var k;b[6]!==e||b[7]!==a?(k=e?{ariaLabel:h._(/*BTDS*/"Ph\u00e1t video"),handler:a,overlayLabel:""}:null,b[6]=e,b[7]=a,b[8]=k):k=b[8];return k}g["default"]=a}),226);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState,l=5e3;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;e=a.forceVisible;a=a.forceVisibleOnMount;var f=d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),g=f.ongoingInteractionsCount;f=f.onUserInteraction;var h=(i||(i=d("VideoPlayerHooks"))).useEnded(),m=i.useIsHovering(),n=i.usePaused(),o=i.useIsMouseIdle(),p=i.useVideoPlaybackEnded(),q=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",m&&!o,f);m=k(a===!0);var r=m[0],s=m[1];b[2]!==r||b[3]!==n?(o=function(){if(!n&&r){var a=c("setTimeout")(function(){s(!1)},l);return function(){c("clearTimeout")(a)}}},a=[r,n],b[2]=r,b[3]=n,b[4]=o,b[5]=a):(o=b[4],a=b[5]);j(o,a);e===!0||e===!1?m=e:q?m=!1:g>0||r?m=!0:n?m=h?p:!0:m=!1;b[6]!==m||b[7]!==f?(o={isControlsVisible:m,onUserInteraction:f},b[6]=m,b[7]=f,b[8]=o):o=b[8];return o}g["default"]=a}),98);
__d("validateTrackingCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null&&typeof a==="object"&&a.click_tracking_linkshim_cb!=null&&a.encrypted_click_tracking!=null&&a.encrypted_tracking!=null?a:null}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("699");b=d("FalcoLoggerInternal").create("armadillo_cutover_client",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function a(a,b){h.onReadyImmediately(function(c){c=c.saveAs;c(b,a)})}g.saveFile=a}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[0].set("wa_jid",void 0),d[0].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[0].set("message_product_type",void 0),d[0].set("is_message_deletion",!1),d[0].set("is_unbump",a[3]),d[1]=d[0].get("thread_key"),c.storedProcedure(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),c.i64.cast([0,389]))},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[2].set("tam_thread_subtype",c.i64.cast([0,0])),d[2].set("wa_jid",void 0),d[2].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[2].set("message_product_type",void 0),d[2].set("is_message_deletion",!1),d[2].set("is_unbump",a[3]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,389]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpE2EEMetadataThread"),e.threadKey,e.serverAuthoritativeTimestampMs,e.bumpedByLocalDeviceSend,e.isUnbump);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSClearMessagePlaceholderRangeStoredProcedure",["LSClearMessagePlaceholderRange","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSClearMessagePlaceholderRange"),e.threadKey,e.messageId,e.maxTimestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSInsertNewMessageRangeStoredProcedure",["LSInsertNewMessageRange","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertNewMessageRange"),e.threadKey,e.newMinTs,e.newMaxTs,e.newMinMid,e.newMaxMid,e.lowerOverlap,e.upperOverlap,e.hasMoreBefore,e.hasMoreAfter,e.requestedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),a[5]!==void 0?d[1]=a[5]:(d[27]=c.i64.random(),d[1]=c.i64.to_string(d[27])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[32]=e.backupTenancy,d[31]=e.encryptionVersion,d[27]=void 0,c.i64.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[31],a)})?d[41]=d[31]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[28]=d[42]}])},function(a){return c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[30]=d[32]:d[30]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[29],d[30],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17],a}]))})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?(d[27]=c.i64.to_string(d[2]),d[27]!==void 0?c.sequence([function(e){return d[28]=c.createArray(),d[63]=(d[28].push(d[27]),d[28]),d[63]=(d[28].push(a[0]),d[28]),d[29]=c.toJSON(d[28]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[30]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[27]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(e){return d[38]=new c.Map(),d[38].set("attachment_index_key",d[33]==null?"":d[33]),d[38].set("delivery_object_id",a[0]),d[38].set("device_id",d[3]),d[38].set("mailbox_partial_id",d[37]==null?"":d[37]),d[38].set("media_type",a[2]),d[38].set("product_type",a[1]),d[38].set("trace_id",d[1]),d[39]=new c.Map(),d[39].set("otid",a[3]),d[39].set("server_thread_key",a[6]),d[39].set("timestamp",void 0),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(e){return d[38].set("salt_partial_id",d[43]==null?"":d[43]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return d[38].set("thread_partial_id",d[47]==null?"":d[47]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return d[38].set("message_partial_id",d[51]==null?"":d[51]),d[52]=c.createArray(),d[63]=(d[52].push(a[3]),d[52]),d[63]=(d[52].push(a[0]),d[52]),d[53]=c.toJSON(d[52]),d[38].set("raw_identifiers",d[39]),d[38].set("backup_id",d[27]),d[38].set("thread_id",a[4]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[38].set("salt_partial_access_token",d[57]==null?"":d[57]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[59]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[38].set("salt_partial_attachment_index_key",d[61]==null?"":d[61]),d[62]=c.toJSON(d[38]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_upload",c.i64.cast([0,50012]),d[62],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):(d[29]="Missing backup_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[30]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3])))):(d[28]="Missing device_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[29]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))):(d[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[29]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3])))},function(a){return d[21]=c.i64.of_float(Date.now()),d[22]=c.i64.random(),d[24]="Finishing execution. Execution time: ",d[25]=c.i64.to_string(c.i64.sub(d[21],d[0])),d[26]=" ms",d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",d[23],d[24],d[23],d[25],d[23],d[26]].join("")),c.i64.eq(c.i64.mod_(d[22],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[27]=",",d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[d[24],d[27],d[25],d[27],d[26]].join(""),d[28],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentBackupTask"),e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.traceId,e.serverThreadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1],e)})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[43]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[53]=(d[43].push(c.i64.cast([0,0])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[53]=(d[43].push(c.i64.cast([0,2])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]?d[53]=(d[43].push(c.i64.cast([0,3])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[47]?d[53]=(d[43].push(c.i64.cast([0,4])),d[43]):0,d[48]=c.createArray(),d[49]=c.i64.of_int32(d[43].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[53]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[53]).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[56]=(d[48].push(d[54]),d[48])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[53]=c.createArray(),d[54]=c.i64.of_int32(d[48].length),c.i64.gt(d[54],c.i64.cast([0,0]))?c.loopAsync(d[54],function(a){return d[56]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[56]).then(function(a){return a=a,d[57]=a[0],d[58]=a[1],a})},function(a){return d[59]=(d[53].push(c.i64.to_string(d[57])),d[53])}])}):c.resolve()},function(a){return d[55]=d[53].join(","),d[50]=d[55]}])},function(a){return d[48].some(function(a){return c.i64.eq(d[29],a)})?d[51]=d[29]:d[51]=void 0,c.i64.neq(d[51],void 0)?d[52]=d[51]:d[52]=void 0,d[37]=d[52]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),void 0,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[40],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[40],c.i64.cast([0,0])))),c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],a})},function(b){return c.db.table(177).add({pk:void 0,pendingBackupTaskId:d[41],actionType:c.i64.cast([0,2]),contentType:c.i64.cast([0,2]),backupStatus:c.i64.cast([0,1]),listKey:a[0],uniqueKey:a[0],sortKey:a[1],persistentId:"",isInstamadillo:!1,lsTraceId:a[3],error:a[4]})},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message backup task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued thread remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve())},function(a){return d[42]=new c.Map(),d[42].set("task_id",d[41]),a=[d[42],void 0],d[34]=a[0],d[35]=a[1],a}]):c.sequence([function(b){return d[36]=c.createArray(),d[39]=(d[36].push("Skipping thread remove since EB is disabled. act thread id = "),d[36]),d[39]=(d[36].push(a[0]),d[36]),d[37]=d[36].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[37]].join("")),c.resolve()},function(a){return d[38]=new c.Map(),d[38].set("error_code",c.i64.cast([0,24])),d[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[38].set("error_message",""),a=[void 0,d[38]],d[34]=a[0],d[35]=a[1],a}])},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.sequence([function(b){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=c.createArray(),d[20]=(d[17].push("Skipping thread remove since EB is disabled. act thread id = "),d[17]),d[20]=(d[17].push(a[0]),d[17]),d[18]=d[17].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[18]].join("")),c.resolve()},function(a){return d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[19].set("error_message",""),a=[void 0,d[19]],d[7]=a[0],d[8]=a[1],a}])},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"];e.exports=a}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueThreadRemove"),e.actThreadId,e.sortKey,e.source,e.traceId,e.error);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_self_remove",!1),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,394]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateE2EEMetadataParticipants"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpsertAttachmentRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(17).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(c){return b.db.table(17).add({threadKey:a[0],mediaGroup:a[1],minTimestampMs:a[2],maxTimestampMs:b.i64.cast([2328,1316134911]),hasMoreBefore:a[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1,lastLoadedMessageId:a[4]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertAttachmentRangeStoredProcedure";a.__tables__=["attachments_ranges_v2__generated"];e.exports=a}),null);
__d("LSUpsertAttachmentRangeStoredProcedure",["LSSynchronousPromise","LSUpsertAttachmentRange","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpsertAttachmentRange"),e.threadKey,e.mediaGroup,e.newMinTs,e.hasMoreBefore,e.newLastLoadedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","cr:17064","cr:17065","emptyFunction","gkx","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),k=h.ofNumber(c("LSMessageSearchType").THREAD);function a(a,b,d){return d.length===0?Promise.resolve():Promise.all([m(a,b,d),n(a,b,d)]).then(c("emptyFunction"))}async function l(a,b){var c=await d("MAWFTSRawStringMatcher").load();return b.filter(function(b){b=(b=b.msg)==null?void 0:b.content;return b==null?!1:c(a,b)})}async function m(a,e,f){var g=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(j));if(g.length===0)return;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(e,h){return async function(){var c=g.filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,h)})[0];if(c==null)return;var j=c.query;if(j==null||j.length<2)return;var k=(i||(i=d("I64"))).to_int32(c.resultCount);j=await l(j,f);if(j.length===0)return;await b("cr:17064").addBridgeSearchMsgsToSearchResult(a,e,c.query,j,k+j.length,i.of_string(d("MAWCurrentUser").getID()))}().then(c("emptyFunction"))})}async function n(a,e,f){if(!c("isMAWUniversalSearchWithEBEnabled")())return;var g=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(k).filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,i.one)}));if(g==null)return;var h=g.query;if(h==null||h.length<2)return;var j=await l(h,f);if(j.length===0)return;if(c("gkx")("11537"))c("promiseDone")(c("waitForMiActMappingForUniversalSearch")(a,f[0].chatJid),function(c){if(c!=null)return b("cr:17065")(a,void 0,c.serverThreadKey,h,j,g)});else{await c("waitForMiActMappingForUniversalSearch")(a,f[0].chatJid);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(c,d){return b("cr:17065")(a,c,d,h,j,g)})}}g.call=a}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["I64","Promise","WAJids","WALogger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to call restore native op - echo and protobuf messages are both null"]);j=function(){return a};return a}var k=c("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler"),l=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("MAWBridgeCallRestoreNativeOpHandler");function a(a,c){var e=c.chatJid,f=c.decryptedMessagesProtobufs,g=c.echoMessages,m=c.hasMoreAfter,n=c.hasMoreBefore,o=c.isPointQuery,p=c.nextMessageTimestampMsAfter,q=c.nextMessageTimestampMsBefore,r=c.referenceTimestamp,s=c.requestId,t=c.taskSource;if(f!=null)return k.load().then(function(a){return a.handleProtobufRestoreHelper(d("WAJids").threadIdForChatJid(e),{convertedProtobufs:f,type:"convertedProtobufs"},n,q,m,p,o,s,r,void 0,void 0,t,e)});else if(g!=null)return l.load().then(function(c){return c(a,0,(i||(i=d("I64"))).zero,g,n,q,m,p,o,d("WAJids").threadIdForChatJid(e),s,r,t,e).then(function(){return(h||(h=b("Promise"))).resolve()})});else d("WALogger").ERROR(j());return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeCentralizedThreadUpdateHandler",["I64","LSAuthorityLevel","LSBumpE2EEMetadataThreadStoredProcedure","LSDatabaseSingleton","LSFactory","LSIntEnum","MAWBridgeBuildThreadSnippet","MAWBridgeFireAndForget","MAWChatJid","MAWJids","MAWLocalizationType","MAWMiActGetThreadLifecycleState","MAWODSProxy","MAWThreadBumpType","MAWThreadUpdateMiddlewareGatingUtil","MAWThreadUpdateType","MWFBLogger","ODS","ReQL","WAJids","WAOdsEnums","WATimeUtils","getMAWLastMessageCtaType","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Skipping receiver bump for own message on thread ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Starting Thread Update on "," via middleware. threadKey: ",", authorityLevel: ",", lastActivityTimestampMs: ",", bumpTimestampMs: ",", bumpedByLocalDeviceSend: ",", bumpType: ",", threadUpdateType: ",", isUnbump: ",", isThrottled: "," from ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo][Middleware] Updated thread via middleware. threadKey: ",", bumpTimestampMs: ",",\n    original lastActivityTimestampMs: ","\n    , bumpedByLocalDeviceSend: ",", bumpType: ",", threadUpdateType: ",",  from ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered lastActivityTs == 0 for thread jid : "," with authority level: ",", threadType : ",", threadStatus : ",", folderType : ",", numMsgs (limit 5): "," and msgContentTypes: [","]"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for bumping jid: "," with thread state: ",""]);p=function(){return a};return a}var q=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);async function a(a,b){var e=await d("MAWChatJid").toThreadMaybe(a,b.jid);if(e==null){var f=await d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b.jid),"MAWBridgeCentralizedThreadUpdateHandler");q.MUSTFIX(p(),b.jid,f.type);return}return(h||(h=d("I64"))).lt(e.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&!b.bumpedByLocalDeviceSend?D(e,b):r(a,e,b)}async function r(a,b,e){var f=b;b=f;b=b.threadKey;var g=e.author,i=e.bumpedByLocalDeviceSend,k=e.bumpTimestampMs,l=e.centralizedThreadSnippetData,m=e.threadUpdateType;if(m===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE)return;var n=f.lastActivityTimestampMs;y(e,f,"Local",e.isUnbump,e.threadBumpType);if((h||(h=d("I64"))).equal(n,(h||(h=d("I64"))).zero)){var p;F("zero_last_activity_timestamp");var r=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(f.threadKey).take(5)),u=r.length;r=r.map(function(a){return(h||(h=d("I64"))).to_string(a.displayedContentTypes)}).join(",");q.WARN(o(),e.jid,(h||(h=d("I64"))).to_string(f.authorityLevel),h.to_string(f.threadType),h.to_string((p=f.threadStatus)!=null?p:(h||(h=d("I64"))).neg_one),f.folderName,u,r)}p=z(e,n);u=p.isUnbump;r=p.threadBumpType;if(m===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD||m===d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD||u){F("bump_on_local");u&&(f=t(u,k,f),m!==d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD&&(f=v(k,f,u)));p=A(g,i,r,k,n,f.threadKey,l.snippetType);if(p){m={bumpedByLocalDeviceSend:i,isUnbump:u,serverAuthoritativeTimestampMs:k,threadKey:b};(j||(j=d("ODS"))).bumpEntityKey(3185,"maw_tc_server_thread_bump",""+((g=e.centralizedThreadSnippetData.snippetType)!=null?g:"undefined"));y(e,f,"Server",u,r);await s(c("LSFactory")(a),m)}}var B=w(e.centralizedThreadSnippetData,f);return a.threads.put(B).then(function(){f!=null&&x(e,n,B)})}async function s(a,b){F("bump_on_server");return c("LSBumpE2EEMetadataThreadStoredProcedure")(a,b)}function t(a,b,c){return!u(a,b,c)?c:babelHelpers.extends({},c,{lastActivityTimestampMs:b})}function u(a,b,c){return a?(h||(h=d("I64"))).lt(b,c.lastActivityTimestampMs):(h||(h=d("I64"))).gt(b,c.lastActivityTimestampMs)}function v(a,b,c){return!c&&(h||(h=d("I64"))).lt(a,b.lastReadWatermarkTimestampMs)?b:babelHelpers.extends({},b,{lastReadWatermarkTimestampMs:a})}function w(a,b){var e=a.snippetSenderContactId!=null?(h||(h=d("I64"))).of_string(a.snippetSenderContactId):(h||(h=d("I64"))).zero,f=c("getMAWLastMessageCtaType")(a.snippetType);a=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,b.snippet);return babelHelpers.extends({},b,{lastMessageCtaType:f,snippet:a,snippetSenderContactId:e})}function x(a,b,c){q.DEBUG(n(),(h||(h=d("I64"))).to_string(c.threadKey),h.to_string(c.lastActivityTimestampMs),h.to_string(b),a.bumpedByLocalDeviceSend,a.threadBumpType,a.threadUpdateType,a.description)}function y(a,b,c,e,f){c=[c,(h||(h=d("I64"))).to_string(b.threadKey),h.to_string(b.authorityLevel),h.to_string(b.lastActivityTimestampMs),h.to_string(a.bumpTimestampMs),a.bumpedByLocalDeviceSend,f,a.threadUpdateType,e,a.isThrottled,a.description];q.DEBUG(m(),c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10])}function z(a,b){var e=c("justknobx")._("3068");if(e)return{isUnbump:a.isUnbump,threadBumpType:a.threadBumpType};e=(h||(h=d("I64"))).lt(a.bumpTimestampMs,b);if(a.isThrottled&&e){switch(a.tableName){case"messages":F("unbump_from_message_in_throttle");break;case"reactions":F("unbump_from_reaction_in_throttle");break;default:F("unbump_from_throttle")}e=a.tableName==="reactions";e&&d("MAWThreadUpdateMiddlewareGatingUtil").isPeristedUnbumpEnabled()&&d("MAWBridgeFireAndForget").fireAndForget("backend","unbumpThread",{incomingUnbumpFromTs:d("WATimeUtils").castToMillisTime((h||(h=d("I64"))).to_float(b)),threadJid:a.jid});return{isUnbump:!0,threadBumpType:d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_ONLY}}return{isUnbump:a.isUnbump,threadBumpType:a.threadBumpType}}function A(a,b,c,e,f,g,i){if(c!==d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_AND_SERVER)return!1;if(B(a,b,i)){q.DEBUG(l(),(h||(h=d("I64"))).to_string(g));return!1}F("check_if_bump_is_newer_than_current_activity");c=(h||(h=d("I64"))).gt(e,f);c||F("server_bump_prevented");return c}function B(a,b,c){return a!=null&&d("WAJids").isAuthorMe(a)&&b===!1&&!C(c)}function C(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED}async function D(a,b){var e=await (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton;F("wait_for_authoritative_thread_start");E(a.threadKey,e,function(a){F("wait_for_authoritative_thread_end");var g=(h||(h=d("I64"))).to_float(a.lastActivityTimestampMs);F("ts_of_authoritative_thread_after_wait_"+(g>0?"gt_0":"eq_0"));c("promiseDone")(e.runInTransaction(function(c){return r(c,a,b)},"readwrite",void 0,void 0,f.id+":505"))});return}function E(a,b,e){var f=d("ReQL").fromTableAscending(b.tables.threads).getKeyRange(a).subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if((h||(h=d("I64"))).lt(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e(a);return f()})}function F(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:a})}g.call=a}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeDeleteGroupInviteHandler",async function(b,e){var f=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.group_invites).getKeyRange(e));return Promise.all(f.map(function(a){return b.group_invites.delete(a.threadKey,a.inviterId,a.inviteeId)})).then(function(){if(!c("justknobx")._("1162"))return;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)),function(b){if(b==null)return;var c=d("LSThreadBitOffset").clear([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),e=c[0],f=c[1],g=c[2],h=c[3];c=c[4];return a.threads.put(babelHelpers.extends({},b,{capabilities:e,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:c,snippet:void 0}))})})})}g.call=a}),98);
__d("MAWBridgeDeleteMessageRangesV2Handler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeDeleteMessageRangesV2Handler",function(a,c){return a.messages_ranges_v2__generated["delete"](c,(h||(h=d("I64"))).of_float(b.minTimestampMs),b.minMsgId)})}g.call=a}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b){if(b.actionType===2){if(!await d("EBIsEbEnabled").isEbEnabledLS(a))return;await c("LSIssueThreadRemoveStoredProcedure")(c("LSFactory")(a),{actThreadId:b.threadId,sortKey:b.ts.toString(),source:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB)})}}g.call=a}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a.success?(d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryUponReStore(a.value.traceId),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(a.value.traceId)):(d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a.error.traceId,c("err")(a.error.message)),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a.error.traceId));return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeGQLUploadUtils",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";async function a(b,d){var a=await c("JSResourceForInteraction")("MAWEncryptedBackupsMessageUploadMutation").__setRef("MAWBridgeGQLUploadUtils").load();return a.uploadMessageOverGQL(b,d)}g.uploadMessageOverGQL=a}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWFBLogger","ODS","ReQL","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""]);k=function(){return a};return a}var l=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeGroupInfoUpdatedHandler",async function(a,e){var f;f=(f=b.threadName)!=null?f:void 0;a=a.threads;var g=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e));if(g==null){(h||(h=d("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread");l.WARN(k(),(i||(i=d("I64"))).to_string(e));return}else f==null&&c("justknobx")._("4129")&&(f=g.threadName,l.WARN(j(),(i||(i=d("I64"))).to_string(e)));e=b.memberAddMode!=="all_member_add";await a.put(babelHelpers.extends({},g,{needsAdminApprovalForNewParticipant:e,threadName:f}))})}g.call=a}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.inviterId);return(h||(h=b("Promise"))).all([d("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(a,f,g)]).then(c("emptyFunction"))})}g.call=a}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(a,c){return a.attachments["delete"](c,b.msgId,String(b.plaintextHash))})}g.call=a}),98);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateMsg","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeMsgUpdatedHandler",async function(a,e){var f,g=await (f=d("ReQL")).firstAsync(f.fromTableAscending(a.messages.index("messageId")).getKeyRange(b.msgId));f=await f.firstAsync(f.fromTableAscending(a.attachments).getKeyRange(e,b.msgId));if(g==null){c("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",b.type_,f==null);return}f=await d("MAWAdminMsgCTA").getAdminMsgCtaStep(a,e,b);return d("MAWUpdateMsg").call(a,b,g,f)})}g.call=a}),98);
__d("MAWBridgeMsgsLoadedHandler",["I64","LSClearMessagePlaceholderRangeStoredProcedure","LSFactory","LSInsertNewMessageRangeStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeMsgsLoadedHandler",function(a,e){return c("LSClearMessagePlaceholderRangeStoredProcedure")(c("LSFactory")(a),{maxTimestampMs:d("MAWTimeUtils").MAX_TIMESTAMP_MS,messageId:"",threadKey:e}).then(function(){if(c("gkx")("23927")){var f,g,i,j,k,l,m,n;f=(f=(f=b.rangeExtensionType)==null?void 0:f.hasMoreBefore)!=null?f:!1;g=(g=(g=b.rangeExtensionType)==null?void 0:g.hasMoreAfter)!=null?g:!1;i=f&&((i=b.rangeExtensionType)==null?void 0:i.minMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.minMsgTs):d("MAWTimeUtils").MIN_TIMESTAMP_MS;j=g&&((j=b.rangeExtensionType)==null?void 0:j.maxMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.maxMsgTs):d("MAWTimeUtils").MAX_TIMESTAMP_MS;k=(k=(k=b.rangeExtensionType)==null?void 0:k.minMsgId)!=null?k:"";l=(l=(l=b.rangeExtensionType)==null?void 0:l.maxMsgId)!=null?l:"";m=((m=b.rangeExtensionType)==null?void 0:m.rangeKind)==="before"?i:d("MAWTimeUtils").MIN_TIMESTAMP_MS;n=((n=b.rangeExtensionType)==null?void 0:n.rangeKind)==="after"?j:d("MAWTimeUtils").MAX_TIMESTAMP_MS;return c("LSInsertNewMessageRangeStoredProcedure")(c("LSFactory")(a),{hasMoreAfter:g,hasMoreBefore:f,lowerOverlap:m,newMaxMid:l,newMaxTs:j,newMinMid:k,newMinTs:i,threadKey:e,upperOverlap:n})}else{f=((g=b.rangeExtensionType)==null?void 0:g.minMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.minMsgTs):d("MAWTimeUtils").MIN_TIMESTAMP_MS;l=((m=b.rangeExtensionType)==null?void 0:m.maxMsgTs)!=null?(h||(h=d("I64"))).of_float(b.rangeExtensionType.maxMsgTs):d("MAWTimeUtils").MAX_TIMESTAMP_MS;i=(k=(j=b.rangeExtensionType)==null?void 0:j.minMsgId)!=null?k:"";m=(g=(n=b.rangeExtensionType)==null?void 0:n.maxMsgId)!=null?g:"";k=((j=b.rangeExtensionType)==null?void 0:j.rangeKind)==="extensionBefore"?f:d("MAWTimeUtils").MIN_TIMESTAMP_MS;g=((n=b.rangeExtensionType)==null?void 0:n.rangeKind)==="extensionAfter"?l:d("MAWTimeUtils").MAX_TIMESTAMP_MS;j=(n=(j=b.rangeExtensionType)==null?void 0:j.hasMoreBefore)!=null?n:!1;n=(n=(n=b.rangeExtensionType)==null?void 0:n.hasMoreAfter)!=null?n:!1;return c("LSInsertNewMessageRangeStoredProcedure")(c("LSFactory")(a),{hasMoreAfter:n,hasMoreBefore:j,lowerOverlap:k,newMaxMid:m,newMaxTs:l,newMinMid:i,newMinTs:f,threadKey:e,upperOverlap:g})}})})}g.call=a}),98);
__d("MAWBridgeNewMediaRangeHandler",["I64","LSFactory","LSIntEnum","LSUpsertAttachmentRangeStoredProcedure","MAWMediaGalleryEBTaggingUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","cr:20238","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeNewMediaRangeHandler",function(a,f){var g=(h||(h=d("I64"))).of_float(e.earliestLoadedMediaTs),j=e.mediaGalleryGroup,k=b("cr:20238")!=null?b("cr:20238").getMediaRestoreEBRange().getRange(f):null;k=Boolean(k==null?void 0:k.hasMoreBefore)&&d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(j);k=e.hasMoreBefore||k;return c("LSUpsertAttachmentRangeStoredProcedure")(c("LSFactory")(a),{hasMoreBefore:k,mediaGroup:(i||(i=d("LSIntEnum"))).ofNumber(j),newLastLoadedMessageId:e.lastLoadedMessageId,newMinTs:g,threadKey:f})})}function a(a,b){return j(a,b).then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler",["FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadMappingState","MAWThreadUpdateMiddlewareGatingUtil","MAWThreadUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="[Occamadillo][CreateE2EEMetadataThreadHandler]";async function a(a,b){d("WALogger").LOG([j+" Handler called from "+b.creationSource+" for "+("jid: "+b.jid)]);if(!d("MAWThreadUpdateMiddlewareGatingUtil").isNewMiThreadCreationFlowEnabled("exposure_logging_disabled")){d("WALogger").LOG([j+" Early return due to failed eligibility check"]);return Promise.resolve()}var e=b.bumpTimestampMs,f=b.creationSource,g=b.folderId,i=b.jid;b=b.threadKeys;var l=await k(a,b);if(!n(f,l,b)){d("WALogger").LOG([j+" Early return due to no SPROC call required: jid: "+i+", "+("threadKey: "+((l==null?void 0:l.threadKey)?(h||(h=d("I64"))).to_string(l==null?void 0:l.threadKey):"null"))]);return Promise.resolve()}f=o(f);g=d("MAWFolderUtils").systemFolderToLSCoreClientFolder(g);l=await m(a,l,b,i);b=d("MAWThreadUtils").getLSThreadTypeFromJid(i);p({bumpTimestampMs:e,createdByLocalDevice:f,folderType:g,jid:i,offlineThreadKeyDetails:l,threadType:b});return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpTimestampMs:e,createdByLocalDevice:f,folderType:g,offlineThreadKey:l.offlineThreadKey,threadType:b,waJid:d("MAWJids").convertChatJidToIntJid(i)})}async function k(a,b){a=await Promise.all([await l(a,b.authoritative),await l(a,b.optimistic)]);b=a[0];a=a[1];return(b=b)!=null?b:a}async function l(a,b){if(b==null)return Promise.resolve();a=await a.threads.get((h||(h=d("I64"))).of_string(b));return a}async function m(a,b,e,f){if(b!=null)return{offlineThreadKey:b.threadKey,source:"Pre-existing LSDB Thread"};b=null;var g=null;e.authoritative!=null?(b=(h||(h=d("I64"))).of_string(e.authoritative),g="MAW: authoritative"):e.optimistic!=null?(b=(h||(h=d("I64"))).of_string(e.optimistic),g="MAW: optimistic"):(b=await d("MAWCreateOptimisticThread").createOfflineThreadingId(a),g="New Offline Threading ID");await Promise.all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(a,b),d("MAWThreadMappingState").markActThreadMappingAsCompleted(a,{intJid:d("MAWJids").convertChatJidToIntJid(f),threadKey:b})]);c("FBLogger")("messenger_web").info(j.concat(" Created new optimistic thread in LSDB with threadKey: ",(h||(h=d("I64"))).to_string(b),", threadKey source: ",g,", for jid: ",f));return{offlineThreadKey:b,source:g}}function n(a,b,e){var f=b!=null?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b.authorityLevel):null;c("FBLogger")("messenger_web").info(j.concat(" Validating authoritativeThreadKey optimisation. authorityLevel: %",", has authoritativeThreadKey: %",", creationSource: %",", optimistic thread key: %",", authoritative thread key: %"),f!=null?f.toString():"null",e.authoritative!=null?"true":"false",a,e.optimistic,e.authoritative);switch(a){case"incoming_message":return b==null;case"outgoing_message":switch(f){case null:case void 0:case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!0;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!1;default:f;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown creation source")}}function o(a){switch(a){case"incoming_message":return!1;case"outgoing_message":return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown creation source")}}function p(a){var b=a.bumpTimestampMs,e=a.createdByLocalDevice,f=a.folderType,g=a.jid,k=a.offlineThreadKeyDetails;a=a.threadType;c("FBLogger")("messenger_web").info(j.concat(" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: ","bumpTimestampMs: ",(h||(h=d("I64"))).to_float(b).toString(),", createdByLocalDevice: ",e.toString(),", folderType: ",(i||(i=d("LSIntEnum"))).toNumber(f).toString(),", offlineThreadKey: ",h.to_string(k.offlineThreadKey),", offlineThreadKeySource: ",k.source,", threadType: ",i.toNumber(a).toString(),", waJid: ",g))}g.call=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadMappingState","MAWThreadUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";async function a(a,b){var e=b.bumpTimestampMs,f=b.creationSource,g=b.folderId,i=b.jid;b=b.optimisticThreadKey;m(f,i);b=b!=null?await a.threads.get((h||(h=d("I64"))).of_string(b)):null;if(b!=null&&d("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(i)){q(i);return}if(b!=null&&k(b)){n(i,(h||(h=d("I64"))).to_string(b.threadKey));return}e={bumpTimestampMs:e,createdByLocalDevice:f==="outgoing_message",folderType:d("MAWFolderUtils").systemFolderToLSCoreClientFolder(g),offlineThreadKey:await l(b,i,a),threadType:d("MAWThreadUtils").getLSThreadTypeFromJid(i),waJid:d("MAWJids").convertChatJidToIntJid(i)};p(e);return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),e).then(function(){d("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(i)})}function k(a){a=(i||(i=d("LSIntEnum"))).unwrapIntEnum(a.authorityLevel);switch(a){case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!1;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}async function l(a,b,c){if(a!=null)return Promise.resolve(a.threadKey);a=await d("MAWCreateOptimisticThread").createOfflineThreadingId(c);o(b,a);await Promise.all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(c,a),d("MAWThreadMappingState").markActThreadMappingAsCompleted(c,{intJid:d("MAWJids").convertChatJidToIntJid(b),threadKey:a})]);return a}function m(a,b){c("FBLogger")("messenger_web").info(j+" handler called from %s for jid %s",a,b)}function n(a,b){c("FBLogger")("messenger_web").info(j+" handler returned early for jid %s because thread %s was already authoritative",a,b)}function o(a,b){c("FBLogger")("messenger_web").info(j+" no thread exists for jid %s, creating optimistic thread with key %s",a,(h||(h=d("I64"))).to_string(b))}function p(a){c("FBLogger")("messenger_web").info(j+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(h||(h=d("I64"))).to_string(a.bumpTimestampMs),a.createdByLocalDevice,h.to_string(a.folderType),h.to_string(a.offlineThreadKey),h.to_string(a.threadType),h.to_string(a.waJid))}function q(a){c("FBLogger")("messenger_web").info(j+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",a)}g.call=a}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeParticipantRemovedHandler",function(a,c){return a.participants["delete"](c,(h||(h=d("I64"))).of_string(b.userId))})}g.call=a}),98);
__d("MAWBridgeParticipantUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWBridgeParticipantsUpdatedHandler","MAWCurrentUser","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","MAWUpdateLSThreadCapabilities","gkx","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=d("MAWCurrentUser").getID(),l=(i||(i=d("I64"))).of_string(k);async function m(a,b,e){var f=(i||(i=d("I64"))).of_string(b.fbid),g=d("MAWTimeUtils").toTimestamp(b.readWatermarkTs),m=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs),n=d("MAWTimeUtils").toTimestamp(b.lastReadActionTs),o=b.isSuperAdmin?h._(/*BTDS*/"Ng\u01b0\u1eddi t\u1ea1o nh\u00f3m").toString():void 0,p=await a.participants.get(e,f);p!=null?await a.participants.put({authorityLevel:p.authorityLevel,contactId:f,deliveredWatermarkTimestampMs:m,groupParticipantJoinState:b.isInvited?(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:b.isAdmin,isModerator:!1,isSuperAdmin:p.isSuperAdmin,nickname:p.nickname,normalizedSearchTerms:p.normalizedSearchTerms,participantCapabilities:p.participantCapabilities,readActionTimestampMs:n,readWatermarkTimestampMs:g,subscribeSource:o,threadKey:e}):await a.participants.add({authorityLevel:(i||(i=d("I64"))).zero,contactId:f,deliveredWatermarkTimestampMs:m,groupParticipantJoinState:b.isInvited?(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:b.isAdmin,isModerator:!1,isSuperAdmin:b.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:i.zero,readWatermarkTimestampMs:g,subscribeSource:o,threadKey:e});await d("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(a,e);n=b.isAdmin;(i||(i=d("I64"))).equal(l,f)&&(n?await d("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(a,e):await d("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(a,e));p==null&&await c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:k===b.fbid,workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}function a(a,b){if(c("gkx")("13628"))return d("MAWBridgeParticipantsUpdatedHandler").call(a,{participants:[b]});if(b.fbid.startsWith("shadow_")){c("vulture")("Hxg8SseiWP5IZUyhTKsM26kY__w=");return Promise.resolve()}return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeParticipantUpdatedHandler",function(a,c){return m(a,b,c)})}g.callWithoutWaitingForAnything=m;g.call=a}),226);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeRavenActionMsgForUIHandler",async function(a,c){a=a.attachments;c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(c,b.ravenMsgId));if(c==null)return Promise.resolve();if(c.ephemeralMediaState==null)return Promise.resolve();var e=(h||(h=d("I64"))).to_int32(c.ephemeralMediaState);if(c.ephemeralMediaViewMode==null)return Promise.resolve();var f=h.to_int32(c.ephemeralMediaViewMode);e=d("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(e);f=d("MAWMsg").MAWRavenMsgEphemeralType.cast(f);if(e==null||f==null)return Promise.resolve();e=d("MAWRavenUtils").getNextRavenMessageEphemeralState(e,f);if(e==null)return Promise.resolve();c.ephemeralMediaState;f=babelHelpers.objectWithoutPropertiesLoose(c,["ephemeralMediaState"]);c=babelHelpers.extends({ephemeralMediaState:h.of_int32(e)},f,{transportKey:"WhatsApp"});e=[f.threadKey,f.messageId,f.attachmentFbid];return a.upsert(e,c)})}g.call=a}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;async function i(a,b,c){var e=(h||(h=d("I64"))).of_string(b.fbid),f=d("MAWTimeUtils").toTimestamp(b.lastReadWatermarkTs),g=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs);b=d("MAWTimeUtils").toTimestamp(b.lastReadActionTs);c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(c,e));c!=null&&await a.participants.put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:(h||(h=d("I64"))).equal(g,(h||(h=d("I64"))).zero)?c.deliveredWatermarkTimestampMs:g,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).zero)?c.readActionTimestampMs:b,readWatermarkTimestampMs:(h||(h=d("I64"))).equal(f,(h||(h=d("I64"))).zero)?c.readWatermarkTimestampMs:f,subscribeSource:c.subscribeSource,threadKey:c.threadKey,threadRoles:(h||(h=d("I64"))).zero})}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReceivedReceiptHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:b})}g.call=a}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["ReQL","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return async function(){var c=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.message_search_results).filter(function(a){return b.includes(a.messageOtid)}));await Promise.all(c.map(function(b){return a.message_search_results.delete(b.type_,b.query,b.threadKey,b.globalIndex)}))}().then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.data_trace_meta.add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){var f;if(b.threadKey==null||!c("gkx")("23995"))return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one,tags:(f=b.threadKey)!=null?f:void 0})})}function a(a,e){var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one}));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:String(b)})});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeStartTraceWithTraceIdHandler",["MAWMainTraceUtils","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMainTraceUtils").startTraceWithTxn(a,d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),b.traceId,b.traceType,void 0,void 0,b.traceContext)}g.call=a}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("CurrentMessengerUser").getID();function a(a,e){return e.reduce(function(b,e){var f=(i||(i=d("I64"))).of_string(e);return b.then(function(){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:k===e,workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}).then(c("emptyFunction"))},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b,"MAWBridgeThreadHiddenV2Handler",function(a,b){a=c("LSFactory")(a);return c("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:b})})}g.call=a}),98);
__d("MAWBridgeThreadTimestampsHandler",["CurrentMessengerUser","I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;async function i(a,b,c){var e=d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b));if(f==null||c.markUnread!==null&&c.markUnread===!1&&(h||(h=d("I64"))).ge(f.lastReadWatermarkTimestampMs,e))return;e=babelHelpers.extends({},f,{lastReadWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs)});await a.threads.put(e);f=(h||(h=d("I64"))).of_string(d("CurrentMessengerUser").getID());e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(b,f));e!=null&&await a.participants.put(babelHelpers.extends({},e,{readActionTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTimestampMs),readWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs)}))}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadTimestampsHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=b.folder!=null?d("MAWFolderUtils").getMessagingFolderTag(b.folder):a.folderName;return(b=b.cannotReplyReason)!=null?b:c==="inbox"?void 0:a.cannotReplyReason}async function i(a,b,e){e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e));if(e==null)return;var f=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(b,e.snippet),g=h(e,b),i=c("getMAWLastMessageCtaType")(b.snippetType);g=babelHelpers.extends({},e,{cannotReplyReason:g,folderName:e.folderName,lastMessageCtaType:i,parentThreadKey:e.parentThreadKey,snippet:f,snippetSenderContactId:b.snippetSenderContactId==null?e.snippetSenderContactId:d("MAWBridgeUIEventDataValidation").stringToI64Opt(b.snippetSenderContactId)});await a.threads.put(g)}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeThreadUpdatedHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("QPLUserFlow").start(c("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:b}},instanceKey:a})}function b(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056849266,"1765"),b,{instanceKey:a})}function d(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849266,"1765"),{instanceKey:a})}function e(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:b}},instanceKey:a})}g.start=a;g.addAnnotations=b;g.endSuccess=d;g.endFailure=e}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeUnbumpOnThreadLoadHandler",["FBLogger","I64","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState","MAWODSProxy","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set();async function a(a,b){var e=b.jid,f=b.unbumpFromTs;b=b.unbumpToTs;var g=await d("MAWChatJid").toThreadMaybe(a,e);if(g==null){var j=await d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(e),"MAWBridgeCentralizedThreadUpdateHandler");c("FBLogger")("UnbumpOnRefresh").mustfix("[UnbumpOnRefresh] missing thread for unbumping jid: %s with thread state: %s",e,j.type);return}if(i.has(e)){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"unbump_already_processed"});return}i.add(e);if(!(h||(h=d("I64"))).equal(g.lastActivityTimestampMs,f))return;d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"unbump_on_thread_load"});j=babelHelpers.extends({},g,{lastActivityTimestampMs:b});await a.threads.put(j)}g.call=a}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a,b){var e=b.contactUserId;b=b.threadJid;var f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts).getKeyRange((h||(h=d("I64"))).of_string(e)));if(f==null){c("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var g=babelHelpers.extends({},f,{contactViewerRelationship:(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b,"MAWBridgeUpdateContactAsConnectedHandler",async function(a,b){await Promise.allSettled([a.contacts.upsert([f.id],g),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:f.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,b),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:b})])})}g.call=a}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadsLoadedHandler",function(a,b){return c("LSUpdateE2EEMetadataParticipantsStoredProcedure")(c("LSFactory")(a),{threadKey:b})})}g.call=a}),98);
__d("MAWBridgeUpdateMinMessageHandler",["FBLogger","I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","ReQLTable"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=(h||(h=d("I64"))).of_float(b.minTimestampMs),f=b.minMessageId;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeUpdateMinMessageHandler",function(a,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages_ranges_v2__generated).getKeyRange(g)).then(function(h){if(h==null)return;var i=b.hasMoreBefore,j=i!=null?i:h.hasMoreBefore;return d("ReQLTable").update(a.messages_ranges_v2__generated,[g,h.minTimestampMs,h.minMessageId],function(a){if(a!=null)return{hasMoreAfter:a.hasMoreAfter,hasMoreBefore:j,isLoadingAfter:a.isLoadingAfter,isLoadingBefore:a.isLoadingBefore,maxMessageId:a.maxMessageId,maxTimestampMs:a.maxTimestampMs,minMessageId:f,minTimestampMs:e,threadKey:a.threadKey};throw c("FBLogger")("wmi_eb").mustfixThrow("Thread is missing in updating the min message in message range")})})})}g.call=a}),98);
__d("MAWBridgeUpdateThreadListItemHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWBridgeBuildThreadSnippet","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState","MWFBLogger","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWLogger.tags(["bridgeUIEvent","Occam","Middleware"]);async function a(a,b){var c=b.activityUpdate,d=b.chatJid;b=b.snippetUpdate;c!=null&&await j(a,d,c);b!=null&&await m(a,d,b)}async function j(a,b,c){var e=await d("MAWChatJid").toThreadMaybe(a,b);if(e==null){await q(a,b);return}switch(c.source){case"outgoing_msg":case"incoming_msg":return k(a,e,c);case"deleted_msg":return l(a,e,c);case"inserted_admin_msg":return o(e,c,"No bump for admin message");case"eb_restore":return i.warn("Attempted bump from EB restore");default:c.source;throw i.mustfixThrow("Unknown source")}}async function k(a,b,d){if(n(b,d)){o(b,d,"Stale incoming bump");return}await c("LSBumpE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpedByLocalDeviceSend:d.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:d.bumpTimestampMs,threadKey:b.threadKey});o(b,d,"Thread bumped")}async function l(a,b,c){await a.threads.put(babelHelpers.extends({},b,{lastActivityTimestampMs:(h||(h=d("I64"))).min(b.lastActivityTimestampMs,c.bumpTimestampMs),lastReadWatermarkTimestampMs:h.min(b.lastReadWatermarkTimestampMs,c.bumpTimestampMs)})),o(b,c,"Thread unbumped")}async function m(a,b,e){var f=await d("MAWChatJid").toThreadMaybe(a,b);if(f==null){await q(a,b);return}await a.threads.put(babelHelpers.extends({},f,{lastMessageCtaType:c("getMAWLastMessageCtaType")(e.snippetType),snippet:d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(e,f.snippet),snippetSenderContactId:e.snippetSenderContactId!=null?(h||(h=d("I64"))).of_string(e.snippetSenderContactId):(h||(h=d("I64"))).zero}));p(f.threadKey)}function n(a,b){return b.source==="incoming_msg"&&(h||(h=d("I64"))).le(b.bumpTimestampMs,a.lastActivityTimestampMs)}function o(a,b,c){b=[(h||(h=d("I64"))).to_string(a.threadKey),b.source,h.to_string(b.bumpTimestampMs),h.to_string(a.lastActivityTimestampMs),h.to_string(a.lastReadWatermarkTimestampMs)];i.debug.apply(i,[c+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(b))}function p(a){i.debug("Updated thread snippet. threadKey: %s",(h||(h=d("I64"))).to_string(a))}async function q(a,b){a=await d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWBridgeUpdateThreadListItemHandler");i.mustfix("Missing LSDBThread when updating threadlist item. jid: %s, thread state: %s",b,a.type)}g.call=a}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){var e=String(d.xmaId);return a.attachments.get(c,d.msgId,e).then(function(f){if(f==null)return(h||(h=b("Promise"))).resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(Boolean);f=f.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(f).then(function(){return a.attachments["delete"](c,d.msgId,e)})})}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeXMAShareExpiredHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=String(b.xmaId);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(a,f){return a.attachments.get(f,b.msgId,e).then(function(g){if(g==null)return Promise.resolve();g=[g.defaultCtaId,g.attachmentCta1Id,g.attachmentCta2Id,g.attachmentCta3Id].filter(Boolean);g=g.map(function(b){return a.attachment_ctas.delete(b)});return Promise.all(g).then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(f,b.msgId,e)).then(async function(b){if(b!=null){b=babelHelpers.extends({},b,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});await a.attachments.put(b)}c("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment");return Promise.resolve()})})})})}g.call=a}),98);
__d("isInstamadilloDYI",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("665")===!0}g["default"]=a}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeCentralizedThreadUpdateHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessageRangesV2Handler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsLoadedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantUpdatedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadTimestampsHandler","MAWBridgeThreadUpdatedHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUnbumpOnThreadLoadHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateMinMessageHandler","MAWBridgeUpdateThreadListItemHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWEphemeralMessageExpirationStorage","MAWLoggerUtils","MWFBLogger","WAResultOrError","WATimeUtils","cr:15985","cr:15986","cr:15987","cr:16021","cr:16022","cr:16023","cr:16024","cr:16025","cr:16026","cr:16027","cr:16028","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"]);j=function(){return a};return a}var k=d("MWFBLogger").MWLogger.tags(["MAWBridgeUIEvent"]);function l(a,c,e){switch(e.tag){case"NewMsg":return d("MAWBridgeNewMsgHandler").call(c,e.value);case"MsgsStartCountdown":return d("MAWBridgeMsgsStartCountdownHandler").call(c,e.value);case"MsgClearCountdown":return Promise.resolve(d("MAWEphemeralMessageExpirationStorage").clearMessageFromExpiration(e.value));case"DropAllSecureThreads":return d("MAWBridgeDropAllSecureThreadsHandler").call(c);case"VerifyThreadExists":var f=e.value;return d("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(c,f);case"CreateE2EEMetadataThread":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandler").call(c,e.value);case"CreateE2EEMetadataThreadV2":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(c,e.value);case"EditMsgHistoryAdded":return d("MAWBridgeEditMsgHistoryAddedHandler").call(a,c,e.value);case"MsgUpdated":return d("MAWBridgeMsgUpdatedHandler").call(c,e.value);case"NewMedia":return d("MAWBridgeNewMediaHandler").call(c,e.value);case"NewMediaRange":return d("MAWBridgeNewMediaRangeHandler").call(c,e.value);case"MediaExpired":return d("MAWBridgeMediaExpiredHandler").call(c,e.value);case"XMAShareExpired":return d("MAWBridgeXMAShareExpiredHandler").call(c,e.value);case"NewXMA":return d("MAWBridgeNewXMAHandler").call(c,e.value);case"XMAShareTombstoned":return d("MAWBridgeXMAShareTombstonedHandler").call(c,e.value);case"ParticipantUpdated":return d("MAWBridgeParticipantUpdatedHandler").call(c,e.value);case"ParticipantRemoved":return d("MAWBridgeParticipantRemovedHandler").call(c,e.value);case"UpdateE2EEMetadataParticipants":return d("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(c,e.value);case"ReceivedReceipt":return d("MAWBridgeReceivedReceiptHandler").call(c,e.value);case"ThreadUpdated":return d("MAWBridgeThreadUpdatedHandler").call(c,e.value);case"GroupInfoUpdated":return d("MAWBridgeGroupInfoUpdatedHandler").call(c,e.value);case"CentralizedThreadUpdate":return d("MAWBridgeCentralizedThreadUpdateHandler").call(c,e.value);case"UpdateThreadListItem":return d("MAWBridgeUpdateThreadListItemHandler").call(c,e.value);case"UnbumpOnThreadLoad":return d("MAWBridgeUnbumpOnThreadLoadHandler").call(c,e.value);case"ThreadTimestampsUpdated":return d("MAWBridgeThreadTimestampsHandler").call(c,e.value);case"MsgsLoaded":return d("MAWBridgeMsgsLoadedHandler").call(c,e.value);case"StartTrace":return b("cr:16023").call(c,e.value);case"UpdateTrace":return b("cr:16026").call(c,e.value);case"ThreadHiddenV2":return d("MAWBridgeThreadHiddenV2Handler").call(c,e.value);case"SyncContacts":return d("MAWBridgeSyncContacts").call(c,e.value);case"ReceivedChatState":return d("MAWBridgeReceivedChatStateHandler").call(c,e.value);case"ClockSkewUpdated":return Promise.resolve(d("WATimeUtils").setClockSkew(e.value));case"ABPropsUpdated":k.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated");return Promise.resolve(d("MAWAbPropsClient").rewrite(e.value));case"COPDigestReceived":return d("MAWBridgeHandleCOPDigest").call(c,e.value);case"UpsertReaction":return d("MAWBridgeReactionUpsertHandler").call(c,e.value);case"DeleteReaction":return d("MAWBridgeDeleteReactionHandler").call(c,e.value);case"UploadMessage":return b("cr:16028").call(c,e.value);case"UploadMessageByBatch":return b("cr:16027").call(c,e.value);case"DeleteMessagesOfThread":return b("cr:16021").call(c,e.value);case"UploadAttachment":return b("cr:15987").call(c,e.value);case"ResignAttachmentCDNUrl":return b("cr:15986").call(c,e.value);case"DeleteMessages":return d("MAWBridgeDeleteMessagesHandler").call(c,e.value);case"RestoreMessageBatch":d("EBLogger").EBLogger.tags(["labyrinth_dyi"]).WARN(j());return Promise.resolve();case"OneToOneMessageRequestLoaded":return d("MAWBridgeOneToOneMessageRequestLoadedHandler").call(c,e.value);case"GroupInviteUpdate":return d("MAWBridgeGroupInviteUpdateHandler").call(c,e.value);case"UpdateDyiStatus":d("EBLogger").EBLogger.tags(["labyrinth_dyi"]).WARN(i());return Promise.resolve();case"DeleteGroupInvite":return d("MAWBridgeDeleteGroupInviteHandler").call(c,e.value);case"TraceRecordCheckpoint":return b("cr:16025").call(c,e.value);case"DeleteMessageRangesV2":return d("MAWBridgeDeleteMessageRangesV2Handler").call(c,e.value);case"UpdateMinMessage":return d("MAWBridgeUpdateMinMessageHandler").call(c,e.value);case"IssuePointQuery":return b("cr:16022").call(c,e.value);case"ParticipantsUpdated":return d("MAWBridgeParticipantsUpdatedHandler").call(c,e.value);case"StartTraceWithTraceId":return b("cr:16024").call(c,e.value);case"UpdateClientRestoreStatus":return d("MAWBridgeUpdateClientRestoreStatus").call(c,e.value);case"NewMsgs":return d("MAWBridgeNewMsgHandler").bulkCall(c,e.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(c,e.value);case"EphemeralSettingsUpdatedForUI":return b("cr:15985").call(c,e.value);case"RavenActionUpdate":return d("MAWBridgeRavenActionMsgForUIHandler").call(c,e.value);case"GroupInviteLoaded":return d("MAWBridgeGroupInviteLoadedHandler").call(c,e.value);case"RemoveMessageSearchResult":return d("MAWBridgeRemoveMessageSearchResultHandler").call(c,e.value);case"AddMessageSearchResult":return d("MAWBridgeAddMessageSearchResultHandler").call(a,c,e.value);case"FulfillRestorePromise":return d("MAWBridgeFulfillRestorePromisePayloadHandler").call(e.value);case"UpdateContactAsConnected":return d("MAWBridgeUpdateContactAsConnectedHandler").call(c,e.value);case"RefreshContact":return d("MAWBridgeRefreshContactHandler").call(c,e.value);case"NewReceiverFetchInfo":return d("MAWBridgeNewReceiverFetchInfoHandler").call(c,e.value);case"RestoreNativeOp":return d("MAWBridgeCallRestoreNativeOpHandler").call(c,e.value);case"NewPoll":return d("MAWBridgeNewPollHandler").call(c,e.value);default:return Promise.resolve()}}function a(a,b){if(!c("isArmadillo")()&&!c("isInstamadilloDYI")()){k.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(b.length===1&&b[0].tag==="TraceRecordCheckpoint")){var d={};d=b.reduce(function(a,b){a[b.tag]=((b=a[b.tag])!=null?b:0)+1;return a},d);k.DEBUG(h(),String(d))}c("promiseDone")(m(a,b),c("emptyFunction"),function(a){k.catching(a).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",b.map(function(a){return a.tag}).join(", "))})}async function m(a,b){var e=await a;a=d("MAWLoggerUtils").getInstanceKey();var g=b.map(function(a){return a.tag}),h="";d("MAWBridgeUIEventQueueQPLLogger").start(a,g);d("MAWBridgeUIEventQueueQPLLogger").addAnnotations(a,{int:{queue_size:b.length}});var i;try{i=await e.runInTransaction(async function(a){for(var f=0;f<b.length;f++){var g=b[f];try{await l(e,a,g)}catch(a){h=g.tag;return d("WAResultOrError").makeError(c("getErrorSafe")(a))}}return d("WAResultOrError").makeResult(!0)},"readwrite","background",{events:b,type:"maw_ui_bridge"},f.id+":319")}catch(a){i=d("WAResultOrError").makeError(c("getErrorSafe")(a))}!i.success?(d("MAWBridgeUIEventQueueQPLLogger").endFailure(a,h),k.catching(i.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",h,g.toString())):d("MAWBridgeUIEventQueueQPLLogger").endSuccess(a)}async function e(a,b,d){try{await l(a,b,d)}catch(b){a=c("getErrorSafe")(b);k.catching(a).mustfix("[handleShimEvent] Failed to handle UI event: %s",d.tag);throw b}}g.handleEvents=a;g.handleShimEvent=e}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","FBLogger","QPLUserFlow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b,e){d("EncryptedBackupdDYIFileSaver").saveFile(a,b),window.setTimeout(function(){c("promiseDone")(e())},1e3)}async function a(a){var b=a.qplEvent,e=a.qplInstanceKeyE2E;a=a.status;var f=c("FBLogger")("[labyrinth_web][dyi]");if(a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw f.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var g=d("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,i=await d("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),j=await d("EncryptedBackupsDYIFileUtils").readFile(i,g);await h(g,j,async function(){await i.removeEntry(g)});f.info("Saving file with filename ",g);b!=null&&e!=null&&c("QPLUserFlow").endSuccess(b,{instanceKey:e});f.info("DYI Complete")}catch(a){f.mustfix("Failed to download the DYI archive: %s",a);b!=null&&e!=null&&c("QPLUserFlow").endFailure(b,a.message,{instanceKey:e});return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&(b!=null&&e!=null&&c("QPLUserFlow").endFailure(b,"Unknown error",{instanceKey:e}));return a}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,errorMessage:b,syncChannel:(j||(j=d("I64"))).neg_one});else return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,syncChannel:(j||(j=d("I64"))).neg_one})})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,d){return d.reduce(function(b,d){return b.then(function(){return c("updateAndFlushLSDataTrace")(a,d)})},(h||(h=b("Promise"))).resolve())}function a(a,e){var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSDataTraceCheckPoint","LSFactory","LSIntEnum","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","MAWTraceUtils","Promise","isInstamadilloEB"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e){var f;if(c("isInstamadilloEB")())return(j||(j=b("Promise"))).resolve();var g=(f=e.traceId)!=null?f:c("LSRequestId").generate();f=e.mediaType;if(f==="document"){d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);return(j||(j=b("Promise"))).resolve()}return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeUploadAttachmentHandler",function(a,f){var k=(i||(i=d("I64"))).to_string(f),l=d("MAWTimeUtils").isTimestampNewerThanXDays(e.ts,30);return d("MAWEncryptedBackupUtils").getBackupTenancy(a,g).then(function(f){var i=e.productType;if(f!=null&&l)if(g!=null){d("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:e.deliveryObjectId,flow:"old",mediaType:e.mediaType,messageId:e.messageId,threadId:e.threadId,traceId:g});return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId,traceId:g})}else return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId});else{d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);d("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(g,!1,"old");return(j||(j=b("Promise"))).resolve()}})})}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchGQLHandler",["FBLogger","MAWBridgeSafeActionsWorkerAndUI","MAWEBFrontendQPLLogger","MWEBODSEntityName.enum","ODS","WAResultOrError","cr:8110"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,e){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"main_thread");d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(e.messages,"upload_tracking_bridge_batch_handler_gql");var f=await b("cr:8110").call(a,e.messages);if(f.success){a=e.messages.map(function(a){if(a.uploadTrackingInstanceKey!=null)return{instanceKey:a.traceId,success:!0};else return null}).filter(Boolean);d("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("ackWithInstanceKeyBatched",{instancesWithOutcomes:a});c("FBLogger")("labyrinth_web").info("Successfully completed GQL upload batch of size %s",e.messages.length);return d("WAResultOrError").makeResult()}e.messages.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").failEBUploadTracking(a.uploadTrackingInstanceKey,"gql_upload_failed",{string:{error:f.error}})});return d("WAResultOrError").makeError(f.error)}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","QPLUserFlow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}async function a(a,b){h(b.messages,"upload_tracking_bridge_batch_handler");b.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});b.checkPoint.forEach(function(b){return c("promiseDone")(d("MAWBridgeTraceRecordCheckpointHandler").call(a,b))});for(b of b.messages)await d("MAWBridgeUploadMessageHandler").call(a,b);return Promise.resolve()}g.call=a}),98);
__d("MAWBridgeUploadMessageGQLHandlerSingleTxn",["EBIsEbEnabled","EncryptedBackupsWriteToMPSTables","MAWBridgeGQLUploadUtils","MAWEBFalcoLoggerUtils","MAWEBFrontendQPLLogger","MWEBODSCategory","MWEBODSEntityName.enum","MWEBODSUtils","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","ODS","WAErrorMessage","WAResultOrError","isInstamadilloEB"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b){try{if(c("isInstamadilloEB")()){d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_cancelled_instamadillo");b.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(a,b,"gql_cancelled_instamadillo")});return d("WAResultOrError").makeError("gql_cancelled_instamadillo")}d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_handler_single_txn_start");var e="mps_write_failure",g=await a.runInTransaction(async function(f){if(!await d("EBIsEbEnabled").isEbEnabledLS(a.tables)){b.forEach(function(a){if(a.uploadTrackingInstanceKey!=null){var b,e=a.uploadTrackingInstanceKey;d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(e,"user_device_not_enrolled_invalid_gql_request");var f=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b=(b=d("MWEBUseLocalStorage").mwEBGetLocalStorageEntryValue(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE))!=null?b:"no";f={bool:{wasEBEnabledPreviously:f},string:{wasEBSMWiped:b}};b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskSkipped(a,b,"user_device_not_enrolled");d("MAWEBFrontendQPLLogger").endEBUploadTracking(e,f)}});var g=[];e="user_device_not_enrolled";return g}else{d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_handler_mps_write_start");g=await i(f,b);d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_handler_mps_write_end");return g}},"readwrite",void 0,void 0,f.id+":87");g=g.filter(Boolean);if(g.length===0)return d("WAResultOrError").makeError(e);(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,"graphql.batch.size."+g.length);h.bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,"graphql.batch.bucket"+d("MWEBODSUtils").getBucketName(g.length));d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_handler_upload_start");g.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskIssued(a,b)});var j=await d("MAWBridgeGQLUploadUtils").uploadMessageOverGQL(a,g);d("MAWEBFrontendQPLLogger").addPointForUploadMessageArray(b,"upload_tracking_gql_handler_single_txn_end");!j.success?g.forEach(function(a){var b=a.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(a,b,j.error)}):g.forEach(function(a){d("MAWEBFalcoLoggerUtils").logEBFalcoEncryptedBackupUploadSuccess(a)});return j}catch(a){b.forEach(function(b){var c=b.echoDocument!=null?"dual_upload":"protobuf_only";d("MAWEBFalcoLoggerUtils").logEBFalcoTaskFailure(b,c,d("WAErrorMessage").maybeGetMessageFromError(a));b.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").failEBUploadTracking(b.uploadTrackingInstanceKey,"gql_upload_runtime_error",a instanceof Error?{string:{runtime_error:a.message}}:void 0)});return d("WAResultOrError").makeError("gql_upload_runtime_error")}}async function i(a,b){b=b.map(async function(b){var c=b.protoMsg,e=b.uploadTrackingInstanceKey!=null?d("MAWEBFrontendQPLLogger").makeEBFrontendQplFlowFromInstanceKey(b.uploadTrackingInstanceKey):null;if(c!=null){c=c.backupActionType===1?Promise.all([d("EncryptedBackupsWriteToMPSTables").writeToMPSTables(a,c,b.threadId,!1,e),d("EncryptedBackupsWriteToMPSTables").writeTagsToMPSTables(a,c,b.threadId)]).then(function(a){var b=a[0];a[1];return b}):d("EncryptedBackupsWriteToMPSTables").writeToMPSTables(a,c,b.threadId,!1,e);e=await c.then(function(a){if(!a.success&&b.uploadTrackingInstanceKey!=null){d("MAWEBFrontendQPLLogger").failEBUploadTracking(b.uploadTrackingInstanceKey,"mps_write_failed",{string:{error:a.error,errorMsgType:b.messageType}});return null}return b},function(a){b.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").failEBUploadTracking(b.uploadTrackingInstanceKey,"upload_tracking_gql_handler_failed_mps_write",{string:{error:d("WAErrorMessage").maybeGetMessageFromError(a),errorMsgType:b.messageType}});return null});return e}return b});b=await Promise.all(b);return b.filter(Boolean)}g.call=a}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var c,e;c=(i||(i=d("I64"))).add((c=a.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"),(c=b.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"));b=i.max((e=a.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one,(e=b.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one);return babelHelpers["extends"]({},a,{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} tin nh\\u1eafn tr\\u00f9ng kh\\u1edbp\",\"_1\":\"1 tin nh\\u1eafn kh\\u1edbp\"}",[h._plural(i.to_int32(c),"number")]).toString(),matchCount:c,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).minus_one)?void 0:b})}g.mergeCutoverSearchResults=a}),226);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:5e3},i=c("qpl")._(25301522,"2409");function a(){h.hasStarted&&j();h.instanceKey++;h.hasStarted=!0;c("QPLUserFlow").start(i,{annotations:{bool:{isInThread:!1}},instanceKey:h.instanceKey});return h.instanceKey}function j(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endCancel(i,{instanceKey:h.instanceKey})}function b(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!h.hasStarted||d!=null&&h.instanceKey!==d)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&k({annotations:b,instanceKey:h.instanceKey})}function k(a){var b=a.annotations;a=a.instanceKey;if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function d(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endSuccess(i,{annotations:{"int":{result_count:h.currentResultCount}},instanceKey:h.instanceKey})}e={getCurrentInstanceKey:function(){return h.instanceKey},qplAddAnnotations:k,qplAddPoint:b,qplCancel:j,qplMarkFirstResultShowUp:c("emptyFunction"),qplStart:a,qplSuccess:d,updateCurrentResultCount:c("emptyFunction")};f=e;g["default"]=f}),98);
__d("escapeRegExp",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}f["default"]=a}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=c("gkx")("1798");function l(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(a,b){a=l(a).split(" ");var d=l(b),e=[],f=[];a.forEach(function(a){var b=new RegExp(c("escapeRegExp")(a),"gi");b=d.matchAll(b);b=Array.from(b);b=b.map(function(a){return a.index});var g=b.map(function(b){return a.length});f.push.apply(f,b);e.push.apply(e,g)});return{matchLengths:e.join(","),matchOffsets:f.join(",")}}function a(a,b,e,f){if(e!=null&&(b===1||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)))){f=d("MAWVault").isVaulted(e)?d("MAWVault").unvault(e):e;e=m(a,f);return babelHelpers["extends"]({contextLine:f},e)}else return{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} tin nh\\u1eafn tr\\u00f9ng kh\\u1edbp\",\"_1\":\"1 tin nh\\u1eafn kh\\u1edbp\"}",[h._plural(b,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function b(a,b){return a===1&&b!=null?b:void 0}function e(a,b){return a===1&&b!=null?b:void 0}function f(a){return a!=null?(i||(i=d("I64"))).of_float(a):void 0}function n(a,b){a=(i||(i=d("I64"))).of_float(-a);return b==null?a:i.min(a,b)}function o(a,b){if(!k||a.messageTimestampMs==null||b.messageTimestampMs==null)if((i||(i=d("I64"))).gt(a.globalIndex,b.globalIndex))return 1;else if((i||(i=d("I64"))).lt(a.globalIndex,b.globalIndex))return-1;else return 0;else if((i||(i=d("I64"))).lt(a.messageTimestampMs,b.messageTimestampMs))return 1;else if((i||(i=d("I64"))).gt(a.messageTimestampMs,b.messageTimestampMs))return-1;else return 0}g.getContextLineAndMatches=a;g.getMessageOtid=b;g.getMessageId=e;g.getMessageTimestamp=f;g.getGlobalIndex=n;g.searchResultsCompareFn=o}),226);
__d("groupBy",[],(function(a,b,c,d,e,f){function a(a,b){return a.reduce(function(a,c){(a[b(c)]=a[b(c)]||[]).push(c);return a},{})}f["default"]=a}),66);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","ReQL","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),k=new Map(),l=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");async function m(a,b,c){await a.message_search_queries.put(babelHelpers.extends({hasNextPage:!1,query:b,threadKeyV2:(i||(i=d("I64"))).one,type_:j},c))}async function n(a,b){var c=(i||(i=d("I64"))).to_string(b.threadKey);b.matchCount!=null&&k.set(c,(i||(i=d("I64"))).to_float(b.matchCount));c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange(j,b.query,b.threadKey));if(c==null)await a.message_search_results.put(babelHelpers.extends({},b));else{var e=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(c,b);await a.message_search_results.upsert([j,c.query,c.threadKey,c.globalIndex],babelHelpers.extends({},e,{globalIndex:b.globalIndex}))}}function a(a,b){var c;c=(c=k.get((i||(i=d("I64"))).to_string(a)))!=null?c:0;c+=b;k.set((i||(i=d("I64"))).to_string(a),c)}function b(){k.clear()}function e(a,b){return!d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?null:(b=k.get((i||(i=d("I64"))).to_string(a)))!=null?b:null}async function o(a,b,e){k.clear();await a.runInTransaction(async function(a){await m(a,e,{resultCount:(i||(i=d("I64"))).zero,status:(h||(h=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)})},"readwrite",void 0,void 0,f.id+":142");c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var g=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:e,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH});g=g.map(function(a){if(a.recordType==="msg"){a.matchedTerms;a.recordType;a=babelHelpers.objectWithoutPropertiesLoose(a,["matchedTerms","recordType"]);return babelHelpers.extends({},a)}}).filter(Boolean);g=c("groupBy")(g,function(a){return a.chatJid});var o=Object.values(g);c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:o.length}},point:"search_local_result_end"});c("promiseDone")(Promise.all(o.map(async function(g,h){var k=g[0].chatJid;await c("waitForMiActMappingForUniversalSearch")(a,k);var m=await d("MWSearchThreadUtils").getThreadDataForSearchResult(a,k,b,j);if(m==null)return;var o=m.profilePicUrl,p=m.secondaryProfilePicUrl,q=m.threadDisplayName,r=m.threadKey;m=m.threadType;var s=g.sort(function(a,b){return b.sortOrderMs-a.sortOrderMs})[0],t=g.length===1&&s.msg==null?{id:s.externalId,sortOrderMs:s.sortOrderMs}:null,u={displayName:q,globalIndex:d("MWContentSearchUtils").getGlobalIndex(s.sortOrderMs),matchCount:(i||(i=d("I64"))).of_int32(g.length),profilePicUrl:o,query:e,secondaryProfilePicUrl:p,threadKey:r,threadType:m,type_:j};if(t==null)await a.runInTransaction(async function(a){await n(a,babelHelpers.extends({},u,d("MWContentSearchUtils").getContextLineAndMatches(e,g.length,s==null?void 0:(a=s.msg)==null?void 0:a.content,j),{messageId:d("MWContentSearchUtils").getMessageId(g.length,s==null?void 0:(a=s.msg)==null?void 0:a.msgId),messageOtid:d("MWContentSearchUtils").getMessageOtid(g.length,s==null?void 0:s.externalId),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(s==null?void 0:s.sortOrderMs)}))},"readwrite",void 0,void 0,f.id+":243");else{c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+h+"_start"});q=await l.load().then(function(b){b=b.issueQueryAsPromiseForSearchResult;return b(a,k,[t],"viewerId")});if(q!=null&&q.length!==0){var v=q[0];c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+h+"_end"});await a.runInTransaction(async function(a){await n(a,babelHelpers.extends({},u,d("MWContentSearchUtils").getContextLineAndMatches(e,g.length,s==null?void 0:(a=s.msg)==null?void 0:a.content,j),{messageOtid:v.externalId,messageTimestampMs:v.sortOrderMs!=null?(i||(i=d("I64"))).of_float(v.sortOrderMs):void 0}))},"readwrite",void 0,void 0,f.id+":285")}else c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+h+"_end"})}})),function(){c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:o.length}},point:"issue_secure_search_query_end"}),c("promiseDone")(a.runInTransaction(async function(a){await m(a,e,{hasNextPage:!1,resultCount:(i||(i=d("I64"))).of_int32(o.length),status:(h||(h=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)})},"readwrite",void 0,void 0,f.id+":325"))},function(a){c("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",a==null?void 0:a.message)})}g.updateSecureMsgMatchCountForThread=a;g.clearSecureMsgMatchCountForThread=b;g.getSecureMsgsMatchCountForThread=e;g.search=o}),98);
__d("isEBSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4741")}g["default"]=a}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),k=c("justknobx")._("2605");function a(a,b,c){var e;return Promise.all([(e=d("ReQL")).mergeJoin(e.fromTableAscending(c.tables.participants,[]).getKeyRange(a),e.fromTableAscending(c.tables.contacts)),e.firstAsync(e.fromTableAscending(c.tables.threads).getKeyRange(a))]).then(function(a){var c=a[0];a[1];a=c.filter(function(a){a[0];a=a[1];a=(h||(h=d("I64"))).equal(a.id,b);return!a}).map(function(a){a[0];a=a[1];return a});return d("ReQL").firstAsync(a)})}function l(a,b){return d("MAWChatJid").toThreadKeyMaybe(b,a.chatJid).then(function(c){return c==null?Promise.resolve([null,a]):Promise.all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.threads).getKeyRange(c)),Promise.resolve(a)])})}async function m(a,b){a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b)));return a}function n(a,b){var e=b.query;b=b.threadKey;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange((i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,b))}function o(a,b,e,g,j,k,o,p){p===void 0&&(p=c("LSSearchRequestStatusType").COMPLETE);var q=function(f){return l(a,f).then(function(a){var l=a[0];if(l==null)return;var o=a[1],q=o.msg;if(q==null)return;if(o!=null)return Promise.all([d("MWSearchThreadUtils").getThreadPics(l,j,k),d("MWSearchThreadUtils").getThreadParticipants(l,k),(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))?m(k,q.sender):Promise.resolve(null),(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))?n(f,{query:e,threadKey:l.threadKey}):Promise.resolve(null)]).then(function(a){var k=a[0],m=k[0];k=k[1];var n=a[1],r=a[2];a=a[3];(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(l.threadKey,b);n=babelHelpers.extends({},d("MWContentSearchUtils").getContextLineAndMatches(e,b,q.content,g),{displayName:d("MWSearchThreadUtils").getThreadDisplayName(j,l,n,r,g),globalIndex:(h||(h=d("I64"))).of_float(-o.sortOrderMs),matchCount:h.of_int32(b),messageId:q.msgId,messageOtid:o.externalId,messageTimestampMs:(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&b>1?void 0:(h||(h=d("I64"))).of_string(""+o.sortOrderMs),profilePicUrl:(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&r!=null?r.profilePictureUrl:m,query:e,secondaryProfilePicUrl:(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&r!=null?r.profilePictureFallbackUrl:k,threadKey:l.threadKey,threadType:l.threadType,type_:g});if((h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))||a==null)m=f.message_search_results.put(n);else{r=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(a,n);m=f.message_search_results.upsert([g,a.query,a.threadKey,a.globalIndex],babelHelpers.extends({},r,{globalIndex:n.globalIndex}))}return Promise.all([f.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:h.of_int32(b),status:(i||(i=d("LSIntEnum"))).ofNumber(p),threadKeyV2:l.threadKey,type_:g}),m]).then(c("emptyFunction"))})})};return o!=null?q(o):k.runInTransaction(function(a){return q(a)},"readwrite",void 0,void 0,f.id+":284")}async function p(a,b,c,e){e!=null&&e.flow.qplAddPoint({instanceKey:e.instanceKey,point:"search_local_result_start"});b=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:b,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH});return Promise.all(b.map(function(b){if(b.recordType==="msg"){b.matchedTerms;b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,["matchedTerms","recordType"]);return d("MAWChatJid").toThreadKeyMaybe(a.tables,c.chatJid).then(function(a){return[c,a]})}}).filter(Boolean)).then(function(a){a=c!=null?a.filter(function(a){a[0];a=a[1];return a!=null&&(h||(h=d("I64"))).equal(a,c)}):a.filter(function(a){a[0];a=a[1];return a!=null});var b=null;c!=null&&(b={int:{numResult:a.length}});e!=null&&e.flow.qplAddPoint({annotations:babelHelpers.extends({},b),instanceKey:e.instanceKey,point:"search_local_result_end"});return a})}function b(a,b,e,f){d("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread();return p(e,a,void 0,f).then(function(g){g=Object.values(c("groupBy")(g,function(a){a[0];a=a[1];return a==null?"":(h||(h=d("I64"))).to_string(a)}));f!=null&&f.flow.qplAddAnnotations({annotations:{int:{numResult:g.length}}});return g.map(function(f){var g=f[0];if(g!==null){g=g[0];return o(g,f.length,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),b,e)}}).reduce(function(a,b){return Promise.all([a,b]).then(c("emptyFunction"))},Promise.resolve())})}function e(a,b,e,f,g,h){return Promise.all(f.map(function(f){return o(f,g,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),h,a,b)})).then(c("emptyFunction"))}function q(a,b,e,f,g){return Promise.all(e.map(function(e){return o(e,f,b,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),g,a)})).then(c("emptyFunction"))}function r(a,b,e,g,l){return g.runInTransaction(function(e){return e.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(0),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING),threadKeyV2:b,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":463").then(function(c){return p(g,a,b,l)}).then(function(m){var n=m.length,p=m.filter(function(a){var b=a[0];a[1];return b.msg!=null}).length,r=p,s=function(){var f=m.map(function(a){a=a[0];return a}).filter(function(a){return a.msg==null});if(f.length===0)return Promise.resolve();f=f.slice(0,k);l.flow.qplAddPoint({annotations:{int:{numRequestedMessages:f.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_start"});return c("MAWMiActOnActThreadReadyDeferred")(g,b,"MWMessageSearchInput.react",function(b,c){var i=f.map(function(a){return{id:a.externalId,sortOrderMs:a.sortOrderMs}});return j.load().then(function(b){var f=b.issueQueryAsPromiseForSearchResult,j=(h||(h=d("I64"))).to_string(e);b=f(g,c,i,j);return b==null?Promise.resolve():b.then(async function(b){var d=b;if(b.length!==i.length){l.flow.qplAddPoint({annotations:{int:{numRemainingMessages:i.length-b.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_partial"});var h=i.filter(function(a){return!d.some(function(b){return b.externalId===a.id})});if(h.length>0){h=await f(g,c,h,j);h!=null&&(d=[].concat(b,h))}}r=p+d.length;l.flow.qplAddPoint({annotations:{int:{numRespondedMessages:d.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_end"});return q(g,a,d,r,e)})})})};return Promise.all([m.map(function(b){b=b[0];return o(b,n,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),e,g,void 0,c("LSSearchRequestStatusType").PENDING)}).reduce(function(a,b){return Promise.all([a,b]).then(c("emptyFunction"))},Promise.resolve()),c("isEBSearchEnabled")()?s():Promise.resolve()]).then(function(e){return g.runInTransaction(function(e){return e.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(r),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:b,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":618")}).then(function(a){return Promise.resolve()})})}g.getThreadOtherParticipantContact=a;g.searchSecureDatabaseThreads=b;g.addBridgeSearchMsgsToSearchResult=e;g.addMessagesToSearchResult=q;g.searchSecureDatabaseMessages=r}),98);
__d("WebStorageManagerEstimatesFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2144");b=d("FalcoLoggerInternal").create("web_storage_manager_estimates",a);e=b;g["default"]=e}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("LSIntEnum")).ofNumber(c("LSMessageSearchType").THREAD);async function a(a,b,e,g,h,k){var l;d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(e,h.length);var m=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(j,g,e)),n=m==null;l=(i||(i=d("I64"))).to_int32((l=m==null?void 0:m.matchCount)!=null?l:(i||(i=d("I64"))).zero);var o=l+h.length;l=await d("MWSearchThreadUtils").getThreadDataByThreadKey(a,e,i.of_string(d("MAWCurrentUser").getID()),j);if(l==null)return;var p=l.profilePicUrl,q=l.secondaryProfilePicUrl,r=l.threadDisplayName,s=l.threadType,t=m==null?void 0:m.globalIndex,u=d("MWContentSearchUtils").getGlobalIndex(h[0].sortOrderMs,m==null?void 0:m.globalIndex),v=async function(a){var b;await a.message_search_results.upsert([j,g,e,(b=t)!=null?b:u],babelHelpers.extends({},d("MWContentSearchUtils").getContextLineAndMatches(g,o,(b=h[0].msg)==null?void 0:b.content,j),{displayName:r,globalIndex:u,matchCount:(i||(i=d("I64"))).of_int32(o),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(h[0].sortOrderMs),profilePicUrl:p,query:g,secondaryProfilePicUrl:q,threadKey:e,threadType:s,type_:j}));n&&await a.message_search_queries.put(babelHelpers.extends({},k,{resultCount:(i||(i=d("I64"))).add(k.resultCount,i.one)}))};c("gkx")("11537")?c("promiseDone")(a.runInTransaction(async function(a){await v(a)},"readwrite",void 0,void 0,f.id+":116")):b!=null&&await v(b)}g.default=a}),98);/*FB_PKG_DELIM*/
__d("BinarySearch",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";e={GREATEST_LOWER_BOUND:"GREATEST_LOWER_BOUND",GREATEST_STRICT_LOWER_BOUND:"GREATEST_STRICT_LOWER_BOUND",LEAST_STRICT_UPPER_BOUND:"LEAST_STRICT_UPPER_BOUND",LEAST_UPPER_BOUND:"LEAST_UPPER_BOUND",NEAREST:"NEAREST"};var h=function(a,b){if(typeof a!=="number"||typeof b!=="number")throw c("unrecoverableViolation")("The default comparator can only be used with sequences of numbers.","comet_infra");return a-b},i=e.GREATEST_LOWER_BOUND,j=e.GREATEST_STRICT_LOWER_BOUND,k=e.LEAST_STRICT_UPPER_BOUND,l=e.LEAST_UPPER_BOUND,m=e.NEAREST;function n(a,b,c,d,e){e===void 0&&(e=h);var f=l;f=p(a,b,c,d,e,f);if(c<=f&&f<d){c=a(f);return e(c,b)===0?c:void 0}else return void 0}function o(a,b,c,d,e){e===void 0&&(e=h);var f=l;f=p(a,b,c,d,e,f);if(c<=f&&f<d)return e(a(f),b)===0?f:-1;else return-1}function p(a,b,d,e,f,g){switch(g){case l:return q(a,b,d,e,f);case i:return r(a,b,d,e,f);case k:return s(a,b,d,e,f);case j:return t(a,b,d,e,f);case m:return u(a,b,d,e,f);default:throw c("unrecoverableViolation")("Invalid mode "+g,"comet_infra")}}function q(a,b,c,d,e){c=c;d=d;while(c+1<d){var f=c+Math.floor((d-c)/2);e(a(f),b)>=0?d=f:c=f}return c<d&&e(a(c),b)>=0?c:d}function r(a,b,c,d,e){return s(a,b,c,d,e)-1}function s(a,b,c,d,e){c=c;d=d;while(c+1<d){var f=c+Math.floor((d-c)/2);e(a(f),b)>0?d=f:c=f}return c<d&&e(a(c),b)>0?c:d}function t(a,b,c,d,e){return q(a,b,c,d,e)-1}function u(a,b,c,d,e){var f=r(a,b,c,d,e),g=Math.abs(e(a(f),b));e=Math.abs(e(a(f+1),b));return g<e?Math.max(f,c):Math.min(f+1,d-1)}function a(a,b,c){return n(function(b){return a[b]},b,0,a.length,c)}function b(a,b,c){return o(function(b){return a[b]},b,0,a.length,c)}function d(a,b,c,d){return p(function(b){return a[b]},b,0,a.length,c,d)}g.GREATEST_LOWER_BOUND=i;g.GREATEST_STRICT_LOWER_BOUND=j;g.LEAST_STRICT_UPPER_BOUND=k;g.LEAST_UPPER_BOUND=l;g.NEAREST=m;g.find=n;g.findIndex=o;g.findBound=p;g.leastUpperBound=q;g.greatestLowerBound=r;g.leastStrictUpperBound=s;g.greatestStrictLowerBound=t;g.nearest=u;g.findInArray=a;g.findIndexInArray=b;g.findBoundInArray=d}),98);
__d("CometUFIReactionsAnimationPreloader",["DynamicUFIReactionTypes","DynamicUFIReactionsKeyframesAssets","Keyframes","Promise","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=!1;function k(a){var e=[];for(var f of Object.keys(c("DynamicUFIReactionsKeyframesAssets").reactions))if(a.indexOf(f)!==-1){var g=c("DynamicUFIReactionsKeyframesAssets").reactions[f];if(typeof g==="string"){var i={assetName:c("DynamicUFIReactionTypes").reactions[f].name,projectName:"feedback_reactions"};e.push(d("Keyframes").load(g,i))}}return(h||(h=b("Promise"))).all(e).then(c("emptyFunction"))}a=function(){function a(){}var e=a.prototype;e.loadLikeActionIcon=function(){i||(i=d("Keyframes").load(c("DynamicUFIReactionsKeyframesAssets").likeAction,{assetName:"like_action",projectName:"feedback_reactions"}));return i};e.load=function(a){j||(j=!0,c("promiseDone")(this.$1(a),function(){},function(){j=!1}))};e.loadAll=function(){j||(j=!0,c("promiseDone")((h||(h=b("Promise"))).all([this.$1(Object.keys(c("DynamicUFIReactionsKeyframesAssets").reactions)),this.loadLikeActionIcon()]),function(){},function(){j=!1}))};e.preloadAll=function(){for(var a of Object.values(c("DynamicUFIReactionsKeyframesAssets").reactions))typeof a==="string"&&d("Keyframes").preload(a);d("Keyframes").preload(c("DynamicUFIReactionsKeyframesAssets").likeAction)};e.$1=function(a){return k(a)};return a}();g["default"]=a}),98);
__d("CubicBezier",[],(function(a,b,c,d,e,f){var g=.005;a=function(){function a(a,b){this.cx=3*a[0],this.bx=3*(b[0]-a[0])-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a[1],this.by=3*(b[1]-a[1])-this.cy,this.ay=1-this.cy-this.by}var b=a.prototype;b.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a};b.solve=function(a){a=this.solveCurveX(a);return((this.ay*a+this.by)*a+this.cy)*a};b.solveCurveX=function(a){var b,c,d,e;for(d=a,c=0;c<8;c++){e=this.sampleCurveX(d)-a;if(Math.abs(e)<g)return d;b=(3*this.ax*d+2*this.bx)*d+this.cx;if(Math.abs(b)<1e-6)break;d-=e/b}b=0;c=1;d=a;if(d<b)return b;if(d>c)return c;while(b<c){e=this.sampleCurveX(d);if(Math.abs(e-a)<g)return d;a>e?b=d:c=d;d=(c-b)/2+b}return d};return a}();f["default"]=a}),66);
__d("FunnelAction",[],(function(a,b,c,d,e,f){"use strict";var g="name",h="payload",i="relative_time",j="tag";a=function(){function a(a,b,c,d){this.$1={},this.$1[g]=a,this.$1[i]=b,c!==void 0&&(this.$1[j]=c),d!==void 0&&(this.$1[h]=JSON.stringify(d))}var b=a.prototype;b.getData=function(){return this.$1};return a}();f["default"]=a}),66);
__d("FunnelRegistry",[],(function(a,b,c,d,e,f){a=Object.freeze({WWW_EXAMPLE_FUNNEL:!0,MSITE_EXAMPLE_FUNNEL:!0,WWW_FEED_SHARE_DIALOG_FUNNEL:!0,MSITE_FEED_SHARE_DIALOG_FUNNEL:!0,WWW_CHAT_QUICKCAM_FUNNEL:!0,PLATFORM_SHARE_DIALOG_FUNNEL:!0,WWW_CANVAS_EDITOR_FUNNEL:!0,MSITE_COMMENT_TYPING_FUNNEL:!0,MSITE_NOTE_READING_FUNNEL:!0,WWW_LISTS_COMPOSER_FUNNEL:!0,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:!0,WWW_REACTIONS_NUX_FUNNEL:!0,WWW_COMMENT_REACTIONS_NUX_FUNNEL:!0,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:!0,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:!0,WWW_LEAD_GEN_MSITE_AD_UNIT_FUNNEL:!0,WWW_LINK_PICKER_DIALOG_FUNNEL:!0,WWW_MEME_PICKER_DIALOG_FUNNEL:!0,WWW_SHOP_BUY_FUNNEL:!0,WWW_SNOWLIFT_ACTIONS_FUNNEL:!0,WWW_CANVAS_AD_CREATION_FUNNEL:!0,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:!0,WWW_CONSTITUENT_TITLE_UPSELL_FUNNEL:!0,WWW_PAGE_CREATION_FUNNEL:!0,WWW_RECRUITING_PRODUCTS_FUNNEL:!0,WWW_RECRUITING_SEARCH_FUNNEL:!0,WWW_RECRUITING_BULK_EMAIL_FUNNEL:!0,WWW_RECRUITING_LEAVE_HANDLER_FUNNEL:!0,WWW_PMT_FUNNEL:!0,WWW_PULSE_FUNNEL:!0,WWW_ORGTOOL_FUNNEL:!0,WWW_VIDEOS_CASTING_FUNNEL:!0,MSITE_PPD_FUNNEL:!0,WWW_CMS_SEARCH_FUNNEL:!0,SOCIAL_SEARCH_CONVERSION_WWW_FUNNEL:!0,SOCIAL_SEARCH_DASHBOARD_WWW_FUNNEL:!0,GAMES_QUICKSILVER_FUNNEL:!0,SRT_USER_FLOW_FUNNEL:!0,WWW_MEME_PIVOT_FUNNEL:!0,WWW_NOTIFICATION_FUNNEL:!0,MSITE_FEED_ALBUM_CTA_FUNNEL:!0,MTOUCH_COMMENT_STORIES_FUNNEL:!0,WWW_MESSENGER_SHARE_TO_FB_FUNNEL:!0,MISINFORMATION_RESHARE_ALERT_FUNNEL:!0,FACECAST_BROADCASTER_FUNNEL:!0,FACECAST_SCHEDULED_LIVE_FUNNEL:!0,SCHEDULED_WATCH_PARTY_VIEWER_FUNNEL:!0,COLLEGE_COMMUNITY_NUX_ONBOARDING_FUNNEL:!0,WWW_MESSENGER_SEARCH_SESSION_FUNNEL:!0,WWW_MESSENGER_CONTENT_SEARCH_FUNNEL:!0,WWW_LIVE_PRODUCER_FUNNEL:!0,WWW_AD_BREAKS_ONBOARDING_FUNNEL:!0,WWW_LAUNCHPAD_ONBOARDING_FUNNEL:!0,WWW_LEAD_GEN_FORM_EDITOR_FUNNEL:!0,WWW_AD_BREAK_HOME_ONBOARDING_FUNNEL:!0,WEB_MESSENGER_RTC_FUNNEL:!0,WEB_RTC_SCREEN_SHARING_FUNNEL:!0,MTOUCH_NUX_PROFILE_PIC_FUNNEL:!0,ADS_VIDEO_CAPTION_FUNNEL:!0,WWW_BUSINESS_ALERT_FUNNEL:!0,SOCIAL_VR_INTERACTIVE_THREE_SIXTY_FUNNEL:!0,WWW_DIVEBAR_RECENTS_FUNNEL:!0,UNIDASH_EDIT_WIDGET_FUNNEL:!0,MESSENGER_UNIVERSAL_SEARCH_FUNNEL:!0,WWW_BUSINESS_CREATION_FUNNEL:!0,WWW_BUSINESS_VERIFICATION_FUNNEL:!0,WWW_APP_REVIEW_BUSINESS_VERIFICATION_FUNNEL:!0,AEC_APPLICATION_FUNNEL:!0,WWW_MESSENGER_POLL_GROUP_CREATE_FUNNEL:!0,ADS_USER_REPORTING_FUNNEL:!0,MAP_WEB_FUNNEL:!0,INTERN_OOPS_FUNNEL:!0,FRX_FUNNEL:!0,WWW_ACCESSIBILITY_NOTIFICATIONS_JEWEL_TABBING_FUNNEL:!0,MTOUCH_FEED_MISSED_STORIES_FUNNEL:!0,WWW_STORYSET_FUNNEL:!0,POLYGLOT_MAIN_FUNNEL:!0,CREATIVE_STUDIO_CREATION_FUNNEL:!0,CREATIVE_STUDIO_HUB_FUNNEL:!0,CREATIVE_STUDIO_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_SEND_FUNNEL:!0,WWW_LIVE_VIEWER_TIPJAR_FUNNEL:!0,WWW_FUNDRAISER_CREATION_FUNNEL:!0,WWW_FUNDRAISER_EDIT_FUNNEL:!0,WWW_FBL_FUNNEL:!0,WWW_CLUE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_POST_LIKE_FUNNEL:!0,WWW_SEE_OFFERS_CTA_NUX_FUNNEL:!0,WWW_CHEVRON_FUNNEL:!0,MSITE_AD_BREAKS_ONBOARDING_FLOW_FUNNEL:!0,CASUAL_GROUP_PICKER_FUNNEL:!0,TOPICS_TO_FOLLOW_FUNNEL:!0,WWW_SPATIAL_REACTION_PRODUCTION_FUNNEL:!0,WWW_ADS_TARGETING_AUDIENCE_MANAGER_FUNNEL:!0,WWW_NEWSFEED_TAILLOAD_FUNNEL:!0,SEARCH_ADS_WWW_FUNNEL:!0,KEYFRAMES_FUNNEL:!0,WWW_NOTIFS_UP_NEXT_FUNNEL:!0,MSITE_PROFILE_PICTURE_EDIT_FUNNEL:!0,WWW_PROFILE_INTRO_CARD_EDIT_MEDIA_FUNNEL:!0,BUSINESS_PAYMENTS_MERCHANT_ONBOARDING_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_INSIGHTS_NEW_FUNNEL:!0,SELLER_EXPERIENCE_ONBOARDING_NEW_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_NEW_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_MANAGEMENT_FUNNEL:!0,CHANNEL_EDIT_FUNNEL:!0,PAYOUT_ONBOARDING_FUNNEL:!0,SERVICES_INSTANT_BOOKING_SETTINGS_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_CREATION_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_FULL_SETUP_FUNNEL:!0,MATCHED_MARKET_LIFT_INTERNAL_FUNNEL:!0,FB_NEO_ONBOARDING_FUNNEL:!0,FB_NEO_FRIENDING_FUNNEL:!0,SEARCH_FUNNEL:!0,SHADOW_SEARCH_FUNNEL:!0,SHADOW_EARLY_END_SEARCH_FUNNEL:!0,TEXT_DELIGHTS_OPT_OUT_NUX_FUNNEL:!0,TEXT_DELIGHTS_COMPOSER_FUNNEL:!0,PRIVATE_COMMENT_COMPOSER_FUNNEL:!0,CHECKOUT_EXPERIENCES_FUNNEL:!0,CHECKOUT_EXPERIENCES_SELLER_FUNNEL:!0,MESSENGER_SECONDARY_SEARCH_FUNNEL:!0,WWW_SERVICES_INSTANT_BOOKING_CONSUMER_FUNNEL:!0,WWW_PRESENCE_FUNNEL:!0,WWW_SERVICES_BOOK_APPOINTMENT_CONSUMER_FUNNEL:!0,WWW_SPHERICAL_DIRECTOR_FUNNEL:!0,SELLER_EXPERIENCE_MIGRATION_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_FUNNEL:!0,NATIVE_SUPPORT_FUNNEL:!0,PRIVACY_SHORTCUTS_FUNNEL:!0,PRIVACY_ACCESS_HUB_FUNNEL:!0,WWW_POLITICIAN_OFFICE_SETTING_FUNNEL:!0,WWW_CIVIC_ACTION_POST_INVITE_FUNNEL:!0,WWW_CIVIC_ACTION_POST_CREATION_FUNNEL:!0,NT_NFAS_EXAMPLE_FUNNEL:!0,WWW_ONCALL_VIEW_FUNNEL:!0,WWW_ESCALATION_TOOLS_NOTIFICATIONS_PAGE_FUNNEL:!0,ALL_VOICES_FUNNEL:!0,WWW_MESSENGER_SHARE_FILE_PREVIEW_FUNNEL:!0,POST_TRANSACTION_FUNNEL:!0,INSTANT_EXPERIENCES_MINDBODY_FUNNEL:!0,WWW_CTW_WHATSAPP_VERIFICATION_FLOW_FUNNEL:!0,PIE_MANAGER_HIRING_HUB_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_OUTREACH_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_REVIEW_FUNNEL:!0,IG_WEB_STORY_CREATION_FUNNEL:!0,IG_WEB_IGTV_CREATION_FUNNEL:!0,IG_WEB_ONE_TAP_REGISTRATION_FUNNEL:!0,IG_WEB_SHARE_FUNNEL:!0,IG_WEB_NUX_FUNNEL:!0,IG_WEB_OBA_FUNNEL:!0,WWW_FB_CHAT_NEW_SETTINGS_MENU_FUNNEL:!0,FLEXIBLE_STARS_WWW_FUNNEL:!0,PAYMENT_APP_FUNNEL:!0,WWW_MESSENGER_VIDEO_CHAT_LINKS_FUNNEL:!0,KAIOS_REG_CONTACT_IMPORTER_FUNNEL:!0,ONEVC_CALL_ROUTING_FUNNEL:!0,AR_HUB_UPLOAD_FUNNEL:!0,FHT_FUNNEL:!0,WWW_PCR_FUNNEL:!0,MARKETPLACE_GIFT_CARD_FUNNEL:!0,WORK_CHAT_SEARCH_FUNNEL:!0,DISCOVER_MIGRATION_FUNNEL:!0,ZERO_PLACEHOLDER_FUNNEL:!0,FOS_MON_PURCHASE_FLOW_FUNNEL:!0});f["default"]=a}),66);
__d("Funnel",["BinarySearch","FunnelAction","FunnelRegistry","sprintf","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h="name",i="instance_id",j="start_time",k="tags",l="actions",m="sampling_rate",n="timeout_sec",o="beacon_id",p="beacon_session_id",q="funnel_level_beacon_id",r="funnel_level_beacon_session_id",s="is_web";a={EXPLICIT:"explicit",TIMEOUT:"timeout",SESSION_END:"session_end",RESTART:"restart",ACTIONS_FULL:"actions_full"};b={ACTION_END:"funnel_end",ACTION_WINDOW_BLUR:"window_blur",ACTION_WINDOW_FOCUS:"window_focus"};var t=600;e=function(){function a(a,b,d,e,f){if(c("FunnelRegistry")[a]!==!0)throw c("unrecoverableViolation")("Funnel name not registered.","comet_infra");this.$1=a;this.$2=b;this.$3=[];this.$4={};this.$5=d;this.$6=f;this.timeout_sec=t;this.shouldTrackFocus=!1;this.$7=e;this.$9=-1;this.$10=-1;this.$11=-1;this.$12=-1;this.$8=null;this.devModeLogger("Started funnel")}var b=a.prototype;b.addTag=function(a){if(typeof a!=="string")throw c("unrecoverableViolation")("Funnel tag should be a String.","comet_infra");this.$4[a]=!0;this.devModeLogger("Added funnel tag %s",a);return this};b.appendAction=function(a,b,e,f){var g=this;f===void 0&&(f=Date.now());f=new(c("FunnelAction"))(a,f-this.$6,b,e);e=d("BinarySearch").leastStrictUpperBound(function(a){return g.$3[a].getData()},f.getData(),0,this.$3.length,function(a,b){if(a.name==="funnel_end")return 1;return b.name==="funnel_end"?-1:a.relative_time-b.relative_time});this.$3.splice(e,0,f);b?this.devModeLogger("Appended action %s with tag %s",a,b):this.devModeLogger("Appended action %s",a);this.$8=a;return this};b.appendActionIfNew=function(a,b,c){a!==this.$8&&this.appendAction(a,b,c);return this};b.getLogData=function(){var a={};a[h]=this.$1;this.$2!==void 0?a[i]=this.$2:a[i]=Math.floor(Math.random()*65536);a[j]=this.$6;a[m]=this.$5;a[n]=this.timeout_sec;a[k]=[];for(var b in this.$4)this.$4[b]===!0&&a[k].push(b);if(this.$3.length>0){a[l]=[];for(b=0;b<this.$3.length;b++)a[l].push(this.$3[b].getData())}this.$10!==-1&&this.$9!==-1&&(a[p]=this.$10,a[o]=this.$9);this.$12!==-1&&this.$11!==-1&&(a[r]=this.$12,a[q]=this.$11);a[s]=1;return a};b.devModeLogger=function(){};b.getTags=function(){return this.$4};b.getFunnelName=function(){return this.$1};b.addReliabilityStats=function(a,b){if(typeof a!=="number")throw c("unrecoverableViolation")("SessionID of current funnel lib reliability stats should be a number.","comet_infra");if(typeof b!=="number")throw c("unrecoverableViolation")("Counter of current funnel lib reliability stats should be a number.","comet_infra");this.$10=a;this.$9=b;this.devModeLogger("Added funnel sessionID %d and counter %d.",a,b);return this};b.addReliabilityStatsForCurFunnel=function(a,b){if(typeof a!=="number")throw c("unrecoverableViolation")("SessionID of current funnel lib reliability stats should be a number.","comet_infra");if(typeof b!=="number")throw c("unrecoverableViolation")("Counter of current funnel lib reliability stats should be a number.","comet_infra");this.$12=a;this.$11=b;this.devModeLogger("Added funnel sessionID %d and counter %d.",a,b);return this};return a}();g.EndType=a;g.ActionType=b;g.Funnel=e}),98);
__d("FunnelLoggerSampler",["FunnelLoggerConfig"],(function(a,b,c,d,e,f){"use strict";function a(a){a=g(a);return a===0?!1:Math.random()*a<1}function g(a){a=b("FunnelLoggerConfig").freq[a];a===void 0&&(a=b("FunnelLoggerConfig").freq["default"]);return a}e.exports={shouldLog:a,getSamplingRate:g}}),null);
__d("FunnelReliabilityWhitelist",[],(function(a,b,c,d,e,f){a=["SEARCH_FUNNEL"];f["default"]=a}),66);
__d("FunnelReliabilityStatsCollector",["FunnelReliabilityWhitelist","MarauderLogger","WebStorage","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j,k="fas_reliability_lib_stats_overall",l="fas_reliability_funnel_stats_overall",m=1800,n="funnel_analytics_data_loss",o="fas_reliability_lib_stats_wl",p="fas_reliability_funnel_stats_wl",q=0,r={};function a(){return c("gkx")("20977")?!0:!1}function s(){i||(i=!0,j=(h||(h=c("WebStorage"))).getLocalStorage());return j}function t(){var a=s();if(!a)return null;a=a.getItem(l);if(a)return JSON.parse(a);else{a=Math.floor(Date.now()/1e3);return{startCount:0,endCount:0,cancelCount:0,prevCount:0,lastFlushTimestamp:a}}}function u(a){var b=s();if(!b)return null;b=b.getItem(p);if(b)return JSON.parse(b);else{b={};b[a]={startCount:0,endCount:0,cancelCount:0,prevCount:0};return b}}function v(){var a=s();if(!a)return null;a=a.getItem(p);return a?JSON.parse(a):null}function b(a){var b=t();if(!b)return;q+=1;b.startCount?b.startCount=parseInt(b.startCount,10)+1:b.startCount=1;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,l,JSON.stringify(b));w(a)}function w(a){var b=u(a);if(!b||!c("FunnelReliabilityWhitelist").includes(a))return;var d=r[a]?r[a]+1:1;r[a]=d;d=b[a];d?d.startCount?d.startCount=parseInt(d.startCount,10)+1:d.startCount=1:(d={},d.startCount=1,d.prevCount=0,d.cancelCount=0,d.endCount=0);b[a]=d;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,p,JSON.stringify(b))}function e(a){var b=t();if(!b)return;q-=1;b.cancelCount?b.cancelCount=parseInt(b.cancelCount,10)+1:b.cancelCount=1;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,l,JSON.stringify(b));x(a)}function x(a){var b=u(a);if(!b||!c("FunnelReliabilityWhitelist").includes(a))return;var d=r[a]?r[a]-1:0;r[a]=d;d=b[a];d?d.cancelCount?d.cancelCount=parseInt(d.cancelCount,10)+1:d.cancelCount=1:(d={},d.startCount=0,d.prevCount=0,d.cancelCount=1,d.endCount=0);b[a]=d;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,p,JSON.stringify(b))}function f(a){var b=t();if(!b)return;q-=1;b.endCount?b.endCount=parseInt(b.endCount,10)+1:b.endCount=1;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,l,JSON.stringify(b));y(a)}function y(a){var b=u(a);if(!b||!c("FunnelReliabilityWhitelist").includes(a))return;var d=r[a]?r[a]-1:0;r[a]=d;d=b[a];d?d.endCount?d.endCount=parseInt(d.endCount,10)+1:d.endCount=1:(d={},d.startCount=0,d.prevCount=0,d.cancelCount=0,d.endCount=1);b[a]=d;(h||(h=c("WebStorage"))).setItemGuarded(localStorage,p,JSON.stringify(b))}function z(){var a=t();if(!a)return!1;if(a.lastFlushTimestamp){var b=Math.floor(Date.now()/1e3);return b-parseInt(a.lastFlushTimestamp,10)>=m}return!1}function A(a,b){a=s();if(!a)return;var d=Math.floor(Date.now()/1e3);b={startCount:0,endCount:0,cancelCount:0,prevCount:b,lastFlushTimestamp:d};(h||(h=c("WebStorage"))).setItemGuarded(a,l,JSON.stringify(b))}function B(a,b){var d=s();if(!d||!a||Object.keys(a).length==0)return;var e={};for(a in a){var f=b[a];f={startCount:0,endCount:0,cancelCount:0,prevCount:f?f:0};e[a]=f}(h||(h=c("WebStorage"))).setItemGuarded(d,p,JSON.stringify(e))}function C(a,b,c,e){var f=a.prevCount,g=a.startCount,h=a.endCount;a=a.cancelCount;var i=f+g-h-a-b;g={start:g,end:h,cancel:a,prev:f,ongoing:b,loss:i};h={overall:g};if(c){a={};for(f in c){b=c[f];i=b.prevCount;g=b.startCount;var j=b.endCount;b=b.cancelCount;var k=e[f]?e[f]:0,l=i+g-j-b-k;g={start:g,end:j,cancel:b,prev:i,ongoing:k,loss:l};a[f]=g}h.funnel_level_data_loss=a}d("MarauderLogger").log(n,null,h)}function D(){if(!z())return;var a=t();if(!a)return;A(a,q);var b=v();b&&B(b,r);C(a,q,b,r)}function E(){var a=s();if(!a)return null;var b=a.getItem(k);b=b?JSON.parse(b):{};var d=b.counter,e=b.session;d?(d=parseInt(d,10)+1,e=parseInt(b.session,10)):(d=1,e=Math.floor(Math.random()*65536));(h||(h=c("WebStorage"))).setItemGuarded(a,k,JSON.stringify({counter:d,session:e}));return[e,d]}function F(a){if(!c("FunnelReliabilityWhitelist").includes(a))return null;var b=s();if(!b)return null;var d=b.getItem(o),e=void 0,f={};d&&(f=JSON.parse(d),e=f[a]);var g=e?e.counter:void 0;e=e?e.session:void 0;g?(g=parseInt(g,10)+1,e=parseInt(e,10)):(g=1,e=Math.floor(Math.random()*65536));var i={};d?(f[a]={counter:g,session:e},i=f):i[a]={counter:g,session:e};(h||(h=c("WebStorage"))).setItemGuarded(b,o,JSON.stringify(i));return[e,g]}g.passFunnelLevelStatsRolloutGK=a;g.onFunnelStart=b;g.onFunnelCancel=e;g.onFunnelEnd=f;g.maybeFlushFunnelLevelStats=D;g.increaseAndGetLibLevelStats=E;g.maybeIncreaseAndGetLibLevelStatsForCurFunnel=F}),98);
__d("FunnelLogger",["Banzai","FBLogger","Funnel","FunnelLoggerSampler","FunnelRegistry","FunnelReliabilityStatsCollector","MarauderLogger","clearTimeout","gkx","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g={},h=!1,i=!0;function a(a,b){B(a,b)}function c(a,b,c){B(a,c,b)}function d(a,b){a=D(a,b);return!E(a)?null:g[a]}function f(a,b){}function j(a,b,c){c===void 0?F(a,void 0,b):c&&F(a,b,c)}function k(a,c){c=D(a,c);E(c)&&(g[c].devModeLogger("Cancelled funnel"),H(c),g[c]=void 0,b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelCancel(a),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function l(a,b){C(a,b)}function m(a,b,c){C(a,c,b)}function n(a,b,c){c===void 0?I(a,void 0,String(b)):I(a,Number(b),c)}function o(a,b,c){c===void 0?J(a,void 0,Boolean(b)):J(a,Number(b),c)}function p(a,b,c){c===void 0?K(a,void 0,String(b),void 0):K(a,Number(b),c,void 0)}function q(a,b,c){c===void 0?L(a,void 0,String(b),void 0):L(a,Number(b),c,void 0)}function r(a,b,c,d){d===void 0?K(a,void 0,String(c),void 0,void 0,b):K(a,Number(c),d,void 0,void 0,b)}function s(a,b,c,d){d===void 0?K(a,void 0,String(b),c):K(a,Number(b),c,d)}function t(a,b,c,d,e){e===void 0?K(a,void 0,String(c),d,void 0,b):K(a,Number(c),d,e,void 0,b)}function u(a,b,c,d){d===void 0?L(a,void 0,String(b),c):L(a,Number(b),c,d)}function v(a,b,c,d){d===void 0?K(a,void 0,String(b),void 0,c):K(a,Number(b),String(c),void 0,d)}function w(a,b,c,d,e){e===void 0?K(a,void 0,String(c),void 0,d,b):K(a,Number(c),String(d),void 0,e,b)}function x(a,b,c,d){d===void 0?L(a,void 0,String(b),void 0,c):L(a,Number(b),String(c),void 0,d)}function y(a,b,c,d,e){e===void 0?K(a,void 0,String(b),c,d):K(a,Number(b),String(c),String(d),e)}function z(a,b,c,d,e,f){f===void 0?K(a,void 0,String(c),d,e,b):K(a,Number(c),String(d),String(e),f,b)}function A(a,b,c,d,e){e===void 0?L(a,void 0,String(b),c,d):L(a,Number(b),String(c),String(d),e)}function B(a,c,d){var e=D(a,c);R();M(e);b("FunnelLoggerSampler").shouldLog(a)&&(g[e]=new(b("Funnel").Funnel)(a,c,b("FunnelLoggerSampler").getSamplingRate(a),!1,d!=null?d:Date.now()),G(e),b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelStart(a),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function C(a,c,d){a=D(a,c);E(a)&&(g[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.EXPLICIT,void 0,d),N(a))}function D(a,c){if(b("FunnelRegistry")[a]!==!0){b("FBLogger")("funnel_validation").blameToPreviousFile().mustfix("Funnel name `%s` not registered",a);throw b("unrecoverableViolation")("Funnel name `"+a+"` not registered.","comet_infra")}if(c==null)return a;else return a+c.toString()}function E(a){return g[a]!==void 0}function F(a,b,c){a=D(a,b);E(a)&&(g[a].timeout_sec=c,g[a].devModeLogger("Timeout set to %s sec",c),G(a))}function G(a){H(a),g[a].timeout_handle=b("setTimeout")(function(){g[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.TIMEOUT),N(a)},1e3*g[a].timeout_sec)}function H(a){g[a].timeout_handle&&b("clearTimeout")(g[a].timeout_handle)}function I(a,b,c){a=D(a,b);E(a)&&(g[a].addTag(c),G(a))}function J(a,b,c){a=D(a,b);E(a)&&(g[a].shouldTrackFocus=c,g[a].devModeLogger("Focus tracking %s",c?"on":"off"))}function K(a,b,c,d,e,f){a=D(a,b);E(a)&&(g[a].appendAction(c,d,e,f),G(a))}function L(a,b,c,d,e){a=D(a,b);E(a)&&g[a].appendActionIfNew(c,d,e)}function M(a){E(a)&&(g[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.RESTART),N(a))}function N(a){if(E(a)){if(b("gkx")("20976")){var c=b("FunnelReliabilityStatsCollector").increaseAndGetLibLevelStats();if(c){var d=c[0];c=c[1];g[a].addReliabilityStats(d,c)}}d=g[a].getFunnelName();c=g[a].getLogData();b("MarauderLogger").log("funnel_analytics",null,c);g[a].devModeLogger("Logged: %s",JSON.stringify(c));H(a);g[a]=void 0;b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelEnd(d),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats())}}function O(){for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&E(a)&&(g[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.SESSION_END),N(a))}function P(){if(i){i=!1;for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&E(a)&&g[a].shouldTrackFocus&&(g[a].appendAction(b("Funnel").ActionType.ACTION_WINDOW_BLUR),H(a))}}function Q(){if(!i){i=!0;for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&E(a)&&g[a].shouldTrackFocus&&(g[a].appendAction(b("Funnel").ActionType.ACTION_WINDOW_FOCUS),H(a))}}function R(){h||(h=!0,window.addEventListener&&(b("Banzai").subscribe(b("Banzai").SHUTDOWN,O),window.addEventListener("blur",P),window.addEventListener("focus",Q)))}e.exports={addFunnelTag:n,appendAction:p,appendActionAtTime:r,appendActionAtTimeWithPayload:w,appendActionAtTimeWithTag:t,appendActionAtTimeWithTagAndPayload:z,appendActionIfNew:q,appendActionWithPayload:v,appendActionWithPayloadIfNew:x,appendActionWithTag:s,appendActionWithTagAndPayload:y,appendActionWithTagAndPayloadIfNew:A,appendActionWithTagIfNew:u,cancelFunnel:k,endFunnel:l,endFunnelAtTime:m,getFunnelInstance:d,setFunnelTimeout:j,setFunnelTrackFocus:o,startFunnel:a,startFunnel_DEV_MODE:f,startFunnelAtTime:c}}),null);
__d("KeyframesPerformanceLog",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60;a=function(){function a(a,b){this.$1=0,this.$2=-1,this.$3=-1,this.$6=a,this.$5=b,this.$6=a,this.reset()}var b=a.prototype;b.onNextFrame=function(a){this.$7=a};b.start=function(){if(this.$2<0||this.$3>=0){var a=(h||(h=c("performanceNow")))();this.$2<0?this.$2=a:this.$3>=0&&(this.$2+=a-this.$3,this.$3=-1);this.$5&&this.$5("start")}};b.pause=function(){this.$3<0&&this.$2>=0&&(this.$3=(h||(h=c("performanceNow")))(),this.$5&&this.$5("pause"))};b.reset=function(){this.$1=0,this.$4={one:0,two:0,four:0,eight:0},this.$3=-1,this.$2=-1};b.addFrame=function(){this.$1+=1,this.$7&&(this.$7(),this.$7=null)};b.addFrameDrop=function(a){a>=8?this.$4.eight+=1:a>=4?this.$4.four+=1:a>=2?this.$4.two+=1:a>=1&&(this.$4.one+=1)};b.finish=function(){if(this.$2>=0){var a=(h||(h=c("performanceNow")))(),b=this.$3>=0?a-this.$3:0;a=Math.max(Math.floor(a-this.$2-b),1);b=this.$1?this.$1/a*1e3:i;this.$6({animation_duration:a,display_refresh_rate:i,eight_frame_drop_count:this.$4.eight,four_frame_drop_count:this.$4.four,frame_rate:b,one_frame_drop_count:this.$4.one,two_frame_drop_count:this.$4.two});this.reset()}};return a}();g["default"]=a}),98);
__d("KeyframesPluginsLoader",["Bootloader","KeyframesPluginLogger","Promise","flatbuffers"],(function(a,b,c,d,e,f,g){"use strict";var h,i={DynamicProperties:function(a){return c("Bootloader").loadModules(["KeyframesPluginDynamicProperties","KeyframesPluginDynamicPropertiesSchema"],a,"KeyframesPluginsLoader")},LayerName:function(a){return c("Bootloader").loadModules(["KeyframesPluginLayerName","KeyframesPluginLayerNameSchema"],a,"KeyframesPluginsLoader")},LayerTags:function(a){return c("Bootloader").loadModules(["KeyframesPluginLayerTags","KeyframesPluginLayerTagsSchema"],a,"KeyframesPluginsLoader")},RandomSubdocument:function(a){return c("Bootloader").loadModules(["KeyframesPluginRandomSubdocument","KeyframesPluginRandomSubdocumentSchema"],a,"KeyframesPluginsLoader")},Sound:function(a){return c("Bootloader").loadModules(["KeyframesPluginSound","KeyframesPluginSoundSchema"],a,"KeyframesPluginsLoader")},SubdocumentSwap:function(a){return c("Bootloader").loadModules(["KeyframesPluginSubdocumentSwap","KeyframesPluginSubdocumentSwapSchema"],a,"KeyframesPluginsLoader")},TrimPath:function(a){return c("Bootloader").loadModules(["KeyframesPluginTrimPath","KeyframesPluginTrimPathSchema"],a,"KeyframesPluginsLoader")}};function j(a,b){return i[a]?i[a](b):null}function k(a){a=a.map(function(a){return new(h||(h=b("Promise")))(function(b,c){var d=j(a,function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];b(c)});d||c("Unknown plugin "+a)})});return(h||(h=b("Promise"))).all(a)}a=function(){a.fromPluginTable=function(b){d("KeyframesPluginLogger").KeyframesPluginLogger.log(b);return k(b).then(function(c){return new a(b,c)})};a.getSupportedPlugins=function(){return i};function a(a,b){this.instances=[],this.$1={},this.$2={},this.$4=a,this.$3=b}var b=a.prototype;b.getPluginTable=function(){return this.$4};b.getPluginsForLayer=function(a){return this.$1[a]};b.maybeInstantiatePluginsForLayer=function(a){var b=a.id();if(!this.$2[b]){var c=a.pluginsLength();if(c)for(var e=0;e<c;e++){var f=a.plugins(e),g=new(d("flatbuffers").ByteBuffer)(f.contentArray());f=f.index();if(this.$3[f]){var h=this.$3[f],i=h[0];h=h[1];f="getRootAsPlugin"+this.$4[f];h=h[f](g);f=new i(h,a);this.$1[b]||(this.$1[b]=[]);this.$1[b].push(f);this.instances.push(f);f.animationDidLoad()}}this.$2[b]=!0}};return a}();g["default"]=a}),98);
__d("KeyframesVersion",[],(function(a,b,c,d,e,f){"use strict";var g="2.0.0";function a(){return g}f.getCurrentVersion=a}),66);
__d("FBKeyframesLoggedSession",["BanzaiLogger","CurrentUser","FunnelLogger","KeyframesPerformanceLog","KeyframesPluginsLoader","KeyframesVersion","once","performanceNow","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;a=!1;var i="KEYFRAMES_FUNNEL",j="KeyframesFramePerfLoggerConfig",k=2,l=9e18,m={appid:256281040558,appversion:null,connection_class:null,country:null,deviceid:null,extras:null,isemployee:c("CurrentUser").isEmployee()?1:0,name:"keyframes_frame_perf_report",vc:null,year_class:null};function n(a){return parseInt(a.match(/[a-f0-9]+$/gi),16)}function o(){var a=(h||(h=c("performanceNow")))();return function(){return Math.floor((h||(h=c("performanceNow")))()-a)}}function p(){return{value:Date.now()}}b=function(){function a(b,e){var f=this;this.$2=!1;this.$3=0;this.$5=1;this.$11=d("KeyframesVersion").getCurrentVersion();this.$15=function(b){f.$13("play_ended");f.$3++;if(f.$3===f.$5){b=babelHelpers["extends"]({},b,m,{animation_duration:String(b.animation_duration),asset_id:f.$6.assetID||null,asset_name:f.$6.assetID?null:f.$6.assetName,display_refresh_rate:String(b.display_refresh_rate),keyframes_version:f.$11,project_name:f.$6.projectName,session_id:f.$9});a.performanceLoggingMethod(b);f.$5<l&&(f.$5*=k)}};this.$16=function(a){switch(a){case"start":f.$13("play_started");return;case"pause":f.$13("play_ended");return}};this.$10=e||p();this.$6=b;this.$9=c("uuidv4")();this.$4=n(this.$9)}a.performanceLoggingMethod=function(a){c("BanzaiLogger").log(j,a)};var b=a.prototype;b.startDecode=function(a){var b=this;if(!this.$1){this.$12();this.$13("asset_decode_started",a);var d=o();this.$1=c("once")(function(a,c){b.$13("asset_decode_ended",a,{"time_since:asset_decode_started":d(),plugins_decoded:c||[]})})}return this.$1};b.error=function(a){this.$12(),this.$1?this.$14("asset_decode_failed",a):this.$14("asset_request_failed",a)};b.getUUID=function(){return this.$9};b.getInstanceID=function(){return this.$4};b.getPerformanceLogIfEnabled=function(){var a=this;if(!this.$7){var b=this.$12(),d=new(c("KeyframesPerformanceLog"))(this.$15,this.$16);d.onNextFrame(function(){return a.$13("first_frame_rendered",p(),{"time_since:session_started":b()})});this.$7=d}return this.$7};b.$12=function(){this.$8||(d("FunnelLogger").startFunnelAtTime(i,this.$10.value,this.$4),this.$13("session_started",this.$10,{supported_plugins:Object.keys(c("KeyframesPluginsLoader").getSupportedPlugins())}),this.$8=o());return this.$8};b.$13=function(a,b,c){b=b||p(),this.$2||d("FunnelLogger").appendActionAtTimeWithPayload(i,b.value,this.$4,a,babelHelpers["extends"]({},this.$17(),c))};b.$14=function(a,b){b=b||p(),this.$2||(this.$13("session_failed",b,{fail_reason:a}),d("FunnelLogger").endFunnelAtTime(i,b.value,this.$4),this.$2=!0)};b.$17=function(){return{asset_id:this.$6.assetID||null,asset_name:this.$6.assetID?null:this.$6.assetName,asset_source:"network",keyframes_version:this.$11,project_name:this.$6.projectName,session_id:this.$9}};return a}();g["default"]=b}),98);
__d("KFComponentNames",[],(function(a,b,c,d,e,f){"use strict";a="AUDIO";b="BITMAP";c="IMAGE";d="CHILDREN";e="COMPOSITING";var g="IDENTIFICATION",h="OPACITY",i="PARENT",j="RANDOM_SUBDOCUMENT",k="RANDOM_SUBDOCUMENT_CHILDREN",l="ROOT",m="SCENE",n="SHAPE",o="TIME",p="TRIM_PATH",q="TRANSFORM",r="VIDEO";f.AUDIO=a;f.BITMAP=b;f.CHILDREN=d;f.COMPOSITING=e;f.IMAGE=c;f.IDENTIFICATION=g;f.OPACITY=h;f.PARENT=i;f.RANDOM_SUBDOCUMENT=j;f.RANDOM_SUBDOCUMENT_CHILDREN=k;f.ROOT=l;f.SCENE=m;f.SHAPE=n;f.TIME=o;f.TRIM_PATH=p;f.TRANSFORM=q;f.VIDEO=r}),66);
__d("KFLoaderUtils",["KFComponentNames"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){for(var e=0;e<a.length;e++){var f=a[e],g=b.getComponent(f,d("KFComponentNames").CHILDREN);g=g==null?void 0:g.getChildren();g!=null&&h(g,b,c);c(f,e,a)}}function a(a,b){var c=a.getEntitiesWithComponent(d("KFComponentNames").ROOT)[0];c=a.getComponent(c,d("KFComponentNames").SCENE);if(c==null)return;c=c.getEntities();h(c,a,b)}function b(a){a=a==null?void 0:a.duration();return a==null||a===0?1:a*1e3}function c(a){i.traverseEntitiesAndApply(a,function(b,c,e){if(c+1===e.length)return;e=e[c+1];c=a.getComponent(e,d("KFComponentNames").COMPOSITING);if((c==null?void 0:c.isTrackMatte)!==!0)return;c=a.getComponent(b,d("KFComponentNames").COMPOSITING);c==null&&(c=a.addComponent(b,d("KFComponentNames").COMPOSITING));c.trackMatteId=e.getID()})}var i={getDocumentDuration:b,maybeGenerateTrackMatteIDs:c,traverseEntitiesAndApply:a};e=i;g["default"]=e}),98);
__d("KeyframesSchema",[],(function(a,b,c,d,e,f){var g=g||{};g.keyframes=g.keyframes||{};g.keyframes.CommandType={MoveTo:0,LineTo:1,QuadTo:2,CubicTo:3};g.keyframes.CommandTypeName={0:"MoveTo",1:"LineTo",2:"QuadTo",3:"CubicTo"};g.keyframes.TweenType={Bezier:0,Linear:1,Hold:2};g.keyframes.TweenTypeName={0:"Bezier",1:"Linear",2:"Hold"};g.keyframes.VectorCompositeOrder={FillStroke:0,StrokeFill:1};g.keyframes.VectorCompositeOrderName={0:"FillStroke",1:"StrokeFill"};g.keyframes.StrokeLineCap={Butt:0,Round:1,Square:2};g.keyframes.StrokeLineCapName={0:"Butt",1:"Round",2:"Square"};g.keyframes.StrokeLineJoin={Miter:0,Round:1,Bevel:2};g.keyframes.StrokeLineJoinName={0:"Miter",1:"Round",2:"Bevel"};g.keyframes.TrackMatteType={None:0,Alpha:1,Alpha_Inverted:2};g.keyframes.TrackMatteTypeName={0:"None",1:"Alpha",2:"Alpha_Inverted"};g.keyframes.GradientType={Linear:0,Radial:1};g.keyframes.GradientTypeName={0:"Linear",1:"Radial"};g.keyframes.TextWeight={Thin:0,UltraLight:1,Light:2,Book:3,Medium:4,SemiBold:5,Bold:6,UltraBold:7,Heavy:8,UltraHeavy:9};g.keyframes.TextWeightName={0:"Thin",1:"UltraLight",2:"Light",3:"Book",4:"Medium",5:"SemiBold",6:"Bold",7:"UltraBold",8:"Heavy",9:"UltraHeavy"};g.keyframes.Size=function(){this.bb=null,this.bb_pos=0};g.keyframes.Size.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Size.prototype.width=function(){return this.bb.readFloat32(this.bb_pos)};g.keyframes.Size.prototype.mutate_width=function(a){var b=this.bb.__offset(this.bb_pos,0);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Size.prototype.height=function(){return this.bb.readFloat32(this.bb_pos+4)};g.keyframes.Size.prototype.mutate_height=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Size.createSize=function(a,b,c){a.prep(4,8);a.writeFloat32(c);a.writeFloat32(b);return a.offset()};g.keyframes.Point=function(){this.bb=null,this.bb_pos=0};g.keyframes.Point.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Point.getRootAsPoint=function(a,b){return(b||new g.keyframes.Point()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Point.prototype.x=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Point.prototype.mutate_x=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Point.prototype.y=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Point.prototype.mutate_y=function(a){var b=this.bb.__offset(this.bb_pos,6);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Point.startPoint=function(a){a.startObject(2)};g.keyframes.Point.addX=function(a,b){a.addFieldFloat32(0,b,0)};g.keyframes.Point.addY=function(a,b){a.addFieldFloat32(1,b,0)};g.keyframes.Point.endPoint=function(a){a=a.endObject();return a};g.keyframes.Point.createPoint=function(a,b,c){g.keyframes.Point.startPoint(a);g.keyframes.Point.addX(a,b);g.keyframes.Point.addY(a,c);return g.keyframes.Point.endPoint(a)};g.keyframes.Color=function(){this.bb=null,this.bb_pos=0};g.keyframes.Color.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Color.getRootAsColor=function(a,b){return(b||new g.keyframes.Color()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Color.prototype.red=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint8(this.bb_pos+a):0};g.keyframes.Color.prototype.mutate_red=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeUint8(this.bb_pos+b,a);return!0};g.keyframes.Color.prototype.green=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):0};g.keyframes.Color.prototype.mutate_green=function(a){var b=this.bb.__offset(this.bb_pos,6);if(b===0)return!1;this.bb.writeUint8(this.bb_pos+b,a);return!0};g.keyframes.Color.prototype.blue=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readUint8(this.bb_pos+a):0};g.keyframes.Color.prototype.mutate_blue=function(a){var b=this.bb.__offset(this.bb_pos,8);if(b===0)return!1;this.bb.writeUint8(this.bb_pos+b,a);return!0};g.keyframes.Color.prototype.alpha=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readUint8(this.bb_pos+a):255};g.keyframes.Color.prototype.mutate_alpha=function(a){var b=this.bb.__offset(this.bb_pos,10);if(b===0)return!1;this.bb.writeUint8(this.bb_pos+b,a);return!0};g.keyframes.Color.startColor=function(a){a.startObject(4)};g.keyframes.Color.addRed=function(a,b){a.addFieldInt8(0,b,0)};g.keyframes.Color.addGreen=function(a,b){a.addFieldInt8(1,b,0)};g.keyframes.Color.addBlue=function(a,b){a.addFieldInt8(2,b,0)};g.keyframes.Color.addAlpha=function(a,b){a.addFieldInt8(3,b,255)};g.keyframes.Color.endColor=function(a){a=a.endObject();return a};g.keyframes.Color.createColor=function(a,b,c,d,e){g.keyframes.Color.startColor(a);g.keyframes.Color.addRed(a,b);g.keyframes.Color.addGreen(a,c);g.keyframes.Color.addBlue(a,d);g.keyframes.Color.addAlpha(a,e);return g.keyframes.Color.endColor(a)};g.keyframes.ColorArray=function(){this.bb=null,this.bb_pos=0};g.keyframes.ColorArray.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ColorArray.getRootAsColorArray=function(a,b){return(b||new g.keyframes.ColorArray()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ColorArray.prototype.colors=function(a,b){var c=this.bb.__offset(this.bb_pos,4);return c?(b||new g.keyframes.Color()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ColorArray.prototype.colorsLength=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorArray.startColorArray=function(a){a.startObject(1)};g.keyframes.ColorArray.addColors=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ColorArray.createColorsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ColorArray.startColorsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorArray.endColorArray=function(a){a=a.endObject();return a};g.keyframes.ColorArray.createColorArray=function(a,b){g.keyframes.ColorArray.startColorArray(a);g.keyframes.ColorArray.addColors(a,b);return g.keyframes.ColorArray.endColorArray(a)};g.keyframes.Command=function(){this.bb=null,this.bb_pos=0};g.keyframes.Command.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Command.getRootAsCommand=function(a,b){return(b||new g.keyframes.Command()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Command.prototype.type=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.CommandType.MoveTo};g.keyframes.Command.prototype.mutate_type=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Command.prototype.point=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Command.prototype.control1=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Command.prototype.control2=function(a){var b=this.bb.__offset(this.bb_pos,10);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Command.startCommand=function(a){a.startObject(4)};g.keyframes.Command.addType=function(a,b){a.addFieldInt8(0,b,g.keyframes.CommandType.MoveTo)};g.keyframes.Command.addPoint=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Command.addControl1=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.Command.addControl2=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.Command.endCommand=function(a){a=a.endObject();return a};g.keyframes.Command.createCommand=function(a,b,c,d,e){g.keyframes.Command.startCommand(a);g.keyframes.Command.addType(a,b);g.keyframes.Command.addPoint(a,c);g.keyframes.Command.addControl1(a,d);g.keyframes.Command.addControl2(a,e);return g.keyframes.Command.endCommand(a)};g.keyframes.Path=function(){this.bb=null,this.bb_pos=0};g.keyframes.Path.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Path.getRootAsPath=function(a,b){return(b||new g.keyframes.Path()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Path.prototype.commands=function(a,b){var c=this.bb.__offset(this.bb_pos,4);return c?(b||new g.keyframes.Command()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Path.prototype.commandsLength=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Path.startPath=function(a){a.startObject(1)};g.keyframes.Path.addCommands=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.Path.createCommandsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Path.startCommandsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Path.endPath=function(a){a=a.endObject();return a};g.keyframes.Path.createPath=function(a,b){g.keyframes.Path.startPath(a);g.keyframes.Path.addCommands(a,b);return g.keyframes.Path.endPath(a)};g.keyframes.Tween=function(){this.bb=null,this.bb_pos=0};g.keyframes.Tween.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Tween.getRootAsTween=function(a,b){return(b||new g.keyframes.Tween()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Tween.prototype.type=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.TweenType.Bezier};g.keyframes.Tween.prototype.mutate_type=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Tween.prototype.control1=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Tween.prototype.control2=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Tween.startTween=function(a){a.startObject(3)};g.keyframes.Tween.addType=function(a,b){a.addFieldInt8(0,b,g.keyframes.TweenType.Bezier)};g.keyframes.Tween.addControl1=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Tween.addControl2=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.Tween.endTween=function(a){a=a.endObject();return a};g.keyframes.Tween.createTween=function(a,b,c,d){g.keyframes.Tween.startTween(a);g.keyframes.Tween.addType(a,b);g.keyframes.Tween.addControl1(a,c);g.keyframes.Tween.addControl2(a,d);return g.keyframes.Tween.endTween(a)};g.keyframes.ScalarAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.ScalarAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ScalarAnimation.getRootAsScalarAnimation=function(a,b){return(b||new g.keyframes.ScalarAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ScalarAnimation.prototype.value=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.ScalarAnimation.prototype.mutate_value=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.ScalarAnimation.prototype.values=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ScalarAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarAnimation.prototype.valuesArray=function(){var a=this.bb.__offset(this.bb_pos,6);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ScalarAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ScalarAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ScalarAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ScalarAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarAnimation.startScalarAnimation=function(a){a.startObject(4)};g.keyframes.ScalarAnimation.addValue=function(a,b){a.addFieldFloat32(0,b,0)};g.keyframes.ScalarAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.ScalarAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ScalarAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.ScalarAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ScalarAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.ScalarAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ScalarAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarAnimation.endScalarAnimation=function(a){a=a.endObject();return a};g.keyframes.ScalarAnimation.createScalarAnimation=function(a,b,c,d,e){g.keyframes.ScalarAnimation.startScalarAnimation(a);g.keyframes.ScalarAnimation.addValue(a,b);g.keyframes.ScalarAnimation.addValues(a,c);g.keyframes.ScalarAnimation.addKeyframes(a,d);g.keyframes.ScalarAnimation.addTweens(a,e);return g.keyframes.ScalarAnimation.endScalarAnimation(a)};g.keyframes.ScalarArray=function(){this.bb=null,this.bb_pos=0};g.keyframes.ScalarArray.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ScalarArray.getRootAsScalarArray=function(a,b){return(b||new g.keyframes.ScalarArray()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ScalarArray.prototype.values=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ScalarArray.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarArray.prototype.valuesArray=function(){var a=this.bb.__offset(this.bb_pos,4);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ScalarArray.startScalarArray=function(a){a.startObject(1)};g.keyframes.ScalarArray.addValues=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ScalarArray.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ScalarArray.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarArray.endScalarArray=function(a){a=a.endObject();return a};g.keyframes.ScalarArray.createScalarArray=function(a,b){g.keyframes.ScalarArray.startScalarArray(a);g.keyframes.ScalarArray.addValues(a,b);return g.keyframes.ScalarArray.endScalarArray(a)};g.keyframes.ScalarArrayAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.ScalarArrayAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ScalarArrayAnimation.getRootAsScalarArrayAnimation=function(a,b){return(b||new g.keyframes.ScalarArrayAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ScalarArrayAnimation.prototype.value=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.ScalarArray()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.ScalarArrayAnimation.prototype.values=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.ScalarArray()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ScalarArrayAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarArrayAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ScalarArrayAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarArrayAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ScalarArrayAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ScalarArrayAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ScalarArrayAnimation.startScalarArrayAnimation=function(a){a.startObject(4)};g.keyframes.ScalarArrayAnimation.addValue=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ScalarArrayAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.ScalarArrayAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ScalarArrayAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarArrayAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.ScalarArrayAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ScalarArrayAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarArrayAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.ScalarArrayAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ScalarArrayAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ScalarArrayAnimation.endScalarArrayAnimation=function(a){a=a.endObject();return a};g.keyframes.ScalarArrayAnimation.createScalarArrayAnimation=function(a,b,c,d,e){g.keyframes.ScalarArrayAnimation.startScalarArrayAnimation(a);g.keyframes.ScalarArrayAnimation.addValue(a,b);g.keyframes.ScalarArrayAnimation.addValues(a,c);g.keyframes.ScalarArrayAnimation.addKeyframes(a,d);g.keyframes.ScalarArrayAnimation.addTweens(a,e);return g.keyframes.ScalarArrayAnimation.endScalarArrayAnimation(a)};g.keyframes.PointAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.PointAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.PointAnimation.getRootAsPointAnimation=function(a,b){return(b||new g.keyframes.PointAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.PointAnimation.prototype.value=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.PointAnimation.prototype.values=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.Point()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.PointAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PointAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.PointAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PointAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.PointAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.PointAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PointAnimation.startPointAnimation=function(a){a.startObject(4)};g.keyframes.PointAnimation.addValue=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.PointAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.PointAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.PointAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PointAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.PointAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.PointAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PointAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.PointAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.PointAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PointAnimation.endPointAnimation=function(a){a=a.endObject();return a};g.keyframes.PointAnimation.createPointAnimation=function(a,b,c,d,e){g.keyframes.PointAnimation.startPointAnimation(a);g.keyframes.PointAnimation.addValue(a,b);g.keyframes.PointAnimation.addValues(a,c);g.keyframes.PointAnimation.addKeyframes(a,d);g.keyframes.PointAnimation.addTweens(a,e);return g.keyframes.PointAnimation.endPointAnimation(a)};g.keyframes.ColorAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.ColorAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ColorAnimation.getRootAsColorAnimation=function(a,b){return(b||new g.keyframes.ColorAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ColorAnimation.prototype.value=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Color()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.ColorAnimation.prototype.values=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.Color()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ColorAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ColorAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ColorAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ColorAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorAnimation.startColorAnimation=function(a){a.startObject(4)};g.keyframes.ColorAnimation.addValue=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ColorAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.ColorAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ColorAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.ColorAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ColorAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.ColorAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ColorAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorAnimation.endColorAnimation=function(a){a=a.endObject();return a};g.keyframes.ColorAnimation.createColorAnimation=function(a,b,c,d,e){g.keyframes.ColorAnimation.startColorAnimation(a);g.keyframes.ColorAnimation.addValue(a,b);g.keyframes.ColorAnimation.addValues(a,c);g.keyframes.ColorAnimation.addKeyframes(a,d);g.keyframes.ColorAnimation.addTweens(a,e);return g.keyframes.ColorAnimation.endColorAnimation(a)};g.keyframes.ColorArrayAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.ColorArrayAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ColorArrayAnimation.getRootAsColorArrayAnimation=function(a,b){return(b||new g.keyframes.ColorArrayAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ColorArrayAnimation.prototype.value=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.ColorArray()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.ColorArrayAnimation.prototype.values=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.ColorArray()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ColorArrayAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorArrayAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.ColorArrayAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorArrayAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.ColorArrayAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.ColorArrayAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.ColorArrayAnimation.startColorArrayAnimation=function(a){a.startObject(4)};g.keyframes.ColorArrayAnimation.addValue=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ColorArrayAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.ColorArrayAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ColorArrayAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorArrayAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.ColorArrayAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.ColorArrayAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorArrayAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.ColorArrayAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.ColorArrayAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.ColorArrayAnimation.endColorArrayAnimation=function(a){a=a.endObject();return a};g.keyframes.ColorArrayAnimation.createColorArrayAnimation=function(a,b,c,d,e){g.keyframes.ColorArrayAnimation.startColorArrayAnimation(a);g.keyframes.ColorArrayAnimation.addValue(a,b);g.keyframes.ColorArrayAnimation.addValues(a,c);g.keyframes.ColorArrayAnimation.addKeyframes(a,d);g.keyframes.ColorArrayAnimation.addTweens(a,e);return g.keyframes.ColorArrayAnimation.endColorArrayAnimation(a)};g.keyframes.PathAnimation=function(){this.bb=null,this.bb_pos=0};g.keyframes.PathAnimation.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.PathAnimation.getRootAsPathAnimation=function(a,b){return(b||new g.keyframes.PathAnimation()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.PathAnimation.prototype.value=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Path()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.PathAnimation.prototype.values=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.Path()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.PathAnimation.prototype.valuesLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PathAnimation.prototype.keyframes=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+a*4):0};g.keyframes.PathAnimation.prototype.keyframesLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PathAnimation.prototype.keyframesArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.PathAnimation.prototype.tweens=function(a,b){var c=this.bb.__offset(this.bb_pos,10);return c?(b||new g.keyframes.Tween()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.PathAnimation.prototype.tweensLength=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.PathAnimation.startPathAnimation=function(a){a.startObject(4)};g.keyframes.PathAnimation.addValue=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.PathAnimation.addValues=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.PathAnimation.createValuesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.PathAnimation.startValuesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PathAnimation.addKeyframes=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.PathAnimation.createKeyframesVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addFloat32(b[c]);return a.endVector()};g.keyframes.PathAnimation.startKeyframesVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PathAnimation.addTweens=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.PathAnimation.createTweensVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.PathAnimation.startTweensVector=function(a,b){a.startVector(4,b,4)};g.keyframes.PathAnimation.endPathAnimation=function(a){a=a.endObject();return a};g.keyframes.PathAnimation.createPathAnimation=function(a,b,c,d,e){g.keyframes.PathAnimation.startPathAnimation(a);g.keyframes.PathAnimation.addValue(a,b);g.keyframes.PathAnimation.addValues(a,c);g.keyframes.PathAnimation.addKeyframes(a,d);g.keyframes.PathAnimation.addTweens(a,e);return g.keyframes.PathAnimation.endPathAnimation(a)};g.keyframes.Gradient=function(){this.bb=null,this.bb_pos=0};g.keyframes.Gradient.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Gradient.getRootAsGradient=function(a,b){return(b||new g.keyframes.Gradient()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Gradient.prototype.colorStart=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.ColorAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.colorEnd=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?(a||new g.keyframes.ColorAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.rampStart=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?(a||new g.keyframes.PointAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.rampEnd=function(a){var b=this.bb.__offset(this.bb_pos,10);return b?(a||new g.keyframes.PointAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.type=function(){var a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.GradientType.Linear};g.keyframes.Gradient.prototype.mutate_type=function(a){var b=this.bb.__offset(this.bb_pos,12);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Gradient.prototype.colors=function(a){var b=this.bb.__offset(this.bb_pos,14);return b?(a||new g.keyframes.ColorArrayAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.positions=function(a){var b=this.bb.__offset(this.bb_pos,16);return b?(a||new g.keyframes.ScalarArrayAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.highlightLength=function(a){var b=this.bb.__offset(this.bb_pos,18);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.prototype.highlightAngle=function(a){var b=this.bb.__offset(this.bb_pos,20);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Gradient.startGradient=function(a){a.startObject(9)};g.keyframes.Gradient.addColorStart=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.Gradient.addColorEnd=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Gradient.addRampStart=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.Gradient.addRampEnd=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.Gradient.addType=function(a,b){a.addFieldInt8(4,b,g.keyframes.GradientType.Linear)};g.keyframes.Gradient.addColors=function(a,b){a.addFieldOffset(5,b,0)};g.keyframes.Gradient.addPositions=function(a,b){a.addFieldOffset(6,b,0)};g.keyframes.Gradient.addHighlightLength=function(a,b){a.addFieldOffset(7,b,0)};g.keyframes.Gradient.addHighlightAngle=function(a,b){a.addFieldOffset(8,b,0)};g.keyframes.Gradient.endGradient=function(a){a=a.endObject();return a};g.keyframes.Gradient.createGradient=function(a,b,c,d,e,f,h,i,j,k){g.keyframes.Gradient.startGradient(a);g.keyframes.Gradient.addColorStart(a,b);g.keyframes.Gradient.addColorEnd(a,c);g.keyframes.Gradient.addRampStart(a,d);g.keyframes.Gradient.addRampEnd(a,e);g.keyframes.Gradient.addType(a,f);g.keyframes.Gradient.addColors(a,h);g.keyframes.Gradient.addPositions(a,i);g.keyframes.Gradient.addHighlightLength(a,j);g.keyframes.Gradient.addHighlightAngle(a,k);return g.keyframes.Gradient.endGradient(a)};g.keyframes.Bitmap=function(){this.bb=null,this.bb_pos=0};g.keyframes.Bitmap.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Bitmap.getRootAsBitmap=function(a,b){return(b||new g.keyframes.Bitmap()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Bitmap.prototype.size=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Size()).__init(this.bb_pos+b,this.bb):null};g.keyframes.Bitmap.prototype.content=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?this.bb.readUint8(this.bb.__vector(this.bb_pos+b)+a):0};g.keyframes.Bitmap.prototype.contentLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Bitmap.prototype.contentArray=function(){var a=this.bb.__offset(this.bb_pos,6);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.Bitmap.prototype.name=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.__string(this.bb_pos+b,a):null};g.keyframes.Bitmap.startBitmap=function(a){a.startObject(3)};g.keyframes.Bitmap.addSize=function(a,b){a.addFieldStruct(0,b,0)};g.keyframes.Bitmap.addContent=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Bitmap.createContentVector=function(a,b){a.startVector(1,b.length,1);for(var c=b.length-1;c>=0;c--)a.addInt8(b[c]);return a.endVector()};g.keyframes.Bitmap.startContentVector=function(a,b){a.startVector(1,b,1)};g.keyframes.Bitmap.addName=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.Bitmap.endBitmap=function(a){a=a.endObject();return a};g.keyframes.Bitmap.createBitmap=function(a,b,c,d){g.keyframes.Bitmap.startBitmap(a);g.keyframes.Bitmap.addSize(a,b);g.keyframes.Bitmap.addContent(a,c);g.keyframes.Bitmap.addName(a,d);return g.keyframes.Bitmap.endBitmap(a)};g.keyframes.Video=function(){this.bb=null,this.bb_pos=0};g.keyframes.Video.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Video.getRootAsVideo=function(a,b){return(b||new g.keyframes.Video()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Video.prototype.size=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Size()).__init(this.bb_pos+b,this.bb):null};g.keyframes.Video.prototype.length=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt32(this.bb_pos+a):0};g.keyframes.Video.prototype.mutate_length=function(a){var b=this.bb.__offset(this.bb_pos,6);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Video.prototype.content=function(a){var b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readUint8(this.bb.__vector(this.bb_pos+b)+a):0};g.keyframes.Video.prototype.contentLength=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Video.prototype.contentArray=function(){var a=this.bb.__offset(this.bb_pos,8);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.Video.prototype.name=function(a){var b=this.bb.__offset(this.bb_pos,10);return b?this.bb.__string(this.bb_pos+b,a):null};g.keyframes.Video.startVideo=function(a){a.startObject(4)};g.keyframes.Video.addSize=function(a,b){a.addFieldStruct(0,b,0)};g.keyframes.Video.addLength=function(a,b){a.addFieldInt32(1,b,0)};g.keyframes.Video.addContent=function(a,b){a.addFieldOffset(2,b,0)};g.keyframes.Video.createContentVector=function(a,b){a.startVector(1,b.length,1);for(var c=b.length-1;c>=0;c--)a.addInt8(b[c]);return a.endVector()};g.keyframes.Video.startContentVector=function(a,b){a.startVector(1,b,1)};g.keyframes.Video.addName=function(a,b){a.addFieldOffset(3,b,0)};g.keyframes.Video.endVideo=function(a){a=a.endObject();return a};g.keyframes.Video.createVideo=function(a,b,c,d,e){g.keyframes.Video.startVideo(a);g.keyframes.Video.addSize(a,b);g.keyframes.Video.addLength(a,c);g.keyframes.Video.addContent(a,d);g.keyframes.Video.addName(a,e);return g.keyframes.Video.endVideo(a)};g.keyframes.Plugin=function(){this.bb=null,this.bb_pos=0};g.keyframes.Plugin.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Plugin.getRootAsPlugin=function(a,b){return(b||new g.keyframes.Plugin()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Plugin.prototype.index=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0};g.keyframes.Plugin.prototype.mutate_index=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Plugin.prototype.content=function(a){var b=this.bb.__offset(this.bb_pos,6);return b?this.bb.readUint8(this.bb.__vector(this.bb_pos+b)+a):0};g.keyframes.Plugin.prototype.contentLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Plugin.prototype.contentArray=function(){var a=this.bb.__offset(this.bb_pos,6);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.Plugin.prototype.optional=function(){var a=this.bb.__offset(this.bb_pos,8);return a?!!this.bb.readInt8(this.bb_pos+a):!1};g.keyframes.Plugin.prototype.mutate_optional=function(a){var b=this.bb.__offset(this.bb_pos,8);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Plugin.startPlugin=function(a){a.startObject(3)};g.keyframes.Plugin.addIndex=function(a,b){a.addFieldInt32(0,b,0)};g.keyframes.Plugin.addContent=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Plugin.createContentVector=function(a,b){a.startVector(1,b.length,1);for(var c=b.length-1;c>=0;c--)a.addInt8(b[c]);return a.endVector()};g.keyframes.Plugin.startContentVector=function(a,b){a.startVector(1,b,1)};g.keyframes.Plugin.addOptional=function(a,b){a.addFieldInt8(2,+b,0)};g.keyframes.Plugin.endPlugin=function(a){a=a.endObject();return a};g.keyframes.Plugin.createPlugin=function(a,b,c,d){g.keyframes.Plugin.startPlugin(a);g.keyframes.Plugin.addIndex(a,b);g.keyframes.Plugin.addContent(a,c);g.keyframes.Plugin.addOptional(a,d);return g.keyframes.Plugin.endPlugin(a)};g.keyframes.ProgressMarker=function(){this.bb=null,this.bb_pos=0};g.keyframes.ProgressMarker.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.ProgressMarker.getRootAsProgressMarker=function(a,b){return(b||new g.keyframes.ProgressMarker()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.ProgressMarker.prototype.name=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,a):null};g.keyframes.ProgressMarker.prototype.startProgress=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.ProgressMarker.prototype.mutate_start_progress=function(a){var b=this.bb.__offset(this.bb_pos,6);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.ProgressMarker.prototype.endProgress=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.ProgressMarker.prototype.mutate_end_progress=function(a){var b=this.bb.__offset(this.bb_pos,8);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.ProgressMarker.startProgressMarker=function(a){a.startObject(3)};g.keyframes.ProgressMarker.addName=function(a,b){a.addFieldOffset(0,b,0)};g.keyframes.ProgressMarker.addStartProgress=function(a,b){a.addFieldFloat32(1,b,0)};g.keyframes.ProgressMarker.addEndProgress=function(a,b){a.addFieldFloat32(2,b,0)};g.keyframes.ProgressMarker.endProgressMarker=function(a){a=a.endObject();return a};g.keyframes.ProgressMarker.createProgressMarker=function(a,b,c,d){g.keyframes.ProgressMarker.startProgressMarker(a);g.keyframes.ProgressMarker.addName(a,b);g.keyframes.ProgressMarker.addStartProgress(a,c);g.keyframes.ProgressMarker.addEndProgress(a,d);return g.keyframes.ProgressMarker.endProgressMarker(a)};g.keyframes.Layer=function(){this.bb=null,this.bb_pos=0};g.keyframes.Layer.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Layer.getRootAsLayer=function(a,b){return(b||new g.keyframes.Layer()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Layer.prototype.id=function(){var a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_id=function(a){var b=this.bb.__offset(this.bb_pos,4);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.sublayers=function(a,b){var c=this.bb.__offset(this.bb_pos,6);return c?(b||new g.keyframes.Layer()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Layer.prototype.sublayersLength=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Layer.prototype.fromProgress=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_from_progress=function(a){var b=this.bb.__offset(this.bb_pos,8);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.toProgress=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readFloat32(this.bb_pos+a):1};g.keyframes.Layer.prototype.mutate_to_progress=function(a){var b=this.bb.__offset(this.bb_pos,10);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.anchorPoint=function(a){var b=this.bb.__offset(this.bb_pos,12);return b?(a||new g.keyframes.PointAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.xPosition=function(a){var b=this.bb.__offset(this.bb_pos,14);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.yPosition=function(a){var b=this.bb.__offset(this.bb_pos,16);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.rotation=function(a){var b=this.bb.__offset(this.bb_pos,18);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.scale=function(a){var b=this.bb.__offset(this.bb_pos,20);return b?(a||new g.keyframes.PointAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.path=function(a){var b=this.bb.__offset(this.bb_pos,22);return b?(a||new g.keyframes.PathAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.opacity=function(a){var b=this.bb.__offset(this.bb_pos,24);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.fillColor=function(a){var b=this.bb.__offset(this.bb_pos,26);return b?(a||new g.keyframes.ColorAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.strokeColor=function(a){var b=this.bb.__offset(this.bb_pos,28);return b?(a||new g.keyframes.ColorAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.strokeWidth=function(a){var b=this.bb.__offset(this.bb_pos,30);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.strokeLineCap=function(){var a=this.bb.__offset(this.bb_pos,32);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.StrokeLineCap.Butt};g.keyframes.Layer.prototype.mutate_stroke_line_cap=function(a){var b=this.bb.__offset(this.bb_pos,32);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.gradient=function(a){var b=this.bb.__offset(this.bb_pos,34);return b?(a||new g.keyframes.Gradient()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.strokeLineJoin=function(){var a=this.bb.__offset(this.bb_pos,36);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.StrokeLineJoin.Miter};g.keyframes.Layer.prototype.mutate_stroke_line_join=function(a){var b=this.bb.__offset(this.bb_pos,36);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.miterLimit=function(a){var b=this.bb.__offset(this.bb_pos,38);return b?(a||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.bitmapIndex=function(){var a=this.bb.__offset(this.bb_pos,40);return a?this.bb.readInt32(this.bb_pos+a):-1};g.keyframes.Layer.prototype.mutate_bitmap_index=function(a){var b=this.bb.__offset(this.bb_pos,40);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.subdocumentIndex=function(){var a=this.bb.__offset(this.bb_pos,42);return a?this.bb.readInt32(this.bb_pos+a):-1};g.keyframes.Layer.prototype.mutate_subdocument_index=function(a){var b=this.bb.__offset(this.bb_pos,42);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.plugins=function(a,b){var c=this.bb.__offset(this.bb_pos,44);return c?(b||new g.keyframes.Plugin()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Layer.prototype.pluginsLength=function(){var a=this.bb.__offset(this.bb_pos,44);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Layer.prototype.progressOffset=function(){var a=this.bb.__offset(this.bb_pos,46);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_progress_offset=function(a){var b=this.bb.__offset(this.bb_pos,46);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.clippingPath=function(a){var b=this.bb.__offset(this.bb_pos,48);return b?(a||new g.keyframes.PathAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.position=function(a){var b=this.bb.__offset(this.bb_pos,50);return b?(a||new g.keyframes.PathAnimation()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.isTrackMatte=function(){var a=this.bb.__offset(this.bb_pos,52);return a?!!this.bb.readInt8(this.bb_pos+a):!1};g.keyframes.Layer.prototype.mutate_is_track_matte=function(a){var b=this.bb.__offset(this.bb_pos,52);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.trackMatteType=function(){var a=this.bb.__offset(this.bb_pos,54);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.TrackMatteType.None};g.keyframes.Layer.prototype.mutate_track_matte_type=function(a){var b=this.bb.__offset(this.bb_pos,54);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.vectorCompositeOrder=function(){var a=this.bb.__offset(this.bb_pos,56);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.VectorCompositeOrder.FillStroke};g.keyframes.Layer.prototype.mutate_vector_composite_order=function(a){var b=this.bb.__offset(this.bb_pos,56);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.text=function(a){var b=this.bb.__offset(this.bb_pos,58);return b?this.bb.__string(this.bb_pos+b,a):null};g.keyframes.Layer.prototype.textTypeface=function(a){var b=this.bb.__offset(this.bb_pos,60);return b?this.bb.__string(this.bb_pos+b,a):null};g.keyframes.Layer.prototype.textSize=function(){var a=this.bb.__offset(this.bb_pos,62);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_textSize=function(a){var b=this.bb.__offset(this.bb_pos,62);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textColor=function(a){var b=this.bb.__offset(this.bb_pos,64);return b?(a||new g.keyframes.Color()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Layer.prototype.textAlign=function(){var a=this.bb.__offset(this.bb_pos,66);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_textAlign=function(a){var b=this.bb.__offset(this.bb_pos,66);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textVAlign=function(){var a=this.bb.__offset(this.bb_pos,68);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_textVAlign=function(a){var b=this.bb.__offset(this.bb_pos,68);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textTracking=function(){var a=this.bb.__offset(this.bb_pos,70);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_textTracking=function(a){var b=this.bb.__offset(this.bb_pos,70);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textLeading=function(){var a=this.bb.__offset(this.bb_pos,72);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Layer.prototype.mutate_textLeading=function(a){var b=this.bb.__offset(this.bb_pos,72);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textItalic=function(){var a=this.bb.__offset(this.bb_pos,74);return a?!!this.bb.readInt8(this.bb_pos+a):!1};g.keyframes.Layer.prototype.mutate_textItalic=function(a){var b=this.bb.__offset(this.bb_pos,74);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textWeight=function(){var a=this.bb.__offset(this.bb_pos,76);return a?this.bb.readInt8(this.bb_pos+a):g.keyframes.TextWeight.Thin};g.keyframes.Layer.prototype.mutate_textWeight=function(a){var b=this.bb.__offset(this.bb_pos,76);if(b===0)return!1;this.bb.writeInt8(this.bb_pos+b,a);return!0};g.keyframes.Layer.prototype.textBoxSize=function(a){var b=this.bb.__offset(this.bb_pos,78);return b?(a||new g.keyframes.Size()).__init(this.bb_pos+b,this.bb):null};g.keyframes.Layer.prototype.videoLevels=function(a,b){var c=this.bb.__offset(this.bb_pos,80);return c?(b||new g.keyframes.ScalarAnimation()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Layer.prototype.videoLevelsLength=function(){var a=this.bb.__offset(this.bb_pos,80);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Layer.prototype.videoIndex=function(){var a=this.bb.__offset(this.bb_pos,82);return a?this.bb.readInt32(this.bb_pos+a):-1};g.keyframes.Layer.prototype.mutate_video_index=function(a){var b=this.bb.__offset(this.bb_pos,82);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Layer.startLayer=function(a){a.startObject(40)};g.keyframes.Layer.addId=function(a,b){a.addFieldInt32(0,b,0)};g.keyframes.Layer.addSublayers=function(a,b){a.addFieldOffset(1,b,0)};g.keyframes.Layer.createSublayersVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Layer.startSublayersVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Layer.addFromProgress=function(a,b){a.addFieldFloat32(2,b,0)};g.keyframes.Layer.addToProgress=function(a,b){a.addFieldFloat32(3,b,1)};g.keyframes.Layer.addAnchorPoint=function(a,b){a.addFieldOffset(4,b,0)};g.keyframes.Layer.addXPosition=function(a,b){a.addFieldOffset(5,b,0)};g.keyframes.Layer.addYPosition=function(a,b){a.addFieldOffset(6,b,0)};g.keyframes.Layer.addRotation=function(a,b){a.addFieldOffset(7,b,0)};g.keyframes.Layer.addScale=function(a,b){a.addFieldOffset(8,b,0)};g.keyframes.Layer.addPath=function(a,b){a.addFieldOffset(9,b,0)};g.keyframes.Layer.addOpacity=function(a,b){a.addFieldOffset(10,b,0)};g.keyframes.Layer.addFillColor=function(a,b){a.addFieldOffset(11,b,0)};g.keyframes.Layer.addStrokeColor=function(a,b){a.addFieldOffset(12,b,0)};g.keyframes.Layer.addStrokeWidth=function(a,b){a.addFieldOffset(13,b,0)};g.keyframes.Layer.addStrokeLineCap=function(a,b){a.addFieldInt8(14,b,g.keyframes.StrokeLineCap.Butt)};g.keyframes.Layer.addGradient=function(a,b){a.addFieldOffset(15,b,0)};g.keyframes.Layer.addStrokeLineJoin=function(a,b){a.addFieldInt8(16,b,g.keyframes.StrokeLineJoin.Miter)};g.keyframes.Layer.addMiterLimit=function(a,b){a.addFieldOffset(17,b,0)};g.keyframes.Layer.addBitmapIndex=function(a,b){a.addFieldInt32(18,b,-1)};g.keyframes.Layer.addSubdocumentIndex=function(a,b){a.addFieldInt32(19,b,-1)};g.keyframes.Layer.addPlugins=function(a,b){a.addFieldOffset(20,b,0)};g.keyframes.Layer.createPluginsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Layer.startPluginsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Layer.addProgressOffset=function(a,b){a.addFieldFloat32(21,b,0)};g.keyframes.Layer.addClippingPath=function(a,b){a.addFieldOffset(22,b,0)};g.keyframes.Layer.addPosition=function(a,b){a.addFieldOffset(23,b,0)};g.keyframes.Layer.addIsTrackMatte=function(a,b){a.addFieldInt8(24,+b,0)};g.keyframes.Layer.addTrackMatteType=function(a,b){a.addFieldInt8(25,b,g.keyframes.TrackMatteType.None)};g.keyframes.Layer.addVectorCompositeOrder=function(a,b){a.addFieldInt8(26,b,g.keyframes.VectorCompositeOrder.FillStroke)};g.keyframes.Layer.addText=function(a,b){a.addFieldOffset(27,b,0)};g.keyframes.Layer.addTextTypeface=function(a,b){a.addFieldOffset(28,b,0)};g.keyframes.Layer.addTextSize=function(a,b){a.addFieldFloat32(29,b,0)};g.keyframes.Layer.addTextColor=function(a,b){a.addFieldOffset(30,b,0)};g.keyframes.Layer.addTextAlign=function(a,b){a.addFieldFloat32(31,b,0)};g.keyframes.Layer.addTextVAlign=function(a,b){a.addFieldFloat32(32,b,0)};g.keyframes.Layer.addTextTracking=function(a,b){a.addFieldFloat32(33,b,0)};g.keyframes.Layer.addTextLeading=function(a,b){a.addFieldFloat32(34,b,0)};g.keyframes.Layer.addTextItalic=function(a,b){a.addFieldInt8(35,+b,0)};g.keyframes.Layer.addTextWeight=function(a,b){a.addFieldInt8(36,b,g.keyframes.TextWeight.Thin)};g.keyframes.Layer.addTextBoxSize=function(a,b){a.addFieldStruct(37,b,0)};g.keyframes.Layer.addVideoLevels=function(a,b){a.addFieldOffset(38,b,0)};g.keyframes.Layer.createVideoLevelsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Layer.startVideoLevelsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Layer.addVideoIndex=function(a,b){a.addFieldInt32(39,b,-1)};g.keyframes.Layer.endLayer=function(a){a=a.endObject();return a};g.keyframes.Layer.createLayer=function(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){g.keyframes.Layer.startLayer(a);g.keyframes.Layer.addId(a,b);g.keyframes.Layer.addSublayers(a,c);g.keyframes.Layer.addFromProgress(a,d);g.keyframes.Layer.addToProgress(a,e);g.keyframes.Layer.addAnchorPoint(a,f);g.keyframes.Layer.addXPosition(a,h);g.keyframes.Layer.addYPosition(a,i);g.keyframes.Layer.addRotation(a,j);g.keyframes.Layer.addScale(a,k);g.keyframes.Layer.addPath(a,l);g.keyframes.Layer.addOpacity(a,m);g.keyframes.Layer.addFillColor(a,n);g.keyframes.Layer.addStrokeColor(a,o);g.keyframes.Layer.addStrokeWidth(a,p);g.keyframes.Layer.addStrokeLineCap(a,q);g.keyframes.Layer.addGradient(a,r);g.keyframes.Layer.addStrokeLineJoin(a,s);g.keyframes.Layer.addMiterLimit(a,t);g.keyframes.Layer.addBitmapIndex(a,u);g.keyframes.Layer.addSubdocumentIndex(a,v);g.keyframes.Layer.addPlugins(a,w);g.keyframes.Layer.addProgressOffset(a,x);g.keyframes.Layer.addClippingPath(a,y);g.keyframes.Layer.addPosition(a,z);g.keyframes.Layer.addIsTrackMatte(a,A);g.keyframes.Layer.addTrackMatteType(a,B);g.keyframes.Layer.addVectorCompositeOrder(a,C);g.keyframes.Layer.addText(a,D);g.keyframes.Layer.addTextTypeface(a,E);g.keyframes.Layer.addTextSize(a,F);g.keyframes.Layer.addTextColor(a,G);g.keyframes.Layer.addTextAlign(a,H);g.keyframes.Layer.addTextVAlign(a,I);g.keyframes.Layer.addTextTracking(a,J);g.keyframes.Layer.addTextLeading(a,K);g.keyframes.Layer.addTextItalic(a,L);g.keyframes.Layer.addTextWeight(a,M);g.keyframes.Layer.addTextBoxSize(a,N);g.keyframes.Layer.addVideoLevels(a,O);g.keyframes.Layer.addVideoIndex(a,P);return g.keyframes.Layer.endLayer(a)};g.keyframes.Document=function(){this.bb=null,this.bb_pos=0};g.keyframes.Document.prototype.__init=function(a,b){this.bb_pos=a;this.bb=b;return this};g.keyframes.Document.getRootAsDocument=function(a,b){return(b||new g.keyframes.Document()).__init(a.readInt32(a.position())+a.position(),a)};g.keyframes.Document.bufferHasIdentifier=function(a){return a.__has_identifier("KEYF")};g.keyframes.Document.prototype.size=function(a){var b=this.bb.__offset(this.bb_pos,4);return b?(a||new g.keyframes.Size()).__init(this.bb_pos+b,this.bb):null};g.keyframes.Document.prototype.frameRate=function(){var a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Document.prototype.mutate_frame_rate=function(a){var b=this.bb.__offset(this.bb_pos,6);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Document.prototype.duration=function(){var a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readFloat32(this.bb_pos+a):0};g.keyframes.Document.prototype.mutate_duration=function(a){var b=this.bb.__offset(this.bb_pos,8);if(b===0)return!1;this.bb.writeFloat32(this.bb_pos+b,a);return!0};g.keyframes.Document.prototype.version=function(){var a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt32(this.bb_pos+a):0};g.keyframes.Document.prototype.mutate_version=function(a){var b=this.bb.__offset(this.bb_pos,10);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Document.prototype.rootLayer=function(a){var b=this.bb.__offset(this.bb_pos,12);return b?(a||new g.keyframes.Layer()).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null};g.keyframes.Document.prototype.bitmaps=function(a,b){var c=this.bb.__offset(this.bb_pos,14);return c?(b||new g.keyframes.Bitmap()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Document.prototype.bitmapsLength=function(){var a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.prototype.subdocuments=function(a,b){var c=this.bb.__offset(this.bb_pos,16);return c?(b||new g.keyframes.Document()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Document.prototype.subdocumentsLength=function(){var a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.prototype.plugins=function(a,b){var c=this.bb.__offset(this.bb_pos,18);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,b):null};g.keyframes.Document.prototype.pluginsLength=function(){var a=this.bb.__offset(this.bb_pos,18);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.prototype.id=function(){var a=this.bb.__offset(this.bb_pos,20);return a?this.bb.readInt32(this.bb_pos+a):0};g.keyframes.Document.prototype.mutate_id=function(a){var b=this.bb.__offset(this.bb_pos,20);if(b===0)return!1;this.bb.writeInt32(this.bb_pos+b,a);return!0};g.keyframes.Document.prototype.manifest=function(a){var b=this.bb.__offset(this.bb_pos,22);return b?this.bb.readUint8(this.bb.__vector(this.bb_pos+b)+a):0};g.keyframes.Document.prototype.manifestLength=function(){var a=this.bb.__offset(this.bb_pos,22);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.prototype.manifestArray=function(){var a=this.bb.__offset(this.bb_pos,22);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null};g.keyframes.Document.prototype.progressMarkers=function(a,b){var c=this.bb.__offset(this.bb_pos,24);return c?(b||new g.keyframes.ProgressMarker()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Document.prototype.progressMarkersLength=function(){var a=this.bb.__offset(this.bb_pos,24);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.prototype.videos=function(a,b){var c=this.bb.__offset(this.bb_pos,26);return c?(b||new g.keyframes.Video()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null};g.keyframes.Document.prototype.videosLength=function(){var a=this.bb.__offset(this.bb_pos,26);return a?this.bb.__vector_len(this.bb_pos+a):0};g.keyframes.Document.startDocument=function(a){a.startObject(12)};g.keyframes.Document.addSize=function(a,b){a.addFieldStruct(0,b,0)};g.keyframes.Document.addFrameRate=function(a,b){a.addFieldFloat32(1,b,0)};g.keyframes.Document.addDuration=function(a,b){a.addFieldFloat32(2,b,0)};g.keyframes.Document.addVersion=function(a,b){a.addFieldInt32(3,b,0)};g.keyframes.Document.addRootLayer=function(a,b){a.addFieldOffset(4,b,0)};g.keyframes.Document.addBitmaps=function(a,b){a.addFieldOffset(5,b,0)};g.keyframes.Document.createBitmapsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Document.startBitmapsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Document.addSubdocuments=function(a,b){a.addFieldOffset(6,b,0)};g.keyframes.Document.createSubdocumentsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Document.startSubdocumentsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Document.addPlugins=function(a,b){a.addFieldOffset(7,b,0)};g.keyframes.Document.createPluginsVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Document.startPluginsVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Document.addId=function(a,b){a.addFieldInt32(8,b,0)};g.keyframes.Document.addManifest=function(a,b){a.addFieldOffset(9,b,0)};g.keyframes.Document.createManifestVector=function(a,b){a.startVector(1,b.length,1);for(var c=b.length-1;c>=0;c--)a.addInt8(b[c]);return a.endVector()};g.keyframes.Document.startManifestVector=function(a,b){a.startVector(1,b,1)};g.keyframes.Document.addProgressMarkers=function(a,b){a.addFieldOffset(10,b,0)};g.keyframes.Document.createProgressMarkersVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Document.startProgressMarkersVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Document.addVideos=function(a,b){a.addFieldOffset(11,b,0)};g.keyframes.Document.createVideosVector=function(a,b){a.startVector(4,b.length,4);for(var c=b.length-1;c>=0;c--)a.addOffset(b[c]);return a.endVector()};g.keyframes.Document.startVideosVector=function(a,b){a.startVector(4,b,4)};g.keyframes.Document.endDocument=function(a){a=a.endObject();return a};g.keyframes.Document.finishDocumentBuffer=function(a,b){a.finish(b,"KEYF")};g.keyframes.Document.createDocument=function(a,b,c,d,e,f,h,i,j,k,l,m,n){g.keyframes.Document.startDocument(a);g.keyframes.Document.addSize(a,b);g.keyframes.Document.addFrameRate(a,c);g.keyframes.Document.addDuration(a,d);g.keyframes.Document.addVersion(a,e);g.keyframes.Document.addRootLayer(a,f);g.keyframes.Document.addBitmaps(a,h);g.keyframes.Document.addSubdocuments(a,i);g.keyframes.Document.addPlugins(a,j);g.keyframes.Document.addId(a,k);g.keyframes.Document.addManifest(a,l);g.keyframes.Document.addProgressMarkers(a,m);g.keyframes.Document.addVideos(a,n);return g.keyframes.Document.endDocument(a)};e.exports=g.keyframes}),null);
__d("KeyframesVideoUtils",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h=window.setTimeout,i=4;function a(a){var b=document.createElement("video");b.setAttribute("webkit-playsinline","");b.setAttribute("playsinline","");b.autoplay=!1;b.src=a;b.currentTime=0;a.startsWith("blob:")||(b.crossOrigin="anonymous");return b}function c(a,c){return new(g||(g=b("Promise")))(function(b,d){var e=function b(){a.pause(),a.currentTime=c,a.removeEventListener("canplaythrough",b),f()},f=function c(){a.readyState===i?b(a):h(c,10)},g=function b(c){a.removeEventListener("error",b),d(c)};a.currentTime=c;a.addEventListener("error",g);a.readyState===i?b(a):a.addEventListener("canplaythrough",e)})}f.createVideo=a;f.loadVideo=c}),66);
__d("requestIdleCallback",["cr:7387"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:7387")}),98);
__d("KeyframesAssetDecoder",["BlobFactory","KeyframesPluginsLoader","KeyframesSchema","KeyframesVideoUtils","Promise","flatbuffers","promiseDone","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";var g,h=b("KeyframesSchema").Document,i="medium",j=a.URL||a.webkitURL||{};function k(a){a=new(b("flatbuffers").ByteBuffer)(a);return h.bufferHasIdentifier(a)?h.getRootAsDocument(a):null}function l(a){return new(g||(g=b("Promise")))(function(b,c){var d=new Image();d.onload=function(){return b(d)};d.onerror=function(b){return c("Decode: error requesting image uri "+a)};d.src=a})}function m(a){a=b("KeyframesVideoUtils").createVideo(a);return b("KeyframesVideoUtils").loadVideo(a,0)}function n(b,c,d){return a.createImageBitmap&&!(b instanceof VideoFrame)?b.width<c||b.height<d?p(b,c,d).then(function(b){return a.createImageBitmap(b,0,0,c,d)["catch"](function(a){return b})}):a.createImageBitmap(b,0,0,b.width,b.height,{resizeWidth:c,resizeHeight:d,rezizeQuality:i})["catch"](function(a){return p(b,c,d)}):p(b,c,d)}function o(a,c,d){a.width=c;a.height=d;return(g||(g=b("Promise"))).resolve(a)}function p(a,c,d){return new(g||(g=b("Promise")))(function(b){var e=document.createElement("canvas");e.width=c;e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0,c,d);b(e)})}function q(a,b){var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(e instanceof VideoFrame)continue;var f=b[d].size().width(),g=b[d].size().height();if(f!==e.width||g!==e.height){var h=document.createElement("canvas");h.width=f;h.height=g;var i=h.getContext("2d");i.drawImage(e,0,0,f,g);c.push(h)}else c.push(e)}return c}function r(a,c,d){if(!j.createObjectURL)return(g||(g=b("Promise"))).reject("URL API not supported");var e=j.createObjectURL(a);c=l(e);b("promiseDone")(c,function(){return b("requestIdleCallback")(function(){return j.revokeObjectURL(e)})});return c}function s(c){if(b("BlobFactory").isSupported()){var d=c.contentArray();if(!d)return(g||(g=b("Promise"))).reject("Decode: tried to decode a null bitmap");var e=b("BlobFactory").getBlob([d]),f=c.size().width(),h=c.size().height();return a.createImageBitmap?a.createImageBitmap(e,0,0,f,h)["catch"](function(a){return r(e,f,h)}):r(e,f,h)}return(g||(g=b("Promise"))).reject("Decode: browser does not support bitmap creation")}function t(a){if(b("BlobFactory").isSupported()){var c=a.size();a=a.contentArray();if(!a)return(g||(g=b("Promise"))).reject("Decode: tried to decode a null video");a=b("BlobFactory").getBlob([a]);if(!j.createObjectURL)return(g||(g=b("Promise"))).reject("URL API not supported");var d=j.createObjectURL(a);a=m(d).then(function(a){return o(a,c.width(),c.height())});b("promiseDone")(a,function(){b("requestIdleCallback")(function(){return j.revokeObjectURL(d)})});return a}return(g||(g=b("Promise"))).reject("Decode: browser does not support video creation")}function u(a){var b=[];for(var c=a.pluginsLength()-1;c>=0;c--)b.unshift(a.plugins(c));return b.length?b:null}function v(a){var b=[];for(var c=a.bitmapsLength()-1;c>=0;c--)b.unshift(a.bitmaps(c));return b}function w(a){var b=[];for(var c=a.videosLength()-1;c>=0;c--)b.unshift(a.videos(c));return b}function x(a){var b={};for(var c=0;c<a.length;c++){var d=a[c].name();d&&(b[d]={index:c,width:a[c].size().width(),height:a[c].size().height()})}return b}function y(a){var b={};for(var c=0;c<a.length;c++){var d=a[c].name();d&&(b[d]={index:c,width:a[c].size().width(),height:a[c].size().height()})}return b}function z(a){var b=[];for(var c,d=a.subdocumentsLength()-1;d>=0;d--)c=a.subdocuments(d),b.unshift(c);return b}function A(a){a=k(a);return!a?(g||(g=b("Promise"))).reject("Decode: could not create flatbuffer doc"):B(a)}function B(a){var c=v(a),d=y(c),e=w(a),f=x(e),h=c.filter(function(a){return a.contentLength()||!a.name()}).map(s);e=e.filter(function(a){return a.contentLength()||!a.name()}).map(t);var i=z(a).map(B),j=u(a);j=j?b("KeyframesPluginsLoader").fromPluginTable(j):(g||(g=b("Promise"))).resolve(null);return(g||(g=b("Promise"))).all([g.all(h),g.all(e),j,g.all(i)]).then(function(b){var e=b[0],g=b[1],h=b[2];b=b[3];return{bitmaps:q(e,c),bitmapNames:d,videos:g,videoNames:f,doc:a,pluginsLoader:h,subassets:b}})}function C(a){return!Uint8Array?(g||(g=b("Promise"))).reject("Decode: typed arrays not supported"):(g||(g=b("Promise"))).resolve(new Uint8Array(a))}function D(a,c,d){if(!a.bitmapNames[c]){var e=Object.keys(a.bitmapNames).join(",");return(g||(g=b("Promise"))).reject("Decode: missing replacement bitmap name "+c+", available names: "+e)}e=a.bitmapNames[c];var f=e.index;c=e.width;e=e.height;return n(d,c,e).then(function(b){a.bitmaps[f]=b})}function E(a,c,d){if(!a.videoNames[c]){var e=Object.keys(a.videoNames).join(",");return(g||(g=b("Promise"))).reject("Decode: missing replacement video name "+c+", available names: "+e)}e=a.videoNames[c];var f=e.index;c=e.width;e=e.height;return o(d,c,e).then(function(b){a.videos[f]=b})}function F(a){var b=babelHelpers["extends"]({},a);b.bitmaps=a.bitmaps.slice();return b}var G={awaitForMap:function(a,c){var d={},e=[],f=function(a){var f=a[0];a=a[1];a=c(a,f);e.push(a);b("promiseDone")(a,function(a){return d[f]=a})};for(a of Object.entries(a))f(a);return(g||(g=b("Promise"))).all(e).then(function(){return d})},fromDocumentBytes:function(a){if(a instanceof ArrayBuffer)return C(a).then(A);else if(a instanceof Uint8Array)return A(a);return(g||(g=b("Promise"))).reject("Decode: unsupported byte container passed")},replaceBitmapsWithURIs:function(a,b){return G.awaitForMap(b,function(a){return l(a)}).then(function(b){return G.replaceBitmapsWithImageSources(a,b)})},replaceBitmapsWithImageSources:function(a,b){var c=F(a);return G.awaitForMap(b,function(a,b){return D(c,b,a)}).then(function(){return c})},replaceVideosWithURIs:function(a,b){return G.awaitForMap(b,m).then(function(b){return G.replaceVideosWithVideoSources(a,b)})},replaceVideosWithVideoSources:function(a,b){var c=F(a);return G.awaitForMap(b,function(a,b){return E(c,b,a)}).then(function(){return c})}};e.exports=G}),null);
__d("KeyframesCanvasPolyfills",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a.getTransform!==void 0)return;else a.currentTransform?a.getTransform=function(){var b=a.currentTransform;return{a:b.a,b:b.b,c:b.c,d:b.d,e:b.e,f:b.f}}:a.mozCurrentTransform!==void 0?a.getTransform=function(){var b=a.mozCurrentTransform;return{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}}:a.getTransform=function(){return g}}var g={a:1,b:0,c:0,d:1,e:0,f:0};f.addGetTransformPolyfill=a}),66);
__d("KeyframesCanvasPool",["KeyframesCanvasPolyfills","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=function(a){a.canvas.width=b.$1.width.physical,a.canvas.height=b.$1.height.physical,a.canvas.style.width=b.$1.width.logical+"px",a.canvas.style.height=b.$1.height.logical+"px"};this.$1=a;this.$2=[];this.$3=[]}var b=a.prototype;b.getCanvas=function(){if(this.$2.length){var a=this.$2.pop();this.$3.push(a);return a}else{a=document.createElement("canvas");var b=c("nullthrows")(a.getContext("2d"));d("KeyframesCanvasPolyfills").addGetTransformPolyfill(b);a={canvas:a,ctx:b};this.$4(a);this.$3.push(a);return a}};b.clearAllAllocated=function(){var a=this;this.$3.forEach(function(b){b=b.ctx;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,Math.max(a.$1.width.physical,a.$1.width.intrinsic),Math.max(a.$1.height.physical,a.$1.height.intrinsic))})};b.freeAll=function(){this.$2=[].concat(this.$3,this.$2),this.$3=[]};b.resizeAll=function(){this.$2.forEach(this.$4,this),this.$3.forEach(this.$4,this)};return a}();g["default"]=a}),98);
__d("KeyframesCanvasUtils",["invariant","KeyframesSchema"],(function(a,b,c,d,e,f,g){"use strict";var h=b("KeyframesSchema").StrokeLineCap,i=b("KeyframesSchema").CommandType;f=["miter","round","bevel"];function a(a){return"rgba("+Math.floor(a.red)+","+Math.floor(a.green)+","+Math.floor(a.blue)+","+Math.floor(a.alpha)/255+")"}function c(a){switch(a){case h.Square:return"square";case h.Round:return"round";case h.Butt:default:return"butt"}}function d(a,b){a.beginPath();for(b of b)switch(b.type){case i.MoveTo:a.moveTo(b.point.x,b.point.y);break;case i.CubicTo:b.control1&&b.control2||g(0,2935);a.bezierCurveTo(b.control1.x,b.control1.y,b.control2.x,b.control2.y,b.point.x,b.point.y);break;case i.QuadTo:b.control1||g(0,2936);a.quadraticCurveTo(b.control1.x,b.control1.y,b.point.x,b.point.y);break;case i.LineTo:a.lineTo(b.point.x,b.point.y);break;default:throw new Error("Unrecognized path command "+b.type)}}e.exports={drawPath:d,getCanvasStyle:a,getCanvasLineCap:c,LINE_JOINS:f}}),null);
__d("KeyframesDimensions",["invariant","cr:2680"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("cr:2680").get(),j=function(){function a(a){this.overridden=!1,this.intrinsic=a,this.$1(a)}var b=a.prototype;b.$1=function(a){this.logical=a,this.physical=Math.floor(this.logical*i)};b.scale=function(a,b){this.overridden&&h(0,1136),this.$1(a*b)};b.override=function(a){this.overridden=!0,this.$1(a)};b.reset=function(){this.overridden=!1,this.$1(this.intrinsic)};b.getPhysicalChangeRatio=function(){return this.physical/this.intrinsic};return a}();a=function(){function a(a,b){this.ratio=b?a/b:0,this.width=new j(a),this.height=new j(b)}var b=a.prototype;b.setWidth=function(a){this.width.override(a),this.height.overridden||this.height.scale(a,this.ratio?1/this.ratio:0)};b.setHeight=function(a){this.height.override(a),this.width.overridden||this.width.scale(a,this.ratio)};b.reset=function(){this.height.reset(),this.width.reset()};return a}();g["default"]=a}),98);
__d("KeyframesLoop",["Run","TimeSlice","emptyFunction","gkx","performanceNow","requestAnimationFramePolyfill"],(function(a,b,c,d,e,f,g){"use strict";var h,i=1e3,j=new Set();function k(a){var b=(h||(h=c("performanceNow")))();a.callback(Math.min(b-(a.previousTime||b),i));a.previousTime=b;a.framesRemaining-=1;a.framesRemaining<=0&&a.cancel()}function l(a){j.size>0&&(j.forEach(k),c("requestAnimationFramePolyfill")(l))}c("gkx")("20935")||d("Run").onLeave(function(){j.forEach(function(a){return a.cancel()})});window.addEventListener("focus",function(){j.forEach(function(a){return a.previousTime=(h||(h=c("performanceNow")))()-16.67})});a=function(){function a(a){this.framesRemaining=Infinity,this.callback=a,this.previousTime=0}var b=a.prototype;b.start=function(a){a===void 0&&(a=Infinity),this.framesRemaining=a,this.$1||(j.size===0&&c("requestAnimationFramePolyfill")(l),j.add(this),this.previousTime=(h||(h=c("performanceNow")))(),this.$1=c("TimeSlice").getGuardedContinuation("KeyframesLoop"))};b.cancel=function(){this.$1&&(this.$1(c("emptyFunction")),this.$1=null,j["delete"](this))};b.isRunning=function(){return!!this.$1};return a}();g["default"]=a}),98);
__d("KeyframesPathUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return(c-b)*a+b}function b(a,b,c,d,e,f,g){return e*d+2*c*a*f+b*g}function c(a,b,c,d,e,f,g,h){return e*d*c+f*3*d*a+g*3*c*b+h*b*a}e.exports={interpolateLinear:a,interpolateQuad:b,interpolateCubic:c,lerp:a}}),null);
__d("KeyframesTrackMattes",[],(function(a,b,c,d,e,f){"use strict";a={1:"destination-in",2:"destination-out"};f["default"]=a}),66);
__d("KeyframesTween",["invariant","CubicBezier","KeyframesPathUtils","KeyframesSchema"],(function(a,b,c,d,e,f,g){"use strict";var h=b("KeyframesPathUtils").interpolateCubic,i=b("KeyframesPathUtils").interpolateLinear,j=b("KeyframesPathUtils").interpolateQuad;(d=b("KeyframesSchema")).Color;d.ColorAnimation;d.ColorArray;d.ColorArrayAnimation;d.Command;var k=d.CommandType;d.Path;d.PathAnimation;d.Point;d.PointAnimation;d.ScalarAnimation;d.ScalarArray;d.ScalarArrayAnimation;var l=d.TweenType;function m(a){return a}function n(a){return{x:a.x(),y:a.y()}}function o(a){return{red:a.red(),green:a.green(),blue:a.blue(),alpha:a.alpha()}}function p(a){var b=a.valuesLength(),c=[];for(var d=0;d<b;d++)c.push(a.values(d));return c}function q(a){var b=a.colorsLength(),c=[];for(var d=0;d<b;d++)c.push(o(a.colors(d)));return c}function r(a){var b=a.control1(),c=a.control2();return{type:a.type(),point:n(a.point()),control1:b?n(b):null,control2:c?n(c):null}}function s(a){var b=[];for(var c=0;c<a.commandsLength();c++)b.push(r(a.commands(c)));return b}function t(a,b){if(a>=b.keyframes(b.keyframesLength()-1))return 1;else if(a<b.keyframes(0))return-1;return 0}function u(a,b){if(t(a,b)!==0)return null;var c=0,d=b.keyframesLength()-1;while(c+1<d){var e=Math.floor((d-c)/2+c);b.keyframes(e)<a?c=e:d=e}return c}function v(a,c,d){var e=c.tweens(d),f=e.type();if(f===l.Hold)return 0;a=(a-c.keyframes(d))/(c.keyframes(d+1)-c.keyframes(d));switch(f){case l.Linear:return a;case l.Bezier:default:return new(b("CubicBezier"))([e.control1().x(),e.control1().y()],[e.control2().x(),e.control2().y()]).solve(a)}}var w=function(a,b,c){return a*(c-b)+b};f=function(a,b,c){var d=b.valuesLength(),e=[];for(var f=0;f<d;f++)e.push(w(a,b.values(f),c.values(f)));return e};var x=function(a,b,c){return{x:w(a,b.x(),c.x()),y:w(a,b.y(),c.y())}},y=function(a,b,c){return b&&c?x(a,b,c):null},z=function(a,b,c){return{red:w(a,b.red(),c.red()),green:w(a,b.green(),c.green()),blue:w(a,b.blue(),c.blue()),alpha:w(a,b.alpha(),c.alpha())}};d=function(a,b,c){var d=b.colorsLength(),e=[];for(var f=0;f<d;f++)e.push(z(a,b.colors(f),c.colors(f)));return e};var A=function(a,b,c){var d=[];for(var e=0;e<b.commandsLength();e++){var f=b.commands(e),g=c.commands(e);d.push({type:f.type(),point:x(a,f.point(),g.point()),control1:y(a,f.control1(),g.control1()),control2:y(a,f.control2(),g.control2())})}return d};function a(a,b,c,d){var e=u(c,d);e!=null||g(0,2829);c=v(c,d,e);switch(c){case 0:return b(d.values(e));case 1:return b(d.values(e+1));default:return a(c,d.values(e),d.values(e+1))}}var B=a.bind(null,w,m),C=a.bind(null,f,p),D=a.bind(null,x,n),E=a.bind(null,z,o),F=a.bind(null,d,q),G=a.bind(null,A,s);function H(a,b,c,d){if(b.keyframesLength())switch(t(a,b)){case-1:return d(b.values(0));case 1:return d(b.values(b.valuesLength()-1));case 0:return c(a,b)}return d(b.value())}f=function(a,b){return H(a,b,B,m)};d=function(a,b){return H(a,b,C,p)};a=function(a,b){return H(a,b,D,n)};A=function(a,b){return H(a,b,E,o)};var I=function(a,b){return H(a,b,F,q)},J=function(a,b){return H(a,b,G,s)};function K(a,b,c){return{x:i(a,b.x,c.x),y:i(a,b.y,c.y)}}function L(a,b,c,d){var e=a*a,f=1-a,g=f*f;return{x:j(a,e,f,g,b.x,d.x,c.x),y:j(a,e,f,g,b.y,d.y,c.y)}}function M(a,b,c,d,e){var f=a*a,g=1-a,i=g*g;return{x:h(a,f,g,i,b.x,d.x,e.x,c.x),y:h(a,f,g,i,b.y,d.y,e.y,c.y)}}function N(a,b,c){a=v(a,b,c);b=b.value();var d=n(b.commands(c).point());b=r(b.commands(c+1));switch(b.type){case k.LineTo:return K(a,d,b.point);case k.QuadTo:b.control1||g(0,2830);return L(a,d,b.point,b.control1);case k.CubicTo:b.control1&&b.control2||g(0,2831);return M(a,d,b.point,b.control1,b.control2);default:throw new Error("Unrecognized segment type "+b.type)}}function c(a,b){switch(t(a,b)){case-1:return n(b.value().commands(0).point());case 1:var c=b.value();return n(c.commands(c.commandsLength()-1).point());default:c=u(a,b);c!=null||g(0,2832);return N(a,b,c)}}a={maybeTweenPoint2:a,maybeTweenColor:A,maybeTweenColorArray:I,maybeTweenScalar:f,maybeTweenScalarArray:d,maybeTweenPath:J,tweenPointOnPath:c};e.exports=a}),null);
__d("KeyframesVideoManager",["KeyframesVideoUtils"],(function(a,b,c,d,e,f){"use strict";var g=.2,h=100,i=[.85,1.15];e.exports=function(){function a(a){this.$1=a,this.$3=1/a.doc.frameRate(),this.$2=l(a.doc.rootLayer(),a),this.$4=this.$5()}var c=a.prototype;c.getVideos=function(){return this.$1.videos};c.getTimeWindows=function(){return this.$2};c.forEach=function(a){this.getVideos().forEach(a)};c.pause=function(){this.forEach(function(a){a.pause()})};c.mute=function(){this.forEach(function(a){a.muted=!0})};c.unMute=function(){this.forEach(function(a){a.muted=!1})};c.renderProgress=function(a){var b=this;this.$2.forEach(function(c,d){var e=c.video,f=k(c,a),h=j(c,a);h=b.$1.doc.duration()*h;var l=Math.abs(h-e.currentTime);c=b.$1.doc.duration()*(c.toProgress-c.fromProgress);if(l>g&&e.currentTime<c&&h<c){l=(c-e.currentTime)/(c-h);l>=i[0]&&l<=i[1]&&b.changeVideoPlaybackRate(d,l)}f&&e.paused?e.play():f==!1&&e.paused==!1&&(e.pause(),e.currentTime=0)})};c.$5=function(){return this.$2.map(function(a){var b=a.video;return n(function(a){b.playbackRate=a},h,!0)})};c.changeVideoPlaybackRate=function(a,b){this.$4[a](b)};c.seekToProgress=async function(a){var c=this,d=this.$2.map(async function(d){var e=d.video,f=0;if(k(d,a)){d=j(d,a);f=m(c.$1.doc.duration()*d)}e.pause();e.currentTime=f;await b("KeyframesVideoUtils").loadVideo(e,f)});await Promise.all(d)};return a}();function j(a,b){return b-a.fromProgress}function k(a,b){return b>=a.fromProgress&&b<=a.toProgress}function l(a,b){var c=[],d=a.videoIndex();if(d!=-1){var e=b.videos[d];d=b.doc.videos(d);e!=null&&c.push({fromProgress:a.fromProgress(),toProgress:a.toProgress(),name:d!=null?d.name():null,video:e})}for(d=0;d<a.sublayersLength();d++)c=c.concat(l(a.sublayers(d),b));return c}function m(a){return Math.round(a*100)/100}function n(a,b,c){b===void 0&&(b=100);c===void 0&&(c=!1);var d;return function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(){d=null,c||a.apply(void 0,f)},i=c&&!d;clearTimeout(d);d=setTimeout(h,b);i&&a.apply(void 0,f)}}}),null);
__d("KeyframesRenderer",["invariant","ErrorGuard","KFLoaderUtils","KeyframesCanvasPolyfills","KeyframesCanvasPool","KeyframesCanvasUtils","KeyframesDimensions","KeyframesLoop","KeyframesTrackMattes","KeyframesTween","KeyframesVideoManager","gkx","nullthrows","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=1,m={ERROR_FRAMEDROP:"ERROR_FRAMEDROP"};a=60;var n=1e3/a,o=1,p="source-over";function q(a,b){return c("gkx")("21037")?(j||(j=c("ErrorGuard"))).guard(a,{name:b}):a}var r=function(){function a(a,b){b===void 0&&(b=100),this.$3=!1,this.$4=0,this.$1=a,this.$2=b}var b=a.prototype;b.callOrIgnoreThrottled=function(){if((k||(k=c("performanceNow")))()>=this.$4){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];this.$5(b)}else this.$3=!0};b.callIfIgnored=function(){if(this.$3){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)}};b.callImmediately=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)};b.resetThrottling=function(){this.$4=0};b.$5=function(a){this.$3=!1,this.$4=(k||(k=c("performanceNow")))()+this.$2,this.$1.apply(null,a)};return a}();function s(a,b){if(a.pluginsLoader){a.pluginsLoader.instances.forEach(b);for(var c=a.subassets.length-1;0<=c;c--)s(a.subassets[c],b)}}function t(a,b,c,d){if(a.pluginsLoader){for(var e=a.pluginsLoader.instances.length-1;0<=e;e--)a.pluginsLoader.instances[e].animationWillRenderLayer(b,c,d);for(e=a.subassets.length-1;0<=e;e--)t(a.subassets[e],b,c,d)}}function u(a,b,c,d){a.save(),a.beginPath(),a.arc(b,c,d,0,2*Math.PI,!0),a.closePath(),a.clip(),a.clearRect(b-d,c-d,d*2,d*2),a.restore()}function v(a,b,c,e){e=(i||(i=d("KeyframesTween"))).maybeTweenPoint2(a,b.rampStart());var f=i.maybeTweenPoint2(a,b.rampEnd()),g=b.colors(),h=b.positions();g&&h?(g=(i||(i=d("KeyframesTween"))).maybeTweenColorArray(a,g),h=i.maybeTweenScalarArray(a,h)):(g=[(i||(i=d("KeyframesTween"))).maybeTweenColor(a,b.colorStart()),i.maybeTweenColor(a,b.colorEnd())],h=[0,1]);if(b.type()===l){var j=b.highlightLength();j=j!==null?(i||(i=d("KeyframesTween"))).maybeTweenScalar(a,j):0;var k=b.highlightAngle();k=k!==null?(i||(i=d("KeyframesTween"))).maybeTweenScalar(a,b.highlightAngle()):0;a=e.x;b=e.y;var m=Math.sqrt(Math.pow(e.x-f.x,2)+Math.pow(e.y-f.y,2)),n=Math.acos((f.x-a)/m),o=a+m*j*Math.cos(n-k);n=b-m*j*Math.sin(n-k);k=0;j!==0&&(c.clip(),c.fillStyle=d("KeyframesCanvasUtils").getCanvasStyle(g[g.length-1]),c.fill(),u(c,a,b,m));j=c.createRadialGradient(o,n,k,a,b,m)}else j=c.createLinearGradient(e.x,e.y,f.x,f.y);for(o=0,n=g.length;o<n;o++)j.addColorStop(h[o],d("KeyframesCanvasUtils").getCanvasStyle(g[o]));return j}function w(a,b,e,f,g,h,j,k,l){l===void 0&&(l=o);if(j<Math.max(h.fromProgress(),0)||j>Math.min(h.toProgress(),1))return;try{k&&k.maybeInstantiatePluginsForLayer(h)}catch(a){}a=a;var m,n=h.isTrackMatte(),q=h.trackMatteType();if(n||q!==0){var r=a.getTransform();m=b.getCanvas();m.ctx.setTransform(r.a,r.b,r.c,r.d,r.e,r.f);m.isTrackMatte=n;m.trackMatteType=q;m.ctx.globalCompositeOperation=p;a=m.ctx}a.save();r=h.position();if(r){n=(i||(i=d("KeyframesTween"))).tweenPointOnPath(j,r);q=n.x;r=n.y;a.translate(q,r)}else{n=h.xPosition();n&&a.translate((i||(i=d("KeyframesTween"))).maybeTweenScalar(j,n),0);q=h.yPosition();q&&a.translate(0,(i||(i=d("KeyframesTween"))).maybeTweenScalar(j,q))}r=h.rotation();r&&a.rotate((i||(i=d("KeyframesTween"))).maybeTweenScalar(j,r));n=h.scale();if(n){q=(i||(i=d("KeyframesTween"))).maybeTweenPoint2(j,n);r=q.x;n=q.y;a.scale(r,n)}q=h.anchorPoint();if(q){r=(i||(i=d("KeyframesTween"))).maybeTweenPoint2(j,q);n=r.x;q=r.y;a.translate(-n,-q)}r=h.opacity();r=r!=null?(i||(i=d("KeyframesTween"))).maybeTweenScalar(j,r):1;a.globalAlpha=r*l;n=!1;if(k){q=k.getPluginsForLayer(h.id());if(q)for(var s=0;s<q.length;s++)q[s].render(a,j),n=n||q[s].rendersLayer}h.clippingPath()&&(d("KeyframesCanvasUtils").drawPath(a,(i||(i=d("KeyframesTween"))).maybeTweenPath(j,h.clippingPath())),a.clip());if(!n&&h.path()){d("KeyframesCanvasUtils").drawPath(a,(i||(i=d("KeyframesTween"))).maybeTweenPath(j,h.path()));s=h.gradient();q=h.fillColor();n=!1;var t=!1;s?(a.fillStyle=v(j,s,a),n=!0):q&&(a.fillStyle=d("KeyframesCanvasUtils").getCanvasStyle((i||(i=d("KeyframesTween"))).maybeTweenColor(j,q)),n=!0);if(h.strokeWidth()){s=(i||(i=d("KeyframesTween"))).maybeTweenScalar(j,h.strokeWidth());s>0&&(a.strokeStyle=d("KeyframesCanvasUtils").getCanvasStyle((i||(i=d("KeyframesTween"))).maybeTweenColor(j,h.strokeColor())),a.lineJoin=d("KeyframesCanvasUtils").LINE_JOINS[h.strokeLineJoin()],a.lineCap=d("KeyframesCanvasUtils").getCanvasLineCap(h.strokeLineCap()),a.lineWidth=s,t=!0)}h.vectorCompositeOrder()===0?(n&&a.fill(),t&&a.stroke()):(t&&a.stroke(),n&&a.fill())}q=h.bitmapIndex();s=e[q];s&&s.width!==0&&s.height!==0&&a.drawImage(s,0,0);t=h.videoIndex();n=f[t];n!=null&&a.drawImage(n,0,0,n.width,n.height);q=h.subdocumentIndex();if(g[q]){s=g[q].doc.size();a.save();a.beginPath();a.rect(0,0,s.width(),s.height());a.clip();w(a,b,g[q].bitmaps,g[q].videos,g[q].subassets,g[q].doc.rootLayer(),j-h.progressOffset(),g[q].pluginsLoader,r*l);a.restore()}var u;for(t=0;t<h.sublayersLength();t++){n=w(a,b,e,f,g,h.sublayers(t),j,k,r*l);if(!u&&n&&n.trackMatteType!==void 0)u=n;else if(u&&n&&n.isTrackMatte!==void 0){s=a.getTransform();a.setTransform(1,0,0,1,0,0);u.ctx.setTransform(1,0,0,1,0,0);q=n;u.ctx.globalCompositeOperation=c("KeyframesTrackMattes")[u.trackMatteType===void 0?1:u.trackMatteType];u.ctx.drawImage(q.canvas,0,0);a.drawImage(u.canvas,0,0);a.setTransform(s.a,s.b,s.c,s.d,s.e,s.f);u=void 0;q=void 0}else u&&!n?(a.drawImage(u.canvas,0,0),u=void 0,q=void 0):n&&n.isTrackMatte!==void 0&&(u=void 0,q=void 0)}a.restore();return m}b=function(){function a(a,b){var e=this;this.$5=0;this.$6=0;this.$8=!1;this.$9=!1;this.$10=!1;this.$11=0;this.$16=!1;this.$17=0;this.$18=1;this.$19=1;this.$21=1;this.$22=0;this.$26=function(a){(e.$12||e.$15)&&e.$34(a),!e.$16?e.redrawIfNeeded():(e.$10&&e.$32(),e.$24.renderProgress(e.$11),e.$33(e.$11),e.$11+=a/e.$5,e.$14&&e.$14.callOrIgnoreThrottled(e.$17),e.$11>=e.$21&&(e.$11%=e.$21,e.$19=Math.max(0,e.$19-1),e.$15&&e.$15.finish(),e.$19===0?e.pause():(e.$24.seekToProgress(0),e.$15&&e.$15.start(),e.$11+=e.$22),e.$13&&e.$13(e.$19),e.$30()))};this.$33=q(function(a){a>=0&&a<=1||h(0,750,a),this.$3.clearRect(0,0,this.$23.width.intrinsic,this.$23.height.intrinsic),this.$1.pluginsLoader&&t(this.$1,a,this.$16,this.$8),this.$4.clearAllAllocated(),this.$4.freeAll(),w(this.$3,this.$4,this.$1.bitmaps,this.$1.videos,this.$1.subassets,this.$20,a,this.$1.pluginsLoader),this.$17=a,this.$9=!1,this.$15&&this.$15.addFrame()},"KeyframesRenderer: _renderProgress()");this.$32=q(function(){this.$2.width=this.$23.width.physical,this.$2.height=this.$23.height.physical,this.$2.style.width=this.$23.width.logical+"px",this.$2.style.height=this.$23.height.logical+"px",this.$3.setTransform(1,0,0,1,0,0),this.$3.scale(this.$23.width.getPhysicalChangeRatio(),this.$23.height.getPhysicalChangeRatio()),this.$4.resizeAll(),this.$10=!1,this.$9=!0},"KeyframesRenderer: _resize()");this.$23=new(c("KeyframesDimensions"))(a.doc.size().width(),a.doc.size().height());this.$4=new(c("KeyframesCanvasPool"))(this.$23);this.$2=document.createElement("canvas");this.$3=c("nullthrows")(this.$2.getContext("2d"));d("KeyframesCanvasPolyfills").addGetTransformPolyfill(this.$3);this.$7=new(c("KeyframesLoop"))(this.$26);this.$15=b;this.$24=new(c("KeyframesVideoManager"))(a);this.setDecodedAsset(a);this.$27();this.$25=Promise.resolve()}var b=a.prototype;b.play=function(){this.$16||(this.$16=!0,this.isFinished()&&(this.$19=this.$18,this.$11=this.$22),this.$15&&this.$15.start(),this.$7.start());return this};b.pause=function(){this.$16&&(this.$16=!1,this.$15&&this.$15.pause(),this.$9?this.$28():(this.$7.cancel(),this.$14&&this.$14.callIfIgnored(this.$17)));this.$24.pause();this.$29(this.$24.seekToProgress(this.$17));t(this.$1,this.$17,this.$16,this.$8);return this};b.isPlaying=function(){return this.$16};b.isFinished=function(){return this.$19===0};b.isMuted=function(){return this.$8};b.mute=function(){this.$8=!0,this.$24.mute()};b.unMute=function(){this.$8=!1,this.$24.unMute()};b.repeatCount=function(a){this.$18=this.$19=Math.max(1,a);return this};b.repeatForever=function(){return this.repeatCount(Infinity)};b.getRepeatsRemaining=function(){return this.$19};b.seekToProgress=function(a){var b=this;a>=0&&a<=1||h(0,749,a);this.$14&&this.$14.resetThrottling();this.$17=this.$11=a;this.$29(this.$24.seekToProgress(a).then(function(){return b.$28()}));a===0&&this.$30();this.$28();return this};b.setStartAndEndAt=function(a,b){if(a>=b)throw new Error("Cannot set the start time before the end time.");else if(b<=a)throw new Error("Cannot set the end time before the start time.");this.$22=a;this.$21=b;return this};b.setStartAt=function(a){if(a>=this.$21)throw new Error("Cannot set the start time before the end time.");this.$22=a;return this};b.setEndAt=function(a){if(a<=this.$22)throw new Error("Cannot set the end time before the start time.");this.$21=a;return this};b.getDuration=function(){return this.$5};b.getFrameRate=function(){return this.$6};b.getIntrinsicSize=function(){return[this.$23.width.intrinsic,this.$23.height.intrinsic]};b.getWidth=function(){return this.$23.width.logical};b.getHeight=function(){return this.$23.height.logical};b.setWidth=function(a){this.$23.setWidth(a);this.$27();return this};b.setHeight=function(a){this.$23.setHeight(a);this.$27();return this};b.getDecodedAsset=function(){return babelHelpers.extends({},this.$1)};b.setDecodedAsset=function(a){this.$1=a;this.$5=c("KFLoaderUtils").getDocumentDuration(a.doc);this.$6=a.doc.frameRate();this.$20=a.doc.rootLayer();this.$24=new(c("KeyframesVideoManager"))(a);this.$28();this.$31();return this};b.resetDimensions=function(){this.$23.reset();this.$27();return this};b.onError=function(a){this.$12=a;return this};b.onRepeatEnd=function(a){this.$13=a;return this};b.onProgress=function(a,b){this.$14=a&&new r(a,b);return this};b.getProgress=function(){return this.$17};b.getElement=function(){return this.$2};b.hasPerformanceLogging=function(){return!!this.$15};b.redrawIfNeeded=function(){(this.$10||this.$9)&&(this.$10&&this.$32(),this.$9&&this.$33(this.$17),this.$14&&this.$14.callImmediately(this.$17));return this};b.waitForVideoUpdate=async function(){await this.$25};b.$29=function(a){this.$25=a,c("promiseDone")(a)};b.$27=function(){this.$10=!0,this.$28()};b.$28=function(){this.$9=!0,this.$7.isRunning()||this.$7.start(1)};b.$31=function(){s(this.$1,function(a){return a.animationDidLoad()})};b.$30=function(){var a=this;s(this.$1,function(b){return b.animationWillRepeat(a.$11,a.$19)})};b.$34=function(a){a=Math.round(a/n-1);a>0&&(this.$15&&this.$15.addFrameDrop(a),this.$12&&this.$12(m.ERROR_FRAMEDROP,a))};return a}();f.exports=b}),34);
__d("requestIdleCallbackComet",["IdleCallbackImplementation"],(function(a,b,c,d,e,f,g){"use strict";var h=a.requestIdleCallback||d("IdleCallbackImplementation").requestIdleCallback;function b(b,c){return h.call(a,b,c)}g["default"]=b}),98);
__d("requestIdleCallbackWWW",["cr:694370"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:694370")}),98);